// subject_bss.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

byte g_b804A034 = 0x00; // 0804A034
uint32 dtor_idx.7023 = 0x00; // 0804A038
// subject_ctors.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

<anonymous> * g_ptr8049F0C = &g_tFFFFFFFF; // 08049F0C
// subject_dtors.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

<anonymous> * g_a8049F14[] = // 08049F14
	{
	};
// subject_fini.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0804897C: void _fini()
void _fini()
{
	__do_global_dtors_aux();
}

// subject_got_plt.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 g_dw8049FF8 = 0x00; // 08049FF8
// subject_init.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 08048450: void _init()
// Called from:
//      __libc_csu_init
void _init()
{
	if (g_dw8049FF8 != 0x00)
		__gmon_start__();
	frame_dummy();
	__do_global_ctors_aux();
}

// subject_jcr.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 g_dw8049F1C = 0x00; // 08049F1C
// subject_plt.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 08048490: void __xstat()
void __xstat()
{
}

// 080484A0: void __gmon_start__()
void __gmon_start__()
{
}

// 080484B0: void __printf_chk()
void __printf_chk()
{
}

// 080484C0: void __libc_start_main()
void __libc_start_main()
{
}

// 080484D0: void perror()
void perror()
{
}

// 080484E0: void __strcat_chk()
void __strcat_chk()
{
}

// 080484F0: void fclose()
void fclose()
{
}

// 08048500: void fopen()
void fopen()
{
}

// 08048510: void __stack_chk_fail()
void __stack_chk_fail()
{
}

// 08048520: void __sprintf_chk()
void __sprintf_chk()
{
}

// 08048530: void fread()
void fread()
{
}

// subject_rodata.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 _fp_hw = 0x03; // 08048998
word32 _IO_stdin_used = 0x00020001; // 0804899C
char g_str80489A0[] = "%08lX:"; // 080489A0
char g_str80489A7[] = " %02lX"; // 080489A7
char g_str80489B2[] = "%s\n"; // 080489B2
char g_str80489B6[] = "rb"; // 080489B6
// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 08048540: void _start(Register (ptr32 Eq_14) edx, Stack int32 dwArg00)
void _start(void (* edx)(), int32 dwArg00)
{
	__align((char *) fp + 4);
	__libc_start_main(&g_t80488A0, dwArg00, (char *) fp + 4, &g_t80488F0, &g_t80488E0, edx, fp);
	__hlt();
}

// 08048570: void __do_global_dtors_aux()
// Called from:
//      _fini
void __do_global_dtors_aux()
{
	if (g_b804A034 == 0x00)
	{
		uint32 eax_14 = dtor_idx.7023;
		while (eax_14 < 0x00)
		{
			uint32 eax_24 = eax_14 + 0x01;
			dtor_idx.7023 = eax_24;
			(*((char *) g_a8049F14 + eax_24 * 0x04))();
			eax_14 = dtor_idx.7023;
		}
		g_b804A034 = 0x01;
	}
}

// 080485D0: void frame_dummy()
// Called from:
//      _init
void frame_dummy()
{
}

// 08048600: void dumpline(Register (ptr32 Eq_69) gs, Stack ptr32 dwArg04, Stack up32 dwArg08, Stack Eq_72 dwArg0C)
// Called from:
//      hexdump
void dumpline(struct Eq_69 * gs, ptr32 dwArg04, up32 dwArg08, Eq_72 dwArg0C)
{
	word32 eax_20 = gs->dw0014;
	__sprintf_chk(fp - 0x70, 0x01, 0x50, "%08lX:", 0x00);
	Eq_72 esi_31 = dwArg0C;
	if (dwArg0C > 0x10)
		esi_31.u0 = 0x10;
	int32 dwLoc80_265;
	Eq_72 esi_169;
	int32 edi_105 = 0x01;
	if (esi_31 > 0x00)
	{
		char * ebx_45 = fp - 0x67;
		Eq_72 edi_235 = 0x00;
		do
		{
			__sprintf_chk(ebx_45, 0x01, ~0x00, " %02lX", 0x00);
			edi_235 = (word32) edi_235.u0 + 1;
			ebx_45 += 3;
		} while (edi_235 < esi_31);
		if (esi_31 > 0x0F)
		{
			byte * edi_68 = fp - 0x70;
			word32 ecx_70 = ~0x00;
			while (ecx_70 != 0x00)
			{
				edi_68 = edi_379 + 1;
				--ecx_70;
				edi_379 = edi_68;
				if (*edi_379 != 0x00)
					break;
			}
			int32 ecx_80 = ~ecx_70;
			fp - 113 + ecx_80 = 0x007C2020;
			dwLoc80_265 = ecx_80 + 0x02;
l08048707:
			esi_169 = esi_31;
			byte * edx_137 = fp - 0x70 + dwLoc80_265;
			Eq_72 eax_138 = 0x00;
			do
			{
				uip32 ecx_148 = (word32) *((word32) eax_138 + dwArg04);
				if ((byte) (ecx_148 - 0x20) > 0x5E)
					ecx_148 = 0x2E;
				*edx_137 = (byte) ecx_148;
				eax_138 = (word32) eax_138.u0 + 1;
				++edx_137;
			} while (eax_138 != esi_31);
			if (esi_31 > 0x0F)
			{
l08048747:
				(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(fp - 0x70)[((word32) esi_169 + dwLoc80_265) / 2].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0].a0000)[0] = (Eq_198) 0x7C;
				__printf_chk(0x01, "%s\n", 0x00);
				if ((eax_20 ^ gs->dw0014) == 0x00)
					return;
				__stack_chk_fail();
			}
l080486FC:
			byte * eax_178 = fp - 0x70 + ((word32) esi_169 + dwLoc80_265);
			do
			{
				*eax_178 = 0x20;
				esi_169 = (word32) esi_169.u0 + 1;
				++eax_178;
			} while (esi_169 <= 0x0F);
			goto l08048747;
		}
		edi_105 = (word32) esi_31.u0 + 1;
	}
	do
	{
		__strcat_chk();
		++edi_105;
	} while (edi_105 <= 0x10);
	byte * edi_110 = fp - 0x70;
	word32 ecx_112 = ~0x00;
	while (ecx_112 != 0x00)
	{
		edi_110 = edi_380 + 1;
		--ecx_112;
		edi_380 = edi_110;
		if (*edi_380 != 0x00)
			break;
	}
	int32 ecx_122 = ~ecx_112;
	fp - 113 + ecx_122 = 0x007C2020;
	dwLoc80_265 = ecx_122 + 0x02;
	if (esi_31 <= 0x00)
	{
		esi_169.u0 = 0x00;
		goto l080486FC;
	}
	goto l08048707;
}

// 080487AF: Register word32 hexdump(Register (ptr32 Eq_69) gs, Stack (ptr32 char) dwArg04)
// Called from:
//      main
word32 hexdump(struct Eq_69 * gs, char * dwArg04)
{
	word32 eax_144;
	word32 eax_20 = gs->dw0014;
	if (__xstat(0x03, dwArg04, fp - 0x88) != 0x00)
	{
		perror(dwArg04);
		eax_144 = 0x01;
	}
	else
	{
		FILE * eax_33 = fopen(dwArg04, "rb");
		if (eax_33 != null)
		{
			up32 esi_40 = 0x00;
			while (esi_40 < dwLoc5C)
			{
				Eq_72 eax_53 = fread(fp - 0x30, 0x01, 0x10, eax_33);
				if (eax_53 == 0x00)
					break;
				dumpline(gs, fp - 0x30, esi_40, eax_53);
				esi_40 = (word32) eax_53 + esi_40;
			}
			fclose(eax_33);
			eax_144 = 0x00;
		}
		else
		{
			perror(dwArg04);
			eax_144 = 0x01;
		}
	}
	if ((eax_20 ^ gs->dw0014) == 0x00)
		return eax_144;
	__stack_chk_fail();
}

// 080488A0: void main(Register (ptr32 Eq_69) gs, Stack int32 dwArg04, Stack (arr (ptr32 char)) dwArg08)
void main(struct Eq_69 * gs, int32 dwArg04, char * dwArg08[])
{
	__align(fp - 4);
	int32 ebx_19 = 0x01;
	if (dwArg04 > 0x01)
	{
		do
		{
			hexdump(gs, dwArg08[ebx_19]);
			++ebx_19;
		} while (dwArg04 > ebx_19);
	}
}

// 080488E0: void __libc_csu_fini()
void __libc_csu_fini()
{
}

// 080488F0: void __libc_csu_init(Stack word32 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C)
void __libc_csu_init(word32 dwArg04, word32 dwArg08, word32 dwArg0C)
{
	_init();
	int32 edi_29 = 0x0804A0DC - 0x0804A0DC;
	if (edi_29 >> 0x02 != 0x00)
	{
		Eq_353 esi_34 = 0x00;
		do
		{
			((<anonymous> *[]) 0x0804A0DC)[esi_34]();
			esi_34 = (word32) esi_34.u1 + 1;
		} while (esi_34 < edi_29 >> 0x02);
	}
}

// 0804894A: void __i686.get_pc_thunk.bx()
void __i686.get_pc_thunk.bx()
{
}

// 08048950: void __do_global_ctors_aux()
// Called from:
//      _init
void __do_global_ctors_aux()
{
	<anonymous> * eax_12 = g_ptr8049F0C;
	if (eax_12 != (<anonymous> *) ~0x00)
	{
		word32 * ebx_15 = &g_ptr8049F0C;
		do
		{
			eax_12();
			ebx_15 -= 0x04;
			eax_12 = *ebx_15;
		} while (eax_12 != (<anonymous> *) ~0x00);
	}
}

