// subject_bss.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word16 g_w8049AC8 = 0x3590; // 08049AC8
// subject_ctors.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 g_dw80499EC = ~0x00; // 080499EC
// subject_data.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

ptr32 __environ = 0x00; // 080499E8
// subject_dtors.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 g_a80499F8[] = // 080499F8
	{
	};
// subject_fini.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 080489C0: void _fini()
void _fini()
{
	__do_global_dtors_aux();
}

// subject_init.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 080484A0: void _init()
// Called from:
//      _start
void _init()
{
	__do_global_ctors_aux();
}

// subject_plt.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 080484B8: void strcpy()
void strcpy()
{
}

// 080484C8: void printf()
void printf()
{
}

// 080484D8: void perror()
void perror()
{
}

// 080484E8: void _xstat()
void _xstat()
{
}

// 080484F8: void __libc_init()
void __libc_init()
{
}

// 08048508: void strcat()
void strcat()
{
}

// 08048518: void fread()
void fread()
{
}

// 08048528: void fopen()
void fopen()
{
}

// 08048538: void fclose()
void fclose()
{
}

// 08048548: void sprintf()
void sprintf()
{
}

// 08048558: void atexit()
void atexit()
{
}

// 08048568: void exit()
void exit()
{
}

// 08048578: void __setfpucw()
void __setfpucw()
{
}

// 08048588: void strlen()
void strlen()
{
}

// subject_rodata.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

char g_str80489C8[] = "%08lX:"; // 080489C8
char g_str80489CF[] = " %02lX"; // 080489CF
char g_str80489D6[] = "   "; // 080489D6
char g_b80489DA = ' '; // 080489DA
char g_b80489DE = '|'; // 080489DE
char g_str80489E0[] = "%s\n"; // 080489E0
char g_str80489E4[] = "rb"; // 080489E4
// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 080485A0: void _start(Stack int32 dwArg00)
void _start(int32 dwArg00)
{
	__align(fp + 4);
	__syscall(0x80);
	__environ = fp + 4 + dwArg00 * 0x04 + 0x04;
	word32 eax_33 = (word32) g_w8049AC8;
	__setfpucw();
	__libc_init();
	atexit(&g_t80489C0);
	_init();
	exit(main(dwArg00, fp + 4));
}

// 08048620: void __do_global_dtors_aux()
// Called from:
//      _fini
void __do_global_dtors_aux()
{
	<anonymous> ** ebx_11 = g_a80499F8;
	if (g_a80499F8[0] != 0x00)
	{
		do
		{
			word32 eax_23;
			(*ebx_11)();
			ebx_11 = (<anonymous> **) ((char *) ebx_11 + 4);
		} while (*ebx_11 != null);
	}
}

// 08048650: void fini_dummy()
void fini_dummy()
{
}

// 08048660: void dumpline(Stack Eq_69 dwArg04, Stack Eq_70 dwArg0C)
// Called from:
//      hexdump
void dumpline(Eq_69 dwArg04, Eq_70 dwArg0C)
{
	sprintf(fp - 0x54, "%08lX:", 0x00);
	if (dwArg0C > 0x10)
		dwArg0C = 0x10;
	size_t dwLoc58_168 = 0x00;
	while (dwArg0C > dwLoc58_168)
	{
		sprintf(fp - 0x54 + dwLoc58_168 * 0x03 + 0x09, " %02lX", 0x00);
		dwLoc58_168 = (Eq_70) ((word32) dwLoc58_168 + 1);
	}
	while (true)
	{
		dwLoc58_168 = (Eq_70) ((word32) dwLoc58_168 + 1);
		if (dwLoc58_168 > 0x0F)
			break;
		strcat(fp - 0x54, "   ");
	}
	Eq_70 eax_74 = strlen(fp - 0x54);
	strcpy(fp - 0x54 + eax_74, 0x080489DA);
	Eq_70 dwLoc58_184;
	for (dwLoc58_184 = 0x00; dwArg0C > dwLoc58_184; ++dwLoc58_184)
	{
		word32 ecx_246;
		word32 ecx_97 = dwArg04 + dwLoc58_184;
		word32 eax_94 = eax_74 + dwLoc58_184;
		word24 ecx_24_8_232 = SLICE(ecx_97, word24, 8);
		if (*ecx_97 > 0x1F)
		{
			word32 ecx_101 = dwArg04 + dwLoc58_184;
			ecx_24_8_232 = SLICE(ecx_101, word24, 8);
			if (*ecx_101 > 0x7E)
				goto l08048770;
			ecx_246 = SEQ(ecx_24_8_232, Mem89[dwArg04 + dwLoc58_184:byte]);
		}
		else
		{
l08048770:
			ecx_246 = SEQ(ecx_24_8_232, 0x2E);
		}
		Mem114[eax_94 + (fp - 0x54):byte] = SLICE(ecx_246, byte, 0);
	}
	for (; dwLoc58_184 <= 0x0F; ++dwLoc58_184)
		Mem128[eax_74 + dwLoc58_184 + (fp - 0x54):byte] = 0x20;
	strcpy(fp - 0x54 + eax_74 + dwLoc58_184, 134515166);
	printf("%s\n", fp - 0x54);
}

// 080487F0: Register word32 hexdump(Stack (ptr32 char) dwArg04)
// Called from:
//      main
word32 hexdump(char * dwArg04)
{
	word32 eax_102;
	stat(dwArg04, fp - 0x5C);
	if (dwArg04 == null)
	{
		perror(dwArg04);
		eax_102 = 0x01;
	}
	else
	{
		FILE * eax_31 = fopen(dwArg04, "rb");
		if (eax_31 == null)
		{
			perror(dwArg04);
			eax_102 = 0x01;
		}
		else
		{
			up32 dwLoc18_115 = 0x00;
			while (dwLoc48 > dwLoc18_115)
			{
				size_t eax_54 = fread(fp - 0x14, 0x01, 0x10, eax_31);
				if (eax_54 == 0x00)
					break;
				dumpline(fp - 0x14, eax_54);
				dwLoc18_115 = (word32) eax_54 + dwLoc18_115;
			}
			fclose(eax_31);
			eax_102 = 0x00;
		}
	}
	return eax_102;
}

// 080488E0: Register word32 main(Stack int32 dwArg04, Stack (arr (ptr32 char)) dwArg08)
// Called from:
//      _start
word32 main(int32 dwArg04, char * dwArg08[])
{
	word32 dwLoc0C_45 = 0x00;
	int32 dwLoc08_46;
	for (dwLoc08_46 = 0x01; dwArg04 > dwLoc08_46; ++dwLoc08_46)
		dwLoc0C_45 += hexdump(dwArg08[dwLoc08_46]);
	return dwLoc0C_45;
}

// 08048950: void stat(Stack (ptr32 char) dwArg04, Stack ptr32 dwArg08)
// Called from:
//      hexdump
void stat(char * dwArg04, ptr32 dwArg08)
{
	_xstat();
}

// 08048980: void __do_global_ctors_aux()
// Called from:
//      _init
void __do_global_ctors_aux()
{
	<anonymous> ** ebx_11 = &g_dw80499EC;
	if (g_dw80499EC != ~0x00)
	{
		do
		{
			word32 eax_23;
			(*ebx_11)();
			ebx_11 = (<anonymous> **) ((char *) ebx_11 - 4);
		} while (*ebx_11 != (<anonymous> *) ~0x00);
	}
}

// 080489B0: void init_dummy()
void init_dummy()
{
}

