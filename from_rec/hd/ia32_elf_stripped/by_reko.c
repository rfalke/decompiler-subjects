// subject_bss.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word16 g_w8049AC8 = 0x3590; // 08049AC8
// subject_ctors.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 g_dw80499EC = ~0x00; // 080499EC
// subject_data.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

ptr32 __environ = 0x00; // 080499E8
// subject_dtors.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 g_a80499F8[] = // 080499F8
	{
	};
// subject_fini.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 080489C0: void _fini()
void _fini()
{
	fn08048620();
}

// subject_init.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 080484A0: void _init()
// Called from:
//      fn080485A0
void _init()
{
	fn08048980();
}

// subject_plt.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 080484B8: void strcpy()
void strcpy()
{
}

// 080484C8: void printf()
void printf()
{
}

// 080484D8: void perror()
void perror()
{
}

// 080484E8: void _xstat()
void _xstat()
{
}

// 080484F8: void __libc_init()
void __libc_init()
{
}

// 08048508: void strcat()
void strcat()
{
}

// 08048518: void fread()
void fread()
{
}

// 08048528: void fopen()
void fopen()
{
}

// 08048538: void fclose()
void fclose()
{
}

// 08048548: void sprintf()
void sprintf()
{
}

// 08048558: void atexit()
void atexit()
{
}

// 08048568: void exit()
void exit()
{
}

// 08048578: void __setfpucw()
void __setfpucw()
{
}

// 08048588: void strlen()
void strlen()
{
}

// subject_rodata.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

char g_str80489C8[] = "%08lX:"; // 080489C8
char g_str80489CF[] = " %02lX"; // 080489CF
char g_str80489D6[] = "   "; // 080489D6
char g_b80489DA = ' '; // 080489DA
char g_b80489DE = '|'; // 080489DE
char g_str80489E0[] = "%s\n"; // 080489E0
char g_str80489E4[] = "rb"; // 080489E4
// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 080485A0: void fn080485A0(Stack int32 dwArg00)
void fn080485A0(int32 dwArg00)
{
	ptr32 fp;
	__align_stack<word32>(fp + 4);
	sys_personality(0x00);
	ptr32 eax_12 = fp + 4 + dwArg00 * 0x04;
	__environ = eax_12 + 0x04;
	__setfpucw((word32) g_w8049AC8, dwArg00, fp + 4, eax_12 + 0x04, 0x00, 0x00);
	__libc_init();
	atexit(&g_t80489C0);
	_init();
	exit(fn080488E0(dwArg00, fp + 4));
}

// 08048620: void fn08048620()
// Called from:
//      _fini
void fn08048620()
{
	<anonymous> ** ebx_11 = g_a80499F8;
	if (g_a80499F8[0] != 0x00)
	{
		do
		{
			word32 eax_23;
			(*ebx_11)();
			ebx_11 = (<anonymous> **) ((char *) ebx_11 + 4);
		} while (*ebx_11 != null);
	}
}

// 08048660: void fn08048660(Stack (ptr32 (arr word32)) dwArg04, Stack uint32 dwArg08, Stack Eq_77 dwArg0C)
// Called from:
//      fn080487F0
void fn08048660(word32 (* dwArg04)[], uint32 dwArg08, Eq_77 dwArg0C)
{
	char bLoc54;
	sprintf(&bLoc54, "%08lX:", dwArg08);
	if (dwArg0C > 0x10)
		dwArg0C = 0x10;
	size_t dwLoc58_169 = 0x00;
	while (dwArg0C > dwLoc58_169)
	{
		sprintf(&bLoc54 + dwLoc58_169 * 0x03 + 9, " %02lX", CONVERT(Mem28[dwArg04 + dwLoc58_169:byte], byte, word32));
		dwLoc58_169 = (Eq_77) ((word32) dwLoc58_169 + 1);
	}
	while (true)
	{
		dwLoc58_169 = (Eq_77) ((word32) dwLoc58_169 + 1);
		if (dwLoc58_169 > 0x0F)
			break;
		strcat(&bLoc54, "   ");
	}
	Eq_77 eax_74 = strlen(&bLoc54);
	strcpy(&bLoc54 + eax_74, 0x080489DA);
	Eq_77 dwLoc58_185;
	for (dwLoc58_185 = 0x00; dwArg0C > dwLoc58_185; ++dwLoc58_185)
	{
		word32 ecx_247;
		word32 ecx_97 = dwArg04 + dwLoc58_185;
		word32 eax_94 = eax_74 + dwLoc58_185;
		word24 ecx_24_8_233 = SLICE(ecx_97, word24, 8);
		if (*ecx_97 > 0x1F)
		{
			word32 ecx_101 = dwArg04 + dwLoc58_185;
			ecx_24_8_233 = SLICE(ecx_101, word24, 8);
			if (*ecx_101 > 0x7E)
				goto l08048770;
			ecx_247 = SEQ(ecx_24_8_233, Mem89[dwArg04 + dwLoc58_185:byte]);
		}
		else
		{
l08048770:
			ecx_247 = SEQ(ecx_24_8_233, 0x2E);
		}
		Mem114[eax_94 + &bLoc54:byte] = SLICE(ecx_247, byte, 0);
	}
	for (; dwLoc58_185 <= 0x0F; ++dwLoc58_185)
		Mem128[eax_74 + dwLoc58_185 + &bLoc54:byte] = 0x20;
	strcpy(&bLoc54 + eax_74 + dwLoc58_185, 134515166);
	printf("%s\n", &bLoc54);
}

// 080487F0: Register word32 fn080487F0(Stack (ptr32 char) dwArg04)
// Called from:
//      fn080488E0
word32 fn080487F0(char * dwArg04)
{
	ptr32 fp;
	word32 dwLoc14;
	uint32 dwLoc48;
	word32 eax_104;
	fn08048950(dwArg04, fp - 92);
	if (dwArg04 == null)
	{
		perror(dwArg04);
		eax_104 = 0x01;
	}
	else
	{
		FILE * eax_32 = fopen(dwArg04, "rb");
		if (eax_32 == null)
		{
			perror(dwArg04);
			eax_104 = 0x01;
		}
		else
		{
			uint32 dwLoc18_118 = 0x00;
			while (dwLoc48 > dwLoc18_118)
			{
				size_t eax_55 = fread(&dwLoc14, 0x01, 0x10, eax_32);
				if (eax_55 == 0x00)
					break;
				fn08048660(&dwLoc14, dwLoc18_118, eax_55);
				dwLoc18_118 = (word32) eax_55 + dwLoc18_118;
			}
			fclose(eax_32);
			eax_104 = 0x00;
		}
	}
	return eax_104;
}

// 080488E0: Register word32 fn080488E0(Stack int32 dwArg04, Stack (arr (ptr32 char)) dwArg08)
// Called from:
//      fn080485A0
word32 fn080488E0(int32 dwArg04, char * dwArg08[])
{
	word32 dwLoc0C_46 = 0x00;
	int32 dwLoc08_47;
	for (dwLoc08_47 = 0x01; dwArg04 > dwLoc08_47; ++dwLoc08_47)
		dwLoc0C_46 += fn080487F0(dwArg08[dwLoc08_47]);
	return dwLoc0C_46;
}

// 08048950: void fn08048950(Stack (ptr32 char) dwArg04, Stack ptr32 dwArg08)
// Called from:
//      fn080487F0
void fn08048950(char * dwArg04, ptr32 dwArg08)
{
	_xstat(0x01, dwArg04, dwArg08);
}

// 08048980: void fn08048980()
// Called from:
//      _init
void fn08048980()
{
	<anonymous> ** ebx_11 = &g_dw80499EC;
	if (g_dw80499EC != ~0x00)
	{
		do
		{
			word32 eax_23;
			(*ebx_11)();
			ebx_11 = (<anonymous> **) ((char *) ebx_11 - 4);
		} while (*ebx_11 != (<anonymous> *) ~0x00);
	}
}

