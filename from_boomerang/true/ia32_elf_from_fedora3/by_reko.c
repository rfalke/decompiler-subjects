// subject_bss.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

char * g_ptr804BA04 = null; // 0804BA04
word32 xalloc_fail_func = 0x00; // 0804BB44
word32 program_name = 0x00; // 0804BB48
// subject_data.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 exit_failure = 0x01; // 0804B9D8
Eq_769 g_t804B9DC = // 0804B9DC
	{
		1
	};
Eq_180 g_t804B9E0 = // 0804B9E0
	{
		0x0100
	};
Eq_821 g_t804B9E4 = // 0804B9E4
	{
		0x0804BA20
	};
Eq_176 g_t804B9E8 = // 0804B9E8
	{
		&g_t804B9E0
	};
word32 version_etc_copyright = 0x0804A590; // 0804B9EC
// subject_got.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

<anonymous> ** g_ptr804B928 = &g_ptr804BB44; // 0804B928
<anonymous> * close_stdout_GOT = close_stdout; // 0804B92C
int32 * g_ptr804B93C = &g_dw804B9D8; // 0804B93C
FILE ** g_ptr804B940 = null; // 0804B940
char * g_ptr804B944 = &g_str804A814; // 0804B944
// subject_plt.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 080488E4: void __fpending()
void __fpending()
{
}

// 080488F4: void __overflow()
void __overflow()
{
}

// 08048904: void fputs_unlocked()
void fputs_unlocked()
{
}

// 08048914: void fprintf()
void fprintf()
{
}

// 08048924: void getenv()
void getenv()
{
}

// 08048934: void dcgettext()
void dcgettext()
{
}

// 08048944: void setlocale()
void setlocale()
{
}

// 08048954: void __cxa_atexit()
void __cxa_atexit()
{
}

// 08048964: void __errno_location()
void __errno_location()
{
}

// 08048974: void malloc()
void malloc()
{
}

// 08048984: void abort()
void abort()
{
}

// 08048994: void vfprintf()
void vfprintf()
{
}

// 080489A4: void bindtextdomain()
void bindtextdomain()
{
}

// 080489B4: void mbrtowc()
void mbrtowc()
{
}

// 080489C4: void __libc_start_main()
void __libc_start_main()
{
}

// 080489D4: void realloc()
void realloc()
{
}

// 080489E4: void textdomain()
void textdomain()
{
}

// 080489F4: void printf()
void printf()
{
}

// 08048A04: void memcpy()
void memcpy()
{
}

// 08048A14: void fclose()
void fclose()
{
}

// 08048A24: void __ctype_get_mb_cur_max()
void __ctype_get_mb_cur_max()
{
}

// 08048A34: void exit()
void exit()
{
}

// 08048A44: void calloc()
void calloc()
{
}

// 08048A54: void iswprint()
void iswprint()
{
}

// 08048A64: void free()
void free()
{
}

// 08048A74: void memset()
void memset()
{
}

// 08048A84: void mbsinit()
void mbsinit()
{
}

// 08048A94: void error()
void error()
{
}

// 08048AA4: void __ctype_b_loc()
void __ctype_b_loc()
{
}

// subject_rodata.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 _IO_stdin_used = 0x00020001; // 0804A114
word32 g_a804A2CC[] = // 0804A2CC
	{
	};
word32 g_a804A2E8[] = // 0804A2E8
	{
	};
char g_str804A814[] = "memory exhausted"; // 0804A814
// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 08048AC0: void fn08048AC0(Register (ptr32 Eq_2) edx, Stack int32 dwArg00, Stack (ptr32 char) ptrArg04)
void fn08048AC0(void (* edx)(), int32 dwArg00, char * ptrArg04)
{
	void * fp;
	__align_stack<word32>(&ptrArg04);
	__libc_start_main(&g_t8048C4A, dwArg00, &ptrArg04, &g_t804A008, &g_t804A05C, edx, fp);
	__halt();
}

Eq_13 g_t8048C4A = ??/* Unexpected function type (fn int32 (int32, (ptr32 (ptr32 char)), (ptr32 (ptr32 char)))) */ ; // 08048C4A
// 08048D81: void close_stdout()
void close_stdout()
{
	FILE ** edi_20 = g_ptr804B940;
	FILE * edx_21 = *edi_20;
	int32 esi_27 = 0x00 - (word32) ((edx_21->dw0000 >> 0x05 & 0x01) < 0x01);
	if (esi_27 != 0x00 && __fpending(edx_21) == 0x00)
		return;
	if (fclose(*edi_20) != 0x00)
		esi_27 = *__errno_location();
	if (esi_27 < 0x00)
		return;
	dcgettext(null, "write error", 0x05);
	char * eax_65 = g_ptr804BA04;
	if (eax_65 == null)
		error(*g_ptr804B93C, esi_27, "%s", 0x00);
	else
	{
		fn08049A8B(eax_65);
		error(*g_ptr804B93C, esi_27, "%s: %s", 0x00);
	}
}

// 08048F36: void fn08048F36(Stack ptr32 dwArg04, Stack byte bArg08, Stack ui32 dwArg0C)
// Called from:
//      fn080499F0
void fn08048F36(ptr32 dwArg04, byte bArg08, ui32 dwArg0C)
{
	word32 ecx_19 = (word32) bArg08;
	ui32 eax_25 = (word32) ((byte) ecx_19 >> 0x05);
	int32 * edi_30 = (eax_25 << 0x02) + 4 + dwArg04;
	if (dwArg04 == 0x00)
	{
		int32 * edi_32 = 0x0804BB24 + (eax_25 << 0x02);
		byte cl_37 = (byte) ecx_19 & 0x1F;
		int32 edx_35 = *edi_32;
		*edi_32 = edx_35 ^ (dwArg0C & 0x01 ^ edx_35 >> cl_37 & 0x01) << cl_37;
	}
	else
	{
		int32 edx_55 = *edi_30;
		byte cl_59 = (byte) ecx_19 & 0x1F;
		*edi_30 = edx_55 ^ (dwArg0C & 0x01 ^ edx_55 >> cl_59 & 0x01) << cl_59;
	}
}

// 08048FF6: Register Eq_176 fn08048FF6(Register Eq_176 eax, Register Eq_176 edx, Stack (ptr32 char) dwArg04, Stack Eq_176 dwArg08, Stack Eq_180 dwArg0C, Stack Eq_176 dwArg10, Register out ptr32 ebpOut, Register out Eq_176 esiOut)
// Called from:
//      fn080496C3
Eq_176 fn08048FF6(Eq_176 eax, Eq_176 edx, char * dwArg04, Eq_176 dwArg08, Eq_180 dwArg0C, Eq_176 dwArg10, ptr32 & ebpOut, union Eq_176 & esiOut)
{
}

// 080496C3: Register word32 fn080496C3(Stack Eq_176 dwArg04, Stack Eq_176 dwArg08, Stack (ptr32 char) dwArg0C, Stack Eq_176 dwArg10, Stack Eq_176 dwArg14)
// Called from:
//      fn08049721
word32 fn080496C3(Eq_176 dwArg04, Eq_176 dwArg08, char * dwArg0C, Eq_176 dwArg10, Eq_176 dwArg14)
{
	Eq_176 edi_20 = dwArg14;
	if (dwArg14 == 0x00)
		&edi_20.u0->a0000->u0 = 0x0804BB20;
	__errno_location();
	struct Eq_752 * ebp_44;
	word32 * esi_49;
	word32 eax_43 = fn08048FF6(dwArg04, dwArg08, dwArg0C, dwArg10, edi_20.u0->a0000[0].u0, edi_20, out ebp_44, out esi_49);
	*esi_49 = ebp_44->dwFFFFFFF0;
	return eax_43;
}

// 08049721: void fn08049721(Register Eq_769 eax, Register (ptr32 char) edx, Stack Eq_176 dwArg04, Stack Eq_176 dwArg08)
// Called from:
//      fn080499F0
void fn08049721(Eq_769 eax, char * edx, Eq_176 dwArg04, Eq_176 dwArg08)
{
	word32 eax_26 = *__errno_location();
	if (eax < 0x00)
		abort();
	else
	{
		if (g_t804B9DC.u0 <= eax)
		{
			if (eax > 0x1FFFFFFE)
				fn08049D10();
			Eq_176 esi_40 = g_t804B9E8.u0;
			if (esi_40 == 0x0804B9E0)
			{
				Eq_176 eax_45 = fn08049DC5(0x08);
				Eq_821 edx_51 = g_t804B9E4.u0;
				g_t804B9E8.u0 = (struct Eq_993 *) eax_45;
				&eax_45->u0->a0000->u0 = g_t804B9E0.u0;
				&((word32) eax_45 + 4)->u0->a0000->u0 = edx_51;
				esi_40 = eax_45;
			}
			Eq_176 eax_63 = fn08049E3F(esi_40, ((word32) eax + 1) * 0x08);
			Eq_769 edx_71 = g_t804B9DC.u0;
			g_t804B9E8.u0 = (struct Eq_993 *) eax_63;
			memset(eax_63.u0 + edx_71 * 2, 0x00, (word32) eax + 1 - edx_71 << 0x03);
			g_t804B9DC.u0 = (word32) eax + 1;
		}
		Eq_176 eax_86 = g_t804B9E8.u0;
		Eq_176 edx_90 = *((word32) eax_86 + eax * 0x08);
		Eq_176 edi_93 = *((word32) eax_86 + (eax * 0x08 + 4));
		Eq_176 eax_104 = fn080496C3(edi_93, edx_90, edx, dwArg04, dwArg08);
		if (edx_90 <= eax_104)
		{
			Eq_176 esi_116 = g_t804B9E8.u0;
			&((word32) esi_116 + eax * 0x08)->u0->a0000->u0 = (word32) eax_104 + 1;
			if (edi_93 != 0x0804BA20)
			{
				fn08049FE0(edi_93);
				&esi_116.u0->a0000->u0 = g_t804B9E8.u0;
			}
			Eq_176 eax_136 = fn08049DC5((word32) eax_104 + 1);
			*((word32) esi_116 + (eax * 0x08 + 4)) = eax_136;
			fn080496C3(eax_136, (word32) eax_104 + 1, edx, dwArg04, dwArg08);
		}
		*__errno_location() = eax_26;
	}
}

// 080499F0: void fn080499F0(Stack (ptr32 char) dwArg04, Stack byte bArg08)
// Called from:
//      fn08049A8B
void fn080499F0(char * dwArg04, byte bArg08)
{
	ptr32 fp;
	fn08048F36(fp - 60, bArg08, 0x01);
	fn08049721(0x00, dwArg04, ~0x00, fp - 60);
}

// 08049A8B: void fn08049A8B(Stack (ptr32 char) dwArg04)
// Called from:
//      close_stdout
void fn08049A8B(char * dwArg04)
{
	fn080499F0(dwArg04, 0x3A);
}

// 08049D10: void fn08049D10()
// Called from:
//      fn08049721
//      fn08049DC5
//      fn08049E3F
void fn08049D10()
{
	<anonymous> * eax_15 = *g_ptr804B928;
	if (eax_15 != null)
		eax_15();
	dcgettext(null, g_ptr804B944, 0x05);
	error(*g_ptr804B93C, 0x00, "%s", 0x00);
	abort();
}

// 08049DC5: Register (ptr32 void) fn08049DC5(Stack Eq_62 dwArg04)
// Called from:
//      fn08049721
//      fn08049E3F
void * fn08049DC5(Eq_62 dwArg04)
{
	void * eax_16 = malloc(dwArg04);
	if (eax_16 != null)
		return eax_16;
	fn08049D10();
}

// 08049E3F: Register (ptr32 void) fn08049E3F(Stack Eq_176 dwArg04, Stack Eq_62 dwArg08)
// Called from:
//      fn08049721
//      fn08049DC5
//      fn08049E3F
void * fn08049E3F(Eq_176 dwArg04, Eq_62 dwArg08)
{
	void * eax_18 = realloc(dwArg04, dwArg08);
	if (eax_18 != null)
		return eax_18;
	fn08049D10();
}

// 08049FE0: void fn08049FE0(Stack Eq_176 dwArg04)
// Called from:
//      fn08049721
void fn08049FE0(Eq_176 dwArg04)
{
	if (dwArg04 != 0x00)
		free(dwArg04);
}

Eq_16 g_t804A008 = ??/* Unexpected function type (fn void ()) */ ; // 0804A008
Eq_17 g_t804A05C = ??/* Unexpected function type (fn void ()) */ ; // 0804A05C
