// subject_bss.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

char * g_ptr804BA04 = null; // 0804BA04
word32 xalloc_fail_func = 0x00; // 0804BB44
word32 program_name = 0x00; // 0804BB48
// subject_data.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 exit_failure = 0x01; // 0804B9D8
Eq_766 g_t804B9DC = // 0804B9DC
	{
		1
	};
Eq_177 g_t804B9E0 = // 0804B9E0
	{
		0x0100
	};
Eq_818 g_t804B9E4 = // 0804B9E4
	{
		0x0804BA20
	};
Eq_173 g_t804B9E8 = // 0804B9E8
	{
		&g_t804B9E0
	};
word32 version_etc_copyright = 0x0804A590; // 0804B9EC
// subject_got.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

<anonymous> * close_stdout_GOT = close_stdout; // 0804B92C
// subject_got_plt.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

char * g_ptr804B954 = null; // 0804B954
FILE ** g_ptr804B958 = &g_ptr80488EA; // 0804B958
int32 * g_ptr804B95C = &g_dw80488FA; // 0804B95C
<anonymous> ** g_ptr804B970 = &g_ptr804894A; // 0804B970
// subject_plt.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 080488E4: void __fpending()
void __fpending()
{
}

FILE * g_ptr80488EA = &g_t0068; // 080488EA
// 080488F4: void __overflow()
void __overflow()
{
}

int32 g_dw80488FA = 0x0868; // 080488FA
// 08048904: void fputs_unlocked()
void fputs_unlocked()
{
}

// 08048914: void fprintf()
void fprintf()
{
}

// 08048924: void getenv()
void getenv()
{
}

// 08048934: void dcgettext()
void dcgettext()
{
}

// 08048944: void setlocale()
void setlocale()
{
}

<anonymous> * g_ptr804894A = &g_t3068; // 0804894A
// 08048954: void __cxa_atexit()
void __cxa_atexit()
{
}

// 08048964: void __errno_location()
void __errno_location()
{
}

// 08048974: void malloc()
void malloc()
{
}

// 08048984: void abort()
void abort()
{
}

// 08048994: void vfprintf()
void vfprintf()
{
}

// 080489A4: void bindtextdomain()
void bindtextdomain()
{
}

// 080489B4: void mbrtowc()
void mbrtowc()
{
}

// 080489C4: void __libc_start_main()
void __libc_start_main()
{
}

// 080489D4: void realloc()
void realloc()
{
}

// 080489E4: void textdomain()
void textdomain()
{
}

// 080489F4: void printf()
void printf()
{
}

// 08048A04: void memcpy()
void memcpy()
{
}

// 08048A14: void fclose()
void fclose()
{
}

// 08048A24: void __ctype_get_mb_cur_max()
void __ctype_get_mb_cur_max()
{
}

// 08048A34: void exit()
void exit()
{
}

// 08048A44: void calloc()
void calloc()
{
}

// 08048A54: void iswprint()
void iswprint()
{
}

// 08048A64: void free()
void free()
{
}

// 08048A74: void memset()
void memset()
{
}

// 08048A84: void mbsinit()
void mbsinit()
{
}

// 08048A94: void error()
void error()
{
}

// 08048AA4: void __ctype_b_loc()
void __ctype_b_loc()
{
}

// subject_rodata.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 _IO_stdin_used = 0x00020001; // 0804A114
word32 g_a804A2CC[] = // 0804A2CC
	{
	};
word32 g_a804A2E8[] = // 0804A2E8
	{
	};
// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 08048AC0: void fn08048AC0(Register (ptr32 Eq_2) edx, Stack int32 dwArg00)
void fn08048AC0(void (* edx)(), int32 dwArg00)
{
	__align((char *) fp + 4);
	__libc_start_main(&g_t8048C4A, dwArg00, (char *) fp + 4, &g_t804A008, &g_t804A05C, edx, fp);
	__hlt();
}

Eq_13 g_t8048C4A = ??/* Unexpected function type (fn int32 (int32, (ptr32 (ptr32 char)), (ptr32 (ptr32 char)))) */ ; // 08048C4A
// 08048D81: void close_stdout()
void close_stdout()
{
	FILE ** edi_20 = g_ptr804B958;
	FILE * edx_21 = *edi_20;
	int32 esi_27 = 0x00 - (word32) ((edx_21->dw0000 >> 0x05 & 0x01) < 0x01);
	if (esi_27 != 0x00 && __fpending(edx_21) == 0x00)
		return;
	if (fclose(*edi_20) != 0x00)
		esi_27 = *__errno_location();
	if (esi_27 < 0x00)
		return;
	dcgettext(null, "write error", 0x05);
	char * eax_61 = g_ptr804BA04;
	if (eax_61 == null)
		error(*g_ptr804B95C, esi_27, "%s", 0x00);
	else
	{
		fn08049A8B(eax_61);
		error(*g_ptr804B95C, esi_27, "%s: %s", 0x00);
	}
}

// 08048F36: void fn08048F36(Stack ptr32 dwArg04, Stack byte bArg08, Stack ui32 dwArg0C)
// Called from:
//      fn080499F0
void fn08048F36(ptr32 dwArg04, byte bArg08, ui32 dwArg0C)
{
	word32 ecx_19 = (word32) bArg08;
	ui32 eax_25 = (word32) ((byte) ecx_19 >> 0x05);
	int32 * edi_29 = (eax_25 << 0x02) + 0x04 + dwArg04;
	if (dwArg04 == 0x00)
	{
		int32 * edi_31 = 0x0804BB24 + (eax_25 << 0x02);
		byte cl_36 = (byte) ecx_19 & 0x1F;
		int32 edx_34 = *edi_31;
		*edi_31 = edx_34 ^ (dwArg0C & 0x01 ^ edx_34 >> cl_36 & 0x01) << cl_36;
	}
	else
	{
		int32 edx_53 = *edi_29;
		byte cl_57 = (byte) ecx_19 & 0x1F;
		*edi_29 = edx_53 ^ (dwArg0C & 0x01 ^ edx_53 >> cl_57 & 0x01) << cl_57;
	}
}

// 08048FF6: Register Eq_173 fn08048FF6(Register Eq_173 eax, Register Eq_173 edx, Stack (ptr32 char) dwArg04, Stack Eq_173 dwArg08, Stack Eq_177 dwArg0C, Stack Eq_173 dwArg10, Register out ptr32 ebpOut, Register out Eq_173 esiOut)
// Called from:
//      fn080496C3
Eq_173 fn08048FF6(Eq_173 eax, Eq_173 edx, char * dwArg04, Eq_173 dwArg08, Eq_177 dwArg0C, Eq_173 dwArg10, ptr32 & ebpOut, union Eq_173 & esiOut)
{
}

// 080496C3: Register word32 fn080496C3(Stack Eq_173 dwArg04, Stack Eq_173 dwArg08, Stack (ptr32 char) dwArg0C, Stack Eq_173 dwArg10, Stack Eq_173 dwArg14)
// Called from:
//      fn08049721
word32 fn080496C3(Eq_173 dwArg04, Eq_173 dwArg08, char * dwArg0C, Eq_173 dwArg10, Eq_173 dwArg14)
{
	Eq_173 edi_20 = dwArg14;
	if (dwArg14 == 0x00)
		edi_20.u0->a0000 = 0x0804BB20;
	__errno_location();
	struct Eq_749 * ebp_43;
	word32 * esi_48;
	word32 eax_42 = fn08048FF6(dwArg04, dwArg08, dwArg0C, dwArg10, edi_20.u0->a0000[0], edi_20, out ebp_43, out esi_48);
	*esi_48 = ebp_43->dwFFFFFFF0;
	return eax_42;
}

// 08049721: void fn08049721(Register Eq_766 eax, Register (ptr32 char) edx, Stack Eq_173 dwArg04, Stack Eq_173 dwArg08)
// Called from:
//      fn080499F0
void fn08049721(Eq_766 eax, char * edx, Eq_173 dwArg04, Eq_173 dwArg08)
{
	word32 eax_26 = *__errno_location();
	if (eax < 0x00)
		abort();
	else
	{
		if (g_t804B9DC <= eax)
		{
			if (eax > 0x1FFFFFFE)
				fn08049D10();
			Eq_173 esi_39 = g_t804B9E8;
			if (esi_39 == 0x0804B9E0)
			{
				Eq_173 eax_44 = fn08049DC5(0x08);
				Eq_818 edx_49 = g_t804B9E4;
				g_t804B9E8 = eax_44;
				*eax_44 = g_t804B9E0;
				*((word32) eax_44 + 4) = edx_49;
				esi_39 = eax_44;
			}
			Eq_173 eax_61 = fn08049E3F(esi_39, ((word32) eax + 1) * 0x08);
			Eq_766 edx_68 = g_t804B9DC;
			g_t804B9E8 = eax_61;
			memset((word32) eax_61 + edx_68 * 0x08, 0x00, (word32) eax + 1 - edx_68 << 0x03);
			g_t804B9DC = (word32) eax + 1;
		}
		Eq_173 eax_83 = g_t804B9E8;
		Eq_173 edx_87 = *((word32) eax_83 + eax * 0x08);
		Eq_173 edi_90 = *((word32) eax_83 + (eax * 0x08 + 4));
		Eq_173 eax_101 = fn080496C3(edi_90, edx_87, edx, dwArg04, dwArg08);
		if (edx_87 <= eax_101)
		{
			Eq_173 esi_112 = g_t804B9E8;
			*((word32) esi_112 + eax * 0x08) = (word32) eax_101 + 1;
			if (edi_90 != 0x0804BA20)
			{
				fn08049FE0(edi_90);
				esi_112 = g_t804B9E8;
			}
			Eq_173 eax_131 = fn08049DC5((word32) eax_101 + 1);
			*((word32) esi_112 + (eax * 0x08 + 4)) = eax_131;
			fn080496C3(eax_131, (word32) eax_101 + 1, edx, dwArg04, dwArg08);
		}
		*__errno_location() = eax_26;
	}
}

// 080499F0: void fn080499F0(Stack (ptr32 char) dwArg04, Stack byte bArg08)
// Called from:
//      fn08049A8B
void fn080499F0(char * dwArg04, byte bArg08)
{
	fn08048F36(fp - 0x3C, bArg08, 0x01);
	fn08049721(0x00, dwArg04, ~0x00, fp - 0x3C);
}

// 08049A8B: void fn08049A8B(Stack (ptr32 char) dwArg04)
// Called from:
//      close_stdout
void fn08049A8B(char * dwArg04)
{
	fn080499F0(dwArg04, 0x3A);
}

// 08049D10: void fn08049D10()
// Called from:
//      fn08049721
//      fn08049DC5
//      fn08049E3F
void fn08049D10()
{
	<anonymous> * eax_15 = *g_ptr804B970;
	if (eax_15 != null)
		eax_15();
	dcgettext(null, g_ptr804B954, 0x05);
	error(*g_ptr804B95C, 0x00, "%s", 0x00);
	abort();
}

// 08049DC5: Register (ptr32 void) fn08049DC5(Stack Eq_62 dwArg04)
// Called from:
//      fn08049721
//      fn08049E3F
void * fn08049DC5(Eq_62 dwArg04)
{
	void * eax_16 = malloc(dwArg04);
	if (eax_16 != null)
		return eax_16;
	fn08049D10();
}

// 08049E3F: Register (ptr32 void) fn08049E3F(Stack Eq_173 dwArg04, Stack Eq_62 dwArg08)
// Called from:
//      fn08049721
//      fn08049DC5
//      fn08049E3F
void * fn08049E3F(Eq_173 dwArg04, Eq_62 dwArg08)
{
	void * eax_18 = realloc(dwArg04, dwArg08);
	if (eax_18 != null)
		return eax_18;
	fn08049D10();
}

// 08049FE0: void fn08049FE0(Stack Eq_173 dwArg04)
// Called from:
//      fn08049721
void fn08049FE0(Eq_173 dwArg04)
{
	if (dwArg04 != 0x00)
		free(dwArg04);
}

Eq_16 g_t804A008 = ??/* Unexpected function type (fn void ()) */ ; // 0804A008
Eq_17 g_t804A05C = ??/* Unexpected function type (fn void ()) */ ; // 0804A05C
