// subject_bss.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 g_dw403000 = 0x00; // 00403000
word32 g_dw403024 = 0x00; // 00403024
// subject_idata.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 g_dw404040 = 0x40CC; // 00404040
word32 g_dw404044 = 16600; // 00404044
word32 g_dw404048 = 0x40E0; // 00404048
word32 g_dw40404C = 0x40EC; // 0040404C
word32 g_dw404050 = 0x4100; // 00404050
word32 g_dw404054 = 16668; // 00404054
word32 g_dw404058 = 16676; // 00404058
word32 g_dw40405C = 16688; // 0040405C
word32 g_dw404060 = 0x4144; // 00404060
word32 g_dw404064 = 16716; // 00404064
word32 g_dw404070 = 0x4158; // 00404070
word32 g_dw404074 = 0x4164; // 00404074
word32 g_dw404078 = 0x4170; // 00404078
word32 g_dw40407C = 0x4180; // 0040407C
<anonymous> * __imp____main = &g_t40CC; // 00404088
<anonymous> * __imp__abort = &g_t40D8; // 0040408C
<anonymous> * __imp__calloc = &g_t40E0; // 00404090
<anonymous> * __imp__cygwin_internal = &g_t40EC; // 00404094
<anonymous> * __imp__dll_crt0__FP11per_process = &g_t4100; // 00404098
<anonymous> * __imp__free = &g_t411C; // 0040409C
<anonymous> * __imp__malloc = &g_t4124; // 004040A0
<anonymous> * __imp__pthread_atfork = &g_t4130; // 004040A4
<anonymous> * __imp__puts = &g_t4144; // 004040A8
<anonymous> * __imp__realloc = &g_t414C; // 004040AC
<anonymous> * __imp__AddAtomA = &g_t4158; // 004040B8
<anonymous> * __imp__FindAtomA = &g_t4164; // 004040BC
<anonymous> * __imp__GetAtomNameA = &g_t4170; // 004040C0
<anonymous> * __imp__GetModuleHandleA = &g_t4180; // 004040C4
// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	if (g_dw403000 != 0x00)
		int3();
	__fldcw((word16) ((word32) (word16) ((word32) __fstcw() & ~0x0F3F) | 0x033F));
	fn00401470(&g_dw401080);
}

word32 g_dw401080 = 2311074133; // 00401080
// 00401470: void fn00401470(Stack (ptr32 word32) dwArg04)
// Called from:
//      Win32CrtStartup
void fn00401470(word32 * dwArg04)
{
	ptr32 esp_25 = fp - 0x1C;
	if (fn00401530(fp - 4, dwArg04, null) != 0x00)
	{
l0040149D:
		cygwin1.dll!dll_crt0__FP11per_process();
	}
	struct Eq_45 * esp_42 = esp_25 - 0xB0;
	esp_42->dw0008 = 0x00;
	esp_42->ptr0004 = (struct Eq_38 *) &esp_42->dw0008;
	esp_42->ptr0000 = dwArg04;
	fn00401530(fp - 4, esp_42->ptr0000, esp_42->ptr0004);
	esp_42->ptr0000 = &esp_42->dw0008;
	goto l0040149D;
}

// 00401530: Register word32 fn00401530(Register ptr32 ebp, Stack (ptr32 word32) dwArg04, Stack (ptr32 Eq_38) dwArg08)
// Called from:
//      fn00401470
word32 fn00401530(ptr32 ebp, word32 * dwArg04, struct Eq_38 * dwArg08)
{
	word32 eax_106;
	word32 eax_29 = 0x00;
	LPCSTR * esp_12 = fp - 0x0C;
	struct Eq_38 * ebx_13 = dwArg08;
	if (dwArg08 == null)
	{
		struct Eq_38 * eax_19;
		cygwin1.dll!cygwin_internal();
		eax_106 = 0x00;
		if (eax_19 == (struct Eq_38 *) ~0x00)
			return eax_106;
		ebx_13 = eax_19;
		eax_29 = 0x01;
	}
	ebx_13->dw0004 = 0xA8;
	ebx_13->dw0008 = 1005;
	ebx_13->dw000C = 0x09;
	ebx_13->dw0080 = 0x00;
	ebx_13->dw0084 = 0x70;
	ebx_13->dw002C = 0x004017A0;
	ebx_13->dw0030 = 4200364;
	ebx_13->dw0014 = 0x00403020;
	if (eax_29 != 0x00)
		g_dw403024 = ebx_13->dw00A4;
	else
		ebx_13->dw0010 = 0x00403024;
	ebx_13->dw0078 = 0x00;
	ebx_13->dw0048 = 4200240;
	ebx_13->dw004C = 4200224;
	ebx_13->ptr0028 = dwArg04;
	ebx_13->dw0050 = 0x00401710;
	ebx_13->dw0054 = 0x00401700;
	ebx_13->dw0024 = 0x00403028;
	ebx_13->dw0000 = ebp;
	ebx_13->dw0018 = 0x00401510;
	ebx_13->dw001C = 0x004014F0;
	ebx_13->dw0020 = 0x004016F0;
	ebx_13->dw0044 = 0x004016E0;
	*esp_12 = (LPCSTR *) null;
	ebx_13->t007C = GetModuleHandleA(*esp_12);
	ebx_13->dw0034 = 0x00402000;
	ebx_13->dw0038 = 0x00402010;
	ebx_13->dw003C = 0x00403000;
	ebx_13->dw0040 = 0x00403080;
	fn004016B0();
	eax_106 = 0x01;
	return eax_106;
}

// 00401670: void fn00401670(Stack (ptr32 Eq_216) dwArg04, Stack (ptr32 Eq_216) dwArg08, Stack word32 dwArg0C)
// Called from:
//      fn004016B0
void fn00401670(struct Eq_216 * dwArg04, struct Eq_216 * dwArg08, word32 dwArg0C)
{
	struct Eq_216 * ecx_22 = dwArg04;
	if (dwArg04 < dwArg08)
	{
		do
		{
			word32 * edx_27 = dwArg0C + ecx_22->dw0004;
			*edx_27 += ecx_22->dw0000;
			++ecx_22;
		} while (ecx_22 < dwArg08);
	}
}

// 004016B0: void fn004016B0()
// Called from:
//      fn00401530
void fn004016B0()
{
	fn00401670(&g_dw403000, &g_dw403000, 0x00400000);
}

