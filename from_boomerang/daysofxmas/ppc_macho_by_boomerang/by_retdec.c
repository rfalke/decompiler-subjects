//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) Retargetable Decompiler <info@retdec.com>
//

#include <stdint.h>
#include <stdlib.h>

// ------------------- Function Prototypes --------------------

int32_t ___sputc(int32_t a1, int32_t a2, int32_t * a3);
int32_t function_2d54(int32_t a1, int32_t a2);

// ------------------------ Functions -------------------------

// Address range: 0x2838 - 0x2b10
int main(int argc, char ** argv) {
    // 0x2838
    int32_t v1; // 0x2838
    __asm_stmw(v1, v1);
    int32_t v2; // 0x2838
    int32_t v3 = &v2; // bp-96, 0x2844
    int32_t result; // 0x2838
    if (argc >= 2) {
        int32_t v4; // 0x2838
        if (argc == 2) {
            // 0x2878
            main(-86, NULL);
            int32_t v5 = (int32_t)argv;
            main(-87, (char **)(1 - v5));
            main(-79, (char **)-13);
            v4 = v5;
        } else {
            // 0x286c
            v4 = (int32_t)argv;
        }
        // 0x28d0
        if (v4 > argc) {
            // 0x28e0
            main(argc + 1, argv);
        }
        // 0x28f8
        if (argc == 2 != main(-94, (char **)(argc - 27)) != 0) {
            // 0x2af4
            __asm_lmw((int32_t)&v3, *(int32_t *)(v3 - 8));
            return 16;
        }
        // 0x2928
        result = 9;
        if (argv <= (char **)12) {
            // 0x2934
            result = main(2, (char **)(v4 + 1));
        }
        // 0x2af4
        __asm_lmw((int32_t)&v3, *(int32_t *)(v3 - 8));
        return result;
    }
    char v6 = v1 / 0x1000000;
    int32_t result2; // 0x2838
    if (argc > -1) {
        if (argc != 0) {
            // 0x2af4
            result2 = main(2, (char **)2);
            __asm_lmw((int32_t)&v3, *(int32_t *)(v3 - 8));
            return result2;
        }
        if (v6 != 47) {
            int32_t v7 = main(-61, (char **)(int32_t)v6); // 0x2abc
            if (main(0, (char **)v7) == 0) {
                // 0x2af4
                __asm_lmw((int32_t)&v3, *(int32_t *)(v3 - 8));
                return 0;
            }
        }
        // 0x2af4
        __asm_lmw((int32_t)&v3, *(int32_t *)(v3 - 8));
        return 1;
    }
    if (argc <= 0xffffffb7) {
        // 0x2af4
        result2 = main((int32_t)argv, (char **)argc);
        __asm_lmw((int32_t)&v3, *(int32_t *)(v3 - 8));
        return result2;
    }
    if (argc > -51) {
        // 0x2af4
        result2 = main(__asm_rlwinm(__asm_mfcr(), 31, 31, 31) + argc, argv);
        __asm_lmw((int32_t)&v3, *(int32_t *)(v3 - 8));
        return result2;
    }
    if ((int32_t)argv == (int32_t)v6) {
        int32_t v8 = *(int32_t *)0x3060; // 0x29e8
        int32_t v9 = ___sputc((int32_t)*(char *)(v1 + 31), v8 + 88, &v2); // 0x29f0
        result = v9;
    } else {
        // 0x29fc
        result = main(-65, argv);
    }
    // 0x2af4
    __asm_lmw((int32_t)&v3, *(int32_t *)(v3 - 8));
    return result;
}

// Address range: 0x2b10 - 0x2bc8
int32_t ___sputc(int32_t a1, int32_t a2, int32_t * a3) {
    // 0x2b10
    int32_t v1; // 0x2b10
    __asm_stmw(v1, v1);
    int32_t v2; // 0x2b10
    int32_t v3 = &v2; // bp-96, 0x2b1c
    int32_t * v4 = (int32_t *)(a2 + 8); // 0x2b34
    int32_t v5 = *v4 - 1; // 0x2b38
    *v4 = v5;
    int32_t result; // 0x2b10
    char v6; // 0x2b10
    if (v5 > -1) {
        uint32_t v7 = (int32_t)a3;
        result = v7 % 256;
        v6 = v7;
        goto lab_0x2b74;
    } else {
        // 0x2b48
        if (v5 < *(int32_t *)(a2 + 24)) {
            goto lab_0x2b9c;
        } else {
            uint32_t v8 = (int32_t)a3;
            result = v8 % 256;
            v6 = v8;
            if (result == 10) {
                goto lab_0x2b9c;
            } else {
                goto lab_0x2b74;
            }
        }
    }
  lab_0x2b74:
    // 0x2b74
    *(char *)a2 = v6;
    *(int32_t *)a2 = a2 + 1;
    // 0x2bb0
    __asm_lmw((int32_t)&v3, *(int32_t *)(v3 - 8));
    return result;
  lab_0x2b9c:;
    int32_t result2 = function_2d54(a1, a2);
    __asm_lmw((int32_t)&v3, *(int32_t *)(v3 - 8));
    return result2;
}

// Address range: 0x2d54 - 0x2d78
int32_t function_2d54(int32_t a1, int32_t a2) {
    // 0x2d54
    return ___swbuf();
}

// --------------- Dynamically Linked Functions ---------------

// int32_t ___swbuf(void);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: xcode
// Detected functions: 3

