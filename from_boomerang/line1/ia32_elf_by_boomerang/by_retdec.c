//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) Retargetable Decompiler <info@retdec.com>
//

#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// ------------------------ Structures ------------------------

struct _IO_FILE {
    int32_t e0;
};

// ------------------- Function Prototypes --------------------

int32_t chomp(int32_t * str2, int32_t size, int32_t stream);

// ------------------------ Functions -------------------------

// Address range: 0x8048454 - 0x80484a3
int32_t chomp(int32_t * str2, int32_t size, int32_t stream) {
    char * str = fgets((char *)str2, size, (struct _IO_FILE *)stream); // 0x804846e
    if (str == NULL) {
        // 0x804849e
        return (int32_t)str;
    }
    char * found_char_pos = strchr(str, 10); // 0x804848a
    if (found_char_pos != NULL) {
        // 0x8048498
        *found_char_pos = 0;
    }
    // 0x804849e
    return (int32_t)str;
}

// Address range: 0x80484a3 - 0x804853f
int main(int argc, char ** argv) {
    // 0x80484a3
    if (argc <= 1) {
        // 0x8048537
        return 1;
    }
    struct _IO_FILE * file = fopen((char *)*(int32_t *)((int32_t)argv + 4), "r"); // 0x80484db
    int32_t result = 1; // 0x80484e7
    if (file == NULL) {
        // 0x8048537
        return result;
    }
    // 0x80484f5
    int32_t v1; // bp-1052, 0x80484a3
    if (chomp(&v1, 1024, (int32_t)file) != 0) {
        // 0x8048516
        printf("%s\n", &v1);
    }
    // 0x804852c
    fclose(file);
    // 0x8048537
    return result;
}

// --------------- Dynamically Linked Functions ---------------

// int fclose(FILE * stream);
// char * fgets(char * restrict s, int n, FILE * restrict stream);
// FILE * fopen(const char * restrict filename, const char * restrict modes);
// int printf(const char * restrict format, ...);
// char * strchr(char * s, int c);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: gcc (4.6.3)
// Detected functions: 2

