// subject_0800.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

struct seg0800_t * g_ptr8000 = &g_t1BBA; // 00008000
// 0800:01FA: void _main(Register Eq_5 ds)
void _main(Eq_5 ds)
{
	ui32 dx_ax_196 = fn0800_08C3(~0x8E, 0x00, ~0x00, 0x018E);
	ci16 dx_84;
	byte ch_198;
	fn0800_10CF(fn0800_10C6(0x018E, dx_ax_196), dx_ax_196, out ch_198, out dx_84);
	word16 cx_83 = <invalid>;
	word16 dx_110;
	word16 bx_111;
	_printf(SEQ(SLICE(cx_83, byte, 8), fn0800_1169(fn0800_1187((word16) dx_ax_196, 0x05), dx_84, out dx_110, out bx_111)), dx_110, bx_111, ds, 404);
}

// 0800:07D8: void __LONGTOA(Register Eq_5 ds, Stack Eq_67 bArg02, Stack Eq_68 bArg04, Stack Eq_69 wArg06, Stack (memptr Eq_5 byte) wArg08, Stack Eq_71 dwArg0A)
// Called from:
//      __VPRINTER
void __LONGTOA(Eq_5 ds, Eq_67 bArg02, Eq_68 bArg04, Eq_69 wArg06, byte Eq_5::* wArg08, Eq_71 dwArg0A)
{
	Eq_72 fp;
	uint16 wArg0A = (word16) dwArg0A;
	Eq_75 wArg0C = SLICE(dwArg0A, word16, 16);
	byte Eq_5::* di_128 = wArg08;
	cu8 bl_28 = (byte) wArg06;
	if (wArg06 > 0x24 || bl_28 < 0x02)
	{
l0800_0846:
		ds->*di_128 = 0x00;
		return;
	}
	uint16 ax_31 = wArg0A;
	Eq_75 cx_33 = wArg0C;
	if (wArg0C < 0x00 && bArg04 != 0x00)
	{
		ds->*wArg08 = 0x2D;
		ui32 cx_ax_175 = -dwArg0A;
		di_128 = wArg08 + 1;
		ax_31 = (word16) cx_ax_175;
		cx_33 = SLICE(cx_ax_175, word16, 16);
	}
	byte Eq_5::* si_100 = fp - 36;
	if (cx_33 != 0x00)
	{
		do
		{
			uint32 dx_ax_57 = (uint32) cx_33;
			uint32 dx_ax_65 = SEQ((uint16) (dx_ax_57 % wArg06), ax_31);
			ds->*si_100 = (byte) (dx_ax_65 % wArg06);
			Eq_75 ax_61 = (uint16) (dx_ax_57 /u wArg06);
			cx_33 = ax_61;
			ax_31 = (uint16) (dx_ax_65 /u wArg06);
			++si_100;
		} while (ax_61 != 0x00);
l0800_0829:
		if (ax_31 == 0x00)
		{
			int16 cx_107 = si_100 + (36 - fp);
			do
			{
				byte al_120;
				--si_100;
				cu8 al_114 = ds->*si_100;
				if (al_114 < 0x0A)
					al_120 = al_114 + 0x30;
				else
					al_120 = (byte) bArg02.u1 + (al_114 - 0x0A);
				ds->*di_128 = al_120;
				++di_128;
				--cx_107;
			} while (cx_107 != 0x00);
			goto l0800_0846;
		}
	}
	uint32 dx_ax_85 = (uint32) ax_31;
	ds->*si_100 = (byte) (dx_ax_85 % wArg06);
	ax_31 = (uint16) (dx_ax_85 /u wArg06);
	++si_100;
	goto l0800_0829;
}

// 0800:08C3: Sequence word32 fn0800_08C3(Register uint16 ax, Register uint16 cx, Register uint16 dx, Register uint16 bx)
// Called from:
//      _main
word32 fn0800_08C3(uint16 ax, uint16 cx, uint16 dx, uint16 bx)
{
	uint16 ax_15 = dx;
	if (dx != 0x00)
		ax_15 = bx * dx;
	uint16 cx_29 = ax_15;
	if (cx != 0x00)
		cx_29 = ax_15 + ax * cx;
	uint32 dx_ax_45 = bx *32 ax;
	return SEQ(SLICE(dx_ax_45, word16, 16) + cx_29, (word16) dx_ax_45);
}

// 0800:097B: void _printf(Register word16 cx, Register word16 dx, Register word16 bx, Register Eq_5 ds, Stack word16 wArg02)
// Called from:
//      _main
void _printf(word16 cx, word16 dx, word16 bx, Eq_5 ds, word16 wArg02)
{
	mp16 fp;
	__VPRINTER(cx, dx, bx, ds, fp + 4, wArg02);
}

// 0800:0B74: void __REALCVT(Register Eq_5 ds)
// Called from:
//      __VPRINTER
void __REALCVT(Eq_5 ds)
{
	Mem0[ds:0x0428:word16]();
}

// 0800:0B78: Register word16 fn0800_0B78(Sequence (ptr32 Eq_207) es_di, Register Eq_5 ds, Stack Eq_5 wArg02)
// Called from:
//      __VPRINTER
word16 fn0800_0B78(struct Eq_207 * es_di, Eq_5 ds, Eq_5 wArg02)
{
	word16 di = (word16) es_di;
	bcu8 dh_13 = SLICE(wArg02, byte, 8);
	Mem21[es_di + 0x00:byte] = Mem7[ds:CONVERT(dh_13 >>u 0x04, byte, uint16) + 0x03B1:byte];
	Mem27[es_di + 1:byte] = Mem21[ds:CONVERT(dh_13 & 0x0F, byte, uint16) + 0x03B1:byte];
	bcu8 dl_29 = (byte) wArg02;
	Mem33[es_di + 2:byte] = Mem27[ds:CONVERT(dl_29 >>u 0x04, byte, uint16) + 0x03B1:byte];
	Mem41[es_di + 3:byte] = Mem33[ds:CONVERT(dl_29 & 0x0F, byte, uint16) + 0x03B1:byte];
	return di + 4;
}

// 0800:0BA3: void __VPRINTER(Register word16 cx, Register word16 dx, Register word16 bx, Register Eq_5 ds, Stack mp16 wArg02, Stack word16 wArg04)
// Called from:
//      _printf
void __VPRINTER(word16 cx, word16 dx, word16 bx, Eq_5 ds, mp16 wArg02, word16 wArg04)
{
	bLoc57_1259 = 0x50;
	sp_20 = fp - 0xA0;
	wLoc98_1262 = fp - 86;
l0800_0C06:
	di_29 = wLoc98_1263;
l0800_0C0A:
	si_33 = wArg04_1264;
	while (true)
	{
		al_37 = ds->*si_35;
		si_38 = si_35 + 1;
		al_39 = al_37;
		if (al_37 == 0x00)
			break;
		if (al_37 == 0x25)
		{
			al_49 = ds->*si_38;
			si_50 = si_38 + 1;
			if (al_49 != 0x25)
			{
				wLoc98_1266 = di_53;
				ch_1171 = 0x00;
				wLoc8E_1267 = 0x00;
				wLoc9A_1268 = 0x00;
				bLoc8F_1269 = 0x00;
				wLoc94_1270 = ~0x00;
				wLoc92_1271 = ~0x00;
				while (true)
				{
					ax_67 = (uint16) al_66;
					bl_70 = (byte) ax_67;
					bh_75 = SLICE(ax_67, byte, 8);
					dx_68 = ax_67;
					dl_137 = (byte) ax_67;
					bx_76 = SEQ(bh_75, bl_70 - 0x20);
					cx_1191 = SEQ(ch_868, 0x00);
					if (bl_70 >= 0x80)
						break;
					bl_78 = (ds->*bx_76).b03C1;
					bx_79 = SEQ(bh_75, bl_78);
					cx_1188 = SEQ(ch_868, 0x00);
					if (bx_79 > 0x17)
						goto l0800_1090;
					bx_85 = bx_79 << 0x01;
					cx_1189 = SEQ(ch_868, 0x00);
					switch (bx_79)
					{
					case 0x00:
						cx_1194 = SEQ(ch_868, 0x00);
						if (ch_868 > 0x00)
							goto l0800_0CA5;
						if (bLoc8F_1360 != 0x2B)
							bLoc8F_1482 = dl_137;
						break;
					case 0x01:
						cx_1193 = SEQ(ch_868, 0x00);
						if (ch_868 > 0x00)
							goto l0800_0CA5;
						wLoc9A_1481 = wLoc9A_1272 | 0x01;
						break;
					case 0x02:
						ax_967.u2 = (ds->*wArg02_1276).t0000.u2;
						wArg02_1478 = (union Eq_5 Eq_5::*) &wArg02_1276->t0002.u0;
						if (ch_868 < 0x02)
						{
							wLoc94_1480 = ax_967;
							ch_978 = 0x03;
							goto l0800_0D15;
						}
						cx_1198 = SEQ(ch_868, 0x00);
						if (ch_868 != 0x04)
							goto l0800_0CFE;
						wLoc92_1479 = ax_967;
						ch_975 = ch_868 + 0x01;
						break;
					case 0x03:
						cx_1192 = SEQ(ch_868, 0x00);
						if (ch_868 > 0x00)
							goto l0800_0CA5;
						wLoc9A_1477 = wLoc9A_1272 | 0x02;
						break;
					case 0x04:
						cx_1196 = SEQ(ch_868, 0x00);
						if (ch_868 >= 0x04)
							goto l0800_0CFE;
						ch_958 = 0x04;
						break;
					case 0x05:
						goto l0800_0D30;
					case 0x06:
						wLoc9A_1470 = wLoc9A_1272 | 0x10;
						ch_904 = 0x05;
						break;
					case 0x07:
						wLoc9A_1469 = (wLoc9A_1272 | 0x0100) & ~0x10;
						ch_898 = 0x05;
						break;
					case 0x08:
						wLoc9A_1467 = wLoc9A_1272 & ~0x10 | 0x80;
						ch_889 = 0x05;
						break;
					case 0x09:
						if (ch_868 <= 0x00)
						{
							if ((wLoc9A_1272 & 0x02) != 0x00)
								goto l0800_0D15;
							wLoc9A_1465 = wLoc9A_1272 | 0x08;
							ch_880 = 0x01;
						}
						else
						{
l0800_0D30:
							dx_908 = bx_79;
							ax_912 = (int16) ((byte) ax_67 - 0x30);
							if (ch_868 <= 0x02)
							{
								ch_938 = 0x02;
								wLoc94_1475 = ax_912;
								if (wLoc94_1347 < 0x00)
									goto l0800_0D15;
								wLoc94_1476 = ax_912 + wLoc94_1347 * 0x0A;
							}
							else
							{
								cx_1197 = SEQ(ch_868, 0x00);
								if (ch_868 != 0x04)
								{
l0800_0CFE:
									goto l0800_1090;
								}
								wLoc92_1472 = ax_912;
								if (wLoc92_1289 >= 0x00)
									wLoc92_1473 = ax_912 + wLoc92_1289 * 0x0A;
								else
								{
l0800_0D15:
								}
							}
						}
						break;
					case 0x0A:
						dx_ax_378 = (int32) (ds->*wArg02_1276).t0000.u2;
						bLoc95_1317 = 0x01;
						ax_404 = (word16) dx_ax_378;
						dx_412 = SLICE(dx_ax_378, word16, 16);
						bx_1967 = SEQ(0x0A, bl_78 << 0x01);
						goto l0800_0DD2;
					case 11:
						bx_1979 = SEQ(0x08, bl_78 << 0x01);
						goto l0800_0DAA;
					case 0x0C:
						bx_1973 = SEQ(0x0A, bl_78 << 0x01);
						goto l0800_0DAF;
					case 0x0D:
						bx_1980 = SEQ(0x10, dl_137 + 233);
l0800_0DAA:
						bLoc8F_1312 = 0x00;
						bx_1972 = bx_1981;
l0800_0DAF:
						bLoc95_1313 = 0x00;
						ax_368.u2 = (ds->*wArg02_1276).t0000.u2;
						dx_369 = 0x00;
						bx_1966 = bx_1974;
l0800_0DD2:
						di_380 = (struct Eq_670 Eq_5::*) ((char *) &wArg02_1276->t0000 + 1);
						bh_449 = SLICE(bx_1968, byte, 8);
						di_381 = (union Eq_5 Eq_5::*) &di_380->w0001;
						wArg04_1319 = si_101;
						if ((wLoc9A_1272 & 0x10) != 0x00)
						{
							dx_393 = (ds->*di_380).w0001;
							di_395 = (struct Eq_730 Eq_5::*) (&di_380->w0001 + 1);
						}
						wArg02_1323 = di_397;
						if (ax_403 == 0x00)
						{
							dx_413 = dx_410;
							dh_1170 = SLICE(dx_410, byte, 8);
							if (dx_410 != 0x00)
								goto l0800_0E21;
							bx_1169 = bx_1968;
							if (wLoc92_1289 == 0x00)
							{
								di_839 = di_53;
								cx_840 = wLoc94_1347;
								if (wLoc94_1347 != 0x00 && wLoc94_1347 != ~0x00)
								{
									if ((wLoc9A_1272 & 0x08) != 0x00)
										dl_850 = 0x30;
									else
										dl_849 = 0x20;
									do
									{
										dx_862 = SEQ(dh_1170, dl_851);
										di_863 = fn0800_0BC9(SEQ(ds, di_854), SEQ(ss, fp - 2), dl_851, cx_860, dx_862, bx_1968);
										cx_867 = cx_860 - 0x01;
									} while (cx_867 != 0x00);
								}
								goto l0800_0C0A;
							}
						}
						else
						{
l0800_0E21:
							wLoc9A_1326 = wLoc9A_1272 | 0x04;
						}
						sp_434 = sp_1222 - 2;
						(ss->*sp_434).t0000.u2 = (struct Eq_1560 *) dx_410;
						(ss->*sp_434).tFFFFFFFE.u0 = (word16) ax_403;
						(ss->*sp_434).ptrFFFFFFFC = fp - 0x89;
						ax_454.u0 = (int16) bh_449;
						(ss->*sp_434).tFFFFFFFA.u0 = (int16) ax_454;
						(ss->*sp_434).tFFFFFFF8.u1 = (word16) SEQ(SLICE(ax_454, byte, 8), bLoc95_1333);
						(ss->*sp_434).tFFFFFFF6.u0 = (ci16) bx_1968;
						__LONGTOA(ds, (ss->*sp_434).tFFFFFFF6.u1, (ss->*sp_434).tFFFFFFF8.u0, (ss->*sp_434).tFFFFFFFA.u0, (ss->*sp_434).ptrFFFFFFFC, (ss->*sp_434).tFFFFFFFE.u1);
						(ss->*sp_434).t0000.u2 = (struct Eq_1560 *) ss;
						es_485.u2 = (ss->*sp_434).t0000.u2;
						sp_486 = (struct Eq_821 Eq_5::*) ((char *) &sp_434->t0000 + 2);
						dx_488 = wLoc92_1289;
						if (wLoc92_1289 > 0x00)
						{
							es_di_1970 = SEQ(es_485, fp - 0x89);
							goto l0800_0F67;
						}
						else
						{
							es_di_1975 = SEQ(es_485, fp - 0x89);
							goto l0800_0F57;
						}
					case 0x0E:
						sp_280 = sp_1222 - 2;
						(ss->*sp_280).t0000.u2 = (ds->*wArg02_1276).t0000.u2;
						di_277 = fp - 0x8A;
						wArg02_1306 = (union Eq_5 Eq_5::*) &wArg02_1276->t0002.u0;
						if ((wLoc9A_1272 & 0x20) != 0x00)
						{
							(ss->*sp_280).tFFFFFFFE.u2 = (ds->*wArg02_1276).t0002.u2;
							(ss->*sp_280).tFFFFFFFC.u2 = (struct Eq_1560 *) ss;
							es_298.u2 = (ss->*sp_280).tFFFFFFFC.u2;
							di_304 = fn0800_0B78(SEQ(es_298, fp - 0x8A), ds, (ss->*sp_280).tFFFFFFFE.u2);
							es_298->*di_304 = 0x3A;
							wArg02_1307 = (struct Eq_1211 Eq_5::*) ((char *) &wArg02_1276->t0002 + 2);
							di_314 = di_304 + 1;
						}
						(ss->*sp_280).tFFFFFFFE.u2 = (struct Eq_1560 *) ss;
						es_319.u2 = (ss->*sp_280).tFFFFFFFE.u2;
						di_327 = fn0800_0B78(SEQ(es_319, di_321), ds, (ss->*sp_280).t0000.u2);
						ds->*di_327 = 0x00;
						sp_334 = (struct Eq_1169 Eq_5::*) ((char *) &sp_280->t0000 + 2);
						wLoc9A_1310 = wLoc9A_1272 & ~0x04;
						di_342 = di_327 - (fp - 0x8A);
						dx_346 = wLoc92_1289;
						if (wLoc92_1289 <= di_342)
							dx_349 = di_342;
						es_di_1976 = SEQ(es_319, fp - 0x8A);
						goto l0800_0F57;
					case 0x0F:
						cx_217 = wLoc92_1289;
						if (wLoc92_1289 < 0x00)
							cx_223 = 0x06;
						sp_225 = sp_1222 - 2;
						(ss->*sp_225).ptr0000 = wArg02_1276;
						(ss->*sp_225).wFFFFFFFE = cx_230;
						(ss->*sp_225).ptrFFFFFFFC = fp - 0x89;
						(ss->*sp_225).wFFFFFFFA = ax_67;
						(ss->*sp_225).wFFFFFFF8 = wLoc9A_1272 & 0x01;
						if ((wLoc9A_1272 & 0x80) != 0x00)
						{
							ax_256 = 0x02;
							wLoc06_1299 = 0x04;
						}
						else if ((wLoc9A_1272 & 0x0100) != 0x00)
						{
							ax_254 = 0x08;
							wLoc06_1298 = 0x0A;
						}
						else
						{
							wLoc06_1297 = 0x08;
							ax_253 = 0x06;
						}
						(ss->*sp_225).wFFFFFFF6 = ax_260;
						__REALCVT(ds);
						(ss->*sp_225).tFFFFFFF4.u2 = (struct Eq_1560 *) ss;
						wArg02_1303 = (struct Eq_1252 Eq_5::*) (wArg02_1276 + wLoc06_1300 /16 6);
						sp_273 = sp_225 - 0x0A;
						es_di_1977 = (ptr32) (fp - 0x89);
l0800_0F57:
						es_513 = SLICE(es_di_1978, selector, 16);
						di_510 = (word16) es_di_1978;
						if ((wLoc9A_1337 & 0x08) != 0x00)
						{
							dx_504 = wLoc94_1347;
							es_di_1969 = es_di_1978;
							if (wLoc94_1347 > 0x00)
							{
l0800_0F67:
								es_512 = SLICE(es_di_1971, selector, 16);
								di_509 = (word16) es_di_1971;
								cx_516 = fn0800_0BBC(di_509, es_512);
								if (*es_di_1971 == 0x2D)
									cx_524 = cx_516 - 0x01;
								dx_529 = dx_527 - cx_528;
								if (dx_529 > 0x00)
									wLoc8E_1353 = dx_529;
							}
						}
						if (bLoc8F_1354 != 0x00 && es_547->*di_549 != 0x2D)
						{
							di_560 = di_549 - 0x01;
							es_547->*di_560 = bLoc8F_1354;
							v45_553 = wLoc8E_1368 - 0x01;
							wLoc8E_1384 = v45_553 + (word16) (v45_553 < 0x00);
						}
						cx_566 = fn0800_0BBC(di_563, es_547);
						goto l0800_0F98;
					case 0x10:
						sp_200 = sp_1222 - 2;
						(ss->*sp_200).u2 = (struct Eq_1560 *) ss;
						wArg02_1292 = (union Eq_5 Eq_5::*) &wArg02_1276->t0002.u0;
						es_202.u2 = (ss->*sp_200).u2;
						sp_203 = (union Eq_5 Eq_5::*) ((char *) sp_200 + 2);
						di_204 = fp - 0x89;
						cx_212 = 0x01;
						goto l0800_0F98;
					case 0x11:
						if ((wLoc9A_1272 & 0x20) == 0x00)
						{
							di_154.u2 = (ds->*wArg02_1276).t0000.u2;
							sp_157 = sp_1222 - 2;
							(ss->*sp_157).u2 = (struct Eq_1560 *) ds;
							wArg02_1286 = (union Eq_5 Eq_5::*) &wArg02_1276->t0002.u0;
							es_159.u2 = (ss->*sp_157).u2;
							di_161 = di_154;
							v75_1253 = di_154 != 0x00;
						}
						else
						{
							es_di_144.u1 = (ds->*wArg02_1276).t0000.u1;
							es_147 = SLICE(es_di_144, selector, 16);
							di_149 = (word16) es_di_144;
							wArg02_1285 = (union Eq_5 Eq_5::*) ((char *) &wArg02_1276->t0002 + 2);
							v76_1254 = es_di_144 != 0x00;
						}
						if (!v74_1252)
						{
							sp_169 = sp_1222 - 2;
							(ss->*sp_169).u2 = (struct Eq_1560 *) ds;
							es_173.u2 = (ss->*sp_169).u2;
							di_175 = 0x03AA;
						}
						sp_1235 = sp_1222;
						cx_181 = fn0800_0BBC(di_176, es_178);
						if (cx_181 > wLoc92_1289)
							cx_193 = wLoc92_1289;
l0800_0F98:
						wArg04_1550 = si_101;
						si_573 = di_571;
						di_583 = di_53;
						bx_584 = wLoc94_1347;
						if ((wLoc9A_1413 & 0x05) == 0x05)
						{
							if (dl_137 != 111)
							{
								if (dl_137 == 0x78 || dl_137 == 88)
								{
									v42_605 = wLoc8E_1441 - 0x02;
									wLoc9A_1439 = wLoc9A_1413 | 0x40;
									bx_604 = wLoc94_1347 - 0x02;
									wLoc8E_1446 = v42_605;
									if (v42_605 < 0x00)
										wLoc8E_1447 = 0x00;
								}
l0800_0FE5:
								cx_624 = cx_614 + wLoc8E_1449;
								if ((wLoc9A_1451 & 0x02) == 0x00)
								{
									while (bx_629 > cx_624)
									{
										di_641 = fn0800_0BC9(SEQ(ds, di_635), SEQ(ss, fp - 2), 0x20, cx_624, dx_681, bx_629);
										bx_645 = bx_629 - 0x01;
									}
								}
								if ((wLoc9A_1451 & 0x40) != 0x00)
									di_699 = fn0800_0BC9(SEQ(ds, fn0800_0BC9(SEQ(ds, di_669), SEQ(ss, fp - 2), 0x30, cx_624, dx_681, bx_675)), SEQ(ss, fp - 2), dl_137, cx_624, dx_681, bx_675);
								dx_707 = wLoc8E_1449;
								if (wLoc8E_1449 > 0x00)
								{
									cx_713 = cx_624 - wLoc8E_1449;
									bx_715 = bx_675 - wLoc8E_1449;
									al_730 = es_719->*di_571;
									if (al_730 == 0x2D || (al_730 == 0x20 || al_730 == 0x2B))
									{
										si_741 = di_571 + 1;
										di_753 = fn0800_0BC9(SEQ(ds, di_745), SEQ(ss, fp - 2), es_719->*di_571, cx_713, wLoc8E_1449, bx_715);
										cx_757 = cx_713 - 0x01;
										bx_758 = bx_715 - 0x01;
									}
									cx_764 = wLoc8E_1449;
									if (wLoc8E_1449 != 0x00)
									{
										do
										{
											di_775 = fn0800_0BC9(SEQ(ds, di_767), SEQ(ss, fp - 2), 0x30, cx_773, cx_762, bx_788);
											cx_779 = cx_773 - 0x01;
										} while (cx_779 != 0x00);
									}
									dx_783 = cx_782;
									cx_784 = cx_762;
								}
								if (cx_785 != 0x00)
								{
									bx_789 = bx_786 - cx_785;
									do
									{
										ds->*di_797 = es_719->*si_792;
										v47_802 = bLoc57_1463 - 0x01;
										si_795 = si_792 + 1;
										di_799 = di_797 + 1;
										bLoc57_1464 = v47_802;
										if (v47_802 <= 0x00)
											di_809 = fn0800_0BD1(SEQ(ss, fp - 2), cx_807, dx_1166, bx_789, di_799);
										cx_815 = cx_807 - 0x01;
									} while (cx_815 != 0x00);
								}
								bx_818 = bx_816;
								if (bx_816 > 0x00)
								{
									cx_823 = bx_816;
									do
									{
										di_834 = fn0800_0BC9(SEQ(ds, di_826), SEQ(ss, fp - 2), 0x20, cx_832, dx_1166, bx_816);
										cx_838 = cx_832 - 0x01;
									} while (cx_838 != 0x00);
								}
								goto l0800_0C0A;
							}
							if (wLoc8E_1441 <= 0x00)
								wLoc8E_1448 = 0x01;
						}
						goto l0800_0FE5;
					case 0x12:
						wArg04_1275 = si_101;
						if ((wLoc9A_1272 & 0x20) == 0x00)
						{
							di_112.u2 = (ds->*wArg02_1276).t0000.u2;
							sp_117 = sp_1222 - 2;
							(ss->*sp_117).u2 = (struct Eq_1560 *) ds;
							wArg02_1278 = (union Eq_5 Eq_5::*) &wArg02_1276->t0002.u0;
							es_di_1964 = (ptr32) di_112.u2;
						}
						else
						{
							es_di_108.u1 = (ds->*wArg02_1276).t0000.u1;
							wArg02_1277 = (union Eq_5 Eq_5::*) ((char *) &wArg02_1276->t0002 + 2);
						}
						*es_di_1965 = (uint16) (0x50 - bLoc57_1496);
						sp_1224 = sp_1222;
						goto l0800_0C06;
					case 0x13:
					case 0x14:
					case 0x15:
						goto l0800_1090;
					case 22:
						wLoc9A_1274 = wLoc9A_1272 & ~0x20;
						ch_100 = 0x05;
						break;
					case 0x17:
						wLoc9A_1273 = wLoc9A_1272 | 0x20;
						ch_94 = 0x05;
						break;
					}
					al_1002 = ds->*si_101;
					si_1003 = si_101 + 1;
				}
l0800_0CA5:
l0800_1090:
				si_1013 = si_38;
				di_1014 = di_53;
				al_1015 = 0x25;
				do
				{
					di_1026 = fn0800_0BC9(SEQ(ds, di_1017), SEQ(ss, fp - 2), al_1022, cx_1182, dx_1199, bx_1178);
					al_1032 = ds->*si_1030;
					si_1033 = si_1030 + 1;
					al_1034 = al_1032;
				} while (al_1032 != 0x00);
				break;
			}
		}
		ds->*di_53 = al_1084;
		v18_1091 = bLoc57_1496 - 0x01;
		di_1088 = di_53 + 1;
		bLoc57_1536 = v18_1091;
		if (v18_1091 <= 0x00)
			di_1098 = fn0800_0BD1(SEQ(ss, fp - 2), cx_1208, dx_1215, bx_1202, di_1088);
	}
	if (bLoc57_1496 < 0x50)
		fn0800_0BD1(SEQ(ss, fp - 2), cx_1047, dx_1049, bx_1045, di_1051);
}

// 0800:0BBC: Register word16 fn0800_0BBC(Register (memptr (ptr16 Eq_700) byte) di, Register (ptr16 Eq_700) es)
// Called from:
//      __VPRINTER
word16 fn0800_0BBC(byte Eq_700::* di, struct Eq_700 * es)
{
	word16 cx_13 = ~0x00;
	while (cx_13 != 0x00)
	{
		di = di_46 + 1;
		--cx_13;
		di_46 = di;
		if (es->*di_46 != 0x00)
			return -cx_13;
	}
	return -cx_13;
}

// 0800:0BC9: Register word16 fn0800_0BC9(Sequence (ptr32 byte) ds_di, Sequence (ptr32 Eq_308) ss_bp, Register byte al, Register Eq_67 cx, Register ci16 dx, Register Eq_67 bx)
// Called from:
//      __VPRINTER
word16 fn0800_0BC9(byte * ds_di, struct Eq_308 * ss_bp, byte al, Eq_67 cx, ci16 dx, Eq_67 bx)
{
	word16 di = (word16) ds_di;
	*ds_di = al;
	ci8 v10_11 = ss_bp->bFFFFFFAB - 0x01;
	ss_bp->bFFFFFFAB = v10_11;
	if (v10_11 <= 0x00)
		return di + 0x01;
	return fn0800_0BD1(ss_bp, cx, dx, bx, di + 0x01);
}

// 0800:0BD1: Register (memptr Eq_5 byte) fn0800_0BD1(Sequence (ptr32 Eq_308) ss_bp, Register Eq_67 cx, Register ci16 dx, Register Eq_67 bx, Register (memptr Eq_5 byte) di)
// Called from:
//      __VPRINTER
//      fn0800_0BC9
byte Eq_5::* fn0800_0BD1(struct Eq_308 * ss_bp, Eq_67 cx, ci16 dx, Eq_67 bx, byte Eq_5::* di)
{
	word16 bp = (word16) ss_bp;
	word16 di_20 = di - (bp - 84);
	word16 ax_34;
	(seg0800->*ss_bp->ptr000A)();
	if (ax_34 == 0x00)
		ss_bp->wFFFFFFFE = 0x01;
	ss_bp->bFFFFFFAB = 0x50;
	ss_bp->wFFFFFFA8 += di_20;
	return bp - 84;
}

// 0800:10C6: Sequence word32 fn0800_10C6(Stack uint32 dwArg04, Stack ui32 dwArg08)
// Called from:
//      _main
word32 fn0800_10C6(uint32 dwArg04, ui32 dwArg08)
{
	word16 dx_13;
	byte ch_21;
	return SEQ(dx_13, fn0800_10D7(0x00, dwArg04, dwArg08, out ch_21, out dx_13));
}

// 0800:10CF: Register word16 fn0800_10CF(Stack uint32 dwArg04, Stack ui32 dwArg08, Register out Eq_24 chOut, Register out ptr16 dxOut)
// Called from:
//      _main
word16 fn0800_10CF(uint32 dwArg04, ui32 dwArg08, union Eq_24 & chOut, ptr16 & dxOut)
{
	ptr16 dx_10;
	byte ch_20;
	word16 ax_7 = fn0800_10D7(0x02, dwArg04, dwArg08, out ch_20, out dx_10);
	chOut.u1 = <invalid>;
	dxOut = dx_10;
	return ax_7;
}

// 0800:10D7: Register uint16 fn0800_10D7(Register uint16 cx, Stack uint32 dwArg04, Stack ui32 dwArg08, Register out Eq_24 chOut, Register out ptr16 dxOut)
// Called from:
//      fn0800_10C6
//      fn0800_10CF
uint16 fn0800_10D7(uint16 cx, uint32 dwArg04, ui32 dwArg08, union Eq_24 & chOut, ptr16 & dxOut)
{
	ci16 wArg06 = SLICE(dwArg04, word16, 16);
	uint16 wArg08 = (word16) dwArg08;
	ci16 wArg0A = SLICE(dwArg08, word16, 16);
	uint16 ax_176;
	ptr16 dx_172;
	uint16 di_16 = cx;
	if (wArg0A == 0x00 && (wArg06 == 0x00 || wArg08 == 0x00))
	{
		uint16 dx_41 = (uint16) (dwArg04 % wArg08);
		ax_176 = (uint16) (dwArg04 /u wArg08);
		if ((cx & 0x02) != 0x00)
			ax_176 = dx_41;
		dx_172 = 0x00;
	}
	else
	{
		ui32 cx_bx_210 = dwArg08;
		uint32 dx_ax_305 = dwArg04;
		if ((cx & 0x01) == 0x00)
		{
			uint32 dx_ax_208 = dwArg04;
			if (wArg06 < 0x00)
			{
				dx_ax_208 = -dwArg04;
				di_16 = cx | 0x0C;
			}
			cx_bx_210 = dwArg08;
			dx_ax_305 = dx_ax_208;
			if (wArg0A < 0x00)
			{
				cx_bx_210 = -dwArg08;
				di_16 = di_16 ^ 0x04;
				dx_ax_305 = dx_ax_208;
			}
		}
		uint16 bx_205 = (word16) cx_bx_210;
		uint16 cx_91 = SLICE(cx_bx_210, word16, 16);
		word16 cx_143;
		uint16 di_103 = 0x00;
		uint16 si_104 = 0x00;
		uint32 dx_ax_296 = dx_ax_305;
		for (cx_143 = 0x20; cx_143 != 0x00; --cx_143)
		{
			ui32 v32_218 = dx_ax_296 << 0x01;
			si_104 = __rcl<word16,byte>(si_104, 0x01, (SLICE(dx_ax_296, word16, 16) & 0x8000) != 0x00);
			word16 ax_109 = (word16) v32_218;
			word16 dx_114 = SLICE(v32_218, word16, 16);
			di_103 = __rcl<word16,byte>(di_103, 0x01, (si_104 & 0x8000) != 0x00);
			if (di_103 >= cx_91 && (di_103 > cx_91 || si_104 >= bx_205))
			{
				ui32 di_si_213 = SEQ(di_103, si_104) - cx_bx_210;
				si_104 = (word16) di_si_213;
				di_103 = SLICE(di_si_213, word16, 16);
				++ax_109;
			}
			dx_ax_296 = SEQ(dx_114, ax_109);
		}
		uint16 bx_155 = di_16;
		uint32 dx_ax_302 = SEQ(dx_114, ax_109);
		if ((di_16 & 0x02) != 0x00)
		{
			bx_155 = di_16 >> 0x01;
			dx_ax_302 = SEQ(di_103, si_104);
		}
		ax_176 = (word16) dx_ax_302;
		dx_172 = SLICE(dx_ax_302, word16, 16);
		if ((bx_155 & 0x04) != 0x00)
		{
			uint32 dx_ax_215 = -dx_ax_302;
			ax_176 = (word16) dx_ax_215;
			dx_172 = SLICE(dx_ax_215, word16, 16);
		}
	}
	chOut.u1 = <invalid>;
	dxOut = dx_172;
	return ax_176;
}

// 0800:1169: Register cu8 fn0800_1169(Register cu8 cl, Register ci16 dx, Register out Eq_51 dxOut, Register out Eq_52 bxOut)
// Called from:
//      _main
cu8 fn0800_1169(cu8 cl, ci16 dx, union Eq_51 & dxOut, union Eq_52 & bxOut)
{
	Eq_52 bx;
	if (cl >= 0x10)
	{
		dxOut = SLICE((int32) dx, word16, 16);
		bxOut = bx;
		return cl - 0x10;
	}
	else
	{
		dxOut = dx >> cl;
		cu8 cl_19 = -cl;
		bxOut = dx << cl_19 + 0x10;
		return cl_19 + 0x10;
	}
}

// 0800:1187: Register ui8 fn0800_1187(Register word16 ax, Register cu8 cl)
// Called from:
//      _main
ui8 fn0800_1187(word16 ax, cu8 cl)
{
	if (cl >= 0x10)
		return 0x00;
	return (byte) ax << cl;
}

