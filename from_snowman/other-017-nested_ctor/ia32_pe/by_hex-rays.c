/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

int __thiscall sub_401014(_DWORD); // weak
int __thiscall sub_401019(_DWORD); // weak
_DWORD *__thiscall sub_401040(_DWORD *this);
int sub_401060();
_DWORD *__thiscall sub_401070(_DWORD *this);
int __thiscall sub_401090(_DWORD *this);
int __cdecl main_0(int argc, const char **argv, const char **envp);
// void *__cdecl operator new(unsigned int); idb
// LONG __stdcall __CxxUnhandledExceptionFilter(struct _EXCEPTION_POINTERS *ExceptionInfo); idb
int sub_4015C9();
int (*sub_40169C())(void);
void __cdecl sub_4016C2(); // idb
int __cdecl UserMathErrorFunction();
int sub_401937();
// LPTOP_LEVEL_EXCEPTION_FILTER __stdcall SetUnhandledExceptionFilter(LPTOP_LEVEL_EXCEPTION_FILTER lpTopLevelExceptionFilter);

//-------------------------------------------------------------------------
// Data declarations

void *AAAAA::`vftable' = &sub_40100A; // weak
void *BBBBB::`vftable' = &sub_401005; // weak
_UNKNOWN unk_403D38; // weak
int (*dword_403E38[66])(void) =
{
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL
}; // idb
_UNKNOWN unk_403F40; // weak
void (*dword_404040[66])(void) =
{
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL,
  NULL
}; // idb


//----- (00401040) --------------------------------------------------------
_DWORD *__thiscall sub_401040(_DWORD *this)
{
  _DWORD *result; // eax

  result = this;
  *this = &AAAAA::`vftable';
  this[1] = 100;
  return result;
}
// 403740: using guessed type void *AAAAA::`vftable';

//----- (00401060) --------------------------------------------------------
int sub_401060()
{
  return 1;
}

//----- (00401070) --------------------------------------------------------
_DWORD *__thiscall sub_401070(_DWORD *this)
{
  sub_401014(this);
  ++this[1];
  *this = &BBBBB::`vftable';
  return this;
}
// 401014: using guessed type int __thiscall sub_401014(_DWORD);
// 40374C: using guessed type void *BBBBB::`vftable';

//----- (00401090) --------------------------------------------------------
int __thiscall sub_401090(_DWORD *this)
{
  return this[1];
}

//----- (004010A0) --------------------------------------------------------
int __cdecl main_0(int argc, const char **argv, const char **envp)
{
  void *v3; // eax
  int (__thiscall ***v4)(_DWORD); // ebp
  void *v5; // eax
  int (__thiscall ***v6)(_DWORD); // ebx
  void *v7; // eax
  int (__thiscall ***v8)(_DWORD); // edi
  void *v9; // eax
  int (__thiscall ***v10)(_DWORD); // esi
  int v11; // ebx
  int v12; // esi
  int v13; // esi

  v3 = operator new(8u);
  if ( v3 )
    v4 = (int (__thiscall ***)(_DWORD))sub_401019(v3);
  else
    v4 = 0;
  v5 = operator new(8u);
  if ( v5 )
    v6 = (int (__thiscall ***)(_DWORD))sub_401014(v5);
  else
    v6 = 0;
  v7 = operator new(8u);
  if ( v7 )
    v8 = (int (__thiscall ***)(_DWORD))sub_401019(v7);
  else
    v8 = 0;
  v9 = operator new(8u);
  if ( v9 )
    v10 = (int (__thiscall ***)(_DWORD))sub_401014(v9);
  else
    v10 = 0;
  v11 = (**v6)(v6);
  v12 = v11 + (**v10)(v10);
  v13 = (**v8)(v8) + v12;
  return v13 + (**v4)(v4);
}
// 401014: using guessed type int __thiscall sub_401014(_DWORD);
// 401019: using guessed type int __thiscall sub_401019(_DWORD);

//----- (004015C9) --------------------------------------------------------
int sub_4015C9()
{
  SetUnhandledExceptionFilter(__CxxUnhandledExceptionFilter);
  return 0;
}

//----- (0040169C) --------------------------------------------------------
int (*sub_40169C())(void)
{
  int (*result)(void); // eax
  int (**v1)(void); // edi

  result = (int (*)(void))&unk_403D38;
  v1 = (int (**)(void))&unk_403D38;
  if ( &unk_403D38 < (_UNKNOWN *)dword_403E38 )
  {
    do
    {
      result = *v1;
      if ( *v1 )
        result = (int (*)(void))result();
      ++v1;
    }
    while ( v1 < dword_403E38 );
  }
  return result;
}

//----- (004016C2) --------------------------------------------------------
void __cdecl sub_4016C2()
{
  void (**v0)(void); // edi

  v0 = (void (**)(void))&unk_403F40;
  if ( &unk_403F40 < (_UNKNOWN *)dword_404040 )
  {
    do
    {
      if ( *v0 )
        (*v0)();
      ++v0;
    }
    while ( v0 < dword_404040 );
  }
}

//----- (00401934) --------------------------------------------------------
int __cdecl UserMathErrorFunction()
{
  return 0;
}

//----- (00401937) --------------------------------------------------------
int sub_401937()
{
  return 0;
}

// nfuncs=52 queued=10 decompiled=10 lumina nreq=0 worse=0 better=0
// ALL OK, 10 function(s) have been successfully decompiled
