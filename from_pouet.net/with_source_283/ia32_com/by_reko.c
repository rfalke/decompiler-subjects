// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_3) ds)
void fn0C00_0100(struct Eq_3 * ds)
{
	struct Eq_4 * ss;
	__fninit();
	__syscall<byte>(0x10);
	int16 Eq_3::* si_14 = &Eq_3::w0202;
	word16 cx_15 = 0x0140;
	real64 rLoc1_307 = (real64) ds->w01F8;
	do
	{
		ds->*si_14 = (int16) rLoc1_307;
		--cx_15;
		rLoc1_307 += (real64) ds->r01F4;
		++si_14;
		byte ch_274 = SLICE(cx_15, byte, 8);
	} while (cx_15 != 0x00);
	__out<byte>(0x03C8, 0x00);
	bcu8 ah_217 = 0x00;
	byte dl_234 = 0xC9;
	do
	{
		uint8 al_37 = ah_217 >> 0x02;
		__out<byte>(969, al_37);
		__out<byte>(969, al_37);
		uint8 al_39 = al_37 * 0x02;
		if (al_37 * 0x02 > 0x3F)
			al_39 = 0x3F;
		__out<byte>(969, al_39);
		++ah_217;
	} while (ah_217 != 0x00);
	do
	{
		struct Eq_74 Eq_3::* si_105 = Eq_3::a0201;
		real64 rLoc2_310 = 0.0;
		word16 dx_237 = SEQ(0x02, dl_234);
		do
		{
			real64 rLoc3_313 = cos(rLoc2_310);
			real64 rLoc4_314 = sin(rLoc2_310);
			real64 rLoc5_318 = rLoc2_310 + rLoc2_310 + rLoc1_307;
			real64 rLoc5_319 = cos(rLoc5_318);
			real64 rLoc4_321 = rLoc4_314 * sin(rLoc5_318);
			real64 rLoc5_323 = rLoc5_319 * rLoc5_319 * (real64) ds->w01FE;
			ds->t0200.u0 = (int16) (rLoc4_321 * rLoc5_323);
			Eq_113 bx_84 = ds->t0200;
			ds->t0200.u0 = (int16) (rLoc3_313 * rLoc5_323);
			Mem90[ds:bx_84 *s 0x0140 + Mem86[ds:0x0200:word16] + 0x8222:word16] = ~0x0505;
			--dx_237;
			rLoc2_310 += (real64) ds->r01FA;
			byte dh_272 = SLICE(dx_237, byte, 8);
		} while (dx_237 != 0x00);
		rLoc1_307 += (real64) ds->r01FA;
		struct Eq_153 Eq_3::* di_123 = &Eq_3::t0000;
		word16 cx_165 = SEQ(ch_274, 200);
		do
		{
			struct Eq_74 Eq_3::* si_108 = si_105 + 1;
			byte ah_129 = (ds->*si_105).b0000;
			ui16 si_113 = si_108[60];
			struct Eq_173 Eq_4::* bp_116 = Eq_4::a0202;
			do
			{
				<unknown> Eq_3::* bx_120 = (ss->*bp_116).w0000;
				struct Eq_166 Eq_4::* bp_121 = bp_116 + 1;
				Eq_180 ax_141 = (SEQ(ah_129, (0x8000->*di_123).bFFFFFFFF) + SEQ(dh_272, ((&(ds->*((char *) bx_120 + 47491))))[si_113].b0000) + SEQ(dh_272, (0x8000->*di_123).bFFFFFEC0) + SEQ(dh_272, ((&(ds->*((char *) bx_120 + 0x0000BAC2))))[si_113].b0000) >> 0x02) - 0x03;
				bp_116 = (struct Eq_173 Eq_4::*) (bp_121 + 1);
				byte al_148 = (byte) ax_141;
				ah_129 = SLICE(ax_141, byte, 8);
				if (ax_141 < 0x00)
				{
					al_148 = 0x00;
					ah_129 = 0x00;
				}
				(0x8000->*di_123).b0000 = al_148;
				++di_123;
			} while (bp_121 != &Eq_4::t0481);
			--cx_165;
			si_105 = si_108;
			byte ch_304 = SLICE(cx_165, byte, 8);
		} while (cx_165 != 0x00);
		do
			;
		while ((__in<byte>(0x03DA) & 0x08) == 0x00);
		struct Eq_245 Eq_3::* di_175 = &Eq_3::t0640;
		word16 cx_398 = SEQ(ch_304, ~0x41);
		do
		{
			byte cl_289 = (byte) cx_402;
			cui16 dx_395 = 0x0140;
			do
			{
				bcu8 al_181 = (0x8000->*di_175).b0000;
				di_175[1154] = (struct Eq_245) al_181;
				byte dl_187 = (byte) dx_401;
				cu8 al_192 = al_181 + ((al_181 >> 0x03) + dl_187 & (al_181 >> 0x03) + cl_289);
				if (al_192 < 0x00)
					al_192 = ~0x00;
				(0xA000->*di_175).b0000 = al_192;
				++di_175;
				dl_234 = dl_187 - 0x01;
				dx_395 = SEQ(SLICE(dx_401 - 0x01, byte, 8), dl_187 - 0x01);
				dx_401 = dx_395;
			} while (dx_401 != 0x01);
			ch_274 = SLICE(cx_402 - 0x01, byte, 8);
			cx_398 = SEQ(ch_274, cl_289 - 0x01);
			cx_402 = cx_398;
		} while (cx_402 != 0x01);
	} while (__in<byte>(0x60) != 0x01);
}

