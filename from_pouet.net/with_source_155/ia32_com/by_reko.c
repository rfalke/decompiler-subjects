// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte ah, Register byte dl, Register (memptr Eq_10 Eq_5) bx, Register Eq_6 si, Register (ptr16 Eq_7) ds, Stack Eq_8 wArg00)
void fn0C00_0100(byte ah, byte dl, struct Eq_5 Eq_10::* bx, Eq_6 si, struct Eq_7 * ds, Eq_8 wArg00)
{
	mp16 fp;
	Eq_10 ss;
	__syscall<byte>(0x10);
	Eq_10 dx_7 = SEQ(0x70, dl);
	Eq_10 dx_10 = SEQ(0x80, dl);
	real64 rLoc1_303 = 0.0;
	do
	{
		(dx_10->*bx).w0000 = (int16) (sin(rLoc1_303) * (real64) ds->w0143);
		rLoc1_303 += (real64) ds->r017C;
		(dx_7->*bx).w0000 = (int16) si;
		struct Eq_47 Eq_10::* bx_36 = bx + 1;
		bx = (struct Eq_5 Eq_10::*) (bx_36 + 1);
		byte bl_269 = (byte) bx_36 + 0x01;
		byte bh_275 = SLICE(bx_36 + 1, byte, 8);
	} while (bx_36 != ~0x00);
	word16 cx_316 = SEQ(ah, 0x13);
	union Eq_8 Eq_10::* bx_319 = SEQ(bh_275, bl_269);
	do
	{
		byte ch_277 = SLICE(cx_322, byte, 8);
		byte cl_83 = (byte) cx_322;
		int16 ax_51 = ds->*si;
		si = (word16) si + 2;
		union Eq_8 Eq_10::* bx_313 = bx_319;
		do
		{
			bi8 bl_57 = (byte) bx_324;
			Eq_69 ax_59 = bl_57 *s16 bl_57;
			bi8 bh_64 = SLICE(bx_324, byte, 8);
			Mem77[dx_7:bx_324 + ax_51:byte] = Mem73[dx_7:bx_324 + ax_51:byte] - ch_277 - CONVERT(bh_64 *s16 bh_64 + ax_59 <u 0x0383, bool, byte);
			byte bh_273 = SLICE((char *) bx_324 + 1, byte, 8);
			Eq_69 bp_112 = ax_59;
			Eq_10 bx_107 = (char *) bx_324 + 1;
			bx_313 = SEQ(bh_273, bl_57 + 0x01);
			bx_324 = bx_313;
		} while (bx_324 != ~0x00);
		word16 cx_101 = cx_322 - 0x01;
		cx_316 = SEQ(SLICE(cx_322 - 0x01, byte, 8), cl_83 - 0x01);
		bx_319 = SEQ(bh_273, bl_57 + 0x01);
		cx_322 = cx_316;
	} while (cx_322 != 0x01);
	Eq_8 di_118 = wArg00;
	Eq_10 sp_258 = fp + 2;
	dx_104 = dx_10;
	while (true)
	{
		Eq_10 dx_104;
		struct Eq_330 Eq_10::* sp_97 = sp_258 - 2;
		(ss->*sp_97).a0000[0].u0 = 0x0140;
		(ss->*sp_97).wFFFFFFFE = cx_101;
		(ss->*sp_97).tFFFFFFFC.u0 = (struct Eq_383 *) dx_104;
		(ss->*sp_97).tFFFFFFFA.u0 = (struct Eq_383 *) bx_107;
		(ss->*sp_97).tFFFFFFF8.u0 = (struct Eq_383 *) sp_258;
		(ss->*sp_97).tFFFFFFF6.u0 = (int16) bp_112;
		(ss->*sp_97).tFFFFFFF4.u0 = (int16) si;
		(ss->*sp_97).tFFFFFFF2.u0 = (int16) di_118;
		word16 ax_127 = 0x0140;
		Eq_8 si_121 = dx_10->*bx_107;
		Eq_6 bp_122 = dx_10->*((word16) bx_107 + 96);
		Eq_10 cx_131 = SEQ(SLICE(cx_101, byte, 8), 200);
		do
		{
			Eq_69 sp_124 = sp_258 - 16;
			ss->*((word16) sp_124 - 2) = ax_127;
			ss->*((word16) sp_124 - 4) = cx_131;
			ss->*((word16) sp_124 - 6) = dx_104;
			ss->*((word16) sp_124 - 8) = bx_107;
			ss->*((word16) sp_124 - 0x0A) = sp_124;
			ss->*((word16) sp_124 - 0x0C) = bp_122;
			ss->*((word16) sp_124 - 0x0E) = si_121;
			ss->*((word16) sp_124 - 16) = di_118;
			word16 cx_151 = ax_127;
			Eq_10 ax_152 = cx_131;
			do
			{
				ss->*((word16) sp_124 - 18) = ax_152;
				ss->*((word16) sp_124 - 20) = cx_151;
				word16 dx_158 = dx_104 + si_121;
				ss->*((word16) sp_124 - 22) = dx_158;
				word16 bx_155 = bx_107 + bp_122;
				ss->*((word16) sp_124 - 24) = bx_155;
				ss->*((word16) sp_124 - 26) = sp_124 - 16;
				ss->*((word16) sp_124 - 28) = bp_122;
				ss->*((word16) sp_124 - 30) = si_121;
				ss->*((word16) sp_124 - 32) = di_118;
				cu8 al_185 = 0x12;
				ui16 bx_186 = SEQ(SLICE(bx_155, byte, 8), SLICE(dx_158, byte, 8));
				do
				{
					bx_186 = bx_323 * 0x02;
					al_185 -= 0x03;
					bx_323 = bx_186;
				} while ((&&(dx_7->*(dx_7->*(sp_124 - 32)).u0))[bx_323].u1 < al_185);
				0xA000->*di_118 = al_185 + 0x10;
				word16 cx_214 = ss->*((word16) sp_124 - 20);
				si_121 = ss->*((word16) sp_124 - 30);
				bp_122 = ss->*((word16) sp_124 - 28);
				bx_107 = ss->*((word16) sp_124 - 24);
				dx_104 = ss->*((word16) sp_124 - 22);
				ax_152 = ss->*((word16) sp_124 - 18);
				di_118 = (word16) (ss->*((word16) sp_124 - 32)) + 1;
				cx_151 = cx_214 - 0x01;
			} while (cx_214 != 0x01);
			ax_127 = (word16) (ss->*((word16) sp_124 - 2));
			si_121 = ss->*((word16) sp_124 - 0x0E);
			bp_122 = ss->*((word16) sp_124 - 0x0C);
			Eq_10 cx_232 = ss->*((word16) sp_124 - 4);
			di_118 = (word16) (ss->*((word16) sp_124 - 16)) + ax_127;
			bx_107 = ss->*((word16) sp_124 - 8) - si_121;
			dx_104 = Mem200[ss:sp_124 + -6:word16] + bp_122;
			cx_131 = cx_232 - 0x01;
		} while (cx_232 != 0x01);
		di_118 = ss->*sp_124;
		si = ss->*((word16) sp_124 + 2);
		bp_112 = ss->*((word16) sp_124 + 4);
		dx_104 = ss->*((word16) sp_124 + 0x0A);
		cx_101 = (word16) (ss->*((word16) sp_124 + 0x0C));
		bx_107 = (word16) (ss->*((word16) sp_124 + 8)) + 2;
		sp_258 = (word16) sp_124 + 1040;
	}
}

