// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register word16 cx, Register Eq_4 dx, Register word16 si, Register (memptr (ptr16 Eq_18) byte) di)
void fn0C00_0100(word16 cx, Eq_4 dx, word16 si, byte Eq_18::* di)
{
	byte ah;
	__syscall<byte>(0x10);
	uint16 ax_10 = SEQ(ah, 0x13);
	while (true)
	{
		bi8 al_12 = (byte) ax_10;
		Eq_51 ax_14 = (al_12 + 0x9C) *s16 (al_12 + 0x9C);
		byte al_17 = ~(byte) (ax_14 >> 0x07);
		Eq_60 ax_27 = (dx - 0xA0) *s SEQ(SLICE(ax_14 >> 0x07, byte, 8), al_17 & 0x7F) + si;
		byte bl_30 = (byte) ax_10;
		byte ah_40 = SLICE(ax_27 >> 0x07, byte, 8);
		ui8 al_31 = (byte) (ax_27 >> 0x07) ^ bl_30;
		word16 ax_41 = SEQ(ah_40, al_31 & 0x20);
		word16 ax_42 = SEQ(ah_40, al_31 & 0x20);
		if ((al_31 & 0x20) != 0x00)
			ax_42 = ax_41 - (SEQ(~(al_17 & 0x7F), bl_30) >> 0x0C);
		0xA000->*di = (byte) ax_42;
		++di;
		uint32 dx_ax_59 = SEQ(SLICE((word32) ax_42, word16, 16), di);
		dx.u1 = (uint16) (dx_ax_59 % 0x0140);
		ax_10 = (uint16) (dx_ax_59 /u 0x0140);
		--cx;
		if (cx == 0x00)
			si += 0x40;
	}
}

