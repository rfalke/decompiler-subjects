// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_3) ds)
void fn0C00_0100(struct Eq_3 * ds)
{
	bios_video_set_mode(0x13);
	__out<byte>(0x03C8, 0x00);
	byte al_14 = 0x00;
	do
	{
		__out<byte>(969, al_14);
		__out<byte>(969, al_14);
		__out<byte>(969, al_14);
		++al_14;
	} while (al_14 != 0x00);
	do
	{
		ds->r01ED = (real32) ((real64) ds->r01ED + 1.0);
		ds->t01DF.u0 = 0x00;
		byte Eq_161::* di_120 = &Eq_161::b0000;
		do
			;
		while ((__in<byte>(0x03DA) & 0x08) == 0x00);
		do
		{
			ds->r01F9 = (real32) ((real64) ds->r01D5 / (real64) ds->t01DF);
			ds->r01F5 = (real32) ((real64) ds->r01F9 * (real64) ds->r01CD - (real64) ds->r01ED);
			ds->r01F1 = (real32) ((real64) ds->r01F9 * (real64) ds->r01D1 + (real64) ds->r01ED);
			ds->w01DD = 0x00;
			do
			{
				ds->dw01E1 = (int32) (real64) ds->r01F1;
				ds->dw01E5 = (int32) (real64) ds->r01F5;
				ds->t01E9 = (ds->dw01E1 ^ ds->dw01E5) & 0xFF;
				ds->t01E9.u0 = (int32) ((real64) ds->t01E9 * (real64) ds->t01DF / (real64) ds->r01D9);
				0xA000->*di_120 = (byte) (ds->t01E9 >> 0x02);
				ds->r01F1 = (real32) ((real64) ds->r01F1 + (real64) ds->r01F9);
				++ds->w01DD;
				++di_120;
			} while (ds->w01DD < 0x0140);
			ds->t01DF = (word16) ds->t01DF + 1;
		} while (ds->t01DF < 200);
	} while (__in<byte>(0x60) != 0x01);
}

