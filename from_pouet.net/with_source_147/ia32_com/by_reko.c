// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte ah, Register byte ch, Register (ptr16 Eq_5) ds)
void fn0C00_0100(byte ah, byte ch, struct Eq_5 * ds)
{
	real64 rLoc1_154 = (real64) ds->w0108;
	__syscall<byte>(0x10);
	cu16 ax_181 = SEQ(ah, ~0x00);
	do
	{
		byte al_15 = (byte) ax_184;
		__out<byte>(0x03C8, al_15);
		__out<byte>(969, al_15);
		byte al_25 = (byte) (ax_184 >> 0x02);
		__out<byte>(969, al_25);
		__out<byte>(969, al_25);
		ax_181 = SEQ(SLICE(ax_184 - 0x01, byte, 8), al_15 - 0x01);
		ax_184 = ax_181;
	} while (ax_184 != 0x01);
	do
	{
		struct Eq_48 Eq_5::* si_31 = Eq_5::a0100;
		word16 cx_131 = SEQ(ch, 0x03);
		do
		{
			real64 rLoc2_158 = sqrt((real64) (ds->*si_31).w0000);
			real64 rLoc2_159 = cos(rLoc2_158);
			(ds->*si_31).w0004 = (int16) (sin(rLoc2_158) * rLoc1_154 + rLoc1_154);
			(ds->*si_31).w0002 = (int16) (rLoc2_159 * rLoc1_154 + rLoc1_154);
			(ds->*si_31).w0000 += cx_131;
			++si_31;
			--cx_131;
		} while (cx_131 != 0x00);
		byte Eq_135::* di_101 = &Eq_135::b0000;
		word16 bp_107;
		for (bp_107 = 200; bp_107 != 0x00; --bp_107)
		{
			word16 bx_104;
			for (bx_104 = 0x0140; bx_104 != 0x00; --bx_104)
			{
				ui8 ch_147 = 0x00;
				byte cl_148;
				struct Eq_106 Eq_5::* si_65 = &Eq_5::t0102;
				for (cl_148 = 0x03; cl_148 != 0x00; --cl_148)
				{
					struct Eq_105 Eq_5::* si_67 = &si_65->w0000;
					uint16 ax_73 = (ds->*si_67).w0000 - bx_104;
					uint16 ax_83 = (ds->*si_67).w0002 - bp_107;
					si_65 = (struct Eq_106 Eq_5::*) (&si_67->w0002 + 1);
					ch_147 = ch_147 ^ SLICE(ax_83 * ax_83 + ax_73 * ax_73, byte, 8);
				}
				0xA000->*di_101 = ch_147;
				++di_101;
			}
		}
		ch = 0x00;
	} while (__in<byte>(0x60) != 0x01);
}

