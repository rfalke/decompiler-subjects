// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register (memptr (ptr16 Eq_19) Eq_3) bx, Register cu16 si)
void fn0C00_0100(struct Eq_3 Eq_19::* bx, cu16 si)
{
	__syscall<byte>(0x10);
	__out<word16>(0x03D4, 8211);
	struct Eq_3 Eq_19::* bx_75 = bx;
	while (true)
	{
		bi8 al_16 = (byte) (si >> 0x01);
		int16 ax_18 = ~(al_16 *s16 al_16);
		uint16 cx_28 = (uint16) SLICE(bx_80, byte, 8);
		Eq_46 ax_33 = (uint16) ((int32) SEQ(SLICE(ax_18, byte, 8) - 0x8C, (byte) ax_18) /u (cx_28 + 0x01));
		int8 bl_37 = (byte) bx_80;
		ci8 al_53 = (((byte) ((word16) ax_33 + si) ^ SLICE(ax_33 *s32 SEQ(bl_37, (byte) cx_28 + 0x01), byte, 16)) & 0x20) - 0x01 - SLICE(ax_33, byte, 8);
		if (al_53 < 0x10)
			al_53 = 0x10;
		(0xA000->*bx_80).bFFFFFFA0 = al_53;
		byte bh_71 = SLICE(&bx_80->bFFFFFFA0 + 97, byte, 8);
		bx_75 = SEQ(bh_71, bl_37 + 0x01);
		bx_80 = bx_75;
		if (bx_80 == &Eq_19::tFFFF)
		{
			++si;
			bx_75 = SEQ(bh_71, bl_37 + 0x01);
		}
	}
}

