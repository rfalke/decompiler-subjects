// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte bl, Register (ptr16 Eq_4) ds)
void fn0C00_0100(byte bl, struct Eq_4 * ds)
{
	struct Eq_5 * ss;
	__syscall<byte>(0x10);
	struct Eq_11 Eq_4::* bx_9 = SEQ(0xF0, bl);
	Eq_14 cx_12 = 0x0100;
	bx_35 = bx_9;
	do
	{
		struct Eq_11 Eq_4::* bx_35;
		ss->t0200 = cx_12;
		real64 rLoc1_241 = (real64) ss->t0200 * (real64) ss->t01F8;
		(ds->*bx_35).a0000[0] = (int16) (sin(rLoc1_241) * (real64) ss->w01FC + sin(rLoc1_241 + rLoc1_241) * (real64) ss->w01FE);
		struct Eq_55 Eq_4::* bx_38 = bx_35 + 1;
		--cx_12;
		bx_35 = (struct Eq_11 Eq_4::*) (bx_38 + 1);
		bcu8 bl_197 = (byte) bx_38 + 0x01;
		bcu8 ch_201 = SLICE(cx_12, byte, 8);
	} while (cx_12 != 0x00);
	__out<byte>(0x03C8, 0x13);
	bcu8 ah_200 = 0x00;
	struct Eq_79 Eq_4::* si_204 = Eq_4::a01E9;
	byte bh_49 = 0x04;
	do
	{
		byte cl_50;
		for (cl_50 = 0x40; cl_50 != 0x00; --cl_50)
		{
			__out<byte>(969, bl_197 >> 0x01);
			__out<byte>(969, ah_200 >> 0x01);
			__out<byte>(969, ch_201 >> 0x01);
			bl_197 += (ds->*si_204).b0000;
			ah_200 += (ds->*si_204).b0001;
			ch_201 += (ds->*si_204).b0002;
		}
		bl_197 -= (ds->*si_204).b0000;
		--bh_49;
		ch_201 -= (ds->*si_204).b0002;
		ah_200 -= (ds->*si_204).b0001;
		++si_204;
		ui16 bx_123 = SEQ(bh_49, bl_197);
	} while (bh_49 != 0x00);
	do
	{
		do
			;
		while (((byte) __in<word16>(0x03DA) & 0x08) != 0x00);
		do
			;
		while (((byte) __in<word16>(0x03DA) & 0x08) == 0x00);
		byte Eq_244::* di_112 = &Eq_244::b0000;
		word16 dx_116;
		for (dx_116 = 200; dx_116 != 0x00; --dx_116)
		{
			word16 cx_117;
			for (cx_117 = 0x0140; cx_117 != 0x00; --cx_117)
			{
				word16 ax_144 = cx_117 + (word16) ss->t01F8;
				Eq_171 v29_138 = (&(ds->*(ds->*bx_9).a0000))[(uint16) ((byte) dx_116 - (ss->t01F8 *8 0x02 - (byte) bx_123) + (byte) cx_117 - ss->t0200)].u0;
				word16 ax_148 = __rcl<word16,byte>(ax_144, 0x01, SLICE(cond(ax_144), bool, 1));
				uint16 bx_164 = (uint16) (byte) cx_117;
				uint16 bx_172 = (uint16) ((word32) ss->t0204 + ((((byte) bx_164 * 0x02 + ((&(ds->*(ds->*bx_9).a0000)))[bx_164].u1) + (byte) dx_116) - (byte) cx_117));
				0xA000->*di_112 = (byte) ((word16) v29_138.u0 + ((&(ds->*(ds->*bx_9).a0000)))[(uint16) (((word16) ss->t0200 + (byte) dx_116) - (byte) ax_148)].u0 + ((&(ds->*(ds->*bx_9).a0000)))[bx_172].u0 >> 0x03);
				bx_123 = bx_172 * 0x02;
				++di_112;
			}
		}
		--ss->t0204;
		ss->t0200 = (word16) ss->t0200 + 1;
		--ss->t01F8;
	} while (__in<byte>(0x60) != 0x01);
}

