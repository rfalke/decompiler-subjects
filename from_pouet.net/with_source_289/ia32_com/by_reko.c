// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte cl, Register (ptr16 Eq_4) ds)
void fn0C00_0100(byte cl, struct Eq_4 * ds)
{
	__syscall<byte>(0x10);
	__out<byte>(0x03C8, 0x00);
	bcu8 ah_16 = 0x00;
	do
	{
		uint8 al_18 = ah_16 >> 0x02;
		__out<byte>(969, al_18);
		__out<byte>(969, al_18);
		__out<byte>(969, al_18 >> 0x01);
		++ah_16;
	} while (ah_16 != 0x00);
	real64 rLoc2_220 = 1.0 + 1.0;
	real64 rLoc1_218 = 0.0;
	real64 rLoc3_222 = rLoc2_220 / (real64) ds->w01FE;
	real64 rLoc3_225 = rLoc2_220 / (real64) ds->w01FC;
	ci16 si_175 = 0x00;
	do
	{
		struct Eq_145 Eq_4::* di_130 = &Eq_4::t0000;
		word16 bp_152;
		real64 rLoc4_226 = 1.0;
		for (bp_152 = 200; bp_152 != 0x00; --bp_152)
		{
			real64 rLoc5_227 = 1.0;
			word16 dx_144;
			for (dx_144 = 0x0140; dx_144 != 0x00; --dx_144)
			{
				real64 rLoc7_234 = rLoc5_227 * rLoc4_226 + rLoc1_218;
				real64 rLoc6_228 = (real64) ds->w01FC;
				ds->t0204.u0 = (int16) ((rLoc7_234 + rLoc1_218 - rLoc4_226) * rLoc6_228);
				ds->t0206.u0 = (int16) (sin(rLoc7_234) * rLoc6_228 + rLoc5_227 * rLoc6_228);
				real64 rLoc7_246 = rLoc5_227 - rLoc4_226 + rLoc1_218;
				Eq_70 bx_86 = ds->t0204;
				Eq_81 ax_87 = ds->t0206;
				ds->t0204.u0 = (int16) ((rLoc7_246 + rLoc1_218 - rLoc4_226) * rLoc6_228);
				ds->t0206.u0 = (int16) (cos(rLoc7_246) * rLoc6_228 + rLoc4_226 * rLoc6_228);
				Eq_114 bx_121 = (uint16) ((byte) bx_86 & ds->t0204);
				ds->t0204 = (uint16) ((byte) ax_87 ^ ds->t0206) - bx_121;
				ds->t0206.u0 = (int16) ((real64) ds->t0204 * (real64) ds->r0200);
				Eq_144 ax_131 = (word16) di_130[752];
				Mem138[ds:di_130 + 0x02F0:byte] = SLICE((bx_121 + Mem127[ds:0x0206:word16] - ax_131 >> cl) + ax_131, byte, 0);
				(0xA000->*di_130).b0000 = (byte) ax_131;
				rLoc5_227 -= rLoc3_225;
				byte ah_193 = SLICE(ax_131, byte, 8);
				++di_130;
			}
			rLoc4_226 -= rLoc3_222;
		}
		real64 rLoc3_268 = rLoc1_218 + (real64) ds->r01F8;
		ds->r0200 = (real32) fabs(cos(rLoc3_268 + rLoc3_268));
		ci8 cl_177 = (byte) si_175;
		byte ch_180 = SLICE(si_175, byte, 8);
		ci16 cx_181 = SEQ(ch_180, cl_177 + 0x01);
		rLoc1_218 = rLoc3_268;
		si_175 = cx_181;
		if (cl_177 < ~0x00)
			cx_181 = SEQ(ch_180, -(cl_177 + 0x01));
		cl = (byte) (cx_181 >> 0x05);
	} while (SEQ(ah_193, __in<byte>(0x60)) != 0x01);
}

