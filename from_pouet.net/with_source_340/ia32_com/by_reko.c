// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register word16 ax, Register byte cl, Register word16 ebx_16_16, Register word16 ebp_16_16, Register (ptr16 Eq_7) es, Register (ptr16 Eq_7) ds)
void fn0C00_0100(word16 ax, byte cl, word16 ebx_16_16, word16 ebp_16_16, struct Eq_7 * es, struct Eq_7 * ds)
{
	struct Eq_7 * cs;
	struct Eq_7 * ss;
	Eq_11 Top_3 = 0;
	struct Eq_13 * bx_13 = SEQ(SLICE(cs, byte, 8) + 0x10, (byte) cs);
	word16 Eq_13::* di_16 = Eq_13::a0000;
	word16 cx_21 = SEQ(0x7D, cl);
	while (true)
	{
		byte ah_808 = SLICE(ax, byte, 8);
		byte al_1054 = (byte) ax;
		byte ch_803 = SLICE(cx_21, byte, 8);
		if (cx_21 == 0x00)
			break;
		bx_13->*di_16 = ax;
		++di_16;
		--cx_21;
	}
	struct Eq_7 * es_25 = es;
	byte Eq_7::* di_27 = Eq_7::a04E5;
	word16 cx_29;
	for (cx_29 = SEQ(ch_803, 0x0C); cx_29 != 0x00; --cx_29)
	{
		es->*di_27 = al_1054;
		++di_27;
	}
	__syscall<byte>(0x10);
	word16 ax_34 = SEQ(ah_808, 0x13);
	bx_54 = bx_13;
	do
	{
		struct Eq_13 * bx_54;
		word16 Eq_7::* di_31 = Eq_7::a04F1;
		byte cl_32 = 0x04;
		do
		{
			byte ch_33 = 0x08;
			do
			{
				es_25->*di_31 = ax_34;
				word16 Eq_7::* di_38 = di_31 + 1;
				es_25->*di_38 = bx_54;
				--ch_33;
				di_31 = di_38 + 1;
				ax_34 += 0x2D;
				word16 cx_58 = SEQ(ch_33, cl_32);
			} while (ch_33 != 0x00);
			bx_54 = (struct Eq_13 *) ((char *) (bx_54->a0000 + 22) + 1);
			--cl_32;
			byte ch_830 = SLICE(cx_58 - 0x01, byte, 8);
		} while (cx_58 != 0x01);
		word16 cx_1119 = SEQ(ch_830, ~0x00);
		do
		{
			ui8 cl_62 = (byte) cx_1122;
			__out<byte>(0x03C8, cl_62);
			__out<byte>(969, 0x00);
			__out<byte>(969, cl_62);
			ui8 al_67 = cl_62 << 0x01;
			if (cl_62 << 0x01 >= 0x3F)
				al_67 = 0x3F;
			__out<byte>(969, al_67);
			cx_1119 = SEQ(SLICE(cx_1122 - 0x01, byte, 8), cl_62 - 0x01);
			cx_1122 = cx_1119;
		} while (cx_1122 != 0x01);
		real32 Eq_7::* di_102 = &Eq_7::r059F;
		word16 Eq_7::* si_115 = Eq_7::a04C4;
		byte cl_117 = 0x04;
		do
		{
			ds->t057D.u1 = (uint32) (ds->*si_115);
			--Top_3;
			Top_3.u2->r0000 = (real64) ss->t057D;
			word16 Eq_7::* si_89 = si_115 + 1;
			byte ch_109 = 0x06;
			do
			{
				ds->*di_102 = (real32) Top_3.u2->r0000;
				Top_3.u2->r0000 *= (real64) ss->t057D;
				--ch_109;
				++di_102;
				word16 cx_118 = SEQ(ch_109, cl_117);
			} while (ch_109 != 0x00);
			si_115 = si_89 + 1;
			byte ch_121 = SLICE(cx_118 - 0x01, byte, 8);
			--cl_117;
		} while (cx_118 != 0x01);
		ss->t057D = SEQ(ch_121, 0x04);
		Top_3.u2->rFFFFFFFF = (real64) ss->t057D;
		ds->a05FF = (real32) Top_3.u2->rFFFFFFFF;
		struct Eq_221 Eq_7::* si_124 = &Eq_7::r059F;
		real32 Eq_7::* di_130 = Eq_7::a0603;
		byte cl_132 = 0x06;
		do
		{
			Top_3.u2->rFFFFFFFF = 0.0;
			byte ch_141 = 0x04;
			si_145 = si_124;
			do
			{
				struct Eq_221 Eq_7::* si_145;
				Top_3.u2->rFFFFFFFF += (real64) (ds->*si_145).r0000;
				--ch_141;
				++si_145;
				word16 cx_168 = SEQ(ch_141, cl_132);
			} while (ch_141 != 0x00);
			ds->*di_130 = (real32) Top_3.u2->rFFFFFFFF;
			++di_130;
			si_124 = &si_124->r0000 + 1;
			--cl_132;
			byte ch_179 = SLICE(cx_168 - 0x01, byte, 8);
		} while (cx_168 != 0x01);
		word32 Eq_7::* di_170 = &Eq_7::dw061B;
		word32 Eq_7::* si_171 = Eq_7::a05FF;
		byte dl_172;
		for (dl_172 = 0x04; dl_172 != 0x00; --dl_172)
		{
			uint16 cx_180 = SEQ(ch_179, 0x04);
			memcpy(&(es_25->*di_170), &(ds->*si_171), cx_180 *32 0x04);
			word32 Eq_7::* di_186 = di_170 + cx_180 * 0x04;
			es_25->*di_186 = ds->*si_171;
			ch_179 = 0x00;
			++si_171;
			di_170 = di_186 + 1;
		}
		Top_3.u2->rFFFFFFFF = 0.0;
		struct Eq_317 Eq_7::* si_197 = Eq_7::a04C6;
		cui16 cx_221 = 0x04;
		do
		{
			ss->t057D.u1 = (uint32) (ds->*si_197).w0000;
			Top_3.u2->rFFFFFFFF += (real64) ss->t057D;
			--cx_221;
			++si_197;
			byte ch_897 = SLICE(cx_221, byte, 8);
		} while (cx_221 != 0x00);
		ds->r062B = (real32) Top_3.u2->rFFFFFFFF;
		cui16 cx_238 = SEQ(ch_897, 0x00);
		do
		{
			Top_3.u2->rFFFFFFFF = 0.0;
			ds->t0581.u2 = (real32) Top_3.u2->rFFFFFFFF;
			byte cl_267 = (byte) cx_238;
			struct Eq_358 Eq_7::* si_236 = Eq_7::a04C6;
			Eq_370 bp_241 = (cx_238 << 0x02) + 0x059F;
			byte ch_243 = 0x04;
			do
			{
				Top_3.u2->rFFFFFFFF = (real64) (ds->*si_236).w0000;
				Top_3.u2->rFFFFFFFF *= (real64) (ss->*bp_241);
				Top_3.u2->rFFFFFFFF += (real64) ds->t0581;
				ds->t0581.u2 = (real32) Top_3.u2->rFFFFFFFF;
				--ch_243;
				++si_236;
				bp_241 = (word16) bp_241 + 24;
				word16 cx_268 = SEQ(ch_243, cl_267);
			} while (ch_243 != 0x00);
			struct Eq_410 Eq_7::* di_265 = Eq_7::a063F;
			word16 ax_269;
			for (ax_269 = cx_268; ax_269 != 0x00; --ax_269)
				++di_265;
			(es_25->*di_265).dw0000 = (word32) ds->t0581;
			cx_238 = SEQ(ch_243, cl_267 + 0x01);
		} while (cl_267 != 0x02);
		uint8 cl_288;
		for (cl_288 = 0x00; cl_288 != 0x03; ++cl_288)
		{
			uint16 ax_296 = cl_288 *16 0x05;
			Eq_477 si_305 = (ax_296 << 0x02) + 0x061B + (SEQ(SLICE(ax_296 << 0x02, byte, 8), cl_288) << 0x02);
			byte ch_308;
			for (ch_308 = 0x04; ch_308 != 0x00; --ch_308)
			{
				uint16 ax_312 = cl_288 *16 0x05;
				Eq_454 si_322 = (ax_312 << 0x02) + 0x061B + (SEQ(SLICE(ax_312 << 0x02, byte, 8), ch_308) << 0x02);
				Top_3.u2->rFFFFFFFF = (real64) (ds->*si_322);
				Top_3.u2->rFFFFFFFF /= (real64) (ds->*si_305);
				ds->*si_322 = (real32) Top_3.u2->rFFFFFFFF;
			}
			bu8 ch_337 = cl_288 + 0x01;
			do
			{
				uint16 ax_342 = ch_337 *16 0x05;
				Eq_539 si_346[] = (ax_342 << 0x02) + 0x061B;
				ds->t0571.u0 = si_346[SEQ(SLICE(ax_342 << 0x02, byte, 8), cl_288)].u0;
				uint8 dh_358;
				for (dh_358 = 0x00; dh_358 != 0x05; ++dh_358)
				{
					union Eq_385 Eq_7::* si_367 = (word16) si_346 + ((word16) dh_358 << 0x02);
					ds->t0581.u0 = (ds->*si_367).u0;
					uint16 ax_376 = cl_288 *16 0x05;
					Top_3.u2->rFFFFFFFF = (real64) ((word16) (ax_376 << 0x02) + 0x061B)[SEQ(SLICE(ax_376 << 0x02, byte, 8), dh_358)];
					Top_3.u2->rFFFFFFFF *= (real64) ds->t0571;
					Top_3.u2->rFFFFFFFF = (real64) ds->t0581 - (Top_3.u2)->rFFFFFFFF;
					(ss->*si_367).u2 = (real32) Top_3.u2->rFFFFFFFF;
				}
				++ch_337;
			} while (ch_337 != 0x04);
		}
		es_25->t057D = ds->t0667;
		Top_3.u2->rFFFFFFFF = (real64) ds->t057D;
		Top_3.u2->rFFFFFFFF /= (real64) ds->r0663;
		ds->r0677 = (real32) Top_3.u2->rFFFFFFFF;
		Eq_639 cl_422;
		for (cl_422 = 0x02; cl_422 >= 0x00; --cl_422)
		{
			uint16 ax_426 = cl_422 *16 0x05;
			es_25->t057D = ds->*((word16) SEQ(SLICE(ax_426 << 0x02, byte, 8), 0x10) + ((word16) (ax_426 << 0x02) + 0x061B));
			Eq_639 ch_444 = 0x03;
			do
			{
				uint16 ax_448 = cl_422 *16 0x05;
				ui16 ax_456 = SEQ(SLICE(ax_448 << 0x02, byte, 8), ch_444);
				es_25->t0581.u0 = ((word16) (ax_448 << 0x02) + 0x061B)[ax_456].u0;
				ui16 ax_467 = SEQ(SLICE(ax_456 << 0x02, byte, 8), ch_444);
				es_25->t0571.u0 = ds->a066B[0][ax_467].u0;
				Top_3.u2->rFFFFFFFF = (real64) ds->t0581;
				Top_3.u2->rFFFFFFFF *= (real64) ds->t0571;
				Top_3.u2->rFFFFFFFF = (real64) ds->t057D - (Top_3.u2)->rFFFFFFFF;
				ds->t057D.u2 = (real32) Top_3.u2->rFFFFFFFF;
				ui8 ah_487 = SLICE(ax_467 << 0x02, byte, 8);
				--ch_444;
			} while (ch_444 != cl_422);
			ds->a066B[0][SEQ(ah_487, cl_422)].u0 = (int32) ds->t057D;
		}
		Eq_156 ebp_501 = SEQ(ebp_16_16, 100);
		do
		{
			ds->t057D = ebp_501;
			Eq_758 Top_505 = Top_3 - 1;
			Top_505.u1->r0000 = 0.0;
			word32 Eq_7::* si_500 = &Eq_7::r0677;
			word16 cx_518 = SEQ(ch_444, 0x03);
			do
			{
				ds->t0581 = ds->*si_500;
				Top_505.u1->r0000 += (real64) ds->t0581;
				Top_505.u1->r0000 *= (real64) ds->t057D;
				--cx_518;
				si_500 -= 4;
				byte ch_1032 = SLICE(cx_518, byte, 8);
			} while (cx_518 != 0x00);
			ds->t0581 = ds->*si_500;
			Top_505.u1->r0000 += (real64) ds->t0581;
			ds->t0571.u0 = (int32) Top_505.u1->r0000;
			&Top_3.u2->r0000 = Top_505.u1 + 1;
			struct Eq_817 Eq_7::* si_535 = Eq_7::a04F1;
			word16 cx_1033 = SEQ(ch_1032, 0x20);
			do
			{
				word16 bx_540 = (ds->*si_535).w0000;
				ds->t0579 = ebp_501;
				ds->dw0575 = SEQ(ebx_16_16, bx_540 + ds->w04ED);
				Eq_871 Top_548 = Top_3 - 1;
				Top_548.u1->r0000 = (real64) ds->r04D4;
				Top_548.u1->r0000 *= (real64) ds->dw0575;
				real64 v42_551 = Top_548.u1->r0000;
				Top_548.u1->r0000 = cos(v42_551);
				Top_548.u1->rFFFFFFFF = sin(v42_551);
				Top_548.u1[1] = (struct Eq_1356) Top_548.u1->rFFFFFFFF;
				Top_548.u1->rFFFFFFFF *= (real64) ds->t0579;
				ds->t057D.u2 = (real32) Top_548.u1->rFFFFFFFF;
				Top_548.u1[2] = (struct Eq_1356) Top_548.u1->r0000;
				Top_548.u1->rFFFFFFFF = (real64) ds->t0571;
				Top_548.u1->rFFFFFFFF -= (real64) ds->w04D2;
				Top_548.u1->r0000 *= Top_548.u1->rFFFFFFFF;
				Top_548.u1->r0000 = (real64) ds->t057D - (Top_548.u1)->r0000;
				ds->t057D.u2 = (real32) Top_548.u1->r0000;
				Top_548.u1->r0000 = (real64) ds->t0571;
				Top_548.u1->r0000 -= (real64) ds->w04D2;
				Top_548.u1[1] = (struct Eq_1356) (Top_548.u1[1] *64 (Top_548.u1)->r0000);
				ds->t0581.u2 = (real32) Top_548.u1[1];
				Top_548.u1[2] = (struct Eq_1356) (Top_548.u1[2] *64 (real64) ds->t0579);
				Top_548.u1[2] = (struct Eq_1356) (Top_548.u1[2] + (real64) ds->t0581);
				ds->t0581.u0 = (int32) Top_548.u1[2];
				ds->dw0575 = SEQ(ebx_16_16, (ds->*si_535).w0002 + ds->w04EF);
				Top_548.u1[2] = (struct Eq_1356) (real64) ds->r04D4;
				Top_548.u1[2] = (struct Eq_1356) (Top_548.u1[2] *64 (real64) ds->dw0575);
				Top_548.u1[2] = (struct Eq_1356) cos(Top_548.u1[2]);
				Top_548.u1[2] = (struct Eq_1356) (Top_548.u1[2] *64 (real64) ds->t057D);
				ds->t057D.u0 = (int32) Top_548.u1[2];
				word16 bp_618 = (word16) ebp_501;
				ebp_16_16 = SLICE(ebp_501, word16, 16);
				&Top_3.u2->r0000 = (word32) Top_548 + 3;
				Eq_156 di_590 = ds->t057D;
				Eq_385 ax_591 = ds->t0581;
				if (ax_591 < 99)
				{
					struct Eq_831 Eq_13::* di_600 = (word16) di_590.u3 + 0x00A0 + (((word16) ax_591.u1 + 99) + ((word16) ax_591.u1 + 99) * 0x04 << 0x06);
					(bx_13->*di_600).w0000 = 16191;
					(bx_13->*di_600).w0140 = 16191;
				}
				--cx_1033;
				++si_535;
				uint8 cl_689 = (byte) cx_1033;
				ch_444 = SLICE(cx_1033, byte, 8);
			} while (cx_1033 != 0x00);
			ebp_501 = SEQ(ebp_16_16, bp_618 - 0x01);
		} while (bp_618 != 0x01);
		ds->w04EF += 0x02;
		++ds->w04ED;
		Eq_1140 di_630 = 0xFA00;
		do
		{
			bx_54 = (struct Eq_13 *) (bx_13->*di_630);
			word16 ax_636 = Mem633[bx_13:di_630 + -0x0141:word16] + bx_54;
			bcu8 ah_638 = SLICE(ax_636, byte, 8);
			uint8 al_641 = ((byte) ax_636 + ah_638 >> 0x02) - 0x04;
			if (al_641 < 0x00)
				al_641 = 0x00;
			bx_13->*di_630 = al_641;
			di_630 = (word16) di_630 + 1;
		} while (di_630 >= 0x0144);
		do
		{
			bx_13->*di_630 = ah_638;
			--di_630;
		} while (di_630 >= 0x00);
		memcpy((word16) di_630 + 1, bx_13->a0000[0], SEQ(0x7D, cl_689) *32 0x02);
		ds = cs;
		es_25 = cs;
		do
			;
		while ((__in<byte>(0x03DA) & 0x08) == 0x00);
		word16 si_721 = cs->w04E6;
		++cs->b04E8;
		byte v49_724 = cs->b04E8 + 0x01;
		cs->b04E8 = v49_724;
		if (v49_724 == 0x00)
			++si_721;
		cs->w04E6 = si_721;
		struct Eq_1229 Eq_7::* si_733 = si_721 + 0x04D8;
		byte al_734 = (cs->*si_733).b0000;
		if (al_734 == 0x00)
			goto l0C00_04A9;
		Eq_1252 ax_741 = (int16) al_734;
		byte ah_757 = SLICE(ax_741, byte, 8);
		if (cs->t04CA != ax_741)
		{
			if (cs->t04CA < ax_741)
				cs->t04CA = (word16) cs->t04CA + 1;
			else
				--cs->t04CA;
		}
		cup16 ax_758 = SEQ(ah_757, (cs->*si_733).b0001);
		if (cs->w04CE != ax_758)
		{
			if (cs->w04CE < ax_758)
				++cs->w04CE;
			else
				--cs->w04CE;
		}
		ax_34 = SEQ(ah_770, al_769);
		byte al_769;
		byte ah_770;
	} while (bios_kbd_check_keystroke(out al_769, out ah_770));
	byte al_776;
	bios_kbd_get_keystroke(out al_776);
l0C00_04A9:
	bios_video_set_mode(0x03);
	msdos_display_string((char *) cs + 0x04B6);
}

