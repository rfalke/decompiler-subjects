// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte bl, Register (ptr16 Eq_4) ds)
void fn0C00_0100(byte bl, struct Eq_4 * ds)
{
	bios_video_load_ROM_8x8_dbl_dot_patterns(bl);
	__syscall<byte>(0x10);
	uint8 ah_186 = 0x10;
	do
	{
		Eq_16 di_15 = 0x00;
		do
		{
			byte al_24 = Mem21[0x9000:di_15 + 0x00:byte] + Mem21[0x9000:di_15 + 2:byte];
			ui16 al_ah_219 = SEQ(al_24, ah_186) + SEQ(0x9000->*((word16) di_15 + 0x00A0), SLICE(cond(al_24), bool, 1));
			ui16 al_ah_221 = al_ah_219 + SEQ(0x9000->*((word16) di_15 - 2), SLICE(cond(SLICE(al_ah_219, byte, 8)), bool, 1));
			cu8 al_37 = SLICE(al_ah_221, byte, 8);
			cu16 ax_41 = SEQ((byte) al_ah_221 + (byte) (al_37 < 0x00), al_37);
			byte al_45 = (byte) (ax_41 >> 0x02);
			ah_186 = SLICE(ax_41 >> 0x02, byte, 8);
			if (ax_41 >> 0x02 >= 0x07)
				al_45 -= 0x07;
			if (di_15 >= 0x1FE0)
				al_45 = __in<byte>(0x40);
			0x9000->*((word16) di_15 - 0x00A0) = al_45;
			Eq_27 di_58 = (word16) di_15 + 1;
			di_15 = (word16) di_58 + 1;
		} while (di_58 < 0x207F);
		do
			;
		while ((__in<byte>(0x03DA) & 0x08) == 0x00);
		struct Eq_93 Eq_22::* di_69 = Eq_22::a0FA0;
		do
		{
			uint8 al_73 = di_69[2000];
			word16 cx_86 = ds->a01E7[0][(uint16) (uint8) (SEQ(ah_186, al_73) /u 0x0F)];
			di_69[1999] = (struct Eq_93) cx_86;
			struct Eq_116 Eq_22::* di_90 = -di_69;
			di_90[2000] = (struct Eq_116) SEQ(SLICE(cx_86, byte, 8), al_73);
			Eq_124 di_95 = -di_90;
			ah_186 = 0x00;
			di_69 = di_95 - 0x02;
		} while (di_95 != 0x02);
		struct Eq_130 Eq_22::* di_100 = Eq_22::a0000;
		struct Eq_132 Eq_22::* si_101 = Eq_22::a0000;
		cu8 bl_127 = 0x00;
		byte bh_141;
		for (bh_141 = 0x00; bh_141 != 0x19; ++bh_141)
		{
			do
			{
				if ((0x8000->*di_100).b0001 == 0x00)
				{
					byte ch_114 = (0x8000->*si_101).b0001;
					(0x8000->*di_100).w0000 = SEQ(ch_114, 0x01);
					struct Eq_160 Eq_22::* di_117 = -di_100;
					(0x8000->*di_117).w1F3E = SEQ(ch_114, 0x02);
					di_100 = -di_117;
				}
				word16 si_130 = &si_101->b0001;
				di_100 = &di_100->b0001 + 0x009F;
				++bl_127;
				si_101 = si_130 + 0x01;
			} while (bl_127 < 0x33);
			di_100 -= 8158;
			si_101 = si_130 + 0x3B;
			bl_127 = 0x00;
		}
		byte Eq_22::* di_165 = Eq_22::a0000;
		do
		{
			0xB800->*di_165 = 0x8000->*di_165;
			++di_165;
		} while (di_165 != Eq_22::a0000);
		byte al_185;
	} while (bios_kbd_check_keystroke(out al_185, out ah_186));
	bios_video_set_mode(0x03);
}

