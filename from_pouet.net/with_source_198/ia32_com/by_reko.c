// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: define fn0C00_0100
define fn0C00_0100
{
	mp16 fp;
	selector cs;
	selector ss;
	selector ds;
	sp_2 = fp;
	Top_3 = 0;
	al_4 = 0x13;
	__syscall<byte>(0x10);
	cx_6 = cs;
	ch_7 = SLICE(cs, byte, 8);
	cl_10 = (byte) cs;
	ch_8 = ch_7 + 0x10;
	SCZO_9 = cond(ch_7 + 0x10);
	cx_11 = SEQ(ch_7 + 0x10, cl_10);
	es_12 = cx_11;
	sp_13 = fp - 2;
	wLoc02_227 = 0xA000;
	fs_16 = 0xA000;
	sp_17 = fp;
	do
	{
		ch_26 = ϕ(ch_8, ch_203);
		cl_19 = ϕ(cl_10, cl_202);
		dx_18 = 0x03C8;
		al_20 = cl_19;
		__out<byte>(0x03C8, cl_19);
		dx_21 = 969;
		al_22 = cl_19;
		al_23 = cl_19 >> 0x01;
		__out<byte>(969, al_23);
		__out<byte>(969, al_23);
		al_24 = al_23 >> 0x01;
		SCZO_25 = cond(al_23 >> 0x01);
		__out<byte>(969, al_23 >> 0x01);
		cx_27 = SEQ(ch_26, cl_19);
		cx_28 = cx_27 - 0x01;
		cl_202 = cl_19 - 0x01;
		ch_203 = SLICE(cx_27 - 0x01, byte, 8);
	} while (cx_27 != 0x01);
	do
	{
		sp_46 = fp;
		Top_36 = ϕ(Top_3, Top_105);
		Mem32 = ϕ(Mem15, Mem190);
		di_29 = &Eq_14::t0000;
		bx_30 = 0x0100;
		v21_33 = ds->w0100 + 0x02;
		ds->w0100 = v21_33;
		SCZO_35 = cond(v21_33);
		Top_37 = Top_36 - 1;
		Top_37->r0000 = (real64) ds->w0100;
		Top_37->r0000 /= (real64) ds->w0135;
		v23_40 = Top_37->r0000;
		Top_41 = Top_37 - (real64 *) 1;
		Top_37->r0000 = cos(v23_40);
		Top_37->rFFFFFFFF = sin(v23_40);
		ax_44 = 0x0140;
		dx_45 = 65336;
		sp_47 = fp - 2;
		wLoc02_228 = 0x0140;
		do
		{
			di_217 = ϕ(di_29, di_172);
			Top_215 = Top_36 - 2;
			dx_56 = ϕ(dx_45, dx_182);
			sp_54 = fp - 2;
			ax_50 = ϕ(ax_44, ax_176);
			C_51 = ax_50 != 0x00;
			ax_52 = -ax_50;
			SZO_53 = cond(ax_52);
			sp_55 = fp - 4;
			wLoc04_229 = dx_56;
			do
			{
				di_108 = ϕ(di_172, di_217);
				Top_65 = Top_215;
				ax_61 = ϕ(ax_176, ax_52);
				sp_59 = fp - 4;
				sp_60 = fp - 6;
				wLoc06_230 = ax_61;
				si_64 = fp - 6;
				Top_66 = Top_215 - (struct Eq_312 *) 1;
				Top_215->rFFFFFFFF = (real64) ax_61;
				Top_69 = Top_215 - (struct Eq_319 *) 2;
				Top_215->rFFFFFFFE = 320.0;
				fn0C00_01BE();
				Top_215->rFFFFFFFE = rRet0_71;
				Top_215->rFFFFFFFF = rRet1_72;
				v26_75 = Top_215->rFFFFFFFE;
				Top_215->rFFFFFFFE = Top_215->r0001;
				Top_215->r0001 = v26_75;
				v27_78 = Top_215->rFFFFFFFE;
				Top_215->rFFFFFFFE = Top_215->rFFFFFFFF;
				Top_215->rFFFFFFFF = v27_78;
				Top_81 = Top_215 - (struct Eq_362 *) 3;
				Top_215->rFFFFFFFD = (real64) dx_56;
				fn0C00_01BE();
				Top_215->rFFFFFFFD = rRet0_83;
				Top_215->rFFFFFFFE = rRet1_84;
				v28_87 = Top_215->rFFFFFFFD;
				Top_215->rFFFFFFFD = Top_215->r0001;
				Top_215->r0001 = v28_87;
				fn0C00_01BE();
				Top_215->rFFFFFFFD = rRet0_90;
				Top_215->rFFFFFFFE = rRet1_91;
				Top_215->rFFFFFFFD = fabs(Top_215->rFFFFFFFD);
				Top_215->rFFFFFFFD = -Top_215->rFFFFFFFD;
				si_96 = 262;
				ds->w0106 = (int16) Top_215->rFFFFFFFD;
				Top_98 = Top_215 - (struct Eq_426 *) 2;
				ds->w0108 = (int16) Top_215->rFFFFFFFE;
				Top_100 = Top_215 - (struct Eq_312 *) 1;
				v29_101 = Top_215->rFFFFFFFF;
				Top_215->rFFFFFFFF = Top_215->r0001;
				Top_215->r0001 = v29_101;
				ds->w010A = (int16) Top_215->rFFFFFFFF;
				Top_105 = Top_215;
				al_106.u0 = 0x7F;
				sp_107 = fp - 8;
				wLoc08_233 = di_108;
				bx_110 = ds->w00FF;
				bp_111 = bx_110;
				cx_112 = 0x00;
				C_113 = false;
				di_114 = bx_110;
				v31_115 = ds->w0106 - 0x01;
				ds->w0106 = v31_115;
				SZO_117 = cond(v31_115);
				do
				{
					al_158 = ϕ(al_159, al_106);
					sp_135 = fp - 8;
					di_125 = ϕ(di_126, di_114);
					bp_123 = ϕ(bp_124, bp_111);
					Mem121 = ϕ(Mem138, Mem116);
					cx_118 = ϕ(cx_122, cx_112);
					cx_122 = cx_118 + ds->w0106;
					bp_124 = bp_123 + ds->w0108;
					di_126 = di_125 + ds->w010A;
					SCZO_127 = cond(di_126);
					ah_128 = 228;
					fn0C00_01D3();
					sp_136 = fp - 0x0A;
					wLoc0A_234 = dx_130;
					ah_139 = ds->b0101;
					ah_140 = ah_139 + 0x27;
					ah_141 = ah_139 + 0x27 & ~0x07;
					SZ_142 = cond(ah_141);
					O_143 = false;
					C_144 = false;
					fn0C00_01D3();
					dh_153 = SLICE(dx_146, byte, 8);
					bx_151 = dx_130;
					bh_154 = SLICE(dx_130, byte, 8);
					sp_152 = fp - 8;
					dh_155 = dh_153 + bh_154 + (byte) C_148;
					SCZO_156 = cond(dh_155);
					Z_157 = SLICE(SCZO_156, bool, 2);
					if (dh_155 == 0x00)
						break;
					al_159 = al_158 - 0x01;
					SZO_160 = cond(al_159);
					Z_161 = SLICE(SZO_160, bool, 2);
				} while (al_159 != 0x00);
				al_167 = ϕ(al_158, al_159);
				di_165 = di_108;
				sp_166 = fp - 6;
				(cx_11->*di_108).u0 = (byte) al_167;
				di_172 = (union Eq_173 Eq_14::*) ((char *) di_108 + 1);
				ax_173 = ax_61;
				sp_174 = fp - 4;
				ax_175 = ax_61 + 0x01;
				ax_176 = ax_61 + 0x02;
				SCZO_177 = cond(ax_61 + 0x02 - 0x0140);
				Z_178 = SLICE(SCZO_177, bool, 2);
			} while (ax_61 != 0x013E);
			dx_179 = dx_56;
			sp_180 = fp - 2;
			dx_181 = dx_56 + 0x01;
			dx_182 = dx_56 + 0x02;
			SCZO_183 = cond(dx_56 + 0x02 - 200);
			Z_184 = SLICE(SCZO_183, bool, 2);
		} while (dx_56 != 0xC6);
		do
		{
			Mem187 = ϕ(Mem171, Mem190);
			di_186 = ϕ(di_172, di_192);
			ax_188.u1 = (cx_11->*di_186).u1;
			(0xA000->*di_186).u1 = (word16) ax_188;
			di_191 = di_186 - 0x01;
			di_192 = di_191 - 0x01;
			SZO_193 = cond(di_191 - 0x01);
			Z_194 = SLICE(SZO_193, bool, 2);
		} while (di_191 != 0x01);
		ax_197 = 0x0140;
		ah_245 = 0x01;
		sp_198 = fp;
		al_199 = __in<byte>(0x60);
		SCZO_200 = cond(al_199 - 0x81);
		Z_201 = SLICE(SCZO_200, bool, 2);
		ax_246 = SEQ(0x01, al_199);
		C_251 = SLICE(SCZO_200, bool, 1);
		O_255 = SLICE(SCZO_200, bool, 4);
		S_256 = (bool) SCZO_200;
	} while (al_199 != 0x81);
}

// 0C00:01BE: define fn0C00_01BE
// Called from:
//      fn0C00_0100
define fn0C00_01BE
{
	real64 rArg0;
	real64 rArg2;
	real64 rArg1;
	real64 rArg3;
	rLoc1_28 = rArg0 * rArg2;
	rLoc2_34 = rArg1 * rArg3;
	rArg1_35 = rLoc1_28 + rLoc2_34;
	rLoc1_36 = rArg1 * rArg2;
	rLoc1_39 = rArg0 * rArg3;
	rArg0_40 = rLoc1_36 - rLoc1_39;
	Top_24 = 0x00;
}

// 0C00:01D3: define fn0C00_01D3
// Called from:
//      fn0C00_0100
define fn0C00_01D3
{
	word16 bp;
	byte ah;
	word16 di;
	word16 cx;
	Top_3 = 0;
	bh_6 = SLICE(bp, byte, 8);
	bl_15 = (byte) bp;
	bh_8 = bh_6 + ah;
	dh_11 = SLICE(di, byte, 8);
	dl_13 = (byte) di;
	dh_12 = dh_11 + ah;
	dx_14 = SEQ(dh_12, dl_13);
	bx_16 = SEQ(bh_8, bl_15);
	dx_17 = dx_14 & bx_16;
	dx_19 = dx_17 & cx;
	dh_20 = SLICE(dx_19, byte, 8);
	dl_25 = (byte) dx_19;
	dh_21 = dh_20 & ah;
	SZ_22 = cond(dh_21);
	S_27 = (bool) SZ_22;
	Z_28 = SLICE(SZ_22, bool, 2);
	O_23 = false;
	C_24 = false;
	dx_26 = SEQ(dh_21, dl_25);
}

