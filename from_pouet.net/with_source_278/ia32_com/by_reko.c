// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte bl, Register (ptr16 Eq_4) ds)
void fn0C00_0100(byte bl, struct Eq_4 * ds)
{
	struct Eq_5 * ss;
	__syscall<byte>(0x10);
	struct Eq_11 Eq_4::* bx_9 = SEQ(0xF0, bl);
	Eq_14 cx_12 = 0x0100;
	bx_24 = bx_9;
	do
	{
		struct Eq_11 Eq_4::* bx_24;
		ss->t0200 = cx_12;
		(ds->*bx_24).a0000[0] = (int16) (sin((real64) ss->t0200 * (real64) ds->r01F8) * (real64) ds->r01FC);
		struct Eq_43 Eq_4::* bx_27 = bx_24 + 1;
		--cx_12;
		bx_24 = (struct Eq_11 Eq_4::*) (bx_27 + 1);
		byte bl_181 = (byte) bx_27 + 0x01;
		byte ch_185 = SLICE(cx_12, byte, 8);
	} while (cx_12 != 0x00);
	__out<byte>(0x03C8, 0x13);
	byte ah_184 = 0x00;
	cu16 di_180 = 0x00;
	byte bh_39;
	for (bh_39 = 0x04; bh_39 != 0x00; --bh_39)
	{
		byte cl_40;
		for (cl_40 = 0x40; cl_40 != 0x00; --cl_40)
		{
			__out<byte>(969, bl_181);
			__out<byte>(969, ah_184);
			__out<byte>(969, ch_185);
			Eq_80 si_45 = (di_180 >> 0x04 & 0x0C) + 0x01E7;
			bl_181 = (byte) ((word16) (ds->*si_45) + bl_181);
			ah_184 = (byte) ((word16) (ds->*((word16) si_45 + 1)) + ah_184);
			ch_185 = (byte) ((word16) (ds->*((word16) si_45 + 2)) + ch_185);
			++di_180;
		}
		ch_185 -= ds->*((word16) si_45 + 2);
		ah_184 -= ds->*((word16) si_45 + 1);
		bl_181 -= ds->*si_45;
	}
	do
	{
		byte Eq_216::* di_160 = &Eq_216::b0000;
		word16 dx_164;
		for (dx_164 = 0x00; (byte) dx_164 != 200; ++dx_164)
		{
			word16 cx_102;
			for (cx_102 = 0x0140; cx_102 != 0x00; --cx_102)
			{
				ss->w0204 = ((&(ds->*(ds->*bx_9).a0000))[(uint16) ((word32) ss->t0200 + (((byte) dx_164 >> 0x01) + (byte) cx_102))] >> 0x02) + dx_164;
				word16 bx_144 = (word16) ss->b0208;
				0xA000->*di_160 = (byte) (((((&(ds->*(ds->*bx_9).a0000))[(uint16) ((word32) ss->t0200 + (byte) dx_164)] >> 0x02) + cx_102 ^ ss->w0204) & 0x1F) + (&(ds->*(ds->*bx_9).a0000))[(uint16) ((ss->b0208 + (byte) cx_102) + (byte) dx_164)] + (&(ds->*(ds->*bx_9).a0000))[(uint16) (ss->b0209 + (byte) cx_102)] + (&(ds->*(ds->*bx_9).a0000))[(uint16) ((((byte) bx_144 + ss->b0209) + (byte) cx_102) + (byte) dx_164)] >> 0x03);
				++di_160;
			}
		}
		ss->b0208 += 0x02;
		--ss->b0209;
		ss->t0200.u2 = (word32) ss->t0200 + 2;
	} while (__in<byte>(0x60) != 0x01);
}

