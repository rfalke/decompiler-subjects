// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_3) ds)
void fn0C00_0100(struct Eq_3 * ds)
{
	struct Eq_4 * cs;
	__syscall<byte>(0x10);
	do
	{
		byte Eq_4::* di_14 = Eq_4::a020D;
		word16 cx_15;
		for (cx_15 = 0xFA00; cx_15 != 0x00; --cx_15)
		{
			cs->*di_14 = 0x00;
			++di_14;
		}
		real64 rLoc1_196 = (real64) ds->r01FB + (real64) ds->r01F3;
		ds->r01FB = (real32) rLoc1_196;
		ds->r01FF = (real32) rLoc1_196;
		int16 cx_119;
		for (cx_119 = 0x015E; cx_119 != 0x00; --cx_119)
		{
			ds->w0207 = cx_119;
			real64 rLoc1_199 = (real64) ds->r01FB - (real64) ds->r01FF - (real64) ds->r01FF;
			real64 rLoc1_200 = cos(rLoc1_199);
			ds->r0203 = (real32) sin(rLoc1_199);
			real64 rLoc2_203 = (real64) ds->r01FF - (real64) ds->r01F7;
			ds->r01FF = (real32) rLoc2_203;
			real64 rLoc2_204 = rLoc2_203 * (real64) ds->w01EF;
			real64 rLoc2_205 = cos(rLoc2_204);
			ds->w020B = (int16) ((sin(rLoc2_204) * (real64) ds->w01ED - (real64) ds->w0207 / (real64) ds->w01EF) * (real64) ds->r0203 + (real64) ds->w01EB);
			ds->w0209 = (int16) (rLoc1_200 * (rLoc2_205 * (real64) ds->w01ED - (real64) ds->w0207 / (real64) ds->w01F1) + (real64) ds->w01E9);
			Eq_43 di_102 = ds->w020B *s 0x0140 + ds->w0209 + 525;
			byte Eq_3::* si_188 = &Eq_3::b01D0;
			byte dh_112;
			for (dh_112 = 0x05; dh_112 != 0x00; --dh_112)
			{
				byte dl_104;
				for (dl_104 = 0x05; dl_104 != 0x00; --dl_104)
				{
					byte al_92 = ds->*si_188;
					++si_188;
					if (al_92 != 0x00)
						ds->*di_102 = al_92;
					di_102 = (word16) di_102 + 1;
				}
				di_102 = (word16) di_102 + 315;
			}
		}
		do
			;
		while ((__in<byte>(0x03DA) & 0x08) == 0x00);
		memcpy(A000:0000, (&ds->w020B)[1], 0xFA00);
	} while (__in<byte>(0x60) != 0x01);
	bios_video_set_mode(0x03);
}

