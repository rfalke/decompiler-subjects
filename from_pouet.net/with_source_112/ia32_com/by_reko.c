// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Sequence (ptr32 Eq_3) ds_bx, Register byte ah, Register byte ch, Register (memptr (ptr16 Eq_12) byte) di)
void fn0C00_0100(struct Eq_3 * ds_bx, byte ah, byte ch, byte Eq_12::* di)
{
	__syscall<byte>(0x10);
	struct Eq_12 * ds_147 = ds_bx->ptr0002;
	word16 ax_171 = SEQ(ah, 0x13);
	do
	{
		byte al_11 = (byte) ax_175;
		__out<byte>(969, al_11);
		ax_171 = SEQ(SLICE(ax_175 + 0x01, byte, 8), al_11 + 0x01);
		ax_175 = ax_171;
	} while (ax_175 != ~0x00);
	ui16 si_103 = 0x0141;
	while (true)
	{
		word16 cx_131 = SEQ(ch, 0x20);
		di_49 = di;
		do
		{
			byte Eq_12::* di_49;
			word16 cx_151 = SEQ(SLICE(cx_174, byte, 8), 0x20);
			di_53 = di_49;
			do
			{
				byte Eq_12::* di_53;
				++ds_147->*di_53;
				++di_53;
				--cx_151;
			} while (cx_151 != 0x00);
			di_49 += 320;
			cx_131 = cx_174 - 0x01;
			ch = SLICE(cx_174 - 0x01, byte, 8);
			cx_174 = cx_131;
		} while (cx_174 != 0x01);
		di += si_103;
		uint32 dx_ax_86 = (uint32) di;
		uint16 dx_88 = (uint16) (dx_ax_86 % 0x0140);
		if (((uint16) (dx_ax_86 /u 0x0140) & 0x7F) == 0x00)
			si_103 = si_103 ^ 0x7E;
		if ((dx_88 & 0xFF) == 0x00)
			si_103 = si_103 ^ ~0x7F;
	}
}

