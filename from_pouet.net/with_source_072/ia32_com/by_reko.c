// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Sequence (ptr32 uint16) ds_si, Register uint16 cx, Register byte bh, Register (memptr (ptr16 Eq_32) byte) di)
void fn0C00_0100(uint16 * ds_si, uint16 cx, byte bh, byte Eq_32::* di)
{
	bool P;
	__syscall<byte>(0x10);
	uint16 bx_11 = SEQ(bh, 0x04);
	do
	{
		++bx_11;
		do
		{
			uint32 dx_ax_18 = (uint32) di;
			uint16 dx_20 = (uint16) (dx_ax_18 % 0x0140);
			uint16 ax_21 = (uint16) (dx_ax_18 /u 0x0140);
			do
			{
				uint16 ax_36 = (uint16) (*ds_si *32 ax_21 /u bx_11);
				cx = ax_36;
				dx_20 = cx_159;
				ax_21 = dx_20;
				byte ah_137 = SLICE(dx_20, byte, 8);
				uint16 cx_159 = cx;
			} while (P);
			word16 ax_138 = SEQ(ah_137, 0x10);
			do
			{
				ci8 al_74 = (byte) ax_138;
				bui8 dl_53 = (byte) cx_159;
				cx = ax_36;
				if (((byte) ax_36 & dl_53) < 0x00)
					break;
				byte dh_67 = SLICE(cx_159 * 0x02, byte, 8);
				++ax_138;
				cx_159 = ax_36 + bx_11;
				cx = SEQ(dh_67, dl_53 * 0x02 + 0xC0);
				al_74 = (byte) ax_138;
				ax_36 = SEQ(dh_67, dl_53 * 0x02 + 0xC0);
			} while (al_74 < 0x1F);
			0xA000->*di = al_74;
			++di;
			P = PARITY_EVEN(di);
		} while (di != &Eq_32::b0000);
	} while ((int16) __in<byte>(0x60) != 0x01);
}

