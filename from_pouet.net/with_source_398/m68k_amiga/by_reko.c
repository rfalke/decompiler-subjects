// subject_code_0000.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00001000: void fn00001000(Register ptr32 d2)
void fn00001000(ptr32 d2)
{
	int32 d3;
	int32 d4;
	struct Eq_5 * a0_16 = 4340 + g_dw10E8;
	uint32 d0_130 = a0_16->dwFFFFFFFC;
	struct Eq_14 * a2_138 = (struct Eq_14 *) 0x000301C4 + g_dw10EC;
	Eq_19 a0_111 = a0_16 - 4;
	ui32 d5_110 = g_dw10F0 ^ d0_130;
	do
	{
		uint32 d0_25 = d0_130 >> 0x01;
		bool C_34 = d0_25 < 0x00;
		if (d0_25 == 0x00)
		{
			fn000010C2(d5_110, a0_111, out d0_25, out d5_110, out a0_111);
			C_34 = <invalid>;
		}
		uint32 d0_107;
		int32 d1_152;
		int32 d1_101;
		if (!C_34)
		{
			d0_107 = d0_25 >> 0x01;
			d1_101 = 8;
			d3 = 1;
			bool C_115 = d0_107 < 0x00;
			if (d0_107 == 0x00)
			{
				fn000010C2(d5_110, a0_111, out d0_107, out d5_110, out a0_111);
				C_115 = <invalid>;
			}
			if (C_115)
				goto l0000108C;
			d1_152 = 3;
			d4 = SEQ(SLICE(d4, word16, 16), 0x00);
			goto l00001036;
		}
		word32 d1_50;
		d0_107 = fn000010CE(d0_25, 2, d2, a0_111, out d1_50, out d2);
		if ((byte) d2 >= 0x02)
		{
			if ((byte) d2 != 0x03)
			{
				word32 d1_90;
				d0_107 = fn000010CE(d0_107, 8, d2, a0_111, out d1_90, out d2);
				d3 = SEQ(SLICE(d3, word16, 16), (word16) d2);
				d1_101 = SEQ(SLICE(d1_90, word16, 16), 0x0C);
				goto l0000108C;
			}
			d1_152 = 8;
			d4 = 8;
l00001036:
			word32 d1_375;
			d0_130 = fn000010CE(d0_107, d1_152, d2, a0_111, out d1_375, out d2);
			d3 = SEQ(SLICE(d3, word16, 16), (word16) (d2 + d4));
			do
			{
				int32 d1_184 = 7;
				do
				{
					d0_130 >>= 0x01;
					bool X_202 = SLICE(cond(d0_130), bool, 4);
					if (d0_130 == 0x00)
					{
						fn000010C2(d5_110, a0_111, out d0_130, out d5_110, out a0_111);
						X_202 = <invalid>;
					}
					word16 v48_212 = (word16) d1_184;
					d2 = __rcl<word32,word32>(d2, 0x01, X_202);
					d1_184 = SEQ(SLICE(d1_184, word16, 16), v48_212 - 1);
				} while (v48_212 != 0x00);
				--a2_138;
				a2_138->a0000[0].t0000.u0 = (byte) (byte) d2;
				word16 v51_228 = (word16) d3;
				d3 = SEQ(SLICE(d3, word16, 16), v51_228 - 1);
			} while (v51_228 != 0x00);
		}
		else
		{
			word16 v38_65 = (word16) d2 + 0x02;
			d1_101 = SEQ(SLICE(d1_50, word16, 16), (word16) d2 + 0x09);
			d2 = SEQ(SLICE(d2, word16, 16), v38_65);
			d3 = SEQ(SLICE(d3, word16, 16), v38_65);
l0000108C:
			word32 d1_374;
			d0_130 = fn000010CE(d0_107, d1_101, d2, a0_111, out d1_374, out d2);
			do
			{
				--a2_138;
				a2_138->a0000[0].t0000.u0 = (byte) a2_138[(int32) (int16) d2];
				word16 v43_148 = (word16) d3;
				d3 = SEQ(SLICE(d3, word16, 16), v43_148 - 1);
			} while (v43_148 != 0x00);
		}
		*(union Eq_19 *) 0x00DFF180 = a0_111;
	} while ((struct Eq_14 *) 0x000301C4 < a2_138);
	if (d5_110 != 0x00)
	{
		uipr32 d0_263 = SEQ(SLICE(d0_130, word16, 16), ~0x00);
		do
		{
			*(union Eq_19 *) 0x00DFF180 = (word16) d0_263;
			word16 v55_273 = (word16) d0_263;
			d0_263 = SEQ(SLICE(d0_263, word16, 16), v55_273 - 1);
		} while (v55_273 != 0x00);
	}
	else
		fn000301C4();
}

// 000010C2: FlagGroup byte fn000010C2(Register ui32 d5, Register Eq_19 a0, Register out Eq_34 d0Out, Register out Eq_35 d5Out, Register out ptr32 a0Out)
// Called from:
//      fn00001000
byte fn000010C2(ui32 d5, Eq_19 a0, union Eq_34 & d0Out, union Eq_35 & d5Out, ptr32 & a0Out)
{
	bool X;
	word32 d0_6 = a0.u1->dwFFFFFFFC;
	d0Out = __rcr<word32,word32>(d0_6, 0x01, X);
	d5Out = d5 ^ d0_6;
	a0Out = a0 - 4;
	return <invalid>;
}

// 000010CE: Register uint32 fn000010CE(Register uint32 d0, Register int32 d1, Register ptr32 d2, Register Eq_19 a0, Register out ptr32 d1Out, Register out ptr32 d2Out)
// Called from:
//      fn00001000
uint32 fn000010CE(uint32 d0, int32 d1, ptr32 d2, Eq_19 a0, ptr32 & d1Out, ptr32 & d2Out)
{
	ptr32 d1_38 = SEQ(SLICE(d1, word16, 16), (word16) d1 - 0x01);
	ptr32 d2_10 = SEQ(SLICE(d2, word16, 16), 0x00);
	do
	{
		uint32 d0_22;
		uint64 v24_51 = SEQ(d0, d0_22) >> 0x01;
		d0 = SLICE(v24_51, word32, 32);
		bool X_26 = SLICE(cond(d0), bool, 4);
		if (d0 == 0x00)
		{
			a0 -= 4;
			d0 = (word32) v24_51;
			d0_22 = a0.u1->dw0000;
			X_26 = SLICE(cond(d0), bool, 4);
		}
		word16 v22_39 = (word16) d1_38;
		d2_10 = __rcl<word32,word32>(d2_10, 0x01, X_26);
		d1_38 = SEQ(SLICE(d1_38, word16, 16), v22_39 - 1);
	} while (v22_39 != 0x00);
	d1Out = d1_38;
	d2Out = d2_10;
	return d0;
}

int32 g_dw10E8 = 74752; // 000010E8
int32 g_dw10EC = 197974; // 000010EC
word32 g_dw10F0 = 2626131610; // 000010F0
