// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte ch, Register (ptr16 Eq_4) ds)
void fn0C00_0100(byte ch, struct Eq_4 * ds)
{
	__syscall<byte>(0x10);
	do
	{
		word16 cx_40 = SEQ(ch, 0x46);
		do
		{
			Eq_10 bx_15 = ds->w0182 *s 0x013F + ds->w0180;
			ds->*((word16) bx_15 + 33316) = (word16) (ds->*((word16) bx_15 + 33316)) + 24;
			ds->*((word16) bx_15 + 33317) = (word16) (ds->*((word16) bx_15 + 33317)) + 16;
			ds->*((word16) bx_15 + 32996) = (word16) (ds->*((word16) bx_15 + 32996)) + 16;
			ds->w0180 = (int16) (sin((real64) ds->t0178) * (real64) ds->w015A);
			ds->w0182 = (int16) (cos((real64) ds->t017C) * (real64) ds->w0176);
			ds->t0178 = (word32) ds->t0178 + 98;
			ds->t017C = (word32) ds->t017C + 0x009E;
			--cx_40;
			ch = SLICE(cx_40, byte, 8);
		} while (cx_40 != 0x00);
		ds->t0178 -= 6861;
		ds->t017C -= 11063;
		struct Eq_118 Eq_4::* bx_47 = &Eq_4::tFA00;
		do
		{
			byte al_51 = bx_47[388];
			if (al_51 != 0x10)
			{
				bx_47[388] = (struct Eq_118) (al_51 - 0x01);
				--al_51;
			}
			(0xA000->*bx_47).b0000 = al_51;
			--bx_47;
		} while (bx_47 != Eq_4::a0000);
	} while (__in<word16>(0x60) != 0x01);
}

