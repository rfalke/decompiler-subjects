// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte ch, Register byte cl, Register uint16 bx, Register (ptr16 Eq_6) ds)
void fn0C00_0100(byte ch, byte cl, uint16 bx, struct Eq_6 * ds)
{
	__syscall<byte>(0x10);
	__out<byte>(0x03C8, (byte) bx);
	uint16 ax_16 = bx;
	word16 cx_355 = SEQ(ch + 0x01, cl);
	do
	{
		uint8 al_32 = (uint8) (ax_16 % 0x03) * (uint8) (ax_16 /u 0x03);
		if (al_32 > 0x3F)
			al_32 = 0x3F;
		__out<byte>(969, al_32);
		--cx_355;
		++ax_16;
		byte ch_356 = SLICE(cx_355, byte, 8);
	} while (cx_355 != 0x00);
	ds->w02FE = 0x4040;
	int16 bx_50 = 0x4000;
	int16 ax_346 = 0x3FFB;
	int16 si_331 = 0x3FFB;
	struct Eq_56 Eq_6::* di_58 = Eq_6::a0300;
	word16 cx_357 = SEQ(ch_356, ~0x01);
	do
	{
		int32 dx_ax_62 = ax_346 *s32 0x3FFB;
		ax_346 = __shrd<word16>((word16) dx_ax_62, SLICE(dx_ax_62, word16, 16), 0x0D) - bx_50;
		byte ah_72 = SLICE(ax_346, byte, 8);
		(ds->*di_58).b0000 = ah_72;
		(ds->*di_58).bFFFFFF00 = ah_72;
		bx_50 = si_331;
		si_331 = ax_346;
		++di_58;
		--cx_357;
	} while (cx_357 != 0x00);
	do
	{
		byte Eq_6::* di_111 = Eq_6::a03FE;
		int16 si_83 = si_331 + 0x01;
		word16 bx_206 = 0x8C;
		do
		{
			word16 cx_205 = 0x0140;
			do
			{
				word16 bx_101 = bx_504;
				word16 bp_117 = cx_502;
				bci8 dl_158 = SLICE((word32) ax_346, byte, 16);
				cui16 cx_499 = 0x0600;
				do
				{
					byte cl_120 = (byte) cx_499;
					Eq_100 bx_132 = (uint16) (((byte) bx_101 << cl_120) - (byte) si_83);
					byte ch_161 = SLICE(cx_499 + 0x01, byte, 8);
					bp_117 = bx_101;
					bx_101 = bp_117;
					dl_158 += ds->a02BE[(uint16) (ds->*((word16) bx_132 + 702) - ds->*((word16) bx_132 + 766) + (ds->a02BE)[(uint16) (((byte) bp_117 << cl_120) + (byte) si_83)])] >> cl_120 + 0x01;
					cx_499 = SEQ(ch_161 - 0x01, cl_120 + 0x01);
				} while (ch_161 != 0x01);
				int8 al_174 = dl_158 >> 0x01;
				if (dl_158 >> 0x01 < 0x00)
					al_174 = -(dl_158 >> 0x01);
				ds->*di_111 = al_174;
				++di_111;
				cx_205 = cx_502 - 0x01;
				byte cl_378 = (byte) cx_502 - 0x01;
				cx_502 = cx_205;
			} while (cx_502 != 0x01);
			bx_206 = bx_504 - 0x01;
			bx_504 = bx_206;
		} while (bx_504 != 0x01);
		Eq_178 cx_235 = SEQ(0x02, cl_378);
		do
		{
			uint16 si_260 = (cx_503 >> 0x01) + si_83;
			Eq_181 di_269 = (ds->*((word16) cx_503 + 510) - ds->*((word16) (si_260 & 0xFF) + 702) >> 0x01) + ((int16) (ds->*((word16) (si_260 & 0xFF) + 766)) >> 0x01) *s 0x0141;
			byte cl_271 = 0x08;
			do
			{
				byte ch_272 = 0x08;
				do
				{
					ds->*((word16) di_269 + 23582) = (word16) (ds->*((word16) di_269 + 23582)) + 1;
					--ch_272;
					di_269 = (word16) di_269 + 1;
					word16 cx_287 = SEQ(ch_272, cl_271);
				} while (ch_272 != 0x00);
				di_269 = (word16) di_269 + 312;
				--cl_271;
			} while (cx_287 != 0x01);
			cx_235 = cx_503 - 0x01;
			byte cl_395 = (byte) cx_503 - 0x01;
			cx_503 = cx_235;
		} while (cx_503 != 0x01);
		bcu8 Eq_258::* di_310 = Eq_258::a2580;
		bcu8 Eq_6::* si_311 = Eq_6::a03FE;
		word16 cx_325 = SEQ(~0x50, cl_395);
		do
		{
			0xA000->*di_310 = ds->*si_311 + 0xA000->*di_310 >> 0x01;
			++si_311;
			++di_310;
			--cx_325;
		} while (cx_325 != 0x00);
		int16 ax_345 = (int16) __in<byte>(0x60);
		si_331 = si_83;
		ax_346 = ax_345 - 0x01;
	} while (ax_345 != 0x01);
	__syscall<byte>(0x10);
}

