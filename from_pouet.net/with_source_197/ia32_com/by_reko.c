// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register word16 cx, Register (ptr16 Eq_4) bx, Register (ptr16 Eq_5) es)
void fn0C00_0100(word16 cx, struct Eq_4 * bx, struct Eq_5 * es)
{
	struct Eq_6 * cs;
	struct Eq_7 * ss;
	byte ah;
	byte bh_142 = SLICE(bx, byte, 8);
	byte Eq_5::* di_10 = Eq_5::a01E9;
	word16 ax_230 = SEQ(ah, 0x07);
	do
	{
		byte al_6 = (byte) ax_230;
		es->*di_10 = al_6;
		++di_10;
		--cx;
		ax_230 = SEQ(SLICE(ax_230 + 0x01, byte, 8), al_6 + 0x01);
	} while (cx != 0x00);
	byte Eq_5::* di_17 = Eq_5::a01E2;
	int16 si_22 = bx->w046C;
	Eq_40 bx_100 = SEQ(bh_142, 0x0A);
	do
	{
		--bx_100;
		si_22 *= 0x22E3;
		Eq_47 dx_40 = (uint16) ((uint32) si_22 % bx_100);
		byte v24_47 = ss->*((word16) dx_40 + 0x0212);
		ss->*((word16) dx_40 + 0x0212) = cs->*((word16) bx_100 + 0x0212);
		es->*di_17 = v24_47;
		++di_17;
	} while ((byte) bx_100 != 0x04);
	es->*di_17 = 0x24;
	fn0C00_018B(0x96, cs);
	word16 bp_60 = 0x14;
	while (true)
	{
		fn0C00_018B(~0x25, cs);
		__syscall<byte>(33);
		byte ch_155 = SLICE(cx, byte, 8);
		byte bh_150 = SLICE(bx_100, byte, 8);
		byte al_72 = cs->b01EA;
		if (al_72 == 0x00)
			break;
		if (al_72 != 0x06)
			continue;
		--bp_60;
		if (bp_60 == 0x00)
			break;
		Eq_110 si_84 = 0x01E2;
		word16 dx_154 = 0x6030;
		cx = SEQ(ch_155, 0x06);
		do
		{
			byte dh_109 = SLICE(dx_154, byte, 8);
			char dl_119 = (byte) dx_154;
			byte al_90 = cs->*si_84;
			si_84 = (word16) si_84 + 1;
			bx_100 = SEQ(bh_150, 0x08);
			if (al_90 == Mem58[cs:bx_100 + si_84:byte])
			{
				word16 dx_98 = dx_154 + 0x01;
				dh_109 = SLICE(dx_98, byte, 8);
				dl_119 = (byte) dx_98;
			}
			do
			{
				--bx_100;
				bh_150 = SLICE(bx_100, byte, 8);
				if (bx_100 == 0x00)
					goto l0C00_0159;
			} while (al_90 != cs->*((word16) bx_100 + 490));
			++dh_109;
l0C00_0159:
			--cx;
			dx_154 = SEQ(dh_109, dl_119);
		} while (cx != 0x00);
		if (dl_119 == 0x36)
		{
			fn0C00_018B(222, cs);
			return;
		}
		msdos_write_console_char(dl_119);
		__syscall<byte>(33);
		__syscall<byte>(33);
	}
	fn0C00_018B(226, cs);
}

// 0C00:018B: void fn0C00_018B(Register byte dl, Register (ptr16 Eq_6) ds)
// Called from:
//      fn0C00_0100
void fn0C00_018B(byte dl, struct Eq_6 * ds)
{
	msdos_display_string(SEQ(ds, 0x01, dl));
}

