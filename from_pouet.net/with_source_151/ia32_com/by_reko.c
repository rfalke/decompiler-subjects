// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_3) ds)
void fn0C00_0100(struct Eq_3 * ds)
{
	bios_video_set_mode(0x13);
	int16 cx_14 = 31119;
	word16 di_16 = 0x00;
	Eq_13 si_11;
	for (si_11 = 0x0386; si_11 >= 0x00; --si_11)
	{
		di_16 += SLICE(cx_14 *s32 ~0x26, word16, 16);
		cx_14 += di_16;
		ds->*((word16) si_11 + 902) = SLICE(cx_14, byte, 8);
		ds->*((word16) si_11 + 902) = (word16) (ds->*((word16) si_11 + 902)) + 0x0086;
	}
	__out<byte>(0x03C8, 0x01);
	byte dh_138 = 0x03;
	cui16 cx_170 = 0xFF;
	do
	{
		uint8 cl_37 = (byte) cx_173;
		uint8 al_38 = cl_37;
		if (cl_37 >= 0x20)
		{
			if (cl_37 >= 0x40)
				al_38 = 0x00;
			al_38 = -al_38;
		}
		__out<byte>(969, al_38);
		__out<byte>(969, ds->a0386[(uint16) cl_37] >> 0x02);
		__out<byte>(969, ds->a0386[0][cl_37].b0000 >> 0x02);
		cx_170 = SEQ(SLICE(cx_173 - 0x01, byte, 8), cl_37 - 0x01);
		cx_173 = cx_170;
	} while (cx_173 != 0x01);
	do
	{
		byte Eq_98::* di_113 = &Eq_98::b0000;
		word16 dx_124 = SEQ(dh_138, 200);
		do
		{
			byte dh_84 = SLICE(dx_124, byte, 8);
			byte dl_119 = (byte) dx_124;
			byte Eq_3::* si_105 = SEQ(0x04, ds->a0386[(uint16) ((byte) dx_124 - dh_84)] - dh_84);
			byte ah_101 = SLICE(dx_124, byte, 8) + (ds->a0386)[(uint16) ((byte) dx_124 + dh_84)];
			word16 cx_103;
			for (cx_103 = 0x0140; cx_103 != 0x00; --cx_103)
			{
				0xA000->*di_113 = ds->*si_105 + ah_101;
				++si_105;
				++di_113;
			}
			dx_124 = SEQ(dh_84, dl_119 - 0x01);
		} while (dl_119 != 0x01);
		dh_138 = SLICE(dx_124 - 0x01, byte, 8);
		byte al_128;
		byte ah_129;
	} while (bios_kbd_check_keystroke(out al_128, out ah_129));
	bios_video_set_mode(0x03);
}

