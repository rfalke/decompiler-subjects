// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register ui16 edx_16_16, Register byte bl, Register word16 ebx_16_16, Register (ptr16 Eq_6) ds)
void fn0C00_0100(ui16 edx_16_16, byte bl, word16 ebx_16_16, struct Eq_6 * ds)
{
	struct Eq_7 * ss;
	__syscall<byte>(0x10);
	Eq_13 cx_11 = 0x0100;
	struct Eq_15 Eq_6::* bx_9 = SEQ(0xF0, bl);
	bx_22 = bx_9;
	do
	{
		struct Eq_15 Eq_6::* bx_22;
		ss->t0200 = cx_11;
		(ds->*bx_22).a0000[0] = (int16) (sin((real64) ss->t0200 * (real64) ds->r01AA) * (real64) ds->r01AC);
		--cx_11;
		++bx_22;
		byte cl_161 = (byte) cx_11;
	} while (cx_11 != 0x00);
	__out<byte>(0x03C8, 0x00);
	cui16 di_34 = 0x00;
	byte bh_163 = 0x00;
	byte bl_164 = 0x00;
	word16 cx_233 = SEQ(0x01, cl_161);
	do
	{
		cui16 di_40 = di_34 & 0x3F;
		cu8 cl_44 = (byte) cx_233;
		byte al_47 = (byte) di_40;
		byte ah_48 = SLICE(di_40, byte, 8);
		di_34 = di_40 + 0x02;
		if (cl_44 > 0xC1)
		{
			if (cl_44 >= 225)
				bh_163 = al_47;
			else
				bl_164 = al_47;
		}
		else
			ah_48 = al_47;
		__out<byte>(969, bh_163);
		__out<byte>(969, bl_164);
		__out<byte>(969, ah_48);
		--cx_233;
	} while (cx_233 != 0x00);
	do
	{
		struct Eq_99 Eq_98::* di_129 = &Eq_98::t0000;
		uint16 dx_147;
		for (dx_147 = 200; dx_147 != 0x00; --dx_147)
		{
			word16 cx_145;
			for (cx_145 = 0x0140; cx_145 != 0x00; --cx_145)
			{
				word32 ebx_111 = SEQ(ebx_16_16, (&(ds->*(ds->*bx_9).a0000))[(uint16) ((word16) ss->t0200 + (byte) cx_145)].u1) + SEQ(edx_16_16, dx_147) * 0x08;
				ui8 al_114 = ((byte) cx_145 << 0x03) + ((&(ds->*(ds->*bx_9).a0000)))[(uint16) ((word16) ss->t0200 + (byte) dx_147)].u0 ^ (byte) ebx_111;
				ebx_16_16 = SLICE(ebx_111, word16, 16);
				bcu8 al_115 = al_114 & 0x40;
				if ((al_114 & 0x40) != 0x00)
					al_115 = (al_114 & 0x40) - 0x01;
				(0xA000->*di_129).b0000 = ((byte) di_129[2].b0000 + ((byte) (di_129)[1].b0000 + (al_115 + (0xA000->*di_129).b0000)) >> 0x02) + 0x01;
				++di_129;
			}
		}
		--ss->t0200;
	} while (__in<byte>(0x60) != 0x01);
}

