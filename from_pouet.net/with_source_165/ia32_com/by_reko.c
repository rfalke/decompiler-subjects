// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register (memptr (ptr16 Eq_21) byte) bx, Register (memptr (ptr16 Eq_135) byte) di)
void fn0C00_0100(byte Eq_21::* bx, byte Eq_135::* di)
{
	__syscall<byte>(0x10);
	__out<word16>(0x03D4, 8211);
	int16 dx_10 = 0x03D4;
	int16 ax_11 = 8211;
	struct Eq_21 * ds_8 = 8211;
	cui16 cx_190 = 0x20;
	do
	{
		int16 ax_14 = dx_10 *s ax_11;
		word16 dx_247 = SEQ(SLICE(ax_14 + 0x01, byte, 8), (byte) ax_14 + 0x01);
		do
		{
			bi8 dh_37 = SLICE(dx_247, byte, 8);
			bi8 dl_28 = (byte) dx_247;
			cu8 cl_21 = (byte) cx_254;
			if (cl_21 >= 0x1E)
				ds_8->*bx = cl_21;
			int16 ax_40 = dh_37 *s16 dh_37 + dl_28 *s16 dl_28;
			cu8 ah_41 = SLICE(ax_40, byte, 8);
			byte al_167 = (byte) ax_40;
			if (ah_41 > 0x1F)
				ah_41 = 0x1F;
			ds_8->*bx += ah_41;
			--bx;
			dx_10 = dx_247 + 0x01;
			byte bh_123 = SLICE(bx, byte, 8);
			byte bl_209 = (byte) bx;
			ax_11 = SEQ(ah_41, al_167);
			dx_247 = SEQ(SLICE(dx_247 + 0x01, byte, 8), dl_28 + 0x01);
		} while (bx != &Eq_21::b0000);
		cx_190 = cx_254 - 0x01;
		cx_254 = cx_190;
	} while (cx_254 != 0x01);
	Eq_88 bp_125 = 0x00;
	do
	{
		Eq_96 si_107;
		for (si_107 = 0x0300; si_107 != 0x00; --si_107)
		{
			cui16 cx_90 = cx_190 + 0x01;
			cu8 cl_101 = (byte) cx_90;
			byte ch_187 = SLICE(cx_90, byte, 8);
			if (cl_101 >= 0x03)
			{
				cl_101 = 0x00;
				ch_187 = 0x00;
			}
			uint8 cl_103 = cl_101 << 0x01;
			int16 ax_110 = (int16) (byte) ((word16) si_107 + (bp_125 >> cl_103));
			__out<byte>(969, ((byte) ax_110 ^ SLICE(ax_110, byte, 8)) >> 0x01);
			cx_190 = SEQ(ch_187, cl_103 >> 0x01);
		}
		byte bh_124 = bh_123 - 0x01;
		bp_125 = (word16) bp_125 + 1;
		byte Eq_21::* bx_212 = SEQ(bh_124, bl_209);
		do
		{
			byte al_134 = Mem131[ds_8:bp_125 + si_107:byte] + Mem131[ds_8:bx_212 + si_107:byte];
			bh_123 = bh_124;
			if (SEQ(0x08, al_134) >= bp_125)
			{
				int16 ax_138 = (int16) al_134;
				uint8 al_141 = (byte) ax_138 ^ SLICE(ax_138, byte, 8);
				uint16 ax_145 = (word16) si_107 + SEQ(al_141 >> 0x02, al_141 >> 0x02);
				al_134 = (byte) ax_145 ^ SLICE(ax_145, byte, 8);
			}
			0xA000->*di = al_134;
			++di;
			--si_107;
		} while (si_107 != 0x00);
	} while (__in<byte>(0x60) != 0x01);
}

