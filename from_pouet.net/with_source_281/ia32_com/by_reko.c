// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_3) ds)
void fn0C00_0100(struct Eq_3 * ds)
{
	struct Eq_4 * ss;
	struct Eq_5 * cs;
	__fninit();
	__syscall<byte>(0x10);
	msdos_display_string((char *) ds + 491);
	int16 si_15 = 0x01EB;
	Eq_22 bx_165 = 0x00;
	do
	{
		cui16 ax_33 = bx_165 & 0x1F1F;
		byte bl_40 = (byte) bx_165;
		byte bh_42 = SLICE(bx_165, byte, 8);
		uint8 al_34 = (byte) ax_33;
		cu8 ah_37 = SLICE(ax_33, byte, 8);
		if (al_34 < 0x1C && ah_37 < 0x1C)
			al_34 = bl_40 ^ bh_42;
		0x8000->*bx_165 = al_34 >> 0x02;
		bx_165 = (word16) bx_165 + 1;
	} while (bx_165 != 0x00);
	word16 cx_57 = 0x11;
	do
	{
		do
		{
			Mem67[0x8000:bx_165 + 0x00:byte] = Mem60[0x8000:bx_165 + 0x00:byte] + Mem60[0x8000:bx_165 + 1:byte] + Mem60[0x8000:bx_165 + 0x0100:byte] + Mem60[0x8000:bx_165 + 0x0101:byte] >>u 0x02;
			bx_165 = (word16) bx_165 + 1;
		} while (bx_165 != 0x00);
		--cx_57;
		byte cl_244 = (byte) cx_57;
	} while (cx_57 != 0x00);
	real64 rLoc1_289 = (real64) cs->w01F6;
	word16 cx_175 = SEQ(0x04, cl_244);
	do
	{
		cs->t01EB.u0 = (int16) rLoc1_289;
		Eq_106 dl_102 = cs->t01EB;
		real64 rLoc2_293 = (real64) cs->w01F8 / rLoc1_289 + (real64) cs->w01FA;
		real64 rLoc3_295 = rLoc1_289 + (real64) cs->w01F6;
		real64 rLoc4_296 = 0.0;
		do
		{
			real64 rLoc5_299 = cos(rLoc4_296);
			real64 rLoc6_304 = (real64) cs->w01E3 / (sin(rLoc4_296) * rLoc3_295 + (real64) cs->w01A1);
			cs->t01EB.u0 = (int16) (rLoc6_304 * rLoc2_293);
			Eq_106 ax_133 = cs->t01EB;
			cs->t01EB.u0 = (int16) (rLoc5_299 * rLoc6_304 * rLoc3_295);
			byte bh_150 = SLICE(bx_165, byte, 8);
			Eq_106 di_137 = cs->t01EB;
			if (ax_133 <= 0xE7 && ax_133 >= 0x28 && di_137 <= 0x9F)
			{
				Eq_109 di_145 = (word16) ((ax_133 - 0x28) *s 0x0140) + ((word16) di_137.u2 + 0x00A0);
				0x7000->*di_145 = dl_102;
				ss->*((word16) di_145 + 986) = bh_150;
			}
			rLoc4_296 += (real64) cs->r01F2;
			bx_165 = (word16) bx_165 + 32;
		} while (bx_165 != 0x00);
		--cx_175;
		rLoc1_289 *= (real64) cs->r01FC;
		byte cl_280 = (byte) cx_175;
	} while (cx_175 != 0x00);
	do
	{
		do
			;
		while ((__in<byte>(0x03DA) & 0x08) == 0x00);
		__out<byte>(0x03C8, 0x00);
		byte al_191 = 0x00;
		do
		{
			__out<byte>(969, al_191);
			__out<byte>(969, al_191);
			__out<byte>(969, al_191);
			--al_191;
		} while (al_191 != 0x00);
		struct Eq_239 Eq_4::* di_199 = Eq_4::a0A00;
		word16 cx_216 = SEQ(~0x19, cl_280);
		do
		{
			(0xA000->*di_199).b0000 = ~(0x8000->*((char *) SEQ(di_199[986], (0x7000->*di_199).b0000) + si_15));
			--cx_216;
			++di_199;
			cl_280 = (byte) cx_216;
		} while (cx_216 != 0x00);
		si_15 -= 0x0101;
	} while ((uint16) __in<byte>(0x60) != 0x01);
}

