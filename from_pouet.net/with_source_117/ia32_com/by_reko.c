// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject_code.h"

// 0C00:0100: void fn0C00_0100(Register byte ah, Register word16 cx, Register word16 bp, Register Eq_5 di)
void fn0C00_0100(byte ah, word16 cx, word16 bp, Eq_5 di)
{
	__syscall(0x10);
	word16 ax_13 = SEQ(ah, 0x13);
	do
	{
		++bp;
		do
		{
			Eq_63 dx_ax_19 = SEQ(SLICE((int32) ax_13, word16, 16), di);
			Eq_60 dx_21 = (uint16) (dx_ax_19 % 0x0140);
			Eq_15 ax_22 = (uint16) (dx_ax_19 /u 0x0140);
			uint16 dx_24 = dx_21 - 0xA0;
			if (dx_21 <= 0xA0)
				dx_24 = 0xA0 - dx_21;
			int16 ax_34 = ax_22 - 0x78 + dx_24;
			int32 dx_ax_35 = ax_34 *s ax_34;
			Eq_22 ax_36 = (word16) dx_ax_35;
			word16 ax_48 = CONVERT(SEQ(SEQ(SLICE(dx_ax_35, byte, 24), 0x09), ax_36) /u (((ax_22 - 0x78) *s (ax_22 - 0x78) + ax_36) + 0x0A), word16, uint16) + bp;
			byte al_52 = ((byte) (ax_48 >> 0x01) & 0x3F) + 0x20;
			0xA000->*di = al_52;
			byte ah_66 = SLICE(ax_48 >> 0x01, byte, 8);
			di = (word16) di + 1;
			--cx;
			ax_13 = SEQ(ah_66, al_52);
		} while (cx != 0x00);
		byte al_62 = __inb(0x60);
		ax_13 = SEQ(ah_66, al_62);
	} while (al_62 != 0x01);
}

