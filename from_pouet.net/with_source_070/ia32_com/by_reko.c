// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte ah, Register byte ch, Register (memptr (ptr16 Eq_7) Eq_5) bx, Register word16 si, Register (ptr16 Eq_7) ds)
void fn0C00_0100(byte ah, byte ch, struct Eq_5 Eq_7::* bx, word16 si, struct Eq_7 * ds)
{
	struct Eq_8 * es_91 = (ds->*bx).ptr0002;
	__syscall<byte>(0x10);
	byte bl_60 = (byte) bx - 0x01;
	union Eq_24 Eq_7::* si_12 = ~si;
	Eq_24 ax_80 = SEQ(ah, 0x13);
	while (true)
	{
		byte al_59 = (byte) ax_80;
		byte Eq_8::* di_14 = &Eq_8::b0000;
		Eq_24 cx_58 = SEQ(ch, 0xCC);
		do
		{
			Eq_24 dx_18;
			for (dx_18 = 0x0140; dx_18 != 0x00; --dx_18)
			{
				(ds->*si_12).u0 = (int16) cx_58;
				(ds->*si_12).u0 = (word16) ax_80 + (ds->*si_12).u0;
				real64 rLoc1_99 = (real64) (ds->*si_12).u0;
				(ds->*si_12).u0 = (int16) ax_80;
				real64 rLoc1_101 = sin(rLoc1_99 / (real64) (ds->*si_12).u0);
				real64 rLoc2_102 = (real64) (ds->*si_12).u0;
				(ds->*si_12).u0 = (int16) dx_18;
				real64 rLoc1_105 = rLoc1_101 * cos((real64) (ds->*si_12).u0 / rLoc2_102);
				(ds->*si_12).u1 = ~0x00;
				(ds->*si_12).u0 = (int16) (rLoc1_105 * (real64) (ds->*si_12).u0);
				(ds->*si_12).u0 = (int16) ((ds->*si_12).u0 & dx_18);
				es_91->*di_14 = (ds->*si_12).u1;
				byte ah_84 = SLICE(ax_80, byte, 8);
				++di_14;
			}
			--cx_58;
			ch = SLICE(cx_58, byte, 8);
		} while (cx_58 != 0x00);
		while (true)
		{
			al_59 += bl_60;
			ax_80 = SEQ(ah_84, al_59);
			if (al_59 != 0x00)
				break;
			bl_60 = -bl_60;
		}
	}
}

