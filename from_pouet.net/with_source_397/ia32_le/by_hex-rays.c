/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Watcom C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

void __noreturn sub_10000(); // weak
int __cdecl main(int argc, const char **argv, const char **envp);
void sub_104AE();
int __fastcall sub_104F6(_BYTE *a1, bool *a2);
int __fastcall sub_10611(_BYTE *a1, unsigned __int8 a2, int a3, int a4, int a5, int a6);
int __fastcall sub_106ED(_BYTE *a1, unsigned __int8 *a2, int a3);
int __fastcall sub_10731(_BYTE *a1, unsigned __int8 *a2);
int __fastcall sub_1073B(int a1);
int __fastcall sub_107F4(char *a1, unsigned int a2, int a3, int a4);
void *__cdecl operator new(unsigned int); // idb
int __fastcall fclose(int a1);
int __fastcall sub_10A07(int a1, int a2);
int __fastcall sub_10A1C(int a1);
int __fastcall sub_10A28(const char *a1, int a2);
void __fastcall sub_10AD2(int a1, int a2);
// double __cdecl _CHP(_DWORD); weak
int __fastcall sub_10B8D(char *a1, unsigned int a2, int a3, int a4);
// int __fastcall getch(_DWORD); weak
unsigned int __fastcall sub_10D8A(unsigned int result);
// int __fastcall _fatal_runtime_error(_DWORD, _DWORD); weak
_DWORD *__fastcall sub_110D4(int a1);
_DWORD *sub_110E7();
_DWORD *__fastcall sub_110FE(int a1);
// int __fastcall tolower(_DWORD, _DWORD); weak
int __cdecl sub_1113C(_BYTE *a1, __int16 a2, int a3, char a4);
int __fastcall sub_11163(_BYTE *a1, __int16 a2, int a3, int *a4);
char *sub_113DF();
int *__fastcall _freefp(int a1);
int __fastcall sub_114DF(int a1, int a2);
int __fastcall sub_1151E(int result);
int __fastcall sub_11534(int a1, int a2, unsigned int a3);
// int __fastcall _chktty(_DWORD); weak
// int __fastcall _ioalloc(_DWORD); weak
// int __fastcall _qread(_DWORD, _DWORD, _DWORD); weak
int __fastcall _filbuf(int *a1);
int __fastcall sub_117F1(int a1);
int sub_118E7();
char *sub_119E0();
int __fastcall sub_11AA8(int a1);
// int __fastcall ftell(_DWORD); weak
// int __fastcall lseek(_DWORD, _DWORD, _DWORD); weak
// int __fastcall _close(_DWORD); weak
unsigned int __fastcall sub_11C83(unsigned int result);
int j_unlink(void); // weak
// int __fastcall _qwrite(_DWORD, _DWORD, _DWORD); weak
void *sub_11DF7();
void *sub_11DFD();
int __fastcall sub_11E03(int a1, int a2);
int (**__fastcall sub_11F23(int (**result)(void)))(void);
char *__fastcall sub_11F2F(unsigned __int8 a1);
char *__fastcall sub_11F7B(unsigned __int8 a1, unsigned __int8 a2);
char __fastcall sub_12BA0(int a1, int a2, int a3, int a4);
void sub_12C6B();
__int16 __fastcall sub_12C88(int a1, int a2, int a3);
__int16 sub_12CD5();
__int16 sub_12D6F();
__int16 sub_12DAA();
int __fastcall sub_12DCB(int result);
int __fastcall sub_12DD0(int result);
int _init_8087();
int sub_12E0F();
int sub_12E79();
int __fastcall sub_12F74(int a1);
int __fastcall sub_12FC9(int a1, int a2);
// int __fastcall isatty(_DWORD); weak
int __fastcall sub_13008(int a1, int a2);
int __fastcall sub_13013(unsigned int a1);
// int __fastcall nmalloc(_DWORD); weak
// int __fastcall memset(_DWORD, _DWORD, _DWORD); weak
// int __fastcall tell(_DWORD); weak
// int __fastcall _flushall(_DWORD); weak
// int getche(void); weak
// int getenv(void); weak
// int __fastcall fullpath(_DWORD, _DWORD, _DWORD); weak
// int __fastcall sub_13564(_DWORD, _DWORD); weak
int __fastcall j__dos_commit(_DWORD); // weak
// int __fastcall _MemFree(_DWORD, _DWORD, _DWORD); weak
char *sub_13811();
int nullsub_2(); // weak
void __fastcall __noreturn sub_13876(int a1, int a2);
void __fastcall __noreturn sub_13899(int a1);
// int _int7(); weak
int __cdecl sub_14134(int a1, __int16 a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, __int16 a15);
int nullsub_4(void); // weak
// int __usercall sub_14248@<eax>(int a1@<ebp>, int a2@<edi>, int a3, __int16 a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, __int16 a17);
// int __usercall sub_14284@<eax>(int a1@<ebp>, int a2@<edi>, int a3, __int16 a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, __int16 a17);
// int __usercall sub_14328@<eax>(int a1@<ecx>, _BYTE *a2@<ebp>);
// int __usercall sub_14332@<eax>(int a1@<ecx>, _BYTE *a2@<ebp>);
// int __usercall sub_1433C@<eax>(int a1@<ecx>, _BYTE *a2@<ebp>);
// int __usercall sub_14346@<eax>(int result@<eax>, int a2@<ecx>, _BYTE *a3@<ebp>);
void sub_14394();
void sub_1439A();
void sub_143A0();
void sub_143A6();
void sub_143AC();
void sub_143B4();
void sub_143BA();
void sub_143C0();
void sub_143C6();
void sub_143CE();
void sub_143D6();
void sub_143DE();
void sub_143E6();
void sub_143F0();
void sub_143FA();
void sub_14402();
void sub_1440A();
void sub_14413();
void sub_1441C();
void sub_14425();
void sub_1442E();
void sub_14439();
void sub_14444();
void sub_1444D();
// char __usercall sub_14456@<al>(unsigned __int8 a1@<ah>, int a2@<ebx>, _BYTE *a3@<esi>);
// int __usercall sub_14493@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>);
// int __usercall sub_144B2@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>);
// int __usercall sub_144D1@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18);
// int __usercall sub_144ED@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18);
// int __usercall sub_14509@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>);
// int __usercall sub_14528@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>);
// int __usercall sub_14547@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>);
// int __usercall sub_14566@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>);
// int __usercall sub_14585@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18);
// int __usercall sub_145C3@<eax>(int a1@<ebp>, int a2@<edi>, unsigned int *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18);
// void __usercall sub_145D4(int a1@<ebp>, int a2@<edi>, unsigned int *a3@<esi>);
// int __usercall sub_145E5@<eax>(void *a1@<ebp>, const void *a2@<esi>, int a3, __int16 a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, __int16 a17);
// int __usercall sub_14603@<eax>(int a1@<ebp>, __int16 *a2@<esi>, int a3, __int16 a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, __int16 a17);
// int __usercall sub_14643@<eax>(const void *a1@<ebp>, void *a2@<esi>, int a3, __int16 a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, __int16 a17);
// int __usercall sub_14657@<eax>(_WORD *a1@<ebp>, _WORD *a2@<esi>, int a3, __int16 a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, __int16 a17);
// int __usercall sub_14665@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>);
// int __usercall sub_14684@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>);
// int __usercall sub_146A3@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18);
// int __usercall sub_146BF@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18);
// int __usercall sub_146DB@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>);
// int __usercall sub_146FA@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>);
// int __usercall sub_14719@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>);
// int __usercall sub_14738@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>);
// int __usercall sub_14757@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18);
// int __usercall sub_14795@<eax>(_WORD *a1@<ebp>, int a2@<edi>, _DWORD *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18);
// void __usercall sub_147D1(_WORD *a1@<ebp>, int a2@<edi>, _DWORD *a3@<esi>);
// int __usercall sub_147F5@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>);
// int __usercall sub_14818@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>);
// int __usercall sub_1483B@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18);
// int __usercall sub_1485B@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18);
// int __usercall sub_1487B@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>);
// int __usercall sub_1489E@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>);
// int __usercall sub_148C1@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>);
// int __usercall sub_148E4@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>);
// int __usercall sub_14907@<eax>(int a1@<ebp>, int a2@<edi>, int a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18);
// int __usercall sub_14952@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18);
// int __usercall sub_14994@<eax>(int a1@<edx>, _BYTE *a2@<ebp>, int a3@<edi>, int *a4@<esi>, int a5, __int16 a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, __int16 a19);
// void __usercall sub_149A9(int a1@<ebp>, int a2@<edi>, int a3@<esi>);
// void __usercall sub_149C7(int a1@<edx>, _BYTE *a2@<ebp>, int a3@<edi>, int *a4@<esi>);
// int __usercall sub_149DC@<eax>(_DWORD *a1@<ebp>, _DWORD *a2@<esi>, int a3, __int16 a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, __int16 a17);
// void __usercall sub_14A27(char *a1@<ebp>, int a2@<edi>, _DWORD *a3@<esi>);
// int __usercall sub_14A52@<eax>(int a1@<ebp>, _WORD *a2@<esi>, int a3, __int16 a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, __int16 a17);
// int __usercall sub_14A60@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>);
// int __usercall sub_14A81@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>);
// int __usercall sub_14AA2@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18);
// int __usercall sub_14AC0@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18);
// int __usercall sub_14ADE@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>);
// int __usercall sub_14AFF@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>);
// int __usercall sub_14B20@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>);
// int __usercall sub_14B41@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>);
// int __usercall sub_14B62@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18);
// int __usercall sub_14BA2@<eax>(_WORD *a1@<ebp>, int a2@<edi>, _WORD *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18);
// void __usercall sub_14BEA(_WORD *a1@<ebp>, int a2@<edi>, _WORD *a3@<esi>);
// int __usercall sub_14C1F@<eax>(int a1@<ebp>, int a2@<edi>, unsigned int *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18);
// void __usercall sub_14C62(_WORD *a1@<ebp>, int a2@<edi>, int *a3@<esi>);
_DWORD __cdecl sub_14C86(_DWORD, __int16, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, __int16); // weak
// int __usercall sub_14CB8@<eax>(int a1@<ebp>, int a2@<edi>, int a3@<esi>);
void __fastcall sub_158AA(int a1, int *a2);
// int __usercall sub_158D4@<eax>(int a1@<eax>, int a2@<edx>, int a3@<esi>);
// int __userpurge sub_158FE@<eax>(int a1@<eax>, int a2@<esi>, unsigned int a3, unsigned int a4, __int16 a5);
void sub_1592E();
// int __usercall sub_159B3@<eax>(__int64 a1@<edx:eax>, unsigned int a2@<ecx>, unsigned int a3@<ebx>, int a4@<esi>);
int __fastcall sub_15B45(unsigned int a1, int a2);
// int __usercall sub_15BDE@<eax>(int a1@<eax>, int a2@<edx>, _BYTE *a3@<ebp>, int a4@<esi>);
// int __usercall sub_15C7E@<eax>(unsigned __int64 a1@<edx:eax>, unsigned int a2@<ecx>, unsigned int a3@<ebx>, _BYTE *a4@<ebp>, int a5@<esi>);
// int __usercall sub_15E39@<eax>(int a1@<eax>, int a2@<edx>, int a3@<esi>);
// int __usercall sub_15EFF@<eax>(unsigned __int64 a1@<edx:eax>, unsigned int a2@<ecx>, unsigned int a3@<ebx>, int a4@<esi>);
void sub_16070();
int __fastcall sub_16075(int *a1);
int __fastcall sub_160DF(int a1, int a2);
int __fastcall sub_160F0(unsigned int a1, int a2);
// int __usercall sub_16125@<eax>(__int64 a1@<edx:eax>, int a2@<ebx>, _BYTE *a3@<ebp>);
unsigned int __fastcall sub_161A3(int a1);
// int __usercall sub_16222@<eax>(__int64 *a1@<eax>, _BYTE *a2@<ebp>);
signed int __fastcall sub_162EC(signed int result, int a2);
unsigned int __fastcall sub_163B1(unsigned int result, __int16 a2);
// __int16 __usercall sub_1653E@<ax>(int a1@<eax>, int a2@<edx>, int a3@<ebx>, _BYTE *a4@<ebp>, int a5@<esi>);
// __int16 __usercall __spoils<> sub_165F4@<ax>(int a1@<eax>, _BYTE *a2@<ebp>, int a3@<esi>);
// int __usercall sub_16757@<eax>(int a1@<eax>, int a2@<edx>, int a3@<edi>);
// int __usercall sub_167BD@<eax>(__int64 a1@<edx:eax>, unsigned int a2@<ecx>, unsigned int a3@<ebx>, __int16 a4@<di>, __int16 a5@<si>);
// char __usercall sub_16838@<al>(int a1@<eax>, int a2@<ebp>, int a3@<edi>);
// int __usercall sub_16926@<eax>(int a1@<eax>, int a2@<edx>, _BYTE *a3@<ebp>, int a4@<esi>);
// int __usercall sub_1693F@<eax>(int a1@<eax>, int a2@<edx>, _BYTE *a3@<ebp>, int a4@<esi>);
// int __usercall sub_16982@<eax>(int a1@<eax>, _BYTE *a2@<ebp>);
// int __usercall sub_16C1A@<eax>(int a1@<eax>, int a2@<esi>);
int __fastcall sub_16E11(int a1);
int __fastcall sub_16E1B(int a1);
int __fastcall sub_16E28(int a1);
int sub_16E36(); // weak
int __fastcall sub_16E5E(int a1, int a2, int a3, int a4);
int __fastcall sub_17032(unsigned __int64 a1);
// void __usercall sub_1711E(int a1@<ecx>, int a2@<esi>);
// int __usercall sub_17170@<eax>(int a1@<eax>, int a2@<edx>, int a3@<esi>);
char __fastcall sub_171B8(int a1, __int16 a2);
char __fastcall sub_17282(int a1, __int16 a2);
// int __fastcall _init_80x87(_DWORD); weak
int __fastcall sub_17303(int a1);
void _FreeDPMIBlocks();
_DWORD *__fastcall sub_174C1(int *a1);
int sub_17535();
// _DWORD *__usercall sub_17584@<eax>(unsigned int a1@<eax>, __int16 a2@<di>, __int16 a3@<si>);
// void __usercall sub_17655(unsigned int a1@<eax>, unsigned int a2@<edx>, unsigned int a3@<ecx>, __int16 a4@<di>, __int16 a5@<si>);
// void __usercall sub_17702(unsigned int a1@<eax>, unsigned int a2@<edx>, unsigned int a3@<ecx>, __int16 a4@<di>, __int16 a5@<si>);
bool __fastcall sub_1784C(unsigned int *a1);
int sub_178C3();
int __fastcall sub_17973(unsigned __int8 *a1, unsigned __int8 *a2, int a3);
// void __usercall __noreturn sub_17A38(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<ebp>, int a6@<edi>, int a7@<esi>);
// void __usercall __noreturn sub_17ACD(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<ebp>, int a6@<edi>, int a7@<esi>);
int sub_17B45();
void __fastcall sub_17BD0(int a1, int a2);
int sub_17DC0(); // weak
__int16 sub_17DC5();
void __fastcall sub_17DE6(int a1, int a2, unsigned int a3);
void __fastcall sub_17F2E(int a1, int a2, unsigned int a3);
void *sub_18143();
// int __fastcall dos_setvect(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall _brk(_DWORD); weak
void sub_18393();
// int __fastcall mbterm(_DWORD, _DWORD); weak
// int __fastcall mbcicmp(_DWORD, _DWORD); weak
// __int64 __fastcall mbsinc(_DWORD); weak
int sub_1853B();
int __fastcall sub_18545(int result);
int __fastcall sub_18657(int a1);
// int _nonIBM(void); weak
int sub_18770();
// __int64 __fastcall dos_getvect(_DWORD, _DWORD, _DWORD); weak
void __fastcall sub_187B9(int a1, __int16 a2);
// int _terminate(void); weak
char __fastcall __spoils<ah> sub_1892C(int a1);
__int16 sub_18A10();
void __fastcall sub_18A33(int a1, __int16 a2);
int sub_18B7A();
int __fastcall sub_18C7C(int a1, __int16 a2);
int __fastcall j__DoINTR(_DWORD, _DWORD); // weak
void __spoils<edx> _Init_FPE_handler();
void __spoils<edx> sub_18FCB();
void sub_19028();
void __noreturn sub_1903D(); // weak
void __noreturn sub_1904A();
// void __usercall sub_1914D(__int16 a1@<bx>, double *a2@<edi>, double a3@<st0>);
// void __usercall sub_191DA(__int16 a1@<bx>, int a2@<ebp>, double *a3@<edi>, __int16 a4@<fpstat>, double a5@<st0>);
// double __usercall sub_1922C@<st0>(char a1@<bh>, int a2@<ebp>, __int16 a3@<fpstat>, double a4@<st0>);
// __int64 __usercall sub_19252@<edx:eax>(int a1@<edx>, __int16 a2@<bx>, int _ESI@<esi>);
// double __usercall sub_19277@<st0>(char a1@<bl>, double *a2@<edi>, double result@<st0>);
// int __usercall sub_192BE@<eax>(int a1@<edi>);
int __fastcall sub_19330(int a1, int a2);
int __fastcall sub_19664(unsigned int a1);
// int _Phar_hook_init(void); weak
// int _Phar_hook_fini(void); weak
// int _DOS4G_hook_init(void); weak
// int _DOS4G_hook_fini(void); weak
// int _Ergo_hook_init(void); weak
// int _Ergo_hook_fini(void); weak
// int _Intel_hook_init(void); weak
// int _Intel_hook_fini(void); weak
// int __fastcall ismbclegal(_DWORD, _DWORD); weak

//-------------------------------------------------------------------------
// Data declarations

// extern _UNKNOWN _GETDS; weak
__int16 word_13CEA = 10; // weak
__int16 word_13CEC = 70; // weak
__int16 word_13CEE = 0; // weak
__int16 word_13D3A = -4; // weak
__int16 word_13D3C = 1; // weak
__int16 word_13D40 = 2; // weak
__int16 word_13D42 = 3; // weak
char byte_13D8A[] = { '\x01' }; // weak
int (*funcs_1417E[24])() =
{
  &sub_14394,
  &sub_1439A,
  &sub_143A0,
  &sub_143A6,
  &sub_14456,
  &sub_143B4,
  &sub_143BA,
  &sub_143C0,
  &sub_143C6,
  &sub_143CE,
  &sub_143D6,
  &sub_143DE,
  &sub_14456,
  &sub_143F0,
  &sub_143FA,
  &sub_14402,
  &sub_1440A,
  &sub_14413,
  &sub_1441C,
  &sub_14425,
  &sub_14456,
  &sub_14439,
  &sub_14444,
  &sub_1444D
}; // weak
int (*funcs_14469[24])() =
{
  &sub_14394,
  &sub_1439A,
  &sub_143A0,
  &sub_143A6,
  &sub_143AC,
  &sub_143B4,
  &sub_143BA,
  &sub_143C0,
  &sub_143C6,
  &sub_143CE,
  &sub_143D6,
  &sub_143DE,
  &sub_143E6,
  &sub_143F0,
  &sub_143FA,
  &sub_14402,
  &sub_1440A,
  &sub_14413,
  &sub_1441C,
  &sub_14425,
  &sub_1442E,
  &sub_14439,
  &sub_14444,
  &sub_1444D
}; // weak
int (__cdecl *funcs_15296[8])(int, __int16, int, int, int, int, int, int, int, int, int, int, int, int, __int16) =
{
  &sub_14C86,
  &loc_152BE,
  &sub_14C86,
  &sub_14C86,
  &sub_14C86,
  &sub_14C86,
  &sub_14C86,
  &sub_14C86
}; // weak
int (__cdecl *funcs_15538[8])(int, __int16, int, int, int, int, int, int, int, int, int, int, int, int, __int16) =
{
  &sub_14C86,
  &loc_15560,
  &sub_14C86,
  &sub_14C86,
  &sub_14C86,
  &sub_14C86,
  &sub_14C86,
  &sub_14C86
}; // weak
int dword_16331[] = { 2147483647 }; // weak
int dword_164E4[21] =
{
  -1058662322,
  -1244543004,
  187252730,
  -1693972479,
  -1074035514,
  1824859674,
  -1656356306,
  -1742061573,
  -1180890517,
  -1074021845,
  -1792343695,
  -477223129,
  1761361915,
  611507612,
  -1073966519,
  -1796493887,
  -858993460,
  -2114830340,
  -1431655785,
  -1073894742,
  0
}; // weak
int dword_168E0[7] =
{
  -1243003159,
  -903828070,
  1695137790,
  1359000959,
  1073971986,
  -1649618392,
  -2143291243
}; // weak
__int16 word_168FE = 0; // weak
int dword_16B54[21] =
{
  -2056629415,
  -896124031,
  -124829746,
  -1623614016,
  -1076439233,
  1130908645,
  -1332596579,
  478101470,
  725592615,
  -1075456206,
  -1237738371,
  -1192288982,
  -804503572,
  13634816,
  -1074606067,
  -2004318072,
  -2004318072,
  -1431683080,
  -1431655766,
  -1073960278,
  0
}; // weak
__int16 word_16BAE[] = { -1905 }; // weak
__int16 word_16C08[] = { 0 }; // weak
unsigned __int8 byte_20004[3] = { 114u, 98u, 0u }; // idb
char aRealPvd[9] = "real.pvd"; // weak
float flt_20010 = -1.0; // weak
float flt_20014 = -1.0; // weak
float flt_20018 = -1.0; // weak
float flt_2001C = -1.0; // weak
float flt_20020 =  0.0625; // weak
float flt_20024 =  200.0; // weak
float flt_20028 = -32768.0; // weak
unsigned __int8 byte_2002C[3] = { 119u, 98u, 0u }; // idb
char aFickenRaw[11] = "ficken.raw"; // weak
char aNotEnoughMemor[48] = "Not enough memory to allocate file structures\r\n"; // weak
char aUnableToAlloca[38] = "Unable to allocate real mode selector"; // weak
char aUnableToSetLim[42] = "Unable to set limit of real mode selector"; // weak
__int16 word_2017C = 0; // weak
int dword_20190 = 0; // weak
__int16 word_20194 = 32; // weak
__int16 word_20196 = 0; // weak
char byte_2019C = '\0'; // weak
char byte_2019D = '\0'; // weak
int dword_201A4 = 0; // weak
int dword_201B0 = 0; // weak
int dword_201B4 = 0; // weak
__int16 word_201D0 = 0; // weak
char byte_201D2 = '\0'; // weak
char byte_201D3 = '\0'; // weak
char byte_201D4 = '\0'; // weak
int dword_201D5 = 0; // weak
__int16 word_201D9 = 0; // weak
char byte_201DB = '\0'; // weak
int (__fastcall *off_201DD)(_DWORD) = &nullsub_3; // weak
int dword_201E4 = 0; // weak
_UNKNOWN unk_201E8; // weak
char byte_20229 = '\0'; // weak
char byte_203F0 = 'a'; // weak
int dword_203F1 = 256; // weak
char *off_203F8[4] = { "TMP", "TEMP", "TMPDIR", "TEMPDIR" }; // weak
char byte_2040C[144] =
{
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0'
}; // idb
int dword_20538 = 0; // weak
int dword_20578 = 0; // weak
__int16 word_2057C = 0; // weak
__int16 word_2057E = 0; // weak
char byte_20580 = '\0'; // weak
int dword_20588 = 20; // weak
void *off_205DC = &unk_2058C; // weak
int dword_205F4 = 0; // weak
int dword_205F8 = 0; // weak
int dword_205FC = 0; // weak
int dword_20600 = 0; // weak
int (__fastcall *off_20604)(_DWORD, _DWORD) = &nullsub_2; // weak
int (__fastcall *off_20608)(_DWORD) = &nullsub_2; // weak
char byte_20694 = '\0'; // weak
char byte_20695 = '\0'; // weak
__int16 word_20698 = 4735; // weak
int (*off_2069C[2])() = { &nullsub_6, &nullsub_6 }; // weak
int (*off_206A0)() = &nullsub_6; // weak
char IsTable[256] =
{
  '\0',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x03',
  '\x03',
  '\x03',
  '\x03',
  '\x03',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\n',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '8',
  '8',
  '8',
  '8',
  '8',
  '8',
  '8',
  '8',
  '8',
  '8',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  'X',
  'X',
  'X',
  'X',
  'X',
  'X',
  'H',
  'H',
  'H',
  'H',
  'H',
  'H',
  'H',
  'H',
  'H',
  'H',
  'H',
  'H',
  'H',
  'H',
  'H',
  'H',
  'H',
  'H',
  'H',
  'H',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\x98',
  '\x98',
  '\x98',
  '\x98',
  '\x98',
  '\x98',
  '\x88',
  '\x88',
  '\x88',
  '\x88',
  '\x88',
  '\x88',
  '\x88',
  '\x88',
  '\x88',
  '\x88',
  '\x88',
  '\x88',
  '\x88',
  '\x88',
  '\x88',
  '\x88',
  '\x88',
  '\x88',
  '\x88',
  '\x88',
  '\f',
  '\f',
  '\f',
  '\f',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0'
}; // weak
int dword_207A8 = 16; // weak
int dword_207AC = 0; // weak
__int16 word_207B0 = 0; // weak
int dword_207B2 = 0; // weak
__int16 word_207B6 = 0; // weak
int dword_207B8 = 0; // weak
__int16 word_207BC = 0; // weak
int dword_207BE = 0; // weak
__int16 word_207C2 = 0; // weak
int dword_207C4 = 0; // weak
int dword_207C8 = 1; // weak
int dword_207CC[] = { 1 }; // weak
int dword_207D4 = 1; // weak
int dword_20800 = -1; // weak
int dword_20808 = 0; // weak
__int16 word_2080C = 0; // weak
_UNKNOWN unk_20818; // weak
double dbl_20822 =  1.797693134862316e308; // weak
float flt_2082A =  3.4028235e38; // weak
_UNKNOWN unk_20B3E; // weak
_BYTE byte_20B86[2] = { 0, 1 }; // idb
char byte_20B98[8] = { '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0' }; // idb
_UNKNOWN unk_20BA0; // weak
int dword_20CA0 = 0; // weak
int dword_20CA4 = 0; // weak
int dword_20CA8 = 0; // weak
_UNKNOWN unk_20CAC; // weak
_UNKNOWN unk_20CB0; // weak
char byte_20CE0 = '\0'; // weak
int dword_20D6C = 0; // weak
int dword_20D70 = 0; // weak
_UNKNOWN unk_21178; // weak
_UNKNOWN unk_2118C; // weak
__int16 word_2118E; // weak
int dword_21190; // weak
char byte_21194[]; // weak
__int16 word_21298; // weak


//----- (00010010) --------------------------------------------------------
int __cdecl main(int argc, const char **argv, const char **envp)
{
  int v3; // eax
  unsigned int v5; // [esp+0h] [ebp-19Ch]
  unsigned int v6; // [esp+0h] [ebp-19Ch]
  int v7; // [esp+0h] [ebp-19Ch]
  float v8; // [esp+4h] [ebp-198h]
  float *v9; // [esp+8h] [ebp-194h]
  float v10; // [esp+Ch] [ebp-190h]
  float v11; // [esp+10h] [ebp-18Ch]
  float v12; // [esp+10h] [ebp-18Ch]
  _DWORD v13[16]; // [esp+14h] [ebp-188h]
  int v14; // [esp+54h] [ebp-148h]
  _OWORD v15[16]; // [esp+58h] [ebp-144h] BYREF
  int v16; // [esp+158h] [ebp-44h]
  char v17[4]; // [esp+15Ch] [ebp-40h] BYREF
  int v18; // [esp+160h] [ebp-3Ch] BYREF
  int v19; // [esp+164h] [ebp-38h] BYREF
  char *v20; // [esp+168h] [ebp-34h]
  char *v21; // [esp+16Ch] [ebp-30h]
  int j; // [esp+170h] [ebp-2Ch]
  int k; // [esp+174h] [ebp-28h]
  float l; // [esp+17Ch] [ebp-20h]
  float v25; // [esp+180h] [ebp-1Ch]
  float m; // [esp+184h] [ebp-18h]
  float v27; // [esp+188h] [ebp-14h]
  float n; // [esp+18Ch] [ebp-10h]
  float v29; // [esp+190h] [ebp-Ch]
  int i; // [esp+194h] [ebp-8h]
  int v31; // [esp+198h] [ebp-4h]

  __asm { int     10h; - VIDEO - SET VIDEO MODE }
  v16 = sub_10731(aRealPvd, byte_20004);
  sub_107F4(v17, 4u, 1, v16);
  sub_107F4((char *)&v18, 4u, 1, v16);
  sub_107F4((char *)&v19, 4u, 1, v16);
  v20 = (char *)operator new(v5);
  sub_107F4(v20, 8u, v18, v16);
  fclose(v16);
  v21 = (char *)operator new(v6);
  qmemcpy(v15, &unk_20BA0, sizeof(v15));
  HIDWORD(v15[1]) = 1007009591;
  HIDWORD(v15[3]) = 1015885157;
  HIDWORD(v15[5]) = 1025004202;
  HIDWORD(v15[7]) = 1034366725;
  HIDWORD(v15[9]) = 1043668379;
  HIDWORD(v15[11]) = 1052665684;
  HIDWORD(v15[13]) = 1057812980;
  HIDWORD(v15[15]) = 1063793429;
  l = 0.0;
  v25 = 0.0022902493;
  m = 0.0;
  v27 = 0.0022448979;
  n = 0.0;
  v29 = 0.0011337869;
  for ( i = 0; v18 - 1 > i; ++i )
  {
    for ( j = 0; j < 8; ++j )
    {
      v14 = (unsigned __int8)v20[i + j * v18];
      *(float *)&v13[j + 8] = (float)(__int16)v14;
      v14 = (unsigned __int8)v20[i + 1 + j * v18];
      *(float *)&v13[j] = ((double)(__int16)v14 - *(float *)&v13[j + 8]) / (double)v19;
    }
    for ( k = 0; k < v19; ++k )
    {
      v11 = 0.0;
      v10 = l + m + n + flt_20010;
      for ( l = l + v25; SLODWORD(l) >= 1065353216; l = l + flt_20014 )
        ;
      for ( m = m + v27; SLODWORD(m) >= 1065353216; m = m + flt_20018 )
        ;
      for ( n = n + v29; SLODWORD(n) >= 1065353216; n = n + flt_2001C )
        ;
      for ( j = 0; j < 8; ++j )
      {
        v9 = (float *)&v15[2 * j];
        v9[2] = v10 - v9[1] - *v9;
        v9[1] = v9[7] * v9[2] + v9[1];
        *v9 = v9[7] * v9[1] + *v9;
        v9[5] = v9[2] - v9[4] - v9[3];
        v9[4] = v9[7] * v9[5] + v9[4];
        v9[3] = v9[7] * v9[4] + v9[3];
        if ( j == 7 )
          v8 = v9[5] * flt_20020;
        else
          v8 = v9[3];
        v11 = *(float *)&v13[j + 8] * v8 + v11;
        *(float *)&v13[j + 8] = *(float *)&v13[j] + *(float *)&v13[j + 8];
      }
      v12 = v11 * flt_20024;
      if ( v12 < (double)flt_20028 )
        v12 = -32768.0;
      if ( SLODWORD(v12) > 1191181824 )
        v12 = 32767.0;
      _CHP(v7);
      v7 = (int)v12;
      *(_WORD *)&v21[2 * k + 2 * i * v19] = v7;
    }
  }
  v31 = sub_10731(aFickenRaw, byte_2002C);
  sub_10B8D(v21, v19 * (v18 - 1), 2, v31);
  v3 = fclose(v31);
  getch(v3);
  sub_10D8A((unsigned int)v21);
  sub_10D8A((unsigned int)v20);
  __asm { int     10h; - VIDEO - SET VIDEO MODE }
  return 0;
}
// 10087: variable 'v5' is possibly undefined
// 100B4: variable 'v6' is possibly undefined
// 1041B: variable 'v7' is possibly undefined
// 10B70: using guessed type double __cdecl _CHP(_DWORD);
// 10D6D: using guessed type int __fastcall getch(_DWORD);
// 20010: using guessed type float flt_20010;
// 20014: using guessed type float flt_20014;
// 20018: using guessed type float flt_20018;
// 2001C: using guessed type float flt_2001C;
// 20020: using guessed type float flt_20020;
// 20024: using guessed type float flt_20024;
// 20028: using guessed type float flt_20028;

//----- (000104AE) --------------------------------------------------------
void sub_104AE()
{
  word_2017C = __SS__;
}
// 2017C: using guessed type __int16 word_2017C;

//----- (000104F6) --------------------------------------------------------
int __fastcall sub_104F6(_BYTE *a1, bool *a2)
{
  _BYTE *v2; // ebx
  int v3; // ecx
  int v4; // ebp
  int v5; // esi
  int v6; // edi
  char v7; // al
  unsigned __int8 v9; // al
  int v11; // [esp+0h] [ebp-18h]

  v2 = a1;
  v3 = 1;
  v4 = 0;
  v5 = 0;
  v6 = 0;
  v11 = 0;
  if ( a2 )
    *a2 = dword_201E4 == 1;
  v7 = *a1;
  if ( *v2 < 0x72u )
  {
    if ( v7 == 97 )
    {
      LOBYTE(v11) = -126;
      goto LABEL_15;
    }
LABEL_14:
    sub_110D4(9);
    return 0;
  }
  if ( *v2 > 0x72u )
  {
    if ( v7 == 119 )
    {
      LOBYTE(v11) = 2;
      goto LABEL_15;
    }
    goto LABEL_14;
  }
  LOBYTE(v11) = 1;
LABEL_15:
  while ( 1 )
  {
    v9 = *++v2;
    if ( !*v2 || !v3 )
      break;
    if ( v9 < 0x63u )
    {
      if ( v9 >= 0x2Bu )
      {
        if ( v9 <= 0x2Bu )
        {
          if ( v4 )
            goto LABEL_28;
          v4 = 1;
          LOBYTE(v11) = v11 | 3;
        }
        else if ( v9 == 98 )
        {
          if ( v5 )
            goto LABEL_28;
          v5 = 1;
          LOBYTE(v11) = v11 | 0x40;
        }
      }
    }
    else if ( v9 <= 0x63u )
    {
      if ( v6 )
        goto LABEL_28;
      v6 = 1;
      *(_BYTE *)a2 |= 1u;
    }
    else if ( v9 >= 0x6Eu )
    {
      if ( v9 <= 0x6Eu )
      {
        if ( v6 )
        {
LABEL_28:
          v3 = 0;
        }
        else
        {
          v6 = 1;
          *(_BYTE *)a2 &= 0xFEu;
        }
      }
      else if ( v9 == 116 )
      {
        if ( v5 )
          goto LABEL_28;
        v5 = 1;
      }
    }
  }
  if ( !v5 && dword_203F1 == 512 )
    LOBYTE(v11) = v11 | 0x40;
  return v11;
}
// 201E4: using guessed type int dword_201E4;
// 203F1: using guessed type int dword_203F1;

//----- (00010611) --------------------------------------------------------
int __fastcall sub_10611(_BYTE *a1, unsigned __int8 a2, int a3, int a4, int a5, int a6)
{
  __int16 v7; // ax
  int v8; // eax
  __int16 v9; // ax
  int result; // eax
  int v11; // eax

  *(_BYTE *)(a6 + 12) &= 0xFCu;
  *(_DWORD *)(a6 + 12) |= a3;
  if ( (unsigned __int8)tolower(a2, a4) == 114 )
  {
    v7 = 0;
    if ( (a3 & 2) != 0 )
      v7 = 2;
    if ( (a3 & 0x40) != 0 )
      HIBYTE(v7) |= 2u;
    else
      HIBYTE(v7) |= 1u;
    v8 = sub_1113C(a1, v7, a5, 0);
  }
  else
  {
    v9 = ((a3 & 1) != 0) + 33;
    if ( (a3 & 0x80u) == 0 )
      LOBYTE(v9) = v9 | 0x40;
    else
      LOBYTE(v9) = v9 | 0x10;
    if ( (a3 & 0x40) != 0 )
      HIBYTE(v9) |= 2u;
    else
      HIBYTE(v9) |= 1u;
    v8 = sub_1113C(a1, v9, a5, 128);
  }
  *(_DWORD *)(a6 + 16) = v8;
  if ( *(_DWORD *)(a6 + 16) == -1 )
  {
    _freefp(a6);
    result = 0;
  }
  else
  {
    *(_DWORD *)(a6 + 4) = 0;
    v11 = *(_DWORD *)(a6 + 8);
    *(_DWORD *)(a6 + 20) = 0;
    *(_DWORD *)(v11 + 12) = 0;
    *(_DWORD *)(*(_DWORD *)(a6 + 8) + 16) = a4;
    *(_DWORD *)(*(_DWORD *)(a6 + 8) + 8) = 0;
    if ( (a3 & 0x80u) != 0 )
      sub_11534(a6, 0, 2u);
    _chktty(a6);
    result = a6;
  }
  return result;
}
// 1110A: using guessed type int __fastcall tolower(_DWORD, _DWORD);
// 11643: using guessed type int __fastcall _chktty(_DWORD);

//----- (000106ED) --------------------------------------------------------
int __fastcall sub_106ED(_BYTE *a1, unsigned __int8 *a2, int a3)
{
  int result; // eax
  int v7; // ebx
  char *v8; // eax
  int v9; // edx
  int v10; // [esp+0h] [ebp-10h] BYREF

  result = sub_104F6(a2, (bool *)&v10);
  v7 = result;
  if ( result )
  {
    v8 = sub_113DF();
    v9 = (int)v8;
    if ( v8 )
      v9 = sub_10611(a1, *a2, v7, v10, a3, (int)v8);
    result = v9;
  }
  return result;
}

//----- (00010731) --------------------------------------------------------
int __fastcall sub_10731(_BYTE *a1, unsigned __int8 *a2)
{
  return sub_106ED(a1, a2, 0);
}

//----- (0001073B) --------------------------------------------------------
int __fastcall sub_1073B(int a1)
{
  _DWORD *i; // eax
  int v3; // edx
  int *j; // edx
  int *v6; // eax
  int v7; // edx

  for ( i = (_DWORD *)dword_20CA0; i; i = (_DWORD *)*i )
  {
    v3 = i[1];
    if ( a1 == v3 )
    {
      if ( (*(_BYTE *)(v3 + 12) & 3) != 0 )
        sub_10AD2(a1, 1);
      return a1;
    }
  }
  for ( j = &dword_20CA4; ; j = (int *)*j )
  {
    v6 = (int *)*j;
    if ( !*j )
      break;
    if ( a1 == v6[1] )
    {
      *j = *v6;
      v7 = dword_20CA0;
      dword_20CA0 = (int)v6;
      *v6 = v7;
      return a1;
    }
  }
  sub_110D4(4);
  return 0;
}
// 20CA0: using guessed type int dword_20CA0;
// 20CA4: using guessed type int dword_20CA4;

//----- (000107F4) --------------------------------------------------------
int __fastcall sub_107F4(char *a1, unsigned int a2, int a3, int a4)
{
  int result; // eax
  int v6; // ebx
  unsigned int v7; // edx
  unsigned int v8; // edi
  int v9; // eax
  unsigned int v10; // ebx
  char v11; // cl
  int v12; // eax
  char *v13; // edx
  char *v14; // ebx
  unsigned __int8 *v15; // eax
  int v16; // esi
  int v17; // eax
  unsigned __int8 *v18; // eax
  int v19; // esi
  unsigned int v22; // [esp+8h] [ebp-14h]
  unsigned int v23; // [esp+Ch] [ebp-10h]

  if ( (*(_BYTE *)(a4 + 12) & 1) != 0 )
  {
    v6 = a2 * a3;
    if ( v6 )
    {
      if ( !*(_DWORD *)(*(_DWORD *)(a4 + 8) + 8) )
        _ioalloc(a4);
      v22 = 0;
      if ( (*(_BYTE *)(a4 + 12) & 0x40) != 0 )
      {
        v23 = v6;
        while ( 1 )
        {
          v7 = *(_DWORD *)(a4 + 4);
          if ( v7 )
          {
            if ( v7 > v23 )
              v7 = v23;
            qmemcpy(a1, *(const void **)a4, v7);
            a1 += v7;
            v22 += v7;
            v8 = *(_DWORD *)(a4 + 4) - v7;
            *(_DWORD *)a4 += v7;
            v23 -= v7;
            *(_DWORD *)(a4 + 4) = v8;
          }
          if ( !v23 )
            break;
          if ( v23 >= *(_DWORD *)(a4 + 20) || (*(_BYTE *)(a4 + 13) & 4) != 0 )
          {
            v9 = *(_DWORD *)(*(_DWORD *)(a4 + 8) + 8);
            *(_DWORD *)(a4 + 4) = 0;
            v10 = v23;
            v11 = *(_BYTE *)(a4 + 13);
            *(_DWORD *)a4 = v9;
            if ( (v11 & 4) == 0 && v23 > 0x200 )
              LOWORD(v10) = v23 & 0xFE00;
            v12 = _qread(*(_DWORD *)(a4 + 16), a1, v10);
            if ( v12 == -1 )
            {
              *(_BYTE *)(a4 + 12) |= 0x20u;
              break;
            }
            if ( !v12 )
              goto LABEL_22;
            a1 += v12;
            v23 -= v12;
            v22 += v12;
          }
          else if ( !sub_117F1(a4) )
          {
            break;
          }
        }
      }
      else
      {
        v13 = a1;
        v14 = &a1[v6];
        while ( *(_DWORD *)(a4 + 4) || sub_117F1(a4) )
        {
          v15 = *(unsigned __int8 **)a4;
          v16 = *(_DWORD *)a4 + 1;
          --*(_DWORD *)(a4 + 4);
          *(_DWORD *)a4 = v16;
          v17 = *v15;
          if ( v17 == 13 )
          {
            if ( !*(_DWORD *)(a4 + 4) && !sub_117F1(a4) )
              break;
            v18 = *(unsigned __int8 **)a4;
            v19 = *(_DWORD *)a4 + 1;
            --*(_DWORD *)(a4 + 4);
            *(_DWORD *)a4 = v19;
            v17 = *v18;
          }
          if ( v17 == 26 )
          {
LABEL_22:
            *(_BYTE *)(a4 + 12) |= 0x10u;
            break;
          }
          *v13++ = v17;
          ++v22;
          if ( v13 == v14 )
            break;
        }
      }
      result = v22 / a2;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    sub_110D4(4);
    result = 0;
    *(_BYTE *)(a4 + 12) |= 0x20u;
  }
  return result;
}
// 11674: using guessed type int __fastcall _ioalloc(_DWORD);
// 116FB: using guessed type int __fastcall _qread(_DWORD, _DWORD, _DWORD);

//----- (000109DA) --------------------------------------------------------
// fclose_
int __fastcall fclose(int a1)
{
  _DWORD *i; // eax

  for ( i = (_DWORD *)dword_20CA0; ; i = (_DWORD *)*i )
  {
    if ( !i )
      return -1;
    if ( a1 == i[1] )
      break;
  }
  return sub_10A07(a1, 1);
}
// 20CA0: using guessed type int dword_20CA0;

//----- (00010A07) --------------------------------------------------------
int __fastcall sub_10A07(int a1, int a2)
{
  int v3; // eax
  int v4; // edx

  sub_10AD2(a1, a2);
  v4 = v3;
  _freefp(a1);
  return v4;
}
// 10A0F: variable 'v3' is possibly undefined

//----- (00010A1C) --------------------------------------------------------
int __fastcall sub_10A1C(int a1)
{
  int result; // eax

  result = a1 + 48;
  if ( result > 57 )
    result += 39;
  return result;
}

//----- (00010A28) --------------------------------------------------------
int __fastcall sub_10A28(const char *a1, int a2)
{
  unsigned int v3; // eax
  _BYTE *v4; // edi
  unsigned int v5; // ebx
  char *v6; // esi
  char v7; // al
  char v8; // al
  char *v9; // ecx
  char *v10; // edx
  int result; // eax

  v3 = sub_118E7();
  v4 = a1;
  v5 = v3 | HIWORD(v3);
  v6 = sub_119E0();
  do
  {
    v7 = *v6;
    *v4 = *v6;
    if ( !v7 )
      break;
    v8 = v6[1];
    v6 += 2;
    v4[1] = v8;
    v4 += 2;
  }
  while ( v8 );
  v9 = (char *)&a1[strlen(a1)];
  v10 = v9 + 4;
  *v9 = 116;
  do
  {
    *v10-- = sub_10A1C(v5 & 0xF);
    v5 >>= 4;
  }
  while ( v10 != v9 );
  v9[5] = 95;
  v9[6] = sub_10A1C((a2 >> 4) & 0xF);
  result = sub_10A1C(a2 & 0xF);
  v9[8] = 46;
  v9[9] = 116;
  v9[10] = 109;
  v9[11] = 112;
  v9[12] = 0;
  v9[7] = result;
  return result;
}

//----- (00010AD2) --------------------------------------------------------
void __fastcall sub_10AD2(int a1, int a2)
{
  int v3; // eax
  char v4[180]; // [esp+0h] [ebp-B4h] BYREF

  if ( *(_DWORD *)(a1 + 12) )
  {
    if ( (*(_BYTE *)(a1 + 13) & 0x10) != 0 )
      sub_11AA8(a1);
    v3 = ftell(a1);
    if ( v3 != -1 )
      lseek(*(_DWORD *)(a1 + 16), v3, 0);
    if ( a2 )
      _close(*(_DWORD *)(a1 + 16));
    if ( (*(_BYTE *)(a1 + 12) & 8) != 0 )
    {
      sub_11C83(*(_DWORD *)(*(_DWORD *)(a1 + 8) + 8));
      *(_DWORD *)(*(_DWORD *)(a1 + 8) + 8) = 0;
    }
    if ( (*(_BYTE *)(a1 + 13) & 8) != 0 )
    {
      sub_10A28(v4, *(unsigned __int8 *)(*(_DWORD *)(a1 + 8) + 20));
      j_unlink();
    }
  }
  JUMPOUT(0x10ACC);
}
// 10B6B: control flows out of bounds to 10ACC
// 11BA6: using guessed type int __fastcall ftell(_DWORD);
// 11BE9: using guessed type int __fastcall lseek(_DWORD, _DWORD, _DWORD);
// 11C4E: using guessed type int __fastcall _close(_DWORD);
// 11D7E: using guessed type int j_unlink(void);

//----- (00010B8D) --------------------------------------------------------
int __fastcall sub_10B8D(char *a1, unsigned int a2, int a3, int a4)
{
  int v6; // edi
  int v7; // ecx
  char v8; // dl
  unsigned int v9; // ebx
  int v10; // eax
  unsigned int v11; // edx
  char *v12; // eax
  int v13; // ecx
  char v14; // bh
  char v15; // bh
  int v16; // eax
  char v17; // bl
  int v18; // eax
  unsigned __int8 *v19; // ebx
  int v20; // esi
  char v21; // dh
  int v24; // [esp+8h] [ebp-18h]
  unsigned int v25; // [esp+Ch] [ebp-14h]
  unsigned int v26; // [esp+10h] [ebp-10h]

  if ( (*(_BYTE *)(a4 + 12) & 2) == 0 )
  {
    sub_110D4(4);
    *(_BYTE *)(a4 + 12) |= 0x20u;
    return 0;
  }
  v6 = a2 * a3;
  if ( !(a2 * a3) )
    return 0;
  if ( !*(_DWORD *)(*(_DWORD *)(a4 + 8) + 8) )
    _ioalloc(a4);
  v7 = 0;
  v8 = *(_BYTE *)(a4 + 12) & 0xCF;
  v25 = 0;
  v24 = *(_DWORD *)(a4 + 12) & 0x30;
  *(_BYTE *)(a4 + 12) = v8;
  if ( (v8 & 0x40) != 0 )
  {
    v26 = v6;
    while ( 1 )
    {
      if ( *(_DWORD *)(a4 + 4) || v26 < *(_DWORD *)(a4 + 20) )
      {
        v11 = *(_DWORD *)(a4 + 20) - *(_DWORD *)(a4 + 4);
        if ( v11 > v26 )
          v11 = v26;
        qmemcpy(*(void **)a4, a1, v11);
        v12 = *(char **)a4;
        v13 = *(_DWORD *)(a4 + 20);
        *(_DWORD *)(a4 + 4) += v11;
        v14 = *(_BYTE *)(a4 + 13);
        *(_DWORD *)a4 = &v12[v11];
        v15 = v14 | 0x10;
        v16 = *(_DWORD *)(a4 + 4);
        *(_BYTE *)(a4 + 13) = v15;
        if ( v16 == v13 || (v15 & 4) != 0 )
          sub_11AA8(a4);
        goto LABEL_22;
      }
      v9 = v26 & 0xFFFFFE00;
      if ( (v26 & 0xFFFFFE00) == 0 )
        v9 = v26;
      v10 = _qwrite(*(_DWORD *)(a4 + 16), a1, v9);
      v11 = v10;
      if ( v10 != -1 )
      {
        if ( v10 )
          goto LABEL_22;
        *(_DWORD *)sub_11DF7() = 12;
      }
      *(_BYTE *)(a4 + 12) |= 0x20u;
LABEL_22:
      a1 += v11;
      v25 += v11;
      v26 -= v11;
      if ( !v26 || (*(_BYTE *)(a4 + 12) & 0x20) != 0 )
        goto LABEL_32;
    }
  }
  v17 = *(_BYTE *)(a4 + 13);
  if ( (v17 & 4) != 0 )
  {
    *(_BYTE *)(a4 + 13) = v17 & 0xFA;
    v7 = 1;
    *(_BYTE *)(a4 + 13) = v17 & 0xFA | 1;
  }
  v18 = *(_DWORD *)(a4 + 8);
  v19 = (unsigned __int8 *)a1;
  v20 = *(_DWORD *)(v18 + 12);
  *(_DWORD *)(v18 + 12) = 1;
  do
  {
    sub_11E03(*v19++, a4);
    if ( (*(_BYTE *)(a4 + 12) & 0x30) != 0 )
      break;
    ++v25;
  }
  while ( v6 != v25 );
  *(_DWORD *)(*(_DWORD *)(a4 + 8) + 12) = v20;
  if ( v7 )
  {
    v21 = *(_BYTE *)(a4 + 13) & 0xFA;
    *(_BYTE *)(a4 + 13) = v21;
    *(_BYTE *)(a4 + 13) = v21 | 4;
    sub_11AA8(a4);
  }
LABEL_32:
  if ( (*(_BYTE *)(a4 + 12) & 0x20) != 0 )
    v25 = 0;
  *(_DWORD *)(a4 + 12) |= v24;
  return v25 / a2;
}
// 11674: using guessed type int __fastcall _ioalloc(_DWORD);
// 11D83: using guessed type int __fastcall _qwrite(_DWORD, _DWORD, _DWORD);

//----- (00010D8A) --------------------------------------------------------
unsigned int __fastcall sub_10D8A(unsigned int result)
{
  if ( result )
    result = sub_11C83(result);
  return result;
}

//----- (000110D4) --------------------------------------------------------
_DWORD *__fastcall sub_110D4(int a1)
{
  _DWORD *result; // eax

  result = sub_11DF7();
  *result = a1;
  return result;
}

//----- (000110E7) --------------------------------------------------------
_DWORD *sub_110E7()
{
  return sub_110D4(14);
}

//----- (000110FE) --------------------------------------------------------
_DWORD *__fastcall sub_110FE(int a1)
{
  _DWORD *result; // eax

  result = sub_11DFD();
  *result = a1;
  return result;
}

//----- (0001113C) --------------------------------------------------------
int __cdecl sub_1113C(_BYTE *a1, __int16 a2, int a3, char a4)
{
  int v4; // ecx
  int v6[4]; // [esp+0h] [ebp-10h] BYREF

  v6[2] = v4;
  v6[0] = (int)&a4;
  return sub_11163(a1, a2, a3, v6);
}
// 1113D: variable 'v4' is possibly undefined

//----- (00011163) --------------------------------------------------------
int __fastcall sub_11163(_BYTE *a1, __int16 a2, int a3, int *a4)
{
  int v6; // edi
  int v9; // eax
  int v16; // ebx
  int v17; // eax
  int v22; // eax
  int v23; // edx
  int v24; // eax
  int v27; // [esp+8h] [ebp-18h]
  int v28; // [esp+Ch] [ebp-14h]

  while ( *a1 == 32 )
    ++a1;
  v28 = a2 & 0x83;
  _EAX = (unsigned __int8)(a3 | a2 & 0x83);
  v6 = -1;
  BYTE1(_EAX) = 61;
  __asm
  {
    int     21h; DOS - 2+ - OPEN DISK FILE WITH HANDLE
    rcl     eax, 1
  }
  _EAX = __ROR4__(_EAX, 1);
  LOWORD(v27) = _EAX;
  if ( _EAX >= 0 )
  {
    v6 = (unsigned __int16)_EAX;
    if ( (unsigned __int16)_EAX >= (unsigned int)dword_20588 )
      goto LABEL_5;
  }
  if ( (a2 & 3) != 0 && v6 != -1 )
  {
    _EAX = isatty(v6);
    if ( !_EAX )
    {
      if ( (a2 & 0x400) != 0 && (a2 & 0x20) != 0 )
      {
        BYTE1(_EAX) = 62;
        __asm
        {
          int     21h; DOS - 2+ - CLOSE A FILE WITH HANDLE
          rcl     eax, 1
        }
        v9 = 7;
        goto LABEL_6;
      }
      if ( (a2 & 0x40) != 0 )
      {
        BYTE1(_EAX) = 64;
        __asm
        {
          int     21h; DOS - 2+ - WRITE TO FILE WITH HANDLE
          rcl     eax, 1
        }
        _EAX = __ROR4__(_EAX, 1);
        LOWORD(v27) = _EAX;
        if ( _EAX < 0 )
        {
          BYTE1(_EAX) = 62;
          __asm
          {
            int     21h; DOS - 2+ - CLOSE A FILE WITH HANDLE
            rcl     eax, 1
          }
          return sub_13013((unsigned __int16)v27);
        }
      }
    }
  }
  if ( v6 == -1 )
  {
    if ( (a2 & 0x20) == 0 || (_WORD)v27 != 2 )
      return sub_13013((unsigned __int16)v27);
    v16 = *a4 + 4;
    *a4 = v16;
    v17 = *(_DWORD *)(v16 - 4);
    *a4 = 0;
    if ( !v17 )
      v17 = 384;
    _EAX = ~dword_205F4 & v17;
    BYTE1(_EAX) = 60;
    __asm
    {
      int     21h; DOS - 2+ - CREATE A FILE WITH HANDLE (CREAT)
      rcl     eax, 1
    }
    _EAX = __ROR4__(_EAX, 1);
    LOWORD(v27) = _EAX;
    if ( _EAX < 0 )
      return sub_13013((unsigned __int16)v27);
    v6 = (unsigned __int16)_EAX;
    if ( (unsigned __int16)_EAX >= (unsigned int)dword_20588 )
    {
LABEL_5:
      BYTE1(_EAX) = 62;
      __asm
      {
        int     21h; DOS - 2+ - CLOSE A FILE WITH HANDLE
        rcl     eax, 1
      }
      v9 = 11;
LABEL_6:
      sub_110D4(v9);
      return -1;
    }
    if ( a3 )
    {
      BYTE1(_EAX) = 62;
      __asm
      {
        int     21h; DOS - 2+ - CLOSE A FILE WITH HANDLE
        rcl     eax, 1
      }
      _EAX = __ROR4__(_EAX, 1);
      LOWORD(v27) = _EAX;
      if ( _EAX < 0 )
        return sub_13013((unsigned __int16)v27);
      LOBYTE(_EAX) = a3 | v28;
      BYTE1(_EAX) = 61;
      __asm
      {
        int     21h; DOS - 2+ - OPEN DISK FILE WITH HANDLE
        rcl     eax, 1
      }
      v27 = __ROR4__(_EAX, 1);
      if ( v27 < 0 )
        return sub_13013((unsigned __int16)v27);
      v6 = (unsigned __int16)v27;
    }
  }
  v22 = sub_12F74(v6);
  LOBYTE(v22) = v22 & 0x3C;
  v23 = v22;
  if ( isatty(v6) )
    BYTE1(v23) |= 0x20u;
  LOBYTE(v28) = v28 & 0x7F;
  if ( v28 == 2 )
    LOBYTE(v23) = v23 | 3;
  if ( !v28 )
    LOBYTE(v23) = v23 | 1;
  if ( v28 == 1 )
    LOBYTE(v23) = v23 | 2;
  if ( (a2 & 0x10) != 0 )
    LOBYTE(v23) = v23 | 0x80;
  v24 = v23;
  if ( (a2 & 0x300) != 0 )
  {
    if ( (a2 & 0x200) != 0 )
      goto LABEL_42;
  }
  else if ( dword_203F1 == 512 )
  {
LABEL_42:
    LOBYTE(v24) = v23 | 0x40;
    v23 = v24;
    goto LABEL_43;
  }
LABEL_43:
  sub_12FC9(v6, v23);
  return v6;
}
// 12FEA: using guessed type int __fastcall isatty(_DWORD);
// 203F1: using guessed type int dword_203F1;
// 20588: using guessed type int dword_20588;
// 205F4: using guessed type int dword_205F4;

//----- (000113DF) --------------------------------------------------------
char *sub_113DF()
{
  int *v0; // esi
  char *i; // ecx
  int v2; // edi
  int v3; // eax
  int v4; // eax
  char *result; // eax

  v0 = (int *)dword_20CA4;
  if ( dword_20CA4 )
  {
    i = *(char **)(dword_20CA4 + 4);
    v2 = *((_DWORD *)i + 3) & 0x4003;
    dword_20CA4 = *(_DWORD *)dword_20CA4;
    LOWORD(v2) = v2 | 3;
LABEL_11:
    memset(i, 0, 26);
    *((_DWORD *)i + 3) = v2;
    v0[1] = (int)i;
    v4 = dword_20CA0;
    *((_DWORD *)i + 2) = v0;
    dword_20CA0 = (int)v0;
    *v0 = v4;
    result = i;
  }
  else
  {
    for ( i = (char *)&unk_201E8; i < &byte_203F0; i += 26 )
    {
      if ( (i[12] & 3) == 0 )
      {
        v0 = (int *)nmalloc(21);
        if ( v0 )
        {
          v2 = 3;
          goto LABEL_11;
        }
        goto LABEL_12;
      }
    }
    v2 = 16387;
    v3 = nmalloc(47);
    v0 = (int *)v3;
    if ( v3 )
    {
      i = (char *)(v3 + 21);
      goto LABEL_11;
    }
LABEL_12:
    sub_110D4(5);
    result = 0;
  }
  return result;
}
// 13077: using guessed type int __fastcall nmalloc(_DWORD);
// 13158: using guessed type int __fastcall memset(_DWORD, _DWORD, _DWORD);
// 203F0: using guessed type char byte_203F0;
// 20CA0: using guessed type int dword_20CA0;
// 20CA4: using guessed type int dword_20CA4;

//----- (00011488) --------------------------------------------------------
// __freefp_
int *__fastcall _freefp(int a1)
{
  int *i; // edx
  int *result; // eax
  int v4; // ecx
  int v5; // edx

  for ( i = &dword_20CA0; ; i = (int *)*i )
  {
    result = (int *)*i;
    if ( !*i )
      break;
    v4 = result[1];
    if ( a1 == v4 )
    {
      *(_BYTE *)(a1 + 12) = *(_BYTE *)(v4 + 12) | 3;
      *i = *result;
      v5 = dword_20CA4;
      dword_20CA4 = (int)result;
      *result = v5;
      return result;
    }
  }
  return result;
}
// 20CA0: using guessed type int dword_20CA0;
// 20CA4: using guessed type int dword_20CA4;

//----- (000114DF) --------------------------------------------------------
int __fastcall sub_114DF(int a1, int a2)
{
  int v2; // edi
  int v3; // esi
  int v4; // edi
  int result; // eax

  if ( a1 > *(_DWORD *)(a2 + 4) || a1 < *(_DWORD *)(*(_DWORD *)(a2 + 8) + 8) - *(_DWORD *)a2 )
    return 1;
  v2 = *(_DWORD *)(a2 + 4);
  v3 = a1 + *(_DWORD *)a2;
  *(_BYTE *)(a2 + 12) &= 0xEFu;
  v4 = v2 - a1;
  *(_DWORD *)a2 = v3;
  result = 0;
  *(_DWORD *)(a2 + 4) = v4;
  return result;
}

//----- (0001151E) --------------------------------------------------------
int __fastcall sub_1151E(int result)
{
  int v1; // edx

  *(_BYTE *)(result + 12) &= 0xEFu;
  v1 = *(_DWORD *)(*(_DWORD *)(result + 8) + 8);
  *(_DWORD *)(result + 4) = 0;
  *(_DWORD *)result = v1;
  return result;
}

//----- (00011534) --------------------------------------------------------
int __fastcall sub_11534(int a1, int a2, unsigned int a3)
{
  int v4; // esi
  int result; // eax
  int v6; // eax
  int v7; // edi
  int v8; // eax
  int v9; // eax
  int v10; // eax

  v4 = a2;
  if ( (*(_BYTE *)(a1 + 12) & 6) != 0 )
  {
    if ( (*(_BYTE *)(a1 + 13) & 0x10) != 0 )
    {
      if ( sub_11AA8(a1) )
      {
        if ( a3 || a2 >= 0 )
          return -1;
        goto LABEL_6;
      }
    }
    else
    {
      if ( a3 == 1 )
        v4 = a2 - *(_DWORD *)(a1 + 4);
      v6 = *(_DWORD *)(*(_DWORD *)(a1 + 8) + 8);
      *(_DWORD *)(a1 + 4) = 0;
      *(_DWORD *)a1 = v6;
    }
    *(_BYTE *)(a1 + 12) &= 0xEBu;
    result = lseek(*(_DWORD *)(a1 + 16), v4, a3);
    if ( result == -1 )
      return result;
    return 0;
  }
  if ( !a3 )
  {
    v8 = tell(*(_DWORD *)(a1 + 16));
    if ( !sub_114DF(a2 - (v8 - *(_DWORD *)(a1 + 4)), a1) )
      return 0;
    result = lseek(*(_DWORD *)(a1 + 16), a2, 0);
    if ( result == -1 )
      return result;
    goto LABEL_20;
  }
  if ( a3 <= 1 )
  {
    v7 = *(_DWORD *)(a1 + 4);
    if ( !sub_114DF(a2, a1) )
      return 0;
    result = lseek(*(_DWORD *)(a1 + 16), a2 - v7, a3);
    if ( result == -1 )
      return result;
LABEL_20:
    sub_1151E(a1);
    return 0;
  }
  if ( a3 != 2 )
  {
LABEL_6:
    sub_110D4(9);
    return -1;
  }
  v9 = *(_DWORD *)(a1 + 8);
  *(_BYTE *)(a1 + 12) &= 0xEFu;
  *(_DWORD *)a1 = *(_DWORD *)(v9 + 8);
  v10 = *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 4) = 0;
  result = lseek(v10, a2, 2);
  if ( result != -1 )
    return 0;
  return result;
}
// 11BE9: using guessed type int __fastcall lseek(_DWORD, _DWORD, _DWORD);
// 13170: using guessed type int __fastcall tell(_DWORD);

//----- (000117C2) --------------------------------------------------------
// __filbuf_
int __fastcall _filbuf(int *a1)
{
  int v3; // ecx

  if ( !sub_117F1((int)a1) )
    return -1;
  v3 = *a1 + 1;
  --a1[1];
  *a1 = v3;
  return *(unsigned __int8 *)(v3 - 1);
}

//----- (000117F1) --------------------------------------------------------
int __fastcall sub_117F1(int a1)
{
  char v2; // ah
  int v3; // eax
  int v4; // eax
  int v5; // ebx
  int v6; // esi
  char v7; // bh

  if ( !*(_DWORD *)(*(_DWORD *)(a1 + 8) + 8) )
    _ioalloc(a1);
  v2 = *(_BYTE *)(a1 + 13);
  if ( (v2 & 0x20) != 0 && (v2 & 6) != 0 )
    _flushall(0x2000);
  v3 = *(_DWORD *)(a1 + 8);
  *(_BYTE *)(a1 + 12) &= 0xFBu;
  *(_DWORD *)a1 = *(_DWORD *)(v3 + 8);
  if ( (*(_DWORD *)(a1 + 12) & 0x2400) != 9216 || *(_DWORD *)(a1 + 16) )
  {
    if ( (*(_BYTE *)(a1 + 13) & 4) != 0 )
      v5 = 1;
    else
      v5 = *(_DWORD *)(a1 + 20);
    *(_DWORD *)(a1 + 4) = _qread(*(_DWORD *)(a1 + 16), *(_DWORD *)a1, v5);
  }
  else
  {
    *(_DWORD *)(a1 + 4) = 0;
    v4 = getche();
    if ( v4 != -1 )
    {
      **(_BYTE **)a1 = v4;
      *(_DWORD *)(a1 + 4) = 1;
      return *(_DWORD *)(a1 + 4);
    }
  }
  v6 = *(_DWORD *)(a1 + 4);
  if ( v6 <= 0 )
  {
    if ( v6 )
    {
      v7 = *(_BYTE *)(a1 + 12);
      *(_DWORD *)(a1 + 4) = 0;
      *(_BYTE *)(a1 + 12) = v7 | 0x20;
    }
    else
    {
      *(_BYTE *)(a1 + 12) |= 0x10u;
    }
  }
  return *(_DWORD *)(a1 + 4);
}
// 11674: using guessed type int __fastcall _ioalloc(_DWORD);
// 116FB: using guessed type int __fastcall _qread(_DWORD, _DWORD, _DWORD);
// 13186: using guessed type int __fastcall _flushall(_DWORD);
// 131B5: using guessed type int getche(void);

//----- (000118E7) --------------------------------------------------------
int sub_118E7()
{
  return dword_201B0;
}
// 201B0: using guessed type int dword_201B0;

//----- (000119E0) --------------------------------------------------------
char *sub_119E0()
{
  char **i; // ebx
  const char *v1; // eax
  char *v2; // edi
  char *v3; // esi
  char v4; // al
  char v5; // al
  unsigned int v6; // kr08_4
  char v7; // bl

  if ( !byte_2040C[0] )
  {
    for ( i = off_203F8; **i; ++i )
    {
      v1 = (const char *)getenv();
      if ( v1 && strlen(v1) <= 0x8F )
      {
        fullpath(byte_2040C, v1, 143);
        break;
      }
    }
    if ( !byte_2040C[0] )
    {
      v2 = byte_2040C;
      v3 = (char *)sub_13564(0, 0);
      do
      {
        v4 = *v3;
        *v2 = *v3;
        if ( !v4 )
          break;
        v5 = v3[1];
        v3 += 2;
        v2[1] = v5;
        v2 += 2;
      }
      while ( v5 );
    }
    v6 = strlen(byte_2040C) + 1;
    v7 = byte_2040C[v6 - 2];
    if ( v7 != 92 && v7 != 47 )
    {
      byte_2040C[v6 - 1] = 92;
      byte_2040C[v6] = 0;
    }
  }
  return byte_2040C;
}
// 1323B: using guessed type int getenv(void);
// 13295: using guessed type int __fastcall fullpath(_DWORD, _DWORD, _DWORD);
// 13564: using guessed type int __fastcall sub_13564(_DWORD, _DWORD);
// 203F8: using guessed type char *off_203F8[4];

//----- (00011AA8) --------------------------------------------------------
int __fastcall sub_11AA8(int a1)
{
  int v2; // ebp
  char v3; // al
  int v4; // edi
  int v5; // edi
  int i; // esi
  int v7; // eax
  int v8; // edx
  int v9; // eax
  int v10; // eax

  v2 = 0;
  if ( (*(_BYTE *)(a1 + 13) & 0x10) != 0 )
  {
    v3 = *(_BYTE *)(a1 + 12);
    *(_BYTE *)(a1 + 13) &= 0xEFu;
    if ( (v3 & 2) != 0 )
    {
      v4 = *(_DWORD *)(a1 + 8);
      if ( *(_DWORD *)(v4 + 8) )
      {
        v5 = *(_DWORD *)(v4 + 8);
        for ( i = *(_DWORD *)(a1 + 4); i && !v2; i -= v8 )
        {
          v7 = _qwrite(*(_DWORD *)(a1 + 16), v5, i);
          v8 = v7;
          if ( v7 == -1 )
          {
            v2 = -1;
            *(_BYTE *)(a1 + 12) |= 0x20u;
          }
          else if ( !v7 )
          {
            sub_110D4(12);
            v2 = -1;
            *(_BYTE *)(a1 + 12) |= 0x20u;
          }
          v5 += v8;
        }
      }
    }
  }
  else if ( *(_DWORD *)(*(_DWORD *)(a1 + 8) + 8) )
  {
    *(_BYTE *)(a1 + 12) &= 0xEFu;
    if ( (*(_BYTE *)(a1 + 13) & 0x20) == 0 )
    {
      v9 = *(_DWORD *)(a1 + 4);
      if ( v9 )
        v9 = lseek(*(_DWORD *)(a1 + 16), -v9, 1);
      if ( v9 == -1 )
      {
        v2 = -1;
        *(_BYTE *)(a1 + 12) |= 0x20u;
      }
    }
  }
  v10 = *(_DWORD *)(*(_DWORD *)(a1 + 8) + 8);
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)a1 = v10;
  if ( !v2 && (*(_BYTE *)(*(_DWORD *)(a1 + 8) + 16) & 1) != 0 && j__dos_commit(*(_DWORD *)(a1 + 16)) == -1 )
    v2 = -1;
  return v2;
}
// 11BE9: using guessed type int __fastcall lseek(_DWORD, _DWORD, _DWORD);
// 11D83: using guessed type int __fastcall _qwrite(_DWORD, _DWORD, _DWORD);
// 135F4: using guessed type int __fastcall j__dos_commit(_DWORD);

//----- (00011C83) --------------------------------------------------------
unsigned int __fastcall sub_11C83(unsigned int result)
{
  unsigned int v1; // esi
  _DWORD *i; // ecx

  v1 = result;
  if ( result )
  {
    i = (_DWORD *)dword_20CA8;
    if ( dword_20CA8 )
    {
      if ( dword_20CA8 <= result && dword_20CA8 + *(_DWORD *)dword_20CA8 > result )
        goto LABEL_26;
      result = dword_20CA8;
      i = *(_DWORD **)(dword_20CA8 + 4);
      if ( i )
      {
        if ( (unsigned int)i <= v1 && (unsigned int)i + *i > v1 )
          goto LABEL_26;
      }
      i = *(_DWORD **)(dword_20CA8 + 8);
      if ( i )
      {
        if ( (unsigned int)i <= v1 )
        {
          result = (unsigned int)i + *i;
          if ( result > v1 )
            goto LABEL_26;
        }
      }
    }
    i = (_DWORD *)dword_205FC;
    if ( dword_205FC
      && (dword_205FC <= v1 && dword_205FC + *(_DWORD *)dword_205FC > v1
       || (result = dword_205FC, (i = *(_DWORD **)(dword_205FC + 4)) != 0)
       && (unsigned int)i <= v1
       && (unsigned int)i + *i > v1
       || (i = *(_DWORD **)(dword_205FC + 8)) != 0
       && (unsigned int)i <= v1
       && (result = (unsigned int)i + *i, result > v1)) )
    {
LABEL_26:
      result = _MemFree(v1, (unsigned __int16)__DS__, i);
      dword_20CA8 = (int)i;
      if ( (unsigned int)i < dword_205FC )
      {
        result = i[5];
        if ( result > dword_20600 )
          dword_20600 = i[5];
      }
      BYTE1(result) = 0;
      byte_20CE0 = 0;
    }
    else
    {
      for ( i = (_DWORD *)dword_205F8; i; i = (_DWORD *)i[2] )
      {
        if ( (unsigned int)i <= v1 )
        {
          result = (unsigned int)i + *i;
          if ( result > v1 )
            goto LABEL_26;
        }
      }
    }
  }
  return result;
}
// 136C0: using guessed type int __fastcall _MemFree(_DWORD, _DWORD, _DWORD);
// 205F8: using guessed type int dword_205F8;
// 205FC: using guessed type int dword_205FC;
// 20600: using guessed type int dword_20600;
// 20CA8: using guessed type int dword_20CA8;
// 20CE0: using guessed type char byte_20CE0;

//----- (00011DF7) --------------------------------------------------------
void *sub_11DF7()
{
  return &unk_20CAC;
}

//----- (00011DFD) --------------------------------------------------------
void *sub_11DFD()
{
  return &unk_20CB0;
}

//----- (00011E03) --------------------------------------------------------
int __fastcall sub_11E03(int a1, int a2)
{
  int v3; // eax
  int v4; // ecx
  int v6; // ecx
  int v7; // eax
  int v8; // esi
  int v9; // ebp
  int v10; // ebp
  int v11; // eax

  v3 = *(_DWORD *)(a2 + 8);
  v4 = *(_DWORD *)(v3 + 12);
  if ( v4 != 1 )
  {
    if ( v4 )
      return -1;
    *(_DWORD *)(v3 + 12) = 1;
  }
  if ( (*(_BYTE *)(a2 + 12) & 2) == 0 )
  {
    sub_110D4(4);
    *(_BYTE *)(a2 + 12) |= 0x20u;
    return -1;
  }
  if ( !*(_DWORD *)(*(_DWORD *)(a2 + 8) + 8) )
    _ioalloc(a2);
  v6 = 1024;
  if ( a1 == 10 )
  {
    v6 = 1536;
    if ( (*(_BYTE *)(a2 + 12) & 0x40) == 0 )
    {
      *(_BYTE *)(a2 + 13) |= 0x10u;
      **(_BYTE **)a2 = 13;
      v7 = *(_DWORD *)(a2 + 4);
      ++*(_DWORD *)a2;
      ++v7;
      v8 = *(_DWORD *)(a2 + 20);
      *(_DWORD *)(a2 + 4) = v7;
      if ( v7 == v8 )
      {
        if ( sub_11AA8(a2) )
          return -1;
      }
    }
  }
  *(_BYTE *)(a2 + 13) |= 0x10u;
  **(_BYTE **)a2 = a1;
  v9 = *(_DWORD *)(a2 + 4);
  ++*(_DWORD *)a2;
  v10 = v9 + 1;
  v11 = *(_DWORD *)(a2 + 12);
  *(_DWORD *)(a2 + 4) = v10;
  if ( (v11 & v6) != 0 || v10 == *(_DWORD *)(a2 + 20) )
  {
    if ( sub_11AA8(a2) )
      return -1;
  }
  return (unsigned __int8)a1;
}
// 11674: using guessed type int __fastcall _ioalloc(_DWORD);

//----- (00011F23) --------------------------------------------------------
int (**__fastcall sub_11F23(int (**result)(void)))(void)
{
  if ( *result )
    result = (int (**)(void))(*result)();
  return result;
}

//----- (00011F2F) --------------------------------------------------------
char *__fastcall sub_11F2F(unsigned __int8 a1)
{
  char *result; // eax
  char *v3; // ebx
  unsigned __int8 v4; // dl

  while ( 1 )
  {
    result = (char *)&unk_20B3E;
    v3 = byte_20B86;
    v4 = a1;
    while ( result < byte_20B86 )
    {
      if ( *result != 2 && v4 >= (unsigned __int8)result[1] )
      {
        v3 = result;
        v4 = result[1];
      }
      result += 6;
    }
    if ( v3 == byte_20B86 )
      break;
    sub_11F23((int (**)(void))(v3 + 2));
    *v3 = 2;
  }
  return result;
}

//----- (00011F7B) --------------------------------------------------------
char *__fastcall sub_11F7B(unsigned __int8 a1, unsigned __int8 a2)
{
  char *result; // eax
  char *v5; // ebx
  unsigned __int8 v6; // dl

  while ( 1 )
  {
    result = byte_20B86;
    v5 = byte_20B98;
    v6 = a1;
    while ( result < byte_20B98 )
    {
      if ( *result != 2 && v6 <= (unsigned __int8)result[1] )
      {
        v5 = result;
        v6 = result[1];
      }
      result += 6;
    }
    if ( v5 == byte_20B98 )
      break;
    if ( a2 >= (unsigned __int8)v5[1] )
      sub_11F23((int (**)(void))(v5 + 2));
    *v5 = 2;
  }
  return result;
}

//----- (00012BA0) --------------------------------------------------------
char __fastcall sub_12BA0(int a1, int a2, int a3, int a4)
{
  int *v4; // ebx
  int v5; // eax
  __int64 v7; // [esp+0h] [ebp-8h] BYREF

  byte_2019C = 3;
  byte_20580 = 1;
  __asm { smsw    word_2057E }
  word_2057E &= 6u;
  __sidt(&v7);
  v4 = (int *)(*(_DWORD *)((char *)&v7 + 2) + 56);
  if ( byte_201D4 )
  {
    sub_12C6B();
    __ES__ = word_20196;
    *MK_FP(word_20196, v4) = a2;
    v4[1] = a4;
    LOBYTE(v5) = sub_12CD5();
  }
  else if ( byte_201D2 )
  {
    if ( byte_201D2 == 9 )
    {
      sub_12C6B();
      *v4 = a2;
      v4[1] = a4;
      LOBYTE(v5) = (*(int (__fastcall **)(int))(dword_20190 + 48))(3586);
    }
    else if ( byte_201D2 == 1 )
    {
      LOBYTE(v5) = sub_171B8(0, word_20194);
    }
    else
    {
      LOWORD(a2) = 0;
      LOBYTE(v5) = sub_171B8(0, 0);
      if ( (_BYTE)v5 != 1 )
        LOBYTE(v5) = sub_12C88(v5, a2, (int)v4);
    }
  }
  else
  {
    HIDWORD(v7) = (unsigned __int16)__DS__;
    __asm { int     21h; DOS - SET INTERRUPT VECTOR }
    LOBYTE(v5) = 4;
    __asm { int     21h; DOS - Novell Advanced NetWare 2.0+ - FILE SERVER FILE COPY }
  }
  return v5;
}
// 12C65: variable 'v5' is possibly undefined
// 20190: using guessed type int dword_20190;
// 20194: using guessed type __int16 word_20194;
// 20196: using guessed type __int16 word_20196;
// 2019C: using guessed type char byte_2019C;
// 201D2: using guessed type char byte_201D2;
// 201D4: using guessed type char byte_201D4;
// 2057E: using guessed type __int16 word_2057E;
// 20580: using guessed type char byte_20580;

//----- (00012C6B) --------------------------------------------------------
void sub_12C6B()
{
  ;
}

//----- (00012C88) --------------------------------------------------------
__int16 __fastcall sub_12C88(int a1, int a2, int a3)
{
  __int16 result; // ax
  unsigned __int32 v4; // ecx

  __asm { int     21h; DOS - SET INTERRUPT VECTOR }
  dword_20578 = a3;
  word_2057C = __ES__;
  result = 9476;
  if ( byte_201D2 < 3 )
  {
    __asm { int     21h; DOS - }
    v4 = __readcr0();
    __writecr0((v4 | 4) & 0xFFFFFFFD);
  }
  else
  {
    __asm { int     21h; DOS - SET INTERRUPT VECTOR }
    result = sub_12CD5();
  }
  return result;
}
// 201D2: using guessed type char byte_201D2;
// 20578: using guessed type int dword_20578;
// 2057C: using guessed type __int16 word_2057C;

//----- (00012CD5) --------------------------------------------------------
__int16 sub_12CD5()
{
  __int16 result; // ax

  result = 9525;
  __asm { int     21h; DOS - SET INTERRUPT VECTOR }
  dword_20538 |= 4u;
  dword_20538 &= 0xFFFFFFFD;
  __asm { int     21h; DOS - }
  return result;
}
// 20538: using guessed type int dword_20538;

//----- (00012D6F) --------------------------------------------------------
__int16 sub_12D6F()
{
  __int16 result; // ax
  unsigned __int32 v1; // ecx

  result = 9476;
  __asm { int     21h; DOS - SET INTERRUPT VECTOR }
  if ( byte_201D2 >= 3 )
    return sub_12DAA();
  v1 = __readcr0();
  v1 &= 0xFFFFFFF9;
  LOWORD(v1) = word_2057E | v1;
  __writecr0(v1);
  return result;
}
// 201D2: using guessed type char byte_201D2;
// 20578: using guessed type int dword_20578;
// 2057C: using guessed type __int16 word_2057C;
// 2057E: using guessed type __int16 word_2057E;

//----- (00012DAA) --------------------------------------------------------
__int16 sub_12DAA()
{
  __int16 result; // ax

  result = 9525;
  __asm { int     21h; DOS - SET INTERRUPT VECTOR }
  dword_20538 = (unsigned __int16)word_2057E;
  __asm { int     21h; DOS - }
  return result;
}
// 20538: using guessed type int dword_20538;
// 2057E: using guessed type __int16 word_2057E;

//----- (00012DCB) --------------------------------------------------------
int __fastcall sub_12DCB(int result)
{
  __asm { fsave   byte ptr [eax] }
  return result;
}

//----- (00012DD0) --------------------------------------------------------
int __fastcall sub_12DD0(int result)
{
  __asm { frstor  byte ptr [eax] }
  return result;
}

//----- (00012DD4) --------------------------------------------------------
// __init_8087_
int _init_8087()
{
  if ( byte_2019D )
  {
    off_2069C[0] = (int (*)())sub_12DCB;
    off_206A0 = (int (*)())sub_12DD0;
  }
  return _init_80x87((unsigned __int16)word_20698);
}
// 172DC: using guessed type int __fastcall _init_80x87(_DWORD);
// 2019D: using guessed type char byte_2019D;
// 20698: using guessed type __int16 word_20698;
// 2069C: using guessed type int (*off_2069C[2])();
// 206A0: using guessed type int (*off_206A0)();

//----- (00012E0F) --------------------------------------------------------
int sub_12E0F()
{
  int result; // eax

  BYTE1(result) = byte_2019C;
  if ( !byte_2019C )
  {
    byte_2019D = byte_2019C;
    result = 0;
    __asm { fninit }
    if ( !(_BYTE)word_201D0 )
    {
      byte_2019C = 0;
      byte_2019D = 0;
    }
  }
  return result;
}
// 2019C: using guessed type char byte_2019C;
// 2019D: using guessed type char byte_2019D;
// 201D0: using guessed type __int16 word_201D0;

//----- (00012E79) --------------------------------------------------------
int sub_12E79()
{
  int result; // eax
  _DWORD *v1; // ebx
  int *v2; // ecx
  int v3; // eax

  BYTE1(result) = byte_20229 & 0xF8;
  v1 = &unk_201E8;
  byte_20229 = byte_20229 & 0xF8 | 4;
  while ( v1[3] )
  {
    v2 = (int *)nmalloc(21);
    if ( !v2 )
    {
      v2 = (int *)nmalloc(21);
      if ( !v2 )
        _fatal_runtime_error(aNotEnoughMemor, 1);
    }
    v3 = dword_20CA0;
    v2[1] = (int)v1;
    *v2 = v3;
    v1[2] = v2;
    v2[2] = 0;
    *(_BYTE *)(v1[2] + 20) = 0;
    result = v1[2];
    dword_20CA0 = (int)v2;
    v1 = (_DWORD *)((char *)v1 + 26);
    *(_DWORD *)(result + 12) = 0;
  }
  dword_20CA4 = 0;
  return result;
}
// 110AB: using guessed type int __fastcall _fatal_runtime_error(_DWORD, _DWORD);
// 13077: using guessed type int __fastcall nmalloc(_DWORD);
// 20229: using guessed type char byte_20229;
// 20CA0: using guessed type int dword_20CA0;
// 20CA4: using guessed type int dword_20CA4;

//----- (00012F74) --------------------------------------------------------
int __fastcall sub_12F74(int a1)
{
  int v3; // ebx
  char v4; // cl

  if ( a1 >= (unsigned int)dword_20588 )
    return 0;
  if ( a1 < 5 )
  {
    v3 = 4 * a1;
    v4 = *((_BYTE *)off_205DC + 4 * a1 + 1);
    if ( (v4 & 0x40) == 0 )
    {
      *((_BYTE *)off_205DC + v3 + 1) = v4 | 0x40;
      if ( isatty(a1) )
        *((_BYTE *)off_205DC + v3 + 1) |= 0x20u;
    }
  }
  return *((_DWORD *)off_205DC + a1);
}
// 12FEA: using guessed type int __fastcall isatty(_DWORD);
// 20588: using guessed type int dword_20588;
// 205DC: using guessed type void *off_205DC;

//----- (00012FC9) --------------------------------------------------------
int __fastcall sub_12FC9(int a1, int a2)
{
  int result; // eax

  result = 4 * a1;
  if ( a2 )
  {
    BYTE1(a2) |= 0x40u;
    *(_DWORD *)((char *)off_205DC + result) = a2;
  }
  else
  {
    *(_DWORD *)((char *)off_205DC + result) = 0;
  }
  return result;
}
// 205DC: using guessed type void *off_205DC;

//----- (00013008) --------------------------------------------------------
int __fastcall sub_13008(int a1, int a2)
{
  int result; // eax

  if ( a2 )
    result = sub_13013(a1);
  else
    result = 0;
  return result;
}
// 13011: conditional instruction was optimized away because of 'edx.4!=0'

//----- (00013013) --------------------------------------------------------
int __fastcall sub_13013(unsigned int a1)
{
  unsigned __int8 v2; // dl
  int v3; // eax

  v2 = a1;
  sub_110FE((unsigned __int8)a1);
  if ( a1 >= 0x100 )
  {
    v3 = BYTE1(a1);
    goto LABEL_12;
  }
  if ( (unsigned __int8)byte_201DB < 3u )
    goto LABEL_8;
  if ( (_BYTE)a1 != 80 )
  {
    if ( (unsigned __int8)a1 >= 0x22u )
      goto LABEL_9;
    if ( (unsigned __int8)a1 >= 0x20u )
    {
      v2 = 5;
      goto LABEL_10;
    }
LABEL_8:
    if ( v2 <= 0x13u )
      goto LABEL_10;
LABEL_9:
    v2 = 19;
    goto LABEL_10;
  }
  v2 = 14;
LABEL_10:
  v3 = *(int *)((char *)&off_205DC + v2 + 1) >> 24;
LABEL_12:
  sub_110D4(v3);
  return -1;
}
// 201DB: using guessed type char byte_201DB;
// 205DC: using guessed type void *off_205DC;

//----- (00013811) --------------------------------------------------------
char *sub_13811()
{
  void *retaddr; // [esp+0h] [ebp+0h] BYREF

  return (char *)&retaddr - dword_201B4;
}
// 13813: returning address of temporary local variable '%" r"'
// 201B4: using guessed type int dword_201B4;

//----- (00013876) --------------------------------------------------------
void __fastcall __noreturn sub_13876(int a1, int a2)
{
  off_20604(a1, a2);
  sub_11F7B(0x10u, 0xFFu);
  sub_13899(a1);
}
// 20604: using guessed type int (__fastcall *off_20604)(_DWORD, _DWORD);

//----- (00013899) --------------------------------------------------------
void __fastcall __noreturn sub_13899(int a1)
{
  int v1; // eax

  v1 = off_20604(a1, a1);
  off_20608(v1);
  JUMPOUT(0x11023);
}
// 138AA: control flows out of bounds to 11023
// 20604: using guessed type int (__fastcall *off_20604)(_DWORD, _DWORD);
// 20608: using guessed type int (__fastcall *off_20608)(_DWORD);

//----- (00014134) --------------------------------------------------------
int __cdecl sub_14134(int a1, __int16 a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, __int16 a15)
{
  int v15; // esi
  __int16 v16; // dx
  char v17; // al
  _BOOL1 i; // zf
  unsigned __int8 v20; // ah
  __int16 v21; // bx
  int v22; // ebx
  int v23; // eax

  v15 = a14;
  v16 = HIWORD(a1);
  v17 = *MK_FP(a15, a14);
  for ( i = *MK_FP(a15, a14) == 0x9B; *MK_FP(a15, v15) <= 0x9Bu; i = *MK_FP(a15, v15) == 0x9B )
  {
    if ( !i )
    {
      switch ( v17 )
      {
        case '&':
          v16 = a2;
          ++v15;
          goto LABEL_5;
        case '.':
          v16 = a15;
          ++v15;
          goto LABEL_5;
        case '6':
          v16 = HIWORD(a1);
          ++v15;
          goto LABEL_5;
        case '>':
          v16 = a1;
          ++v15;
          goto LABEL_5;
        case 'd':
          v16 = __FS__;
          ++v15;
          goto LABEL_5;
        case 'e':
          v16 = __GS__;
          ++v15;
          goto LABEL_5;
      }
      if ( v17 != 102 && v17 != 103 )
        break;
    }
    ++v15;
LABEL_5:
    v17 = *MK_FP(a15, v15);
  }
  if ( (v17 & 0xF8) == 0xD8 )
  {
    v20 = *MK_FP(a15, v15 + 1);
    if ( v20 < 0xC0u )
    {
      LOBYTE(v21) = *MK_FP(a15, v15 + 1);
      HIBYTE(v21) = v20 >> 3;
      v22 = v21 & 0x1807;
      LOWORD(v22) = (unsigned __int8)(BYTE1(v22) | v22);
      funcs_1417E[v22]();
      ((void (__fastcall *)(int, __int16, int))_GETDS)(v23, v16, (unsigned __int8)v23 | BYTE1(v23) & 0x38);
    }
    JUMPOUT(0x1420F);
  }
  return nullsub_4();
}
// 14167: control flows out of bounds to 1420F
// 14195: variable 'v23' is possibly undefined
// 13D98: using guessed type int (*funcs_1417E[24])();
// 14247: using guessed type int nullsub_4(void);

//----- (00014248) --------------------------------------------------------
int __usercall sub_14248@<eax>(int a1@<ebp>, int a2@<edi>, int a3, __int16 a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, __int16 a17)
{
  _DWORD *v17; // ebx
  int v18; // edx
  int v19; // eax
  _BOOL1 v20; // cf
  int v21; // eax

  v17 = (_DWORD *)(a2 + a1 + 28);
  v18 = -256;
  v19 = *(_DWORD *)(a2 + a1 + 32);
  v20 = __CFSHL__(v19, 25);
  v21 = v19 << 25;
  if ( v20 )
  {
    if ( !v21 && !*v17 )
      v18 = -512;
    v20 = __CFADD__(*(_DWORD *)(a2 + a1 + 32), 256);
    *(_DWORD *)(a2 + a1 + 32) += 256;
    if ( v20 )
    {
      *(_DWORD *)(a2 + a1 + 32) = 0x80000000;
      ++*(_WORD *)(a2 + a1 + 36);
    }
  }
  *(_DWORD *)(a2 + a1 + 32) &= v18;
  *v17 = 0;
  return sub_14134(a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17);
}

//----- (00014284) --------------------------------------------------------
int __usercall sub_14284@<eax>(int a1@<ebp>, int a2@<edi>, int a3, __int16 a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, __int16 a17)
{
  _QWORD *v17; // ebx
  int v18; // edx
  _BOOL1 v19; // cf

  v17 = (_QWORD *)(a2 + a1 + 28);
  v18 = -2048;
  if ( __CFSHL__(*(_DWORD *)v17, 22) )
  {
    if ( !(*(_DWORD *)v17 << 22) )
      v18 = -4096;
    v19 = __CFADD__(*v17, 2048i64);
    *v17 += 2048i64;
    if ( v19 )
    {
      *(_DWORD *)(a2 + a1 + 32) = 0x80000000;
      ++*(_WORD *)(a2 + a1 + 36);
    }
  }
  *(_DWORD *)v17 &= v18;
  return sub_14134(a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17);
}

//----- (00014328) --------------------------------------------------------
int __usercall sub_14328@<eax>(int a1@<ecx>, _BYTE *a2@<ebp>)
{
  return sub_14346(-31996, a1, a2);
}

//----- (00014332) --------------------------------------------------------
int __usercall sub_14332@<eax>(int a1@<ecx>, _BYTE *a2@<ebp>)
{
  return sub_14346(-32511, a1, a2);
}

//----- (0001433C) --------------------------------------------------------
int __usercall sub_1433C@<eax>(int a1@<ecx>, _BYTE *a2@<ebp>)
{
  return sub_14346(-31736, a1, a2);
}

//----- (00014346) --------------------------------------------------------
int __usercall sub_14346@<eax>(int result@<eax>, int a2@<ecx>, _BYTE *a3@<ebp>)
{
  _BYTE v3[108]; // [esp-80h] [ebp-80h] BYREF
  int v4; // [esp-14h] [ebp-14h]
  int v5; // [esp-10h] [ebp-10h]
  int v6; // [esp-Ch] [ebp-Ch]

  a3[4] |= result;
  if ( ((unsigned __int8)result & *a3) == 0 )
  {
    v6 = a2;
    v5 = (unsigned __int16)__ES__;
    v4 = (unsigned __int16)__DS__;
    qmemcpy(v3, a3, sizeof(v3));
    result = off_201DD(BYTE1(result));
    qmemcpy(a3, v3, 0x6Cu);
  }
  return result;
}
// 201DD: using guessed type int (__fastcall *off_201DD)(_DWORD);

//----- (00014394) --------------------------------------------------------
void sub_14394()
{
  ;
}

//----- (0001439A) --------------------------------------------------------
void sub_1439A()
{
  ;
}

//----- (000143A0) --------------------------------------------------------
void sub_143A0()
{
  ;
}

//----- (000143A6) --------------------------------------------------------
void sub_143A6()
{
  ;
}

//----- (000143AC) --------------------------------------------------------
void sub_143AC()
{
  ;
}

//----- (000143B4) --------------------------------------------------------
void sub_143B4()
{
  ;
}

//----- (000143BA) --------------------------------------------------------
void sub_143BA()
{
  ;
}

//----- (000143C0) --------------------------------------------------------
void sub_143C0()
{
  ;
}

//----- (000143C6) --------------------------------------------------------
void sub_143C6()
{
  ;
}

//----- (000143CE) --------------------------------------------------------
void sub_143CE()
{
  ;
}

//----- (000143D6) --------------------------------------------------------
void sub_143D6()
{
  ;
}

//----- (000143DE) --------------------------------------------------------
void sub_143DE()
{
  ;
}

//----- (000143E6) --------------------------------------------------------
void sub_143E6()
{
  ;
}

//----- (000143F0) --------------------------------------------------------
void sub_143F0()
{
  ;
}

//----- (000143FA) --------------------------------------------------------
void sub_143FA()
{
  ;
}

//----- (00014402) --------------------------------------------------------
void sub_14402()
{
  ;
}

//----- (0001440A) --------------------------------------------------------
void sub_1440A()
{
  ;
}

//----- (00014413) --------------------------------------------------------
void sub_14413()
{
  ;
}

//----- (0001441C) --------------------------------------------------------
void sub_1441C()
{
  ;
}

//----- (00014425) --------------------------------------------------------
void sub_14425()
{
  ;
}

//----- (0001442E) --------------------------------------------------------
void sub_1442E()
{
  ;
}

//----- (00014439) --------------------------------------------------------
void sub_14439()
{
  ;
}

//----- (00014444) --------------------------------------------------------
void sub_14444()
{
  ;
}

//----- (0001444D) --------------------------------------------------------
void sub_1444D()
{
  ;
}

//----- (00014456) --------------------------------------------------------
char __usercall sub_14456@<al>(unsigned __int8 a1@<ah>, int a2@<ebx>, _BYTE *a3@<esi>)
{
  char result; // al

  LOWORD(a2) = (a1 >> 3) & 0x18 | *a3 & 7;
  funcs_14469[a2]();
  return result;
}
// 13DF8: using guessed type int (*funcs_14469[24])();

//----- (00014493) --------------------------------------------------------
int __usercall sub_14493@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>)
{
  int v3; // eax

  sub_162EC(*a3, a1 + 108);
  v3 = sub_158D4(a2 + a1 + 28, a1 + 108, (int)a3);
  return (*(int (__fastcall **)(int))(a1 + 122))(v3);
}

//----- (000144B2) --------------------------------------------------------
int __usercall sub_144B2@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>)
{
  int v3; // eax

  sub_162EC(*a3, a1 + 108);
  v3 = sub_15E39(a2 + a1 + 28, a1 + 108, (int)a3);
  return (*(int (__fastcall **)(int))(a1 + 122))(v3);
}

//----- (000144D1) --------------------------------------------------------
int __usercall sub_144D1@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18)
{
  __int16 v18; // dx
  int v20; // eax

  sub_162EC(*a3, a1 + 108);
  v20 = sub_15B45(a2 + a1 + 28, a1 + 108);
  v18 = *(_WORD *)(a1 + 4) & 0xB8FF;
  HIBYTE(v18) |= byte_13D8A[v20 + 1];
  *(_WORD *)(a1 + 4) = v18;
  return sub_14134(a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18);
}

//----- (000144ED) --------------------------------------------------------
int __usercall sub_144ED@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18)
{
  __int16 v18; // dx
  int v19; // edi
  __int16 v20; // bx
  int v22; // eax

  sub_162EC(*a3, a1 + 108);
  v22 = sub_15B45(a2 + a1 + 28, a1 + 108);
  v18 = *(_WORD *)(a1 + 4) & 0xB8FF;
  HIBYTE(v18) |= byte_13D8A[v22 + 1];
  *(_WORD *)(a1 + 4) = v18;
  *(_WORD *)(a1 + 8) &= *(__int16 *)((char *)&word_13D3A + a2);
  *(_WORD *)(a1 + 8) |= *(__int16 *)((char *)&word_13D42 + a2);
  v19 = *(unsigned __int16 *)((char *)&word_13CEA + a2);
  v20 = *(__int16 *)((char *)&word_13CEE + v19);
  *(_WORD *)(a1 + 4) &= 0xC7FFu;
  *(_WORD *)(a1 + 4) |= v20;
  *(_DWORD *)(a1 + 118) = v19;
  return sub_14134(a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18);
}
// 13CEA: using guessed type __int16 word_13CEA;
// 13CEE: using guessed type __int16 word_13CEE;
// 13D3A: using guessed type __int16 word_13D3A;
// 13D42: using guessed type __int16 word_13D42;

//----- (00014509) --------------------------------------------------------
int __usercall sub_14509@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>)
{
  sub_162EC(*a3, a1 + 108);
  sub_158AA(a2 + a1 + 28, (int *)(a1 + 108));
  return (*(int (**)(void))(a1 + 122))();
}

//----- (00014528) --------------------------------------------------------
int __usercall sub_14528@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>)
{
  sub_162EC(*a3, a1 + 108);
  sub_158AA(a1 + 108, (int *)(a2 + a1 + 28));
  return (*(int (**)(void))(a1 + 122))();
}

//----- (00014547) --------------------------------------------------------
int __usercall sub_14547@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>)
{
  int v3; // eax

  sub_162EC(*a3, a1 + 108);
  v3 = sub_15BDE(a2 + a1 + 28, a1 + 108, (_BYTE *)a1, (int)a3);
  return (*(int (__fastcall **)(int))(a1 + 122))(v3);
}

//----- (00014566) --------------------------------------------------------
int __usercall sub_14566@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>)
{
  int v3; // eax

  sub_162EC(*a3, a1 + 108);
  v3 = sub_15BDE(a1 + 108, a2 + a1 + 28, (_BYTE *)a1, (int)a3);
  return (*(int (__fastcall **)(int))(a1 + 122))(v3);
}

//----- (00014585) --------------------------------------------------------
int __usercall sub_14585@<eax>(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18)
{
  int v18; // edi
  __int16 v19; // bx

  v18 = *(unsigned __int16 *)((char *)&word_13CEC + a2);
  v19 = *(__int16 *)((char *)&word_13CEE + v18);
  *(_WORD *)(a1 + 4) &= 0xC7FFu;
  *(_WORD *)(a1 + 4) |= v19;
  *(_DWORD *)(a1 + 118) = v18;
  *(_WORD *)(a1 + 8) &= *(__int16 *)((char *)&word_13D3A + v18);
  sub_162EC(*a3, v18 + a1 + 28);
  return sub_14134(a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18);
}
// 13CEC: using guessed type __int16 word_13CEC;
// 13CEE: using guessed type __int16 word_13CEE;
// 13D3A: using guessed type __int16 word_13D3A;

//----- (000145C3) --------------------------------------------------------
int __usercall sub_145C3@<eax>(int a1@<ebp>, int a2@<edi>, unsigned int *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18)
{
  *a3 = sub_161A3(a2 + a1 + 28);
  return sub_14134(a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18);
}

//----- (000145D4) --------------------------------------------------------
void __usercall sub_145D4(int a1@<ebp>, int a2@<edi>, unsigned int *a3@<esi>)
{
  *a3 = sub_161A3(a2 + a1 + 28);
  JUMPOUT(0x142CD);
}
// 145E0: control flows out of bounds to 142CD

//----- (000145E5) --------------------------------------------------------
int __usercall sub_145E5@<eax>(void *a1@<ebp>, const void *a2@<esi>, int a3, __int16 a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, __int16 a17)
{
  qmemcpy(a1, a2, 0x1Cu);
  return sub_14134(a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17);
}

//----- (00014603) --------------------------------------------------------
int __usercall sub_14603@<eax>(int a1@<ebp>, __int16 *a2@<esi>, int a3, __int16 a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, __int16 a17)
{
  __int16 v17; // ax
  __int16 v18; // ax

  v17 = *a2;
  *(_WORD *)a1 = *a2;
  v18 = v17 & 0x300;
  if ( v18 == 768 )
  {
    *(_DWORD *)(a1 + 122) = sub_14134;
  }
  else if ( v18 == 512 )
  {
    *(_DWORD *)(a1 + 122) = sub_14284;
  }
  else
  {
    *(_DWORD *)(a1 + 122) = sub_14248;
  }
  return sub_14134(a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17);
}

//----- (00014643) --------------------------------------------------------
int __usercall sub_14643@<eax>(const void *a1@<ebp>, void *a2@<esi>, int a3, __int16 a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, __int16 a17)
{
  qmemcpy(a2, a1, 0x1Cu);
  return sub_14134(a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17);
}

//----- (00014657) --------------------------------------------------------
int __usercall sub_14657@<eax>(_WORD *a1@<ebp>, _WORD *a2@<esi>, int a3, __int16 a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, __int16 a17)
{
  *a2 = *a1;
  return sub_14134(a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17);
}

//----- (00014665) --------------------------------------------------------
int __usercall sub_14665@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>)
{
  int v3; // eax

  sub_160DF(*a3, a1 + 108);
  v3 = sub_158D4(a2 + a1 + 28, a1 + 108, (int)a3);
  return (*(int (__fastcall **)(int))(a1 + 122))(v3);
}

//----- (00014684) --------------------------------------------------------
int __usercall sub_14684@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>)
{
  int v3; // eax

  sub_160DF(*a3, a1 + 108);
  v3 = sub_15E39(a2 + a1 + 28, a1 + 108, (int)a3);
  return (*(int (__fastcall **)(int))(a1 + 122))(v3);
}

//----- (000146A3) --------------------------------------------------------
int __usercall sub_146A3@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18)
{
  __int16 v18; // dx
  int v20; // eax

  sub_160DF(*a3, a1 + 108);
  v20 = sub_15B45(a2 + a1 + 28, a1 + 108);
  v18 = *(_WORD *)(a1 + 4) & 0xB8FF;
  HIBYTE(v18) |= byte_13D8A[v20 + 1];
  *(_WORD *)(a1 + 4) = v18;
  return sub_14134(a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18);
}

//----- (000146BF) --------------------------------------------------------
int __usercall sub_146BF@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18)
{
  __int16 v18; // dx
  int v19; // edi
  __int16 v20; // bx
  int v22; // eax

  sub_160DF(*a3, a1 + 108);
  v22 = sub_15B45(a2 + a1 + 28, a1 + 108);
  v18 = *(_WORD *)(a1 + 4) & 0xB8FF;
  HIBYTE(v18) |= byte_13D8A[v22 + 1];
  *(_WORD *)(a1 + 4) = v18;
  *(_WORD *)(a1 + 8) &= *(__int16 *)((char *)&word_13D3A + a2);
  *(_WORD *)(a1 + 8) |= *(__int16 *)((char *)&word_13D42 + a2);
  v19 = *(unsigned __int16 *)((char *)&word_13CEA + a2);
  v20 = *(__int16 *)((char *)&word_13CEE + v19);
  *(_WORD *)(a1 + 4) &= 0xC7FFu;
  *(_WORD *)(a1 + 4) |= v20;
  *(_DWORD *)(a1 + 118) = v19;
  return sub_14134(a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18);
}
// 13CEA: using guessed type __int16 word_13CEA;
// 13CEE: using guessed type __int16 word_13CEE;
// 13D3A: using guessed type __int16 word_13D3A;
// 13D42: using guessed type __int16 word_13D42;

//----- (000146DB) --------------------------------------------------------
int __usercall sub_146DB@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>)
{
  sub_160DF(*a3, a1 + 108);
  sub_158AA(a2 + a1 + 28, (int *)(a1 + 108));
  return (*(int (**)(void))(a1 + 122))();
}

//----- (000146FA) --------------------------------------------------------
int __usercall sub_146FA@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>)
{
  sub_160DF(*a3, a1 + 108);
  sub_158AA(a1 + 108, (int *)(a2 + a1 + 28));
  return (*(int (**)(void))(a1 + 122))();
}

//----- (00014719) --------------------------------------------------------
int __usercall sub_14719@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>)
{
  int v3; // eax

  sub_160DF(*a3, a1 + 108);
  v3 = sub_15BDE(a2 + a1 + 28, a1 + 108, (_BYTE *)a1, (int)a3);
  return (*(int (__fastcall **)(int))(a1 + 122))(v3);
}

//----- (00014738) --------------------------------------------------------
int __usercall sub_14738@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>)
{
  int v3; // eax

  sub_160DF(*a3, a1 + 108);
  v3 = sub_15BDE(a1 + 108, a2 + a1 + 28, (_BYTE *)a1, (int)a3);
  return (*(int (__fastcall **)(int))(a1 + 122))(v3);
}

//----- (00014757) --------------------------------------------------------
int __usercall sub_14757@<eax>(int a1@<ebp>, int a2@<edi>, int *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18)
{
  int v18; // edi
  __int16 v19; // bx

  v18 = *(unsigned __int16 *)((char *)&word_13CEC + a2);
  v19 = *(__int16 *)((char *)&word_13CEE + v18);
  *(_WORD *)(a1 + 4) &= 0xC7FFu;
  *(_WORD *)(a1 + 4) |= v19;
  *(_DWORD *)(a1 + 118) = v18;
  *(_WORD *)(a1 + 8) &= *(__int16 *)((char *)&word_13D3A + v18);
  sub_160DF(*a3, v18 + a1 + 28);
  return sub_14134(a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18);
}
// 13CEC: using guessed type __int16 word_13CEC;
// 13CEE: using guessed type __int16 word_13CEE;
// 13D3A: using guessed type __int16 word_13D3A;

//----- (00014795) --------------------------------------------------------
int __usercall sub_14795@<eax>(_WORD *a1@<ebp>, int a2@<edi>, _DWORD *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18)
{
  int v18; // eax
  _DWORD *v19; // ebx
  int v21; // [esp-Ch] [ebp-Ch]
  int v22; // [esp-8h] [ebp-8h]
  int v23; // [esp-4h] [ebp-4h]

  v23 = *(_DWORD *)((char *)a1 + a2 + 28);
  v22 = *(_DWORD *)((char *)a1 + a2 + 32);
  v21 = *(_DWORD *)((char *)a1 + a2 + 34);
  sub_163B1((unsigned int)a1 + a2 + 28, *a1 & 0xC00);
  sub_16070();
  *a3 = v18;
  v19 = (_DWORD *)((char *)a1 + a2 + 28);
  *(_DWORD *)((char *)v19 + 6) = v21;
  v19[1] = v22;
  *v19 = v23;
  return sub_14134(a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18);
}
// 147BD: variable 'v18' is possibly undefined

//----- (000147D1) --------------------------------------------------------
void __usercall sub_147D1(_WORD *a1@<ebp>, int a2@<edi>, _DWORD *a3@<esi>)
{
  int v3; // eax

  sub_163B1((unsigned int)a1 + a2 + 28, *a1 & 0xC00);
  sub_16070();
  *a3 = v3;
  JUMPOUT(0x142CD);
}
// 147F0: control flows out of bounds to 142CD
// 147ED: variable 'v3' is possibly undefined

//----- (000147F5) --------------------------------------------------------
int __usercall sub_147F5@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>)
{
  int v3; // eax

  sub_16125(*a3, a1 + 108, (_BYTE *)a1);
  v3 = sub_158D4(a2 + a1 + 28, a1 + 108, (int)a3);
  return (*(int (__fastcall **)(int))(a1 + 122))(v3);
}

//----- (00014818) --------------------------------------------------------
int __usercall sub_14818@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>)
{
  int v3; // eax

  sub_16125(*a3, a1 + 108, (_BYTE *)a1);
  v3 = sub_15E39(a2 + a1 + 28, a1 + 108, (int)a3);
  return (*(int (__fastcall **)(int))(a1 + 122))(v3);
}

//----- (0001483B) --------------------------------------------------------
int __usercall sub_1483B@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18)
{
  __int16 v18; // dx
  int v20; // eax

  sub_16125(*a3, a1 + 108, (_BYTE *)a1);
  v20 = sub_15B45(a2 + a1 + 28, a1 + 108);
  v18 = *(_WORD *)(a1 + 4) & 0xB8FF;
  HIBYTE(v18) |= byte_13D8A[v20 + 1];
  *(_WORD *)(a1 + 4) = v18;
  return sub_14134(a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18);
}

//----- (0001485B) --------------------------------------------------------
int __usercall sub_1485B@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18)
{
  __int16 v18; // dx
  int v19; // edi
  __int16 v20; // bx
  int v22; // eax

  sub_16125(*a3, a1 + 108, (_BYTE *)a1);
  v22 = sub_15B45(a2 + a1 + 28, a1 + 108);
  v18 = *(_WORD *)(a1 + 4) & 0xB8FF;
  HIBYTE(v18) |= byte_13D8A[v22 + 1];
  *(_WORD *)(a1 + 4) = v18;
  *(_WORD *)(a1 + 8) &= *(__int16 *)((char *)&word_13D3A + a2);
  *(_WORD *)(a1 + 8) |= *(__int16 *)((char *)&word_13D42 + a2);
  v19 = *(unsigned __int16 *)((char *)&word_13CEA + a2);
  v20 = *(__int16 *)((char *)&word_13CEE + v19);
  *(_WORD *)(a1 + 4) &= 0xC7FFu;
  *(_WORD *)(a1 + 4) |= v20;
  *(_DWORD *)(a1 + 118) = v19;
  return sub_14134(a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18);
}
// 13CEA: using guessed type __int16 word_13CEA;
// 13CEE: using guessed type __int16 word_13CEE;
// 13D3A: using guessed type __int16 word_13D3A;
// 13D42: using guessed type __int16 word_13D42;

//----- (0001487B) --------------------------------------------------------
int __usercall sub_1487B@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>)
{
  sub_16125(*a3, a1 + 108, (_BYTE *)a1);
  sub_158AA(a2 + a1 + 28, (int *)(a1 + 108));
  return (*(int (**)(void))(a1 + 122))();
}

//----- (0001489E) --------------------------------------------------------
int __usercall sub_1489E@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>)
{
  sub_16125(*a3, a1 + 108, (_BYTE *)a1);
  sub_158AA(a1 + 108, (int *)(a2 + a1 + 28));
  return (*(int (**)(void))(a1 + 122))();
}

//----- (000148C1) --------------------------------------------------------
int __usercall sub_148C1@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>)
{
  int v3; // eax

  sub_16125(*a3, a1 + 108, (_BYTE *)a1);
  v3 = sub_15BDE(a2 + a1 + 28, a1 + 108, (_BYTE *)a1, (int)a3);
  return (*(int (__fastcall **)(int))(a1 + 122))(v3);
}

//----- (000148E4) --------------------------------------------------------
int __usercall sub_148E4@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>)
{
  int v3; // eax

  sub_16125(*a3, a1 + 108, (_BYTE *)a1);
  v3 = sub_15BDE(a1 + 108, a2 + a1 + 28, (_BYTE *)a1, (int)a3);
  return (*(int (__fastcall **)(int))(a1 + 122))(v3);
}

//----- (00014907) --------------------------------------------------------
int __usercall sub_14907@<eax>(int a1@<ebp>, int a2@<edi>, int a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18)
{
  int v18; // edi
  __int16 v19; // bx

  v18 = *(unsigned __int16 *)((char *)&word_13CEC + a2);
  v19 = *(__int16 *)((char *)&word_13CEE + v18);
  *(_WORD *)(a1 + 4) &= 0xC7FFu;
  *(_WORD *)(a1 + 4) |= v19;
  *(_DWORD *)(a1 + 118) = v18;
  *(_WORD *)(a1 + 8) &= *(__int16 *)((char *)&word_13D3A + v18);
  *(_DWORD *)(v18 + a1 + 28) = *(_DWORD *)a3;
  *(_DWORD *)(v18 + a1 + 32) = *(_DWORD *)(a3 + 4);
  *(_WORD *)(v18 + a1 + 36) = *(_WORD *)(a3 + 8);
  return sub_14134(a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18);
}
// 13CEC: using guessed type __int16 word_13CEC;
// 13CEE: using guessed type __int16 word_13CEE;
// 13D3A: using guessed type __int16 word_13D3A;

//----- (00014952) --------------------------------------------------------
int __usercall sub_14952@<eax>(int a1@<ebp>, int a2@<edi>, __int64 *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18)
{
  int v18; // edi
  __int16 v19; // bx

  v18 = *(unsigned __int16 *)((char *)&word_13CEC + a2);
  v19 = *(__int16 *)((char *)&word_13CEE + v18);
  *(_WORD *)(a1 + 4) &= 0xC7FFu;
  *(_WORD *)(a1 + 4) |= v19;
  *(_DWORD *)(a1 + 118) = v18;
  *(_WORD *)(a1 + 8) &= *(__int16 *)((char *)&word_13D3A + v18);
  sub_16125(*a3, v18 + a1 + 28, (_BYTE *)a1);
  return sub_14134(a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18);
}
// 13CEC: using guessed type __int16 word_13CEC;
// 13CEE: using guessed type __int16 word_13CEE;
// 13D3A: using guessed type __int16 word_13D3A;

//----- (00014994) --------------------------------------------------------
int __usercall sub_14994@<eax>(int a1@<edx>, _BYTE *a2@<ebp>, int a3@<edi>, int *a4@<esi>, int a5, __int16 a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, __int16 a19)
{
  *a4 = sub_16222((__int64 *)&a2[a3 + 28], a2);
  a4[1] = a1;
  return sub_14134(a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19);
}

//----- (000149A9) --------------------------------------------------------
void __usercall sub_149A9(int a1@<ebp>, int a2@<edi>, int a3@<esi>)
{
  *(_DWORD *)a3 = *(_DWORD *)(a2 + a1 + 28);
  *(_DWORD *)(a3 + 4) = *(_DWORD *)(a2 + a1 + 32);
  *(_WORD *)(a3 + 8) = *(_WORD *)(a2 + a1 + 36);
  JUMPOUT(0x142CD);
}
// 149C2: control flows out of bounds to 142CD

//----- (000149C7) --------------------------------------------------------
void __usercall sub_149C7(int a1@<edx>, _BYTE *a2@<ebp>, int a3@<edi>, int *a4@<esi>)
{
  *a4 = sub_16222((__int64 *)&a2[a3 + 28], a2);
  a4[1] = a1;
  JUMPOUT(0x142CD);
}
// 149D7: control flows out of bounds to 142CD

//----- (000149DC) --------------------------------------------------------
int __usercall sub_149DC@<eax>(_DWORD *a1@<ebp>, _DWORD *a2@<esi>, int a3, __int16 a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, __int16 a17)
{
  _DWORD *v17; // esi
  unsigned int v18; // ebx
  int v19; // ecx
  _DWORD *v20; // esi

  qmemcpy(a1, a2, 0x1Cu);
  v17 = a2 + 7;
  v18 = 10 * ((a1[1] & 0x3800u) >> 11);
  *(_DWORD *)((char *)a1 + 118) = v18;
  v19 = 8;
  do
  {
    *(_DWORD *)((char *)a1 + v18 + 28) = *v17;
    v20 = v17 + 1;
    *(_DWORD *)((char *)a1 + v18 + 32) = *v20++;
    *(_WORD *)((char *)a1 + v18 + 36) = *(_WORD *)v20;
    v17 = (_DWORD *)((char *)v20 + 2);
    v18 = *(unsigned __int16 *)((char *)&word_13CEA + v18);
    --v19;
  }
  while ( v19 );
  return sub_14134(a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17);
}
// 13CEA: using guessed type __int16 word_13CEA;

//----- (00014A27) --------------------------------------------------------
void __usercall sub_14A27(char *a1@<ebp>, int a2@<edi>, _DWORD *a3@<esi>)
{
  _DWORD *v4; // edi
  int v5; // ecx
  _DWORD *v6; // edi

  qmemcpy(a3, a1, 0x1Cu);
  v4 = a3 + 7;
  v5 = 8;
  do
  {
    *v4 = *(_DWORD *)&a1[a2 + 28];
    v6 = v4 + 1;
    *v6++ = *(_DWORD *)&a1[a2 + 32];
    *(_WORD *)v6 = *(_WORD *)&a1[a2 + 36];
    v4 = (_DWORD *)((char *)v6 + 2);
    a2 = *(unsigned __int16 *)((char *)&word_13CEA + a2);
    --v5;
  }
  while ( v5 );
  JUMPOUT(0x15357);
}
// 14A4D: control flows out of bounds to 15357
// 13CEA: using guessed type __int16 word_13CEA;

//----- (00014A52) --------------------------------------------------------
int __usercall sub_14A52@<eax>(int a1@<ebp>, _WORD *a2@<esi>, int a3, __int16 a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, __int16 a17)
{
  *a2 = *(_WORD *)(a1 + 4);
  return sub_14134(a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17);
}

//----- (00014A60) --------------------------------------------------------
int __usercall sub_14A60@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>)
{
  int v3; // eax

  sub_160DF(*a3, a1 + 108);
  v3 = sub_158D4(a2 + a1 + 28, a1 + 108, (int)a3);
  return (*(int (__fastcall **)(int))(a1 + 122))(v3);
}

//----- (00014A81) --------------------------------------------------------
int __usercall sub_14A81@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>)
{
  int v3; // eax

  sub_160DF(*a3, a1 + 108);
  v3 = sub_15E39(a2 + a1 + 28, a1 + 108, (int)a3);
  return (*(int (__fastcall **)(int))(a1 + 122))(v3);
}

//----- (00014AA2) --------------------------------------------------------
int __usercall sub_14AA2@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18)
{
  __int16 v18; // dx
  int v20; // eax

  sub_160DF(*a3, a1 + 108);
  v20 = sub_15B45(a2 + a1 + 28, a1 + 108);
  v18 = *(_WORD *)(a1 + 4) & 0xB8FF;
  HIBYTE(v18) |= byte_13D8A[v20 + 1];
  *(_WORD *)(a1 + 4) = v18;
  return sub_14134(a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18);
}

//----- (00014AC0) --------------------------------------------------------
int __usercall sub_14AC0@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18)
{
  __int16 v18; // dx
  int v19; // edi
  __int16 v20; // bx
  int v22; // eax

  sub_160DF(*a3, a1 + 108);
  v22 = sub_15B45(a2 + a1 + 28, a1 + 108);
  v18 = *(_WORD *)(a1 + 4) & 0xB8FF;
  HIBYTE(v18) |= byte_13D8A[v22 + 1];
  *(_WORD *)(a1 + 4) = v18;
  *(_WORD *)(a1 + 8) &= *(__int16 *)((char *)&word_13D3A + a2);
  *(_WORD *)(a1 + 8) |= *(__int16 *)((char *)&word_13D42 + a2);
  v19 = *(unsigned __int16 *)((char *)&word_13CEA + a2);
  v20 = *(__int16 *)((char *)&word_13CEE + v19);
  *(_WORD *)(a1 + 4) &= 0xC7FFu;
  *(_WORD *)(a1 + 4) |= v20;
  *(_DWORD *)(a1 + 118) = v19;
  return sub_14134(a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18);
}
// 13CEA: using guessed type __int16 word_13CEA;
// 13CEE: using guessed type __int16 word_13CEE;
// 13D3A: using guessed type __int16 word_13D3A;
// 13D42: using guessed type __int16 word_13D42;

//----- (00014ADE) --------------------------------------------------------
int __usercall sub_14ADE@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>)
{
  sub_160DF(*a3, a1 + 108);
  sub_158AA(a2 + a1 + 28, (int *)(a1 + 108));
  return (*(int (**)(void))(a1 + 122))();
}

//----- (00014AFF) --------------------------------------------------------
int __usercall sub_14AFF@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>)
{
  sub_160DF(*a3, a1 + 108);
  sub_158AA(a1 + 108, (int *)(a2 + a1 + 28));
  return (*(int (**)(void))(a1 + 122))();
}

//----- (00014B20) --------------------------------------------------------
int __usercall sub_14B20@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>)
{
  int v3; // eax

  sub_160DF(*a3, a1 + 108);
  v3 = sub_15BDE(a2 + a1 + 28, a1 + 108, (_BYTE *)a1, (int)a3);
  return (*(int (__fastcall **)(int))(a1 + 122))(v3);
}

//----- (00014B41) --------------------------------------------------------
int __usercall sub_14B41@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>)
{
  int v3; // eax

  sub_160DF(*a3, a1 + 108);
  v3 = sub_15BDE(a1 + 108, a2 + a1 + 28, (_BYTE *)a1, (int)a3);
  return (*(int (__fastcall **)(int))(a1 + 122))(v3);
}

//----- (00014B62) --------------------------------------------------------
int __usercall sub_14B62@<eax>(int a1@<ebp>, int a2@<edi>, __int16 *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18)
{
  int v18; // edi
  __int16 v19; // bx

  v18 = *(unsigned __int16 *)((char *)&word_13CEC + a2);
  v19 = *(__int16 *)((char *)&word_13CEE + v18);
  *(_WORD *)(a1 + 4) &= 0xC7FFu;
  *(_WORD *)(a1 + 4) |= v19;
  *(_DWORD *)(a1 + 118) = v18;
  *(_WORD *)(a1 + 8) &= *(__int16 *)((char *)&word_13D3A + v18);
  sub_160DF(*a3, v18 + a1 + 28);
  return sub_14134(a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18);
}
// 13CEC: using guessed type __int16 word_13CEC;
// 13CEE: using guessed type __int16 word_13CEE;
// 13D3A: using guessed type __int16 word_13D3A;

//----- (00014BA2) --------------------------------------------------------
int __usercall sub_14BA2@<eax>(_WORD *a1@<ebp>, int a2@<edi>, _WORD *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18)
{
  int v18; // eax
  _DWORD *v19; // ebx
  int v21; // [esp-Ch] [ebp-Ch]
  int v22; // [esp-8h] [ebp-8h]
  int v23; // [esp-4h] [ebp-4h]

  v23 = *(_DWORD *)((char *)a1 + a2 + 28);
  v22 = *(_DWORD *)((char *)a1 + a2 + 32);
  v21 = *(_DWORD *)((char *)a1 + a2 + 34);
  sub_163B1((unsigned int)a1 + a2 + 28, *a1 & 0xC00);
  sub_16070();
  if ( (__int16)v18 != v18 )
    LOWORD(v18) = 0x8000;
  *a3 = v18;
  v19 = (_DWORD *)((char *)a1 + a2 + 28);
  *(_DWORD *)((char *)v19 + 6) = v21;
  v19[1] = v22;
  *v19 = v23;
  return sub_14134(a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18);
}
// 14BCC: variable 'v18' is possibly undefined

//----- (00014BEA) --------------------------------------------------------
void __usercall sub_14BEA(_WORD *a1@<ebp>, int a2@<edi>, _WORD *a3@<esi>)
{
  int v3; // eax

  sub_163B1((unsigned int)a1 + a2 + 28, *a1 & 0xC00);
  sub_16070();
  if ( (__int16)v3 != v3 )
    LOWORD(v3) = 0x8000;
  *a3 = v3;
  JUMPOUT(0x142CD);
}
// 14C15: control flows out of bounds to 142CD
// 14C08: variable 'v3' is possibly undefined

//----- (00014C1F) --------------------------------------------------------
int __usercall sub_14C1F@<eax>(int a1@<ebp>, int a2@<edi>, unsigned int *a3@<esi>, int a4, __int16 a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, __int16 a18)
{
  int v18; // edi
  __int16 v19; // bx

  v18 = *(unsigned __int16 *)((char *)&word_13CEC + a2);
  v19 = *(__int16 *)((char *)&word_13CEE + v18);
  *(_WORD *)(a1 + 4) &= 0xC7FFu;
  *(_WORD *)(a1 + 4) |= v19;
  *(_DWORD *)(a1 + 118) = v18;
  *(_WORD *)(a1 + 8) &= *(__int16 *)((char *)&word_13D3A + v18);
  sub_160F0(*a3, v18 + a1 + 28);
  return sub_14134(a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18);
}
// 13CEC: using guessed type __int16 word_13CEC;
// 13CEE: using guessed type __int16 word_13CEE;
// 13D3A: using guessed type __int16 word_13D3A;

//----- (00014C62) --------------------------------------------------------
void __usercall sub_14C62(_WORD *a1@<ebp>, int a2@<edi>, int *a3@<esi>)
{
  sub_163B1((unsigned int)a1 + a2 + 28, *a1 & 0xC00);
  *a3 = sub_16075((int *)((char *)a1 + a2 + 28));
  JUMPOUT(0x142CD);
}
// 14C81: control flows out of bounds to 142CD

//----- (00014CB8) --------------------------------------------------------
int __usercall sub_14CB8@<eax>(int a1@<ebp>, int a2@<edi>, int a3@<esi>)
{
  int v3; // eax

  v3 = sub_158D4(a2 + a1 + 28, a3 + a1 + 28, a3);
  return (*(int (__fastcall **)(int))(a1 + 122))(v3);
}

//----- (000151A0) --------------------------------------------------------
#error "15217: call analysis failed (funcsize=43)"

//----- (000158AA) --------------------------------------------------------
void __fastcall sub_158AA(int a1, int *a2)
{
  int v2; // ebx
  __int16 v3; // si
  int v4; // edx
  int v5; // eax

  v2 = *a2;
  v3 = *(_WORD *)(a1 + 8);
  v4 = *(_DWORD *)(a1 + 4);
  sub_1592E();
  *(_DWORD *)v2 = v5;
  *(_DWORD *)(v2 + 4) = v4;
  *(_WORD *)(v2 + 8) = v3;
}
// 158C8: variable 'v5' is possibly undefined

//----- (000158D4) --------------------------------------------------------
int __usercall sub_158D4@<eax>(int a1@<eax>, int a2@<edx>, int a3@<esi>)
{
  unsigned int v3; // ecx
  unsigned int v4; // ebx
  int v5; // esi
  __int64 v6; // rax

  LOWORD(a3) = *(_WORD *)(a2 + 8);
  v3 = *(_DWORD *)(a2 + 4);
  v4 = *(_DWORD *)a2;
  v5 = a3 << 16;
  LOWORD(v5) = *(_WORD *)(a1 + 8);
  v6 = *(_QWORD *)a1;
  LODWORD(v6) = sub_159B3(v6, v3, v4, v5);
  *(_QWORD *)v4 = v6;
  *(_WORD *)(v4 + 8) = v5;
  return v6;
}

//----- (000158FE) --------------------------------------------------------
int __userpurge sub_158FE@<eax>(int a1@<eax>, int a2@<esi>, unsigned int a3, unsigned int a4, __int16 a5)
{
  int v5; // esi
  __int64 v6; // rax

  LOWORD(a2) = a5;
  v5 = a2 << 16;
  LOWORD(v5) = *(_WORD *)(a1 + 8);
  v6 = *(_QWORD *)a1;
  LODWORD(v6) = sub_159B3(v6, a4, a3, v5);
  *(_QWORD *)a3 = v6;
  *(_WORD *)(a3 + 8) = v5;
  return v6;
}

//----- (0001592E) --------------------------------------------------------
void sub_1592E()
{
  JUMPOUT(0x159B6);
}
// 15934: control flows out of bounds to 159B6

//----- (000159B3) --------------------------------------------------------
int __usercall sub_159B3@<eax>(__int64 a1@<edx:eax>, unsigned int a2@<ecx>, unsigned int a3@<ebx>, int a4@<esi>)
{
  _BOOL1 v4; // zf
  _BOOL1 v5; // cc
  _BOOL1 v6; // of
  _BOOL1 v7; // of
  int v8; // esi
  int v9; // esi
  _BOOL1 v10; // cf
  unsigned __int16 v11; // si
  int v12; // ecx
  int v13; // esi
  unsigned int v15; // ebp
  int v16; // edi
  int v17; // ecx
  unsigned __int16 v18; // di
  _BOOL1 v19; // cf
  int v20; // ecx
  unsigned int v21; // et1
  int v22; // et2
  int v23; // edi
  int v24; // ebx
  char v25; // ch
  int v26; // ebx
  int v27; // edi
  char v28; // cf
  char v29; // tt
  int v30; // ett
  int v31; // ett
  __int16 v32; // bp
  int v33; // et2
  _BOOL1 v34; // cf
  int v35; // eax
  _BOOL1 v36; // tt
  bool v37; // ett
  int v38; // ett
  unsigned int v40; // [esp-8h] [ebp-Ch]

  v10 = __CFADD__((_WORD)a4, 1);
  v6 = __OFADD__(1, (_WORD)a4);
  LOWORD(a4) = a4 + 1;
  if ( v10 || v6 )
  {
    LOWORD(a4) = a4 - 1;
    if ( __CFADD__(sub_10000, a4) || __OFADD__(sub_10000, a4) )
    {
      if ( (_DWORD)a1 || a3 || HIDWORD(a1) != 0x80000000 || a2 != HIDWORD(a1) )
      {
        v4 = HIDWORD(a1) == a2;
        v5 = HIDWORD(a1) <= a2;
        if ( HIDWORD(a1) == a2 )
        {
          v4 = (_DWORD)a1 == a3;
          v5 = (unsigned int)a1 <= a3;
        }
        if ( v5 )
        {
          if ( v4 )
            v4 = 1;
          if ( !v4 )
            LODWORD(a1) = a3;
        }
      }
      else
      {
        LODWORD(a1) = 0;
      }
    }
  }
  else
  {
    v10 = __CFADD__(a4, 0xFFFF);
    v7 = __OFADD__(0xFFFF, a4);
    v8 = a4 + 0xFFFF;
    if ( v10 || v7 )
    {
      LODWORD(a1) = a3;
      return a1;
    }
    v9 = v8 - (_DWORD)sub_10000;
    if ( !a1 )
    {
      v10 = __CFADD__((_WORD)v9, (_WORD)v9);
      v11 = 2 * v9;
      if ( !v11 )
      {
        LODWORD(a1) = a3;
        return a1;
      }
      LOWORD(v9) = (v11 >> 1) | (v10 << 15);
    }
    if ( a2 || a3 || (v9 & 0x7FFF0000) != 0 )
    {
      v12 = v9;
      v13 = a2;
      v15 = (v12 >> 16) & 0x80007FFF;
      v16 = __ROL4__(((int)__ROL4__(v12, 16) >> 16) & 0x80007FFF, 16);
      v17 = __ROL4__(v15, 16);
      LOWORD(v17) = v16 + v17;
      v18 = __ROL4__(v16, 16);
      v20 = __ROL4__(v17, 16);
      v19 = (unsigned __int16)v20 < v18;
      LOWORD(v20) = v20 - v18;
      if ( !(_WORD)v20 )
        goto LABEL_17;
      if ( v19 )
      {
        LOWORD(v15) = v18;
        LOWORD(v20) = -(__int16)v20;
        v21 = a1;
        LODWORD(a1) = a3;
        a3 = v21;
        v22 = HIDWORD(a1);
        HIDWORD(a1) = v13;
        v13 = v22;
      }
      if ( (unsigned __int16)v20 > 0x40u )
      {
        LODWORD(a1) = a3;
      }
      else
      {
LABEL_17:
        BYTE1(v20) = 0;
        if ( v20 < 0 )
        {
          BYTE1(v20) = -1;
          a3 = -a3;
          v13 = -v13 - (a3 != 0);
        }
        v23 = 0;
        if ( (_BYTE)v20 )
        {
          v40 = a3;
          v24 = 0;
          if ( (unsigned __int8)v20 >= 0x20u )
          {
            LOBYTE(v24) = (_DWORD)a1 != 0;
            v23 = v24;
            if ( (_BYTE)v20 == 64 )
            {
              v23 = HIDWORD(a1) | v24;
              HIDWORD(a1) = 0;
            }
            a1 = HIDWORD(a1);
          }
          v23 |= __PAIR64__(a1, 0) >> v20;
          LODWORD(a1) = (unsigned __int64)a1 >> v20;
          HIDWORD(a1) = (unsigned __int64)HIDWORD(a1) >> v20;
          a3 = v40;
        }
        v10 = __CFADD__(__PAIR64__(v13, a3), a1);
        a1 += __PAIR64__(v13, a3);
        v25 = v10 + BYTE1(v20);
        if ( v25 < 0 )
        {
          if ( (_BYTE)v20 == 64 )
            a1 += (v23 & 0x7FFFFFFF) != 0;
          a1 = -a1;
          v25 = 0;
        }
        v26 = a1;
        LOBYTE(v26) = v25 | a1;
        if ( HIDWORD(a1) | v26 && (_WORD)v15 )
        {
          if ( v25 )
          {
LABEL_35:
            v32 = v15 + 1;
            if ( v32 == 0x7FFF )
              goto LABEL_43;
            v10 = BYTE4(a1) & 1;
            HIDWORD(a1) = (HIDWORD(a1) >> 1) | 0x80000000;
            v33 = v10 << 31;
            v10 = a1 & 1;
            LODWORD(a1) = ((unsigned int)a1 >> 1) | v33;
            if ( v10 )
            {
              v34 = __CFADD__(v23, v23);
              if ( !(2 * v23) )
              {
                v35 = __ROR4__(a1, 1);
                v36 = __CFSHL__(v35, 1);
                LODWORD(a1) = __ROL4__(v35, 1);
                v34 = v36;
              }
              v37 = v34;
              v10 = __CFADD__(v34, (_DWORD)a1);
              LODWORD(a1) = v37 + a1;
              v38 = v10;
              v10 = __CFADD__(v10, HIDWORD(a1));
              HIDWORD(a1) += v38;
              if ( v10 )
              {
                LODWORD(a1) = a1 >> 1;
                if ( v32 == 32766 )
LABEL_43:
                  LODWORD(a1) = 0;
              }
            }
          }
          else
          {
            v27 = __ROL4__(v23, 1);
            v29 = v27 & 1;
            v23 = __ROR4__(v27, 1);
            v28 = v29;
            while ( 1 )
            {
              LOWORD(v15) = v15 - 1;
              if ( !(_WORD)v15 )
                break;
              v30 = v28 + (_DWORD)a1;
              v10 = __CFADD__(v28, (_DWORD)a1) | __CFADD__((_DWORD)a1, v30);
              LODWORD(a1) = a1 + v30;
              v31 = v10 + HIDWORD(a1);
              v28 = __CFADD__(v10, HIDWORD(a1)) | __CFADD__(HIDWORD(a1), v31);
              HIDWORD(a1) += v31;
              if ( v28 )
                goto LABEL_35;
            }
          }
        }
      }
    }
  }
  return a1;
}
// 10000: using guessed type int sub_10000();

//----- (00015B45) --------------------------------------------------------
int __fastcall sub_15B45(unsigned int a1, int a2)
{
  int v2; // esi
  _BOOL1 v3; // cf
  _BOOL1 v4; // zf
  int v5; // edi
  int result; // eax
  int v7; // edi
  int v8; // eax

  if ( (*(_WORD *)(a1 + 8) | 0x8000) == 0xFFFF && *(_DWORD *)a1 | (2 * *(_DWORD *)(a1 + 4))
    || (*(_WORD *)(a2 + 8) | 0x8000) == 0xFFFF && *(_DWORD *)a2 | (2 * *(_DWORD *)(a2 + 4)) )
  {
    return 2;
  }
  v2 = *(_DWORD *)(a1 + 6);
  if ( (v2 ^ *(_DWORD *)(a2 + 6)) >= 0 )
  {
    LOWORD(v2) = *(_WORD *)(a1 + 8);
    v3 = (unsigned __int16)v2 < *(_WORD *)(a2 + 8);
    v4 = (_WORD)v2 == *(_WORD *)(a2 + 8);
    if ( (_WORD)v2 == *(_WORD *)(a2 + 8) )
    {
      v3 = *(_QWORD *)a1 < *(_QWORD *)a2;
      v4 = *(_QWORD *)a1 == *(_QWORD *)a2;
    }
    v5 = 0;
    if ( v4 )
      return v5;
    v2 ^= (a1 >> 1) | (v3 << 31);
    return -2 * __CFADD__(v2, v2) + 1;
  }
  v7 = *(_DWORD *)(a2 + 4) | *(_DWORD *)(a1 + 4) | *(_DWORD *)a2 | *(_DWORD *)a1;
  LOWORD(a1) = *(_WORD *)(a1 + 8);
  v8 = a1 << 16;
  LOWORD(v8) = *(_WORD *)(a2 + 8);
  result = v7 | v8 & 0x7FFF7FFF;
  if ( result )
    return -2 * __CFADD__(v2, v2) + 1;
  return result;
}

//----- (00015BDE) --------------------------------------------------------
int __usercall sub_15BDE@<eax>(int a1@<eax>, int a2@<edx>, _BYTE *a3@<ebp>, int a4@<esi>)
{
  unsigned int v4; // ecx
  unsigned int v5; // ebx
  int v6; // esi
  unsigned __int64 v7; // rax

  LOWORD(a4) = *(_WORD *)(a2 + 8);
  v4 = *(_DWORD *)(a2 + 4);
  v5 = *(_DWORD *)a2;
  v6 = a4 << 16;
  LOWORD(v6) = *(_WORD *)(a1 + 8);
  v7 = *(_QWORD *)a1;
  LODWORD(v7) = sub_15C7E(v7, v4, v5, a3, v6);
  *(_QWORD *)v5 = v7;
  *(_WORD *)(v5 + 8) = v6;
  return v7;
}

//----- (00015C7E) --------------------------------------------------------
int __usercall sub_15C7E@<eax>(unsigned __int64 a1@<edx:eax>, unsigned int a2@<ecx>, unsigned int a3@<ebx>, _BYTE *a4@<ebp>, int a5@<esi>)
{
  _BOOL1 v5; // cc
  _BOOL1 v6; // of
  _BOOL1 v7; // of
  int v8; // esi
  int v9; // esi
  _BOOL1 v10; // cf
  unsigned __int16 v11; // si
  int v12; // ecx
  int v13; // esi
  int v15; // edi
  int v16; // ecx
  __int16 v17; // di
  __int16 v18; // cx
  __int16 v19; // di
  unsigned int v20; // ecx
  unsigned int v21; // edi
  unsigned int v22; // esi
  unsigned __int64 v23; // rax
  int v24; // ecx
  int v25; // edi
  unsigned int i; // esi
  unsigned int v27; // edi
  int v28; // esi
  unsigned int v29; // eax
  unsigned __int64 v30; // kr18_8
  unsigned __int64 v31; // rax
  int v32; // ecx
  int v33; // edi
  unsigned int j; // esi
  __int16 v35; // di
  char v36; // cl
  _BYTE v38[12]; // [esp-20h] [ebp-20h]
  unsigned __int64 v39; // [esp-14h] [ebp-14h]
  __int16 v40; // [esp-Ch] [ebp-Ch]

  v10 = __CFADD__((_WORD)a5, 1);
  v6 = __OFADD__(1, (_WORD)a5);
  LOWORD(a5) = a5 + 1;
  if ( v10 || v6 )
  {
    LOWORD(a5) = a5 - 1;
    if ( (__CFADD__(sub_10000, a5) || __OFADD__(sub_10000, a5))
      && ((_DWORD)a1 || a3 || HIDWORD(a1) != 0x80000000 || a2 != HIDWORD(a1)) )
    {
      v5 = HIDWORD(a1) <= a2;
      if ( HIDWORD(a1) == a2 )
        v5 = (unsigned int)a1 <= a3;
      if ( v5 )
        LODWORD(a1) = a3;
    }
  }
  else
  {
    v10 = __CFADD__(a5, 0xFFFF);
    v7 = __OFADD__(0xFFFF, a5);
    v8 = a5 + 0xFFFF;
    if ( v10 || v7 )
    {
      LODWORD(a1) = a3;
      return a1;
    }
    v9 = v8 - (_DWORD)sub_10000;
    if ( a2 || a3 || (v9 & 0x7FFF0000) != 0 )
    {
      if ( !a1 )
      {
        v10 = __CFADD__((_WORD)v9, (_WORD)v9);
        v11 = 2 * v9;
        if ( !v11 )
          return a1;
        LOWORD(v9) = (v11 >> 1) | (v10 << 15);
      }
      v12 = v9;
      v13 = a2;
      v15 = __ROL4__(((int)__ROL4__(v12, 16) >> 16) & 0x80007FFF, 16);
      v16 = __ROL4__((v12 >> 16) & 0x80007FFF, 16);
      LOWORD(v15) = v16 + v15;
      v17 = __ROL4__(v15, 16);
      v18 = __ROL4__(v16, 16);
      if ( !v17 )
      {
        do
        {
          a1 *= 2i64;
          --v17;
        }
        while ( (a1 & 0x8000000000000000i64) == 0i64 );
      }
      if ( !v18 )
      {
        do
        {
          v13 = __PAIR64__(v13, a3) >> 31;
          a3 *= 2;
          --v18;
        }
        while ( v13 >= 0 );
      }
      v19 = v17 - v18 + 0x3FFF;
      if ( v19 < 0 || (unsigned __int16)v19 < 0x7FFFu )
      {
        if ( v19 >= -64 )
        {
          v40 = v19;
          v39 = __PAIR64__(v13, a3);
          v20 = v13;
          v21 = HIDWORD(a1);
          v22 = a1;
          LODWORD(a1) = 0;
          if ( v20 <= HIDWORD(a1) )
          {
            HIDWORD(a1) -= v20;
            LODWORD(a1) = 1;
          }
          *(_DWORD *)&v38[8] = a1;
          *(_DWORD *)&v38[4] = __PAIR64__(HIDWORD(a1), v22) / v20;
          v23 = ((*(unsigned int *)&v38[4] * (unsigned __int64)a3) >> 32)
              + *(unsigned int *)&v38[4] * (unsigned __int64)v20;
          if ( (v38[8] & 1) != 0 )
            v23 += v39;
          v24 = -(*(_DWORD *)&v38[4] * a3);
          v25 = (__PAIR64__(v21, v22) - __PAIR64__(HIDWORD(v23), (*(_DWORD *)&v38[4] * a3 != 0) + (unsigned int)v23)) >> 32;
          for ( i = v22 - ((*(_DWORD *)&v38[4] * a3 != 0) + v23); v25; v25 += v10 )
          {
            --*(_QWORD *)&v38[4];
            v10 = __CFADD__(v39, __PAIR64__(i, v24));
            i = (v39 + __PAIR64__(i, v24)) >> 32;
            v24 += v39;
          }
          v27 = i;
          v28 = v24;
          if ( HIDWORD(v39) <= v27 )
          {
            v27 -= HIDWORD(v39);
            ++*(_QWORD *)&v38[4];
          }
          v29 = __PAIR64__(v27, v24) / HIDWORD(v39);
          *(_DWORD *)v38 = v29;
          if ( v29 )
          {
            v30 = v29 * (unsigned __int64)a3;
            v31 = HIDWORD(v30) + v29 * (unsigned __int64)HIDWORD(v39);
            v32 = -(int)v30;
            v33 = (__PAIR64__(v27, v28) - __PAIR64__(HIDWORD(v31), ((_DWORD)v30 != 0) + (unsigned int)v31)) >> 32;
            for ( j = v28 - (((_DWORD)v30 != 0) + v31); v33; v33 += v10 )
            {
              v10 = (*(_QWORD *)v38)-- == 0i64;
              *(_DWORD *)&v38[8] -= v10;
              v10 = __CFADD__(v39, __PAIR64__(j, v32));
              j = (v39 + __PAIR64__(j, v32)) >> 32;
              v32 += v39;
            }
          }
          a1 = *(_QWORD *)v38;
          v35 = v40 - 1;
          if ( v38[8] & 1 )
          {
            HIDWORD(a1) = *(__int64 *)&v38[4] >> 1;
            LODWORD(a1) = *(__int64 *)v38 >> 1;
            v35 = v40;
          }
          if ( v35 <= 0 )
          {
            if ( v35 )
              v36 = -(char)v35;
            else
              v36 = 1;
            LODWORD(a1) = a1 >> v36;
          }
        }
        else
        {
          LODWORD(a1) = 0;
        }
      }
      else
      {
        LODWORD(a1) = 0;
      }
    }
    else if ( a1 || 2 * (_WORD)v9 )
    {
      sub_14328(0, a4);
      LODWORD(a1) = 0;
    }
    else
    {
      sub_14332(0, a4);
      LODWORD(a1) = 0;
    }
  }
  return a1;
}
// 10000: using guessed type void __noreturn sub_10000();

//----- (00015E39) --------------------------------------------------------
int __usercall sub_15E39@<eax>(int a1@<eax>, int a2@<edx>, int a3@<esi>)
{
  unsigned int v3; // ecx
  unsigned int v4; // ebx
  int v5; // esi
  unsigned __int64 v6; // rax

  LOWORD(a3) = *(_WORD *)(a2 + 8);
  v3 = *(_DWORD *)(a2 + 4);
  v4 = *(_DWORD *)a2;
  v5 = a3 << 16;
  LOWORD(v5) = *(_WORD *)(a1 + 8);
  v6 = *(_QWORD *)a1;
  LODWORD(v6) = sub_15EFF(v6, v3, v4, v5);
  *(_QWORD *)v4 = v6;
  *(_WORD *)(v4 + 8) = v5;
  return v6;
}

//----- (00015EFF) --------------------------------------------------------
int __usercall sub_15EFF@<eax>(unsigned __int64 a1@<edx:eax>, unsigned int a2@<ecx>, unsigned int a3@<ebx>, int a4@<esi>)
{
  _BOOL1 v4; // zf
  _BOOL1 v5; // cc
  _BOOL1 v6; // zf
  _BOOL1 v7; // of
  _BOOL1 v8; // of
  int v9; // esi
  int v10; // esi
  _BOOL1 v11; // cf
  unsigned __int16 v12; // si
  int v13; // ecx
  unsigned int v14; // esi
  unsigned int v16; // ecx
  __int16 v17; // cx
  unsigned __int64 v18; // rax
  int v19; // esi
  int v20; // et1
  unsigned int v21; // ecx
  unsigned __int64 v22; // rax
  unsigned int v23; // ecx
  unsigned int v24; // edi
  unsigned __int64 v25; // rax
  unsigned __int64 v26; // kr08_8
  int v27; // ebx
  __int16 v28; // cx
  _BOOL1 v29; // cf
  bool v30; // ett
  _BOOL1 v31; // cf
  int v32; // ett
  int v33; // et2
  __int16 v34; // cx
  unsigned __int64 v36; // [esp-18h] [ebp-18h]
  unsigned int v37; // [esp-10h] [ebp-10h]
  __int16 v38; // [esp-Ch] [ebp-Ch]

  v11 = __CFADD__((_WORD)a4, 1);
  v7 = __OFADD__(1, (_WORD)a4);
  LOWORD(a4) = a4 + 1;
  if ( v11 || v7 )
  {
    if ( (_DWORD)a1 || HIDWORD(a1) != 0x80000000 || a3 || a2 )
    {
      LOWORD(a4) = a4 - 1;
      if ( __CFADD__(sub_10000, a4) || __OFADD__(sub_10000, a4) )
      {
        v4 = HIDWORD(a1) == a2;
        v5 = HIDWORD(a1) <= a2;
        if ( HIDWORD(a1) == a2 )
        {
          v4 = (_DWORD)a1 == a3;
          v5 = (unsigned int)a1 <= a3;
        }
        if ( v5 )
        {
          if ( !v4 )
            goto LABEL_46;
          v6 = (_DWORD)a1 == 0;
          if ( !(_DWORD)a1 )
            v6 = HIDWORD(a1) == 0x80000000;
          if ( v6 )
LABEL_46:
            LODWORD(a1) = a3;
        }
      }
    }
  }
  else
  {
    v11 = __CFADD__(a4, 0xFFFF);
    v8 = __OFADD__(0xFFFF, a4);
    v9 = a4 + 0xFFFF;
    if ( v11 || v8 )
    {
      LODWORD(a1) = a3;
      return a1;
    }
    v10 = v9 - (_DWORD)sub_10000;
    if ( !a1 )
    {
      v11 = __CFADD__((_WORD)v10, (_WORD)v10);
      v12 = 2 * v10;
      if ( !v12 )
        return a1;
      LOWORD(v10) = (v12 >> 1) | (v11 << 15);
    }
    if ( a2 || a3 || (v10 & 0x7FFF0000) != 0 )
    {
      v13 = v10;
      v14 = a2;
      v16 = (((int)__ROL4__(v13, 16) >> 16) & 0x80007FFF) + ((v13 >> 16) & 0x80007FFF);
      v11 = (unsigned __int16)v16 < 0x3FFEu;
      v17 = v16 - 16382;
      if ( !v11 && (unsigned __int16)v17 >= 0x7FFFu )
        goto LABEL_30;
      if ( v17 < -64 )
      {
        LODWORD(a1) = 0;
        return a1;
      }
      v38 = v17;
      v37 = v14;
      v36 = a1;
      v18 = a3 * (unsigned __int64)(unsigned int)a1;
      v20 = v18;
      LODWORD(v18) = v14;
      v19 = v20;
      v21 = HIDWORD(v18);
      v22 = (unsigned int)v36 * (unsigned __int64)(unsigned int)v18;
      v11 = __CFADD__((unsigned int)v22, __PAIR64__(HIDWORD(v22), v21));
      v24 = (v22 + v21) >> 32;
      v23 = v22 + v21;
      v25 = HIDWORD(v36) * (unsigned __int64)a3;
      v26 = v25 + __PAIR64__(v24, v23);
      a1 = __PAIR64__(__CFADD__(v25, __PAIR64__(v24, v23)) + (unsigned int)v11, (v25 + __PAIR64__(v24, v23)) >> 32)
         + v37 * (unsigned __int64)HIDWORD(v36);
      v27 = v26;
      v28 = v38;
      if ( (a1 & 0x8000000000000000i64) == 0i64 )
      {
        v11 = __CFADD__(__PAIR64__(a1, v26), __PAIR64__(a1, v26));
        LODWORD(a1) = __PAIR64__(a1, v26) >> 31;
        v27 = 2 * v26;
        HIDWORD(a1) += v11 + HIDWORD(a1);
        v28 = v38 - 1;
      }
      v29 = __CFADD__(v27, v27);
      if ( __CFADD__(v27, v27) )
      {
        if ( !(2 * v27) )
        {
          v29 = v19 != 0;
          if ( !v19 )
            v29 = a1 & 1;
        }
        v30 = v29;
        v11 = __CFADD__(v29, (_DWORD)a1);
        LODWORD(a1) = v30 + a1;
        v32 = v11;
        v31 = __CFADD__(v11, HIDWORD(a1));
        HIDWORD(a1) += v32;
        if ( v31 )
        {
          v33 = v31 << 31;
          v11 = BYTE4(a1) & 1;
          HIDWORD(a1) = (HIDWORD(a1) >> 1) | v33;
          LODWORD(a1) = ((unsigned int)a1 >> 1) | (v11 << 31);
          if ( ++v28 == 0x7FFF )
          {
LABEL_30:
            LODWORD(a1) = 0;
            return a1;
          }
        }
      }
      if ( v28 <= 0 )
      {
        if ( v28 )
          v34 = -v28;
        else
          LOBYTE(v34) = 1;
        LODWORD(a1) = a1 >> v34;
      }
    }
    else
    {
      LODWORD(a1) = 0;
    }
  }
  return a1;
}
// 10000: using guessed type void __noreturn sub_10000();

//----- (00016070) --------------------------------------------------------
void sub_16070()
{
  JUMPOUT(0x16078);
}
// 16073: control flows out of bounds to 16078

//----- (00016075) --------------------------------------------------------
int __fastcall sub_16075(int *a1)
{
  __int16 v1; // cx
  int v2; // ebx
  unsigned int v3; // eax
  _BOOL1 v4; // cf
  char v5; // ch
  char v6; // ch
  int result; // eax

  v1 = (a1[2] & 0x7FFF) - 16382;
  if ( (a1[2] & 0x7FFFu) < 0x3FFE )
    return 0;
  if ( v1 > 32 || (char)(*((_BYTE *)a1 + 8) + 2) > 32 )
    return 0x80000000;
  HIBYTE(v1) = (*((_BYTE *)a1 + 9) >> 1) | 0x20;
  v2 = *a1;
  v3 = a1[1];
  HIBYTE(v1) = (HIBYTE(v1) >> 1) | (__CFADD__(v2, v2) << 7);
  if ( (_BYTE)v1 == 32 )
  {
    v4 = __CFADD__(HIBYTE(v1), HIBYTE(v1));
    v5 = 2 * HIBYTE(v1);
  }
  else
  {
    v5 = 2 * HIBYTE(v1);
    v4 = __CFADD__(v3 << v1, v3 << v1);
    v3 = (unsigned __int64)v3 << v1 >> 32;
  }
  v6 = ((v4 << 7) | 0x7F) & v5;
  result = __CFADD__(v6, v6) + v3;
  if ( __CFADD__(2 * v6, 2 * v6) )
    result = -result;
  return result;
}

//----- (000160DF) --------------------------------------------------------
int __fastcall sub_160DF(int a1, int a2)
{
  if ( a1 < 0 )
    JUMPOUT(0x160F8);
  return sub_160F0(a1, a2);
}
// 160ED: control flows out of bounds to 160F8

//----- (000160F0) --------------------------------------------------------
int __fastcall sub_160F0(unsigned int a1, int a2)
{
  unsigned int v3; // ecx
  unsigned int v4; // eax
  __int16 v5; // cx
  unsigned int v6; // edx
  int result; // eax

  if ( a1 )
  {
    _BitScanReverse(&v3, a1);
    v4 = a1 << (31 - v3);
    v5 = (unsigned __int8)v3 + 0x3FFF;
    v6 = v4;
  }
  else
  {
    v6 = 0;
    v5 = 0;
  }
  result = 0;
  *(_DWORD *)a2 = 0;
  *(_DWORD *)(a2 + 4) = v6;
  *(_WORD *)(a2 + 8) = v5;
  return result;
}

//----- (00016125) --------------------------------------------------------
int __usercall sub_16125@<eax>(__int64 a1@<edx:eax>, int a2@<ebx>, _BYTE *a3@<ebp>)
{
  int v3; // ecx
  signed __int64 v4; // rax
  int v5; // ecx
  _BOOL1 v6; // zf
  int v7; // et0
  unsigned int v9; // [esp-Ch] [ebp-Ch]

  v3 = HIDWORD(a1);
  v4 = a1 << 11;
  v5 = v3 >> 20;
  LOWORD(v5) = v5 & 0x7FF;
  if ( (_WORD)v5 )
  {
    if ( (_WORD)v5 == 2047 )
    {
      LOWORD(v5) = 0x7FFF;
      v6 = (v4 & 0x7FFFFFFF00000000i64) == 0;
      if ( (v4 & 0x7FFFFFFF00000000i64) == 0 )
        v6 = (_DWORD)v4 == 0;
      if ( !v6 )
      {
        v9 = v4;
        sub_14332(v5, a3);
        v4 = __PAIR64__(HIDWORD(v4), v9) | 0x4000000000000000i64;
      }
    }
    else
    {
      LOWORD(v5) = v5 + 15360;
    }
    HIDWORD(v4) |= 0x80000000;
  }
  else if ( v4 )
  {
    LOWORD(v5) = 15361;
    if ( !HIDWORD(v4) )
    {
      v7 = v4;
      LODWORD(v4) = 0;
      HIDWORD(v4) = v7;
      LOWORD(v5) = 15329;
    }
    while ( v4 >= 0 )
    {
      v4 *= 2i64;
      LOWORD(v5) = v5 - 1;
    }
  }
  else
  {
    v5 = 0;
  }
  *(_QWORD *)a2 = v4;
  *(_WORD *)(a2 + 8) = ((unsigned __int16)(2 * v5) >> 1) | (__CFADD__(v5, v5) << 15);
  return v4;
}

//----- (000161A3) --------------------------------------------------------
unsigned int __fastcall sub_161A3(int a1)
{
  int v2; // edx
  unsigned int v3; // eax
  unsigned int v4; // ecx
  _BOOL1 v5; // cf
  unsigned int result; // eax
  __int16 v7; // bx
  __int16 v8; // cx
  unsigned __int64 v9; // rt0

  v2 = -256;
  v3 = *(_DWORD *)(a1 + 4);
  v4 = v3 << 25;
  LOWORD(v4) = *(_WORD *)(a1 + 8);
  if ( __CFSHL__(v3, 25) )
  {
    if ( !(v3 << 25) && !*(_DWORD *)a1 )
      v2 = -512;
    v5 = __CFADD__(v3, 256);
    v3 += 256;
    if ( v5 )
    {
      v3 = 0x80000000;
      LOWORD(v4) = v4 + 1;
    }
  }
  result = v2 & v3;
  v7 = v4;
  v8 = v4 & 0x7FFF;
  if ( v8 )
  {
    if ( v8 == 0x7FFF )
    {
      result = ((((2 * result) >> 8) | 0xFF000000) >> 1) | (__CFADD__(v7, v7) << 31);
    }
    else
    {
      LOWORD(v4) = v8 - 16256;
      if ( (v4 & 0x8000u) == 0 )
      {
        if ( (__int16)v4 < 255 )
        {
          LODWORD(v9) = 2 * result;
          HIDWORD(v9) = v4;
          result = ((unsigned int)(v9 >> 8) >> 1) | (__CFADD__(v7, v7) << 31);
        }
        else
        {
          result = (__CFADD__(v7, v7) << 31) | 0x7F800000;
        }
      }
      else
      {
        result = 0;
      }
    }
  }
  return result;
}

//----- (00016222) --------------------------------------------------------
int __usercall sub_16222@<eax>(__int64 *a1@<eax>, _BYTE *a2@<ebp>)
{
  __int16 v2; // cx
  unsigned __int64 v3; // rax
  int v4; // esi
  _BOOL1 v5; // cf
  __int16 v6; // cx
  int result; // eax
  unsigned __int8 v8; // cl
  int v9; // [esp-8h] [ebp-14h]

  v2 = *((_WORD *)a1 + 4);
  v3 = *a1;
  v4 = -2048;
  if ( __CFSHL__(v3, 22) )
  {
    if ( !((_DWORD)v3 << 22) )
      v4 = -4096;
    v5 = __CFADD__(v3, 2048i64);
    v3 += 2048i64;
    if ( v5 )
    {
      HIDWORD(v3) = 0x80000000;
      ++v2;
    }
  }
  LODWORD(v3) = v4 & v3;
  v6 = (v2 & 0x7FFF) - 15360;
  if ( (unsigned __int16)v6 >= 0x7FFu )
  {
    if ( (unsigned __int16)v6 < 0xC400u )
    {
      result = v3 >> 11;
      if ( v6 != 17407 )
      {
        v9 = result;
        sub_1433C(v6, a2);
        result = v9;
      }
    }
    else if ( v6 < -52 )
    {
      result = 0;
    }
    else
    {
      v8 = 12 - v6;
      if ( v8 >= 0x20u )
      {
        v8 -= 32;
        v4 = v3;
        v3 = HIDWORD(v3);
      }
      result = ((unsigned int)(__PAIR64__(v3, v4) >> v8) + __PAIR64__(v3 >> (v8 & 0x1F), __PAIR64__(v3, v4) >> v8)) >> 32;
    }
  }
  else if ( v6 )
  {
    result = v3 >> 11;
  }
  else
  {
    result = v3 >> 12;
  }
  return result;
}

//----- (000162EC) --------------------------------------------------------
signed int __fastcall sub_162EC(signed int result, int a2)
{
  int v2; // ecx
  signed int v3; // eax

  v2 = result >> 23;
  LOWORD(v2) = (unsigned __int8)(result >> 23);
  if ( (unsigned __int8)(result >> 23) )
  {
    v3 = result << 8;
    if ( (_BYTE)v2 == 0xFF )
    {
      LOWORD(v2) = -1;
      v3 &= 0x7FFFFFFFu;
      if ( v3 )
        v3 |= 0x40000000u;
    }
    else
    {
      LOWORD(v2) = v2 + 16256;
    }
    LOWORD(v2) = ((unsigned __int16)(2 * v2) >> 1) | (__CFADD__(v2, v2) << 15);
    result = v3 | 0x80000000;
  }
  *(_DWORD *)a2 = 0;
  *(_DWORD *)(a2 + 4) = result;
  *(_WORD *)(a2 + 8) = v2;
  return result;
}

//----- (000163B1) --------------------------------------------------------
unsigned int __fastcall sub_163B1(unsigned int result, __int16 a2)
{
  int v3; // ebx
  _BOOL1 v4; // zf
  __int16 v5; // bx
  char v6; // cc
  __int16 v7; // bx
  int v8; // ecx
  int v9; // eax
  unsigned int v10; // ecx
  _BOOL1 v11; // tt
  _BOOL1 v12; // zf
  _BOOL1 v13; // cf
  int v14; // esi
  int v15; // eax
  unsigned int v16; // esi
  _BOOL1 v17; // tt
  _BOOL1 v18; // zf

  _EDI = result;
  v3 = *(unsigned __int16 *)(result + 8);
  v4 = a2 == 1024;
  if ( a2 != 1024 )
    v4 = a2 == 2048;
  if ( v4 && (v3 & 0x8000) != 0 )
    a2 ^= 0xC00u;
  if ( a2 == 3072 )
    a2 = 1024;
  v5 = v3 & 0x7FFF;
  v6 = v5 < 16447;
  v7 = v5 - 16447;
  if ( v6 )
  {
    v8 = *(_DWORD *)result;
    v6 = ((__int16)(v7 + 32) < 0) ^ __OFADD__(32, v7);
    LOWORD(v3) = v7 + 32;
    if ( !v6 )
    {
      v9 = dword_16331[v3];
      v10 = v9 & v8;
      *(_DWORD *)_EDI ^= v10;
      result = v9 + 1;
      if ( a2 == 1024 )
        return result;
      if ( !a2 )
      {
        v10 *= 2;
        if ( result > v10 )
          return result;
        if ( result == v10 )
        {
          v11 = __CFSHL__(result, 1);
          result = __ROL4__(result, 1);
          if ( v11 )
            v12 = (result & *(_DWORD *)(_EDI + 4)) == 0;
          else
            v12 = (result & *(_DWORD *)_EDI) == 0;
          if ( v12 )
            return result;
          result = __ROR4__(result, 1);
        }
      }
      if ( v10 )
      {
        v13 = __CFADD__(result, *(_QWORD *)_EDI);
        *(_QWORD *)_EDI += result;
        if ( v13 )
        {
          __asm { rcr     dword ptr [edi+4], 1 }
          ++*(_WORD *)(_EDI + 8);
        }
      }
      return result;
    }
    *(_DWORD *)result = 0;
    v14 = *(_DWORD *)(result + 4);
    v6 = ((__int16)(v3 + 32) < 0) ^ __OFADD__(32, (_WORD)v3);
    LOWORD(v3) = v3 + 32;
    if ( v6 )
    {
      if ( a2 != 1024 && (a2 || (_WORD)v3 == 0xFFFF && (v14 != 0x80000000 || v8)) )
      {
        *(_DWORD *)(result + 4) = 0x80000000;
        *(_WORD *)(result + 8) |= 0x3FFFu;
      }
      else
      {
        result = 0;
        *(_DWORD *)(_EDI + 4) = 0;
        *(_WORD *)(_EDI + 8) = 0;
      }
      return result;
    }
    v15 = dword_16331[v3];
    v16 = v15 & v14;
    *(_DWORD *)(_EDI + 4) ^= v16;
    result = v15 + 1;
    if ( a2 == 1024 )
      return result;
    if ( !a2 )
    {
      v17 = __CFSHL__(v8, 1);
      v8 = __ROL4__(v8, 1);
      v16 += v17 + v16;
      if ( result > v16 )
        return result;
      if ( result == v16 )
      {
        if ( v8 )
        {
LABEL_35:
          v13 = __CFADD__(result, *(_DWORD *)(_EDI + 4));
          *(_DWORD *)(_EDI + 4) += result;
          if ( v13 )
          {
            __asm { rcr     dword ptr [edi+4], 1 }
            ++*(_WORD *)(_EDI + 8);
          }
          return result;
        }
        v13 = __CFADD__(result, result);
        v18 = 2 * result == 0;
        result *= 2;
        if ( !v13 )
          v18 = (result & *(_DWORD *)(_EDI + 4)) == 0;
        if ( v18 )
          return result;
        result >>= 1;
      }
    }
    if ( !(v16 | v8) )
      return result;
    goto LABEL_35;
  }
  return result;
}
// 16331: using guessed type int dword_16331[];

//----- (0001653E) --------------------------------------------------------
__int16 __usercall sub_1653E@<ax>(int a1@<eax>, int a2@<edx>, int a3@<ebx>, _BYTE *a4@<ebp>, int a5@<esi>)
{
  char v5; // ch
  char v6; // dl

  if ( 2 * *(_WORD *)(a1 + 8) )
  {
    if ( 2 * *(_WORD *)(a2 + 8) )
    {
      v5 = *(_BYTE *)(a1 + 9);
      sub_15BDE(a1, a2, a4, a5);
      LOWORD(a1) = sub_165F4(a3, a4, a5);
      v6 = *(_BYTE *)(a3 + 9);
      if ( v5 < 0 )
      {
        if ( v6 > 0 )
          LOWORD(a1) = sub_158FE(a3, a5, 0x2168C235u, 0xC90FDAA2, 49152);
      }
      else if ( v6 < 0 )
      {
        LOWORD(a1) = sub_158FE(a3, a5, 0x2168C235u, 0xC90FDAA2, 0x4000);
      }
    }
    else
    {
      LOWORD(a1) = *(_WORD *)(a1 + 8) & 0x8000 | 0x3FFF;
      *(_WORD *)(a3 + 8) = a1;
      *(_DWORD *)(a3 + 4) = -921707870;
      *(_DWORD *)a3 = 560513589;
    }
  }
  else if ( *(char *)(a2 + 9) >= 0 )
  {
    *(_WORD *)(a3 + 8) = 0;
    *(_DWORD *)(a3 + 4) = 0;
    *(_DWORD *)a3 = 0;
  }
  else
  {
    *(_WORD *)(a3 + 8) = 0x4000;
    *(_DWORD *)(a3 + 4) = -921707870;
    *(_DWORD *)a3 = 560513589;
  }
  return a1;
}

//----- (000165F4) --------------------------------------------------------
__int16 __usercall __spoils<> sub_165F4@<ax>(int a1@<eax>, _BYTE *a2@<ebp>, int a3@<esi>)
{
  unsigned __int8 v4; // ch
  char v5; // cl
  __int16 result; // ax
  unsigned __int16 v7; // ax
  _BOOL1 v8; // cc
  int v9; // esi
  __int64 v10; // rax
  unsigned __int64 v11; // rax
  int v12; // esi
  int v13; // esi
  int v14; // ebx
  char v15; // cf
  char v16; // ch
  int v17; // [esp-1Ch] [ebp-24h]
  unsigned int v18; // [esp-18h] [ebp-20h]
  int v19; // [esp-14h] [ebp-1Ch]

  v4 = 0;
  v5 = *(_BYTE *)(a1 + 9);
  *(_BYTE *)(a1 + 9) = v5 & 0x7F;
  if ( *(_WORD *)(a1 + 8) == 0x3FFF && *(_DWORD *)(a1 + 4) == 0x80000000 && !*(_DWORD *)a1 )
  {
    *(_DWORD *)a1 = 560513589;
    *(_DWORD *)(a1 + 4) = -921707870;
    LOBYTE(result) = -2;
    HIBYTE(result) = v5 & 0x80 | 0x3F;
    *(_WORD *)(a1 + 8) = result;
  }
  else
  {
    if ( *(__int16 *)(a1 + 8) >= 0x3FFF )
    {
      LOWORD(a3) = *(_WORD *)(a1 + 8);
      a3 <<= 16;
      LOWORD(a3) = 0x3FFF;
      *(_DWORD *)a1 = sub_15C7E(0x8000000000000000i64, *(_DWORD *)(a1 + 4), *(_DWORD *)a1, a2, a3);
      *(_DWORD *)(a1 + 4) = 0x80000000;
      *(_WORD *)(a1 + 8) = 0x3FFF;
      v4 = 2;
    }
    v7 = *(_WORD *)(a1 + 8);
    v8 = v7 <= 0x3FFDu;
    if ( v7 == 16381 )
      v8 = *(_QWORD *)a1 <= 0x8930A2F4F66AB09Bi64;
    if ( !v8 )
    {
      HIWORD(v9) = 0x3FFF;
      v10 = *(_QWORD *)a1;
      LOWORD(v9) = *(_WORD *)(a1 + 8);
      v19 = sub_159B3(*(_QWORD *)a1, 0xDDB3D742, 0xC265539E, v9);
      v18 = HIDWORD(v10);
      v17 = v9;
      HIWORD(v9) = 0x3FFF;
      v11 = *(_QWORD *)a1;
      LOWORD(v9) = *(_WORD *)(a1 + 8);
      LODWORD(v11) = sub_15EFF(*(_QWORD *)a1, 0xDDB3D742, 0xC265539E, v9);
      v12 = __ROL4__(v9, 16);
      LOWORD(v12) = -16385;
      v13 = __ROL4__(v12, 16);
      LODWORD(v11) = sub_159B3(v11, 0x80000000, 0, v13);
      v14 = v17 << 16;
      LOWORD(v14) = v13;
      a3 = v14;
      *(_DWORD *)a1 = sub_15C7E(v11, v18, v19, a2, v14);
      *(_DWORD *)(a1 + 4) = HIDWORD(v11);
      *(_WORD *)(a1 + 8) = v14;
      v4 |= 1u;
    }
    result = sub_17170(a1, (int)dword_164E4, a3);
    v15 = v4 & 1;
    v16 = v4 >> 1;
    if ( v15 )
      result = sub_158FE(a1, a3, 0x6B9B2C23u, 0x860A91C1, 16382);
    if ( v16 & 1 )
    {
      result = sub_158FE(a1, a3, 0x2168C235u, 0xC90FDAA2, 49151);
      *(_BYTE *)(a1 + 9) ^= 0x80u;
    }
    if ( v5 < 0 )
      *(_BYTE *)(a1 + 9) ^= 0x80u;
  }
  return result;
}
// 164E4: using guessed type int dword_164E4[21];

//----- (00016757) --------------------------------------------------------
int __usercall sub_16757@<eax>(int a1@<eax>, int a2@<edx>, int a3@<edi>)
{
  int result; // eax
  __int16 v4; // si
  unsigned int v5; // ecx
  unsigned int v6; // ebx
  __int64 v7; // rax

  if ( !*(_WORD *)(a1 + 8) && !*(_DWORD *)(a1 + 4) && !*(_DWORD *)a1 )
    return 0;
  if ( *(_WORD *)(a2 + 8) || *(_DWORD *)(a2 + 4) || *(_DWORD *)a2 )
  {
    v4 = *(_WORD *)(a1 + 8);
    LOWORD(a3) = *(_WORD *)(a2 + 8);
    v5 = *(_DWORD *)(a2 + 4);
    v6 = *(_DWORD *)a2;
    v7 = *(_QWORD *)a1;
    *(_DWORD *)a1 = sub_167BD(v7, v5, v6, a3, v4);
    *(_DWORD *)(a1 + 4) = HIDWORD(v7);
    *(_WORD *)(a1 + 8) = v4;
    result = a3;
  }
  else
  {
    *(_DWORD *)a1 = 0;
    *(_DWORD *)(a1 + 4) = 0;
    *(_WORD *)(a1 + 8) = 0;
    result = 0;
  }
  return result;
}

//----- (000167BD) --------------------------------------------------------
int __usercall sub_167BD@<eax>(__int64 a1@<edx:eax>, unsigned int a2@<ecx>, unsigned int a3@<ebx>, __int16 a4@<di>, __int16 a5@<si>)
{
  int v5; // esi
  int v6; // edi
  _BOOL1 v7; // cc
  int v8; // esi
  int v9; // edi
  _BOOL1 v10; // cf
  int v11; // esi
  int v12; // ett

  v5 = a5 & 0x7FFF;
  v6 = a4 & 0x7FFF;
  v7 = v5 < v6;
  v8 = v5 - v6;
  if ( !v7 )
  {
    v9 = 0;
LABEL_3:
    v10 = a2 < HIDWORD(a1);
    if ( a2 == HIDWORD(a1) && (v10 = a3 < (unsigned int)a1, a3 == (_DWORD)a1) || v10 )
    {
LABEL_6:
      a1 -= __PAIR64__(a2, a3);
      v10 = 1;
    }
    while ( 1 )
    {
      v9 += v10 + v9;
      v7 = v8-- < 1;
      if ( v7 )
        break;
      v10 = __CFADD__(a1, a1);
      a1 *= 2i64;
      if ( v10 )
        goto LABEL_6;
      v10 = 0;
      if ( a1 < 0 )
        goto LABEL_3;
    }
    v11 = 0;
    if ( a1 )
    {
      while ( a1 >= 0 )
      {
        v12 = (a1 + (unsigned __int64)(unsigned int)a1) >> 32;
        LODWORD(a1) = 2 * a1;
        HIDWORD(a1) += v12;
        --v11;
      }
    }
  }
  return a1;
}

//----- (00016838) --------------------------------------------------------
char __usercall sub_16838@<al>(int a1@<eax>, int a2@<ebp>, int a3@<edi>)
{
  unsigned __int16 v4; // dx
  char v5; // al
  char v6; // dh
  __int16 v7; // ax
  __int16 v8; // ax
  _BOOL1 v9; // zf
  char result; // al
  __int16 v11; // dx

  v4 = *(__int16 *)((char *)&word_13D42 + a3);
  if ( (*(_WORD *)(a2 + 8) & v4) == v4 )
  {
    v5 = 65;
    v6 = 0;
  }
  else
  {
    *(_WORD *)(a2 + 8) &= ~v4;
    v7 = *(_WORD *)(a1 + 8);
    v6 = 2 * __ROL1__(HIBYTE(v7) & 0x80, 1);
    v8 = v7 & 0x7FFF;
    if ( v8 )
    {
      if ( v8 == 0x7FFF )
      {
        *(_WORD *)(a2 + 8) |= *(__int16 *)((char *)&word_13D40 + a3);
        v9 = *(_DWORD *)a1 == 0;
        if ( !*(_DWORD *)a1 )
          v9 = *(_DWORD *)(a1 + 4) == 0x80000000;
        v5 = 1;
        if ( v9 )
          v5 = 5;
      }
      else
      {
        v5 = 4;
        if ( *(char *)(a1 + 7) >= 0 )
        {
          *(_WORD *)(a2 + 8) |= *(__int16 *)((char *)&word_13D40 + a3);
          v5 = 68;
        }
      }
    }
    else
    {
      v5 = 68;
      if ( !*(_QWORD *)a1 )
      {
        *(_WORD *)(a2 + 8) |= *(__int16 *)((char *)&word_13D3C + a3);
        v5 = 64;
      }
    }
  }
  result = v6 | v5;
  v11 = *(_WORD *)(a2 + 4) & 0xB8FF;
  HIBYTE(v11) |= result;
  *(_WORD *)(a2 + 4) = v11;
  return result;
}
// 13D3C: using guessed type __int16 word_13D3C;
// 13D40: using guessed type __int16 word_13D40;
// 13D42: using guessed type __int16 word_13D42;

//----- (00016926) --------------------------------------------------------
int __usercall sub_16926@<eax>(int a1@<eax>, int a2@<edx>, _BYTE *a3@<ebp>, int a4@<esi>)
{
  sub_158FE(a1, a4, 0, 0x80000000, 0x3FFF);
  return sub_1693F(a1, a2, a3, a4);
}

//----- (0001693F) --------------------------------------------------------
int __usercall sub_1693F@<eax>(int a1@<eax>, int a2@<edx>, _BYTE *a3@<ebp>, int a4@<esi>)
{
  int v4; // esi
  int result; // eax

  sub_16982(a1, a3);
  sub_15E39(a1, a2, a4);
  LOWORD(a4) = *(_WORD *)(a2 + 8);
  v4 = a4 << 16;
  LOWORD(v4) = 0x3FFF;
  result = sub_15EFF(0xB8AA3B295C17F0BDi64, *(_DWORD *)(a2 + 4), *(_DWORD *)a2, v4);
  *(_DWORD *)a2 = result;
  *(_DWORD *)(a2 + 4) = -1196803287;
  *(_WORD *)(a2 + 8) = 0x3FFF;
  return result;
}

//----- (00016982) --------------------------------------------------------
int __usercall sub_16982@<eax>(int a1@<eax>, _BYTE *a2@<ebp>)
{
  __int64 v3; // rax
  _BOOL1 v4; // cc
  __int64 v5; // rax
  int v6; // esi
  unsigned __int64 v7; // rax
  unsigned __int64 v8; // kr00_8
  int v9; // esi
  int v10; // esi
  int v11; // esi
  int v12; // esi
  int v13; // esi
  int v14; // esi
  int v15; // esi
  int v16; // esi
  __int64 v17; // rax
  __int64 v18; // kr08_8
  __int64 v19; // rax
  int v20; // esi
  int v21; // esi
  int v22; // esi
  int v23; // esi
  int v24; // esi
  unsigned int v26; // [esp+4h] [ebp-20h]
  __int16 v27; // [esp+4h] [ebp-20h]
  __int16 v28; // [esp+4h] [ebp-20h]
  unsigned int v29; // [esp+8h] [ebp-1Ch]
  unsigned int v30; // [esp+8h] [ebp-1Ch]
  unsigned int v31; // [esp+8h] [ebp-1Ch]
  int v32; // [esp+Ch] [ebp-18h]
  int v33; // [esp+Ch] [ebp-18h]

  v32 = *(unsigned __int16 *)(a1 + 8) - 16382;
  *(_WORD *)(a1 + 8) = 16382;
  v3 = *(_QWORD *)a1;
  LODWORD(v3) = sub_159B3(v3, 0x80000000, 0, -1073856514);
  v4 = *(_WORD *)(a1 + 8) <= 0x3FFEu;
  if ( *(_WORD *)(a1 + 8) == 16382 )
    v4 = *(_QWORD *)a1 <= 0xB504F333F9DE6484i64;
  if ( v4 )
  {
    *(_QWORD *)a1 = v3;
    *(_WORD *)(a1 + 8) = 16382;
    --v32;
  }
  else
  {
    LODWORD(v3) = sub_159B3(v3, 0x80000000, 0, -1073856514);
  }
  v26 = HIDWORD(v3);
  v29 = v3;
  v5 = *(_QWORD *)a1;
  v6 = (unsigned __int16)(*(_WORD *)(a1 + 8) - 1) | 0x3FFE0000;
  LODWORD(v5) = sub_159B3(*(_QWORD *)a1, 0x80000000, 0, v6);
  v6 <<= 16;
  LOWORD(v6) = 16382;
  v7 = __PAIR64__(v26, sub_15C7E(__PAIR64__(v26, v29), HIDWORD(v5), v5, a2, v6));
  v30 = v7;
  v6 <<= 16;
  LOWORD(v6) = 16382;
  *(_DWORD *)a1 = sub_15EFF(v7, HIDWORD(v7), v7, v6);
  *(_DWORD *)(a1 + 4) = HIDWORD(v7);
  *(_WORD *)(a1 + 8) = 16382;
  sub_1711E((int)&word_168FE, v6);
  v8 = v7;
  HIDWORD(v17) = *(_DWORD *)(a1 + 4);
  LOWORD(v6) = *(_WORD *)(a1 + 8);
  sub_1711E((int)dword_168E0, v6);
  v9 = __ROL4__(v6, 16);
  LOWORD(v9) = 16382;
  v10 = __ROL4__(v9, 16);
  LODWORD(v17) = sub_15C7E(v17, HIDWORD(v8), v8, a2, v10);
  v11 = __ROL4__(v10, 16);
  LOWORD(v11) = *(_WORD *)(a1 + 8);
  v12 = __ROL4__(v11, 16);
  LODWORD(v17) = sub_15EFF(v17, *(_DWORD *)(a1 + 4), *(_DWORD *)a1, v12);
  v13 = __ROL4__(v12, 16);
  LOWORD(v13) = 16382;
  v14 = __ROL4__(v13, 16);
  LODWORD(v17) = sub_15EFF(v17, v26, v30, v14);
  v15 = __ROL4__(v14, 16);
  LOWORD(v15) = 16382;
  v16 = __ROL4__(v15, 16);
  LODWORD(v17) = sub_159B3(v17, v26, v30, v16);
  if ( v32 )
  {
    v18 = v17;
    v27 = v16;
    sub_160DF(v32, a1);
    v19 = *(_QWORD *)a1;
    v20 = *(unsigned __int16 *)(a1 + 8) | 0xBFF20000;
    LODWORD(v19) = sub_15EFF(*(_QWORD *)a1, 0xDE8082E3, 0x865435Cu, v20);
    v21 = __ROL4__(v20, 16);
    LOWORD(v21) = v27;
    v22 = __ROL4__(v21, 16);
    v33 = sub_159B3(v19, HIDWORD(v18), v18, v22);
    v31 = HIDWORD(v19);
    v28 = v22;
    v17 = *(_QWORD *)a1;
    v23 = *(unsigned __int16 *)(a1 + 8) | 0x3FFE0000;
    LODWORD(v17) = sub_15EFF(*(_QWORD *)a1, 0xB1800000, 0, v23);
    v24 = __ROL4__(v23, 16);
    LOWORD(v24) = v28;
    v16 = __ROL4__(v24, 16);
    LODWORD(v17) = sub_159B3(v17, v31, v33, v16);
  }
  *(_QWORD *)a1 = v17;
  *(_WORD *)(a1 + 8) = v16;
  return v17;
}
// 16A61: variable 'v7' is possibly undefined
// 16A88: variable 'v17' is possibly undefined
// 168E0: using guessed type int dword_168E0[7];
// 168FE: using guessed type __int16;

//----- (00016C1A) --------------------------------------------------------
int __usercall sub_16C1A@<eax>(int a1@<eax>, int a2@<esi>)
{
  __int16 v2; // si
  __int64 v3; // rax
  char v4; // al
  int v5; // edi
  int v6; // esi
  __int16 v7; // ax
  int v8; // ecx
  __int16 v9; // ax
  unsigned __int64 v10; // rax
  unsigned __int64 v11; // rax
  int v12; // esi
  unsigned int v13; // ecx
  unsigned int v14; // ebx
  __int16 v16; // [esp-4h] [ebp-1Ch]
  __int16 v19; // [esp+4h] [ebp-14h]
  unsigned __int64 v20; // [esp+Ch] [ebp-Ch]
  __int16 v21; // [esp+14h] [ebp-4h]
  _BYTE savedregs[20]; // [esp+18h] [ebp+0h] BYREF

  v2 = *(_WORD *)(a1 + 8);
  v3 = *(_QWORD *)a1;
  *(_DWORD *)a1 = sub_167BD(v3, 0xC90FDAA2, 0x2168C235u, 16382, v2);
  *(_DWORD *)(a1 + 4) = HIDWORD(v3);
  *(_WORD *)(a1 + 8) = v2;
  v4 = -2;
  v5 = a1;
  v6 = a2;
  if ( *(char *)(a1 + 9) < 0 )
  {
    sub_158FE(a1, a2, 0x2168C235u, 0xC90FDAA2, 16382);
    v4 = -3;
  }
  HIBYTE(v7) = a2;
  LOBYTE(v7) = ((a2 & 2) + v4) & 7;
  v19 = v7;
  if ( (v7 & 1) != 0 )
  {
    sub_158FE(v5, v6, 0x2168C235u, 0xC90FDAA2, 49150);
    *(_BYTE *)(v5 + 9) ^= 0x80u;
  }
  v8 = (unsigned __int16)(*(_WORD *)(v5 + 8) - 16382);
  if ( (__int16)v8 >= -32 )
  {
    if ( (v8 & 0x8000u) == 0 )
      LOWORD(v8) = 0;
    LOWORD(v8) = -(__int16)v8;
    if ( (__int16)v8 > 8 )
      LOWORD(v8) = 8;
    LOWORD(v8) = word_16C08[v8];
    HIBYTE(v9) = HIBYTE(v19);
    LOBYTE(v9) = (v19 + 1) & 2;
    if ( (_BYTE)v9 || HIBYTE(v19) == 1 )
    {
      v16 = v9;
      v10 = *(_QWORD *)v5;
      LOWORD(v6) = *(_WORD *)(v5 + 8);
      v6 <<= 16;
      LOWORD(v6) = *(_WORD *)(v5 + 8);
      sub_15EFF(*(_QWORD *)v5, *(_DWORD *)(v5 + 4), *(_DWORD *)v5, v6);
      sub_1711E((int)&word_16BAE[5 * v8], v6);
      v20 = v10;
      v21 = v6;
      v9 = v16;
    }
    if ( !(_BYTE)v9 || HIBYTE(v9) == 1 )
      sub_17170(v5, (int)dword_16B54 + 10 * v8, v6);
  }
  else
  {
    v20 = 0x8000000000000000i64;
    v21 = 0x3FFF;
  }
  if ( (((_BYTE)v19 + 1) & 2) != 0 )
  {
    v11 = v20;
    LOWORD(v6) = v21;
  }
  else
  {
    v11 = *(_QWORD *)v5;
    LOWORD(v6) = *(_WORD *)(v5 + 8);
  }
  if ( (v19 & 4) != 0 )
    LOWORD(v6) = v6 ^ 0x8000;
  if ( HIBYTE(v19) == 1 )
  {
    v12 = __ROL4__(v6, 16);
    if ( (((_BYTE)v19 + 3) & 2) != 0 )
    {
      v13 = HIDWORD(v20);
      v14 = v20;
      LOWORD(v12) = v21;
    }
    else
    {
      v14 = *(_DWORD *)v5;
      v13 = *(_DWORD *)(v5 + 4);
      LOWORD(v12) = *(_WORD *)(v5 + 8);
    }
    if ( (((_BYTE)v19 + 2) & 4) != 0 )
      v12 ^= 0x8000u;
    v6 = __ROL4__(v12, 16);
    if ( v14 || v13 || (v6 & 0x7FFF0000) != 0 )
    {
      LODWORD(v11) = sub_15C7E(v11, v13, v14, savedregs, v6);
    }
    else
    {
      v11 = 0x8000000000000000i64;
      LOWORD(v6) = v6 | 0x7FFF;
    }
  }
  *(_QWORD *)v5 = v11;
  *(_WORD *)(v5 + 8) = v6;
  return v11;
}
// 16D44: variable 'v10' is possibly undefined
// 16D81: variable 'v20' is possibly undefined
// 16D87: variable 'v21' is possibly undefined
// 16B54: using guessed type int dword_16B54[21];
// 16BAE: using guessed type __int16 word_16BAE[];
// 16C08: using guessed type __int16 word_16C08[];

//----- (00016E11) --------------------------------------------------------
int __fastcall sub_16E11(int a1)
{
  return sub_16C1A(a1, 0);
}

//----- (00016E1B) --------------------------------------------------------
int __fastcall sub_16E1B(int a1)
{
  return sub_16C1A(a1, 2);
}

//----- (00016E28) --------------------------------------------------------
int __fastcall sub_16E28(int a1)
{
  return sub_16C1A(a1, 1);
}

//----- (00016E5E) --------------------------------------------------------
int __fastcall sub_16E5E(int a1, int a2, int a3, int a4)
{
  int v5; // esi
  __int16 v6; // cx
  _BOOL1 v7; // zf
  unsigned __int16 v8; // bx
  int v9; // ecx
  signed __int64 v10; // rax
  _BOOL1 v11; // cf
  __int16 v12; // bx
  unsigned __int64 v13; // rax
  int v14; // esi
  int v15; // esi
  int v16; // esi
  int v17; // esi
  int v18; // esi
  int v19; // esi
  int v20; // esi
  int v21; // esi
  int v22; // esi
  int v23; // esi
  int v24; // esi
  int v25; // esi
  unsigned __int64 v26; // rax
  unsigned int v27; // ecx
  int (*v28)(); // esi
  int v29; // eax
  int v30; // et0
  int v31; // esi
  __int32 v33; // [esp-2Ch] [ebp-38h] BYREF
  unsigned int v34; // [esp-28h] [ebp-34h] BYREF
  unsigned int v35; // [esp-24h] [ebp-30h] BYREF
  __int32 v36; // [esp-20h] [ebp-2Ch] BYREF
  unsigned int v37; // [esp-1Ch] [ebp-28h] BYREF
  unsigned int v38; // [esp-18h] [ebp-24h] BYREF
  int v39; // [esp-14h] [ebp-20h]
  int v40; // [esp-10h] [ebp-1Ch]
  int v41; // [esp-8h] [ebp-14h]

  v41 = a4;
  v5 = 0;
  v6 = *(_WORD *)(a1 + 8);
  *(_BYTE *)(a1 + 9) &= 0x7Fu;
  v7 = *(_WORD *)(a1 + 8) == 0;
  if ( !*(_WORD *)(a1 + 8) )
    v7 = *(_QWORD *)a1 == 0i64;
  if ( v7 )
  {
    v9 = 0;
  }
  else
  {
    if ( v6 < 0 )
    {
      v5 = -1;
      sub_158FE(a1, -1, 0, 0x80000000, 49151);
      *(_BYTE *)(a1 + 9) ^= 0x80u;
    }
    v8 = *(_WORD *)(a1 + 8) + 4;
    v9 = 0;
    v10 = *(_QWORD *)a1;
    while ( v8 >= 0x3FFFu )
    {
      v11 = __CFADD__(v10, v10);
      v10 *= 2i64;
      v9 += v11 + v9;
      --v8;
    }
    if ( v10 )
    {
      while ( v10 >= 0 )
      {
        v10 *= 2i64;
        --v8;
      }
      v12 = v8 - 4;
    }
    else
    {
      v12 = 0;
    }
    *(_QWORD *)a1 = v10;
    *(_WORD *)(a1 + 8) = v12;
  }
  v40 = v5;
  v39 = v9;
  v13 = *(_QWORD *)a1;
  LOWORD(v5) = *(_WORD *)(a1 + 8);
  v14 = v5 << 16;
  LOWORD(v14) = *(_WORD *)(a1 + 8);
  LODWORD(v13) = sub_15EFF(*(_QWORD *)a1, *(_DWORD *)(a1 + 4), *(_DWORD *)a1, v14);
  v37 = HIDWORD(v13);
  v38 = v13;
  v36 = v14;
  v15 = (unsigned __int16)v14 | 0x40030000;
  LODWORD(v13) = _InterlockedExchange((volatile __int32 *)&v38, sub_159B3(v13, 0xA6829A79, 0x1BF21F8Cu, v15));
  HIDWORD(v13) = _InterlockedExchange((volatile __int32 *)&v37, SHIDWORD(v13));
  v16 = (unsigned __int16)_InterlockedExchange(&v36, v15) | 0x3FFA0000;
  LODWORD(v13) = sub_15EFF(v13, 0xEC96F0D6, 0x9D7BFDBu, v16);
  v17 = (unsigned __int16)v16 | 0x40010000;
  LODWORD(v13) = sub_159B3(v13, 0xE6D5051A, 0xE536E187, v17);
  v18 = __ROL4__(v17, 16);
  LOWORD(v18) = *(_WORD *)(a1 + 8);
  v19 = __ROL4__(v18, 16);
  LODWORD(v13) = sub_15EFF(v13, *(_DWORD *)(a1 + 4), *(_DWORD *)a1, v19);
  v34 = HIDWORD(v13);
  v35 = v13;
  v33 = v19;
  v20 = __ROL4__(v19 ^ 0x8000, 16);
  LOWORD(v20) = v36;
  v21 = __ROL4__(v20, 16);
  LODWORD(v13) = _InterlockedExchange((volatile __int32 *)&v35, sub_159B3(v13, v37, v38, v21));
  HIDWORD(v26) = _InterlockedExchange((volatile __int32 *)&v34, SHIDWORD(v13));
  v22 = __ROL4__(_InterlockedExchange(&v33, v21), 16);
  LOWORD(v22) = v36;
  v23 = __ROL4__(v22, 16);
  LODWORD(v26) = sub_159B3(v26, v37, v38, v23);
  v24 = __ROL4__(v23, 16);
  LOWORD(v24) = v33;
  v25 = __ROL4__(v24, 16);
  LODWORD(v26) = sub_15C7E(v26, v34, v35, &v36, v25);
  *(_QWORD *)a1 = v26;
  *(_WORD *)(a1 + 8) = v25;
  v27 = v39;
  v28 = sub_16E36;
  while ( v27 )
  {
    v11 = v27 & 1;
    v27 >>= 1;
    if ( v11 )
    {
      v39 = v27;
      v38 = (unsigned int)v28;
      LOWORD(v26) = *(_WORD *)(a1 + 8);
      v29 = (_DWORD)v26 << 16;
      LOWORD(v29) = *((_WORD *)v28 + 4);
      v30 = v29;
      v26 = *(_QWORD *)v28;
      LODWORD(v26) = sub_15EFF(*(_QWORD *)v28, *(_DWORD *)(a1 + 4), *(_DWORD *)a1, v30);
      *(_QWORD *)a1 = v26;
      *(_WORD *)(a1 + 8) = v30;
      v28 = (int (*)())v38;
      v27 = v39;
    }
    v28 = (int (*)())((char *)v28 + 10);
  }
  v31 = v40;
  *(_WORD *)(a1 + 8) += v40;
  return sub_158FE(a1, v31, 0, 0x80000000, 49151);
}
// 16E36: using guessed type int sub_16E36();

//----- (00017032) --------------------------------------------------------
int __fastcall sub_17032(unsigned __int64 a1)
{
  __int16 v1; // cx
  unsigned int v2; // ebx
  unsigned __int16 v3; // cx
  __int16 v4; // cx
  int v5; // edi
  __int16 v6; // cx
  __int16 v7; // cx
  int v8; // et2
  unsigned int v9; // ecx
  unsigned int v10; // esi
  unsigned int v11; // eax
  unsigned int v12; // edx
  unsigned __int64 v13; // rt2
  unsigned int v14; // esi
  unsigned int v15; // esi
  unsigned int v16; // ecx
  unsigned int v17; // eax
  _BOOL1 v18; // cf
  int v19; // eax
  int v20; // et2
  bool v21; // ett
  _DWORD *v23; // [esp-10h] [ebp-18h]

  v1 = *(_WORD *)(a1 + 8);
  v2 = *(_DWORD *)a1;
  if ( *(_DWORD *)a1 )
    goto LABEL_7;
  if ( *(_DWORD *)(a1 + 4) )
  {
    if ( v1 == 0x7FFF )
      return a1;
LABEL_7:
    if ( (v1 & 0x7FFF) == 0x7FFF )
      goto LABEL_5;
    v18 = __CFADD__(v1, v1);
    v3 = 2 * v1;
    if ( v18 )
      goto LABEL_5;
    v4 = v3 >> 1;
    if ( v4 && !__CFADD__(*(_DWORD *)(a1 + 4), *(_DWORD *)(a1 + 4)) )
    {
LABEL_4:
      *(_WORD *)(a1 + 8) = -1;
      *(_DWORD *)(a1 + 4) = 0;
      *(_DWORD *)a1 = 0;
LABEL_5:
      *(_BYTE *)(a1 + 7) |= 0xC0u;
      return a1;
    }
    HIDWORD(a1) = *(_DWORD *)(a1 + 4);
    v5 = 0;
    v23 = (_DWORD *)a1;
    v6 = v4 - 0x3FFF;
    v18 = v6 & 1;
    v7 = v6 >> 1;
    if ( !v18 )
    {
      v18 = BYTE4(a1) & 1;
      HIDWORD(a1) >>= 1;
      v8 = v18 << 31;
      v18 = v2 & 1;
      v2 = (v2 >> 1) | v8;
      v5 = v18 << 31;
    }
    *(_WORD *)(a1 + 8) = v7 + 0x3FFF;
    v9 = HIDWORD(a1);
    LODWORD(a1) = v2;
    v10 = (HIDWORD(a1)++ >> 1) | 0x80000000;
    if ( HIDWORD(a1) )
    {
      --HIDWORD(a1);
      while ( 1 )
      {
        v13 = a1 % v10;
        v11 = a1 / v10;
        v12 = v13;
        v14 = v10 - 1;
        if ( v14 <= v11 )
          break;
        v10 = ((v11 + v14 + 1) >> 1) | (__CFADD__(v11, v14 + 1) << 31);
        a1 = __PAIR64__(v9, v2);
      }
      v15 = v14 + 1;
      v16 = v11;
      v17 = __PAIR64__(v12, v5) / v15;
      v10 = v16 + v15;
    }
    else
    {
      v18 = v2 < v10;
      if ( v2 == v10 )
      {
LABEL_21:
        *v23 = a1;
        v23[1] = v10 + v18;
        return a1;
      }
      v17 = __PAIR64__(v2, v5) / v10;
    }
    v18 = v10 & 1;
    v10 = (v10 >> 1) | 0x80000000;
    v20 = v18 << 31;
    v18 = v17 & 1;
    v19 = (v17 >> 1) | v20;
    v21 = v18;
    v18 = __CFADD__(v18, v19);
    LODWORD(a1) = v21 + v19;
    goto LABEL_21;
  }
  if ( 2 * v1 )
    goto LABEL_4;
  return a1;
}

//----- (0001711E) --------------------------------------------------------
void __usercall sub_1711E(int a1@<ecx>, int a2@<esi>)
{
  int v2; // edi
  unsigned __int64 v3; // rax
  int v4; // esi
  int v5; // esi
  int v6; // esi
  unsigned int vars0; // [esp+0h] [ebp+0h]
  unsigned int vars4; // [esp+4h] [ebp+4h]
  __int16 vars8; // [esp+8h] [ebp+8h]
  int varsC; // [esp+Ch] [ebp+Ch]

  v2 = a1;
  v3 = *(_QWORD *)a1;
  LOWORD(a2) = *(_WORD *)(a1 + 8);
  do
  {
    v4 = __ROL4__(a2, 16);
    LOWORD(v4) = vars8;
    v5 = __ROL4__(v4, 16);
    LODWORD(v3) = sub_15EFF(v3, vars4, vars0, v5);
    v2 += 10;
    v6 = __ROL4__(v5, 16);
    LOWORD(v6) = *(_WORD *)(v2 + 8);
    a2 = __ROL4__(v6, 16);
    LODWORD(v3) = sub_159B3(v3, *(_DWORD *)(v2 + 4), *(_DWORD *)v2, a2);
    --varsC;
  }
  while ( varsC );
}
// 17138: variable 'vars8' is possibly undefined
// 17145: variable 'vars4' is possibly undefined
// 17145: variable 'vars0' is possibly undefined
// 17164: variable 'varsC' is possibly undefined

//----- (00017170) --------------------------------------------------------
int __usercall sub_17170@<eax>(int a1@<eax>, int a2@<edx>, int a3@<esi>)
{
  int v4; // esi
  int v5; // esi
  int v6; // esi
  unsigned __int64 v7; // rax

  v7 = *(_QWORD *)a1;
  LOWORD(a3) = *(_WORD *)(a1 + 8);
  v4 = a3 << 16;
  LOWORD(v4) = *(_WORD *)(a1 + 8);
  sub_15EFF(v7, *(_DWORD *)(a1 + 4), v7, v4);
  sub_1711E(a2, v4);
  v5 = __ROL4__(v4, 16);
  LOWORD(v5) = *(_WORD *)(a1 + 8);
  v6 = __ROL4__(v5, 16);
  LODWORD(v7) = sub_15EFF(v7, *(_DWORD *)(a1 + 4), *(_DWORD *)a1, v6);
  *(_QWORD *)a1 = v7;
  *(_WORD *)(a1 + 8) = v6;
  return v7;
}
// 171A6: variable 'v7' is possibly undefined

//----- (000171B8) --------------------------------------------------------
char __fastcall sub_171B8(int a1, __int16 a2)
{
  char v3; // ah
  unsigned __int32 v4; // eax

  __asm { int     2Fh; - Multiplex - MS WINDOWS - ENHANCED WINDOWS INSTALLATION CHECK }
  if ( a1 || a2 )
  {
    __asm { int     31h; DPMI Services   ax=func xxxxh }
    dos_setvect(7, a2, _int7, __CS__);
    v3 = *MK_FP(a2, a1 + 64);
    *MK_FP(a2, a1 + 62) = 1;
    *MK_FP(a2, a1 + 64) = v3 | 4;
    v4 = __readcr0();
    LOBYTE(v4) = v4 | 4;
    __writecr0(v4);
    __asm { int     21h; DOS - GET DOS VERSION }
    byte_20694 = 1;
  }
  return 0;
}
// 14110: using guessed type int _int7();
// 181CE: using guessed type int __fastcall dos_setvect(_DWORD, _DWORD, _DWORD, _DWORD);
// 20694: using guessed type char byte_20694;
// 20695: using guessed type char byte_20695;

//----- (00017282) --------------------------------------------------------
char __fastcall sub_17282(int a1, __int16 a2)
{
  char result; // al
  char v3; // bl
  unsigned __int32 v4; // eax

  if ( byte_20695 )
  {
    __asm
    {
      int     2Fh
      int     2Fh
    }
    result = 1;
  }
  else
  {
    if ( byte_20694 )
    {
      v3 = *MK_FP(a2, a1 + 64);
      *MK_FP(a2, a1 + 62) = byte_20695;
      *MK_FP(a2, a1 + 64) = v3 & 0xFB;
      v4 = __readcr0();
      LOBYTE(v4) = v4 & 0xFB;
      __writecr0(v4);
      __asm { int     21h; DOS - GET DOS VERSION }
    }
    result = 0;
  }
  return result;
}
// 20694: using guessed type char byte_20694;
// 20695: using guessed type char byte_20695;

//----- (00017303) --------------------------------------------------------
int __fastcall sub_17303(int a1)
{
  int v1; // edx
  int result; // eax

  if ( a1 == dword_205F8 )
    dword_205F8 = *(_DWORD *)(dword_205F8 + 8);
  if ( a1 == dword_205FC )
  {
    dword_205FC = *(_DWORD *)(dword_205FC + 4);
    if ( !dword_205FC )
    {
      dword_205FC = dword_205F8;
      dword_20600 = 0;
    }
  }
  if ( a1 == dword_20CA8 )
    dword_20CA8 = 0;
  v1 = *(_DWORD *)(a1 + 4);
  result = *(_DWORD *)(a1 + 8);
  if ( v1 )
    *(_DWORD *)(v1 + 8) = result;
  if ( result )
    *(_DWORD *)(result + 4) = v1;
  return result;
}
// 205F8: using guessed type int dword_205F8;
// 205FC: using guessed type int dword_205FC;
// 20600: using guessed type int dword_20600;
// 20CA8: using guessed type int dword_20CA8;

//----- (0001736E) --------------------------------------------------------
// __FreeDPMIBlocks_
void _FreeDPMIBlocks()
{
  int v0; // edx
  int v1; // ebx
  int v2; // ecx

  v0 = dword_205F8;
  while ( v0 )
  {
    if ( **(_DWORD **)(v0 + 36) + 44 == *(_DWORD *)v0 )
    {
      v1 = v0 - 8;
      v2 = *(_DWORD *)(v0 + 8);
      sub_17303(v0);
      v0 = v2;
      if ( *(_DWORD *)(v1 + 4) )
      {
        _EAX = *(_DWORD *)(v1 + 4);
        BYTE1(_EAX) = 73;
        __asm
        {
          int     21h; DOS - 2+ - FREE MEMORY
          rcl     eax, 1
        }
      }
      else
      {
        __asm { int     31h; DPMI Services   ax=func xxxxh }
      }
    }
    else
    {
      v0 = *(_DWORD *)(v0 + 8);
    }
  }
  JUMPOUT(0x1764F);
}
// 1737B: control flows out of bounds to 1764F
// 205F8: using guessed type int dword_205F8;

//----- (000174C1) --------------------------------------------------------
_DWORD *__fastcall sub_174C1(int *a1)
{
  unsigned int v2; // eax
  unsigned int v3; // ebx
  _DWORD *v4; // ebx
  int v5; // eax
  _DWORD *v6; // edx

  v2 = dword_205F8;
  v3 = 0;
  while ( v2 && (unsigned int)a1 >= v2 )
  {
    v3 = v2;
    v2 = *(_DWORD *)(v2 + 8);
  }
  a1[1] = v3;
  a1[2] = v2;
  if ( v3 )
    *(_DWORD *)(v3 + 8) = a1;
  else
    dword_205F8 = (int)a1;
  if ( v2 )
    *(_DWORD *)(v2 + 4) = a1;
  v4 = a1 + 8;
  v5 = *a1;
  v6 = a1 + 11;
  *(v6 - 3) = 0;
  *(v6 - 7) = 0;
  *(v6 - 5) = 0;
  *(v6 - 4) = 0;
  *(v6 - 2) = v4;
  *(v6 - 1) = v4;
  v5 -= 44;
  *(v6 - 8) = v4;
  *v6 = v5;
  *(_DWORD *)((char *)v6 + v5) = -1;
  return v6;
}
// 205F8: using guessed type int dword_205F8;

//----- (00017535) --------------------------------------------------------
int sub_17535()
{
  int *v0; // edx
  int v1; // ebx
  int result; // eax

  if ( !dword_205F8 )
    goto LABEL_8;
  v0 = *(int **)(dword_205F8 + 36);
  v1 = (int)v0 + *v0 + 4;
  if ( (unsigned __int8)byte_201D2 >= 2u && (unsigned __int8)byte_201D2 <= 8u && !byte_201D4 )
    dword_201A4 = __segmentlimit((unsigned __int16)__DS__) + 1;
  if ( v1 == dword_201A4 )
    result = *v0;
  else
LABEL_8:
    result = 0;
  return result;
}
// 201A4: using guessed type int dword_201A4;
// 201D2: using guessed type char byte_201D2;
// 201D4: using guessed type char byte_201D4;
// 205F8: using guessed type int dword_205F8;

//----- (00017584) --------------------------------------------------------
_DWORD *__usercall sub_17584@<eax>(unsigned int a1@<eax>, __int16 a2@<di>, __int16 a3@<si>)
{
  unsigned int v4; // ebx
  char v5; // cf
  _DWORD *result; // eax
  int v10; // edx
  int v12; // esi
  unsigned int v14; // eax
  unsigned int v15; // [esp+0h] [ebp-18h]

  v15 = a1;
  v4 = HIWORD(a1);
  _FreeDPMIBlocks();
  __asm { int     31h; DPMI Services   ax=func xxxxh }
  _EAX = 1 - v5;
  if ( v5 != 1 )
  {
    LOWORD(_EAX) = v4;
    _EAX <<= 16;
    LOWORD(_EAX) = a1;
    *(_WORD *)_EAX = a2;
    *(_WORD *)(_EAX + 2) = a3;
  }
  if ( _EAX )
  {
    *(_DWORD *)(_EAX + 8) = v15 - 8;
    *(_DWORD *)(_EAX + 4) = 0;
    result = (_DWORD *)(_EAX + 8);
  }
  else
  {
    if ( (word_2118E & 0xFFF0) != 0 )
      unk_2118C = 0xFFFFF;
    if ( v15 > (unsigned int)sub_10000 )
      goto LABEL_11;
    BYTE1(_EAX) = 72;
    __asm
    {
      int     21h; DOS - 2+ - ALLOCATE MEMORY
      rcl     eax, 1
    }
    _EAX = __ROR4__(_EAX, 1);
    v10 = _EAX;
    if ( _EAX < 0 )
      goto LABEL_11;
    BYTE1(_EAX) = 72;
    __asm
    {
      int     21h; DOS - 2+ - ALLOCATE MEMORY
      rcl     eax, 1
    }
    v12 = __ROR4__(_EAX, 1);
    _EAX = v10;
    BYTE1(_EAX) = 73;
    __asm
    {
      int     21h; DOS - 2+ - FREE MEMORY
      rcl     eax, 1
    }
    if ( v12 < 0 )
    {
LABEL_11:
      result = 0;
    }
    else
    {
      __asm { int     31h; DPMI Services   ax=func xxxxh }
      v14 = a1 << 16;
      LOWORD(v14) = v10;
      result = (_DWORD *)(v14 + 8);
      *(result - 1) = v12;
      *result = v15 - 8;
    }
  }
  return result;
}
// 1759E: variable 'v5' is possibly undefined
// 10000: using guessed type void __noreturn sub_10000();
// 2118E: using guessed type __int16 word_2118E;

//----- (00017655) --------------------------------------------------------
void __usercall sub_17655(unsigned int a1@<eax>, unsigned int a2@<edx>, unsigned int a3@<ecx>, __int16 a4@<di>, __int16 a5@<si>)
{
  unsigned int *v5; // eax
  int *v6; // edx
  unsigned int v7; // eax
  unsigned int *v8; // ebx
  unsigned int v9; // eax
  int v10; // edi
  unsigned int v11[6]; // [esp+0h] [ebp-18h] BYREF

  v11[4] = a3;
  v11[3] = a2;
  v11[0] = a1;
  if ( dword_207C8 && dword_201A4 != -2 && sub_1784C(v11) )
  {
    if ( byte_201D2 == 1 )
    {
      v5 = sub_17584(v11[0], a4, a5);
      v6 = (int *)v5;
      if ( v5 )
        v11[0] = *v5;
    }
    else
    {
      __asm { int     21h; DOS - 2+ - ALLOCATE MEMORY }
      v6 = (int *)(byte_201D2 == 0 ? 0 : 0x80004800);
      v11[0] -= 4;
    }
    if ( v6 )
    {
      v7 = v11[0] - 4;
      if ( v11[0] - 4 <= v11[0] )
      {
        v11[0] -= 4;
        if ( v7 >= 0x38 )
        {
          *v6 = v7;
          v8 = sub_174C1(v6);
          v9 = *v8;
          v11[0] = v9;
          LOBYTE(v9) = v9 | 1;
          *v8 = v9;
          v10 = v6[6];
          v6[5] = 0;
          v6[6] = v10 + 1;
          sub_11C83((unsigned int)(v8 + 1));
        }
      }
    }
  }
  JUMPOUT(0x1764C);
}
// 17666: control flows out of bounds to 1764C
// 201A4: using guessed type int dword_201A4;
// 201D2: using guessed type char byte_201D2;
// 207C8: using guessed type int dword_207C8;

//----- (00017702) --------------------------------------------------------
void __usercall sub_17702(unsigned int a1@<eax>, unsigned int a2@<edx>, unsigned int a3@<ecx>, __int16 a4@<di>, __int16 a5@<si>)
{
  unsigned int v5; // edx
  unsigned int v6; // eax
  int *v7; // ebx
  int v8; // eax
  int *v9; // edx
  unsigned int *v10; // eax
  unsigned int *v11; // ebx
  unsigned int v12; // eax
  unsigned int v13[6]; // [esp+0h] [ebp-18h] BYREF

  v13[0] = a1;
  if ( byte_201D2 == 1 && !byte_201D3 || byte_201D2 == 9 )
  {
    sub_17655(v13[0], a2, a3, a4, a5);
    return;
  }
  if ( dword_207C8 && dword_201A4 != -2 && sub_1784C(v13) )
  {
    if ( (unsigned __int8)byte_201D2 >= 2u && (unsigned __int8)byte_201D2 <= 8u && !byte_201D4 )
      dword_201A4 = __segmentlimit((unsigned __int16)__DS__) + 1;
    v5 = dword_201A4 + v13[0];
    if ( dword_201A4 + v13[0] < dword_201A4 )
      v5 = -2;
    v6 = _brk(v5);
    if ( v6 != -1 )
    {
      v7 = (int *)v6;
      if ( v6 <= 0xFFFFFFF8 && v5 > v6 )
      {
        v13[0] = v5 - v6;
        v8 = v5 - v6 - 4;
        if ( v13[0] - 4 <= v13[0] )
        {
          v9 = (int *)dword_205F8;
          v13[0] = v8;
          while ( v9 && v9[2] && (v9 > v7 || (int *)((char *)v9 + *v9 + 4) < v7) )
            v9 = (int *)v9[2];
          if ( v9 )
          {
            v10 = (unsigned int *)((char *)v9 + *v9);
            if ( v7 - 1 == (int *)v10 )
            {
              v13[0] += 4;
              *v9 += v13[0];
              v11 = v10;
              *(unsigned int *)((char *)v10 + v13[0]) = -1;
LABEL_30:
              v12 = v13[0];
              LOBYTE(v12) = LOBYTE(v13[0]) | 1;
              *v11 = v12;
              ++v9[6];
              v9[5] = -1;
              sub_11C83((unsigned int)(v11 + 1));
              return;
            }
          }
          if ( v13[0] >= 0x38 )
          {
            *v7 = v13[0];
            v9 = v7;
            v11 = sub_174C1(v7);
            v13[0] = *v11;
            goto LABEL_30;
          }
        }
      }
    }
  }
}
// 182C9: using guessed type int __fastcall _brk(_DWORD);
// 201A4: using guessed type int dword_201A4;
// 201D2: using guessed type char byte_201D2;
// 201D3: using guessed type char byte_201D3;
// 201D4: using guessed type char byte_201D4;
// 205F8: using guessed type int dword_205F8;
// 207C8: using guessed type int dword_207C8;

//----- (0001784C) --------------------------------------------------------
bool __fastcall sub_1784C(unsigned int *a1)
{
  int v2; // edx
  int v4; // edx
  unsigned int v5; // edx
  unsigned int v6; // edx

  v2 = *a1 + 7;
  LOBYTE(v2) = v2 & 0xF8;
  if ( !v2 )
    return 0;
  v4 = byte_201D2 == 1 && !byte_201D3 || byte_201D2 == 9 ? v2 + 8 : v2 - sub_17535();
  *a1 = v4;
  v5 = v4 + 60;
  if ( v5 < *a1 )
    return 0;
  if ( v5 < dword_207A8 )
  {
    v5 = dword_207A8;
    LOBYTE(v5) = dword_207A8 & 0xFE;
  }
  *a1 = v5;
  v6 = v5 + 4095;
  if ( v6 < *a1 )
    return 0;
  LOWORD(v6) = v6 & 0xF000;
  *a1 = v6;
  return v6 != 0;
}
// 201D2: using guessed type char byte_201D2;
// 201D3: using guessed type char byte_201D3;
// 207A8: using guessed type int dword_207A8;

//----- (000178C3) --------------------------------------------------------
int sub_178C3()
{
  return 0;
}

//----- (00017973) --------------------------------------------------------
int __fastcall sub_17973(unsigned __int8 *a1, unsigned __int8 *a2, int a3)
{
  __int64 v5; // rax
  int result; // eax

  HIDWORD(v5) = 0;
  while ( a3 && !mbterm(a1, HIDWORD(v5)) && !mbterm(a2, HIDWORD(v5)) )
  {
    result = mbcicmp(a1, a2);
    if ( result )
      return result;
    a1 = (unsigned __int8 *)mbsinc(a1);
    --a3;
    v5 = mbsinc(a2);
    a2 = (unsigned __int8 *)v5;
  }
  if ( a3 && (mbterm(a1, HIDWORD(v5)) || mbterm(a2, HIDWORD(v5))) )
    result = *a1 - *a2;
  else
    result = HIDWORD(v5);
  return result;
}
// 18467: using guessed type int __fastcall mbterm(_DWORD, _DWORD);
// 184A3: using guessed type int __fastcall mbcicmp(_DWORD, _DWORD);
// 184FA: using guessed type __int64 __fastcall mbsinc(_DWORD);

//----- (00017A38) --------------------------------------------------------
void __usercall __noreturn sub_17A38(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<ebp>, int a6@<edi>, int a7@<esi>)
{
  void *retaddr; // [esp+0h] [ebp+0h] BYREF

  ((void (__cdecl *)(_DWORD, _DWORD, _DWORD, _DWORD, int, int, int, int, void **, int, int, int))_GETDS)(
    (unsigned __int16)__GS__,
    (unsigned __int16)__FS__,
    (unsigned __int16)__ES__,
    (unsigned __int16)__DS__,
    a1,
    a2,
    a3,
    a4,
    &retaddr,
    a5,
    a6,
    a7);
}

//----- (00017ACD) --------------------------------------------------------
void __usercall __noreturn sub_17ACD(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<ebp>, int a6@<edi>, int a7@<esi>)
{
  void *retaddr; // [esp+0h] [ebp+0h] BYREF

  ((void (__cdecl *)(_DWORD, _DWORD, _DWORD, _DWORD, int, int, int, int, void **, int, int, int))_GETDS)(
    (unsigned __int16)__GS__,
    (unsigned __int16)__FS__,
    (unsigned __int16)__ES__,
    (unsigned __int16)__DS__,
    a1,
    a2,
    a3,
    a4,
    &retaddr,
    a5,
    a6,
    a7);
}

//----- (00017B45) --------------------------------------------------------
int sub_17B45()
{
  if ( !dword_207C4 )
  {
    if ( byte_201D2 == 1 )
    {
      __asm { int     31h; DPMI Services   ax=func xxxxh }
      dword_207C4 = 1;
    }
    else
    {
      __asm { int     2Fh; - Multiplex - MS WINDOWS - Mode Interface - DETECT MODE }
      dword_207C4 = -1;
    }
  }
  return dword_207C4;
}
// 201D2: using guessed type char byte_201D2;
// 207C4: using guessed type int dword_207C4;

//----- (00017BD0) --------------------------------------------------------
void __fastcall sub_17BD0(int a1, int a2)
{
  if ( dword_207AC || word_207B0 )
  {
    if ( (char *)off_20604 == (char *)sub_17DC0 )
    {
      off_20604 = (int (__fastcall *)(_DWORD, _DWORD))sub_17DC5;
    }
    else if ( (char *)off_20604 == (char *)sub_17BD0 )
    {
      off_20604 = (int (__fastcall *)(_DWORD, _DWORD))nullsub_2;
    }
    if ( (unsigned __int8)byte_201D2 < 2u || (unsigned __int8)byte_201D2 > 8u )
    {
      if ( sub_17B45() == 1 )
      {
        __asm
        {
          int     31h; DPMI Services   ax=func xxxxh
          int     31h; DPMI Services   ax=func xxxxh
        }
      }
      else
      {
        dos_setvect(35, a2, dword_207AC, word_207B0);
      }
    }
    else
    {
      __asm
      {
        int     21h; DOS - SET INTERRUPT VECTOR
        int     21h; DOS - SET INTERRUPT VECTOR
      }
    }
    word_207B0 = 0;
    dword_207AC = 0;
  }
}
// 13875: using guessed type int nullsub_2();
// 17DC0: using guessed type int sub_17DC0();
// 181CE: using guessed type int __fastcall dos_setvect(_DWORD, _DWORD, _DWORD, _DWORD);
// 201D2: using guessed type char byte_201D2;
// 20604: using guessed type int (__fastcall *off_20604)(_DWORD, _DWORD);
// 207AC: using guessed type int dword_207AC;
// 207B0: using guessed type __int16 word_207B0;
// 207B8: using guessed type int dword_207B8;

//----- (00017DC5) --------------------------------------------------------
__int16 sub_17DC5()
{
  __int16 v0; // dx
  __int16 result; // ax
  int v2; // [esp+0h] [ebp-18h]

  if ( dword_20800 )
    v2 = 6;
  else
    v2 = 27;
  v0 = word_207B6;
  if ( dword_207B2 || word_207B6 )
  {
    if ( (char *)off_20604 == (char *)sub_17DC0 )
    {
      off_20604 = (int (__fastcall *)(_DWORD, _DWORD))sub_17BD0;
    }
    else if ( (char *)off_20604 == (char *)sub_17DC5 )
    {
      off_20604 = (int (__fastcall *)(_DWORD, _DWORD))nullsub_2;
    }
    if ( (unsigned __int8)byte_201D2 < 2u || (unsigned __int8)byte_201D2 > 8u )
    {
      if ( sub_17B45() == 1 )
      {
        __asm { int     31h; DPMI Services   ax=func xxxxh }
        result = 517;
        __asm { int     31h; DPMI Services   ax=func xxxxh }
      }
      else
      {
        result = dos_setvect(v2, v0, dword_207B2, word_207B6);
      }
    }
    else
    {
      __asm { int     21h; DOS - SET INTERRUPT VECTOR }
      result = 9476;
      __asm { int     21h; DOS - SET INTERRUPT VECTOR }
    }
    word_207B6 = 0;
    dword_207B2 = 0;
  }
  return result;
}
// 13875: using guessed type int nullsub_2();
// 17DC0: using guessed type int sub_17DC0();
// 181CE: using guessed type int __fastcall dos_setvect(_DWORD, _DWORD, _DWORD, _DWORD);
// 201D2: using guessed type char byte_201D2;
// 20604: using guessed type int (__fastcall *off_20604)(_DWORD, _DWORD);
// 207B2: using guessed type int dword_207B2;
// 207B6: using guessed type __int16 word_207B6;
// 207BE: using guessed type int dword_207BE;
// 20800: using guessed type int dword_20800;

//----- (00017DE6) --------------------------------------------------------
void __fastcall sub_17DE6(int a1, int a2, unsigned int a3)
{
  __int64 v3; // rax

  if ( !dword_207AC && !word_207B0 )
  {
    if ( (unsigned __int8)byte_201D2 < 2u || (unsigned __int8)byte_201D2 > 8u )
    {
      if ( sub_17B45() == 1 )
      {
        __asm
        {
          int     31h; DPMI Services   ax=func xxxxh
          int     31h; DPMI Services   ax=func xxxxh
        }
        word_207B0 = (unsigned int)sub_17A38 >> 16;
        dword_207AC = (unsigned int)((char *)sub_17ACD - (char *)sub_17A38) >> 16;
        __asm { int     31h; DPMI Services   ax=func xxxxh }
        word_207BC = (unsigned int)sub_17A38 >> 16;
        dword_207B8 = (unsigned int)((char *)sub_17ACD - (char *)sub_17A38) >> 16;
        __asm { int     31h; DPMI Services   ax=func xxxxh }
      }
      else
      {
        v3 = dos_getvect(35, a2, sub_17A38);
        dword_207AC = v3;
        word_207B0 = WORD2(v3);
        dos_setvect(35, HIDWORD(v3), sub_17A38, __CS__);
      }
    }
    else
    {
      __asm { int     21h; DOS - SET INTERRUPT VECTOR }
      word_207B0 = a3;
      dword_207AC = HIWORD(a3);
      __asm { int     21h; DOS - SET INTERRUPT VECTOR }
      word_207BC = __ES__;
      dword_207B8 = HIWORD(a3);
      __asm { int     21h; DOS - SET INTERRUPT VECTOR }
    }
    if ( (char *)off_20604 == (char *)nullsub_2 )
    {
      off_20604 = (int (__fastcall *)(_DWORD, _DWORD))sub_17BD0;
    }
    else if ( (char *)off_20604 == (char *)sub_17DC5 )
    {
      off_20604 = (int (__fastcall *)(_DWORD, _DWORD))sub_17DC0;
    }
  }
  JUMPOUT(0x17DBA);
}
// 17F0E: control flows out of bounds to 17DBA
// 13875: using guessed type int nullsub_2();
// 17DC0: using guessed type int sub_17DC0();
// 181CE: using guessed type int __fastcall dos_setvect(_DWORD, _DWORD, _DWORD, _DWORD);
// 1877B: using guessed type __int64 __fastcall dos_getvect(_DWORD, _DWORD, _DWORD);
// 201D2: using guessed type char byte_201D2;
// 20604: using guessed type int (__fastcall *off_20604)(_DWORD, _DWORD);
// 207AC: using guessed type int dword_207AC;
// 207B0: using guessed type __int16 word_207B0;
// 207B8: using guessed type int dword_207B8;
// 207BC: using guessed type __int16 word_207BC;

//----- (00017F2E) --------------------------------------------------------
void __fastcall sub_17F2E(int a1, int a2, unsigned int a3)
{
  __int16 v3; // dx
  __int64 v4; // rax
  int v5; // [esp+0h] [ebp-18h]

  if ( dword_20800 )
    v5 = 6;
  else
    v5 = 27;
  v3 = word_207B6;
  if ( !dword_207B2 && !word_207B6 )
  {
    if ( (unsigned __int8)byte_201D2 < 2u || (unsigned __int8)byte_201D2 > 8u )
    {
      if ( sub_17B45() == 1 )
      {
        __asm
        {
          int     31h; DPMI Services   ax=func xxxxh
          int     31h; DPMI Services   ax=func xxxxh
        }
        word_207B6 = (unsigned int)sub_17ACD >> 16;
        dword_207B2 = (unsigned int)((char *)sub_17B45 - (char *)sub_17ACD) >> 16;
        __asm { int     31h; DPMI Services   ax=func xxxxh }
        word_207C2 = (unsigned int)sub_17ACD >> 16;
        dword_207BE = (unsigned int)((char *)sub_17B45 - (char *)sub_17ACD) >> 16;
        __asm { int     31h; DPMI Services   ax=func xxxxh }
      }
      else
      {
        v4 = dos_getvect(v5, v3, sub_17ACD);
        dword_207B2 = v4;
        word_207B6 = WORD2(v4);
        dos_setvect(v5, HIDWORD(v4), sub_17ACD, __CS__);
      }
    }
    else
    {
      __asm { int     21h; DOS - SET INTERRUPT VECTOR }
      word_207B6 = a3;
      dword_207B2 = HIWORD(a3);
      __asm { int     21h; DOS - SET INTERRUPT VECTOR }
      word_207C2 = __ES__;
      dword_207BE = HIWORD(a3);
      __asm { int     21h; DOS - SET INTERRUPT VECTOR }
    }
    if ( (char *)off_20604 == (char *)nullsub_2 )
    {
      off_20604 = (int (__fastcall *)(_DWORD, _DWORD))sub_17DC5;
    }
    else if ( (char *)off_20604 == (char *)sub_17BD0 )
    {
      off_20604 = (int (__fastcall *)(_DWORD, _DWORD))sub_17DC0;
    }
  }
  JUMPOUT(0x17DB7);
}
// 1807F: control flows out of bounds to 17DB7
// 13875: using guessed type int nullsub_2();
// 17DC0: using guessed type int sub_17DC0();
// 181CE: using guessed type int __fastcall dos_setvect(_DWORD, _DWORD, _DWORD, _DWORD);
// 1877B: using guessed type __int64 __fastcall dos_getvect(_DWORD, _DWORD, _DWORD);
// 201D2: using guessed type char byte_201D2;
// 20604: using guessed type int (__fastcall *off_20604)(_DWORD, _DWORD);
// 207B2: using guessed type int dword_207B2;
// 207B6: using guessed type __int16 word_207B6;
// 207BE: using guessed type int dword_207BE;
// 207C2: using guessed type __int16 word_207C2;
// 20800: using guessed type int dword_20800;

//----- (00018143) --------------------------------------------------------
void *sub_18143()
{
  return &unk_21178;
}

//----- (00018393) --------------------------------------------------------
void sub_18393()
{
  int v0; // ecx
  int v1; // edi
  int i; // eax
  int v3; // eax
  unsigned int v4; // edx
  _BYTE *v5; // ebx
  int v6; // eax
  int v7; // esi
  int v8; // ecx
  int v9; // eax
  char v10; // dl
  int v11; // edx

  if ( !dword_20D70 )
  {
    __FS__ = word_201D9;
    v0 = 0;
    v1 = dword_201D5;
    for ( i = dword_201D5; *MK_FP(word_201D9, i); ++i )
    {
      while ( *MK_FP(word_201D9, i) )
        ++i;
      ++v0;
    }
    v3 = i - dword_201D5;
    if ( !v3 )
      v3 = 1;
    v4 = nmalloc(v3);
    v5 = (_BYTE *)v4;
    if ( v4 )
    {
      v6 = nmalloc(v0 + 4 * v0 + 4);
      if ( v6 )
      {
        dword_20D70 = v6;
        v7 = 0;
        v8 = 0;
        v9 = v1;
        while ( *MK_FP(__FS__, v9) )
        {
          *(_DWORD *)(v8 + dword_20D70) = v5;
          do
          {
            v10 = *MK_FP(__FS__, v9++);
            *v5++ = v10;
          }
          while ( v10 );
          v8 += 4;
          ++v7;
        }
        v11 = dword_20D70;
        *(_DWORD *)(v8 + dword_20D70) = 0;
        dword_20D6C = v8 + 4 + v11;
        memset(v8 + 4 + v11, 0, v7);
      }
      else
      {
        sub_11C83(v4);
      }
    }
  }
}
// 13077: using guessed type int __fastcall nmalloc(_DWORD);
// 13158: using guessed type int __fastcall memset(_DWORD, _DWORD, _DWORD);
// 201D5: using guessed type int dword_201D5;
// 201D9: using guessed type __int16 word_201D9;
// 20D6C: using guessed type int dword_20D6C;
// 20D70: using guessed type int dword_20D70;

//----- (0001853B) --------------------------------------------------------
int sub_1853B()
{
  return sub_18657(1);
}

//----- (00018545) --------------------------------------------------------
int __fastcall sub_18545(int result)
{
  int (__fastcall *v1)(int, int); // ebx

  v1 = (int (__fastcall *)(int, int))dword_207D4;
  if ( dword_207D4 != 1 && dword_207D4 != 2 && dword_207D4 != 3 )
  {
    dword_207D4 = 2;
    result = v1(2, result);
  }
  return result;
}
// 207D4: using guessed type int dword_207D4;

//----- (00018657) --------------------------------------------------------
int __fastcall sub_18657(int a1)
{
  int v2; // eax
  void (__fastcall *v3)(int); // edx
  int v5; // eax

  v2 = 4 * a1;
  v3 = *(void (__fastcall **)(int))((char *)dword_207CC + v2);
  switch ( a1 )
  {
    case 1:
      if ( v3 == (void (__fastcall *)(int))2 )
        v2 = _terminate();
      goto LABEL_7;
    case 2:
      sub_18545(140);
      return 0;
    case 3:
    case 5:
    case 6:
    case 8:
    case 9:
    case 10:
    case 11:
    case 12:
      if ( v3 == (void (__fastcall *)(int))1 || v3 == (void (__fastcall *)(int))2 || v3 == (void (__fastcall *)(int))3 )
        return 0;
      v5 = a1;
      dword_207CC[a1] = 2;
      goto LABEL_12;
    case 4:
LABEL_7:
      if ( v3 == (void (__fastcall *)(int))1 || v3 == (void (__fastcall *)(int))2 || v3 == (void (__fastcall *)(int))3 )
        return 0;
      dword_207CC[a1] = 2;
      sub_17BD0(v2, (int)v3);
      goto LABEL_11;
    case 7:
      if ( v3 == (void (__fastcall *)(int))1 || v3 == (void (__fastcall *)(int))2 || v3 == (void (__fastcall *)(int))3 )
        return 0;
      *(int *)((char *)dword_207CC + v2) = 2;
      sub_17DC5();
LABEL_11:
      v5 = a1;
LABEL_12:
      v3(v5);
      return 0;
    default:
      return -1;
  }
}
// 188C9: using guessed type int _terminate(void);
// 207CC: using guessed type int dword_207CC[];

//----- (00018770) --------------------------------------------------------
int sub_18770()
{
  int result; // eax

  result = _nonIBM();
  dword_20800 = result;
  return result;
}
// 18723: using guessed type int _nonIBM(void);
// 20800: using guessed type int dword_20800;

//----- (000187B9) --------------------------------------------------------
void __fastcall sub_187B9(int a1, __int16 a2)
{
  sub_18A33(0, a2);
}

//----- (0001892C) --------------------------------------------------------
char __fastcall __spoils<ah> sub_1892C(int a1)
{
  __int16 v1; // ax
  int v2; // eax

  if ( byte_201D2 == 3 && byte_201D4 )
  {
    v1 = word_20196;
LABEL_4:
    word_21298 = v1;
    return v1;
  }
  if ( (unsigned __int8)byte_201D2 >= 2u && (unsigned __int8)byte_201D2 <= 8u || !byte_201D2 )
  {
    v1 = __DS__ & 3 | 0x34;
    goto LABEL_4;
  }
  if ( byte_201D2 == 1 && !byte_201D3 || (LOBYTE(v1) = byte_201D2, byte_201D2 == 9) )
  {
    v1 = __DS__;
    goto LABEL_4;
  }
  if ( byte_201D2 == 1 && byte_201D3 == 1 )
  {
    __asm { int     31h; DPMI Services   ax=func xxxxh }
    LOWORD(a1) = -((unsigned __int8)byte_201D3 > 1u);
    v2 = a1 << 16;
    LOWORD(v2) = 0;
    if ( v2 < 0 )
      _fatal_runtime_error(aUnableToAlloca, -1);
    word_21298 = 0;
    __asm { int     31h; DPMI Services   ax=func xxxxh }
    v1 = -__CFSHR__(0xFFFFF, 16);
    if ( __CFSHR__(0xFFFFF, 16) )
      LOBYTE(v1) = _fatal_runtime_error(aUnableToSetLim, -1);
  }
  else
  {
    word_21298 = 0;
  }
  return v1;
}
// 110AB: using guessed type int __fastcall _fatal_runtime_error(_DWORD, _DWORD);
// 20196: using guessed type __int16 word_20196;
// 201D2: using guessed type char byte_201D2;
// 201D3: using guessed type char byte_201D3;
// 201D4: using guessed type char byte_201D4;
// 21298: using guessed type __int16 word_21298;

//----- (00018A10) --------------------------------------------------------
__int16 sub_18A10()
{
  __int16 result; // ax

  HIBYTE(result) = byte_201D2;
  if ( byte_201D2 == 1 && byte_201D2 == byte_201D3 )
  {
    result = 1;
    __asm { int     31h; DPMI Services   ax=func xxxxh }
  }
  return result;
}
// 201D2: using guessed type char byte_201D2;
// 201D3: using guessed type char byte_201D3;
// 21298: using guessed type __int16 word_21298;

//----- (00018A33) --------------------------------------------------------
void __fastcall sub_18A33(int a1, __int16 a2)
{
  int i; // eax
  int j; // eax
  unsigned __int8 *v4; // ecx
  __int16 v5; // dx
  int k; // eax
  __int16 v7; // si

  if ( a1 != -1 && a1 != -2 )
  {
    if ( a1 == -3 )
    {
      memset(byte_21194, 0, 257);
      dword_21190 = 0;
      dword_20808 = 0;
      goto LABEL_21;
    }
    if ( a1 == -4 )
    {
      memset(byte_21194, 0, 257);
      for ( i = 129; i <= 159; byte_21194[i] = 1 )
        ++i;
      for ( j = 224; j <= 252; byte_21194[j] = 1 )
        ++j;
      dword_21190 = 1;
      dword_20808 = 932;
      goto LABEL_21;
    }
    if ( a1 )
      goto LABEL_21;
  }
  v4 = (unsigned __int8 *)sub_18B7A();
  __ES__ = a2;
  if ( v4 || a2 )
  {
    v5 = 0;
    k = memset(byte_21194, 0, 257);
    dword_21190 = __readfsword((unsigned int)v4) != 0;
    while ( 1 )
    {
      v7 = *(_WORD *)v4;
      if ( !*(_WORD *)v4 )
        break;
      for ( k = *v4; ; byte_21194[k] = 1 )
      {
        v5 = HIBYTE(v7);
        if ( k > HIBYTE(v7) )
          break;
        ++k;
      }
      v4 += 2;
    }
    LOWORD(dword_20808) = sub_18C7C(k, v5);
    dword_20808 = (unsigned __int16)dword_20808;
  }
LABEL_21:
  JUMPOUT(0x18B73);
}
// 18B71: control flows out of bounds to 18B73
// 13158: using guessed type int __fastcall memset(_DWORD, _DWORD, _DWORD);
// 20808: using guessed type int dword_20808;
// 21190: using guessed type int dword_21190;

//----- (00018B7A) --------------------------------------------------------
int sub_18B7A()
{
  _DWORD v1[8]; // [esp+0h] [ebp-80h] BYREF
  char v2; // [esp+20h] [ebp-60h]
  unsigned __int16 v3; // [esp+24h] [ebp-5Ch]
  int v4[5]; // [esp+34h] [ebp-4Ch] BYREF
  unsigned __int16 v5; // [esp+48h] [ebp-38h]
  __int16 v6; // [esp+50h] [ebp-30h]
  __int16 v7; // [esp+5Ch] [ebp-24h] BYREF
  int v8; // [esp+5Eh] [ebp-22h]
  int v9; // [esp+66h] [ebp-1Ah]

  if ( (unsigned __int8)byte_201D2 < 2u || (unsigned __int8)byte_201D2 > 8u )
  {
    if ( byte_201D2 == 1 )
    {
      memset(v1, 0, 50);
      v1[7] = 25344;
      __asm { int     31h; DPMI Services   ax=func xxxxh }
      if ( (v2 & 1) == 0 )
        return v1[1] + 16 * v3;
    }
  }
  else
  {
    memset(&v7, 0, 18);
    memset(v4, 0, 40);
    v9 = 25344;
    v4[0] = 9489;
    v7 = 33;
    v4[3] = (int)&v7;
    v6 = __DS__;
    j__DoINTR(33, v4);
    if ( (_WORD)v8 != 0xFFFF )
      return 16 * (unsigned __int16)v8 + v5;
  }
  return 0;
}
// 13158: using guessed type int __fastcall memset(_DWORD, _DWORD, _DWORD);
// 18F47: using guessed type int __fastcall j__DoINTR(_DWORD, _DWORD);
// 201D2: using guessed type char byte_201D2;
// 21298: using guessed type __int16 word_21298;

//----- (00018C7C) --------------------------------------------------------
int __fastcall sub_18C7C(int a1, __int16 a2)
{
  int v2; // eax
  int v3; // esi
  int v4; // eax
  int v6[8]; // [esp+0h] [ebp-94h] BYREF
  char v7; // [esp+20h] [ebp-74h]
  __int16 v8; // [esp+22h] [ebp-72h]
  int v9[7]; // [esp+34h] [ebp-60h] BYREF
  __int16 v10; // [esp+50h] [ebp-44h]
  __int16 v11[5]; // [esp+5Ch] [ebp-38h] BYREF
  int v12; // [esp+66h] [ebp-2Eh]
  int v13; // [esp+6Ah] [ebp-2Ah]
  int v14; // [esp+70h] [ebp-24h]
  int v15; // [esp+74h] [ebp-20h]

  __asm { int     31h; DPMI Services   ax=func xxxxh }
  LOWORD(a1) = a2;
  v2 = a1 << 16;
  LOWORD(v2) = 256;
  v15 = v2;
  v14 = v2 >> 16;
  v3 = 0;
  if ( (unsigned __int8)byte_201D2 < 2u || (unsigned __int8)byte_201D2 > 8u )
  {
    if ( byte_201D2 == 1 )
    {
      memset(v6, 0, 50);
      v6[6] = 7;
      v6[0] = 0;
      v6[7] = 25857;
      v6[4] = 0xFFFF;
      v6[5] = 0xFFFF;
      v8 = v15;
      __asm { int     31h; DPMI Services   ax=func xxxxh }
      if ( (v7 & 1) == 0 )
      {
        v4 = (unsigned __int16)v15;
        goto LABEL_8;
      }
    }
  }
  else
  {
    memset(v11, 0, 18);
    memset(v9, 0, 40);
    v11[2] = 256;
    v9[2] = 7;
    v9[6] = 0;
    v12 = 25857;
    v13 = 0xFFFF;
    v9[1] = 0xFFFF;
    v11[0] = 33;
    v9[0] = 9489;
    v9[3] = (int)v11;
    v10 = __DS__;
    j__DoINTR(33, v9);
    if ( v11[1] != -1 )
    {
      v4 = 256;
LABEL_8:
      v3 = 16 * v4 + 5;
      LOWORD(v3) = *MK_FP(word_21298, v3);
      goto LABEL_9;
    }
  }
LABEL_9:
  __asm { int     31h; DPMI Services   ax=func xxxxh }
  return v3;
}
// 13158: using guessed type int __fastcall memset(_DWORD, _DWORD, _DWORD);
// 18F47: using guessed type int __fastcall j__DoINTR(_DWORD, _DWORD);
// 201D2: using guessed type char byte_201D2;
// 21298: using guessed type __int16 word_21298;

//----- (00018F6E) --------------------------------------------------------
// __Init_FPE_handler_
void __spoils<edx> _Init_FPE_handler()
{
  if ( !word_2080C && byte_2019C )
  {
    if ( byte_201D2 )
    {
      if ( byte_201D2 == 1 )
      {
        _DOS4G_hook_init();
      }
      else if ( byte_201D2 == 9 )
      {
        _Intel_hook_init();
      }
      else
      {
        _Phar_hook_init();
      }
    }
    else
    {
      _Ergo_hook_init();
    }
    sub_19028();
  }
}
// 196A8: using guessed type int _Phar_hook_init(void);
// 19798: using guessed type int _DOS4G_hook_init(void);
// 197DE: using guessed type int _Ergo_hook_init(void);
// 19836: using guessed type int _Intel_hook_init(void);
// 2019C: using guessed type char byte_2019C;
// 201D2: using guessed type char byte_201D2;
// 2080C: using guessed type __int16 word_2080C;

//----- (00018FCB) --------------------------------------------------------
void __spoils<edx> sub_18FCB()
{
  if ( word_2080C )
  {
    if ( byte_201D2 )
    {
      if ( byte_201D2 == 1 )
      {
        _DOS4G_hook_fini();
      }
      else if ( byte_201D2 == 9 )
      {
        _Intel_hook_fini();
      }
      else
      {
        _Phar_hook_fini();
      }
    }
    else
    {
      _Ergo_hook_fini();
    }
  }
}
// 1976B: using guessed type int _Phar_hook_fini(void);
// 197C5: using guessed type int _DOS4G_hook_fini(void);
// 1981C: using guessed type int _Ergo_hook_fini(void);
// 1988E: using guessed type int _Intel_hook_fini(void);
// 201D2: using guessed type char byte_201D2;
// 2080C: using guessed type __int16 word_2080C;

//----- (00019028) --------------------------------------------------------
void sub_19028()
{
  ;
}

//----- (0001903D) --------------------------------------------------------
void __noreturn sub_1903D()
{
  __outbyte(0x20u, 0x20u);
  __outbyte(0xA0u, 0x20u);
  __outbyte(0xF0u, 0);
  sub_1904A();
}
// 1903D: using guessed type void __noreturn sub_1903D();

//----- (0001904A) --------------------------------------------------------
void __noreturn sub_1904A()
{
  _DWORD v1[16]; // [esp-24h] [ebp-40h] BYREF

  v1[8] = (unsigned __int16)__DS__;
  v1[7] = (unsigned __int16)__ES__;
  _EBP = v1;
  __asm
  {
    fnstenv byte ptr [ebp+0]
    fdisi
  }
  _enable();
  ((void (*)(void))_GETDS)();
}

//----- (0001914D) --------------------------------------------------------
void __usercall sub_1914D(__int16 a1@<bx>, double *a2@<edi>, double a3@<st0>)
{
  _BOOL1 v3; // zf

  if ( a1 != -9734 && a1 != -9743 )
  {
    v3 = a1 == -9736;
    if ( a1 != -9736 )
      v3 = a1 == -9739;
    if ( !v3 && (a1 & 0x310) != 784 && (a1 & 0x110) == 272 )
    {
      __asm
      {
        fstp    st
        fldz
      }
      if ( (a1 & 0xC0) != 0xC0 )
        sub_19277(a1, a2, a3);
      if ( (a1 & 8) != 0 )
        __asm { fstp    st }
    }
  }
}
// 19194: inconsistent fpu stack

//----- (000191DA) --------------------------------------------------------
void __usercall sub_191DA(__int16 a1@<bx>, int a2@<ebp>, double *a3@<edi>, __int16 a4@<fpstat>, double a5@<st0>)
{
  double v5; // st7

  if ( a1 != -9731 )
  {
    if ( (a1 & 0x110) == 272 )
    {
      v5 = sub_1922C(SHIBYTE(a1), a2, a4, a5);
      if ( (a1 & 0xC0) != 0xC0 )
        sub_19277(a1, a3, v5);
      if ( (a1 & 8) != 0 )
        __asm { fstp    st }
    }
    else if ( (a1 & 0xC0) == 0xC0 )
    {
      sub_19252(a1 & 0x1C0, a1, (int)&unk_20818);
    }
    else
    {
      sub_1922C(SHIBYTE(a1), a2, a4, a5);
    }
  }
}
// 191F2: inconsistent fpu stack

//----- (0001922C) --------------------------------------------------------
double __usercall sub_1922C@<st0>(char a1@<bh>, int a2@<ebp>, __int16 a3@<fpstat>, double a4@<st0>)
{
  _BOOL1 v4; // c0
  char v5; // c2
  _BOOL1 v6; // c3
  double result; // st7

  v4 = a4 < 0.0;
  v5 = 0;
  v6 = a4 == 0.0;
  *(_WORD *)(a2 + 20) = a3;
  if ( (a1 & 4) != 0 )
    result = dbl_20822;
  else
    result = flt_2082A;
  if ( (*(_WORD *)(a2 + 20) & 0x100) != 0 )
    result = -result;
  return result;
}
// 20822: using guessed type double dbl_20822;
// 2082A: using guessed type float flt_2082A;

//----- (00019252) --------------------------------------------------------
__int64 __usercall sub_19252@<edx:eax>(int a1@<edx>, __int16 a2@<bx>, int _ESI@<esi>)
{
  _BOOL1 v3; // cc
  __int64 result; // rax
  int v5; // [esp-4h] [ebp-4h]

  if ( (a2 & 0x400) != 0 )
    LOBYTE(a1) = a2 & 7;
  else
    LOBYTE(a1) = 0;
  v5 = a1;
  while ( 1 )
  {
    v3 = (char)a1 < 1;
    LOBYTE(a1) = a1 - 1;
    if ( v3 )
      break;
    __asm { fincstp }
  }
  __asm
  {
    fstp    st
    fld     tbyte ptr [esi]
  }
  HIDWORD(result) = v5;
  while ( 1 )
  {
    v3 = BYTE4(result)-- < 1;
    if ( v3 )
      break;
    __asm { fdecstp }
  }
  return result;
}
// 19265: inconsistent fpu stack

//----- (00019277) --------------------------------------------------------
double __usercall sub_19277@<st0>(char a1@<bl>, double *a2@<edi>, double result@<st0>)
{
  if ( (a1 & 4) != 0 )
    *a2 = result;
  else
    *(float *)a2 = result;
  return result;
}

//----- (000192BE) --------------------------------------------------------
int __usercall sub_192BE@<eax>(int a1@<edi>)
{
  return *(_DWORD *)a1;
}

//----- (00019330) --------------------------------------------------------
int __fastcall sub_19330(int a1, int a2)
{
  return *(_DWORD *)a2;
}

//----- (00019664) --------------------------------------------------------
int __fastcall sub_19664(unsigned int a1)
{
  if ( !ismbclegal(a1, a1) )
    return IsTable[(unsigned __int8)(a1 + 1)] & 0x80;
  return a1 >= 0x8281 && a1 <= 0x829A;
}
// 1988F: using guessed type int __fastcall ismbclegal(_DWORD, _DWORD);

// nfuncs=345 queued=258 decompiled=223 lumina nreq=0 worse=0 better=0
#error "There were 1 decompilation failure(s) on 223 function(s)"
