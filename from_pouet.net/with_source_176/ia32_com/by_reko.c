// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register word16 eax_16_16, Register word16 bp, Register (ptr16 Eq_5) ds)
void fn0C00_0100(word16 eax_16_16, word16 bp, struct Eq_5 * ds)
{
	mp16 fp;
	byte ah;
	struct Eq_8 * Top_143 = 0;
	__syscall<byte>(0x10);
	mp16 cx_12 = fp;
	word16 ax_157 = SEQ(ah, 0x13);
	do
	{
		byte al_14 = (byte) ax_157;
		__out<byte>(969, al_14);
		__out<byte>(969, al_14 - 0x01);
		--cx_12;
		ax_157 = SEQ(SLICE(ax_157 - 0x01, byte, 8), al_14 - 0x01);
	} while (cx_12 != 0x00);
	while (true)
	{
		byte Eq_46::* di_103 = &Eq_46::b0000;
		int16 bx_111;
		for (bx_111 = ~0x62; (byte) bx_111 != 100; ++bx_111)
		{
			Eq_53 cx_107 = ~0x9F;
			do
			{
				Eq_153 ax_46 = cx_107 *s16 cx_107 + bx_111 *s bx_111;
				ds->t7340 = (word16) ax_46 + 0x00001000;
				ds->w7342 = 0x00;
				Eq_166 dx_ax_52 = ((word16) ax_46 + 0x00001000) *32 0x733C;
				word32 eax_68 = 400000000 - __ror<word32,byte>(SEQ(SLICE(__ror<word32,byte>(SEQ(eax_16_16, (word16) dx_ax_52), 0x10), word16, 16), SLICE(dx_ax_52, word16, 16)), 0x10);
				cu16 ax_69 = (word16) eax_68;
				eax_16_16 = SLICE(eax_68, word16, 16);
				byte al_97 = (byte) (ax_69 >> 0x01);
				Eq_53 eax_74 = SEQ(eax_16_16, ax_69 >> 0x01);
				if (ax_69 >> 0x01 >= 0x00)
				{
					ds->t733C = eax_74;
					struct Eq_8 * Top_77 = Top_143 - 1;
					Top_77->r0000 = (real64) ds->t733C;
					Top_77->r0000 = sqrt(Top_77->r0000);
					ds->t733C.u0 = (int16) Top_77->r0000;
					ds->t733C -= 20000;
					Top_77->r0000 = (real64) ds->t733C;
					Top_77->r0000 /= (real64) ds->t7340;
					ds->t733C = cx_107;
					Top_77->rFFFFFFFF = (real64) ds->t733C;
					Top_77->rFFFFFFFF *= Top_77->r0000;
					ds->t733C.u0 = (int16) Top_77->rFFFFFFFF;
					__wait();
					__fninit();
					Top_143 = Top_77;
					al_97 = (byte) ((word32) ds->t733C + (byte) bp);
				}
				0xA000->*di_103 = al_97;
				++di_103;
				cx_107 = (word16) cx_107.u0 + 1;
			} while (cx_107 != 0xA0);
		}
		--bp;
	}
}

