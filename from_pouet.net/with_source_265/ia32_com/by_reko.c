// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register word16 cx, Register (memptr (ptr16 Eq_7) Eq_4) bx, Register word16 si, Register word16 di, Register (ptr16 Eq_7) es, Register (ptr16 Eq_7) ds)
void fn0C00_0100(word16 cx, <unknown> Eq_7::* bx, word16 si, word16 di, struct Eq_7 * es, struct Eq_7 * ds)
{
	struct Eq_9 * ss;
	byte bh_9 = SLICE(bx, byte, 8);
	ds->*((char *) bx + (di + 0x01)) = (<unknown> Eq_7::*) ((char *) (ds->*((char *) bx + (di + 0x01))) + bh_9);
	__fninit();
	struct Eq_25 Eq_7::* di_14 = &Eq_7::t0200;
	real64 rLoc1_363 = 0.0;
	real64 rLoc2_364 = 0.0;
	do
	{
		(ds->*di_14).t0000.u0 = (int16) (sin(rLoc2_364) * (real64) (ds->*ax_456).w0000);
		rLoc1_363 += (real64) (ds->*ax_456).r0002;
		--cx;
		rLoc2_364 = rLoc1_363;
		++di_14;
		byte cl_300 = (byte) cx;
	} while (cx != 0x00);
	__syscall<byte>(0x10);
	__out<byte>(0x03C8, (byte) ax_456);
	do
	{
		byte al_52 = (byte) ax_466;
		__out<byte>(969, al_52);
		byte al_59 = (byte) bx;
		__out<byte>(969, al_59);
		__out<byte>(969, al_59);
		ax_456 = SEQ(SLICE((char *) &ax_466->w0000 + 1, byte, 8), al_52 + 0x01);
		ax_466 = ax_456;
	} while (!OVERFLOW<word16>((char *) &ax_466->w0000 + 1));
	word16 cx_292 = SEQ(0x02, cl_300);
	while (true)
	{
		Eq_113 ax_231 = (char *) &ax_466->w0000 + 1;
		byte ch_321 = SLICE(cx_292, byte, 8);
		if (cx_292 == 0x00)
			break;
		(es->*di_14).t0000.u1 = al_52 + 0x01;
		++di_14;
		--cx_292;
	}
	word16 bp_130 = 200;
	do
	{
		Eq_113 ax_70 = (word16) ax_231 + 1;
		byte dl_110 = (byte) ax_70;
		bi8 bl_348 = (byte) bx;
		byte dh_121 = dl_110;
		ci16 cx_157 = SEQ(ch_321, 200);
		<unknown>* si_103 = 0x0300;
		do
		{
			uint16 cx_99 = SEQ(SLICE(cx_157, byte, 8), 0x50);
			memcpy(si_103 + 0x0140, si_103, cx_99 *32 0x04);
			si_103 = (<unknown>*) ((char *) si_103 + cx_99 * 0x04);
			ci16 cx_104 = cx_157;
			struct Eq_135 Eq_7::* di_109 = (char *) si_103 + 0x0098;
			do
			{
				int16 ax_116 = bl_348 *s16 (ss->a0200)[(word16) dl_464];
				byte al_134 = (byte) (ax_116 >> 0x07);
				byte ah_137 = SLICE(ax_116 >> 0x07, byte, 8);
				di_109 += (ax_116 >> 0x07) /16 16;
				dl_110 = dh_465;
				dh_121 = dl_464;
				cx_104 = -cx_104;
				dl_464 = dl_110;
				dh_465 = dh_121;
			} while (cx_104 < 0x00);
			(es->*di_109).dw0000 = 0x221D1710;
			(es->*di_109).dw0004 = 825175080;
			(es->*di_109).dw0008 = __bswap<word32>(825175080);
			(es->*di_109).dw000C = __bswap<word32>(0x221D1710);
			dh_121 = dl_464 + 0x02;
			dl_110 = dh_465 + 0x07;
			word16 ax_138 = SEQ(ah_137, al_134 + 100);
			cx_157 = cx_104 - 0x01;
		} while (cx_104 != 0x01);
		byte dl_169 = (byte) bp_130;
		int16 ax_173 = SEQ(ch_321, 200 - dl_169);
		int16 si_176 = ax_173 *s 0x0140 + 0x0300;
		uint32 size_182 = (word16) dl_169 *s 0x50 *32 0x04;
		memcpy(A000:0000, si_176, size_182);
		int16 si_185 = (char *) si_176 + (word16) size_182;
		word16 di_186 = (word16) size_182;
		int16 ax_187 = ax_173;
		do
		{
			int16 si_191 = si_185 - 0x0280;
			memcpy(di_186, si_191, 0x0140);
			ch_321 = 0x00;
			si_185 = (int16) ((char *) si_191 + 320);
			di_186 = (<unknown>*) ((char *) di_186 + 320);
			--ax_187;
		} while (ax_187 >= 0x00);
		es = ds;
		do
			;
		while ((__in<byte>(0x03DA) & 0x08) != 0x00);
		do
			;
		while ((__in<byte>(0x03DA) & 0x08) == 0x00);
		ax_231 = ax_70;
		cu8 al_238 = (byte) ax_70;
		if (bl_348 != 0x7E && al_238 >= 0xB4)
			bx = SEQ(SLICE((char *) bx + 2, byte, 8), bl_348 + 0x02);
		byte bl_267 = (byte) bx;
		if (ax_70 >= 33435)
		{
			--bp_130;
			if (ax_70 >= 33466)
				bp_130 = ax_138;
		}
		if (bl_267 != 0x00 && ax_70 >= 0x8660)
			bx = SEQ(SLICE(bx - 0x02, byte, 8), bl_267 - 0x02);
	} while (ax_70 != 0x8703);
	__syscall<byte>(0x10);
}

