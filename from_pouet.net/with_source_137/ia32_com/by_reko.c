// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register (memptr (ptr16 Eq_6) Eq_14) bx, Register Eq_4 si, Register Eq_5 di, Register (ptr16 Eq_6) ds, Stack word16 wArg00)
void fn0C00_0100(union Eq_14 Eq_6::* bx, Eq_4 si, Eq_5 di, struct Eq_6 * ds, word16 wArg00)
{
	Eq_8 fp;
	__syscall<byte>(0x10);
	Eq_14 es_bp_8 = (ds->*bx).u1;
	__out<byte>(0x03C8, (byte) wArg00);
	ci16 bp_154 = (word16) es_bp_8;
	struct Eq_28 * es_191 = SLICE(es_bp_8, selector, 16);
	word16 ax_10 = wArg00;
	do
	{
		uint16 cx_207 = 0x4E30;
		do
		{
			word16 ax_28 = __shrd<word16>(ax_10, bx, (byte) cx_210);
			byte bl_43 = (byte) bx;
			byte bh_142 = SLICE(bx, byte, 8);
			cu8 al_178 = (byte) ax_28;
			byte ah_122 = SLICE(ax_28, byte, 8);
			if (al_178 >= 0x3F)
				al_178 = 0x3F;
			__out<byte>(969, al_178);
			byte cl_108 = (byte) (cx_210 >> 0x05);
			cu8 ch_100 = SLICE(cx_210 >> 0x05, byte, 8);
			ax_10 = SEQ(ah_122, al_178);
			cx_207 = cx_210 >> 0x05;
			cx_210 = cx_207;
		} while (cx_210 >> 0x05 != 0x00);
		bx = SEQ(bh_142, bl_43 + 0x01);
	} while (bl_43 != ~0x00);
	do
	{
		Eq_197 bx_48[] = 969;
		do
		{
			byte bh_85 = SLICE(bx_48, byte, 8);
			bp_154 = (ci16) &(bx_48 + bp_154 /16 320)->b0000;
			if (bp_154 >= 0x00)
			{
				al_178 = (cu8) (ds->*((word16) di + ((word16) bx_48 + 1)));
				ch_100 = (cu8) (ds->*((word16) si + ((word16) bx_48 + 64)));
			}
			cu8 al_64 = al_178 + ch_100;
			cu8 al_68 = __rcr<byte,byte>(al_64, 0x01, SLICE(cond(al_64), bool, 1));
			ds->*((word16) (bx_48 | (word16) fp + 2) - 1) = bp_154;
			cu8 v28_81 = ds->*bx_48;
			ds->*bx_48 = al_68 - 0x01 + (byte) (al_68 < 0x01);
			cu16 ax_89 = SEQ(ah_122, v28_81 + 0xE0 - bh_85);
			ah_122 = SLICE(ax_89 >> 0x05, byte, 8);
			al_178 = (byte) (ax_89 >> 0x05);
			di = (ax_89 >> 0x05) *s 0x0140;
			if (di != 0x00)
				al_178 = bx_48[ax_89 >> 0x05].b0000;
			bx_48 = (word16) bx_48 + 1;
			ch_100 = (cu8) (ds->*bx_48);
		} while (bx_48 != 0x00);
		uint16 cx_109 = SEQ(0x40, cl_108);
		memcpy((word16) fp + 2, si, cx_109 *32 0x04);
		byte al_120 = __in<byte>(0x60);
		word16 ax_123 = SEQ(ah_122, al_120);
		ch_100 = 0x00;
		cl_108 = 0x00;
		si += cx_109 *u 0x04;
		di = (word16) (cx_109 * 0x04) + ((word16) fp + 2);
		al_178 = al_120 - 0x01;
		ah_122 = SLICE(ax_123 - 0x01, byte, 8);
	} while (ax_123 != 0x01);
}

