// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte ah, Register byte dl, Register (memptr (ptr16 Eq_13) Eq_5) bx, Register (memptr (ptr16 Eq_7) word16) si, Register (ptr16 Eq_7) ds)
void fn0C00_0100(byte ah, byte dl, struct Eq_5 Eq_13::* bx, word16 Eq_7::* si, struct Eq_7 * ds)
{
	__syscall<byte>(0x10);
	struct Eq_13 * dx_7 = SEQ(0x70, dl);
	struct Eq_13 * dx_10 = SEQ(0x80, dl);
	real64 rLoc1_287 = 0.0;
	word16 ax_47 = SEQ(ah, 0x13);
	do
	{
		(dx_10->*bx).w0000 = (int16) (sin(rLoc1_287) * (real64) ds->w0146);
		rLoc1_287 += (real64) ds->r0192;
		(dx_7->*bx).w0000 = (int16) si;
		struct Eq_47 Eq_13::* bx_36 = bx + 1;
		bx = (struct Eq_5 Eq_13::*) (bx_36 + 1);
		byte bl_242 = (byte) bx_36 + 0x01;
		byte bh_249 = SLICE(bx_36 + 1, byte, 8);
	} while (bx_36 != &Eq_13::tFFFF);
	word16 cx_48 = ax_47;
	<unknown> Eq_13::* bx_358 = SEQ(bh_249, bl_242);
	do
	{
		int16 ax_53 = ds->*si;
		++si;
		<unknown> Eq_13::* bx_355 = bx_358;
		do
		{
			bi8 bl_59 = (byte) bx_361;
			bi8 bh_66 = SLICE(bx_361, byte, 8);
			if (bh_66 *s16 bh_66 + bl_59 *s16 bl_59 <=u 0x0383)
				dx_7->*((char *) bx_361 + ax_53) = (<unknown> Eq_13::*) dl;
			byte bh_247 = SLICE((char *) bx_361 + 1, byte, 8);
			bx_355 = SEQ(bh_247, bl_59 + 0x01);
			bx_361 = bx_355;
		} while (bx_361 != &Eq_13::tFFFF);
		--cx_48;
		byte ch_271 = SLICE(cx_48, byte, 8);
		bx_358 = SEQ(bh_247, bl_59 + 0x01);
	} while (cx_48 != 0x00);
	do
	{
		word16 bx_110 = 0x0100;
		word16 si_88 = dx_10->w0100;
		word16 bp_89 = dx_10->w2100;
		word16 dx_107 = 0x00;
		byte Eq_133::* di_121 = &Eq_133::b0000;
		word16 cx_104 = SEQ(ch_271, 200);
		do
		{
			word16 cx_124 = 0x0140;
			bx_126 = bx_110;
			dx_129 = dx_107;
			di_153 = di_121;
			do
			{
				byte Eq_133::* di_153;
				word16 dx_129;
				word16 bx_126;
				word16 bx_128 = bx_126 + bp_89;
				word16 dx_131 = dx_129 + si_88;
				cu8 al_158 = 0x12;
				ui16 bx_159 = SEQ(SLICE(bx_128, byte, 8), SLICE(dx_131, byte, 8));
				do
				{
					bx_159 = bx_364 * 0x02;
					al_158 -= 0x03;
					bx_364 = bx_159;
				} while (dx_7->a0000[0].b0000[bx_364].b0000 < al_158);
				0xA000->*di_153 = al_158 + 0x10;
				bx_126 = bx_128;
				dx_129 = dx_131;
				++di_153;
				cx_124 = cx_363 - 0x01;
				cx_363 = cx_124;
			} while (cx_363 != 0x01);
			di_121 += 320;
			bx_110 -= si_88;
			dx_107 += bp_89;
			cx_104 = cx_362 - 0x01;
			ch_271 = SLICE(cx_362 - 0x01, byte, 8);
			cx_362 = cx_104;
		} while (cx_362 != 0x01);
		++ds->b0147;
		ds->b0164 += 0x04;
		byte al_223;
		byte ah_224;
	} while (bios_kbd_check_keystroke(out al_223, out ah_224));
	bios_video_set_mode(0x03);
}

