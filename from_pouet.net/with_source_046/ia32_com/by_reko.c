// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Sequence (ptr32 Eq_3) ds_di, Register byte ah, Register byte dh, Register (memptr (ptr16 Eq_24) Eq_6) bx, Register cui16 bp, Register int16 si)
void fn0C00_0100(struct Eq_3 * ds_di, byte ah, byte dh, struct Eq_6 Eq_24::* bx, cui16 bp, int16 si)
{
	bool C;
	int16 di = (word16) ds_di;
	__syscall<byte>(0x10);
	Eq_17 cx_86 = ds_di->t0002.u2;
	word16 ax_60 = SEQ(ah, 0x13);
	struct Eq_24 * ds_63 = SLICE(cx_86, selector, 16);
	do
	{
		word16 ax_10 = ax_60 + 0x01;
		byte cl_29 = (byte) cx_86;
		byte ah_41 = SLICE(ax_10 + 0x01, byte, 8);
		if (ax_10 != ~0x00)
		{
			(ds_63->*bx).t0000 = (ds_63->*bx).t0000 - dh - (byte) C;
			(ds_63->*bx).t0000 |= 0x10;
		}
		bp = __rol<word16,byte>(bp, cl_29);
		byte al_35 = __in<byte>(0x60);
		int32 dx_ax_47 = si *s32 cx_86;
		word16 bx_34 = bx + bp + ((bp & 0x01 << 0x10 - cl_29) != 0x00);
		cu8 al_54 = bx_34[(uint16) (byte) dx_ax_47] + bx_34[di];
		word16 ax_42 = SEQ(ah_41, al_35);
		dh = SLICE(dx_ax_47, byte, 24);
		C = al_54 < 0x00;
		bx = bx_34 - 0x01;
		ax_60 = SEQ(SLICE(dx_ax_47, byte, 8), al_54);
		cx_86 = SEQ(SLICE(ax_42 - 0x01, byte, 8), al_35 - 0x01);
	} while (ax_42 != 0x01);
}

