// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Sequence (ptr32 word16) es_di, Register word16 ax, Register word16 cx, Register (ptr16 Eq_6) ds)
void fn0C00_0100(word16 * es_di, word16 ax, word16 cx, struct Eq_6 * ds)
{
	Eq_7 fp;
	word16 di = (word16) es_di;
	struct Eq_10 Eq_6::* si_28 = Eq_6::a017A;
	do
	{
		(ds->*si_28).dw0000 &= ~0x00E0E0E0;
		--cx;
		byte al_27 = (byte) ax;
		byte ch_173 = SLICE(cx, byte, 8);
		if (cx == 0x00)
		{
			(ds->*si_28).dw0000 -= ~0x00E0E0E0;
			cx = SEQ(ch_173, 0x09);
		}
		__out<word16>(0x1F1F, ax);
		__out<byte>(0x1F1F, al_27);
		cup16 si_26 = si_28 + 1;
		si_28 = si_26 + 1;
	} while (si_26 + 1 < fp);
	*es_di = ax;
	__syscall<byte>(0x10);
	byte Eq_96::* di_111 = di + 2;
	word16 si_120;
	for (si_120 = 199; si_120 != 0x00; --si_120)
	{
		word16 cx_117 = 0x0140;
		do
		{
			Eq_81 ax_53 = 0xA0 - cx_117;
			if (ax_53 < 0x00)
				ax_53 = -ax_53;
			int16 ax_74 = si_120 - 100;
			int32 dx_ax_75 = ax_74 *s32 ax_74;
			word16 dx_184 = SLICE(dx_ax_75, word16, 16);
			uint16 bp_77 = ax_53 * ax_53 + (word16) dx_ax_75;
			do
			{
				--dx_184;
				bu8 dl_81 = (byte) dx_184;
			} while (dl_81 *16 dl_81 > bp_77);
			ci8 al_102 = (byte) dx_184;
			if (al_102 >= 100)
				al_102 = (byte) ax_53;
			0xA000->*di_111 = al_102;
			--cx_117;
			++di_111;
			byte cl_188 = (byte) cx_117;
		} while (cx_117 != 0x00);
	}
	word16 cx_144 = SEQ(0x02, cl_188);
	do
	{
		byte al_126 = __in<byte>(0x03DA);
	} while ((al_126 & 0x08) == 0x00);
	__out<byte>(0x03C8, al_126 & 0x08);
	for (; cx_144 != 0x00; --cx_144)
		__out<byte>(969, al_126 & 0x08);
}

