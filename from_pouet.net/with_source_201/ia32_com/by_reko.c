// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_3) ds)
void fn0C00_0100(struct Eq_3 * ds)
{
	__syscall<byte>(0x10);
	cui16 cx_265 = 0x00;
	do
	{
		Eq_11 cl_10 = (byte) cx_272;
		__out<byte>(0x03C8, cl_10);
		Eq_11 al_13 = cl_10;
		if (cl_10 < 0x00)
			al_13 = ~cl_10;
		Eq_11 al_20 = al_13 >> 0x01;
		__out<byte>(969, al_20);
		__out<byte>(969, al_20);
		__out<byte>(969, SLICE(cl_10 *16 al_20, byte, 8) + 0x13);
		cx_265 = SEQ(SLICE(cx_272 - 0x01, byte, 8), cl_10 - 0x01);
		cx_272 = cx_265;
	} while (cx_272 != 0x01);
	do
	{
		++ds->w0100;
		__fninit();
		word16 di_176 = 0x00;
		int16 ax_180 = ~0x63;
		do
		{
			int16 bx_177 = ~0x9F;
			do
			{
				0xA000 = ax_271;
				real64 rLoc1_239 = (real64) 0xA000;
				0xA000 = bx_270;
				real64 rLoc2_240 = (real64) 0xA000;
				real64 rLoc3_242 = (real64) ds->w0100 / (real64) ds->w0130;
				real64 rLoc3_243 = cos(rLoc3_242);
				real64 rLoc4_244 = sin(rLoc3_242);
				real64 rLoc5_246 = (real64) ds->w0126 * rLoc3_243;
				real64 rLoc2_248 = (rLoc2_240 + rLoc5_246) * rLoc5_246;
				real64 rLoc1_249 = rLoc1_239 * rLoc5_246;
				0xA000 = (int16) (rLoc2_248 * rLoc4_244 + rLoc1_249 * rLoc3_243);
				int16 bx_110 = 0xA000;
				0xA000 = (int16) (rLoc1_249 * rLoc4_244 - rLoc2_248 * rLoc3_243);
				word16 bx_129 = <invalid>;
				int16 ax_119 = 0xA000;
				word16 dx_146 = SEQ((byte) bx_129, 0xC9);
				byte bl_268;
				byte bl_269;
				fn0C00_019F((char *) ds - 0x00006000, 0xA000 + (ax_119 - bx_110), fn0C00_019F((char *) ds - 0x00006000, ax_119, cx_272 - 0x01, 969, bx_110 >> 0x02, out bl_268), dx_146, bx_110, out bl_269);
				word16 bx_149 = <invalid>;
				0xA000->*di_176 = SLICE(dx_146 + (byte) bx_149 *16 181, byte, 8);
				++di_176;
				bx_177 = bx_270 + 0x01;
				bx_270 = bx_177;
			} while (bx_270 != 0x9F);
			ax_180 = ax_271 + 0x01;
			byte ah_185 = SLICE(ax_271 + 0x01, byte, 8);
			ax_271 = ax_180;
		} while ((byte) ax_271 != 99);
	} while (SEQ(ah_185, __in<byte>(0x60)) != 0x01);
	__syscall<byte>(0x10);
}

// 0C00:019F: Register uint16 fn0C00_019F(Sequence segptr32 ds_si, Register int16 ax, Register uint16 cx, Register word16 dx, Register int16 bx, Register out Eq_141 blOut)
// Called from:
//      fn0C00_0100
uint16 fn0C00_019F(segptr32 ds_si, int16 ax, uint16 cx, word16 dx, int16 bx, union Eq_141 & blOut)
{
	mp16 fp;
	byte ah_31 = SLICE(ax, byte, 8);
	byte cl_34 = (byte) cx;
	word16 dx_37;
	word16 ax_38;
	word16 cx_39;
	word16 bx_40;
	seg0C00->t01E1();
	word16 dx_49;
	word16 ax_50;
	word16 cx_51;
	word16 bx_52;
	seg0C00->t01E1();
	word16 dx_61;
	word16 ax_62;
	word16 cx_63;
	word16 bx_64;
	seg0C00->t01E1();
	seg0C00->t01E1();
	blOut.u1 = <invalid>;
	return (uint16) (byte) ax;
}

