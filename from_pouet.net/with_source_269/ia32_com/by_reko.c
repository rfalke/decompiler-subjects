// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register (memptr (ptr16 Eq_4) Eq_3) bp, Register (ptr16 Eq_4) es, Register (ptr16 Eq_5) ds)
void fn0C00_0100(<unknown> Eq_4::* bp, struct Eq_4 * es, struct Eq_5 * ds)
{
	byte Eq_4::* di_169 = Eq_4::a0204;
	word16 cx_172;
	for (cx_172 = 0xFA00; cx_172 != 0x00; --cx_172)
	{
		es->*di_169 = 0x10;
		++di_169;
	}
	__syscall<byte>(0x10);
	bios_video_set_mode(0x13);
	do
	{
		Eq_31 di_19 = ds->w01FE * 0x0140 + ds->w01FC + 0x0204;
		Eq_68 bx_21 = 0x01DE;
		do
		{
			byte dh_25;
			int16 si_191 = (word16) (ds->*bx_21) << 0x03;
			for (dh_25 = 0x08; dh_25 != 0x00; --dh_25)
			{
				uint8 dl_32;
				for (dl_32 = 0x80; dl_32 != 0x00; dl_32 >>= 0x01)
				{
					if ((es->*((char *) bp + si_191) & dl_32) != 0x00)
					{
						ds->*di_19 = 0x1F1F;
						ds->*((word16) di_19 + 320) = 0x1F1F;
					}
					di_19 = (word16) di_19 + 2;
				}
				++si_191;
				di_19 = (word16) di_19 + 624;
			}
			di_19 -= 0x1180;
			bx_21 = (word16) bx_21 + 1;
		} while (bx_21 < 65067);
		switch (ds->w01FC)
		{
		case 0xA0:
			ds->w0200 = ~0x00;
			break;
		case 0x00:
			ds->w0200 = 0x01;
			break;
		}
		ds->w01FC += ds->w0200;
		switch (ds->w01FE)
		{
		case 0xB8:
			ds->w0202 = ~0x00;
			break;
		case 0x00:
			ds->w0202 = 0x01;
			break;
		}
		ds->w01FE += ds->w0202;
		do
			;
		while ((__in<byte>(0x03DA) & 0x08) == 0x00);
		byte Eq_165::* di_126 = Eq_165::a0000;
		struct Eq_142 Eq_5::* si_130 = Eq_5::a0204;
		word16 cx_131;
		for (cx_131 = 0xFA00; cx_131 != 0x00; --cx_131)
		{
			byte al_135 = (ds->*si_130).b0000;
			0xA000->*di_126 = al_135;
			++si_130;
			++di_126;
			if (al_135 != 0x10)
				--al_135;
			(ds->*si_130).bFFFFFFFF = al_135;
		}
	} while (__in<byte>(0x60) != 0x01);
	bios_video_set_mode(0x03);
	msdos_display_string(ds->a01DE + 9);
}

