// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_3) ds)
void fn0C00_0100(struct Eq_3 * ds)
{
	bios_video_set_mode(0x13);
	__out<byte>(0x03C8, 0x00);
	cu16 dx_105 = 969;
	uint16 ax_162 = 0x00;
	do
	{
		__out<byte>(969, (byte) ax_162);
		word16 ax_22 = __ror<word16,byte>(ax_162, 0x08);
		byte al_23 = (byte) ax_22;
		__out<byte>(969, al_23);
		byte ah_24 = SLICE(ax_22, byte, 8);
		byte al_25 = al_23 | ah_24;
		__out<byte>(969, al_25);
		word16 ax_28 = __ror<word16,byte>(SEQ(ah_24, al_25), 0x08);
		byte al_29 = (byte) ax_28;
		word16 ax_32 = SEQ(SLICE(ax_28, byte, 8), al_29 + 0x01);
		ax_162 = SEQ(SLICE(ax_32 + 0x02, byte, 8), al_29 + 0x03);
	} while (ax_32 != ~0x01);
	while (true)
	{
		ds->w01A5 = dx_105;
		ds->t01A7.u0 = 0x00;
		struct Eq_70 Eq_89::* si_136 = &Eq_89::t7D00;
		byte cl_45;
		for (cl_45 = 0x00; cl_45 != 100; ++cl_45)
		{
			ds->t01A7.u1 = (word16) ds->t01A7 + 1;
			ds->w01A5 -= ds->t01A7;
			ds->w01A9 = (ds->w01A5 >> 0x02) * 0x78;
			cui16 dx_165 = 0x00;
			do
			{
				byte dl_69 = (byte) dx_168;
				(~0x5C03->*si_136).b0000 = dl_69 - ds->b01AC ^ (byte) __ror<word16,byte>(ds->w01A9, 0x08);
				ds->w01A9 -= dx_168;
				si_136 = &si_136->b0000 + 1;
				dx_165 = SEQ(SLICE(dx_168 + 0x01, byte, 8), dl_69 + 0x01);
				dx_168 = dx_165;
			} while (dx_168 != 0x013F);
			si_136 -= 0x0280;
		}
		byte al_94;
		byte ah_95;
		if (bios_kbd_check_keystroke(out al_94, out ah_95))
			break;
		ds->w01AB += 0x0200;
		dx_105 = 0x03DA;
		do
			;
		while ((__in<byte>(0x03DA) & 0x08) != 0x00);
		do
			;
		while ((__in<byte>(0x03DA) & 0x08) == 0x00);
	}
	bios_video_set_mode(0x03);
	msdos_display_string(&ds->b01AC + 1);
}

