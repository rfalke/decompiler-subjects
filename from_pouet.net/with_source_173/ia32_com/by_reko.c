// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register cu16 cx, Register word16 bp, Register (ptr16 Eq_5) ds)
void fn0C00_0100(cu16 cx, word16 bp, struct Eq_5 * ds)
{
	__syscall<byte>(0x10);
	do
	{
		__out<byte>(969, (byte) cx);
		uint16 ax_15 = cx >> 0x01;
		__out<byte>(969, (byte) ax_15);
		__out<byte>(969, (byte) (ax_15 >> 0x01));
		--cx;
	} while (cx != 0x00);
	byte Eq_59::* di_21 = &Eq_59::b0000;
	do
	{
		uint32 dx_ax_32 = (uint32) di_21;
		Eq_40 dx_35 = (uint16) (dx_ax_32 % ds->w0157);
		Eq_37 ax_36 = (uint16) (dx_ax_32 /u ds->w0157);
		Eq_42 dx_37 = dx_35 - 0xA0;
		if (dx_35 <= 0xA0)
			dx_37 = 0xA0 - dx_35;
		if (ax_36 > 100)
			return;
		if (ax_36 - 0x39 < dx_37 *s 0x07 >> 0x02)
			return;
		0xA000->*di_21 = (byte) ax_36 - 0x39 + (byte) bp ^ (byte) ((word16) dx_37 + bp);
		++di_21;
		--cx;
		if (cx != 0x00)
			continue;
		++bp;
	} while (__in<word16>(0x60) != 0x01);
	__syscall<byte>(0x10);
}

