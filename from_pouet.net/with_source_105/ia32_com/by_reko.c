// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte ah, Register word16 cx, Register word16 si, Register (memptr (ptr16 Eq_58) byte) di)
void fn0C00_0100(byte ah, word16 cx, word16 si, byte Eq_58::* di)
{
	__syscall<byte>(0x10);
	word16 ax_100 = SEQ(ah, 0x13);
	do
	{
		byte al_12 = (byte) ax_101;
		__out<byte>(969, al_12);
		ax_100 = SEQ(SLICE(ax_101 + 0x01, byte, 8), al_12 + 0x01);
		ax_101 = ax_100;
	} while (ax_101 != ~0x00);
	do
	{
		do
		{
			uint32 dx_ax_22 = (uint32) di;
			Eq_34 ax_25 = (uint16) (dx_ax_22 /u 0x0140);
			Eq_38 dx_24 = (uint16) (dx_ax_22 % 0x0140);
			Eq_42 ax_26 = ax_25 - 100;
			Eq_42 dx_27 = dx_24 - 0xA0;
			if (dx_24 <= 0xA0)
				dx_27 = 0xA0 - dx_24;
			if (ax_25 - 100 <= dx_27)
				ax_26 = dx_27;
			0xA000->*di = (byte) (4000 /u ((word16) ax_26 + 1) + si);
			++di;
			--cx;
		} while (cx != 0x00);
		++si;
	} while (__in<byte>(0x60) != 0x01);
}

