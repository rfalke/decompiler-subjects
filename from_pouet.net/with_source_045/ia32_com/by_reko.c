// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Sequence (ptr32 Eq_3) ds_di, Register int16 cx, Register byte dh, Register (memptr (ptr16 Eq_22) Eq_6) bx, Register ui16 bp, Register int16 si)
void fn0C00_0100(struct Eq_3 * ds_di, int16 cx, byte dh, struct Eq_6 Eq_22::* bx, ui16 bp, int16 si)
{
	int16 di = (word16) ds_di;
	__syscall<byte>(0x10);
	Eq_16 ds_ax_8 = ds_di->t0002.u1;
	word16 ax_45 = (word16) ds_ax_8;
	struct Eq_22 * ds_48 = SLICE(ds_ax_8, selector, 16);
	do
	{
		ax_47 = SEQ(ah_46, al_43);
		word16 ax_10 = ax_45 + 0x01;
		cu8 al_11 = (byte) ax_10;
		byte ah_12 = SLICE(ax_10, byte, 8);
		cu8 Eq_22::* bx_20 = bx - 0x01;
		cu8 v15_25 = ds_48->*bx_20 - dh - (byte) (ds_48->*bx_20 >= (bx)[di].a0000 + ((al_11 + (ds_48->*bx).bFFFFFEBF) + (byte) __aas(al_11, ah_12, &al_11, &ah_12)));
		ds_48->*bx_20 = v15_25;
		int32 dx_ax_38 = si *s32 cx;
		bx = bx_20 - bp - (word16) (v15_25 < 0x00);
		word16 ax_34 = SEQ(ah_12, __in<byte>(0x60));
		byte ah_46 = SLICE(dx_ax_38, byte, 8);
		dh = SLICE(dx_ax_38, byte, 24);
		cu8 al_43 = bx[(uint16) (byte) dx_ax_38];
		cx = ax_34 - 0x01;
		ax_45 = ax_47;
	} while (ax_34 != 0x01);
}

