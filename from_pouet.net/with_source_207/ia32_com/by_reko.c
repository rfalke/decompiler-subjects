// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte ah, Register word16 cx, Register byte dh, Register byte dl, Register Eq_7 bx, Register (memptr (ptr16 Eq_10) Eq_34) si, Register (memptr (ptr16 Eq_195) byte) di, Register (ptr16 Eq_10) ds)
void fn0C00_0100(byte ah, word16 cx, byte dh, byte dl, Eq_7 bx, union Eq_34 Eq_10::* si, byte Eq_195::* di, struct Eq_10 * ds)
{
	__syscall<byte>(0x10);
	struct Eq_16 * dx_7 = SEQ(dh + 0x10, dl);
	struct Eq_20 * dx_11 = SEQ(dh + 0x20, dl);
	word16 wLoc02_245 = SEQ(ah, 0x13) + 0x01;
l0C00_010F:
	byte Eq_195::* di_135 = di;
	Eq_7 bx_116 = bx;
	int16 ax_57 = wLoc02_245 + 0x00;
	++wLoc02_245;
	do
	{
		int16 ax_77 = ax_57 *s 0x41;
		(ds->*si).u0 = (int16) (ax_77 + 0x01);
		dx_7->*bx_116 = (real32) ((real64) (ds->*si).u0 * (real64) ds->w01F0);
		ax_57 = ax_77 + 0x01;
		bx_116 = (word16) bx_116 + 4;
	} while (bx_116 != 0x00);
	word16 cx_319 = SEQ(SLICE(cx + 0x01, byte, 8), (byte) cx + 0x01);
	do
	{
		do
		{
			dx_7->*bx_116 = (real32) (((real64) (dx_7->*((word16) bx_116 - 0x0200)) + (real64) (dx_7->*((word16) bx_116 + 0x0200)) + (real64) (dx_7->*((word16) bx_116 - 4)) + (real64) (dx_7->*((word16) bx_116 + 4))) / (real64) ds->w01EE);
			(dx_11->*bx_116).u0 = bx_116 *s 0x40;
			dx_11->*((word16) bx_116 + 2) = (word16) SLICE(bx_116, byte, 8) << 0x07;
			bcu8 cl_120 = (byte) cx_323;
			bx_116 = (word16) bx_116 + 4;
			cx_319 = cx_323;
			cx_323 = cx_319;
		} while (bx_116 != 0x00);
		__out<byte>(969, cl_120 >> 0x02);
		__out<byte>(969, cl_120 >> 0x02);
		__out<byte>(969, cl_120 >> 0x02);
		cx_319 = SEQ(SLICE(cx_323 - 0x01, byte, 8), cl_120 - 0x01);
		cx_324 = cx_319;
	} while (cx_323 != 0x01);
	do
	{
		do
		{
			uint32 dx_ax_139 = (uint32) di_135;
			Eq_205 dx_141 = (uint16) (dx_ax_139 % 0x0140);
			Eq_272 ax_142 = (uint16) (dx_ax_139 /u 0x0140);
			ui16 bx_148 = SEQ((byte) ax_142, (byte) dx_141 * 0x02);
			Eq_34 cx_159 = SEQ((*((char *) &dx_11->a0000[1] + 1))[bx_148].b0000, (*((char *) &dx_11->a0000[0] + 1))[bx_148].b0000 * 0x02);
			if (ax_142 < 0x80 && dx_141 < 0x80)
			{
				real64 rLoc1_276 = (real64) (*dx_7)[cx_159].r0000;
				(ds->*si).u0 = (int16) (rLoc1_276 - (real64) (dx_7->*((word16) (cx_159 *s 0x02) - 4)));
				dx_11->a0000[1][bx_148] = dx_11->a0000[1][bx_148] + (ds->*si).u0;
				(ds->*si).u0 = (int16) (rLoc1_276 - (real64) (dx_7->*((word16) (cx_159 *s 0x02) - 0x0200)));
				dx_11->a0000[0][bx_148] = dx_11->a0000[0][bx_148] - (ds->*si).u0;
			}
			(ds->*si).u0 = (int16) cx_159;
			real64 rLoc1_282 = (real64) (ds->*si).u0 * 3.141592653589793 / (real64) ds->w01F4;
			(ds->*si).u0 = (int16) (sin(rLoc1_282) * sin(rLoc1_282 / (real64) ds->w01F4) * (real64) ds->w01F2);
			0xA000->*di_135 = (ds->*si).u1 + 0x80;
			++di_135;
		} while (di_135 != &Eq_195::b0000);
		byte v39_217 = ds->b01F6 + 0x02;
		ds->b01F6 = v39_217;
		if (v39_217 == 0x00)
			goto l0C00_010F;
	} while ((int16) __in<byte>(0x60) != 0x01);
	msdos_terminate_program20();
}

