// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register (memptr (ptr16 Eq_68) byte) bx, Register int16 bp, Register (memptr (ptr16 Eq_68) Eq_5) di)
void fn0C00_0100(byte Eq_68::* bx, int16 bp, struct Eq_5 Eq_68::* di)
{
	__syscall<byte>(0x10);
	__out<word16>(0x03D4, 8211);
	bcu8 cl_18 = 0x00;
	do
	{
		__out<byte>(969, cl_18 << 0x02);
		uint8 ch_23 = cl_18 >> 0x04;
		__out<byte>(969, (cl_18 & 0x0F) + ch_23 << 0x01);
		__out<byte>(969, ch_23 << 0x02);
		++cl_18;
		int16 ax_280 = SEQ(0x20, ch_23 << 0x02);
	} while (cl_18 != 0x00);
	cui16 cx_104 = 0x28;
	do
	{
		int16 ax_39 = ax_280 *s 0x6261;
		word16 dx_400 = SEQ(SLICE(ax_39 + 0x01, byte, 8), (byte) ax_39 + 0x01);
		do
		{
			bi8 dh_62 = SLICE(dx_413, byte, 8);
			bi8 dl_53 = (byte) dx_413;
			cu8 cl_46 = (byte) cx_414;
			if (cl_46 >= 0x26)
				0x6000->*bx = cl_46;
			Eq_53 ax_65 = dh_62 *s16 dh_62 + dl_53 *s16 dl_53;
			byte al_72 = (byte) (ax_65 >> 0x04);
			if (SLICE(ax_65 >> 0x04, byte, 8) != 0x00)
				al_72 = ~0x00;
			0x6000->*bx += ~al_72;
			++bx;
			byte bh_310 = SLICE(bx, byte, 8);
			dx_400 = SEQ(SLICE(dx_413 + 0x01, byte, 8), dl_53 + 0x01);
			dx_413 = dx_400;
		} while (bx != &Eq_68::b0000);
		ax_280 = dx_413 + 0x01;
		byte ah_113 = SLICE(dx_413 + 0x01, byte, 8);
		cx_104 = cx_414 - 0x01;
		byte ch_301 = SLICE(cx_414 - 0x01, byte, 8);
		cx_414 = cx_104;
	} while (cx_414 != 0x01);
	word16 cx_125 = SEQ(ch_301, 0x07);
	do
	{
		do
		{
			byte bl_112 = (byte) di[0x00FF].b0000 + (0x6000->*di).bFFFFFEFF;
			cu16 ax_117 = SEQ(ah_113, (byte) di[1].b0000 + (0x6000->*di).b0000) + SEQ(bh_310, bl_112);
			Eq_151 al_120 = (byte) (ax_117 >> 0x02);
			(0x6000->*di).b0000 = (byte) al_120;
			ah_113 = SLICE(ax_117 >> 0x02, byte, 8);
			++di;
		} while (di != &Eq_68::b0000);
		--cx_125;
	} while (cx_125 != 0x00);
	union Eq_169 Eq_68::* bx_248 = SEQ(bh_310, bl_112);
	do
	{
		do
		{
			byte bh_149 = SLICE(bx_412, byte, 8);
			word16 si_150 = (word16) bh_149;
			int8 bl_160 = (byte) bx_412;
			Eq_194 ax_156 = (uint16) ((uint32) SEQ(0x40, al_120) /u (si_150 + 0x20));
			union Eq_151 Eq_68::* ax_175 = SEQ((byte) ((word32) ax_156 + bp), SLICE(ax_156 *s32 SEQ(bl_160, (byte) si_150 + 0x20), byte, 16));
			byte al_185 = (0x6000->*ax_175).u0 + (&(0x6000->*ax_175).u0)[bp];
			byte Eq_68::* bx_191 = SEQ(bh_149, bl_160 + (SLICE((al_185 << 0x02) *s16 (al_185 << 0x02), byte, 8) >> 0x02));
			(0x7000->*bx_412).u0.b0000 = (0x6000->*bx_191 & 0xF0) + (0x7000->*bx_191 & 0x0F);
			al_120.u0 = (0x6000->*ax_175).u0;
			union Eq_169 Eq_68::* bx_200 = bx_412;
			uint16 ax_210 = SEQ(al_120 - 0x40, al_120);
			if (al_120 >= 0x40)
			{
				Eq_182 dx_235 = (word32) ax_210;
				cu8 ah_344 = SLICE(dx_235, byte, 8);
				Eq_151 cl_214 = (0x6000->*ax_175).u0;
				union Eq_169 Eq_68::* di_215 = bx_412;
				do
				{
					bx_341 = SEQ(bh_228 + 0x01, bl_340);
					bcu8 al_219 = (byte) cl_214 + SLICE(dx_235, byte, 8);
					(0x7000->*bx_200).u0.b0000 = al_219 >> 0x04;
					(0x7000->*di_215).u0.b0000 = al_219 >> 0x04;
					byte bh_228 = SLICE(bx_200, byte, 8);
					byte bl_340 = (byte) bx_200;
					al_120 = al_219 >> 0x04;
					di_215 -= 0x0100;
					if (bh_228 == ~0x00)
						break;
					dx_235 += ax_156 << 0x02;
					bx_200 = bx_341;
				} while (SLICE(dx_235, byte, 8) < ah_344);
			}
			bx_248 = (union Eq_169 Eq_68::*) ((char *) bx_412 + 1);
			bx_248 = SEQ(SLICE((char *) bx_412 + 1, byte, 8), bl_160 + 0x01);
			bx_412 = bx_248;
		} while (bx_412 != &Eq_68::tFFFF);
		do
		{
			byte v40_256 = (0x7000->*bx_248).u0.b0000;
			(0x7000->*bx_248).u0.b0000 = 0x00;
			(0xA000->*bx_248).u0.bFFFFFFA0 = v40_256;
			bx_248 = (union Eq_169 Eq_68::*) ((char *) bx_248 + 1);
		} while (bx_248 != &Eq_68::b0000);
		uint16 ax_272 = (uint16) __in<byte>(0x60);
		++bp;
		al_120 = (byte) ax_272 - 0x01;
	} while (ax_272 != 0x01);
}

