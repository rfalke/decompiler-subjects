// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Sequence (ptr32 Eq_3) es_cs, Register byte ah, Register word16 cx, Register Eq_6 bx, Register uint16 bp, Register (ptr16 Eq_8) ds)
void fn0C00_0100(<unknown>* es_cs, byte ah, word16 cx, Eq_6 bx, uint16 bp, struct Eq_8 * ds)
{
	bool P;
	Eq_10 cs = (selector) es_cs;
	real64 rLoc1_402 = 0.0;
	do
	{
		ds->*((word16) bx + 0x0202) = (int16) (cos(rLoc1_402) * (real64) ds->w0125);
		rLoc1_402 += (real64) ds->r01FA;
		bx = (word16) bx + 1;
	} while (bx >= 0x00);
	__syscall<byte>(0x10);
	__syscall<byte>(33);
	memcpy(es_cs, A000:FEC0, bp *32 0x02);
	__out<byte>(0x03C8, 0x00);
	Eq_61 bp_130 = SEQ(ah, 0x13);
	word16 cx_64 = cx;
	byte al_339 = 0x00;
	do
	{
		__out<byte>(969, 0x00);
		--cx_64;
		byte ch_331 = SLICE(cx_64, byte, 8);
	} while (cx_64 != 0x00);
	do
	{
		word16 cx_103 = SEQ(ch_331, 0x02);
		do
		{
			Eq_98 bx_76 = (word16) bx + 1;
			byte bl_341 = (byte) bx_76;
			word16 cx_343 = SEQ(SLICE(cx_503, byte, 8), 0x3F);
			do
			{
				__out<byte>(969, al_339);
				__out<byte>(969, al_339);
				__out<byte>(969, al_339);
				al_339 += bl_341;
				--cx_343;
				uint16 ax_121 = (uint16) al_339;
			} while (cx_343 != 0x00);
			bx = ~bx_76;
			byte bh_107 = SLICE(bx, byte, 8);
			cx_103 = cx_503 - 0x01;
			ch_331 = SLICE(cx_503 - 0x01, byte, 8);
			cx_503 = cx_103;
		} while (cx_503 != 0x01);
		Mem109[cs:0x0140:byte] = Mem82[cs:0x0140:byte] ^ bh_107;
	} while (P);
	int32 dx_ax_122 = (int32) ax_121;
	byte ah_155 = SLICE(dx_ax_122, byte, 8);
	int16 dx_196 = SLICE(dx_ax_122, word16, 16);
	do
	{
		Mem132[cs:0x01FE:word16] = bp_130;
		byte Eq_148::* di_124 = &Eq_148::b0000;
		word16 cx_135 = SEQ(ch_331, 200);
		do
		{
			Mem141[cs:0x0200:word16] = bp_130;
			word16 cx_142;
			for (cx_142 = 0x0140; cx_142 != 0x00; --cx_142)
			{
				word16 si_145 = 0x01FE;
				do
				{
					byte al_154 = Mem147[cs:CONVERT(Mem147[cs:si_145 + 0x00:byte], byte, uint16) + 0x0202:byte];
					ah_155 += al_154;
					++si_145;
					cu16 ax_159 = SEQ(ah_155, al_154);
				} while (si_145 != 0x0202);
				0xA000->*di_124 = (byte) (ax_159 >> 0x08);
				Mem173[cs:0x0200:byte] = Mem166[cs:0x0200:byte] + 0x01;
				Mem176[cs:0x0201:byte] = Mem173[cs:0x0201:byte] - 0x02;
				ah_155 = SLICE(ax_159 >> 0x08, byte, 8);
				++di_124;
			}
			Mem182[cs:0x01FE:byte] = Mem176[cs:0x01FE:byte] + 0x01;
			Mem184[cs:0x01FF:byte] = Mem182[cs:0x01FF:byte] - 0x02;
			cx_135 = cx_504 - 0x01;
			byte ch_376 = SLICE(cx_504 - 0x01, byte, 8);
			cx_504 = cx_135;
		} while (cx_504 != 0x01);
		Eq_61 bp_191 = (word16) bp_130.u1 + 0x00FE;
		int16 dx_197 = dx_196 - 0x01;
		if (dx_197 <= 0x00)
			dx_197 = 0x013F;
		word16 wLoc04_419 = cx_504 - 0x01;
		int16 bp_226 = dx_197;
		int16 bx_228 = 0x0140 - dx_197;
		int16 dx_288 = SLICE((int32) (ax_159 >> 0x08), word16, 16);
		word16 cx_234 = SEQ(ch_376, 0x02);
		do
		{
			Eq_10 si_238 = cs;
			byte Eq_148::* di_239 = &Eq_148::bEC40;
			word16 cx_250 = SEQ(SLICE(cx_505, byte, 8), 0x09);
			do
			{
				byte Eq_148::* di_243 = di_239 + dx_288;
				byte Eq_10::* si_246 = (word16) si_238 + bx_228;
				int16 cx_254 = bp_226;
				do
				{
					bu8 al_258 = cs->*si_246;
					0xA000->*di_243 += al_258 * al_258 + 0x80;
					++si_246;
					++di_243;
					--cx_254;
				} while (cx_254 != 0x00);
				di_239 = di_243 + bx_228;
				si_238 = si_246 + dx_288;
				cx_250 = cx_506 - 0x01;
				cx_506 = cx_250;
			} while (cx_506 != 0x01);
			bp_226 = bx_228;
			bx_228 = dx_288;
			dx_288 = bp_226;
			cx_234 = cx_505 - 0x01;
			cx_505 = cx_234;
		} while (cx_505 != 0x01);
		do
			;
		while ((__in<byte>(0x03DA) & 0x08) == 0x00);
		word16 ax_319 = SEQ(SLICE(ax_159 >> 0x08, byte, 8), __in<byte>(0x60));
		bp_130 = bp_191;
		dx_196 = dx_197;
		ch_331 = SLICE(wLoc04_419, byte, 8);
		ah_155 = SLICE(ax_319 - 0x01, byte, 8);
	} while (ax_319 != 0x01);
	__syscall<byte>(0x10);
}

