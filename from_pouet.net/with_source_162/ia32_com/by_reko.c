// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte ch, Register word16 si)
void fn0C00_0100(byte ch, word16 si)
{
	__syscall<byte>(0x10);
	__out<word16>(0x03D4, 8211);
	uint16 ax_158 = 8211;
	struct Eq_19 * ds_8 = 8211;
	while (true)
	{
		++si;
		word16 di_17;
		for (di_17 = 0x0100; di_17 != 0x00; ++di_17)
		{
			byte bl_20 = (byte) di_17;
			cu16 cx_24 = SEQ(ch, bl_20);
			Eq_27 bx_32 = SEQ(SLICE(di_17, byte, 8), bl_20 & 0x1F);
			bi8 al_39 = ((byte) (SEQ(0x14 - (cx_24 >> 0x05), ax_158) /u bx_32 + si) & 0x1F) - 0x10;
			bi8 al_45 = (bl_20 & 0x1F) - 0x10;
			Eq_57 ax_47 = al_45 *s16 al_45 + al_39 *s16 al_39;
			ch = SLICE(cx_24 >> 0x05, byte, 8);
			ax_158 = ax_47 >> 0x05;
			cu8 al_49 = (byte) (ax_47 >> 0x05);
			if (al_49 >= (byte) (cx_24 >> 0x05))
				ds_8->*bx_32 = al_49;
		}
		Eq_70 bx_187 = ax_47 >> 0x05;
		do
		{
			int16 ax_66 = (int16) SLICE(bx_190, byte, 8);
			bi8 bl_75 = (byte) bx_190;
			int16 ax_77 = (int16) bl_75;
			int16 ax_70 = (int16) ((byte) ax_66 ^ SLICE(ax_66, byte, 8));
			uint8 al_80 = (byte) ax_77 ^ SLICE(ax_77, byte, 8);
			word16 cx_84 = SEQ(SLICE(ax_70, byte, 8), (byte) ax_70 + al_80);
			cui16 ax_94 = (int16) ((word32) SEQ(al_80, al_80) /16 (cx_84 + 0x01)) >> 0x02 & 0x1F;
			ch = SLICE(cx_84 + 0x01, byte, 8);
			byte bh_126 = SLICE(ax_94, byte, 8);
			byte bl_132 = (byte) ax_94;
			int16 bp_111 = bl_75 *s16 bl_75 + SLICE(bx_190 *s32 bx_190, word16, 16);
			ui16 ax_112 = 0x00;
			do
			{
				++ax_112;
				byte al_123 = (byte) ax_112;
				byte ah_159 = SLICE(ax_112, byte, 8);
				bp_111 -= ax_112 * 0x02;
			} while (bp_111 >= 0x00);
			byte al_135 = SEQ(al_123, bl_132)[(uint16) bh_126];
			0xA000->*((word16) bx_190 + 25759) = al_135 + 0x10;
			ax_158 = SEQ(ah_159, al_135 + 0x10);
			bx_187 = SEQ(SLICE((word16) bx_190 + 1, byte, 8), bl_75 + 0x01);
			bx_190 = bx_187;
		} while (bx_190 != ~0x00);
	}
}

