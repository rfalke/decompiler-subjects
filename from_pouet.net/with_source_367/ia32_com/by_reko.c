// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_3) es, Register (ptr16 Eq_4) ds)
void fn0C00_0100(struct Eq_3 * es, struct Eq_4 * ds)
{
	word16 si_13;
	word16 ax_11 = fn0C00_014D((char *) ds + 762, out si_13);
	word16 si_20;
	word16 ax_18 = fn0C00_014D(si_13, out si_20);
	byte Eq_4::* si_29;
	fn0C00_014D(si_20, out si_29);
	cup16 ax_22 = ax_18 + si_20;
	uint16 si_38 = ax_22 + 0x06;
	uint16 ax_41 = (uint16) (ds->*si_29) + (ax_11 + 0x0100);
	if (ax_41 > ax_22 + 0x06)
	{
		Eq_52 si_48 = ax_22 + 0x05;
		Eq_55 di_49 = ax_41 - 0x01;
		word16 cx_51;
		for (cx_51 = ax_18; cx_51 != 0x00; --cx_51)
		{
			es->*di_49 = ds->*si_48;
			--si_48;
			--di_49;
		}
		si_38 = (<unknown>*) ax_41;
	}
	memcpy(si_38, *((char *) ds + 342), 0x01A0);
}

// 0C00:014D: Register word16 fn0C00_014D(Sequence (ptr32 word16) ds_si, Register out ptr16 siOut)
// Called from:
//      fn0C00_0100
word16 fn0C00_014D(word16 * ds_si, ptr16 & siOut)
{
	struct Eq_76 * ds = SLICE(ds_si, selector, 16);
	word16 si_8;
	fn0C00_0152(ds_si, out si_8);
	ptr16 si_12;
	word16 ax_11 = fn0C00_0152(si_8, out si_12);
	siOut = si_12;
	return ax_11;
}

// 0C00:0152: Register word16 fn0C00_0152(Sequence (ptr32 word16) ds_si, Register out ptr16 siOut)
// Called from:
//      fn0C00_014D
word16 fn0C00_0152(word16 * ds_si, ptr16 & siOut)
{
	word16 si = (word16) ds_si;
	word16 ax_7 = *ds_si;
	siOut = si + 2;
	return SEQ((byte) ax_7, SLICE(ax_7, byte, 8));
}

