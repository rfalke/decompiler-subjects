// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte ch, Register word16 bx, Register int16 bp, Register (memptr (ptr16 Eq_8) int16) si, Register (memptr (ptr16 Eq_90) byte) di, Register (ptr16 Eq_8) ds)
void fn0C00_0100(byte ch, word16 bx, int16 bp, int16 Eq_8::* si, byte Eq_90::* di, struct Eq_8 * ds)
{
	byte ah;
	__fninit();
	__syscall<byte>(0x10);
	__out<byte>(0x0331, 0x3F);
	cui16 bx_11 = SEQ(ah, 0x3F);
	word16 cx_20 = SEQ(ch, 0x40);
	do
	{
		byte al_15 = (byte) ax_389;
		__out<byte>(969, al_15);
		__out<byte>(969, al_15);
		__out<byte>(969, al_15);
		--cx_20;
		byte ah_275 = SLICE(ax_389 + 0x01, byte, 8);
		byte ch_283 = SLICE(cx_20, byte, 8);
		ax_389 = SEQ(ah_275, al_15 + 0x01);
	} while (cx_20 != 0x00);
	word16 cx_284 = SEQ(ch_283, 0x40);
	word16 ax_391 = SEQ(ah_275, al_15 + 0x01);
	do
	{
		byte al_24 = (byte) ax_391;
		__out<byte>(969, al_24);
		__out<byte>(969, al_24);
		__out<byte>(969, 0x3F);
		uint16 ax_34 = ax_391 + 0x01;
		--cx_284;
		ax_391 = SEQ(SLICE(ax_391 + 0x01, byte, 8), al_24 + 0x01);
	} while (cx_284 != 0x00);
	uint16 cx_42 = 0x00;
	do
	{
		Eq_97 ax_49 = cx_42 * ax_34;
		ci8 al_59 = (byte) (bx_11 + ((word16) ax_49 + 1 >> 0x0C));
		cui16 ax_394 = SEQ(SLICE(bx_11, byte, 8), al_59);
		if (al_59 < 0x00)
			ax_394 = 0x00;
		0x8000->*di = (byte) ax_394;
		++di;
		bx_11 = ax_394;
		ax_34 = (word16) ax_49 + 1;
		--cx_42;
	} while (cx_42 != 0x00);
	struct Eq_116 Eq_151::* di_117 = &Eq_151::t0000;
	int16 bx_100;
	for (bx_100 = ~0x63; bx_100 != 100; ++bx_100)
	{
		int16 cx_101;
		for (cx_101 = ~0x9F; cx_101 != 0xA0; ++cx_101)
		{
			ds->*si = bx_100;
			real64 rLoc1_353 = (real64) (ds->*si);
			ds->*si = cx_101;
			(0x7000->*di_117).w0000 = (int16) (__atan2(rLoc1_353, (real64) (ds->*si)) * (real64) ds->r01FC);
			++di_117;
		}
	}
	do
	{
		struct Eq_175 Eq_151::* si_139 = &Eq_151::t0000;
		byte Eq_90::* di_140 = &Eq_90::b0000;
		Eq_245 bx_144 = ~0x63;
		do
		{
			Eq_179 cx_145 = ~0x9F;
			do
			{
				Eq_217 ax_160 = cx_145 *s cx_145 + bx_144 *s bx_144;
				word16 dx_166 = cx_145 + bx_144 + 200 >>u 0x03;
				cu8 ah_167 = SLICE(ax_160, byte, 8);
				struct Eq_175 Eq_151::* si_162 = &si_139->b0000 + 1;
				byte dh_172 = SLICE(dx_166, byte, 8);
				if (ah_167 < 0x23)
				{
					word16 dx_175 = SEQ(dh_172, (0x7000->*si_162).b0000) - bp;
					dx_166 = SEQ(SLICE(dx_175, byte, 8), (byte) dx_175 & 0x3F);
					if (ah_167 >= 0x1C)
						goto l0C00_01D1;
					byte dl_200 = 0x00;
					byte dh_220 = 0x00;
					if (ah_167 < 0x19)
					{
						dh_220 = SLICE(ax_160 >> 0x04, byte, 8);
						dx_166 = SEQ(dh_220, (byte) (ax_160 >> 0x04) ^ 0x3F);
						if (ah_167 < 0x02)
							goto l0C00_01D1;
						byte al_196 = ((0x7000->*si_162).bFFFFFFFF + (byte) bp & 0x2E) + 0x10;
						dl_200 = al_196;
						dx_166 = SEQ(dh_220, al_196);
						if ((al_196 & 0x20) == 0x00)
							goto l0C00_01C6;
					}
					else
					{
l0C00_01C6:
						dx_166 = SEQ(dh_220, (dl_200 + di_140[bp] & 0x7F) >> 0x01 | 0x40);
					}
				}
l0C00_01D1:
				0xA000->*di_140 = (byte) dx_166;
				si_139 = si_162;
				++di_140;
				cx_145 = (word16) cx_145 + 1;
			} while (cx_145 != 0xA0);
			bx_144 = (word16) bx_144 + 1;
		} while ((byte) bx_144 != 100);
		__out<byte>(0x0330, 0x99);
		++bp;
		byte al_258 = (byte) bp + 0x99;
		if ((al_258 & 0x1F) == 0x00)
			al_258 = 0x33;
		byte al_265 = al_258 & 0x70;
		__out<byte>(0x0330, al_265);
		__out<byte>(0x0330, al_265);
	} while (__in<byte>(0x60) != 0x01);
}

