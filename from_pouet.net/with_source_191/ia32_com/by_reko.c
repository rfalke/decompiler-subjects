// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register bu8 ch, Register (memptr (ptr16 Eq_84) byte) bx)
void fn0C00_0100(bu8 ch, byte Eq_84::* bx)
{
	struct Eq_5 * cs;
	bios_video_set_mode(0x13);
	__out<byte>(0x03D4, 0x11);
	__out<byte>(0x03D5, __in<byte>(0x03D5) & 0x7F);
	byte Eq_5::* si_14 = Eq_5::a016E;
	while (true)
	{
		byte al_24 = cs->*si_14;
		byte Eq_5::* si_25 = si_14 + 1;
		if (al_24 == 0x00)
			break;
		__out<byte>(SEQ(0x03, al_24), cs->*si_25);
		si_14 = si_25 + 1;
	}
	ci8 cl_32;
	for (cl_32 = 0x3F; cl_32 >= 0x00; --cl_32)
	{
		__out<byte>(0x03C8, cl_32);
		__out<byte>(969, cl_32);
		__out<byte>(969, 0x00);
		__out<byte>(969, cl_32);
	}
	byte Eq_84::* bx_132 = bx;
	do
	{
		do
		{
			bu8 bl_52 = (byte) bx_137;
			0xA000->*bx_137 = (byte) (ch *16 SLICE(bx_137, byte, 8) >> 0x04 ^ ch *16 bl_52 >> 0x04) & 0x3F;
			byte bh_106 = SLICE(bx_137 + 1, byte, 8);
			bx_132 = SEQ(bh_106, bl_52 + 0x01);
			bx_137 = bx_132;
		} while (bx_137 != &Eq_84::bFFFF);
		++ch;
		do
			;
		while ((__in<byte>(0x03DA) & 0x08) != 0x00);
		bx_132 = SEQ(bh_106, bl_52 + 0x01);
	} while (__in<byte>(0x60) != 0x01);
}

