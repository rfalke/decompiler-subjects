// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Sequence (ptr32 Eq_3) ds_bx)
void fn0C00_0100(struct Eq_3 * ds_bx)
{
	struct Eq_4 * cs;
	struct Eq_5 * es_23 = ds_bx->ptr0002;
	__cli();
	__sti();
	bios_video_set_mode(0x13);
	es_23->b7DA0 = ~0x00;
	cui16 cx_238 = 0xFF;
	do
	{
		uint8 cl_27 = (byte) cx_241;
		__out<byte>(0x03C8, cl_27);
		__out<byte>(969, 0x00);
		__out<byte>(969, cl_27 >> 0x03);
		__out<byte>(969, 0x00);
		cx_238 = SEQ(SLICE(cx_241 - 0x01, byte, 8), cl_27 - 0x01);
		cx_241 = cx_238;
	} while (cx_241 != 0x01);
	while (true)
	{
		word16 cx_205 = 0x0100;
		do
		{
			(cs + 8080)->w00C6 = cx_205;
			(cs + 8080)->ptr00C4 = cs;
			ptr16 ax_49 = (cs + 8080)->ptr00C4;
			(cs + 8080)->w00C4 = 0xA000;
			uint8 ah_231 = SLICE(ax_49 + 0x0FF0, byte, 8);
			struct Eq_58 * ds_55 = (cs + 8080)->ptr00C4;
			word32 Eq_58::* si_57 = Eq_58::a0000;
			word32 Eq_66::* di_61 = Eq_66::a01F6;
			word16 cx_62;
			for (cx_62 = 16000; cx_62 != 0x00; --cx_62)
			{
				(ax_49 + 0x0FF0)->*di_61 = ds_55->*si_57;
				++si_57;
				++di_61;
			}
			(cs + 8080)->ptr00C4 = cs;
			struct Eq_86 * ds_79 = (cs + 8080)->ptr00C4;
			word16 cx_136;
			byte Eq_86::* si_131 = Eq_86::a01F6;
			struct Eq_95 Eq_113::* di_134 = &Eq_113::t01F6;
			for (cx_136 = 0xFA00; cx_136 != 0x00; --cx_136)
			{
				ui32 bx_bx_234 = SEQ(bx_94, ah_231, ((ax_49 + 0x0FF0)->*di_134).bFFFFFEC0) + SEQ(ax_97, ah_231, ((ax_49 + 0x0FF0)->*di_134).bFFFFFFFF);
				cup16 bx_99 = SLICE(bx_bx_234, word16, 16);
				cup16 bx_104 = bx_99 + SEQ(ah_231, di_134[320]) + (word16) (bx_99 < 0x00);
				cup16 bx_109 = bx_104 + SEQ(ah_231, ((ax_49 + 0x0FF0)->*di_134).bFFFFFEBF) + (word16) (bx_104 < 0x00);
				cup16 bx_114 = bx_109 + SEQ(ah_231, ((ax_49 + 0x0FF0)->*di_134).bFFFFFEC1) + (word16) (bx_109 < 0x00);
				cu16 bx_119 = bx_114 + SEQ(ah_231, di_134[319]) + (word16) (bx_114 < 0x00);
				ui16 bx_94 = (word16) bx_bx_234;
				uint16 ax_97 = SEQ(ah_231, di_134[1]);
				byte bl_129 = (byte) (bx_119 + SEQ(ah_231, di_134[0x0141]) + (word16) (bx_119 < 0x00) + 0x04 >> 0x03) + 0x02;
				ds_79->*si_131 = bl_129;
				++si_131;
				++di_134;
			}
			(cs + 8080)->w00C4 = 0xA000;
			struct Eq_207 * es_142 = (cs + 8080)->ptr00C4;
			word32 Eq_207::* di_144 = Eq_207::a0000;
			word16 cx_148;
			word32 Eq_86::* si_149 = Eq_86::a01F6;
			for (cx_148 = 16000; cx_148 != 0x00; --cx_148)
			{
				es_142->*di_144 = ds_79->*si_149;
				++si_149;
				++di_144;
			}
			word16 cx_162;
			struct Eq_236 Eq_207::* di_163 = Eq_207::a0000;
			for (cx_162 = 0x0140; cx_162 != 0x00; --cx_162)
			{
				(es_142->*di_163).bFFFFF8C0 = 0x00;
				di_163[63360] = (struct Eq_236) 0x00;
				(es_142->*di_163).b0000 = 0x00;
				++di_163;
			}
			word16 cx_176;
			struct Eq_261 Eq_207::* di_177 = Eq_207::a0000;
			for (cx_176 = 200; cx_176 != 0x00; --cx_176)
			{
				(es_142->*di_177).b013F = 0x00;
				(es_142->*di_177).b0000 = 0x00;
				++di_177;
			}
			es_142->b7DA0 = 200;
			byte al_194;
			byte ah_195;
			if (!bios_kbd_check_keystroke(out al_194, out ah_195))
			{
				byte al_210;
				bios_kbd_get_keystroke(out al_210);
				bios_video_set_mode(0x03);
				msdos_terminate(0x00);
			}
			word16 cx_203 = (cs + 8080)->w00C6;
			cx_205 = cx_203 - 0x01;
		} while (cx_203 != 0x01);
	}
}

