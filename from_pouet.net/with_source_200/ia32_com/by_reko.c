// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register word16 cx, Register word16 bp, Register (ptr16 Eq_5) ds)
void fn0C00_0100(word16 cx, word16 bp, struct Eq_5 * ds)
{
	struct Eq_6 * Top_178 = 0;
	__syscall<byte>(0x10);
	word16 cx_223 = SEQ(SLICE(cx + 0x01, byte, 8), (byte) cx + 0x01);
	do
	{
		uint8 cl_8 = (byte) cx_227;
		__out<byte>(0x03C8, cl_8);
		__out<byte>(969, cl_8 >> 0x02);
		__out<byte>(969, (cl_8 >> 0x02) + 0x02);
		__out<byte>(969, (cl_8 >> 0x02) + 0x06);
		cx_223 = SEQ(SLICE(cx_227 - 0x01, byte, 8), cl_8 - 0x01);
		cx_227 = cx_223;
	} while (cx_227 != 0x01);
	do
	{
		struct Eq_6 * Top_35 = Top_178 - (struct Eq_335 *) 1;
		Top_35->r0000 = (real64) 0040:006C;
		Top_35->r0000 *= (real64) ds->r01DA;
		Top_35->rFFFFFFFF = Top_35->r0000;
		Top_35->rFFFFFFFF = cos(Top_35->rFFFFFFFF);
		Top_35->rFFFFFFFF /= (real64) ds->w01E2;
		ds->r01EC = (real32) Top_35->rFFFFFFFF;
		Top_35->r0000 = sin(Top_35->r0000);
		Top_35->r0000 /= (real64) ds->w01E2;
		ds->r01E8 = (real32) Top_35->r0000;
		Top_35->r0000 = (real64) ds->r01DE;
		byte Eq_75::* di_165 = &Eq_75::b0000;
		int16 cx_182 = 200;
		do
		{
			Top_35->rFFFFFFFF = (real64) ds->r01DE;
			int16 cx_176 = 0x0140;
			do
			{
				Top_35->rFFFFFFFE = Top_35->rFFFFFFFF;
				Top_35->rFFFFFFFD = Top_35->r0000;
				word16 cx_125 = 0x1F;
				do
				{
					Top_35->rFFFFFFFC = (real64) ds->r01E8;
					Top_35->rFFFFFFFB = Top_35->rFFFFFFFE;
					Top_35->rFFFFFFFB *= Top_35->rFFFFFFFE;
					Top_35->rFFFFFFFC += Top_35->rFFFFFFFB;
					Top_35->rFFFFFFFB = Top_35->rFFFFFFFD;
					Top_35->rFFFFFFFB *= Top_35->rFFFFFFFD;
					Top_35->rFFFFFFFC -= Top_35->rFFFFFFFB;
					Top_35->rFFFFFFFB = (real64) ds->r01EC;
					Top_35->rFFFFFFFA = Top_35->rFFFFFFFE;
					Top_35->rFFFFFFFA *= Top_35->rFFFFFFFD;
					Top_35->rFFFFFFFA += Top_35->rFFFFFFFA;
					Top_35->rFFFFFFFB += Top_35->rFFFFFFFA;
					Top_35->rFFFFFFFD = Top_35->rFFFFFFFB;
					real64 v26_110 = Top_35->rFFFFFFFB;
					Top_35->rFFFFFFFB = Top_35->rFFFFFFFC;
					Top_35->rFFFFFFFC = v26_110;
					Top_35->rFFFFFFFE = Top_35->rFFFFFFFB;
					Top_35->rFFFFFFFB *= Top_35->rFFFFFFFB;
					real64 v27_115 = Top_35->rFFFFFFFB;
					Top_35->rFFFFFFFB = Top_35->rFFFFFFFC;
					Top_35->rFFFFFFFC = v27_115;
					Top_35->rFFFFFFFB *= Top_35->rFFFFFFFB;
					Top_35->rFFFFFFFC += Top_35->rFFFFFFFB;
					ds->dw01E4 = (int32) Top_35->rFFFFFFFC;
					byte cl_133 = (byte) cx_125;
					if (ds->dw01E4 > 100)
						break;
					--cx_125;
					cl_133 = (byte) cx_125;
				} while (cx_125 != 0x00);
				0xA000->*di_165 = ((byte) ((cx_226 - 100) *s (cx_228 - 0xA0) >> 0x07) & 0x1F | (cl_133 ^ 0x1F) << 0x04) + (byte) bp;
				Top_35->rFFFFFFFF += (real64) ds->r01D6;
				++di_165;
				cx_176 = cx_228 - 0x01;
				cx_228 = cx_176;
			} while (cx_228 != 0x01);
			Top_35->r0000 += (real64) ds->r01DA;
			Top_178 = Top_35;
			cx_182 = cx_226 - 0x01;
			cx_226 = cx_182;
		} while (cx_226 != 0x01);
		bp -= 0x04;
	} while (__in<byte>(0x60) != 0x01);
}

