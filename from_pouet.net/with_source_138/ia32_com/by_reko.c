// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte al, Register int16 cx, Register word16 bx, Register (memptr (ptr16 Eq_17) Eq_6) di)
void fn0C00_0100(byte al, int16 cx, word16 bx, struct Eq_6 Eq_17::* di)
{
	bios_video_set_mode(0x13);
	struct Eq_12 * ax_6 = SEQ(0xA0, al);
	do
	{
		((ax_6 * 0x02)->*di).t0000.u1 = 0x13;
		--di;
		word16 bx_123 = bx;
	} while (di != &Eq_17::t0000);
	do
	{
		__out<byte>(969, 0x00);
		__out<byte>(969, 0x00);
		bcu8 bl_24 = (byte) bx_127;
		__out<byte>(969, bl_24 >> 0x02);
		byte ah_103 = 0x00;
		bx_123 = SEQ(SLICE(bx_127 + 0x01, byte, 8), bl_24 + 0x01);
		bx_127 = bx_123;
	} while (bx_127 != ~0x00);
	do
	{
		do
		{
			word16 bx_33 = 0x00;
			word16 dx_37;
			struct Eq_6 Eq_17::* si_39 = di;
			for (dx_37 = 0x03; dx_37 != 0x00; --dx_37)
			{
				++si_39;
				bx_33 = bx_33 + SEQ(ah_103, ((ax_6 * 0x02)->*si_39).bFFFFFEBE) + SEQ(ah_103, si_39[318]) + SEQ(ah_103, ((ax_6 * 0x02)->*si_39).bFFFFFFFE);
			}
			cui16 ax_62 = SEQ(ah_103, ((ax_6 * 0x02)->*di).t0000.u0);
			cu16 bx_65 = bx_33 - ax_62 - (ax_62 << 0x02);
			((ax_6 * 0x02)->*di).t0000.u0 = (byte) ((bx_65 >> 0x02) - (bx_65 >> 0x09));
			ah_103 = SLICE(bx_65 >> 0x09, byte, 8);
			++di;
			--cx;
		} while (cx != 0x00);
		memcpy(&&(ax_6->*((ax_6->*di).t0000).u0), &&((ax_6 * 0x02)->*(((ax_6 * 0x02)->*si_39).t0000).u0), cx - 0x01);
		cx = 0x00;
		di += cx - 0x01;
	} while (__in<byte>(0x60) != 0x01);
	__syscall<byte>(0x10);
}

