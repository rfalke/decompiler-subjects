// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte ch, Register (ptr16 Eq_4) ds)
void fn0C00_0100(byte ch, struct Eq_4 * ds)
{
	__syscall<byte>(0x10);
	msdos_display_string((char *) &ds->t01ED + 4);
	byte dh_160 = 0x01;
	struct Eq_18 Eq_4::* bx_14 = &Eq_4::t0A00;
	do
	{
		bx_14[61961] = (struct Eq_18) (0xA000->*bx_14).b0000;
		--bx_14;
	} while (bx_14 != Eq_4::a0000);
	do
	{
		word16 cx_148 = SEQ(ch, 0x46);
		do
		{
			Eq_36 bx_29 = ds->w0201 *s 0x013F + ds->w01FF;
			ds->*((word16) bx_29 + 0x00007C69) = (word16) (ds->*((word16) bx_29 + 0x00007C69)) + 24;
			ds->*((word16) bx_29 + 0x00007C6A) = (word16) (ds->*((word16) bx_29 + 0x00007C6A)) + 16;
			ds->*((word16) bx_29 + 0x00007B29) = (word16) (ds->*((word16) bx_29 + 0x00007B29)) + 16;
			ds->w01FF = (int16) (sin((real64) ds->t01E3) * (real64) ds->w01DF);
			ds->w0201 = (int16) (cos((real64) ds->t01E7) * (real64) ds->w01E1);
			ds->t01E3 = (word32) ds->t01E3 + 91;
			ds->t01E7 = (word32) ds->t01E7 + 0x009E;
			--cx_148;
			byte ch_173 = SLICE(cx_148, byte, 8);
		} while (cx_148 != 0x00);
		ds->t01E3 -= 0x18E3;
		ds->t01E7 -= 11063;
		struct Eq_144 Eq_4::* bx_61 = &Eq_4::tC800;
		do
		{
			byte al_65 = bx_61[521];
			if (al_65 != 0x10)
			{
				bx_61[521] = (struct Eq_144) (al_65 - 0x01);
				--al_65;
			}
			--bx_61;
			(0xA000->*bx_61).b0000 = al_65;
		} while (bx_61 != Eq_4::a0000);
		ds->t0205 = ds->t01ED;
		word16 cx_119 = SEQ(ch_173, ~0x00);
		do
		{
			ds->w0203 = (int16) (sin((real64) ds->t0205) * (real64) ds->w01EB);
			int16 di_95 = ds->w0203;
			int16 dx_116 = SEQ(dh_160, 11);
			do
			{
				Eq_177 bx_103 = dx_116 *s 0x0141 + cx_119;
				0xA000->*((word16) ds->t010F + ((word16) (di_95 *s 322) + ((word16) bx_103 + 0x0000E100))) = ds->*((word16) bx_103 + 61313);
				ds->t0205 = (word32) ds->t0205 + 1;
				--dx_116;
				dh_160 = SLICE(dx_116, byte, 8);
			} while (dx_116 != 0x00);
			--cx_119;
			ch = SLICE(cx_119, byte, 8);
		} while (cx_119 != 0x00);
		ds->t01ED = (word32) ds->t01ED + 3;
		if ((ds->t01ED & 0x07) == 0x00)
			--ds->t010F;
	} while (__in<word16>(0x60) != 0x01);
}

