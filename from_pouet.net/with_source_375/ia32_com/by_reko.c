// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte al, Register byte cl, Register cui16 bx, Register (memptr (ptr16 Eq_7) byte) bp, Register (ptr16 Eq_7) es, Register (ptr16 Eq_8) ds)
void fn0C00_0100(byte al, byte cl, cui16 bx, byte Eq_7::* bp, struct Eq_7 * es, struct Eq_8 * ds)
{
	byte Eq_7::* di_23 = Eq_7::a1574;
	word16 cx_6;
	for (cx_6 = SEQ(~0x29, cl); cx_6 != 0x00; --cx_6)
	{
		es->*di_23 = al;
		++di_23;
	}
	msdos_multiplex(22, 0x87);
	if ((bx & 0x1688) != 0x00)
	{
		__syscall<byte>(0x10);
		byte Eq_8::* bx_35 = Eq_8::a1BF9;
		do
		{
			ds->*bx_35 = es->*bp;
			++bp;
			++bx_35;
		} while (bx_35 != &Eq_8::bDC07);
		ds->w158B = SEQ(0x02, fn0C00_0181((char *) ds + 412) << 0x04);
		fn0C00_0181((char *) ds + 468);
	}
	else
		msdos_display_string((char *) ds + 0x0119);
}

// 0C00:0181: Register byte fn0C00_0181(Sequence word32 ds_dx)
// Called from:
//      fn0C00_0100
byte fn0C00_0181(word32 ds_dx)
{
	struct Eq_80 * ds = SLICE(ds_dx, selector, 16);
	msdos_display_string(ds_dx);
	byte al_11;
	bios_kbd_get_keystroke(out al_11);
	ds->b1589 = al_11;
	return al_11;
}

