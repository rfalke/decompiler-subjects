// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register word16 cx, Register (memptr (ptr16 Eq_6) Eq_4) bx, Register word16 bp, Register (ptr16 Eq_6) ds)
void fn0C00_0100(word16 cx, struct Eq_4 Eq_6::* bx, word16 bp, struct Eq_6 * ds)
{
	struct Eq_7 * Top_156 = 0;
	__syscall<byte>(0x10);
	word16 cx_283 = SEQ(SLICE(cx + 0x01, byte, 8), (byte) cx + 0x01);
	do
	{
		uint8 cl_8 = (byte) cx_288;
		__out<byte>(0x03C8, cl_8);
		__out<byte>(969, cl_8 >> 0x02);
		__out<byte>(969, cl_8 >> 0x02);
		__out<byte>(969, (cl_8 >> 0x02) + 0x0E);
		cx_283 = SEQ(SLICE(cx_288 - 0x01, byte, 8), cl_8 - 0x01);
		cx_288 = cx_283;
	} while (cx_288 != 0x01);
	struct Eq_54 * es_227 = (ds->*bx).ptr0002;
	do
	{
		word16 cx_168 = 0xFA00;
		byte Eq_54::* di_33 = Eq_54::a0000;
		struct Eq_59 Eq_6::* si_37 = Eq_6::a0206;
		do
		{
			es_227->*di_33 = (ds->*si_37).b0000;
			word16 ax_50 = cx_168 + bp;
			++si_37;
			(ds->*si_37).bFFFFFFFF = ((byte) ax_50 ^ SLICE(ax_50, byte, 8)) & 0x1F;
			++di_33;
			cx_168 = cx_168 - 0x01 + 0x01;
		} while (cx_168 != 0x00);
		__fninit();
		struct Eq_7 * Top_64 = Top_156 - 1;
		Top_64->r0000 = 0.0;
		bp += 0x40;
		do
		{
			Top_64->rFFFFFFFF = Top_64->r0000;
			Top_64->rFFFFFFFF *= (real64) ds->r01F3;
			real64 v27_74 = Top_64->rFFFFFFFF;
			Top_64->rFFFFFFFF = cos(v27_74);
			Top_64->rFFFFFFFE = sin(v27_74);
			Top_64->rFFFFFFFE /= (real64) ds->r01F3;
			Top_64->rFFFFFFFD = 1.0;
			Top_64->rFFFFFFFE += Top_64->rFFFFFFFD;
			Top_64->rFFFFFFFD = Top_64->r0000;
			real64 v29_86 = Top_64->rFFFFFFFD;
			Top_64->rFFFFFFFD = cos(v29_86);
			Top_64->rFFFFFFFC = sin(v29_86);
			real64 v30_90 = Top_64->rFFFFFFFC;
			Top_64->rFFFFFFFC = Top_64->rFFFFFFFE;
			Top_64->rFFFFFFFE = v30_90;
			Top_64->rFFFFFFFE *= Top_64->rFFFFFFFC;
			Top_64->rFFFFFFFD *= Top_64->rFFFFFFFC;
			real64 v31_96 = Top_64->rFFFFFFFD;
			Top_64->rFFFFFFFD = Top_64->rFFFFFFFF;
			Top_64->rFFFFFFFF = v31_96;
			Top_64->rFFFFFFFD /= (real64) ds->r01F3;
			Top_64->rFFFFFFFC = (real64) 0040:006C;
			Top_64->rFFFFFFFC *= (real64) ds->r01EF;
			real64 v32_104 = Top_64->rFFFFFFFC;
			Top_64->rFFFFFFFC = cos(v32_104);
			Top_64->rFFFFFFFB = sin(v32_104);
			Top_64->rFFFFFFFA = Top_64->rFFFFFFFE;
			Top_64->rFFFFFFFA *= Top_64->rFFFFFFFB;
			Top_64->rFFFFFFF9 = Top_64->rFFFFFFFD;
			Top_64->rFFFFFFF9 *= Top_64->rFFFFFFFC;
			Top_64->rFFFFFFFA += Top_64->rFFFFFFF9;
			real64 v35_118 = Top_64->rFFFFFFFA;
			Top_64->rFFFFFFFA = Top_64->rFFFFFFFD;
			Top_64->rFFFFFFFD = v35_118;
			Top_64->rFFFFFFFB *= Top_64->rFFFFFFFA;
			real64 v36_123 = Top_64->rFFFFFFFB;
			Top_64->rFFFFFFFB = Top_64->rFFFFFFFE;
			Top_64->rFFFFFFFE = v36_123;
			Top_64->rFFFFFFFC *= Top_64->rFFFFFFFB;
			Top_64->rFFFFFFFE -= Top_64->rFFFFFFFC;
			real64 v37_130 = Top_64->rFFFFFFFD;
			Top_64->rFFFFFFFD = Top_64->rFFFFFFFE;
			Top_64->rFFFFFFFE = v37_130;
			real64 v38_133 = Top_64->rFFFFFFFD;
			Top_64->rFFFFFFFD = Top_64->rFFFFFFFF;
			Top_64->rFFFFFFFF = v38_133;
			real64 v39_136 = Top_64->rFFFFFFFD;
			Top_64->rFFFFFFFD = Top_64->rFFFFFFFE;
			Top_64->rFFFFFFFE = v39_136;
			Top_64->rFFFFFFFC = Top_64->rFFFFFFFF;
			Top_64->rFFFFFFFC += (real64) ds->w01F7;
			Top_64->rFFFFFFFC = (real64) ds->w01F9 / Top_64->rFFFFFFFC;
			Top_64->rFFFFFFFE *= Top_64->rFFFFFFFC;
			Top_64->rFFFFFFFD *= Top_64->rFFFFFFFC;
			Top_64->rFFFFFFFD += (real64) ds->w01F7;
			ds->t0202.u0 = (int16) Top_64->rFFFFFFFD;
			Top_64->rFFFFFFFE += (real64) ds->w01FD;
			ds->w0200 = (int16) Top_64->rFFFFFFFE;
			Top_64->rFFFFFFFF *= (real64) ds->w01FB;
			Top_64->rFFFFFFFF += (real64) ds->w01F7;
			ds->t0204.u0 = (int16) Top_64->rFFFFFFFF;
			Top_156 = Top_64;
			Eq_103 si_163 = ds->t0202 * 0x0140 + 0x0206 + ds->w0200;
			Eq_111 al_165 = ds->t0204;
			word16 cx_171 = 0x0A;
			do
			{
				word16 cx_189 = SEQ(SLICE(cx_287, byte, 8), 0x0A);
				do
				{
					if (ds->*si_163 <= al_165)
						ds->*si_163 = al_165;
					si_163 = (word16) si_163 + 1;
					--cx_189;
				} while (cx_189 != 0x00);
				si_163 = (word16) si_163 + 310;
				cx_171 = cx_287 - 0x01;
				cx_287 = cx_171;
			} while (cx_287 != 0x01);
			Top_64->r0000 += (real64) ds->r01EF;
			cx_168 = cx_286 + 0x01;
			cx_286 = cx_168;
		} while ((SLICE(cx_286 + 0x00, byte, 8) & 0x02) == 0x00);
	} while (__in<byte>(0x60) != 0x01);
}

