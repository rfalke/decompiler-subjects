// subject_.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0800:0000: void fn0800_0000(Register (ptr16 Eq_3) es)
void fn0800_0000(struct Eq_3 * es)
{
	__syscall<byte>(33);
	uint8 al_151 = es->b0080;
	uint16 ax_11 = (uint16) al_151;
	0010:020F = (uint16 *) ax_11;
	struct Eq_17 * ds_145 = 0x10;
	if (ax_11 == 0x00)
	{
		msdos_display_string(0010:0080);
		goto l0800_00E9;
	}
	struct Eq_21 Eq_54::* bx_15 = Eq_54::a0200;
	byte Eq_3::* di_16 = &Eq_3::b0080;
	do
		++di_16;
	while (es->*di_16 != 0x20);
	byte Eq_3::* di_23 = di_16 + 1;
	uint16 cx_26 = 0010:020F;
	do
	{
		(0x10->*bx_15).b0000 = es->*di_23;
		++bx_15;
		++di_23;
		--cx_26;
	} while (cx_26 != 0x00);
	bx_15[511] = (struct Eq_21) 0x00;
	byte al_134 = (byte) ax_46;
	word16 ax_46;
	if (msdos_open_file(0010:0200, 0x00, out ax_46))
	{
		0010:020D = (word16 *) ax_46;
		ds_145 = 114;
		al_134 = (byte) ax_56;
		word16 ax_56;
		if (msdos_read_file(ax_46, ~0x00, 0072:0000, out ax_56))
		{
			al_134 = 0x10;
			ds_145 = 0x10;
			if (msdos_close_file(0010:020D))
			{
				al_151 = 114;
				if (0072:0000 != ~0x14 && 0072:0000 != 233)
					msdos_display_string(0010:00A0);
				else
				{
					bios_video_set_mode(0x03);
					msdos_display_string(0010:0000);
					fn0072_0000();
					__cli();
					do
					{
						do
							;
						while ((__in<byte>(0x03DA) & 0x08) == 0x00);
						__out<byte>(0x03C8, 0x00);
						__out<byte>(969, 0x3F);
						__out<byte>(969, 0x00);
						__out<byte>(969, 0x00);
						fn0072_0003();
						__out<byte>(0x03C8, 0x00);
						__out<byte>(969, 0x00);
						__out<byte>(969, 0x00);
						__out<byte>(969, 0x00);
					} while (__in<byte>(0x60) != 0x01);
					fn0072_000C();
					al_151 = (byte) ax_123;
				}
l0800_00E9:
				__sti();
				msdos_terminate(al_151);
			}
		}
	}
	uint16 ax_138 = (uint16) al_134;
	msdos_display_string(ax_138 * 0x20 + 0xC0);
	al_151 = (byte) ax_138 * 0x20;
	goto l0800_00E9;
}

