// subject_data.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

WCHAR g_t402000 = 'D'; // 00402000
WCHAR g_t402012 = '<'; // 00402012
WCHAR g_t40204C = 'S'; // 0040204C
Eq_324 g_t40206C = // 0040206C
	{
		
		{
			0x28,
			320,
			200,
			0x01,
			0x20,
			0x00,
			0x00,
			0,
			0,
			0x00,
			0x00,
		},
		
		{
			
			{
				0x00,
				0x00,
				0x00,
				0x00,
			},
		},
	};
Eq_444 g_t4020A4 = // 004020A4
	{
		0x00,
		&g_t4013B6,
		0,
		0,
		null,
		null,
		null,
		&g_t0002,
		null,
		&g_str402000,
	};
Eq_419 g_t4020B4 = // 004020B4
	{
		null
	};
Eq_428 g_t4020B8 = null; // 004020B8
Eq_431 g_t4020BC = null; // 004020BC
Eq_306 g_t4020CC = null; // 004020CC
Eq_314 g_t4020D0 = null; // 004020D0
Eq_522 g_t4020D4 = // 004020D4
	{
		null,
		0x00,
		0x00,
		0,
		0x00,
		
		{
			0,
			0,
		},
	};
word32 g_dw4020D8 = 0x00; // 004020D8
Eq_325 g_t4020DC = 0x00; // 004020DC
struct tagRECT g_t4020F0 = // 004020F0
	{
		0,
		0,
		0,
		0,
	};
int32 g_dw4020F8 = 0; // 004020F8
int32 g_dw4020FC = 0; // 004020FC
Eq_216 g_t402100 = // 00402100
	{
		null
	};
Eq_2 g_t402104 = // 00402104
	{
		null
	};
word32 g_dw402108 = 0x00; // 00402108
Eq_2 g_t40210C = // 0040210C
	{
		null
	};
Eq_161 g_t40211C = null; // 0040211C
Eq_167 g_t402120 = // 00402120
	{
		null
	};
Eq_31 g_t402124 = // 00402124
	{
		null
	};
int16 g_w40213E = 0x000028C0; // 0040213E
word16 g_w40213F = 0x28; // 0040213F
Eq_64 g_t402140 = // 00402140
	{
		0x00
	};
word16 g_w402142 = 0x00; // 00402142
int16 g_w402144 = 0; // 00402144
byte g_a402146[] = // 00402146
	{
	};
// subject_idata.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 g_dw404074 = 0x409C; // 00404074
word32 g_dw404078 = 0x40AA; // 00404078
word32 g_dw40407C = 0x40BE; // 0040407C
word32 g_dw404080 = 0x40CC; // 00404080
<anonymous> * __imp__ExitProcess = &g_t409C; // 00404088
<anonymous> * __imp__GetModuleHandleW = &g_t40AA; // 0040408C
<anonymous> * __imp__GlobalAlloc = &g_t40BE; // 00404090
<anonymous> * __imp__GlobalFree = &g_t40CC; // 00404094
word32 g_dw4040DA = 0x414A; // 004040DA
word32 g_dw4040DE = 0x415C; // 004040DE
word32 g_dw4040E2 = 0x416E; // 004040E2
word32 g_dw4040E6 = 16770; // 004040E6
word32 g_dw4040EA = 16786; // 004040EA
word32 g_dw4040EE = 0x419A; // 004040EE
word32 g_dw4040F2 = 16808; // 004040F2
word32 g_dw4040F6 = 0x41B4; // 004040F6
word32 g_dw4040FA = 0x41C2; // 004040FA
word32 g_dw4040FE = 0x41D2; // 004040FE
word32 g_dw404102 = 16868; // 00404102
word32 g_dw404106 = 16886; // 00404106
word32 g_dw40410A = 0x4202; // 0040410A
<anonymous> * __imp__CreateWindowExW = &g_t414A; // 00404112
<anonymous> * __imp__DefWindowProcW = &g_t415C; // 00404116
<anonymous> * __imp__DispatchMessageW = &g_t416E; // 0040411A
<anonymous> * __imp__GetClientRect = &g_t4182; // 0040411E
<anonymous> * __imp__GetDC = &g_t4192; // 00404122
<anonymous> * __imp__LoadCursorW = &g_t419A; // 00404126
<anonymous> * __imp__LoadIconW = &g_t41A8; // 0040412A
<anonymous> * __imp__MessageBoxW = &g_t41B4; // 0040412E
<anonymous> * __imp__PeekMessageW = &g_t41C2; // 00404132
<anonymous> * __imp__PostQuitMessage = &g_t41D2; // 00404136
<anonymous> * __imp__RegisterClassW = &g_t41E4; // 0040413A
<anonymous> * __imp__ReleaseDC = &g_t41F6; // 0040413E
<anonymous> * __imp__TranslateMessage = &g_t4202; // 00404142
word32 g_dw404216 = 0x422E; // 00404216
word32 g_dw40421A = 0x4242; // 0040421A
<anonymous> * __imp__SetStretchBltMode = &g_t422E; // 00404222
<anonymous> * __imp__StretchDIBits = &g_t4242; // 00404226
// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: void fn00401000()
// Called from:
//      Win32CrtStartup
void fn00401000()
{
	Eq_2 edx_12 = g_t402104.u0;
	cu8 bl_23 = 0x00;
	do
	{
		if (bl_23 >= 0x80)
			edx_12->u0->a0000 = bl_23 << 0x01;
		struct Eq_7 * edx_15 = (word32) edx_12 + 1;
		edx_15->b0000 = bl_23 << 0x01;
		edx_15->b0001 = bl_23 << 0x01;
		edx_12.u0->a0000 = &edx_15->b0001 + 2;
		++bl_23;
	} while (bl_23 != 0x00);
}

// 00401020: void fn00401020()
// Called from:
//      Win32CrtStartup
void fn00401020()
{
	Eq_31 edi_34 = g_t402124.u0;
	cui16 cx_92 = 0x0200;
	do
	{
		*edi_34.u0 = g_a402146[(uint32) (((word16) SLICE(cx_95, byte, 8) << 0x06) + cx_95)];
		edi_34.u0 = (word32) edi_34 + 1;
		cx_92 = SEQ(SLICE(cx_95 + 0x01, byte, 8), (byte) cx_95 + 0x01);
		cx_95 = cx_92;
	} while (cx_95 != 0x0AFF);
}

// 00401052: void fn00401052()
// Called from:
//      Win32CrtStartup
void fn00401052()
{
	bool P;
	Eq_61 Top_3 = 0;
	g_t402140.u1 = (word16) (g_t402140.u1 + 0x01);
	word16 eax_16_16_236 = 0x00;
	byte bl_314 = 0x00;
	byte bh_321 = 0x00;
	do
	{
		byte al_43 = bl_314;
		int16 dx_44 = 0xF200;
		do
		{
			int16 ax_47 = (int16) (al_43 - 0x80);
			g_w402144 = ax_47;
			bi8 al_49 = (byte) ax_47;
			--Top_3;
			Top_3.u1->r0000 = (real64) g_w402144;
			dx_44 -= al_49 *s16 al_49;
			ptr32 ebx_139 = SEQ(0x00, bh_321, bl_314);
			cu8 dh_74 = SLICE(dx_44, byte, 8);
			al_43 = bh_321;
			word16 bx_149 = (word16) ebx_139;
		} while (P);
		Top_3.u1->r0001 = __atan2(Top_3.u1->r0001, Top_3.u1->r0000);
		Top_3.u1->r0001 *= (real64) g_w40213E;
		g_w402144 = (int16) Top_3.u1->r0001;
		int16 ax_68 = g_w402144;
		g_w402144 = dx_44;
		bcu8 ah_71 = SLICE(ax_68 + g_w40213F, byte, 8);
		&Top_3.u1->r0000 = (word32) Top_3 + 2;
		uint8 cl_110 = 0x00;
		byte dh_108 = (dh_74 & 0x07) + (ah_71 & 0x07) + dh_74;
		if (dh_74 <= ~0x13 && dh_74 >= ~0x14)
		{
			cl_110 = ah_71 >> 0x01;
			dh_108 = SLICE(g_w402144 << 0x05, byte, 8) + 0x60;
		}
		if (dh_74 <= ~0x19)
		{
			word16 cx_111 = SEQ(ah_71 & 0x1F, cl_110);
			if ((ah_71 & 0x1F) <= 0x03)
			{
				if (dh_74 >= 229)
				{
					dh_108 = __ror<byte,byte>(dh_74, 0x03) + 0x1E;
					--cx_111;
				}
				dh_108 -= 0x14;
			}
			cl_110 = (byte) cx_111;
			if (dh_74 <= 0xB2)
				cl_110 = (byte) cx_111 - 0x01;
		}
		*((char *) g_t40211C + ebx_139) = (Eq_161) cl_110;
		g_t402120.u0[ebx_139] = dh_108 + 0x80;
		bl_314 = (byte) bx_149 + 0x01;
		bh_321 = SLICE(bx_149 + 0x01, byte, 8);
	} while (bx_149 != ~0x00);
	ptr32 edi_153 = 0x0003E800;
	word16 si_154;
	for (si_154 = 100; si_154 != ~0x63; --si_154)
	{
		g_w402142 = ~0x9F;
		do
		{
			int32 dx_ax_165 = (int32) (int16) (g_t402140.u0 << 0x01);
			bi8 al_170 = ((byte) dx_ax_165 & 0x7F) - 0x40;
			int16 ax_171 = al_170 *s16 al_170;
			bui8 al_175 = (byte) ax_171;
			ui16 ax_176 = SEQ(SLICE(ax_171, byte, 8) - 0x10, al_175);
			ui16 dx_177 = SLICE(dx_ax_165, word16, 16) ^ ax_176;
			word16 cx_160 = 0x7F40;
			word16 di_186 = SEQ(SLICE(ax_176 * 0x02, byte, 8) - 0x01, al_175 * 0x02);
			word16 dx_190 = SEQ(SLICE(dx_177, byte, 8) + 0x20, (byte) dx_177);
			do
			{
				cx_160 += g_w402142;
				di_186 -= 0xA0;
				int32 ebx_201 = SEQ(0x00, SLICE(di_186, byte, 8), SLICE(cx_160, byte, 8));
				word16 dx_192 = dx_190 + si_154;
				Eq_231 ah_202 = *((char *) g_t40211C + ebx_201);
				byte al_204 = g_t402120.u0[ebx_201];
				cu8 dh_211 = SLICE(dx_192, byte, 8);
				ui32 eax_234 = SEQ(eax_16_16_236, ah_202, al_204);
				if (ah_202 < 0x00)
					break;
				word16 ax_241 = SEQ(ah_202, al_204);
				if (ah_202 != 0x00)
				{
					byte ah_216 = g_t402124.u0[SEQ(0x00, dh_211 >> 0x01, ah_202)];
					word24 eax_24_8_238 = SEQ(eax_16_16_236, ah_216);
					ax_241 = SEQ(ah_216, al_204);
					if (ah_216 != 0x00)
					{
						eax_234 = SEQ(eax_24_8_238, al_204 + 0x80);
						break;
					}
				}
				eax_234 = SEQ(eax_16_16_236, ax_241);
				dx_190 = dx_192;
			} while (dh_211 <= 0x46);
			word32 eax_248 = g_t402104.u0[(eax_234 & 0xFF) * 0x04];
			*((char *) g_t402100.u0 + edi_153) = eax_248;
			++g_w402142;
			eax_16_16_236 = SLICE(eax_248, word16, 16);
			edi_153 -= 0x04;
		} while (g_w402142 != 0xA0);
	}
	GetClientRect(g_t4020CC, &g_t4020F0);
	StretchDIBits(g_t4020D0, 0x00, 0x00, g_dw4020F8, g_dw4020FC, 0x00, 0x00, 0x0140, 200, g_t402100.u0, &g_t40206C, 0x00, 0x00CC0020);
}

// 00401230: Register Eq_326 Win32CrtStartup()
Eq_326 Win32CrtStartup()
{
	Eq_2 eax_8 = GlobalAlloc(0x00, 1000000);
	if (eax_8 != 0x00)
	{
		g_t40210C.u0 = (struct Eq_579 *) eax_8;
		g_t402104.u0 = (struct Eq_579 *) eax_8;
		g_t402100.u0 = (word32) eax_8 + 2000;
		g_t40211C = (Eq_161) ((word32) eax_8 + 402000);
		g_t402120.u0 = (word32) eax_8 + 602000;
		g_t402124.u0 = (word32) eax_8 + 702000;
		word32 ebx_25;
		for (ebx_25 = 499999; ebx_25 != 0x00; --ebx_25)
			g_t40210C.u0->a0000[0] = (byte) 0x00;
		g_t4020B4.u0 = (HINSTANCE) GetModuleHandleW(null);
		g_t4020B8 = LoadIconW(0x00, (WCHAR *) 0x7F00);
		Eq_431 eax_54 = LoadCursorW(0x00, (WCHAR *) 0x7F00);
		g_t4020BC = eax_54;
		if (SEQ(SLICE(eax_54, word16, 16), RegisterClassW(&g_t4020A4)) != 0x00)
		{
			Eq_306 eax_92 = CreateWindowExW(0x00, &g_t402000, &g_t402012, 0x10CF0000, 0x8000, 0x8000, 0x021C, 400, null, null, g_t4020B4.u0, null);
			if (eax_92 != null)
			{
				g_t4020CC = eax_92;
				g_t4020D0 = GetDC(eax_92);
				fn00401000();
				fn00401020();
				fn00401052();
				SetStretchBltMode(g_t4020D0, 0x04);
				while (true)
				{
					PeekMessageW(&g_t4020D4, null, 0x00, 0x00, 0x01);
					if (g_dw4020D8 == 0x12)
						break;
					TranslateMessage(&g_t4020D4);
					DispatchMessageW(&g_t4020D4);
					fn00401052();
					++g_dw402108;
				}
l0040138C:
				ReleaseDC(g_t4020CC, g_t4020D0);
				GlobalFree(g_t40210C.u0);
				ExitProcess(g_t4020DC);
			}
		}
	}
	MessageBoxW(null, &g_t40204C, null, 0x10);
	goto l0040138C;
}

LRESULT g_t4013B6(HWND tArg04, UINT tArg08, WPARAM tArg0C, LPARAM tArg10) = ??/* Unexpected function type (fn LRESULT (HWND, UINT, WPARAM, LPARAM)) */ ; // 004013B6
