// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte ch, Register word16 ecx_16_16, Register Eq_5 bx, Register cui16 si)
void fn0C00_0100(byte ch, word16 ecx_16_16, Eq_5 bx, cui16 si)
{
	__syscall<byte>(0x10);
	__out<word16>(0x03D4, 8211);
	Eq_19 dx_24 = 0x03D4;
	Eq_5 bx_430 = bx;
	do
	{
		word16 cx_310 = SEQ(ch, 0x02);
		do
		{
			byte bl_18 = (byte) bx_435;
			Eq_19 ax_22 = ((bl_18 & 0x3F) - 0x20) *s16 ((bl_18 & 0x3F) - 0x20);
			--cx_310;
			byte bh_29 = SLICE(bx_435, byte, 8);
			dx_24 = ax_22;
			ch = SLICE(cx_310, byte, 8);
			dx_434 = dx_24;
		} while (cx_310 != 0x00);
		Mem40[0x6000:bx_435 + 0x00:byte] = SLICE(dx_434 + ax_22 >>u 0x03, byte, 0);
		int16 ax_50 = (bh_29 << 0x01) *s16 (bh_29 << 0x01);
		dx_24 = SLICE((int32) (int16) (bh_29 + 0x40), word16, 16);
		int16 ax_56 = SEQ(SLICE(ax_50, byte, 8) - 0x40, (byte) ax_50) ^ dx_24;
		0x7000->a0000[0][bx_435] = ax_56 >> 0x06;
		int16 ax_374 = ax_56 >> 0x06;
		byte bl_302 = bh_29 + 0x01;
		bx_430 = SEQ(bh_29 + 0x01, SLICE((word16) bx_435 + 1, byte, 8));
		bx_435 = bx_430;
	} while (bx_435 != ~0x00);
	do
	{
		++si;
		word16 Eq_93::* di_296 = Eq_93::a0000;
		word16 cx_299;
		for (cx_299 = 0x8000; cx_299 != 0x00; --cx_299)
		{
			0x5000->*di_296 = ax_374;
			++di_296;
		}
		Eq_90 bx_186 = SEQ(0x02, bl_302);
		do
		{
			ui16 cx_179 = si << 0x07;
			uint16 bp_138 = 0x00;
			Eq_107 ah_104 = 0x00;
			word16 dx_178 = SEQ(SLICE(si << 0x07, byte, 8), (byte) si << 0x07);
			do
			{
				uint16 ax_126;
				bu8 al_102 = 0x6000->*SEQ(ecx_16_16, SLICE(cx_179, byte, 8), SLICE(dx_178, byte, 8));
				ui16 bx_122 = SEQ(SLICE(bx_437, byte, 8), ah_436);
				if ((si & 0x0200) == 0x00)
					ax_126 = 0x7000->a0082[0].b0000[bx_122].b0000 *16 al_102 >> 0x01;
				else
				{
					uint16 ax_117 = ah_436 *16 -al_102;
					ax_126 = SEQ((byte) ah_436 + SLICE(ax_117, byte, 8), (byte) ax_117);
				}
				uint16 ax_131 = ax_126 >> 0x08;
				if (ax_131 > bp_138)
				{
					Eq_148 di_143 = (bx_437 << 0x07) + bp_138;
					bp_138 = ax_131;
					uint16 cx_148;
					uint8 al_155 = (al_102 >> 0x04) + 0x10;
					for (cx_148 = ax_131 - bp_138; cx_148 != 0x00; --cx_148)
					{
						0x5000->*di_143 = al_155;
						di_143 = (word16) di_143 + 1;
					}
				}
				dx_178 = (word16) (0x7000->*bx_437) + dx_178;
				cx_179 = (word16) (0x7000->*((word16) bx_437 + 0x0080)) + cx_179;
				ah_104 = (byte) ah_436 + 1;
				ah_436 = ah_104;
			} while (ah_436 >= ~0x00);
			bx_186 = bx_437 - 0x02;
			byte bh_362 = SLICE(bx_437 - 0x02, byte, 8);
			byte bl_366 = (byte) bx_437 - 0x02;
			bx_437 = bx_186;
		} while (bx_437 != 0x02);
		struct Eq_202 Eq_223::* bx_427 = SEQ(bh_362, bl_366);
		do
		{
			bi8 bh_193 = SLICE(bx_438, byte, 8);
			int16 ax_195 = (int16) bh_193;
			bi8 bl_208 = (byte) bx_438;
			int16 ax_203 = (int16) ((byte) ax_195 ^ SLICE(ax_195, byte, 8));
			int16 ax_210 = (int16) bl_208;
			int16 ax_228 = (int16) ((int32) (ax_210 << 0x06) /16 (SEQ(SLICE(ax_203, byte, 8), (byte) ax_203 + ((byte) ax_210 ^ SLICE(ax_210, byte, 8))) + 0x01));
			bcu8 ah_234 = SLICE(ax_195, byte, 8);
			int32 dx_ax_258 = (int32) (bh_193 *s16 bh_193 + bl_208 *s16 bl_208);
			word24 ecx_24_8_273 = SEQ(ecx_16_16, (ah_234 >> 0x01) + (((byte) ax_228 ^ ah_234) + (byte) si));
			ui16 dx_259 = SLICE(dx_ax_258, word16, 16);
			ci16 ax_261 = (word16) dx_ax_258;
			do
			{
				++dx_259;
				ax_261 -= dx_259 * 0x02;
				byte dl_266 = (byte) dx_259;
				byte ah_375 = SLICE(ax_261, byte, 8);
			} while (ax_261 >= 0x00);
			(0xA000->*bx_438).b64A0 = 0x5000->*SEQ(ecx_24_8_273, dl_266);
			bl_302 = bl_208 + 0x01;
			bx_427 = SEQ(SLICE((char *) bx_438 + 1, byte, 8), bl_208 + 0x01);
			bx_438 = bx_427;
		} while (bx_438 != &Eq_223::tFFFF);
		byte al_285 = __in<byte>(0x60);
		ax_374 = SEQ(ah_375, al_285);
	} while (al_285 != 0x01);
}

