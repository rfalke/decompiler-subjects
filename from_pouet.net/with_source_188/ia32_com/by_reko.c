// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte ch, Register (ptr16 Eq_4) ds)
void fn0C00_0100(byte ch, struct Eq_4 * ds)
{
	__syscall<byte>(0x10);
	byte Eq_134::* di_10 = &Eq_134::b0000;
	word16 cx_271 = SEQ(ch, 0x40);
	cui16 ax_376 = 0x00;
	do
	{
		byte al_18 = (byte) ax_376;
		__out<byte>(969, al_18);
		__out<byte>(969, 0x00);
		__out<byte>(969, 0x00);
		--cx_271;
		byte ch_272 = SLICE(cx_271, byte, 8);
		ax_376 = SEQ(SLICE(ax_376 + 0x01, byte, 8), al_18 + 0x01);
	} while (cx_271 != 0x00);
	word16 ax_35 = 0x00;
	word16 cx_273 = SEQ(ch_272, 0x40);
	do
	{
		__out<byte>(969, 0x3F);
		__out<byte>(969, (byte) ax_35);
		__out<byte>(969, 0x00);
		--cx_273;
		++ax_35;
		byte ch_274 = SLICE(cx_273, byte, 8);
	} while (cx_273 != 0x00);
	word16 ax_61 = 0x00;
	word16 cx_275 = SEQ(ch_274, 0x40);
	do
	{
		byte al_73 = 0x3F - (byte) ax_61;
		__out<byte>(969, al_73);
		__out<byte>(969, al_73);
		__out<byte>(969, (byte) ax_61);
		--cx_275;
		++ax_61;
		byte ch_280 = SLICE(cx_275, byte, 8);
	} while (cx_275 != 0x00);
	word16 cx_101 = SEQ(ch_280, 0x40);
	cui16 ax_379 = 0x00;
	do
	{
		byte al_89 = (byte) ax_379;
		__out<byte>(969, al_89);
		__out<byte>(969, 0x3F);
		__out<byte>(969, 0x3F);
		--cx_101;
		byte ah_279 = SLICE(ax_379 + 0x01, byte, 8);
		byte cl_309 = (byte) cx_101;
		ax_379 = SEQ(ah_279, al_89 + 0x01);
	} while (cx_101 != 0x00);
	word16 bp_103 = 0x00;
	word16 ax_113 = SEQ(ah_279, ~0x00);
	while (true)
	{
		word16 cx_204 = SEQ(0x02, cl_309);
		do
		{
			++bp_103;
			if (bp_103 == 0x00)
				ax_113 = ~ax_113;
			0xA190->*di_10 = (byte) ax_113;
			byte Eq_134::* di_123 = di_10 + 1;
			uint32 dx_ax_137 = (uint32) (di_123 - 0x01);
			uint16 dx_141 = (uint16) (dx_ax_137 % ds->w0181);
			uint16 ax_142 = (uint16) (dx_ax_137 /u ds->w0181);
			if (dx_141 == 0x00)
				ds->w01C4 = 0x01;
			if (dx_141 == 0x013F)
				ds->w01C4 = ~0x00;
			byte ah_182 = SLICE(ax_142, byte, 8);
			if (ax_142 == 0x00)
				ds->w01C6 = 0x0140;
			if (ax_142 == 0x9F)
				ds->w01C6 = ~0x013F;
			di_10 = di_123 - 0x01 + ds->w01C4 + ds->w01C6;
			if (SEQ(ah_182, __in<byte>(0x60)) == 0x01)
				return;
			--cx_204;
			byte cl_313 = (byte) cx_204;
		} while (cx_204 != 0x00);
		byte ah_234 = 0x00;
		word16 cx_227 = SEQ(~0x05, cl_313);
		do
		{
			struct Eq_217 Eq_134::* si_229 = cx_227 - 0x01;
			cu16 dx_241 = SEQ(ah_234, (0xA190->*si_229).b0000) + SEQ(ah_234, (0xA190->*si_229).b0002);
			(0xA190->*si_229).b0001 = (byte) (dx_241 >> 0x01);
			ah_234 = SLICE(dx_241 >> 0x01, byte, 8);
			--cx_227;
		} while (cx_227 != 0x00);
		cl_309 = (byte) cx_204;
	}
}

