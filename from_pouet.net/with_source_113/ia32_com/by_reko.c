// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register word16 cx, Register cu16 bx, Register (memptr (ptr16 Eq_29) byte) di)
void fn0C00_0100(word16 cx, cu16 bx, byte Eq_29::* di)
{
	__syscall<byte>(0x10);
	do
	{
		cu16 bx_11 = bx + 0x01;
		--cx;
		do
		{
			uint32 dx_ax_19 = (uint32) di;
			Eq_12 ax_22 = (uint16) (dx_ax_19 /u 0x0140);
			Eq_24 dx_21 = (uint16) (dx_ax_19 % 0x0140);
			bx = bx_11;
			Eq_12 ax_63 = ax_22;
			if (ax_22 *s ax_22 + (dx_21 + 0x7F) *s (dx_21 + 0x7F) >u 10000)
				ax_63 = dx_21 *s ax_22;
			ci8 al_76 = ((byte) ((word16) ax_63 + bx_11 >> 0x02) & 0x1F) - 0x10;
			if (al_76 < 0x00)
				al_76 = -al_76;
			0xA000->*di = al_76 + 0x20;
			++di;
			cx = cx_137 - 0x01;
			cx_137 = cx;
		} while (cx_137 != 0x01);
	} while (__in<byte>(0x60) != 0x01);
}

