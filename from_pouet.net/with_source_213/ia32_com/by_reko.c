// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register (ptr16 Eq_3) ds)
void fn0C00_0100(struct Eq_3 * ds)
{
	bios_video_set_mode(0x13);
	msdos_display_string(&ds->r01CF);
	__out<byte>(0x03C8, 0x00);
	byte Eq_41::* di_19 = Eq_41::a0000;
	do
	{
		bcu8 al_25 = (byte) di_19;
		__out<byte>(969, al_25 >> 0x02);
		__out<byte>(969, al_25 >> 0x03);
		__out<byte>(969, al_25 >> 0x02);
		ui8 al_35 = (0xA000->*di_19 << 0x03) + 0x40;
		0xA000->*di_19 = al_35;
		++di_19;
	} while (al_35 != 0x00);
	__wait();
	__fninit();
	do
	{
		do
			;
		while ((__in<byte>(0x03DA) & 0x08) == 0x00);
		byte Eq_41::* di_168 = &Eq_41::b3200;
		int16 bp_174 = ~0x3B;
		do
		{
			ds->w01DF = bp_277;
			int16 cx_171 = ~0x9F;
			do
			{
				real64 rLoc1_217 = (real64) ds->w01CB;
				real64 rLoc2_218 = (real64) ds->w01DF;
				ds->w01DB = cx_278;
				real64 rLoc3_219 = (real64) ds->w01DB;
				word16 cx_114 = 0x03;
				do
				{
					real64 rLoc4_223 = sin((real64) ds->r01CF);
					real64 rLoc4_224 = cos(rLoc4_223);
					real64 rLoc5_225 = sin(rLoc4_223);
					real64 rLoc3_239 = rLoc5_225 * rLoc2_218 + rLoc4_224 * rLoc3_219;
					real64 rLoc6_232 = rLoc3_219 * rLoc5_225 - rLoc2_218 * rLoc4_224;
					--cx_114;
					rLoc1_217 = rLoc3_239;
					rLoc3_219 = rLoc6_232;
					rLoc2_218 = rLoc1_279;
					byte cl_210 = (byte) cx_114;
					rLoc1_279 = rLoc1_217;
				} while (cx_114 != 0x00);
				ds->w01E7 = (int16) rLoc6_232;
				ds->w01EB = (int16) rLoc1_279;
				ds->w01EF = (int16) rLoc3_239;
				cui16 bx_123 = ds->w01D3;
				cui16 bp_124 = 0x0200;
				cui16 dx_125 = bx_123;
				word16 cx_144 = SEQ(0x01, cl_210);
				do
				{
					bp_124 += ds->w01EB;
					dx_125 += ds->w01EF;
					bx_123 += ds->w01E7;
					byte cl_146 = (byte) cx_144;
					if ((SLICE(dx_125 & bp_124 & bx_123, byte, 8) & ~0x07) != 0x00)
						break;
					--cx_144;
					cl_146 = (byte) cx_144;
				} while (cx_144 != 0x00);
				0xA000->*di_168 = cl_146;
				++di_168;
				cx_171 = cx_278 + 0x01;
				cx_278 = cx_171;
			} while (cx_278 != 0x9F);
			bp_174 = bp_277 + 0x01;
			bp_277 = bp_174;
		} while (bp_277 != 0x3B);
		ds->w01D3 += bp_277 + 0x01;
		ds->r01CF = (real32) ((real64) ds->r01CF + (real64) ds->w01CD);
		byte al_190;
		byte ah_191;
	} while (bios_kbd_check_keystroke(out al_190, out ah_191));
}

