// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Sequence (ptr32 Eq_14) ds_bx, Register word16 eax_16_16, Register byte cl, Stack cu16 wArg00)
void fn0C00_0100(union Eq_14 * ds_bx, word16 eax_16_16, byte cl, cu16 wArg00)
{
	struct Eq_7 Eq_18::* bx = (word16) ds_bx;
	__syscall<byte>(0x10);
	Eq_14 ds_ax_8 = ds_bx->u1;
	struct Eq_18 * ds_80 = SLICE(ds_ax_8, selector, 16);
	word32 eax_11 = SEQ(eax_16_16, (word16) ds_ax_8);
	word16 cx_121 = SEQ(0x03, cl);
	do
	{
		word32 eax_124 = __ror<word32,byte>(eax_11, 0x08);
		byte cl_22 = (byte) cx_126;
		byte ah_18 = SLICE(eax_124, byte, 8);
		word16 eax_16_16_66 = SLICE(eax_124, word16, 16);
		if ((byte) eax_124 >= 0x3F)
			eax_124 = SEQ(eax_16_16_66, ah_18 + 0x01, 0x3F);
		byte al_29 = (byte) eax_124;
		if ((cl_22 & 0x03) != 0x00)
			__out<byte>(969, al_29);
		byte ch_74 = SLICE(cx_126 - 0x01, byte, 8);
		eax_11 = eax_124;
		cx_121 = SEQ(ch_74, cl_22 - 0x01);
		cx_126 = cx_121;
	} while (cx_126 != 0x01);
	do
	{
		byte al_35 = __in<byte>(0x40);
		do
		{
			(ds_80->*bx).b0000 = al_35;
			++bx;
			cu16 dx_49 = (word16) (ds_80->*bx).b0000 + SEQ(ch_74, bx[640]);
			char bh_55 = SLICE(bx, byte, 8);
			wArg00 = dx_49;
			al_35 = (byte) (wArg00 - 0x01 + dx_49 >> 0x02);
		} while (bh_55 < ~0x02);
		__in<byte>(0x60);
	} while (bh_55 >= ~0x02);
}

