/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void glTranslated(GLdouble x, GLdouble y, GLdouble z);
// void glEnd(void);
// void srand(unsigned int seed);
// void glEnable(GLenum cap);
// void glHint(GLenum target, GLenum mode);
// void glColor3fv(const GLfloat *v);
// void glMatrixMode(GLenum mode);
// void glClear(GLbitfield mask);
// int __cdecl SDL_ShowCursor(_DWORD); weak
// int __cdecl SDL_PollEvent(_DWORD); weak
// int SDL_GL_SwapBuffers(void); weak
// void glLoadIdentity(void);
// void glClearColor(GLclampf red, GLclampf green, GLclampf blue, GLclampf alpha);
// int __cdecl SDL_SetVideoMode(_DWORD, _DWORD, _DWORD, _DWORD); weak
// void glShadeModel(GLenum mode);
// void glFrustum(GLdouble left, GLdouble right, GLdouble bottom, GLdouble top, GLdouble near_val, GLdouble far_val);
// void glTranslatef(GLfloat x, GLfloat y, GLfloat z);
// void *malloc(size_t size);
// void glRotatef(GLfloat angle, GLfloat x, GLfloat y, GLfloat z);
// void glDepthFunc(GLenum func);
// void glClearDepth(GLclampd depth);
// void glBegin(GLenum mode);
// void glVertex3f(GLfloat x, GLfloat y, GLfloat z);
// void glPushMatrix(void);
// void glFlush(void);
// int __cdecl SDL_Delay(_DWORD); weak
// int SDL_Quit(void); weak
// int rand(void);
// void glPopMatrix(void);
// void glViewport(GLint x, GLint y, GLsizei width, GLsizei height);
int __cdecl sub_8048903(__int64, int);
int __cdecl sub_80489C3(int, char, unsigned int, unsigned int, int);
int __cdecl sub_8048AA8(int);
int __cdecl sub_8048B68(int, int, int, int, int);
int __cdecl sub_8048BE1(int, int);
int __cdecl sub_8048C24(int, int);
float *__cdecl sub_8048C67(float *, int, int);
float *__cdecl sub_8048EB5(float *, int, int);
float *__cdecl sub_80490D5(float *, int, int);
float *__cdecl sub_80492D1(float *, int, int);
int __cdecl sub_8049330(char, int, int);
_DWORD *__cdecl sub_8049363(int, int);
_DWORD *sub_804937F();
int sub_8049394();
void __cdecl sub_8049444(int);
void __cdecl sub_804993D(GLfloat *);
int start();


//----- (08048903) --------------------------------------------------------
int __cdecl sub_8048903(__int64 a1, int a2)
{
  int result; // eax
  _DWORD *v3; // ecx
  int v4; // ecx
  _DWORD *v5; // ecx

  result = a1;
  switch ( a2 )
  {
    case 1:
      v3 = (_DWORD *)(a1 + 12 * HIDWORD(a1));
      v3[2] = 1065353216;
      goto LABEL_7;
    case 2:
      v4 = a1 + 12 * HIDWORD(a1);
      *(_QWORD *)(v4 + 8) = 0LL;
      *(_DWORD *)(v4 + 16) = 1065353216;
      return result;
    case 3:
      v3 = (_DWORD *)(a1 + 12 * HIDWORD(a1));
      *((_QWORD *)v3 + 1) = 1065353216LL;
      goto LABEL_8;
    case 4:
      v3 = (_DWORD *)(a1 + 12 * HIDWORD(a1));
      v3[2] = 1065353216;
      v3[3] = 1056964608;
      goto LABEL_8;
    case 5:
      v3 = (_DWORD *)(a1 + 12 * HIDWORD(a1));
      v3[2] = 0;
LABEL_7:
      *(_DWORD *)(a1 + 12 * HIDWORD(a1) + 12) = 1065353216;
LABEL_8:
      v3[4] = 0;
      break;
    case 6:
      v5 = (_DWORD *)(a1 + 12 * HIDWORD(a1));
      v5[2] = 1065353216;
      v5[3] = 1065353216;
      v5[4] = 1065353216;
      break;
    default:
      return result;
  }
  return result;
}

//----- (080489C3) --------------------------------------------------------
int __cdecl sub_80489C3(int a1, char a2, unsigned int a3, unsigned int a4, int a5)
{
  unsigned int v5; // edx
  unsigned int v6; // ecx
  int v7; // esi
  unsigned int v8; // eax
  int v9; // esi
  __int64 v11; // [esp-Ch] [ebp-14h]

  v5 = a3;
  v6 = a4;
  switch ( a2 )
  {
    case 'B':
      v6 = abs32(a4 - 2);
      v5 = 0;
      v8 = abs32(a3 - 2);
      v7 = 3;
      break;
    case 'D':
      v8 = 0;
      v5 = abs32(a3 - 2);
      v7 = 4;
      break;
    case 'F':
      v5 = 2;
      v8 = abs32(a3 - 2);
      v7 = 2;
      break;
    case 'L':
      v5 = a4;
      v8 = abs32(a3 - 2);
      v7 = 5;
      goto LABEL_8;
    case 'R':
      v8 = abs32(a3 - 2);
      v6 = 2;
      v5 = abs32(a4 - 2);
      v7 = 0;
      break;
    case 'T':
      v7 = 1;
      v8 = 2;
      break;
    default:
      v7 = 0;
      v5 = 0;
      v8 = 0;
LABEL_8:
      v6 = 0;
      break;
  }
  HIDWORD(v11) = v7;
  v9 = v5 + 9 * v6 + 3 * v8 + 12;
  LODWORD(v11) = *(_DWORD *)(a1 + 4 * v9 + 4);
  *(_DWORD *)(a1 + 4 * v9 + 4) = sub_8048903(v11, a5);
  return a1;
}

//----- (08048AA8) --------------------------------------------------------
int __cdecl sub_8048AA8(int a1)
{
  int v1; // ecx
  int result; // eax
  int v3; // ebp
  int j; // edx
  int v5; // esi
  int *v6; // edi
  int i; // ebx
  int v8; // ebx
  char v9; // dl
  unsigned int v10; // esi
  char v11; // bp
  unsigned int k; // edi
  unsigned int v13; // [esp-8h] [ebp-1Ch]

  v1 = 0;
  result = a1;
  do
  {
    for ( i = 0; i != 3; ++i )
    {
      v5 = 0;
      v6 = (int *)(a1 + 12 * i + 36 * v1 + 48 + 4);
      do
      {
        v3 = *v6;
        for ( j = 0; j != 72; j += 12 )
        {
          *(_DWORD *)(v3 + j + 16) = 1048576000;
          *(_DWORD *)(v3 + j + 12) = 1048576000;
          *(_DWORD *)(v3 + j + 8) = 1048576000;
        }
        ++v5;
        ++v6;
      }
      while ( v5 != 3 );
    }
    ++v1;
  }
  while ( v1 != 3 );
  v8 = 1;
  v9 = 84;
  while ( 1 )
  {
    v10 = 0;
    v11 = v9;
    do
    {
      for ( k = 0; k != 3; ++k )
      {
        v13 = k;
        result = sub_80489C3(result, v11, v10, v13, v8);
      }
      ++v10;
    }
    while ( v10 != 3 );
    if ( ++v8 == 7 )
      return result;
    v9 = 84;
    switch ( v8 )
    {
      case 2:
        v9 = 70;
        break;
      case 3:
        v9 = 82;
        break;
      case 4:
        v9 = 76;
        break;
      case 5:
        v9 = 66;
        break;
      case 6:
        v9 = 68;
        break;
      default:
        continue;
    }
  }
}

//----- (08048B68) --------------------------------------------------------
int __cdecl sub_8048B68(int a1, int a2, int a3, int a4, int a5)
{
  int result; // eax
  int *v6; // ecx
  int v7; // ebp
  int v8; // edi
  int *v9; // edx
  int *v10; // ecx
  int *v11; // ebx
  int v12; // [esp+0h] [ebp-14h]

  result = a1;
  v6 = (int *)(a1 + 8 + 12 * a2);
  v7 = *v6;
  v8 = v6[1];
  v12 = v6[2];
  v9 = (int *)(a1 + 8 + 12 * a3);
  *v6 = *v9;
  v6[1] = v9[1];
  v6[2] = v9[2];
  v10 = (int *)(a1 + 8 + 12 * a4);
  *v9 = *v10;
  v9[1] = v10[1];
  v9[2] = v10[2];
  v11 = (int *)(12 * a5 + a1 + 8);
  *v10 = *v11;
  v10[1] = v11[1];
  v10[2] = v11[2];
  *v11 = v7;
  v11[1] = v8;
  v11[2] = v12;
  return result;
}

//----- (08048BE1) --------------------------------------------------------
int __cdecl sub_8048BE1(int a1, int a2)
{
  int result; // eax

  result = a1;
  switch ( a2 )
  {
    case 2:
      return sub_8048B68(a1, 3, 5, 2, 0);
    case 3:
      return sub_8048B68(a1, 1, 5, 4, 0);
    case 1:
      return sub_8048B68(a1, 1, 2, 4, 3);
  }
  return result;
}

//----- (08048C24) --------------------------------------------------------
int __cdecl sub_8048C24(int a1, int a2)
{
  int result; // eax

  result = a1;
  switch ( a2 )
  {
    case 2:
      return sub_8048B68(a1, 0, 2, 5, 3);
    case 3:
      return sub_8048B68(a1, 0, 4, 5, 1);
    case 1:
      return sub_8048B68(a1, 3, 4, 2, 1);
  }
  return result;
}

//----- (08048C67) --------------------------------------------------------
float *__cdecl sub_8048C67(float *a1, int a2, int a3)
{
  int v3; // ecx
  long double v4; // fst7
  float v5; // edi
  float v6; // edi
  int *v7; // esi
  int v8; // edi
  float v9; // edi
  float v10; // esi
  float v11; // edi
  int *v12; // esi
  int v13; // edi
  long double v14; // fst6
  long double v15; // fst7
  long double v16; // fst4
  long double v17; // fst5
  long double v18; // fst7
  bool v19; // c3
  long double v20; // fst7
  long double v21; // fst7

  v3 = a2 + 8;
  v4 = (long double)a3 + a1[a2 + 10];
  a1[a2 + 10] = v4;
  if ( a3 >= 0 )
  {
    if ( a3 && v4 == 90.0 )
    {
      v9 = a1[a2 + 37];
      a1[v3 + 2] = 0.0;
      v10 = a1[a2 + 19];
      a1[a2 + 19] = v9;
      a1[a2 + 37] = a1[a2 + 31];
      a1[a2 + 31] = a1[a2 + 13];
      a1[a2 + 13] = v10;
      v11 = a1[a2 + 16];
      a1[a2 + 16] = a1[a2 + 28];
      a1[a2 + 28] = a1[a2 + 34];
      a1[a2 + 34] = a1[a2 + 22];
      v12 = (int *)&a1[a2 + 13];
      a1[a2 + 22] = v11;
      v13 = 0;
      do
      {
        ++v13;
        *v12 = sub_8048C24(*v12, 3);
        v12[3] = sub_8048C24(v12[3], 3);
        v12[6] = sub_8048C24(v12[6], 3);
        v12 += 9;
      }
      while ( v13 != 3 );
    }
  }
  else if ( v4 == -90.0 )
  {
    a1[v3 + 2] = 0.0;
    v5 = a1[a2 + 13];
    a1[a2 + 13] = a1[a2 + 31];
    a1[a2 + 31] = a1[a2 + 37];
    a1[a2 + 37] = a1[a2 + 19];
    a1[a2 + 19] = v5;
    v6 = a1[a2 + 22];
    a1[a2 + 22] = a1[a2 + 34];
    a1[a2 + 34] = a1[a2 + 28];
    a1[a2 + 28] = a1[a2 + 16];
    v7 = (int *)&a1[a2 + 13];
    a1[a2 + 16] = v6;
    v8 = 0;
    do
    {
      ++v8;
      *v7 = sub_8048BE1(*v7, 3);
      v7[3] = sub_8048BE1(v7[3], 3);
      v7[6] = sub_8048BE1(v7[6], 3);
      v7 += 9;
    }
    while ( v8 != 3 );
  }
  v14 = a1[10];
  v15 = a1[11];
  if ( v14 != v15 )
  {
    v16 = a1[10];
    v14 = v16;
    if ( v16 != v15 - 90.0 && v16 != v15 + 90.0 )
      return a1;
  }
  v17 = a1[11];
  v18 = a1[12];
  if ( v17 == v18 )
  {
    v20 = v14;
LABEL_19:
    v21 = v20 + a1[3];
    a1[12] = 0.0;
    a1[11] = 0.0;
    a1[10] = 0.0;
    a1[3] = v21;
    return a1;
  }
  if ( v17 == v18 - 90.0 )
  {
    v20 = v14;
    goto LABEL_19;
  }
  v19 = v17 == v18 + 90.0;
  v20 = v14;
  if ( v19 )
    goto LABEL_19;
  return a1;
}

//----- (08048EB5) --------------------------------------------------------
float *__cdecl sub_8048EB5(float *a1, int a2, int a3)
{
  int v3; // edx
  long double v4; // fst7
  int v5; // edi
  float *v6; // eax
  int v7; // edx
  int v8; // esi
  int v9; // edx
  int v10; // esi
  int *v11; // esi
  int v12; // edi
  float *v13; // eax
  int v14; // edx
  int v15; // esi
  int v16; // edx
  int v17; // esi
  int *v18; // esi
  long double v19; // fst6
  long double v20; // fst7
  long double v21; // fst4
  long double v22; // fst5
  long double v23; // fst7
  bool v24; // c3
  long double v25; // fst7
  long double v26; // fst7

  v3 = a2 + 4;
  v4 = (long double)a3 + a1[a2 + 7];
  a1[a2 + 7] = v4;
  if ( a3 >= 0 )
  {
    if ( a3 && v4 == 90.0 )
    {
      v12 = 0;
      a1[v3 + 3] = 0.0;
      v13 = &a1[3 * a2];
      v14 = *((_DWORD *)v13 + 13);
      v13[13] = v13[31];
      v13[31] = v13[33];
      v15 = *((_DWORD *)v13 + 15);
      *((_DWORD *)v13 + 15) = v14;
      v16 = *((_DWORD *)v13 + 22);
      *((_DWORD *)v13 + 33) = v15;
      v13[22] = v13[32];
      v13[32] = v13[24];
      v17 = *((_DWORD *)v13 + 14);
      *((_DWORD *)v13 + 14) = v16;
      *((_DWORD *)v13 + 24) = v17;
      v18 = (int *)(v13 + 13);
      do
      {
        ++v12;
        *v18 = sub_8048C24(*v18, 2);
        v18[1] = sub_8048C24(v18[1], 2);
        v18[2] = sub_8048C24(v18[2], 2);
        v18 += 9;
      }
      while ( v12 != 3 );
    }
  }
  else if ( v4 == -90.0 )
  {
    v5 = 0;
    a1[v3 + 3] = 0.0;
    v6 = &a1[3 * a2];
    v7 = *((_DWORD *)v6 + 15);
    v6[15] = v6[33];
    v6[33] = v6[31];
    v8 = *((_DWORD *)v6 + 13);
    *((_DWORD *)v6 + 13) = v7;
    v9 = *((_DWORD *)v6 + 14);
    *((_DWORD *)v6 + 31) = v8;
    v6[14] = v6[24];
    v6[24] = v6[32];
    v10 = *((_DWORD *)v6 + 22);
    *((_DWORD *)v6 + 22) = v9;
    *((_DWORD *)v6 + 32) = v10;
    v11 = (int *)(v6 + 13);
    do
    {
      ++v5;
      *v11 = sub_8048BE1(*v11, 2);
      v11[1] = sub_8048BE1(v11[1], 2);
      v11[2] = sub_8048BE1(v11[2], 2);
      v11 += 9;
    }
    while ( v5 != 3 );
  }
  v19 = a1[7];
  v20 = a1[8];
  if ( v19 != v20 )
  {
    v21 = a1[7];
    v19 = v21;
    if ( v21 != v20 - 90.0 && v21 != v20 + 90.0 )
      return a1;
  }
  v22 = a1[8];
  v23 = a1[9];
  if ( v22 == v23 )
  {
    v25 = v19;
LABEL_19:
    v26 = v25 + a1[2];
    a1[9] = 0.0;
    a1[8] = 0.0;
    a1[7] = 0.0;
    a1[2] = v26;
    return a1;
  }
  if ( v22 == v23 - 90.0 )
  {
    v25 = v19;
    goto LABEL_19;
  }
  v24 = v22 == v23 + 90.0;
  v25 = v19;
  if ( v24 )
    goto LABEL_19;
  return a1;
}

//----- (080490D5) --------------------------------------------------------
float *__cdecl sub_80490D5(float *a1, int a2, int a3)
{
  int v3; // edx
  long double v4; // fst7
  int v5; // edi
  float *v6; // eax
  int v7; // edx
  int v8; // esi
  int v9; // edx
  int v10; // esi
  int *v11; // esi
  int v12; // edi
  float *v13; // eax
  int v14; // edx
  int v15; // esi
  int v16; // edx
  int v17; // esi
  int *v18; // esi
  long double v19; // fst6
  long double v20; // fst7
  long double v21; // fst4
  long double v22; // fst5
  long double v23; // fst7
  bool v24; // c3
  long double v25; // fst7
  long double v26; // fst7

  v3 = a2 + 4;
  v4 = (long double)a3 + a1[a2 + 4];
  a1[a2 + 4] = v4;
  if ( a3 >= 0 )
  {
    if ( a3 && v4 == 90.0 )
    {
      v12 = 0;
      a1[v3] = 0.0;
      v13 = &a1[9 * a2];
      v14 = *((_DWORD *)v13 + 15);
      v13[15] = v13[21];
      v13[21] = v13[19];
      v15 = *((_DWORD *)v13 + 13);
      *((_DWORD *)v13 + 13) = v14;
      v16 = *((_DWORD *)v13 + 14);
      *((_DWORD *)v13 + 19) = v15;
      v13[14] = v13[18];
      v13[18] = v13[20];
      v17 = *((_DWORD *)v13 + 16);
      *((_DWORD *)v13 + 16) = v16;
      *((_DWORD *)v13 + 20) = v17;
      v18 = (int *)(v13 + 13);
      do
      {
        ++v12;
        *v18 = sub_8048C24(*v18, 1);
        v18[1] = sub_8048C24(v18[1], 1);
        v18[2] = sub_8048C24(v18[2], 1);
        v18 += 3;
      }
      while ( v12 != 3 );
    }
  }
  else if ( v4 == -90.0 )
  {
    v5 = 0;
    a1[v3] = 0.0;
    v6 = &a1[9 * a2];
    v7 = *((_DWORD *)v6 + 13);
    v6[13] = v6[19];
    v6[19] = v6[21];
    v8 = *((_DWORD *)v6 + 15);
    *((_DWORD *)v6 + 15) = v7;
    v9 = *((_DWORD *)v6 + 16);
    *((_DWORD *)v6 + 21) = v8;
    v6[16] = v6[20];
    v6[20] = v6[18];
    v10 = *((_DWORD *)v6 + 14);
    *((_DWORD *)v6 + 14) = v9;
    *((_DWORD *)v6 + 18) = v10;
    v11 = (int *)(v6 + 13);
    do
    {
      ++v5;
      *v11 = sub_8048BE1(*v11, 1);
      v11[1] = sub_8048BE1(v11[1], 1);
      v11[2] = sub_8048BE1(v11[2], 1);
      v11 += 3;
    }
    while ( v5 != 3 );
  }
  v19 = a1[4];
  v20 = a1[5];
  if ( v19 != v20 )
  {
    v21 = a1[4];
    v19 = v21;
    if ( v21 != v20 - 90.0 && v21 != v20 + 90.0 )
      return a1;
  }
  v22 = a1[5];
  v23 = a1[6];
  if ( v22 == v23 )
  {
    v25 = v19;
LABEL_19:
    v26 = v25 + a1[1];
    a1[6] = 0.0;
    a1[5] = 0.0;
    a1[4] = 0.0;
    a1[1] = v26;
    return a1;
  }
  if ( v22 == v23 - 90.0 )
  {
    v25 = v19;
    goto LABEL_19;
  }
  v24 = v22 == v23 + 90.0;
  v25 = v19;
  if ( v24 )
    goto LABEL_19;
  return a1;
}

//----- (080492D1) --------------------------------------------------------
float *__cdecl sub_80492D1(float *a1, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a2 + 4);
  switch ( v3 )
  {
    case 2:
      sub_8048EB5(a1, *(_DWORD *)(a2 + 8), a3);
      break;
    case 3:
      sub_8048C67(a1, *(_DWORD *)(a2 + 8), a3);
      break;
    case 1:
      sub_80490D5(a1, *(_DWORD *)(a2 + 8), a3);
      break;
  }
  return a1;
}

//----- (08049330) --------------------------------------------------------
int __cdecl sub_8049330(char a1, int a2, int a3)
{
  int result; // eax

  while ( 1 )
  {
    result = SDL_PollEvent(&a1);
    if ( !result )
      break;
    if ( a1 == 2 && a3 == 27 )
      return 1;
  }
  return result;
}
// 804878C: using guessed type int __cdecl SDL_PollEvent(_DWORD);

//----- (08049363) --------------------------------------------------------
_DWORD *__cdecl sub_8049363(int a1, int a2)
{
  _DWORD *result; // eax

  result = malloc(0xCu);
  result[1] = a1;
  result[2] = a2;
  return result;
}

//----- (0804937F) --------------------------------------------------------
_DWORD *sub_804937F()
{
  _DWORD *result; // eax

  result = malloc(0x50u);
  result[1] = 1061997773;
  return result;
}

//----- (08049394) --------------------------------------------------------
int sub_8049394()
{
  int v0; // edi
  _DWORD *v1; // ebx
  int v2; // ebp
  _DWORD *v3; // esi

  v0 = 0;
  v1 = malloc(0xA0u);
  v1[1] = 0;
  v1[2] = 0;
  v1[3] = 0;
  v1[4] = 0;
  v1[7] = 0;
  v1[10] = 0;
  v1[5] = 0;
  v1[8] = 0;
  v1[11] = 0;
  v1[6] = 0;
  v1[9] = 0;
  v1[12] = 0;
  do
  {
    v2 = 0;
    v3 = &v1[9 * v0 + 13];
    do
    {
      ++v2;
      *v3 = sub_804937F();
      v3[1] = sub_804937F();
      v3[2] = sub_804937F();
      v3 += 3;
    }
    while ( v2 != 3 );
    ++v0;
  }
  while ( v0 != 3 );
  return sub_8048AA8((int)v1);
}

//----- (08049444) --------------------------------------------------------
void __cdecl sub_8049444(int a1)
{
  long double v1; // fst7
  long double v2; // fst7
  long double v3; // fst7
  long double v4; // fst7
  long double v5; // fst7
  long double v6; // fst7
  long double v7; // fst7
  long double v8; // fst7
  long double v9; // fst7
  long double v10; // fst7
  long double v11; // fst7
  long double v12; // fst7
  long double v13; // fst7
  long double v14; // fst7
  long double v15; // fst7
  GLfloat v; // [esp+0h] [ebp-2Ch]
  GLfloat va; // [esp+0h] [ebp-2Ch]
  GLfloat vb; // [esp+0h] [ebp-2Ch]
  GLfloat vc; // [esp+0h] [ebp-2Ch]
  GLfloat vd; // [esp+0h] [ebp-2Ch]
  GLfloat ve; // [esp+0h] [ebp-2Ch]
  GLfloat vf; // [esp+0h] [ebp-2Ch]
  GLfloat vg; // [esp+0h] [ebp-2Ch]
  GLfloat vh; // [esp+0h] [ebp-2Ch]
  GLfloat vi; // [esp+0h] [ebp-2Ch]
  GLfloat vj; // [esp+0h] [ebp-2Ch]
  GLfloat vk; // [esp+0h] [ebp-2Ch]
  GLfloat y; // [esp+4h] [ebp-28h]
  float ya; // [esp+4h] [ebp-28h]
  float yb; // [esp+4h] [ebp-28h]
  GLfloat yc; // [esp+4h] [ebp-28h]
  float yd; // [esp+4h] [ebp-28h]
  GLfloat ye; // [esp+4h] [ebp-28h]
  GLfloat yf; // [esp+4h] [ebp-28h]
  float yg; // [esp+4h] [ebp-28h]
  GLfloat yh; // [esp+4h] [ebp-28h]
  float yi; // [esp+4h] [ebp-28h]
  float yj; // [esp+4h] [ebp-28h]
  GLfloat yk; // [esp+4h] [ebp-28h]
  float z; // [esp+8h] [ebp-24h]
  float za; // [esp+8h] [ebp-24h]
  float zb; // [esp+8h] [ebp-24h]
  float zc; // [esp+8h] [ebp-24h]
  float zd; // [esp+8h] [ebp-24h]
  float ze; // [esp+8h] [ebp-24h]
  float zf; // [esp+8h] [ebp-24h]
  float zg; // [esp+8h] [ebp-24h]
  float zh; // [esp+8h] [ebp-24h]
  float zi; // [esp+8h] [ebp-24h]
  float zj; // [esp+8h] [ebp-24h]
  float zk; // [esp+8h] [ebp-24h]
  GLfloat v52; // [esp+1Ch] [ebp-10h]
  float v53; // [esp+1Ch] [ebp-10h]
  GLfloat v54; // [esp+1Ch] [ebp-10h]
  float v55; // [esp+1Ch] [ebp-10h]
  GLfloat v56; // [esp+1Ch] [ebp-10h]
  float v57; // [esp+1Ch] [ebp-10h]
  GLfloat v58; // [esp+1Ch] [ebp-10h]
  float v59; // [esp+1Ch] [ebp-10h]
  GLfloat v60; // [esp+1Ch] [ebp-10h]
  float v61; // [esp+1Ch] [ebp-10h]
  GLfloat v62; // [esp+1Ch] [ebp-10h]
  GLfloat v63; // [esp+1Ch] [ebp-10h]
  float v64; // [esp+1Ch] [ebp-10h]
  GLfloat v65; // [esp+1Ch] [ebp-10h]
  GLfloat v66; // [esp+1Ch] [ebp-10h]
  float v67; // [esp+1Ch] [ebp-10h]
  GLfloat v68; // [esp+1Ch] [ebp-10h]
  float v69; // [esp+1Ch] [ebp-10h]
  GLfloat v70; // [esp+1Ch] [ebp-10h]
  float v71; // [esp+1Ch] [ebp-10h]
  GLfloat v72; // [esp+1Ch] [ebp-10h]
  float v73; // [esp+1Ch] [ebp-10h]
  GLfloat v74; // [esp+1Ch] [ebp-10h]
  float v75; // [esp+1Ch] [ebp-10h]
  GLfloat v76; // [esp+1Ch] [ebp-10h]
  GLfloat v77; // [esp+1Ch] [ebp-10h]
  float v78; // [esp+1Ch] [ebp-10h]
  GLfloat v79; // [esp+1Ch] [ebp-10h]
  GLfloat v80; // [esp+1Ch] [ebp-10h]
  float v81; // [esp+1Ch] [ebp-10h]
  GLfloat v82; // [esp+1Ch] [ebp-10h]
  float v83; // [esp+1Ch] [ebp-10h]
  GLfloat v84; // [esp+1Ch] [ebp-10h]
  float v85; // [esp+1Ch] [ebp-10h]
  GLfloat v86; // [esp+1Ch] [ebp-10h]
  float v87; // [esp+1Ch] [ebp-10h]
  GLfloat v88; // [esp+1Ch] [ebp-10h]
  float v89; // [esp+1Ch] [ebp-10h]
  GLfloat v90; // [esp+1Ch] [ebp-10h]
  GLfloat v91; // [esp+1Ch] [ebp-10h]
  float v92; // [esp+1Ch] [ebp-10h]
  GLfloat v93; // [esp+1Ch] [ebp-10h]

  glPushMatrix();
  glBegin(7u);
  glColor3fv((const GLfloat *)(a1 + 8));
  v52 = *(float *)(a1 + 4) / 1.8;
  glVertex3f(v52, v52, v52);
  v53 = *(float *)(a1 + 4) / 1.8;
  v1 = v53;
  v54 = -*(float *)(a1 + 4) / 1.8;
  y = v1;
  v = v1;
  glVertex3f(v, y, v54);
  v55 = -*(float *)(a1 + 4) / 1.8;
  z = v55;
  ya = v55;
  v56 = *(float *)(a1 + 4) / 1.8;
  glVertex3f(v56, ya, z);
  v57 = *(float *)(a1 + 4) / 1.8;
  za = v57;
  v2 = v57;
  v58 = -*(float *)(a1 + 4) / 1.8;
  va = v2;
  glVertex3f(va, v58, za);
  glColor3fv((const GLfloat *)(a1 + 20));
  v59 = -*(float *)(a1 + 4) / 1.8;
  zb = v59;
  v3 = v59;
  v60 = *(float *)(a1 + 4) / 1.8;
  vb = v3;
  glVertex3f(vb, v60, zb);
  v4 = *(float *)(a1 + 4);
  v61 = v4 / 1.8;
  zc = v61;
  yb = v61;
  v62 = -v4 / 1.8;
  glVertex3f(v62, yb, zc);
  v63 = *(float *)(a1 + 4) / 1.8;
  glVertex3f(v63, v63, v63);
  v64 = *(float *)(a1 + 4) / 1.8;
  v5 = v64;
  v65 = -*(float *)(a1 + 4) / 1.8;
  yc = v5;
  vc = v5;
  glVertex3f(vc, yc, v65);
  glColor3fv((const GLfloat *)(a1 + 32));
  v66 = *(float *)(a1 + 4) / 1.8;
  glVertex3f(v66, v66, v66);
  v6 = *(float *)(a1 + 4);
  v67 = v6 / 1.8;
  zd = v67;
  yd = v67;
  v68 = -v6 / 1.8;
  glVertex3f(v68, yd, zd);
  v69 = -*(float *)(a1 + 4) / 1.8;
  v7 = v69;
  v70 = *(float *)(a1 + 4) / 1.8;
  ye = v7;
  vd = v7;
  glVertex3f(vd, ye, v70);
  v71 = *(float *)(a1 + 4) / 1.8;
  ze = v71;
  v8 = v71;
  v72 = -*(float *)(a1 + 4) / 1.8;
  ve = v8;
  glVertex3f(ve, v72, ze);
  glColor3fv((const GLfloat *)(a1 + 44));
  v73 = *(float *)(a1 + 4) / 1.8;
  v9 = v73;
  v74 = -*(float *)(a1 + 4) / 1.8;
  yf = v9;
  vf = v9;
  glVertex3f(vf, yf, v74);
  v75 = -*(float *)(a1 + 4) / 1.8;
  zf = v75;
  v10 = v75;
  v76 = *(float *)(a1 + 4) / 1.8;
  vg = v10;
  glVertex3f(vg, v76, zf);
  v77 = -*(float *)(a1 + 4) / 1.8;
  glVertex3f(v77, v77, v77);
  v78 = -*(float *)(a1 + 4) / 1.8;
  zg = v78;
  yg = v78;
  v79 = *(float *)(a1 + 4) / 1.8;
  glVertex3f(v79, yg, zg);
  glColor3fv((const GLfloat *)(a1 + 56));
  v80 = -*(float *)(a1 + 4) / 1.8;
  glVertex3f(v80, v80, v80);
  v81 = -*(float *)(a1 + 4) / 1.8;
  v11 = v81;
  v82 = *(float *)(a1 + 4) / 1.8;
  yh = v11;
  vh = v11;
  glVertex3f(vh, yh, v82);
  v83 = *(float *)(a1 + 4) / 1.8;
  zh = v83;
  v12 = v83;
  v84 = -*(float *)(a1 + 4) / 1.8;
  vi = v12;
  glVertex3f(vi, v84, zh);
  v85 = -*(float *)(a1 + 4) / 1.8;
  zi = v85;
  yi = v85;
  v86 = *(float *)(a1 + 4) / 1.8;
  glVertex3f(v86, yi, zi);
  glColor3fv((const GLfloat *)(a1 + 68));
  v13 = *(float *)(a1 + 4);
  v87 = v13 / 1.8;
  zj = v87;
  yj = v87;
  v88 = -v13 / 1.8;
  glVertex3f(v88, yj, zj);
  v89 = -*(float *)(a1 + 4) / 1.8;
  zk = v89;
  v14 = v89;
  v90 = *(float *)(a1 + 4) / 1.8;
  vj = v14;
  glVertex3f(vj, v90, zk);
  v91 = -*(float *)(a1 + 4) / 1.8;
  glVertex3f(v91, v91, v91);
  v92 = -*(float *)(a1 + 4) / 1.8;
  v15 = v92;
  v93 = *(float *)(a1 + 4) / 1.8;
  yk = v15;
  vk = v15;
  glVertex3f(vk, yk, v93);
  glEnd();
  glPopMatrix();
}

//----- (0804993D) --------------------------------------------------------
void __cdecl sub_804993D(GLfloat *a1)
{
  int v1; // edi
  int v2; // ebp
  int v3; // esi
  long double v4; // fst7
  long double v5; // fst6
  long double v6; // fst5
  long double v7; // fst7
  long double v8; // fst7
  long double v9; // fst7
  GLfloat angle; // [esp+0h] [ebp-7Ch]
  GLfloat anglea; // [esp+0h] [ebp-7Ch]
  GLfloat x; // [esp+10h] [ebp-6Ch]
  GLfloat xa; // [esp+10h] [ebp-6Ch]
  GLfloat xb; // [esp+10h] [ebp-6Ch]
  GLfloat xc; // [esp+10h] [ebp-6Ch]
  GLfloat xd; // [esp+10h] [ebp-6Ch]
  GLfloat xe; // [esp+10h] [ebp-6Ch]
  GLfloat y; // [esp+14h] [ebp-68h]
  GLfloat ya; // [esp+14h] [ebp-68h]
  GLfloat z; // [esp+18h] [ebp-64h]
  GLfloat za; // [esp+18h] [ebp-64h]
  float v22; // [esp+20h] [ebp-5Ch]
  float v23; // [esp+30h] [ebp-4Ch]
  float v24; // [esp+40h] [ebp-3Ch]
  GLfloat *v25; // [esp+54h] [ebp-28h]
  GLfloat *v26; // [esp+58h] [ebp-24h]

  v1 = 0;
  glRotatef(a1[1], 1.0, 0.0, 0.0);
  glRotatef(a1[2], 0.0, 1.0, 0.0);
  glRotatef(a1[3], 0.0, 0.0, 1.0);
  v25 = a1;
  do
  {
    v2 = 0;
    glRotatef(a1[v1 + 4], 1.0, 0.0, 0.0);
    v26 = v25;
    do
    {
      v3 = 0;
      glRotatef(a1[v2 + 7], 0.0, 1.0, 0.0);
      do
      {
        glRotatef(a1[v3 + 10], 0.0, 0.0, 1.0);
        v4 = (long double)v3;
        v5 = (long double)v2;
        v6 = (long double)v1;
        z = v4 - 1.0;
        y = v5 - 1.0;
        x = v6 - 1.0;
        v24 = v6;
        v23 = v5;
        v22 = v4;
        glTranslatef(x, y, z);
        sub_8049444(LODWORD(v26[v3 + 13]));
        za = 1.0 - v22;
        ya = 1.0 - v23;
        xa = 1.0 - v24;
        glTranslatef(xa, ya, za);
        v7 = a1[v3++ + 10];
        angle = -v7;
        glRotatef(angle, 0.0, 0.0, 1.0);
      }
      while ( v3 != 3 );
      v8 = a1[v2++ + 7];
      xb = -v8;
      glRotatef(xb, 0.0, 1.0, 0.0);
      v26 += 3;
    }
    while ( v2 != 3 );
    v9 = a1[v1++ + 4];
    xc = -v9;
    glRotatef(xc, 1.0, 0.0, 0.0);
    v25 += 9;
  }
  while ( v1 != 3 );
  xd = -a1[3];
  glRotatef(xd, 0.0, 0.0, 1.0);
  anglea = -a1[2];
  glRotatef(anglea, 0.0, 1.0, 0.0);
  xe = -a1[1];
  glRotatef(xe, 1.0, 0.0, 0.0);
}

//----- (08049B18) --------------------------------------------------------
int start()
{
  int v0; // ebx
  float *v1; // ebp
  int v2; // esi
  int v3; // eax
  int v4; // edx
  _DWORD *v5; // eax
  int v6; // ebx
  int v7; // ebx
  int v9; // eax
  __int64 v10[3]; // [esp-10h] [ebp-16Ch] BYREF
  int v11; // [esp+8h] [ebp-154h]
  int v12; // [esp+Ch] [ebp-150h]
  char *v13; // [esp+10h] [ebp-14Ch]
  char *v14; // [esp+14h] [ebp-148h]
  char *v15; // [esp+18h] [ebp-144h]
  char *v16; // [esp+1Ch] [ebp-140h]
  int v17; // [esp+2Ch] [ebp-130h]
  int v18[60]; // [esp+3Ch] [ebp-120h]
  char v19[48]; // [esp+12Ch] [ebp-30h] BYREF

  SDL_SetVideoMode(1280, 800, 0, -2147483646);
  SDL_ShowCursor(0);
  glShadeModel(0x1D01u);
  glClearColor(0.80000001, 0.80000001, 0.80000001, 0.5);
  glClearDepth(1.0);
  glEnable(0xB71u);
  glDepthFunc(0x203u);
  glHint(0xC50u, 0x1102u);
  glViewport(0, 0, 1280, 800);
  glMatrixMode(0x1701u);
  glLoadIdentity();
  glFrustum(-1.33, 1.33, -1.0, 1.0, 1.5, 100.0);
  glMatrixMode(0x1700u);
  glLoadIdentity();
  glClear(0x4100u);
  glLoadIdentity();
  v0 = 0;
  glTranslated(0.0, 0.0, -7.0);
  glRotatef(30.0, 1.0, 0.0, 0.0);
  glRotatef(60.0, 0.0, 1.0, 0.0);
  v1 = (float *)sub_8049394();
  srand(0x5F5E100u);
  v17 = 0;
  v16 = v19;
  while ( 1 )
  {
    qmemcpy(v10, v16, 0x14u);
    if ( sub_8049330(v10[0], SHIDWORD(v10[0]), v10[1]) == 1 )
      return SDL_Quit();
    v2 = rand() % 3 + 1;
    v3 = rand();
    if ( v17 == v2 )
    {
      --v0;
    }
    else
    {
      v12 = v4;
      v11 = v4;
      v5 = sub_8049363(v2, v3 % 3);
      v18[v0] = (int)v5;
      sub_80492D1(v1, (int)v5, 90);
      v17 = v2;
    }
    if ( ++v0 > 59 )
    {
      v6 = 0;
      sub_804993D(v1);
      SDL_GL_SwapBuffers();
      v15 = v19;
      while ( 1 )
      {
        qmemcpy(v10, v15, 0x14u);
        if ( sub_8049330(v10[0], SHIDWORD(v10[0]), v10[1]) == 1 )
          return SDL_Quit();
        ++v6;
        glRotatef(2.0, 0.0, 1.0, 1.0);
        glClear(0x4100u);
        glFlush();
        sub_804993D(v1);
        SDL_GL_SwapBuffers();
        SDL_Delay(20);
        if ( v6 == 200 )
        {
          LOBYTE(v6) = 59;
          v14 = v19;
LABEL_14:
          v17 = 0;
          while ( 1 )
          {
            qmemcpy(v10, v14, 0x14u);
            if ( sub_8049330(v10[0], SHIDWORD(v10[0]), v10[1]) == 1 )
              return SDL_Quit();
            glRotatef(2.0, 0.0, 1.0, 1.0);
            sub_80492D1(v1, v18[v6], -5);
            glClear(0x4100u);
            glFlush();
            sub_804993D(v1);
            SDL_GL_SwapBuffers();
            SDL_Delay(20);
            if ( ++v17 == 18 )
            {
              if ( --v6 != -1 )
                goto LABEL_14;
              v7 = 0;
              v13 = v19;
              while ( 1 )
              {
                qmemcpy(v10, v13, 0x14u);
                if ( sub_8049330(v10[0], SHIDWORD(v10[0]), v10[1]) == 1 )
                  break;
                ++v7;
                glRotatef(2.0, 0.0, 1.0, 1.0);
                glClear(0x4100u);
                glFlush();
                sub_804993D(v1);
                SDL_GL_SwapBuffers();
                SDL_Delay(20);
                if ( v7 == 350 )
                {
                  SDL_Quit();
                  v9 = sys_exit(0);
                }
              }
              return SDL_Quit();
            }
          }
        }
      }
    }
  }
}
// 8049CC9: variable 'v4' is possibly undefined
// 804877C: using guessed type int __cdecl SDL_ShowCursor(_DWORD);
// 804879C: using guessed type int SDL_GL_SwapBuffers(void);
// 80487CC: using guessed type int __cdecl SDL_SetVideoMode(_DWORD, _DWORD, _DWORD, _DWORD);
// 804888C: using guessed type int __cdecl SDL_Delay(_DWORD);
// 804889C: using guessed type int SDL_Quit(void);
// 8049B18: using guessed type int var_120[60];

// nfuncs=77 queued=17 decompiled=17 lumina nreq=0 worse=0 better=0
// ALL OK, 17 function(s) have been successfully decompiled
