// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register (memptr (ptr16 Eq_6) byte) di)
void fn0C00_0100(byte Eq_6::* di)
{
	struct Eq_4 Eq_5::* fp;
	struct Eq_5 * ss;
	struct Eq_6 * cs;
	struct Eq_4 Eq_5::* sp_187 = fp;
	__syscall<byte>(0x10);
	while (true)
	{
		struct Eq_4 Eq_5::* sp_6 = sp_187 - 2;
		(ss->*sp_6).ptr0000 = 0x8000;
		struct Eq_6 * es_9 = (ss->*sp_6).ptr0000;
		(ss->*sp_6).ptr0000 = cs;
		struct Eq_6 * ds_14 = (ss->*sp_6).ptr0000;
		word16 cx_16 = ~0x00;
		while (true)
		{
			byte ch_238 = SLICE(cx_16, byte, 8);
			if (cx_16 == 0x00)
				break;
			es_9->*di = 0x14;
			++di;
			--cx_16;
		}
		(ss->*sp_6).ptr0000 = 0x00;
		struct Eq_19 Eq_6::* di_21 = Eq_6::a0000;
		word16 cx_239 = SEQ(ch_238, 200);
		do
		{
			(es_9->*di_21).b0000 = 0x0F;
			struct Eq_44 Eq_6::* di_33 = di_21 + 1;
			di_33[0x009E] = (struct Eq_44) 0x0F;
			di_33[318] = (struct Eq_44) 0x0F;
			di_21 = (struct Eq_19 Eq_6::*) (di_33 + 319);
			--cx_239;
		} while (cx_239 != 0x00);
		(ss->*sp_6).ptrFFFFFFFE = 0x0140;
		byte Eq_6::* di_218 = Eq_6::a0000;
		word16 cx_219;
		for (cx_219 = 0x0140; cx_219 != 0x00; --cx_219)
		{
			es_9->*di_218 = 0x0F;
			++di_218;
		}
		struct Eq_6 * cx_214 = (ss->*sp_6).ptrFFFFFFFE;
		byte Eq_6::* di_211 = di_218 + 63360;
		while (true)
		{
			byte ch_249 = SLICE(cx_214, byte, 8);
			if (cx_214 == 0x00)
				break;
			es_9->*di_211 = 0x0F;
			++di_211;
			--cx_214;
		}
		wchar_t bx_65 = ds_14->w01F7;
		Eq_96 dx_66 = ds_14->t01F9;
		if (dx_66 >= 0xC3 || dx_66 <= 0x01)
			ds_14->w01FD = -ds_14->w01FD;
		Eq_96 dx_84 = (word16) dx_66.u0 + ds_14->w01FD;
		if (bx_65 >= 0x0136 || bx_65 <= 0x06)
			ds_14->w01FB = -ds_14->w01FB;
		wchar_t bx_105 = bx_65 + ds_14->w01FB;
		Eq_145 di_111 = dx_84 *s 0x0140 + bx_105;
		word16 cx_119 = SEQ(ch_249, 0x04);
		do
		{
			es_9->*di_111 = 0x5C5C5C5C;
			di_111 = (word16) di_111 + 320;
			--cx_119;
		} while (cx_119 != 0x00);
		ds_14->w01F7 = bx_105;
		ds_14->t01F9 = dx_84;
		if (ds_14->b01FC != 0x00)
			fn0C00_01DD((char *) ss + 499, dx_84);
		else
			fn0C00_01DD((char *) ss + 501, dx_84);
		fn0C00_01C5(ds_14->w01F3, 0x02, es_9);
		fn0C00_01C5(ds_14->w01F5, 0x013A, es_9);
		(ss->*sp_6).ptrFFFFFFFE = es_9;
		struct Eq_6 * ds_182 = (ss->*sp_6).ptrFFFFFFFE;
		(ss->*sp_6).ptrFFFFFFFE = 0xA000;
		memcpy((ss->*(sp_6 - 2)).ptr0000->a0000[0], ds_182->a0000[0], 0xFA00);
		__syscall<byte>(22);
		sp_187 = sp_6;
		di = &Eq_6::bFA00;
	}
}

// 0C00:01C5: void fn0C00_01C5(Register int16 ax, Register word16 di, Register (ptr16 Eq_6) es)
// Called from:
//      fn0C00_0100
void fn0C00_01C5(int16 ax, word16 di, struct Eq_6 * es)
{
	struct Eq_254 Eq_6::* di_11 = di + ax *s 0x0140;
	word16 cx_15;
	for (cx_15 = 0x10; cx_15 != 0x00; --cx_15)
	{
		(es->*di_11).dw0000 = 0x51515151;
		++di_11;
	}
}

// 0C00:01DD: void fn0C00_01DD(Sequence (ptr32 Eq_96) ss_bp, Register Eq_96 dx)
// Called from:
//      fn0C00_0100
void fn0C00_01DD(union Eq_96 * ss_bp, Eq_96 dx)
{
	if (dx < ss_bp->u0)
		ss_bp->u0 = (wchar_t) (ss_bp->u0 - 0x01);
	else if (dx - 0x0C > ss_bp->u0)
		ss_bp->u0 = (wchar_t) (ss_bp->u0 + 0x01);
}

