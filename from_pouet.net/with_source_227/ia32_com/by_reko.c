// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register (memptr (ptr16 Eq_17) byte) di, Register (ptr16 Eq_4) ds)
void fn0C00_0100(byte Eq_17::* di, struct Eq_4 * ds)
{
	struct Eq_5 * cs;
	Eq_6 Top_100 = 0;
	__syscall<byte>(0x10);
	byte ah_7 = SLICE(cs, byte, 8);
	byte al_9 = (byte) cs;
	struct Eq_17 * ax_10 = SEQ(ah_7 + 0x10, al_9);
	struct Eq_17 * ax_13 = SEQ(ah_7 + 0x20, al_9);
	struct Eq_25 Eq_17::* cx_15 = &Eq_17::t0000;
	do
	{
		uint8 al_22 = (byte) cx_15;
		__out<byte>(0x03C8, al_22);
		uint16 ax_24 = al_22 *16 al_22;
		cu8 cl_33 = (byte) cx_15;
		bci8 dh_268 = 0x03;
		uint8 al_26 = (byte) (ax_24 >> 0x05);
		byte ah_38 = SLICE(ax_24 >> 0x05, byte, 8);
		if (al_26 >= 0x40)
			al_26 = 0x3F;
		__out<byte>(969, al_26);
		word16 ax_39 = SEQ(ah_38, cl_33);
		cu16 ax_341 = SEQ(ah_38, cl_33);
		if (cl_33 >= 0x40)
			ax_341 = SEQ(SLICE(ax_39 - 0x01, byte, 8), cl_33 - 0x01);
		__out<byte>(969, (byte) ax_341);
		uint8 al_50 = (byte) (ax_341 >> 0x01);
		__out<byte>(969, al_50);
		ax_10->*di = al_50;
		bool C_269 = SLICE(cond(ax_341 >> 0x01), bool, 1);
		++di;
		--cx_15;
	} while (cx_15 != &Eq_17::t0000);
	do
	{
		dh_268 = __rcl<byte,byte>(dh_268, (byte) cx_15, C_269);
		cu8 al_77 = al_50 + (dh_268 >> 0x03) + (byte) (dh_268 >> 0x03 < 0x00);
		bcu8 al_82 = (byte) cx_15[0x007E].b0000 + al_77 + (byte) (al_77 < 0x00);
		(ax_10->*cx_15).b0000 = al_82 >> 0x01;
		ax_10->*SEQ(~SLICE(cx_15, byte, 8), (byte) cx_15) = al_82 >> 0x01;
		int8 ah_220 = dh_268 >> 0x03;
		al_50 = al_82 >> 0x01;
		C_269 = SLICE(cond(al_82 >> 0x01), bool, 1);
		--cx_15;
	} while (cx_15 != &Eq_17::t0000);
	bool C_93 = false;
	struct Eq_144 Eq_17::* cx_137 = cx_15 - 0x01;
	Eq_147 bx_344 = 0x00;
	do
	{
		Eq_153 bl_96 = (byte) bx_344;
		ds->t03C9 = bl_96;
		Eq_153 bh_284 = SLICE(bx_344, byte, 8);
		do
		{
			--Top_100;
			Top_100.u1->r0000 = (real64) ds->t03C9;
			Top_100.u1->r0000 *= (real64) ds->r01FB;
			Top_100.u1->r0000 = sin(Top_100.u1->r0000);
			ds->t03C9 = bh_284;
		} while (C_93);
		Top_100.u1->r0001 *= Top_100.u1->r0000;
		ds->t03C9.u0 = 0x12;
		Top_100.u1->r0001 *= (real64) ds->t03C9;
		Top_100.u1->r0001 += (real64) ds->t03C9;
		Top_100.u1->r0000 = 3.141592653589793;
		Top_100.u1->r0001 -= Top_100.u1->r0000;
		ax_13->*bx_344 = (int16) Top_100.u1->r0001;
		Eq_233 v28_131 = (word16) (ax_13->*bx_344) + ((bl_96 & bh_284) & 0x08);
		ax_13->*bx_344 = v28_131;
		&Top_100.u1->r0000 = Top_100.u1 + 1;
		C_93 = v28_131 < 0x00;
		--cx_137;
		bx_344 = SEQ(SLICE((word16) bx_344 + 1, byte, 8), (byte) bl_96.u1 + 1);
	} while (cx_137 != &Eq_17::t0000);
	do
	{
		bcu8 Eq_4::* di_139 = &Eq_4::b0400;
		Eq_273 dx_144 = ~0x63;
		do
		{
			Eq_273 bp_145 = ~0x9F;
			do
			{
				__fninit();
				ds->t017B = dx_144;
				Eq_390 Top_152 = Top_100 - 1;
				Top_152.u1->r0000 = (real64) ds->t017B;
				Top_152.u1->r0000 /= (real64) ds->w01B4;
				ds->t017B = bp_145;
				Top_152.u1->rFFFFFFFF = (real64) ds->t017B;
				Top_152.u1->rFFFFFFFF /= (real64) ds->w01B4;
				Top_152.u1->rFFFFFFFE = (real64) ds->w0179;
				Top_152.u1->rFFFFFFFD = Top_152.u1->rFFFFFFFE;
				Top_152.u1->rFFFFFFFD /= (real64) ds->w01B4;
				Top_152.u1->rFFFFFFFD = sin(Top_152.u1->rFFFFFFFD);
				Top_152.u1->rFFFFFFFC = (real64) ds->w0166;
				Top_152.u1->rFFFFFFFC *= Top_152.u1->rFFFFFFFD;
				Top_152.u1->rFFFFFFFC += (real64) ds->w01B4;
				ds->t017B.u0 = (int16) Top_152.u1->rFFFFFFFC;
				Top_152.u1->rFFFFFFFD *= (real64) ds->w01B4;
				word16 cx_175;
				int16 ax_347 = SEQ(ah_220, ds->t017B);
				for (cx_175 = 0x32; cx_175 != 0x00; --cx_175)
				{
					Eq_6 Top_176 = Top_100 - 4;
					Top_176.u1->r0000 += Top_176.u1[1];
					ds->t017B.u0 = (int16) Top_176.u1->r0000;
					Top_176.u1->rFFFFFFFF = Top_176.u1->r0003;
					Top_176.u1->r0001 += Top_176.u1->rFFFFFFFF;
					Top_176.u1->rFFFFFFFF = Top_176.u1->r0001;
					ds->w017C = (int16) Top_176.u1->rFFFFFFFF;
					uint8 al_193 = (byte) ax_347;
					Top_100 = Top_176;
					Eq_273 si_192 = ds->t017B;
					if (al_193 < ax_13->*si_192)
						break;
					ax_347 = SEQ(SLICE(ax_347 - 0x01, byte, 8), al_193 - 0x01);
				}
				uint8 al_210 = ax_10->*si_192;
				ds->*di_139 >>= 0x01;
				uint8 cl_218 = (byte) cx_175 << 0x01;
				ah_220 = SLICE(cl_218 *16 al_210, byte, 8);
				ds->*di_139 += ah_220;
				++di_139;
				bp_145 = (word16) bp_145 + 1;
			} while (bp_145 != 0xA0);
			dx_144 = (word16) dx_144 + 1;
		} while (dx_144 != 100);
		ds->w0179 -= 0x03;
		memcpy(A000:0000, ds->b0400, SEQ(0x7D, cl_218) *32 0x02);
	} while (__in<byte>(0x60) != 0x01);
}

