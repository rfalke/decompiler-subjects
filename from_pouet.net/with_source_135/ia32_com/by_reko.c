// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register word16 cx, Register (ptr16 Eq_4) ds)
void fn0C00_0100(word16 cx, struct Eq_4 * ds)
{
	byte ah;
	__syscall<byte>(0x10);
	byte Eq_34::* di_10 = Eq_34::a0000;
	word16 ax_137 = SEQ(ah, 0x13);
	do
	{
		byte al_16 = (byte) ax_137;
		__out<byte>(969, al_16);
		--cx;
		ax_137 = SEQ(SLICE(ax_137 + 0x01, byte, 8), al_16 + 0x01);
	} while (cx != 0x00);
	do
	{
		++0xA000->*di_10;
		byte Eq_34::* di_39 = di_10 + 1;
		uint32 dx_ax_45 = (uint32) (di_39 - 0x01);
		uint16 dx_47 = (uint16) (dx_ax_45 % ds->w015E);
		uint16 ax_48 = (uint16) (dx_ax_45 /u ds->w015E);
		if (dx_47 == 0x00)
			ds->w0160 = 0x01;
		if (dx_47 == 0x013F)
			ds->w0160 = ~0x00;
		if (ax_48 == 0x00)
			ds->w0162 = 0x0140;
		if (ax_48 == 199)
			ds->w0162 = ~0x013F;
		di_10 = di_39 - 0x01 + ds->w0160 + ds->w0162;
	} while (__in<byte>(0x60) != 0x01);
}

