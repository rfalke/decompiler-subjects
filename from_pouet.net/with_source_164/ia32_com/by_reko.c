// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte ch)
void fn0C00_0100(byte ch)
{
	__syscall<byte>(0x10);
	word16 wLoc02_236 = 0x01;
	word16 wLoc04_237 = 0x0140;
	word16 cx_181 = SEQ(ch, ~0x01);
	do
	{
		__out<byte>(969, 0x00);
		ci16 ax_21 = cx_181 - 0x7F;
		bcu8 al_24 = (byte) ax_21;
		if (ax_21 <= 0x00)
			al_24 = -al_24;
		byte al_32 = 0x3F - (al_24 >> 0x01);
		__out<byte>(969, al_32);
		__out<byte>(969, al_32);
		--cx_181;
	} while (cx_181 != 0x00);
	byte Eq_49::* di_140 = &Eq_49::b0000;
	do
	{
		word16 cx_123 = 0x27;
		di_121 = di_140;
		do
		{
			byte Eq_49::* di_121;
			word16 cx_102;
			di_100 = di_121;
			for (cx_102 = 0x27; cx_102 != 0x00; --cx_102)
			{
				byte Eq_49::* di_100;
				++0xA000->*di_100;
				++di_100;
			}
			di_121 += 320;
			cx_123 = cx_295 - 0x01;
			cx_295 = cx_123;
		} while (cx_295 != 0x01);
		di_140 = di_140 + wLoc02_236 + wLoc04_237;
		uint32 dx_ax_144 = (uint32) di_140;
		Eq_81 dx_146 = (uint16) (dx_ax_144 % 0x0140);
		Eq_85 ax_147 = (uint16) (dx_ax_144 /u 0x0140);
		if (ax_147 <= 0x00 || ax_147 >= 161)
			wLoc04_237 = -wLoc04_237;
		if (dx_146 <= 0x00 || dx_146 >= 0x0119)
			wLoc02_236 = -wLoc02_236;
	} while (__in<byte>(0x60) != 0x01);
	msdos_terminate_program20();
}

