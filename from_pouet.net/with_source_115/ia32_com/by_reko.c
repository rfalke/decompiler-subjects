// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register (memptr (ptr16 Eq_20) byte) bx, Register Eq_4 si, Register (memptr (ptr16 Eq_20) Eq_5) di)
void fn0C00_0100(byte Eq_20::* bx, Eq_4 si, struct Eq_5 Eq_20::* di)
{
	__syscall<byte>(0x10);
	__out<word16>(0x03D4, 8211);
	byte al_15 = 0x13;
	struct Eq_20 * ds_8 = 8211;
	byte Eq_20::* bx_101 = bx;
	while (true)
	{
		uint16 cx_22 = (uint16) SLICE(bx_106, byte, 8);
		int8 bl_31 = (byte) bx_106;
		Eq_38 ax_27 = (uint16) ((int32) SEQ(0x40, al_15) /u (cx_22 + 0x01));
		bi8 dl_39 = SLICE(ax_27 *s32 SEQ(bl_31, (byte) cx_22 + 0x01), byte, 16);
		word16 ax_41 = dl_39 *s16 SLICE(ax_27 + si, byte, 0);
		byte Eq_20::* bx_49 = bx_106;
		cup16 ax_94 = SEQ(SLICE(ax_41, byte, 8) & 0x1C, (byte) ax_41);
		cup16 dx_100 = SEQ(0x10, dl_39);
		do
		{
			bx_91 = SEQ(bh_57 - 0x01, bl_90);
			ds_8->*bx_49 = SLICE(dx_100, byte, 8);
			byte bh_57 = SLICE(bx_49, byte, 8);
			byte bl_90 = (byte) bx_49;
			dx_100 = (word16) ax_27 + dx_100;
			bx_49 = bx_91;
		} while (dx_100 < ax_94);
		al_15 = (byte) di[96];
		(0xA000->*di).b0000 = al_15;
		byte bh_84 = SLICE(bx_106 + 1, byte, 8);
		++di;
		bx_101 = SEQ(bh_84, bl_31 + 0x01);
		bx_106 = bx_101;
		if (bx_106 == &Eq_20::bFFFF)
		{
			si = (word16) si + 1;
			bx_101 = SEQ(bh_84, bl_31 + 0x01);
		}
	}
}

