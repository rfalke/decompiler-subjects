// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register word16 cx, Register (memptr (ptr16 Eq_5) Eq_82) bx, Register (ptr16 Eq_5) ds)
void fn0C00_0100(word16 cx, union Eq_82 Eq_5::* bx, struct Eq_5 * ds)
{
	word16 cx;
	struct Eq_5 * ds;
	union Eq_82 Eq_5::* bx;
	selector ss;
	__syscall<byte>(0x10);
	ax_5 = 0x00;
	__out<byte>(0x03C8, 0x00);
	do
	{
		ax_13 = ϕ(ax_5, ax_283);
		ax_16 = ax_13 + 0x01;
		al_17 = (byte) ax_16;
		ax_26 = __ror<word16,byte>(ax_13, 0x02);
		if ((al_17 & 0x0F) != 0x00)
			ax_30 = __ror<word16,byte>(ax_26, 0x01);
		ax_447 = ϕ(ax_30, ax_26);
		al_34 = (byte) ax_447;
		__out<byte>(969, al_34);
		__out<byte>(969, al_34);
		if ((al_17 & 0x0F) != 0x00)
		{
			ax_43 = __rol<word16,byte>(ax_447, 0x01);
			al_47 = (byte) ax_43;
		}
		al_46 = ϕ(al_34, al_47);
		__out<byte>(969, al_46);
		al_56 = (byte) ax_13;
		ah_282 = SLICE(ax_13, byte, 8);
		ax_283 = SEQ(ah_282, al_56 + 0x01);
	} while (al_56 != ~0x00);
	es_bp_68.u1 = (ds->*bx).u1;
	bp_69 = (word16) es_bp_68;
	cx_448 = cx;
	cx_450 = cx_448;
	cl_298 = (byte) cx_450;
	Mem76 = ϕ(Mem24, Mem289);
	si_77 = ds->t01FC;
	do
	{
		Mem81 = ϕ(Mem296, Mem76);
		si_80 = ϕ(si_123, si_77);
		if ((&&(ss->*(ss->*si_80).b0000))[bp_69].b0000 == cl_298)
		{
			di_86 = si_80 << 0x04;
			di_89 = (word16) ds->t01FC + di_86;
			edx_eax_90 = __rdtsc();
			eax_91 = (word32) edx_eax_90;
			eax_92 = eax_91 ^ ds->dw020A;
			ax_95 = (word16) eax_92;
			al_97 = (byte) eax_92;
			eax_16_16_107 = SLICE(eax_92, word16, 16);
			ax_98 = (int16) al_97;
			ds->*di_89 = ax_98;
			ah_102 = SLICE(ax_95, byte, 8);
			ax_104 = (int16) ah_102;
			ds->*((word16) di_89 + 2) = ax_104;
			ds->*((word16) di_89 + 4) = 0x43800000;
			eax_108 = SEQ(eax_16_16_107, ax_104);
			eax_109 = __bswap<word32>(eax_108);
			al_111 = (byte) eax_109;
			eax_16_16_117 = SLICE(eax_109, word16, 16);
			ax_112 = (uint16) al_111;
			ds->*((word16) di_89 + 8) = ax_112 + 0x01;
			v28_115 = si_80[bp_69].b0000 + 0x01;
			(&&(ss->*(ss->*si_80).b0000))[bp_69].b0000 = v28_115;
			eax_118 = SEQ(eax_16_16_117, ax_112 + 0x01);
			v29_119 = ds->dw020A + eax_118;
			ds->dw020A = v29_119;
		}
		Mem296 = ϕ(Mem120, Mem81);
		si_123 = si_80 - 0x01;
		cx_324 = cx_450;
	} while (si_123 != 0x00);
	do
	{
		cx_139 = ϕ(cx_324, cx_140);
		Mem128 = ϕ(Mem296, Mem151);
		si_127 = ϕ(si_123, si_136);
		v30_129 = (bp_69 << 0x01)->*si_127 - 0x11;
		(bp_69 << 0x01)->*si_127 = v30_129;
		if (v30_129 < 0x00)
			(bp_69 << 0x01)->*si_127 = 0x01;
		Mem151 = ϕ(Mem130, Mem134);
		si_136 = (word16) si_127 + 1;
		cx_140 = cx_139 - 0x01;
	} while (cx_140 != 0x00);
	v33_152 = ds->dw0200 + 0x01;
	ds->dw0200 = v33_152;
	si_155 = ds->t01FC;
	cl_239 = (byte) cx_140;
	Mem161 = Mem153;
	si_156 = si_155;
	di_158 = si_156 << 0x04;
	di_162 = (word16) ds->t01FC + di_158;
	rLoc1_351 = (real64) (ds->*((word16) di_162 + 8));
	rLoc1_352 = rLoc1_351 * (real64) ds->r01F8;
	rLoc2_353 = (real64) (ds->*((word16) di_162 + 4));
	rLoc1_354 = rLoc2_353 - rLoc1_352;
	ds->*((word16) di_162 + 4) = (real32) rLoc1_354;
	bp_177 = 0x00;
}

