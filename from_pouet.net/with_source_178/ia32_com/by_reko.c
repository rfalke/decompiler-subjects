// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte ah, Register byte dl, Register (memptr (ptr16 Eq_13) Eq_5) bx, Register (memptr (ptr16 Eq_7) word16) si, Register (ptr16 Eq_7) ds)
void fn0C00_0100(byte ah, byte dl, struct Eq_5 Eq_13::* bx, word16 Eq_7::* si, struct Eq_7 * ds)
{
	__syscall<byte>(0x10);
	struct Eq_13 * dx_7 = SEQ(0x70, dl);
	struct Eq_13 * dx_10 = SEQ(0x80, dl);
	real64 rLoc1_318 = 0.0;
	do
	{
		(dx_10->*bx).w0000 = (int16) (sin(rLoc1_318) * (real64) ds->w015D);
		rLoc1_318 += (real64) ds->r018B;
		(dx_7->*bx).w0000 = (int16) si;
		struct Eq_44 Eq_13::* bx_36 = bx + 1;
		bx = (struct Eq_5 Eq_13::*) (bx_36 + 1);
		byte bl_276 = (byte) bx_36 + 0x01;
		byte bh_282 = SLICE(bx_36 + 1, byte, 8);
	} while (bx_36 != &Eq_13::tFFFF);
	word16 cx_415 = SEQ(ah, 0x13);
	union Eq_117 Eq_13::* bx_418 = SEQ(bh_282, bl_276);
	do
	{
		byte ch_284 = SLICE(cx_424, byte, 8);
		byte cl_85 = (byte) cx_424;
		int16 ax_53 = ds->*si;
		++si;
		union Eq_117 Eq_13::* bx_412 = bx_418;
		do
		{
			bi8 bl_59 = (byte) bx_425;
			bi8 bh_66 = SLICE(bx_425, byte, 8);
			Mem79[dx_7:bx_425 + ax_53:byte] = Mem75[dx_7:bx_425 + ax_53:byte] - ch_284 - CONVERT(bh_66 *s16 bh_66 + bl_59 *s16 bl_59 <u 0x0383, bool, byte);
			byte bh_280 = SLICE((char *) bx_425 + 1, byte, 8);
			struct Eq_88 Eq_13::* bx_295 = (char *) bx_425 + 1;
			bx_412 = SEQ(bh_280, bl_59 + 0x01);
			bx_425 = bx_412;
		} while (bx_425 != &Eq_13::tFFFF);
		cx_415 = SEQ(SLICE(cx_424 - 0x01, byte, 8), cl_85 - 0x01);
		bx_418 = SEQ(bh_280, bl_59 + 0x01);
		cx_424 = cx_415;
	} while (cx_424 != 0x01);
	do
	{
		struct Eq_13 * dx_103 = dx_10;
		Eq_117 si_91 = (dx_10->*bx_295).a0000[0].u0;
		int16 bp_92 = (dx_10->*bx_295).w2000;
		byte Eq_149::* di_116 = &Eq_149::b0000;
		word16 cx_128 = SEQ(SLICE(cx_424 - 0x01, byte, 8), 200);
		bx_134 = bx_295;
		do
		{
			struct Eq_88 Eq_13::* bx_134;
			word16 cx_148 = 0x0140;
			bx_150 = bx_134;
			dx_153 = dx_103;
			di_177 = di_116;
			do
			{
				byte Eq_149::* di_177;
				struct Eq_13 * dx_153;
				struct Eq_88 Eq_13::* bx_150;
				struct Eq_88 Eq_13::* bx_152 = bx_150 + bp_92 /16 0x00002002;
				word16 dx_155 = dx_153 + si_91;
				cu8 al_182 = 0x12;
				ui16 bx_183 = SEQ(SLICE(bx_152, byte, 8), SLICE(dx_155, byte, 8));
				do
				{
					bx_183 = bx_423 * 0x02;
					al_182 -= 0x03;
					bx_423 = bx_183;
				} while (dx_7->a0100[0].b0000[bx_423].b0000 < al_182);
				0xA000->*di_177 = al_182 + 0x10;
				bx_150 = bx_152;
				dx_153 = dx_155;
				++di_177;
				cx_148 = cx_422 - 0x01;
				cx_422 = cx_148;
			} while (cx_422 != 0x01);
			di_116 += 320;
			bx_134 -= si_91;
			dx_103 += bp_92 /16 0x00010000;
			cx_128 = cx_421 - 0x01;
			cx_421 = cx_128;
		} while (cx_421 != 0x01);
		ds->b015E += 0x04;
		bx_295 = SEQ(SLICE(bx_295, byte, 8) + 0x01, (byte) bx_295);
		byte al_262;
		byte ah_263;
	} while (bios_kbd_check_keystroke(out al_262, out ah_263));
	bios_video_set_mode(0x03);
}

