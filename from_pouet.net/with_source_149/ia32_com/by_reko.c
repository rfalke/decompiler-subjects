// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0C00:0100: void fn0C00_0100(Register byte ch, Register (ptr16 Eq_4) ds)
void fn0C00_0100(byte ch, struct Eq_4 * ds)
{
	__syscall<byte>(0x10);
	__out<byte>(0x03C8, 0x00);
	byte Eq_52::* di_10 = &Eq_52::b0000;
	word16 cx_133 = SEQ(ch, 0x40);
	cui16 ax_193 = 0x00;
	do
	{
		byte al_19 = (byte) ax_193;
		__out<byte>(969, al_19);
		__out<byte>(969, al_19);
		__out<byte>(969, al_19);
		--cx_133;
		byte cl_155 = (byte) cx_133;
		ax_193 = SEQ(SLICE(ax_193 + 0x01, byte, 8), al_19 + 0x01);
	} while (cx_133 != 0x00);
	while (true)
	{
		word16 cx_158 = SEQ(~0x05, cl_155);
		di_40 = di_10;
		do
		{
			byte Eq_52::* di_40;
			byte al_44 = 0xA000->*di_40;
			byte al_46 = al_44;
			if (al_44 != 0x00)
				al_46 = al_44 - 0x01;
			0xA000->*di_40 = al_46;
			--cx_158;
			++di_40;
			byte cl_159 = (byte) cx_158;
		} while (cx_158 != 0x00);
		word16 cx_127 = SEQ(0x02, cl_159);
		do
		{
			0xA000->*di_10 = 0x3F;
			byte Eq_52::* di_75 = di_10 + 1;
			uint32 dx_ax_79 = (uint32) (di_75 - 0x01);
			uint16 dx_82 = (uint16) (dx_ax_79 % ds->w0179);
			uint16 ax_83 = (uint16) (dx_ax_79 /u ds->w0179);
			if (dx_82 == 0x00)
				ds->w017B = 0x01;
			if (dx_82 == 0x013F)
				ds->w017B = ~0x00;
			if (ax_83 == 0x00)
				ds->w017D = 0x0140;
			if (ax_83 == 199)
				ds->w017D = ~0x013F;
			di_10 = di_75 - 0x01 + ds->w017B + ds->w017D;
			if (__in<byte>(0x60) == 0x01)
				return;
			--cx_127;
			cl_155 = (byte) cx_127;
		} while (cx_127 != 0x00);
	}
}

