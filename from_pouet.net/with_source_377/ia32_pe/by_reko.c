// subject_data.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

Eq_587 g_t4020B4 = // 004020B4
	{
		null
	};
Eq_596 g_t4020B8 = null; // 004020B8
Eq_599 g_t4020BC = null; // 004020BC
Eq_511 g_t4020CC = null; // 004020CC
Eq_519 g_t4020D0 = null; // 004020D0
Eq_690 g_t4020D4 = // 004020D4
	{
		null,
		0x00,
		0x00,
		0,
		0x00,
		
		{
			0,
			0,
		},
	};
word32 g_dw4020D8 = 0x00; // 004020D8
Eq_530 g_t4020DC = 0x00; // 004020DC
struct tagRECT g_t4020F0 = // 004020F0
	{
		0,
		0,
		0,
		0,
	};
int32 g_dw4020F8 = 0; // 004020F8
int32 g_dw4020FC = 0; // 004020FC
Eq_475 g_t402100 = // 00402100
	{
		null
	};
Eq_2 g_t402104 = // 00402104
	{
		null
	};
word32 g_dw402108 = 0x00; // 00402108
Eq_2 g_t40210C = // 0040210C
	{
		null
	};
Eq_29 g_t402118 = // 00402118
	{
		null
	};
Eq_55 g_t40211C = null; // 0040211C
int16 g_w402130 = 40; // 00402130
int16 g_w402132 = 396; // 00402132
int16 g_w402134 = 0x0091; // 00402134
byte g_a402136[] = // 00402136
	{
	};
// subject_idata.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 g_dw404074 = 0x409C; // 00404074
word32 g_dw404078 = 0x40AA; // 00404078
word32 g_dw40407C = 0x40BE; // 0040407C
word32 g_dw404080 = 0x40CC; // 00404080
<anonymous> * __imp__ExitProcess = &g_t409C; // 00404088
<anonymous> * __imp__GetModuleHandleW = &g_t40AA; // 0040408C
<anonymous> * __imp__GlobalAlloc = &g_t40BE; // 00404090
<anonymous> * __imp__GlobalFree = &g_t40CC; // 00404094
word32 g_dw4040DA = 0x414A; // 004040DA
word32 g_dw4040DE = 0x415C; // 004040DE
word32 g_dw4040E2 = 0x416E; // 004040E2
word32 g_dw4040E6 = 16770; // 004040E6
word32 g_dw4040EA = 16786; // 004040EA
word32 g_dw4040EE = 0x419A; // 004040EE
word32 g_dw4040F2 = 16808; // 004040F2
word32 g_dw4040F6 = 0x41B4; // 004040F6
word32 g_dw4040FA = 0x41C2; // 004040FA
word32 g_dw4040FE = 0x41D2; // 004040FE
word32 g_dw404102 = 16868; // 00404102
word32 g_dw404106 = 16886; // 00404106
word32 g_dw40410A = 0x4202; // 0040410A
<anonymous> * __imp__CreateWindowExW = &g_t414A; // 00404112
<anonymous> * __imp__DefWindowProcW = &g_t415C; // 00404116
<anonymous> * __imp__DispatchMessageW = &g_t416E; // 0040411A
<anonymous> * __imp__GetClientRect = &g_t4182; // 0040411E
<anonymous> * __imp__GetDC = &g_t4192; // 00404122
<anonymous> * __imp__LoadCursorW = &g_t419A; // 00404126
<anonymous> * __imp__LoadIconW = &g_t41A8; // 0040412A
<anonymous> * __imp__MessageBoxW = &g_t41B4; // 0040412E
<anonymous> * __imp__PeekMessageW = &g_t41C2; // 00404132
<anonymous> * __imp__PostQuitMessage = &g_t41D2; // 00404136
<anonymous> * __imp__RegisterClassW = &g_t41E4; // 0040413A
<anonymous> * __imp__ReleaseDC = &g_t41F6; // 0040413E
<anonymous> * __imp__TranslateMessage = &g_t4202; // 00404142
word32 g_dw404216 = 0x422E; // 00404216
word32 g_dw40421A = 0x4242; // 0040421A
<anonymous> * __imp__SetStretchBltMode = &g_t422E; // 00404222
<anonymous> * __imp__StretchDIBits = &g_t4242; // 00404226
// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: void fn00401000()
// Called from:
//      Win32CrtStartup
void fn00401000()
{
	Eq_2 edx_15 = g_t402104.u0;
	byte bl_16 = 0x00;
	do
	{
		*edx_15.u0 = bl_16;
		struct Eq_10 * edx_10 = (word32) edx_15 + 1;
		edx_10->b0000 = bl_16;
		edx_10->b0001 = bl_16;
		edx_15.u0 = &edx_10->b0001 + 2;
		++bl_16;
	} while (bl_16 != 0x00);
}

// 00401017: void fn00401017()
// Called from:
//      Win32CrtStartup
void fn00401017()
{
	word32 ecx_16;
	byte * esi_13 = g_a402136;
	Eq_29 edi_11 = g_t402118.u0;
	for (ecx_16 = 0x0F00; ecx_16 != 0x00; --ecx_16)
	{
		edi_11.u0->b0000 = *esi_13;
		++esi_13;
		&edi_11.u0->b0000 = (word32) edi_11 + 1;
	}
	word16 ebx_16_16_72 = 0x00;
	word16 edx_16_16_114 = 0x00;
	cui16 bx_136 = 0x00;
	do
	{
		bcu8 bh_41 = SLICE(bx_136, byte, 8);
		cu8 bl_32 = (byte) bx_136;
		word24 edx_24_8_117 = SEQ(edx_16_16_114, 0x04);
		Eq_29 esi_29 = g_t402118.u0;
		int32 ebx_71 = SEQ(ebx_16_16_72, bh_41, bl_32);
		word32 edx_131 = SEQ(edx_24_8_117, ~0x04);
		if (bl_32 <= ~0x04)
		{
			ebx_71 = SEQ(ebx_16_16_72, bh_41, bl_32);
			edx_131 = SEQ(edx_24_8_117, ~0x04);
			if (bl_32 >= 0x04)
			{
				ebx_71 = SEQ(ebx_16_16_72, bx_136);
				edx_131 = SEQ(edx_24_8_117, ~0x04);
				if ((esi_29.u0->aFFFFDE3C[(uint32) (((word16) (bh_41 >> 0x02) << 0x06) + SEQ(bh_41 >> 0x02, bl_32 >> 0x02))] & ~0x04) <= 0x00)
				{
					byte dl_63 = (bl_32 & 0x0F) + (bh_41 & 0x0F);
					ebx_71 = SEQ(ebx_16_16_72, bx_136);
					edx_131 = SEQ(edx_16_16_114, SLICE(SEQ(bh_41 & 0x0F, dl_63) << 0x02, byte, 8), dl_63 << 0x02);
				}
			}
		}
		*((char *) g_t40211C + ebx_71) = (Eq_55) (byte) edx_131;
		word16 bx_78 = (word16) ebx_71;
		edx_16_16_114 = SLICE(edx_131, word16, 16);
		ebx_16_16_72 = SLICE(ebx_71, word16, 16);
		bx_136 = SEQ(SLICE(bx_78 - 0x01, byte, 8), (byte) bx_78 - 0x01);
	} while (bx_78 != 0x01);
}

// 00401088: void fn00401088()
// Called from:
//      Win32CrtStartup
void fn00401088()
{
	bool P;
	word16 cx_291 = 0x00;
	struct Eq_130 * ebx_293 = (struct Eq_130 *) 0x0400;
	do
	{
		ebx_295 = SEQ(ebx_24_8_294, bl_58 + 0x08);
		++cx_291;
		ebx_293->w402136 += cx_291;
		real64 rLoc1_361 = (real64) ebx_293->w402136 / (real64) g_w402130;
		real64 rLoc1_362 = cos(rLoc1_361);
		ebx_293->r402155 = (real32) sin(rLoc1_361);
		ebx_293->r402159 = (real32) rLoc1_362;
		byte bl_58 = (byte) ebx_293;
		word24 ebx_24_8_294 = SLICE(ebx_293, word24, 8);
		word16 ebx_16_16_307 = SLICE(ebx_293, word16, 16);
		byte ch_197 = SLICE(cx_291, byte, 8);
		Eq_179 Top_109 = 0x00;
		ebx_293 = ebx_295;
	} while (P);
	byte dl_297 = 0x00;
	byte dh_311 = 0x00;
	word24 ebx_24_8_303 = SEQ(ebx_16_16_307, 0x03);
	do
	{
		int16 bp_187 = 0x80;
l004010C6:
		word16 di_72 = 0x041D;
		byte al_74 = dl_297;
		struct Eq_192 * ebx_101 = SEQ(ebx_24_8_303, ch_197);
		do
		{
			int16 ax_80 = (int16) (al_74 - 0x80);
			ebx_101->w402136 = ax_80;
			word16 bx_86 = (word16) ebx_101;
			word16 ebx_16_16_102 = SLICE(ebx_101, word16, 16);
			int32 edx_174 = SEQ(0x00, dh_311, dl_297);
			al_74 = dh_311;
			word24 ebx_24_8_104 = SEQ(ebx_16_16_102, SLICE(bx_86 + 0x02, byte, 8));
			ebx_101 = SEQ(ebx_16_16_102, bx_86 + 0x02);
			word16 dx_183 = (word16) edx_174;
			uint24 eax_24_8_211 = (uint24) SLICE(ax_80, byte, 8);
			if (!P)
				ebx_101 = SEQ(ebx_24_8_104, 0x00);
			++di_72;
			word24 ebx_24_8_322 = SLICE(ebx_101, word24, 8);
			struct Eq_194 * edi_126 = (uint32) di_72;
		} while (P);
		ebx_101->w402136 = bp_187;
		struct Eq_229 * ebx_112 = SEQ(ebx_24_8_322, 0x00);
		do
		{
			--Top_109;
			Top_109.u1->r0000 = (real64) ebx_112->t402136.u0;
			ebx_112 = SEQ(SLICE(ebx_112, word16, 16), (word16) ebx_112 + 0x02);
			ebx_24_8_303 = SLICE(ebx_112, word24, 8);
		} while (P);
		do
		{
			edi_330 = SEQ(edi_16_16_329, di_148 + 0x08);
			Top_109.u1->rFFFFFFFF = (real64) Top_109.u1[1];
			Top_109.u1->rFFFFFFFF *= (real64) edi_126->r402136;
			Top_109.u1->rFFFFFFFE = (real64) Top_109.u1[2];
			Top_109.u1->rFFFFFFFE *= (real64) edi_126->r40213A;
			Top_109.u1->rFFFFFFFF += Top_109.u1->rFFFFFFFE;
			real64 v34_135 = Top_109.u1->rFFFFFFFF;
			Top_109.u1->rFFFFFFFF = (real64) Top_109.u1[1];
			Top_109.u1[1] = (struct Eq_750) v34_135;
			Top_109.u1->rFFFFFFFF *= (real64) edi_126->r40213A;
			real64 v35_139 = Top_109.u1->rFFFFFFFF;
			Top_109.u1->rFFFFFFFF = (real64) Top_109.u1[2];
			Top_109.u1[2] = (struct Eq_750) v35_139;
			Top_109.u1->rFFFFFFFF *= (real64) edi_126->r402136;
			Top_109.u1[2] = (struct Eq_750) (Top_109.u1[2] - (Top_109.u1)->rFFFFFFFF);
			real64 v36_145 = Top_109.u1->r0000;
			Top_109.u1->r0000 = (real64) Top_109.u1[1];
			Top_109.u1[1] = (struct Eq_750) v36_145;
			word16 di_148 = (word16) edi_126;
			word16 edi_16_16_329 = SLICE(edi_126, word16, 16);
			edi_126 = edi_330;
		} while (P);
		Top_109.u1->r0000 += (real64) g_w402132;
		Top_109.u1->r0000 /= (real64) g_w402134;
		Top_109.u1[2] = (struct Eq_750) (Top_109.u1[2] /64 (Top_109.u1)->r0000);
		Top_109.u1[1] = (struct Eq_750) (Top_109.u1[1] /64 (Top_109.u1)->r0000);
		ebx_112->t402136.u1 = (int32) Top_109.u1[1];
		int32 edi_162 = ebx_112->t402136.u1 *s 0x0140;
		ebx_112->t402136.u1 = (int32) Top_109.u1[2];
		int32 edi_165 = edi_162 + (ebx_112->t402136).u1;
		Eq_29 esi_178 = g_t402118.u0;
		(esi_178.u0 + 0x00007DA0)[edi_165] = (struct Eq_749) ((byte) (esi_178.u0 + 0x00007DA0)[edi_165].b0000 + (*((char *) g_t40211C + edx_174) >> 0x05));
		&Top_109.u1->r0000 = (word32) Top_109 + 3;
		do
		{
			++dx_183;
			dl_297 = (byte) dx_183;
			dh_311 = SLICE(dx_183, byte, 8);
			if (dx_183 != 0x00)
				goto l004010C6;
			bp_187 = -bp_187;
		} while (bp_187 < 0x00);
		ch_197 += 0x02;
	} while (P);
	word32 ecx_200;
	byte * esi_203 = g_t402118.u0 + 0x0500;
	word32 * edi_205 = (char *) g_t402100.u0 + 0x0500;
	for (ecx_200 = 0xFA00; ecx_200 != 0x00; --ecx_200)
	{
		uint8 al_209 = *esi_203;
		*esi_203 = 0x00;
		word32 * eax_215 = g_t402104.u0 + ((SEQ(eax_24_8_211, al_209) & 0xFF) << 0x02);
		*edi_205 = *eax_215;
		eax_24_8_211 = SLICE(eax_215, word24, 8);
		++esi_203;
		++edi_205;
	}
	GetClientRect(g_t4020CC, &g_t4020F0);
	StretchDIBits(g_t4020D0, 0x00, 0x00, g_dw4020F8, g_dw4020FC, 0x00, 0x00, 0x0140, 200, g_t402100.u0, (char *) &g_t0400 + 0x00401C6C, 0x00, 0x00CC0020);
}

// 004011F5: Register Eq_531 Win32CrtStartup()
Eq_531 Win32CrtStartup()
{
	Eq_2 eax_8 = GlobalAlloc(0x00, 1000000);
	if (eax_8 != 0x00)
	{
		g_t40210C.u0 = (byte *) eax_8;
		g_t402104.u0 = (byte *) eax_8;
		g_t402100.u0 = (word32) eax_8 + 2000;
		g_t40211C = (Eq_55) ((word32) eax_8 + 402000);
		g_t402118.u0 = (word32) eax_8 + 602000;
		g_t4020B4.u0 = (HINSTANCE) GetModuleHandleW(null);
		g_t4020B8 = LoadIconW(0x00, (WCHAR *) 0x7F00);
		Eq_599 eax_38 = LoadCursorW(0x00, (WCHAR *) 0x7F00);
		g_t4020BC = eax_38;
		if (SEQ(SLICE(eax_38, word16, 16), RegisterClassW((char *) &g_t0400 + 0x00401CA4)) != 0x00)
		{
			Eq_511 eax_76 = CreateWindowExW(0x00, (char *) &g_t0400 + 0x00401C00, (char *) &g_t0400 + 4201490, 0x10CF0000, 0x8000, 0x8000, 0x021C, 400, null, null, g_t4020B4.u0, null);
			if (eax_76 != null)
			{
				g_t4020CC = eax_76;
				g_t4020D0 = GetDC(eax_76);
				fn00401000();
				fn00401017();
				fn00401088();
				SetStretchBltMode(g_t4020D0, 0x04);
				while (true)
				{
					PeekMessageW(&g_t4020D4, null, 0x00, 0x00, 0x01);
					if (g_dw4020D8 == 0x12)
						break;
					TranslateMessage(&g_t4020D4);
					DispatchMessageW(&g_t4020D4);
					fn00401088();
					++g_dw402108;
				}
l0040132F:
				ReleaseDC(g_t4020CC, g_t4020D0);
				GlobalFree(g_t40210C.u0);
				ExitProcess(g_t4020DC);
			}
		}
	}
	MessageBoxW(null, (char *) &g_t0400 + 0x00401C4C, null, 0x10);
	goto l0040132F;
}

