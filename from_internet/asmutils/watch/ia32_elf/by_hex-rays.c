/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

void __noreturn start(); // weak
// char __usercall sub_804812B@<al>(_BYTE *@<esi>);

//-------------------------------------------------------------------------
// Data declarations

__int16 word_804813E = 23323; // weak
__int16 word_8048142 = 24951; // weak
__int16 word_80481FE = 30789; // weak


//----- (0804804C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __noreturn start()
{
  int v0; // eax
  _BYTE *v1; // ebx
  _DWORD *v2; // esi
  int v4; // eax
  int v5; // eax
  char *v6; // esi
  char v7; // al
  int v8; // eax
  int v9; // eax
  int v10; // eax
  _WORD *v11; // [esp-Ch] [ebp-Ch] BYREF
  _BYTE *v12; // [esp-8h] [ebp-8h]
  _BYTE *v13; // [esp-4h] [ebp-4h]

  if ( v11 )
  {
    v0 = sys_write(1, &word_804813E, 4u);
    v1 = v11;
    if ( *v11 == 28205 )
    {
      sub_804812B(v12);
      v1 = v13;
      goto LABEL_4;
    }
    if ( *(_DWORD *)v11 != 1852386605 )
    {
LABEL_4:
      v11 = v1;
      v2 = &v11;
      while ( *v2++ )
        ;
      while ( 1 )
      {
        __asm { int     80h; LINUX - sys_fork }
        v4 = sys_wait4(-1, 0, 0, 0);
        __asm { int     80h; LINUX - sys_nanosleep }
        v5 = sys_write(1, &word_804813E, 4u);
      }
    }
    v6 = (char *)v11;
    while ( 1 )
    {
      v7 = *v6++;
      if ( !v7 )
        break;
      if ( v7 == 61 )
      {
        sub_804812B(v6);
        v1 = v12;
        goto LABEL_4;
      }
    }
    v9 = sys_write(1, &word_80481FE, 0x12u);
  }
  else
  {
    v8 = sys_write(1, &word_8048142, 0xBCu);
  }
  v10 = sys_exit(255);
}
// 80480E7: positive sp value 14 has been found
// 804804C: using guessed type void __noreturn start();
// 804813E: using guessed type __int16 word_804813E;
// 8048142: using guessed type __int16 word_8048142;
// 80481FE: using guessed type __int16 word_80481FE;

//----- (0804812B) --------------------------------------------------------
char __usercall sub_804812B@<al>(_BYTE *a1@<esi>)
{
  int v1; // eax
  int i; // ebp

  v1 = 0;
  for ( i = 0; ; i = v1 + 10 * i )
  {
    LOBYTE(v1) = *a1++;
    if ( !(_BYTE)v1 )
      break;
    LOBYTE(v1) = v1 - 48;
  }
  return v1;
}

// nfuncs=2 queued=2 decompiled=2 lumina nreq=0 worse=0 better=0
// ALL OK, 2 function(s) have been successfully decompiled
