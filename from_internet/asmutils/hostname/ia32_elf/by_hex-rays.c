/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

void __noreturn start(); // weak

//-------------------------------------------------------------------------
// Data declarations

struct utsname utsbuf; // idb


//----- (0804804C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __noreturn start()
{
  _BOOL4 v0; // edi
  unsigned int v1; // esi
  int v2; // eax
  int v3; // eax
  char *nodename; // esi
  size_t v5; // edx
  char v6; // al
  int v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-Ch]
  const char *v10; // [esp-8h] [ebp-8h]
  const char *v11; // [esp-4h] [ebp-4h]

  v0 = *(_DWORD *)&v10[strlen(v10) - 8] != 1953722216;
  if ( v9 == 1 )
  {
    v3 = sys_newuname(&utsbuf);
    nodename = utsbuf.nodename;
    if ( v0 )
      nodename = utsbuf.__domainname;
    v5 = 0;
    do
    {
      v6 = *nodename++;
      ++v5;
    }
    while ( v6 );
    *(nodename - 1) = 10;
    v7 = sys_write(1, &nodename[-v5], v5);
    v2 = 0;
  }
  else
  {
    v1 = strlen(v11);
    if ( v0 )
      v2 = sys_setdomainname(v11, v1);
    else
      v2 = sys_sethostname(v11, v1);
  }
  v8 = sys_exit(v2);
}
// 8048063: positive sp value C has been found
// 8048053: variable 'v10' is possibly undefined
// 8048060: variable 'v9' is possibly undefined
// 8048063: variable 'v11' is possibly undefined
// 804804C: using guessed type void __noreturn start();

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
