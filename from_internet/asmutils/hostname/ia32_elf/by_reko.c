// subject_seg08048000.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0804804C: void fn0804804C(Stack word32 dwArg00, Stack (ptr32 Eq_3) dwArg04, Stack (ptr32 char) dwArg08)
void fn0804804C(word32 dwArg00, struct Eq_3 * dwArg04, char * dwArg08)
{
	ptr32 fp;
	word32 edi_25 = 0x00;
	struct Eq_3 * esi_11 = dwArg04;
	do
	{
		esi_11 = esi_137 + 1;
		esi_137 = esi_11;
	} while (esi_137->b0000 != 0x00);
	if (esi_11->dwFFFFFFF7 != 1953722216)
		edi_25 = 0x01;
	struct Eq_22 * esp_118;
	int32 eax_109;
	if (dwArg00 != 0x01)
	{
		char * esi_85 = dwArg08;
		do
		{
			esi_85 = esi_139 + 1;
			esi_139 = esi_85;
		} while (*esi_139 != 0x00);
		word32 esi_96 = esi_85 - dwArg08;
		if (edi_25 != 0x01)
			eax_109 = sys_sethostname(dwArg08, esi_96 - 0x01);
		else
			eax_109 = sys_setdomainname(dwArg08, esi_96 - 0x01);
		esp_118 = fp + 0x0C;
	}
	else
	{
		sys_uname(&g_t80480B9);
		struct Eq_32 * esi_125 = &g_t80480FA;
		if (edi_25 == 0x01)
			esi_125 = &g_t80481FE;
		size_t edx_49 = 0x00;
		do
		{
			esi_125 = esi_138 + 1;
			edx_49 = (Eq_64) ((word32) edx_49 + 1);
			esi_138 = esi_125;
		} while (esi_138->b0000 != 0x00);
		esi_125->bFFFFFFFF = 0x0A;
		sys_write(0x01, esi_125 - edx_49, edx_49);
		esp_118 = fp + 8;
		eax_109 = 0x00;
	}
	esp_118->dwFFFFFFFC = 0x01;
	sys_exit(eax_109);
}

Eq_29 g_t80480B9 = // 080480B9
	{
	};
Eq_32 g_t80480FA = // 080480FA
	{
		0x00,
		0x00,
	};
Eq_32 g_t80481FE = // 080481FE
	{
		0x00,
		0x00,
	};
