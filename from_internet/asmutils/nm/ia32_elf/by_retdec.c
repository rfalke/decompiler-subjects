//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
//

#include <stdbool.h>
#include <stdint.h>

// ------------------- Function Prototypes --------------------

int32_t entry_point(int32_t a1, int32_t a2);
int32_t function_8048211(void);
int32_t function_804822f(void);
int32_t function_8048260(void);

// --------------------- Global Variables ---------------------

int32_t g1 = -0x7c50c280; // 0x8048165
int32_t g2 = -0x7c30fa39; // 0x8048274
char g3 = 0; // 0x80483af
char * g4; // 0x80483b3
int32_t g5 = 0; // 0x80483b7
int32_t g6 = 0; // 0x80483bb
int32_t g7 = 0; // 0x80483bf

// ------------------------ Functions -------------------------

// Address range: 0x8048097 - 0x8048211
int32_t entry_point(int32_t a1, int32_t a2) {
    int32_t v1 = a2; // 0x8048098
    while (*(char *)v1 != 0) {
        // 0x8048099
        bool v2; // 0x8048097
        v1 += (v2 ? -1 : 1);
    }
    // 0x804809e
    g7 = &g1;
    if (*(int16_t *)(v1 - 3) != 0x6d6e) {
        // 0x80480b0
        g7 = &g2;
        __asm_int(128);
    }
    // 0x80480ce
    int32_t v3; // 0x8048097
    int32_t v4 = &v3; // 0x8048098
    int32_t v5 = a1 - 1; // 0x80480ce
    g3 = v5;
    int32_t v6 = (int32_t)"a.out"; // 0x80480d5
    int32_t v7 = v4; // 0x80480d5
    int32_t v8 = v4; // 0x80480d5
    if (v5 != 0) {
        goto lab_0x8048151;
    } else {
        goto lab_0x80480e0;
    }
  lab_0x8048151:;
    int32_t * v9 = (int32_t *)v8; // 0x8048151
    v6 = *v9;
    v7 = v8 + 4;
    if (v6 == 0) {
        // 0x804815a
        *v9 = 1;
        __asm_int(128);
        int32_t v10 = 1; // 0x804816c
        if (g3 >= 2) {
            // 0x804816e
            function_8048260();
            v10 = function_804822f();
        }
        int32_t v11 = v10;
        int32_t result; // 0x8048186
        while (true) {
            int32_t v12 = v11 - 40 + *(int32_t *)(v11 + 32);
            result = v12 + 40;
            int32_t v13 = (int32_t)*(int16_t *)(v11 + 48) - 1; // 0x8048189
            while (v13 != 0) {
                // 0x804818d
                if (*(char *)(v12 + 44) == 2) {
                    // break -> 0x8048193
                    break;
                }
                v12 = result;
                result = v12 + 40;
                v13--;
            }
            return result;
        }
        // 0x804818c
        return result;
    }
    goto lab_0x80480e0;
  lab_0x80480e0:
    // 0x80480e0
    v8 = v7;
    g4 = (char *)v6;
    int32_t * v14 = (int32_t *)(v8 - 4); // 0x80480e8
    *v14 = 5;
    __asm_int(128);
    g5 = 5;
    *v14 = 19;
    __asm_int(128);
    *v14 = 1;
    __asm_int(128);
    g6 = 192;
    *v14 = 6;
    __asm_int(128);
    goto lab_0x8048151;
}

// Address range: 0x8048211 - 0x804822f
int32_t function_8048211(void) {
    int32_t v1 = 8; // 0x8048215
    int32_t v2; // 0x8048211
    int32_t v3 = v2 + 7; // 0x8048215
    int32_t v4; // 0x8048211
    int32_t v5 = v4 % 16 | 48; // 0x804821e
    int32_t v6 = (char)v5 < 58 ? v5 : v5 + 39;
    int32_t v7; // 0x8048211
    int32_t result = v6 | v7 & -256;
    *(char *)v3 = (char)v6;
    v1--;
    v4 /= 16;
    v3--;
    while (v1 != 0) {
        // 0x804821a
        v5 = v4 % 16 | 48;
        v6 = (char)v5 < 58 ? v5 : v5 + 39;
        result = v6 | result & -256;
        *(char *)v3 = (char)v6;
        v1--;
        v4 /= 16;
        v3--;
    }
    // 0x804822d
    return result;
}

// Address range: 0x804822f - 0x8048260
int32_t function_804822f(void) {
    // 0x804822f
    bool v1; // 0x804822f
    int32_t v2 = v1 ? -1 : 1;
    int32_t v3 = -1; // 0x804823d
    int32_t v4 = (int32_t)g4;
    int32_t v5 = v4; // 0x804823d
    while (v3 != 0) {
        int32_t v6 = v4 + v2; // 0x804823d
        v3--;
        v5 = v6;
        if (*(char *)v4 == 0) {
            // break -> 
            break;
        }
        v4 = v6;
        v5 = v4;
    }
    int32_t result; // 0x804822f
    char v7 = result; // 0x8048241
    int32_t v8 = v5; // 0x8048243
    if (v7 != 0) {
        int32_t v9 = v5 - 1; // 0x8048245
        *(char *)v9 = v7;
        v8 = v9 + v2;
    }
    // 0x8048249
    __asm_int(128);
    *(char *)(v8 - 1) = 0;
    function_8048260();
    return result;
}

// Address range: 0x8048260 - 0x8048273
int32_t function_8048260(void) {
    // 0x8048260
    __asm_int(128);
    int32_t result; // 0x8048260
    return result;
}

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: gcc (4.4.3)
// Detected functions: 4

