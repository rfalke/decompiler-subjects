/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall __noreturn start(int@<eax>);
// int __usercall sub_8048073@<eax>(_BYTE *@<esi>);


//----- (0804804C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn start(int a1@<eax>)
{
  mode_t v1; // ecx
  int v2; // eax
  unsigned int v3; // [esp-10h] [ebp-10h]
  _BYTE *v4; // [esp-8h] [ebp-8h]
  const char *v5; // [esp-4h] [ebp-4h]

  if ( v3 >= 3 )
  {
    a1 = sub_8048073(v4);
    if ( a1 != -1 )
    {
      v1 = a1;
      while ( v5 )
        a1 = sys_chmod(v5, v1);
    }
  }
  v2 = sys_exit(a1);
}
// 8048061: positive sp value 10 has been found
// 8048050: variable 'v3' is possibly undefined
// 8048054: variable 'v4' is possibly undefined
// 8048063: variable 'v5' is possibly undefined
// 8048068: variable 'v1' is possibly undefined

//----- (08048073) --------------------------------------------------------
int __usercall sub_8048073@<eax>(_BYTE *a1@<esi>)
{
  _BYTE *v1; // edx
  int v2; // ecx
  int result; // eax
  unsigned __int8 v4; // cl
  bool v5; // cf

  v1 = a1;
  v2 = 0;
  result = 0;
  while ( 1 )
  {
    v4 = *a1;
    if ( !*a1 )
      break;
    v5 = v4 < 0x30u;
    LOBYTE(v2) = v4 - 48;
    if ( v5 || (unsigned __int8)v2 > 7u )
      return -1;
    LOWORD(v1) = (unsigned __int16)result >> 13;
    LOWORD(result) = 8 * result;
    result += v2;
    ++a1;
  }
  if ( v1 != a1 )
    return result;
  return -1;
}

// nfuncs=2 queued=2 decompiled=2 lumina nreq=0 worse=0 better=0
// ALL OK, 2 function(s) have been successfully decompiled
