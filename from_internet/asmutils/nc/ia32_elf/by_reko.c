// subject_seg08048000.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0804804C: void fn0804804C(Stack (ptr32 byte) dwArg08, Stack (ptr32 byte) dwArg0C, Stack (ptr32 byte) dwArg10)
void fn0804804C(byte * dwArg08, byte * dwArg0C, byte * dwArg10)
{
	byte * esi_110 = dwArg08;
	if (dwArg08 != null)
	{
		g_dw804816C = 0x02;
		if (*dwArg08 == 0x6C2D)
		{
			struct Eq_23 * ebx_22 = fn0804813D();
			word32 esi_236;
			uint32 edx_30 = (uint32) fn08048157(dwArg0C, out esi_236);
			ebx_22->b0002 = SLICE(edx_30, byte, 8);
			ebx_22->b0003 = (byte) edx_30;
			__syscall(0x80);
			__syscall(0x80);
			__syscall(0x80);
			esi_110 = dwArg10;
			if (dwArg10 == null)
				goto l08048113;
		}
		fn0804813D();
		struct Eq_24 * ebx_104 = g_a8048170;
		word32 ecx_108;
		for (ecx_108 = 0x04; ecx_108 != 0x00; --ecx_108)
		{
			ebx_104->b0000 = (byte) fn08048157(esi_110, out esi_110);
			++ebx_104;
		}
		word32 esi_237;
		uint32 edx_127 = (uint32) fn08048157((byte *) 0x01, out esi_237);
		ebx_104->bFFFFFFFA = SLICE(edx_127, byte, 8);
		ebx_104->bFFFFFFFB = (byte) edx_127;
		__syscall(0x80);
	}
l08048113:
	while (true)
	{
		__syscall(0x80);
		__syscall(0x80);
	}
}

// 08048138: void fn08048138()
// Called from:
//      fn0804804C
//      fn0804813D
void fn08048138()
{
	__syscall(0x80);
	fn0804813D();
}

// 0804813D: Register word32 fn0804813D()
// Called from:
//      fn0804804C
//      fn08048138
word32 fn0804813D()
{
	__syscall(0x80);
	return;
}

// 08048157: Register word16 fn08048157(Register (ptr32 byte) esi, Register out (ptr32 byte) esiOut)
// Called from:
//      fn0804804C
word16 fn08048157(byte * esi, byte & esiOut)
{
	ui32 edx_20 = 0x00;
	while (true)
	{
		cu8 al_12 = *esi;
		++esi;
		uint32 eax_24 = (uint32) (al_12 - 0x30);
		if (al_12 < 0x30)
			break;
		edx_20 = edx_20 * 0x0A + eax_24;
	}
	esiOut = esi;
	return (word16) edx_20;
}

byte g_a804816A[] = // 0804816A
	{
	};
byte g_a804816B[] = // 0804816B
	{
	};
word32 g_dw804816C = 0x00; // 0804816C
byte g_a8048170[] = // 08048170
	{
	};
