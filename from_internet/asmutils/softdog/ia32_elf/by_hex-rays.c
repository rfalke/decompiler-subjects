/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

void __fastcall __noreturn start(int, mode_t);

//-------------------------------------------------------------------------
// Data declarations

char addr[] = "/dev/watchdog"; // idb
struct timespec req; // idb


//----- (0804804C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __fastcall __noreturn start(int a1, mode_t a2)
{
  __time_t v2; // ebp
  unsigned __int8 *v3; // esi
  int v4; // eax
  unsigned int i; // ebx
  unsigned __int8 v6; // al
  bool v7; // cf
  int v8; // eax
  int v9; // [esp-Ch] [ebp-Ch]
  unsigned __int8 *v10; // [esp-4h] [ebp-4h]

  v2 = 10;
  if ( v9 != 1 )
  {
    v3 = v10;
    v4 = 0;
    for ( i = 0; ; i = v4 + 10 * i )
    {
      v6 = *v3++;
      v7 = v6 < 0x30u;
      LOBYTE(v4) = v6 - 48;
      if ( v7 || (unsigned __int8)v4 > 9u )
        break;
    }
    if ( i )
    {
      if ( i >= 0x3C )
        i = 60;
      v2 = i;
    }
  }
  req.tv_sec = v2;
  if ( sys_open(addr, 1, a2) >= 0 )
    __asm { int     80h; LINUX - sys_fork }
  v8 = sys_exit((int)addr);
}
// 8048055: positive sp value C has been found
// 8048051: variable 'v9' is possibly undefined
// 8048054: variable 'v10' is possibly undefined

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
