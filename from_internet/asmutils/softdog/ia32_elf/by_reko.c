// subject_seg08048000.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0804804C: void fn0804804C(Stack word32 dwArg00, Stack (ptr32 byte) dwArg08)
void fn0804804C(word32 dwArg00, byte * dwArg08)
{
	Eq_4 ebp_45 = 0x0A;
	struct Eq_6 * esp_15 = fp + 4;
	if (dwArg00 != 0x01)
	{
		byte * esi_14 = dwArg08;
		esp_15 = fp + 0x0C;
		Eq_4 ebx_17 = 0x00;
		while (true)
		{
			cu8 al_22 = *esi_14;
			++esi_14;
			if (al_22 < 0x30)
				break;
			uint32 eax_96 = (uint32) (al_22 - 0x30);
			if (al_22 > 0x39)
				break;
			ebx_17 = ebx_17 *s 0x0A + eax_96;
		}
		Eq_4 ebx_31 = ebx_17;
		if (ebx_17 != 0x00)
		{
			esp_15 = fp + 0x0C;
			if (ebx_17 >= 0x3C)
				ebx_31.u0 = 0x3C;
			ebp_45 = ebx_31;
		}
	}
	g_t80480CB = ebp_45;
	int32 * esp_52 = esp_15 - 4;
	*esp_52 = 0x01;
	*esp_52 = 0x05;
	int32 eax_59 = *esp_52;
	__syscall(0x80);
	if (eax_59 >= 0x00)
	{
		*esp_52 = 0x02;
		int32 eax_67 = *esp_52;
		__syscall(0x80);
		if (eax_67 == 0x00)
		{
l0804809F:
			while (true)
			{
				word32 * esp_79 = esp_15 - 4;
				*esp_79 = 0x01;
				*esp_79 = 0x04;
				__syscall(0x80);
				__syscall(0x80);
			}
		}
	}
	esp_15->dwFFFFFFFC = 0x01;
	__syscall(0x80);
	goto l0804809F;
}

Eq_4 g_t80480CB = // 080480CB
	{
		0
	};
