/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

void __noreturn start(); // weak

//-------------------------------------------------------------------------
// Data declarations

__int16 word_80480D2; // weak
int dword_80480E6; // weak


//----- (0804804C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __noreturn start()
{
  int v0; // eax
  char *v1; // esi
  __int16 *v2; // edi
  char v3; // al
  __int16 *v4; // edi
  unsigned int v5; // ebp
  int v6; // ecx
  unsigned int v7; // eax
  int v8; // ecx
  unsigned int v9; // et2
  char v10; // dl
  int v11; // eax
  int v12; // [esp-Ch] [ebp-Ch]
  int v13; // [esp-8h] [ebp-8h]
  char *v14; // [esp-4h] [ebp-4h]

  v0 = v12;
  v1 = v14;
  if ( v14 )
  {
    __asm { int     80h; LINUX - sys_socket }
    v2 = &word_80480D2;
    do
    {
      v3 = *v1++;
      *(_BYTE *)v2 = v3;
      v2 = (__int16 *)((char *)v2 + 1);
    }
    while ( v3 );
    v0 = sys_ioctl(102, 35093);
    if ( v0 >= 0 )
    {
      v4 = &word_80480D2;
      v5 = dword_80480E6;
      v6 = 4;
      do
      {
        LOBYTE(v7) = v5;
        v5 >>= 8;
        v13 = v6;
        v7 = (unsigned __int8)v7;
        v8 = 0;
        do
        {
          v9 = v7 % 0xA;
          v7 /= 0xAu;
          v10 = v9 + 48;
          ++v8;
        }
        while ( v7 );
        do
        {
          *(_BYTE *)v4 = v10;
          v4 = (__int16 *)((char *)v4 + 1);
          --v8;
        }
        while ( v8 );
        *(_BYTE *)v4 = 46;
        v4 = (__int16 *)((char *)v4 + 1);
        v6 = v13 - 1;
      }
      while ( v13 != 1 );
      *((_BYTE *)v4 - 1) = 10;
      v0 = sys_write(1, &word_80480D2, (char *)v4 - (char *)&word_80480D2);
    }
  }
  v11 = sys_exit(v0);
}
// 804804F: positive sp value C has been found
// 804804C: variable 'v12' is possibly undefined
// 804804E: variable 'v14' is possibly undefined
// 804804C: using guessed type void __noreturn start();
// 80480D2: using guessed type __int16 word_80480D2;
// 80480E6: using guessed type int dword_80480E6;

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
