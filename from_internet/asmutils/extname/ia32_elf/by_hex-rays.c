/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall __noreturn start(int _EAX@<eax>, int, int);

//-------------------------------------------------------------------------
// Data declarations

char byte_80480D7; // weak


//----- (0804804C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn start(int _EAX@<eax>, int a2, int a3)
{
  bool v3; // sf
  int v4; // ebx
  int v6; // eax
  unsigned int v7; // ecx
  char *v8; // edi
  bool v9; // zf
  unsigned int v10; // edx
  unsigned int v11; // ecx
  char *v12; // edi
  bool v13; // zf
  unsigned int v14; // edx
  int v15; // eax
  unsigned int v16; // edx
  char *v17; // ecx
  int v18; // eax
  int v19; // eax
  int v20; // [esp-10h] [ebp-10h]
  int v21; // [esp-Ch] [ebp-Ch]
  char *v22; // [esp-8h] [ebp-8h]
  int *v23; // [esp-4h] [ebp-4h]

  v4 = v20 - 2;
  v3 = v20 - 2 < 0;
  if ( v20 - 2 >= 0 )
  {
    _EAX = (int)v22;
    if ( *v22 != 45 )
      goto LABEL_6;
    v22 = &byte_80480D7;
    v21 = v20 - 2;
    v4 = 0;
    _EAX = sys_read(0, &byte_80480D7, 0xFFFu);
    v3 = _EAX < 0;
  }
  if ( v3 )
    goto LABEL_21;
  v4 = v21;
LABEL_6:
  BYTE1(_EAX) = 46;
  if ( v4 - 1 >= 0 )
  {
    _EAX = *v23;
    if ( BYTE1(_EAX) != (_BYTE)_EAX )
      BYTE1(_EAX) = *v23;
  }
  __asm { rcl     eax, 1 }
  v6 = __ROR4__(_EAX, 1);
  v7 = strlen(v22) + 1;
  v8 = &v22[v7 - 1];
  v10 = v7 - 1;
  v9 = v7 == 1;
  do
  {
    if ( !v7 )
      break;
    v9 = *v8-- == 47;
    --v7;
  }
  while ( !v9 );
  if ( !v9 )
    --v8;
  v11 = v10 - v7;
  LOBYTE(v6) = BYTE1(v6);
  v12 = &v8[v11 + 1];
  v14 = v11 - 1;
  v13 = v11 == 1;
  do
  {
    if ( !v11 )
      break;
    v13 = *v12++ == BYTE1(v6);
    --v11;
  }
  while ( !v13 );
  if ( v13 )
    goto LABEL_19;
  do
  {
    v11 = v14 + 1;
LABEL_19:
    ;
  }
  while ( !v11 );
  v15 = v6 >> 31;
  v16 = v14 - (v11 - 1 - v15);
  v17 = &v12[-v15 + 1];
  v17[v16] = 10;
  v18 = sys_write(1, v17, v16 + 1);
  v4 = 0;
LABEL_21:
  v19 = sys_exit(v4);
}
// 804807B: positive sp value 10 has been found
// 804804E: variable 'v20' is possibly undefined
// 8048052: variable 'v22' is possibly undefined
// 8048073: variable 'v21' is possibly undefined
// 804807B: variable 'v23' is possibly undefined
// 80480D7: using guessed type char byte_80480D7;

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
