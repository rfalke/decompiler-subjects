/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall __noreturn start(unsigned __int64@<edx:eax>, char@<ch>);

//-------------------------------------------------------------------------
// Data declarations

char byte_804804C[2] = { '1', '\0' }; // weak
struct timespec req; // idb


//----- (0804804E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn start(unsigned __int64 a1@<edx:eax>, char a2@<ch>)
{
  char *v2; // esi
  char *v3; // esi
  bool v4; // zf
  int i; // ebx
  unsigned __int8 v6; // al
  bool v7; // cf
  int v8; // ebx
  unsigned __int64 v9; // rt2
  char v10; // cl
  int v11; // eax
  char *v12; // [esp-Ch] [ebp-Ch]
  const char *v13; // [esp-8h] [ebp-8h]
  char *v14; // [esp-4h] [ebp-4h]

  if ( v13[strlen(v13) - 6] == 117 )
  {
    a2 = 1;
    v2 = v14;
    if ( !v14 )
      v2 = byte_804804C;
    v12 = v2;
  }
  while ( 1 )
  {
    v3 = v12;
    v4 = v12 == 0;
    if ( !v12 )
      goto LABEL_12;
    a1 = 0LL;
    for ( i = 0; ; i = a1 + 10 * i )
    {
      v6 = *v3++;
      v7 = v6 < 0x30u;
      LOBYTE(a1) = v6 - 48;
      if ( v7 || (unsigned __int8)a1 > 9u )
        break;
      HIDWORD(a1) = (a1 + (unsigned int)(10 * i)) >> 32;
    }
    LODWORD(a1) = i;
    if ( !HIDWORD(a1) )
      break;
LABEL_13:
    v8 = 1;
    if ( a2 )
    {
      v9 = a1 % 0xF4240;
      LODWORD(a1) = a1 / 0xF4240;
      HIDWORD(a1) = 1000 * v9;
      goto LABEL_23;
    }
    v10 = *(v3 - 1);
    if ( !v10 )
      goto LABEL_22;
    if ( v10 == 115 )
      goto LABEL_23;
    v8 = 60;
    if ( v10 == 109 || (v8 = 3600, v10 == 104) || (v8 = 86400, v10 == 100) )
    {
LABEL_22:
      a1 = (unsigned int)v8 * (unsigned __int64)(unsigned int)a1;
    }
    else
    {
      if ( v10 != 110 )
LABEL_24:
        v11 = sys_exit(a1);
      a1 = __PAIR64__(a1, HIDWORD(a1));
    }
LABEL_23:
    req = (struct timespec)a1;
    a2 = 0;
    LODWORD(a1) = 162;
    __asm { int     80h; LINUX - sys_nanosleep }
  }
  v4 = i == 0;
LABEL_12:
  if ( v4 )
    goto LABEL_24;
  goto LABEL_13;
}
// 804805E: positive sp value C has been found
// 8048053: variable 'v13' is possibly undefined
// 804805D: variable 'v14' is possibly undefined
// 804806B: variable 'v12' is possibly undefined
// 80480A1: variable 'a1' is possibly undefined

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
