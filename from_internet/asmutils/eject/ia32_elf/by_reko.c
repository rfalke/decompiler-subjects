// subject_seg08048000.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0804804C: void fn0804804C(Stack word32 dwArg00, Stack (ptr32 Eq_3) dwArg04, Stack (ptr32 word32) dwArg08, Stack (ptr32 word32) dwArg0C)
void fn0804804C(word32 dwArg00, struct Eq_3 * dwArg04, word32 * dwArg08, word32 * dwArg0C)
{
	struct Eq_6 * esp_43 = fp + 8;
	word32 * ebx_42 = &g_dw804810D;
	struct Eq_3 * edi_16 = dwArg04;
	word32 ecx_13 = ~0x00;
	while (ecx_13 != 0x00)
	{
		++edi_16;
		--ecx_13;
		if (edi_16->b0000 != 0x00)
			break;
	}
	g_b804812F = (int8) (edi_16->dwFFFFFFFC != 0x00646363);
	byte * edi_28 = &g_b804812F;
	word32 ecx_35 = 0x08048111;
	word32 edx_123 = 0x0804811C;
	word32 eax_37 = dwArg00 - 0x01;
	if (dwArg00 != 0x01)
	{
		ebx_42 = dwArg08;
		esp_43 = fp + 0x0C;
		if (*dwArg08 == 0x6463632D || g_b804812F != 0x00)
		{
			g_b804812F = 0x00;
			eax_37 = dwArg00 - 0x02;
			ebx_42 = &g_dw804810D;
			if (dwArg00 == 0x02)
				goto l0804809D;
			ebx_42 = dwArg0C;
			esp_43 = fp + 16;
		}
		word32 eax_61 = eax_37 - 0x01;
		if (eax_61 != 0x00)
		{
			ecx_35 = esp_43->dw0000;
			esp_43 = (struct Eq_6 *) &esp_43->ptr0004;
			if (eax_61 != 0x01)
			{
				edx_123 = esp_43->dw0000;
				esp_43 = (struct Eq_6 *) &esp_43->ptr0004;
				if (eax_61 != 0x02)
				{
					edi_28 = esp_43->ptr0004;
					esp_43 = (struct Eq_6 *) ((char *) &esp_43->ptr0004 + 4);
				}
			}
		}
	}
l0804809D:
	struct Eq_44 * esp_79 = esp_43 - 4;
	esp_79->dw0000 = ecx_35;
	esp_79->ptrFFFFFFFC = ebx_42;
	if (*edi_28 == 0x00)
	{
		esp_79->dwFFFFFFF8 = 22;
		__syscall(0x80);
	}
	ptr32 esp_114;
	int32 eax_113;
	struct Eq_103 * esp_99 = esp_43 - 8;
	esp_99->dwFFFFFFFC = 0x05;
	int32 eax_102 = esp_99->dwFFFFFFFC;
	__syscall(0x80);
	esp_99->dwFFFFFFFC = eax_102;
	if (eax_102 >= 0x00)
	{
		esp_99->dwFFFFFFF8 = 0x36;
		eax_113 = esp_99->dwFFFFFFF8;
		__syscall(0x80);
		esp_114 = esp_99 - 4;
		if (*edi_28 != 0x00)
		{
l08048100:
			Eq_169 CZ_186 = SLICE(cond(eax_113), bool, 2);
			if (eax_113 >= 0x00)
				CZ_186.u0 = SLICE(cond(0x00), bool, 2);
			union Eq_208 * esp_180 = esp_114 - 4;
			*esp_180 = 0x01;
			Eq_208 al_184 = *esp_180;
			__syscall(0x80);
			struct Eq_227 * edx_192;
			struct Eq_228 * ecx_193;
			word32 ebx_194;
			word32 * edi_195;
			ui8 * eax_196;
			ui32 esi_197;
			fn08048141();
			word16 bx_199 = (word16) ebx_194;
			word16 dx_201 = (word16) edx_192;
			byte al_204 = (byte) eax_196;
			byte ch_209 = SLICE(ecx_193, byte, 8);
			return;
		}
		esp_99->dwFFFFFFF8 = eax_102;
		esp_99->dwFFFFFFF4 = edx_123;
		esp_99->dwFFFFFFF0 = 0x01;
		esp_99->dwFFFFFFF0 = 0x04;
		__syscall(0x80);
		esp_99->dwFFFFFFF0 = 0x03;
		__syscall(0x80);
		esp_99->dwFFFFFFF8 = 0x36;
		__syscall(0x80);
	}
	struct Eq_131 * esp_153 = esp_43 - 0x0C;
	esp_153->dw0008 = esp_153->dw0000;
	esp_153->dw0004 = 0x15;
	__syscall(0x80);
	eax_113 = esp_153->dw0008;
	esp_114 = &esp_153->dw0008 + 1;
	goto l08048100;
}

word32 g_dw804810D = 0x7665642F; // 0804810D
int8 g_b804812F = 0; // 0804812F
