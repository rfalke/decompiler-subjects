//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
//

#include <stdbool.h>
#include <stdint.h>

// ------------------- Function Prototypes --------------------

int32_t entry_point(int32_t a1, int32_t a2, int32_t a3, int32_t a4);

// --------------------- Global Variables ---------------------

char * g1; // 0x804812f

// ------------------------ Functions -------------------------

// Address range: 0x804804c - 0x804812d
int32_t entry_point(int32_t a1, int32_t a2, int32_t a3, int32_t a4) {
    int32_t v1 = a4;
    int32_t v2 = a3;
    int32_t v3 = -1; // 0x804805a
    int32_t v4 = a2;
    int32_t v5 = v4; // 0x804805a
    while (v3 != 0) {
        bool v6; // 0x804804c
        int32_t v7 = v4 + (v6 ? -1 : 1); // 0x804805a
        v3--;
        v5 = v7;
        if (*(char *)v4 == 0) {
            // break -> 
            break;
        }
        v4 = v7;
        v5 = v4;
    }
    int32_t v8 = *(int32_t *)(v5 - 4); // 0x804805e
    *(char *)&g1 = (char)(v8 != 0x646363);
    int32_t v9 = a1 - 1; // 0x8048077
    int32_t v10 = (int32_t)"/cdrom"; // 0x8048078
    int32_t v11 = (int32_t)"iso9660"; // 0x8048078
    int32_t v12 = (int32_t)"/dev/cdrom"; // 0x8048078
    int32_t v13 = &v2; // 0x8048078
    int32_t v14 = (int32_t)&g1; // 0x8048078
    int32_t v15; // 0x804804c
    int32_t v16; // 0x804804c
    int32_t v17; // 0x804804c
    if (v9 == 0) {
        goto lab_0x804809d;
    } else {
        int32_t v18 = &v1; // 0x804807a
        v15 = v9;
        v16 = a3;
        v17 = v18;
        if (v8 == 0x646363 == (*(int32_t *)a3 != 0x6463632d)) {
            goto lab_0x8048091;
        } else {
            // 0x8048088
            *(char *)&g1 = 0;
            int32_t v19 = a1 - 2; // 0x804808b
            v10 = (int32_t)"/cdrom";
            v11 = (int32_t)"iso9660";
            v12 = (int32_t)"/dev/cdrom";
            v13 = v18;
            v14 = (int32_t)&g1;
            if (v19 == 0) {
                goto lab_0x804809d;
            } else {
                // 0x8048090
                v15 = v19;
                v16 = a4;
                int32_t v20; // bp+16, 0x804804c
                v17 = &v20;
                goto lab_0x8048091;
            }
        }
    }
  lab_0x804809d:;
    int32_t * v21 = (int32_t *)(v13 - 4);
    *v21 = v10;
    int32_t * v22 = (int32_t *)(v13 - 8); // 0x804809e
    *v22 = v12;
    char * v23 = (char *)v14; // 0x804809f
    int32_t v24 = v13 - 12;
    int32_t * v25 = (int32_t *)v24;
    if (*v23 == 0) {
        // 0x80480a4
        *v25 = 22;
        __asm_int(128);
    }
    // 0x80480a9
    *v25 = 5;
    __asm_int(128);
    *v25 = 5;
    int32_t * v26 = (int32_t *)(v13 - 16); // 0x80480be
    *v26 = 54;
    __asm_int(128);
    int32_t * v27 = v26; // 0x80480c6
    int32_t v28 = 0x5309; // 0x80480c6
    int32_t v29 = v11; // 0x80480c6
    int32_t v30 = v24; // 0x80480c6
    int32_t v31 = (int32_t)"/dev/cdrom"; // 0x80480c6
    if (*v23 == 0) {
        // 0x80480c8
        *v26 = 5;
        int32_t * v32 = (int32_t *)(v13 - 20); // 0x80480c9
        *v32 = v11;
        int32_t * v33 = (int32_t *)(v13 - 24); // 0x80480d3
        *v33 = 4;
        __asm_int(128);
        *v33 = 3;
        __asm_int(128);
        *v26 = 54;
        __asm_int(128);
        *v21 = *v25;
        *v22 = 21;
        __asm_int(128);
        v27 = v21;
        v28 = *v21;
        v29 = *v32;
        v30 = v13;
        v31 = -0x3f12ffff;
    }
    // 0x8048100
    *v27 = 1;
    __asm_int(128);
    __asm_arpl(*(int16_t *)(v29 + 111 + 2 * v31), (int16_t)v30);
    int16_t v34 = v29; // 0x8048116
    *(int32_t *)v14 = __asm_insd(v34);
    *(char *)1 = *(char *)1 + 2;
    char * v35 = (char *)(v28 + 115); // 0x804811b
    *v35 = *v35 + (char)(v28 / 256);
    __asm_outsd(v34, *(int32_t *)v31);
    *(char *)1 = *(char *)1 ^ 1;
    __asm_outsb(v34, *(char *)v31);
    return 1;
  lab_0x8048091:
    // 0x8048091
    v10 = (int32_t)"/cdrom";
    v11 = (int32_t)"iso9660";
    v12 = v16;
    v13 = v17;
    v14 = (int32_t)&g1;
    if (v15 != 1) {
        int32_t v36 = *(int32_t *)v17; // 0x8048094
        int32_t v37 = v17 + 4; // 0x8048094
        int32_t v38 = v15 - 2; // 0x8048095
        v10 = v36;
        v11 = (int32_t)"iso9660";
        v12 = v16;
        v13 = v37;
        v14 = (int32_t)&g1;
        if (v38 != 0) {
            int32_t v39 = *(int32_t *)v37; // 0x8048098
            int32_t v40 = v17 + 8; // 0x8048098
            v10 = v36;
            v11 = v39;
            v12 = v16;
            v13 = v40;
            v14 = (int32_t)&g1;
            if (v38 != 1) {
                // 0x804809c
                v10 = v36;
                v11 = v39;
                v12 = v16;
                v13 = v17 + 12;
                v14 = *(int32_t *)v40;
            }
        }
    }
    goto lab_0x804809d;
}

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: gcc (4.7.2)
// Detected functions: 1

