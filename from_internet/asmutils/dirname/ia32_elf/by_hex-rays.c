/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall __noreturn start(int@<ebx>);
// void __usercall sub_80480A5(int@<edi>);
// void __usercall sub_80480B1(int@<edx>, _BYTE *@<edi>);

//-------------------------------------------------------------------------
// Data declarations

char byte_80480A3 = '.'; // weak


//----- (0804804C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn start(int a1@<ebx>)
{
  int v1; // edx
  int v2; // edx
  bool v3; // zf
  _BYTE *v4; // edi
  int v5; // ecx
  int v6; // edx
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // [esp-Ch] [ebp-Ch]
  _BYTE *v12; // [esp-4h] [ebp-4h]

  if ( v11 == 2 )
  {
    sub_80480A5((int)v12);
    sub_80480B1(v1, v12);
    v4 = &v12[v2 - 1];
    v3 = &v12[v2] == (_BYTE *)1;
    v5 = v2;
    do
    {
      if ( !v5 )
        break;
      v3 = *v4++ == 47;
      --v5;
    }
    while ( !v3 );
    if ( v3 )
    {
      if ( !v5 )
        v5 = 1;
      sub_80480B1(v5, v12);
      v12[v6] = 10;
      v7 = sys_write(1, v12, v6 + 1);
      v8 = sys_exit(1);
    }
    a1 = 1;
    v9 = sys_write(1, &byte_80480A3, 2u);
  }
  v10 = sys_exit(a1);
}
// 8048053: positive sp value C has been found
// 804804F: variable 'v11' is possibly undefined
// 8048053: variable 'v12' is possibly undefined
// 8048058: variable 'v1' is possibly undefined
// 804805E: variable 'v2' is possibly undefined
// 8048078: variable 'v6' is possibly undefined
// 80480A3: using guessed type char byte_80480A3;

//----- (080480A5) --------------------------------------------------------
void __usercall sub_80480A5(int a1@<edi>)
{
  _BYTE *v1; // edx

  v1 = (_BYTE *)(a1 - 1);
  do
    ++v1;
  while ( *v1 );
}

//----- (080480B1) --------------------------------------------------------
void __usercall sub_80480B1(int a1@<edx>, _BYTE *a2@<edi>)
{
  _BYTE *v2; // edx
  _BYTE *v5; // edi

  v2 = a2;
  v5 = &a2[a1 - 1];
  do
  {
    if ( v5 == v2 )
      break;
  }
  while ( *v5++ == 47 );
}

// nfuncs=3 queued=3 decompiled=3 lumina nreq=0 worse=0 better=0
// ALL OK, 3 function(s) have been successfully decompiled
