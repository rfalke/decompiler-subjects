/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

void __noreturn start(); // weak
// int __usercall sub_80480BE@<eax>(_BYTE *@<esi>);

//-------------------------------------------------------------------------
// Data declarations

int dword_804804C[6] = { 1734439797, 1914714725, 1667853925, 1919950949, 1769107305, 1881176436 }; // weak
int who; // idb
int prio; // idb


//----- (08048067) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __noreturn start()
{
  _BYTE *v0; // esi
  int v1; // eax
  int v2; // ebx
  int v3; // eax
  int v4; // eax
  int v5; // [esp-14h] [ebp-14h]
  _BYTE *v6; // [esp-Ch] [ebp-Ch]
  _BYTE *v7; // [esp-8h] [ebp-8h]
  _BYTE *v8; // [esp-4h] [ebp-4h]

  if ( v5 == 1 )
  {
    v4 = sys_write(1, dword_804804C, 0x1Bu);
  }
  else if ( v6 )
  {
    prio = sub_80480BE(v6);
    v0 = v7;
    if ( v7 )
    {
      do
      {
        who = sub_80480BE(v0);
        v1 = sys_setpriority(0, who, prio);
        v0 = v8;
      }
      while ( v8 );
      v2 = 0;
LABEL_6:
      v3 = sys_exit(v2);
    }
  }
  v2 = 1;
  goto LABEL_6;
}
// 804809E: positive sp value 14 has been found
// 804806A: variable 'v5' is possibly undefined
// 804806F: variable 'v6' is possibly undefined
// 804807B: variable 'v7' is possibly undefined
// 804809D: variable 'v8' is possibly undefined
// 804804C: using guessed type int dword_804804C[6];
// 8048067: using guessed type void __noreturn start();

//----- (080480BE) --------------------------------------------------------
int __usercall sub_80480BE@<eax>(_BYTE *a1@<esi>)
{
  int v1; // eax
  int v2; // ebx
  int result; // eax

  v1 = 0;
  v2 = 0;
  if ( *a1 == 45 )
    ++a1;
  while ( 1 )
  {
    LOBYTE(v1) = *a1++;
    if ( !(_BYTE)v1 )
      break;
    LOBYTE(v1) = v1 - 48;
    v2 = v1 + 10 * v2;
  }
  result = v2;
  if ( *a1 == 45 )
    return -v2;
  return result;
}

// nfuncs=2 queued=2 decompiled=2 lumina nreq=0 worse=0 better=0
// ALL OK, 2 function(s) have been successfully decompiled
