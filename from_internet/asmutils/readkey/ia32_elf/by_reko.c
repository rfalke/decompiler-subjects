// subject_seg08048000.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

byte g_a804804C[] = // 0804804C
	{
	};
// 0804805C: void fn0804805C(Register Eq_2 ecx, Register Eq_2 edx)
// Called from:
//      fn08048064
void fn0804805C(Eq_2 ecx, Eq_2 edx)
{
	sys_ioctl(0x00, ecx, edx);
}

// 08048064: void fn08048064()
void fn08048064()
{
	ptr32 fp;
	fn0804805C(0x5401, 0x080480FE);
	struct Eq_17 * esp_21 = SEQ(SLICE(fp - 4, word16, 16), (word16) fp - 0x08);
	Eq_2 ecx_22 = esp_21->t0000;
	esp_21->t0000 = 0x08048122;
	fn0804805C(ecx_22, 0x08048122);
	g_dw804812E &= ~0x0B;
	Eq_2 edx_39 = esp_21->t0000;
	esp_21->t0000 = 0x5402;
	fn0804805C(0x5402, edx_39);
	g_dw8048122 = 0x00;
	esp_21->tFFFFFFFC = 0x04;
	Eq_2 edx_53 = esp_21->tFFFFFFFC;
	esp_21->tFFFFFFFC = 0x03;
	sys_read(0x00, &g_dw8048122, edx_53);
	fn0804805C(esp_21->t0000, esp_21->t0004);
	esp_21->t0004 = 0x08;
	Eq_2 ecx_77 = esp_21->t0004;
	byte * esi_79 = &g_b8048105;
	uint32 edx_80 = g_dw8048122;
	do
	{
		*esi_79 = g_a804804C[(uint32) ((byte) edx_80 & 0x0F)];
		--esi_79;
		edx_80 >>= 0x04;
		--ecx_77;
	} while (ecx_77 != 0x00);
	g_b8048106 = 0x0A;
	g_w80480FC = 0x7830;
	esp_21->t0004 = 11;
	Eq_2 edx_101 = esp_21->t0004;
	esp_21->t0004 = 0x01;
	Eq_2 ebx_106 = esp_21->t0004;
	esp_21->t0004 = 0x04;
	sys_write(ebx_106, &g_w80480FC, edx_101);
	esp_21->t0004 = 0x01;
	sys_exit(0x00);
}

word16 g_w80480FC = 0x00; // 080480FC
byte g_b8048105 = 0x00; // 08048105
byte g_b8048106 = 0x00; // 08048106
uint32 g_dw8048122 = 0x00; // 08048122
ui32 g_dw804812E = 0x00; // 0804812E
