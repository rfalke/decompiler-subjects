// subject_seg08048000.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

uint8 g_b804804C = 0x61; // 0804804C
// 0804805C: void fn0804805C(Register word24 eax_24_8, Stack word32 dwArg00)
void fn0804805C(word24 eax_24_8, word32 dwArg00)
{
	ptr32 fp;
	byte * edi_115 = &g_b804816B;
	word32 * esp_13 = fp + 4;
	if (dwArg00 != 0x01)
	{
		esp_13 = fp + 8;
		while (true)
		{
			byte * ebx_16 = *esp_13;
			++esp_13;
			if (ebx_16 == null)
				break;
			byte * esi_25 = ebx_16 + 1;
			if (*ebx_16 != 0x2D)
			{
l080480CB:
				while (true)
				{
					byte * esi_146 = ebx_16;
					if (ebx_16 == null)
						break;
					do
					{
						uint8 al_183 = *esi_146;
						++esi_146;
						word32 ebx_193 = 0x00;
						byte dl_78 = g_b804816A;
						if ((dl_78 & 0x04) == 0x00 && ((dl_78 & 0x02) != 0x00 && al_183 == 0x5C))
						{
							al_183 = *esi_146;
							++esi_146;
							if (al_183 != 0x5C)
							{
								bool v54_334 = al_183 != 99;
								if (al_183 == 99)
								{
									g_b804816A |= 0x01;
									continue;
								}
								byte ** esp_96 = esp_13 - 4;
								*esp_96 = (byte **) edi_115;
								word32 ecx_102 = 0x08;
								uint8 * edi_101 = &g_b804804C;
								do
								{
									byte * eax_118 = SEQ(eax_24_8, al_183);
									if (ecx_102 == 0x00)
										break;
									v54_334 = al_183 != *edi_343;
									edi_101 = edi_343 + 1;
									--ecx_102;
									eax_118 = SEQ(eax_24_8, al_183);
									edi_343 = edi_101;
								} while (al_183 == *edi_343);
								word16 ecx_16_16_332 = SLICE(ecx_102, word16, 16);
								eax_24_8 = SLICE(eax_118, word24, 8);
								cu8 al_129 = (byte) eax_118;
								if (!v54_334)
								{
									al_183 = (0x08 - (ecx_102 + 0x01))->b8048054;
									edi_115 = (byte *) *esp_96;
								}
								else
								{
									edi_115 = (byte *) *esp_96;
									*esp_96 = (byte **) eax_118;
									uint8 dl_136 = 0x00;
									word32 ecx_340 = SEQ(ecx_16_16_332, 0x08, 0x00);
									while (true)
									{
										byte cl_143 = (byte) ecx_340;
										bu8 ch_138 = SLICE(ecx_340, byte, 8);
										if (al_129 < 0x30 || al_129 > 55)
											break;
										dl_136 = ch_138 * dl_136 + (al_129 - 0x30);
										if (cl_143 == 0x02)
										{
											cl_143 = ~0x00;
											break;
										}
										al_129 = *esi_146;
										++esi_146;
										ecx_340 = SEQ(SLICE(ecx_340 + 0x01, word24, 8), cl_143 + 0x01);
									}
									byte * eax_158 = *esp_96;
									eax_24_8 = SLICE(eax_158, word24, 8);
									if (cl_143 != 0x00)
									{
										if (cl_143 != ~0x00)
											--esi_146;
										al_183 = dl_136;
										if (dl_136 == 0x00)
											ebx_193 = 0x01;
									}
									else
									{
										*esp_96 = (byte **) eax_158;
										*edi_115 = 0x5C;
										byte * eax_173 = *esp_96;
										++edi_115;
										al_183 = (byte) eax_173;
										eax_24_8 = SLICE(eax_173, word24, 8);
									}
								}
							}
						}
						*edi_115 = al_183;
						++edi_115;
					} while (al_183 != 0x00 || ebx_193 != 0x00);
					*edi_115 = 0x20;
					++edi_115;
					ebx_16 = *esp_13;
					++esp_13;
				}
				break;
			}
			byte dh_28 = 0x00;
			while (true)
			{
				byte al_34 = *esi_25;
				++esi_25;
				if (al_34 == 0x00)
					break;
				byte dl_41 = 0x01;
				if (al_34 != 110)
				{
					dl_41 = 0x02;
					if (al_34 != 101)
					{
						dl_41 = 0x04;
						if (al_34 != 0x45)
							goto l080480CB;
					}
				}
				dh_28 |= dl_41;
			}
			if (dh_28 == 0x00)
				goto l080480CB;
			g_b804816A |= dh_28;
		}
	}
	byte * edi_243 = edi_115 - 0x01;
	size_t edx_258 = edi_243 - &g_b804816B;
	if (edi_243 != &g_b804816B)
	{
		--edi_243;
		edx_258 = edi_243 - 134513004;
	}
	if ((g_b804816A & 0x01) == 0x00)
	{
		*edi_243 = 0x0A;
		edx_258 = (Eq_15) ((word32) edx_258 + 1);
	}
	uint32 * esp_289 = esp_13 - 4;
	*esp_289 = 0x01;
	uint32 ebx_291 = *esp_289;
	*esp_289 = 0x04;
	sys_write(ebx_291, &g_b804816B, edx_258);
	*esp_289 = 0x01;
	sys_exit(0x00);
}

byte g_b804816A = 0x00; // 0804816A
byte g_b804816B = 0x00; // 0804816B
