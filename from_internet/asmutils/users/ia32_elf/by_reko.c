// subject_seg08048000.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0804804C: void fn0804804C(Register (ptr32 word32) edi, Stack byte bArg00, Stack (ptr32 byte) dwArg08)
void fn0804804C(word32 * edi, byte bArg00, byte * dwArg08)
{
	byte * edx_13;
	ptr32 esp_14 = fp + 4;
	if ((byte) dwArg00 != 0x02)
		edx_13 = &g_b80480D0;
	else
	{
		edx_13 = dwArg08;
		esp_14 = fp + 0x0C;
	}
	struct Eq_17 * esp_21 = esp_14 - 4;
	esp_21->dw0000 = 0x05;
	word32 eax_23 = esp_21->dw0000;
	__syscall(0x80);
	esp_21->dw0000 = eax_23;
	byte cl_100 = 0x00;
	if (eax_23 != 0x02)
	{
		while (true)
		{
			esp_21->ptrFFFFFFFC = (byte *) 0x03;
			byte * eax_38 = esp_21->ptrFFFFFFFC;
			__syscall(0x80);
			if (eax_38 == null)
				break;
			g_b80480E0 = g_b80480E0 ^ 0x07;
			if (g_b80480E0 == 0x00)
			{
				esp_21->ptrFFFFFFFC = (byte *) 0x20;
				esp_21->ptrFFFFFFFC = (byte *) 0x01;
				esp_21->ptrFFFFFFFC = (byte *) 0x04;
				__syscall(0x80);
				esp_21->ptrFFFFFFFC = (byte *) 0x01;
				esp_21->ptrFFFFFFFC = (byte *) 0x01;
				esp_21->ptrFFFFFFFC = (byte *) 0x04;
				__syscall(0x80);
			}
		}
		esp_21->ptrFFFFFFFC = (byte *) 0x01;
		edx_13 = esp_21->ptrFFFFFFFC;
		esp_21->ptrFFFFFFFC = (byte *) 0x01;
		esp_21->ptrFFFFFFFC = (byte *) 0x04;
		__syscall(0x80);
		cl_100 = 223;
	}
	esp_21->ptrFFFFFFFC = (byte *) 0x06;
	__syscall(0x80);
	esp_21->ptrFFFFFFFC = (byte *) 0x01;
	byte * eax_67 = esp_21->ptrFFFFFFFC;
	__syscall(0x80);
	byte al_69 = (byte) eax_67;
	word16 dx_73 = (word16) edx_13;
	bool C_70 = __das(al_69, &al_69);
	if (!(C_70 | SLICE(cond(0x00), bool, 2)))
	{
		if (!C_70)
		{
			if (C_70)
			{
l0804814C:
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
				*eax_67 += al_69;
			}
			__outb(dx_73, al_69);
			*edi = __in(dx_73);
			*edx_13 &= cl_100;
			*eax_67 += al_69;
			*eax_67 += al_69;
			*eax_67 += al_69;
			*eax_67 += al_69;
			*eax_67 += al_69;
			*eax_67 += al_69;
			*eax_67 += al_69;
			*eax_67 += al_69;
			*eax_67 += al_69;
			*eax_67 += al_69;
			*eax_67 += al_69;
			*eax_67 += al_69;
			*eax_67 += al_69;
			*eax_67 += al_69;
			*eax_67 += al_69;
			*eax_67 += al_69;
			*eax_67 += al_69;
			*eax_67 += al_69;
		}
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
		*eax_67 += al_69;
	}
	*eax_67 += al_69;
	*eax_67 += al_69;
	*eax_67 += al_69;
	*eax_67 += al_69;
	*eax_67 += al_69;
	*eax_67 += al_69;
	*eax_67 += al_69;
	*eax_67 += al_69;
	*eax_67 += al_69;
	*eax_67 += al_69;
	*eax_67 += al_69;
	*eax_67 += al_69;
	goto l0804814C;
}

byte g_b80480D0 = 0x2F; // 080480D0
ui8 g_b80480E0 = 0x00; // 080480E0
