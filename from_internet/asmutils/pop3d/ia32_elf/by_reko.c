// subject_seg08048000_0000.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

byte g_b804806B = 0x0A; // 0804806B
byte g_b8048071 = 0x2B; // 08048071
uint32 g_dw80480FB = 0x0A; // 080480FB
byte g_b8048253 = 0x55; // 08048253
byte g_b8048257 = 0x50; // 08048257
byte g_b804825B = 0x53; // 0804825B
byte g_b804825F = 0x52; // 0804825F
byte g_b8048263 = 0x44; // 08048263
byte g_b8048267 = 0x4C; // 08048267
byte g_b804826B = 0x51; // 0804826B
// 08048279: void fn08048279(Register Eq_2 eax)
// Called from:
//      fn080482EE
//      fn080484BF
void fn08048279(Eq_2 eax)
{
	fn08048292(eax);
	__syscall(0x80);
}

// 08048292: void fn08048292(Register Eq_2 eax)
// Called from:
//      fn08048279
//      fn080482EE
//      fn080484BF
void fn08048292(Eq_2 eax)
{
	byte * edi_27 = &g_b805A12F;
	do
	{
		uint64 edx_eax_30 = (uint64) eax;
		Eq_2 eax_34 = (uint32) (edx_eax_30 /u g_dw80480FB);
		*edi_27 = (byte) (edx_eax_30 % g_dw80480FB) + 0x30;
		--edi_27;
		eax = eax_34;
	} while (eax_34 != 0x00);
	__syscall(0x80);
}

// 080482D6: void fn080482D6()
// Called from:
//      fn08048B3F
void fn080482D6()
{
	__syscall(0x80);
}

// 080482EE: void fn080482EE()
// Called from:
//      fn08048B3F
void fn080482EE()
{
	byte * esi_12 = g_a8049EDC;
	byte * edi_52 = g_a8059EDB;
	word32 ecx_55;
	for (ecx_55 = 0x0100; ecx_55 != 0x00; --ecx_55)
	{
		byte al_11 = *esi_12;
		++esi_12;
		if (al_11 == 0x20)
		{
			g_t805A0F9 = esi_12 - 0x08049EDD;
			byte * edi_20 = g_a8059EE5;
			word32 ecx_46;
			esi_25 = esi_12;
			for (ecx_46 = 0x0100; ecx_46 != 0x00; --ecx_46)
			{
				byte * esi_25;
				byte al_27 = *esi_25;
				++esi_25;
				if (al_27 == 0x20)
				{
l08048344:
					g_dw805A109 = esi_25 - esi_12 - 0x01;
					break;
				}
				if (al_27 == 0x0A)
				{
					--esi_25;
					goto l08048344;
				}
				*edi_20 = al_27;
				++edi_20;
			}
			goto l0804834D;
		}
		if (al_11 == 0x0A)
			break;
		*edi_52 = al_11;
		++edi_52;
	}
	g_t805A0F9 = esi_12 - 0x08049EDE;
l0804834D:
	if (g_t805A0F9 >= 0x04)
	{
		if (g_b805A0ED != 0x01)
		{
			Eq_47 ecx_72 = g_t805A0F9;
			byte * edi_73 = g_a8059EDB;
			byte * esi_74 = &g_b8048253;
			while (ecx_72 != 0x00)
			{
				esi_74 = esi_1076 + 1;
				edi_73 = edi_1077 + 1;
				--ecx_72;
				esi_1076 = esi_74;
				edi_1077 = edi_73;
				if (*esi_1076 == *edi_1077)
					break;
			}
			if (ecx_72 == 0x00)
			{
				g_b805A0EE = 0x01;
				byte * esi_855 = g_a8059EE5;
				byte * edi_856 = g_a8059EEF;
				int32 ecx_857;
				for (ecx_857 = g_dw805A109; ecx_857 != 0x00; --ecx_857)
				{
					*edi_856 = *esi_855;
					++esi_855;
					++edi_856;
				}
				*edi_856 = 0x00;
				__syscall(0x80);
				fn080484BF();
				return;
			}
			if (g_b805A0EE == 0x00)
			{
				__syscall(0x80);
				fn080484BF();
				return;
			}
			byte * edi_101 = g_a8059EDB;
			byte * esi_100 = &g_b8048257;
			Eq_47 ecx_102 = g_t805A0F9;
			while (ecx_102 != 0x00)
			{
				esi_100 = esi_1078 + 1;
				edi_101 = edi_1079 + 1;
				--ecx_102;
				esi_1078 = esi_100;
				edi_1079 = edi_101;
				if (*esi_1078 == *edi_1079)
					break;
			}
			if (ecx_102 == 0x00)
			{
				byte * esi_761 = g_a8059EE5;
				struct Eq_240 * edi_762 = g_a8059FEE;
				int32 ecx_763;
				for (ecx_763 = g_dw805A109; ecx_763 != 0x00; --ecx_763)
				{
					edi_762->b0000 = *esi_761;
					++esi_761;
					++edi_762;
				}
				edi_762[1] = (struct Eq_240) 0x00;
				g_b805A0ED = 0x01;
				byte * ebx_770 = &g_b8048ECC;
				struct Eq_254 * ecx_771 = g_ptr8048EC8;
				do
				{
					*ebx_770 = ecx_771->b0000;
					++ebx_770;
					++ecx_771;
				} while (ecx_771->b0000 != 0x00);
				byte * ecx_781 = g_a8059EEF;
				while (true)
				{
					*ebx_770 = *ecx_781;
					if (*ebx_770 == 0x00)
						break;
					++ebx_770;
					++ecx_781;
				}
				g_b8048CC6 = 0x01;
				g_b8048CC7 = 0x00;
				fn080484BF();
				__syscall(0x80);
				fn08048292(g_t805A130);
				g_b8048CC6 = 0x00;
				__syscall(0x80);
				return;
			}
		}
		byte * edi_107 = g_a8059EDB;
		byte * esi_108 = &g_b804825B;
		Eq_47 ecx_111 = g_t805A0F9;
		while (ecx_111 != 0x00)
		{
			esi_108 = esi_1080 + 1;
			edi_107 = edi_1081 + 1;
			--ecx_111;
			esi_1080 = esi_108;
			edi_1081 = edi_107;
			if (*esi_1080 == *edi_1081)
				break;
		}
		if (ecx_111 != 0x00)
		{
			byte * edi_126 = g_a8059EDB;
			byte * esi_127 = &g_b8048267;
			Eq_47 ecx_129 = g_t805A0F9;
			while (ecx_129 != 0x00)
			{
				esi_127 = esi_1082 + 1;
				edi_126 = edi_1083 + 1;
				--ecx_129;
				esi_1082 = esi_127;
				edi_1083 = edi_126;
				if (*esi_1082 == *edi_1083)
					break;
			}
			if (ecx_129 != 0x00)
			{
				byte * edi_144 = g_a8059EDB;
				byte * esi_145 = &g_b804826B;
				Eq_47 ecx_147 = g_t805A0F9;
				while (ecx_147 != 0x00)
				{
					esi_145 = esi_1084 + 1;
					edi_144 = edi_1085 + 1;
					--ecx_147;
					esi_1084 = esi_145;
					edi_1085 = edi_144;
					if (*esi_1084 == *edi_1085)
						break;
				}
				if (ecx_147 == 0x00)
				{
					__syscall(0x80);
					__syscall(0x80);
					__syscall(0x80);
				}
				byte * edi_198 = g_a8059EDB;
				byte * esi_199 = &g_b804825F;
				Eq_47 ecx_201 = g_t805A0F9;
				while (ecx_201 != 0x00)
				{
					esi_199 = esi_1086 + 1;
					edi_198 = edi_1087 + 1;
					--ecx_201;
					esi_1086 = esi_199;
					edi_1087 = edi_198;
					if (*esi_1086 == *edi_1087)
						break;
				}
				if (ecx_201 != 0x00)
				{
					byte * edi_216 = g_a8059EDB;
					byte * esi_217 = &g_b8048263;
					Eq_47 ecx_219 = g_t805A0F9;
					while (ecx_219 != 0x00)
					{
						esi_217 = esi_1088 + 1;
						edi_216 = edi_1089 + 1;
						--ecx_219;
						esi_1088 = esi_217;
						edi_1089 = edi_216;
						if (*esi_1088 == *edi_1089)
							break;
					}
					if (ecx_219 != 0x00)
					{
						__syscall(0x80);
						return;
					}
					g_b8048CC8 = 0x01;
				}
				if (g_dw805A109 > 0x00)
				{
					if (g_dw805A109 >= 0x0A)
						__syscall(0x80);
					int32 edx_261 = 0x01;
					Eq_2 ecx_262 = 0x00;
					byte * edi_265 = g_dw805A109 + 0x08059EE5;
					do
					{
						--edi_265;
						Eq_476 eax_273 = (uint32) *edi_265;
						if (eax_273 > 0x39 || eax_273 < 0x30)
						{
							__syscall(0x80);
							return;
						}
						ecx_262 = (word32) ecx_262 + (eax_273 - 0x30) *s edx_261;
						edx_261 *= 0x0A;
					} while (edi_265 != g_a8059EE5);
					g_t805A134 = ecx_262;
					g_dw805A138 = 0x00;
					g_dw805A13C = 0x00;
					g_b8048CC6 = 0x01;
					fn080484BF();
					Eq_2 eax_310 = g_t805A130;
					if (g_t805A134 < 0x01 || g_t805A134 >= (word32) eax_310 + 1)
						__syscall(0x80);
					else
					{
						fn08048279(g_t805A134);
						__syscall(0x80);
						g_dw805A105 = 0x05;
						g_t805A130.u0 = 0x01;
						g_dw805A144 = 0x00;
						g_dw8048CC9 = 0x00;
						g_dw805A138 = 0x00;
						g_dw805A13C = 0x00;
						g_dw805A144 = 0x00;
						byte * edi_340 = &g_b804806B;
						while (true)
						{
							__syscall(0x80);
							g_dw805A158 = 0x03;
							byte * ecx_426 = g_a8049EDC;
							byte * ebx_427 = g_a8049EDC;
							byte * edx_428 = g_dw805A158 + 134520540;
							ptr32 ebp_429 = 0x00;
							if (g_t805A134 == 0x01)
							{
								g_dw805A138 = 0x01;
								g_t805A134 = (word32) g_t805A134 + 1;
							}
							do
							{
								if (*ecx_426 == *edi_340)
								{
									++edi_340;
									if (edi_340 != &g_b8048071)
										goto l08048900;
									g_t805A130 = (word32) g_t805A130 + 1;
									if (g_t805A130 == g_t805A134)
									{
										ptr32 ebp_452 = ecx_426 - 0x06;
										g_dw805A144 += ebp_452 - 134520540;
										ebp_429 = ebp_452 - 134520540;
										if (g_dw805A138 != 0x00)
										{
											g_dw805A138 += 0x03;
											g_dw805A13C = g_dw805A144;
											g_dw805A13C += 0x02;
											Mem465 = Mem463;
											if (g_dw805A138 == 0x04)
												g_dw805A138 = 0x00;
											if (g_dw805A138 == 0x04)
												g_dw805A138 = 0x00;
											g_t805A140 = g_dw805A13C - g_dw805A138;
											if (g_b8048CC8 != 0x01)
											{
												__syscall(0x80);
												fn08048292(g_t805A140);
												__syscall(0x80);
												__syscall(0x80);
												g_t805A101.u0 = 0x00;
												do
												{
													__syscall(0x80);
													g_dw805A0FD = 0x03;
													g_t805A101 = (word32) g_t805A101 + 3;
													__syscall(0x80);
												} while (g_t805A101 != g_t805A140);
												__syscall(0x80);
												__syscall(0x80);
												return;
											}
											else
											{
												__syscall(0x80);
												__syscall(0x80);
												__syscall(0x80);
												g_dw805A105 = 0x05;
												while (true)
												{
													__syscall(0x80);
													__syscall(0x80);
													g_dw805A160 = 0x03;
													__syscall(0x80);
													__syscall(0x80);
													word32 eax_669 = g_dw805A160;
													g_dw805A13C += eax_669;
													g_dw805A138 += eax_669;
												}
											}
										}
										g_dw805A138 = g_dw805A144;
										g_t805A134 = (word32) g_t805A134 + 1;
									}
									g_dw805A144 -= ebp_429;
								}
								edi_340 = &g_b804806B;
								ecx_426 = ebx_427;
								++ebx_427;
l08048900:
								++ecx_426;
							} while (ecx_426 != edx_428);
							g_dw805A144 += g_dw805A158;
						}
					}
				}
				else
					__syscall(0x80);
			}
			else
			{
				g_b8048CC7 = 0x01;
				fn080484BF();
			}
		}
		else
			fn080484BF();
	}
	else
	{
		__syscall(0x80);
		fn080484BF();
	}
}

// 080484BF: void fn080484BF()
// Called from:
//      fn080482EE
void fn080484BF()
{
	__syscall(0x80);
	g_dw805A105 = 0x05;
	g_t805A130.u0 = 0x00;
	g_t805A148.u0 = 0x00;
	byte * edi_152 = &g_b804806B;
	while (true)
	{
		__syscall(0x80);
		g_dw805A160 = 0x03;
		byte * ecx_168 = g_a8049EDC;
		byte * ebx_169 = g_a8049EDC;
		byte * edx_170 = g_dw805A160 + 134520540;
		do
		{
			if (*ecx_168 == *edi_152)
			{
				++edi_152;
				if (edi_152 != &g_b8048071)
					goto l0804859C;
				g_t805A130 = (word32) g_t805A130 + 1;
				if (g_b8048CC7 != 0x00)
				{
					fn08048292(g_t805A130);
					__syscall(0x80);
					fn08048279(g_t805A148);
					g_t805A148.u0 = 0x00;
				}
			}
			g_t805A148 = (word32) g_t805A148 + 1;
			edi_152 = &g_b804806B;
			ecx_168 = ebx_169;
			++ebx_169;
l0804859C:
			++ecx_168;
		} while (ecx_168 != edx_170);
	}
}

// 08048B3F: void fn08048B3F(Register word24 eax_24_8, Register int32 ebx, Register word32 ebp, Stack word32 dwArg00, Stack (ptr32 Eq_254) dwArg08, Stack (ptr32 cu8) dwArg0C)
void fn08048B3F(word24 eax_24_8, int32 ebx, word32 ebp, word32 dwArg00, struct Eq_254 * dwArg08, cu8 * dwArg0C)
{
fn08048B3F_entry:
	def ebx
	def fp
	def ebp
	def eax_24_8
	def dwArg00
	def dwArg08
	def dwArg0C
	esp_5 = fp + 4
	branch dwArg00 != 0x03 l08048BD7
	g_ptr8048EC8 = dwArg08
	esi_12 = dwArg0C
	g_b805A0ED = 0x00
	g_b805A0EE = 0x00
	ebx_302 = ebx
	goto l08048B5F
l08048B3F:
l08048B49:
l08048B5F:
	ebx_304 = PHI((ebx_302, l08048B49), (ebx_303, l08048B68))
	esi_16 = PHI((esi_12, l08048B49), (esi_19, l08048B68))
	al_18 = *esi_16
	esi_19 = esi_16 + 1
	branch al_18 < 0x30 l08048B6F
l08048B64:
	ebx_266 = ebx_304
	eax_269 = SEQ(eax_24_8, al_18 - 0x30)
	branch al_18 > 0x39 l08048B6F
l08048B68:
	ebx_270 = ebx_304 *s 0x0A + eax_269
	bl_273 = (byte) ebx_270
	bh_275 = SLICE(ebx_270, byte, 8)
	ebx_16_16_277 = SLICE(ebx_270, word16, 16)
	ebx_303 = SEQ(ebx_16_16_277, bl_273, bh_275)
	goto l08048B5F
l08048B6F:
	ebx_34 = ebx_304
	ebx_24_8_38 = SLICE(ebx_304 << 0x10, word24, 8)
	ebx_39 = SEQ(ebx_24_8_38, 0x02)
	g_dw805A111 = ebx_39
	eax_41 = g_ptr8048EC8
l08048B81:
	eax_42 = PHI((eax_41, l08048B6F), (eax_43, l08048B81))
	eax_43 = eax_42 + 1
	branch eax_43->b0000 != 0x00 l08048B81
l08048B87:
	branch eax_43->bFFFFFFFF == 0x2F l08048BA1
l08048B8D:
	esp_106 = fp + 16
	__syscall(0x80)
	goto l08048C03
l08048BA1:
	__syscall(0x80)
	esp_68 = fp + 0x10
	ebp_69 = 0x66
	__syscall(0x80)
	esp_92 = fp + 0x10
l08048BBA:
l08048C03:
	ebp_119 = ebp
	esp_107 = PHI((esp_185, l08048C41), (esp_106, l08048B8D))
	esp_108 = esp_107 - 4
	*esp_108 = 0x01
	esp_111 = esp_108 + 1
	__syscall(0x80)
	ebp_118 = PHI((ebp_119, l08048C03), (ebp_69, l08048BBA))
	esp_112 = PHI((esp_111, l08048C03), (esp_92, l08048BBA))
	esp_113 = esp_112 - 4
	esp_113->dw0000 = 0x10
	esp_113->dwFFFFFFFC = 0x0805A111
	esp_113->dwFFFFFFF8 = ebp_118
	esp_113->dwFFFFFFF4 = 0x02
	esp_113->dwFFFFFFF4 = 0x66
	eax_128 = esp_113->dwFFFFFFF4
	__syscall(0x80)
	branch eax_128 != 0x00 l08048BEE
l08048C08:
l08048C41:
	goto l08048C03
l08048C6B:
	*esp_192 = 0x01
	*esp_192 = 114
	__syscall(0x80)
	*esp_192 = 114
	__syscall(0x80)
	*esp_192 = 0x02
	eax_230 = *esp_192
	esp_231 = esp_192 + 1
	__syscall(0x80)
	branch eax_230 == 0x00 l08048C95
l08048C8C:
	*esp_192 = 0x06
	__syscall(0x80)
l08048C95:
	g_dw805A10D = eax_206
	fn080482D6()
l08048CA0:
	esp_241 = PHI((esp_231, l08048C95), (esp_253, l08048CA0))
	esp_242 = esp_241 - 4
	*esp_242 = 0x03
	__syscall(0x80)
	fn080482EE()
	esp_253 = <invalid>
	goto l08048CA0
}

byte g_b8048CC6 = 0x00; // 08048CC6
byte g_b8048CC7 = 0x00; // 08048CC7
byte g_b8048CC8 = 0x00; // 08048CC8
word32 g_dw8048CC9 = 0x00; // 08048CC9
struct Eq_254 * g_ptr8048EC8 = null; // 08048EC8
byte g_b8048ECC = 0x00; // 08048ECC
byte g_a8049EDC[] = // 08049EDC
	{
	};
// subject_seg08048000_0001.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

byte g_a8059EDB[] = // 08059EDB
	{
	};
byte g_a8059EE5[] = // 08059EE5
	{
	};
byte g_a8059EEF[] = // 08059EEF
	{
	};
byte g_a8059FEE[] = // 08059FEE
	{
	};
byte g_a8059FEF[] = // 08059FEF
	{
	};
byte g_b805A0ED = 0x00; // 0805A0ED
byte g_b805A0EE = 0x00; // 0805A0EE
Eq_47 g_t805A0F9 = // 0805A0F9
	{
		0x00
	};
word32 g_dw805A0FD = 0x00; // 0805A0FD
Eq_2 g_t805A101 = // 0805A101
	{
		0
	};
word32 g_dw805A105 = 0x00; // 0805A105
int32 g_dw805A109 = 0; // 0805A109
word32 g_dw805A10D = 0x00; // 0805A10D
word32 g_dw805A111 = 0x00; // 0805A111
byte g_b805A12F = 0x00; // 0805A12F
Eq_2 g_t805A130 = // 0805A130
	{
		0
	};
Eq_2 g_t805A134 = // 0805A134
	{
		0
	};
word32 g_dw805A138 = 0x00; // 0805A138
word32 g_dw805A13C = 0x00; // 0805A13C
Eq_2 g_t805A140 = // 0805A140
	{
		0
	};
word32 g_dw805A144 = 0x00; // 0805A144
Eq_2 g_t805A148 = // 0805A148
	{
		0
	};
word32 g_dw805A158 = 0x00; // 0805A158
word32 g_dw805A160 = 0x00; // 0805A160
