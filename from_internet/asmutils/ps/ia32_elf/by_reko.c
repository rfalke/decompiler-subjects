// subject_seg08048000.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0804804C: void fn0804804C(Register word32 edi)
void fn0804804C(word32 edi)
{
	word32 edi;
	fn08048176(&g_t80481BB);
	ecx_9 = 0x00;
	__syscall(0x80);
	ecx_20 = 134514412;
	__syscall(0x80);
	ebx_48 = 134514412;
	ecx_49 = 141;
	ebx_62 = ϕ(ebx_48, ebx_158);
	ecx_56 = ϕ(ecx_49, ecx_159);
	esi_75 = ebx_62 + 0x0A;
	eax_76 = fn0804815A(esi_75);
	fn08048196(&g_t80481D5, &g_b80481EC);
	fn080481A3(esi_75, &g_b80481EC);
	fn080481A3(&g_t80481DC, &g_b80481EC);
	__syscall(0x80);
	__syscall(0x80);
	__syscall(0x80);
	fn08048132(&g_t80482EC);
	fn08048176(&g_t80481E2);
}

// 08048111: void fn08048111(Register word32 ecx, Register (ptr32 Eq_5) edi)
// Called from:
//      fn0804804C
//      fn08048132
void fn08048111(word32 ecx, struct Eq_5 * edi)
{
	do
	{
		word32 ecx_34 = ~0x00;
		while (ecx_34 != 0x00)
		{
			++edi;
			--ecx_34;
			if (edi->b0000 != 0x00)
				break;
		}
		ecx = ecx_113 - 0x01;
		ecx_113 = ecx;
	} while (ecx_113 != 0x01);
	fn08048176(edi);
	fn08048176(&g_t80481E4);
}

// 08048132: void fn08048132(Register (ptr32 Eq_5) edi)
// Called from:
//      fn0804804C
void fn08048132(struct Eq_5 * edi)
{
	struct Eq_5 * esi_27 = edi;
	while (true)
	{
		byte al_30 = esi_27->b0000;
		++esi_27;
		if (al_30 == 0x00)
			break;
		if (al_30 == 0x20)
			esi_27->bFFFFFFFF = 0x00;
	}
	byte * esi_35 = g_a80481E6;
	while (true)
	{
		byte al_38 = *esi_35;
		++esi_35;
		if (al_38 == 0x00)
			break;
		fn08048111((word32) al_38, edi);
	}
}

// 0804815A: Register uint32 fn0804815A(Register (ptr32 Eq_5) esi)
// Called from:
//      fn0804804C
uint32 fn0804815A(struct Eq_5 * esi)
{
	byte ah_21 = 0x00;
	do
	{
		char al_11 = esi->b0000;
		++esi;
		if (al_11 == 0x00)
			return (uint32) ah_21;
		if (al_11 < 0x30)
		{
			ah_21 = 0x01;
			return (uint32) ah_21;
		}
	} while (al_11 <= 0x39);
	ah_21 = 0x01;
	return (uint32) ah_21;
}

// 08048176: void fn08048176(Register (ptr32 Eq_5) ecx)
// Called from:
//      fn0804804C
//      fn08048111
void fn08048176(struct Eq_5 * ecx)
{
	fn08048188(ecx);
	__syscall(0x80);
}

// 08048188: Register word32 fn08048188(Register (ptr32 Eq_5) esi)
// Called from:
//      fn08048176
//      fn08048196
//      fn080481A3
word32 fn08048188(struct Eq_5 * esi)
{
	word32 edx_11 = ~0x00;
	do
	{
		++edx_11;
		esi = esi_33 + 1;
		esi_33 = esi;
	} while (esi_33->b0000 != 0x00);
	return edx_11;
}

// 08048196: void fn08048196(Register (ptr32 Eq_5) esi, Register (ptr32 byte) edi)
// Called from:
//      fn0804804C
void fn08048196(struct Eq_5 * esi, byte * edi)
{
	word32 ecx_34;
	for (ecx_34 = fn08048188(esi) + 0x01; ecx_34 != 0x00; --ecx_34)
	{
		*edi = esi->b0000;
		++esi;
		++edi;
	}
}

// 080481A3: void fn080481A3(Register (ptr32 Eq_5) esi, Register (ptr32 Eq_5) edi)
// Called from:
//      fn0804804C
void fn080481A3(struct Eq_5 * esi, struct Eq_5 * edi)
{
	byte * edi_38 = edi + fn08048188(edi);
	struct Eq_5 * esi_37 = esi;
	word32 ecx_47;
	for (ecx_47 = fn08048188(esi) + 0x01; ecx_47 != 0x00; --ecx_47)
	{
		*edi_38 = esi_37->b0000;
		++esi_37;
		++edi_38;
	}
}

Eq_5 g_t80481BB = // 080481BB
	{
		0xC3,
		0x50,
	};
Eq_5 g_t80481D5 = // 080481D5
	{
		0x00,
		0x2F,
	};
Eq_5 g_t80481DC = // 080481DC
	{
		0x00,
		0x2F,
	};
Eq_5 g_t80481E2 = // 080481E2
	{
		0x00,
		0x0A,
	};
Eq_5 g_t80481E4 = // 080481E4
	{
		0x00,
		0x09,
	};
byte g_a80481E6[] = // 080481E6
	{
	};
byte g_b80481EC = 0x00; // 080481EC
Eq_5 g_t80482EC = // 080482EC
	{
		0x00,
		0x00,
	};
