// subject_seg08048000.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0804804C: Register byte fn0804804C(Register (ptr32 Eq_3) esi, Register out (ptr32 Eq_3) esiOut)
// Called from:
//      fn08048147
byte fn0804804C(struct Eq_3 * esi, struct Eq_3 & esiOut)
{
	byte bh_17 = 0x00;
	byte bl_64 = 0x00;
	byte cl_14 = esi->b0000;
	if (cl_14 == 0x2D)
	{
		bh_17 = 0x01;
		++esi;
l08048063:
		cl_14 = esi->b0000;
	}
	cu8 cl_25 = cl_14 - 0x30;
	if (cl_25 < 0x00 || cl_25 > 0x09)
	{
		esiOut = esi;
		return bl_64;
	}
	++bl_64;
	++esi;
	goto l08048063;
}

Eq_135 g_t8048081 = // 08048081
	{
		0x55480103
	};
// 08048147: void fn08048147(Register word24 ecx_24_8, Stack word32 dwArg00, Stack (ptr32 Eq_3) dwArg08)
void fn08048147(word24 ecx_24_8, word32 dwArg00, struct Eq_3 * dwArg08)
{
	word32 * esp_117 = fp + 4;
	word32 edi_166 = dwArg00 - 0x01;
	if (dwArg00 == 0x01)
	{
l08048227:
		byte ** esp_180 = esp_117 - 4;
		*esp_180 = (byte **) (byte *) 0x01;
		byte * eax_182 = *esp_180;
		__syscall(0x80);
		byte al_184 = (byte) eax_182;
		*eax_182 += al_184;
		*eax_182 += al_184;
		*eax_182 += al_184;
	}
	struct Eq_3 * esi_11 = dwArg08;
	esp_117 = fp + 0x0C;
	if (dwArg08->b0000 != 0x2D)
	{
l08048214:
		word32 esi_228;
		if (fn0804804C(esi_11, out esi_228) == 0x00)
			goto l08048227;
		word32 * esp_162 = esp_117 - 4;
		*esp_162 = 0x25;
		__syscall(0x80);
		esp_117 = esp_162 + 1;
		--edi_166;
		if (edi_166 == 0x00)
			goto l08048227;
	}
	else
	{
		if (dwArg08[1] == 0x6C)
		{
			union Eq_135 * edi_100 = &g_t8048081;
			while (*edi_100 != 0x00)
			{
				Eq_135 esi_118 = *edi_100;
				__syscall(0x80);
				__syscall(0x80);
				edi_100 = (union Eq_135 *) ((char *) edi_100 + 2 + (esi_118 & 0x0F));
			}
			__syscall(0x80);
			esp_117 = fp + 0x0C;
			goto l08048227;
		}
		edi_166 = dwArg00 - 0x02;
		if (dwArg00 == 0x02)
			goto l08048227;
		byte * esi_26;
		if (fn0804804C(dwArg08 + 1, out esi_26) == 0x00)
		{
			byte al_192 = 0x00;
			while (true)
			{
				byte bl_41 = *esi_26;
				struct Eq_167 * eax_52 = (uint32) al_192;
				if (bl_41 == 0x00)
					break;
				eax_52->b804822C = bl_41;
				if (al_192 == 0x05)
					goto l080481DF;
				++al_192;
				++esi_26;
			}
			if (al_192 == 0x00)
				goto l08048227;
l080481DF:
			byte bh_198 = 0x00;
			struct Eq_175 * edx_197 = (struct Eq_175 *) ~0x01;
l080481E5:
			struct Eq_208 * esi_64 = null;
			do
			{
				word32 edx_68 = edx_197 + 1;
				edx_197 = SEQ(SLICE(edx_68 + 0x01, word24, 8), (byte) edx_68 + 0x01 + bh_198);
				byte bh_76 = edx_197[0x08048081];
				bh_198 = bh_76;
				if (bh_76 == 0x00)
					goto l08048227;
				word32 ecx_210 = SEQ(ecx_24_8, al_192);
			} while (bh_76 != al_192);
			do
			{
				ecx_24_8 = SLICE(ecx_210, word24, 8);
				if (Mem202[esi_64 + 0x0804822C:byte] != Mem202[(edx_197 + 0x08048083) + esi_64:byte])
					goto l080481E5;
				++esi_64;
				--ecx_210;
			} while (ecx_210 != 0x00);
		}
	}
	esi_11 = *esp_117;
	++esp_117;
	goto l08048214;
}

byte g_a804822C[] = // 0804822C
	{
	};
