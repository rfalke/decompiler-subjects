/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

void __fastcall __noreturn start(_BYTE *);


//----- (0804804C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __fastcall __noreturn start(_BYTE *a1)
{
  int v1; // ebx
  _BYTE *v2; // eax
  int v3; // edx
  _BYTE *v4; // eax
  _BYTE *v5; // edx
  int v6; // eax
  int v7; // eax
  _BYTE *v8; // eax
  _BYTE *v9; // ecx
  _BYTE *v10; // ebx
  _BYTE *v11; // eax
  _BYTE *v12; // eax
  int v13; // [esp-10h] [ebp-10h]
  _BYTE *v14; // [esp-Ch] [ebp-Ch]
  _BYTE *v15; // [esp-8h] [ebp-8h]
  _BYTE *v16; // [esp-4h] [ebp-4h]
  _BYTE *v17; // [esp-4h] [ebp-4h]

  v1 = 1;
  if ( v13 != 1 && v13 - 1 <= 2 )
  {
    v2 = v15;
    v3 = 0;
    if ( !*v15 )
      goto LABEL_13;
    do
      ++v2;
    while ( *v2 );
    do
    {
      if ( (int)--v2 < (int)v15 )
      {
        v3 = 0;
        goto LABEL_13;
      }
    }
    while ( *v2 == 47 );
    v4 = v2 + 1;
    v5 = v4;
    while ( *--v4 != 47 )
    {
      if ( v4 == v15 )
        goto LABEL_16;
    }
    ++v4;
LABEL_16:
    a1 = v4;
    v3 = v5 - v4;
    if ( v13 != 2 )
    {
      v8 = v16;
      v17 = a1;
      v9 = &a1[v3];
      v10 = v8;
      if ( !*v8 )
        goto LABEL_12;
      do
        ++v8;
      while ( *v8 );
      v11 = (_BYTE *)(v8 - v10);
      if ( (int)v11 < v3 )
      {
        v12 = &v11[(_DWORD)v10];
        v14 = v12;
        do
        {
          if ( *--v9 != *--v12 )
            goto LABEL_12;
        }
        while ( v12 != v10 );
        a1 = v17;
        v3 -= v14 - v10;
      }
      else
      {
LABEL_12:
        a1 = v17;
      }
    }
LABEL_13:
    a1[v3] = 10;
    v6 = sys_write(1, a1, v3 + 1);
    v1 = 0;
  }
  v7 = sys_exit(v1);
}
// 80480AA: positive sp value 10 has been found
// 8048053: variable 'v13' is possibly undefined
// 804805B: variable 'v15' is possibly undefined
// 80480A9: variable 'v16' is possibly undefined

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
