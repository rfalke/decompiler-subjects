/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

void __noreturn start(); // weak
// int __usercall sub_80480EE@<eax>(int@<eax>, char *@<esi>);


//----- (0804804C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __noreturn start()
{
  int v0; // eax
  int v1; // eax
  char *v2; // edi
  mode_t v3; // ecx
  int v4; // ebp
  char *v5; // esi
  _BYTE *v6; // esi
  int v7; // ecx
  const char *v8; // ebx
  int v9; // edx
  char v10; // cf
  int v11; // [esp-10h] [ebp-10h]
  const char *v12; // [esp-Ch] [ebp-Ch]
  const char *v13; // [esp-8h] [ebp-8h]
  _BYTE *v14; // [esp-4h] [ebp-4h]

  v0 = v11 - 1;
  if ( v11 != 1 )
  {
    v2 = (char *)&v12[strlen(v12) + 1];
    v3 = 493;
    v4 = 0;
    while ( 1 )
    {
      while ( 1 )
      {
        v5 = (char *)v13;
        if ( *(_WORD *)v13 != 28717 )
          break;
        ++v4;
      }
      if ( *(_WORD *)v13 != 27949 )
        break;
      v6 = v14;
      if ( !v14 )
        goto LABEL_2;
      v7 = 0;
      v0 = 0;
      while ( 1 )
      {
        LOBYTE(v7) = *v6 - 48;
        if ( *v6 < 0x30u || (unsigned __int8)v7 > 7u )
          break;
        LOWORD(v0) = 8 * (unsigned __int8)v0;
        v0 += v7;
        ++v6;
      }
      if ( v14 == v6 || !v0 )
        goto LABEL_2;
      v3 = v0;
    }
    while ( 1 )
    {
      v8 = v13;
      if ( !v13 )
        break;
      if ( *((_WORD *)v2 - 3) == 28018 )
      {
        v0 = sys_rmdir(v13);
      }
      else
      {
        v13 = v2;
        if ( v4 )
        {
          v5 = (char *)v8;
          goto LABEL_23;
        }
        while ( 1 )
        {
          v0 = sys_mkdir(v8, v3);
          if ( v9 )
            break;
          *v2 = 47;
          ++v5;
LABEL_23:
          LOBYTE(v0) = 47;
          v0 = sub_80480EE(v0, v5);
          if ( !v10 )
            break;
          v2 = v5;
          *v5 = 0;
        }
        v2 = (char *)v13;
      }
    }
  }
LABEL_2:
  v1 = sys_exit(v0);
}
// 804807C: positive sp value 10 has been found
// 804804D: variable 'v11' is possibly undefined
// 8048055: variable 'v0' is possibly undefined
// 804805B: variable 'v12' is possibly undefined
// 8048066: variable 'v13' is possibly undefined
// 804807B: variable 'v14' is possibly undefined
// 80480CF: variable 'v3' is possibly undefined
// 80480D3: variable 'v9' is possibly undefined
// 80480E4: variable 'v10' is possibly undefined
// 804804C: using guessed type void __noreturn start();

//----- (080480EE) --------------------------------------------------------
int __usercall sub_80480EE@<eax>(int a1@<eax>, char *a2@<esi>)
{
  char v2; // ah
  char v3; // al

  v2 = a1;
  do
    v3 = *a2++;
  while ( v3 && v3 != v2 );
  return a1;
}

// nfuncs=2 queued=2 decompiled=2 lumina nreq=0 worse=0 better=0
// ALL OK, 2 function(s) have been successfully decompiled
