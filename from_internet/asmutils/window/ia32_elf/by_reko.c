// subject_seg08048000_0000.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

Eq_199 g_t804804C = // 0804804C
	{
		
		{
			0x02
		},
	};
Eq_199 g_t804807C = // 0804807C
	{
		
		{
			0x02
		},
	};
Eq_199 g_t80480BF = // 080480BF
	{
		
		{
			0x02
		},
	};
// 080480DD: void fn080480DD()
void fn080480DD()
{
	fn080481FE();
	word32 edx_15 = g_dw8048343;
	fn0804830A(0x00);
	struct Eq_13 * esp_9 = (struct Eq_13 *) <invalid>;
	word32 ecx_23;
	word16 * edi_24 = g_a804834F;
	for (ecx_23 = edx_15; ecx_23 != 0x00; --ecx_23)
	{
		*edi_24 = 0x1BB0;
		++edi_24;
	}
	fn08048160();
	fn08048318(0x00);
	do
	{
		do
		{
			esp_9->dwFFFFFFFC = 0x01;
			esp_9->dwFFFFFFFC = 0x03;
			int32 eax_51 = esp_9->dwFFFFFFFC;
			__syscall(0x80);
		} while (eax_51 < 0x00);
		byte al_56 = g_b804834B;
	} while (al_56 != 0x1B && al_56 != 0x0D);
	fn08048318(0x00);
	fn080482A7();
	fn08048159();
}

// 08048159: void fn08048159()
// Called from:
//      fn080480DD
//      fn080481FE
void fn08048159()
{
	__syscall(0x80);
	word16 * edi_11 = fn080482F0(0x0201);
	fn08048171(0x01DB, 0x40, edi_11);
}

// 08048160: void fn08048160()
// Called from:
//      fn080480DD
void fn08048160()
{
	word16 * edi_5 = fn080482F0(0x0201);
	fn08048171(0x01DB, 0x40, edi_5);
}

// 08048171: Register cui16 fn08048171(Register cui16 ax, Register word32 ecx, Register (ptr32 word16) edi)
// Called from:
//      fn08048159
//      fn08048160
cui16 fn08048171(cui16 ax, word32 ecx, word16 * edi)
{
	for (; ecx != 0x00; --ecx)
	{
		*edi = ax;
		++edi;
	}
	word32 ecx_11 = 0x020B;
	do
	{
		word16 * edi_16 = fn080482F0(ecx_133 + 0x00);
		*edi_16 = 0xDD;
		word16 * edi_112 = edi_16 + 1;
		word32 ecx_113;
		for (ecx_113 = 0x3E; ecx_113 != 0x00; --ecx_113)
		{
			*edi_112 = 0x20;
			++edi_112;
		}
		*edi_112 = 222;
		struct Eq_136 * edi_35 = edi_112 + 1;
		edi_35->b0001 = 0x03;
		edi_35->b0003 = 0x03;
		ecx_11 = ecx_133 - 0x01;
		ecx_133 = ecx_11;
	} while (ecx_133 != ~0x01FF);
	word16 * edi_107 = fn080482F0(0x020C);
	word32 ecx_108;
	for (ecx_108 = 0x40; ecx_108 != 0x00; --ecx_108)
	{
		*edi_107 = 0x01DB;
		++edi_107;
	}
	struct Eq_167 * edi_63 = (char *) edi_107 + 1;
	edi_63->b0000 = 0x03;
	edi_63->b0002 = 0x03;
	word16 * edi_72 = fn080482F0(0x040D);
	word32 ecx_80;
	for (ecx_80 = 0x40; ecx_80 != 0x00; --ecx_80)
	{
		byte * edi_83 = (char *) edi_72 + 1;
		*edi_83 = 0x03;
		edi_72 = (word16 *) (edi_83 + 1);
	}
	fn080482C6(&g_t804804C, edi_83 + 1);
	fn080482C6(&g_t804807C, edi_83 + 1);
	fn080482C6(&g_t80480BF, edi_83 + 1);
	return 0x0103;
}

// 080481FE: void fn080481FE()
// Called from:
//      fn080480DD
void fn080481FE()
{
	__syscall(0x80);
	g_dw8048347 = 0x05;
	__syscall(0x80);
	word32 eax_68 = (word32) g_w804833F;
	g_dw8048343 = SEQ(SLICE(eax_68, word16, 16), SLICE(eax_68, byte, 8) *16 (byte) eax_68);
	__syscall(0x80);
	__syscall(0x80);
	__syscall(0x80);
	g_dw805BBDB &= ~0x0B;
	g_dw805BBD3 |= 0x05;
	g_dw805BBCF &= ~0x0530;
	g_b805BBE5 = 0x00;
	g_b805BBE6 = 0x01;
	__syscall(0x80);
}

// 080482A7: void fn080482A7()
// Called from:
//      fn080480DD
void fn080482A7()
{
	__syscall(0x80);
	__syscall(0x80);
}

// 080482C6: void fn080482C6(Register (ptr32 Eq_199) esi, Register (ptr32 word16) edi)
// Called from:
//      fn08048159
void fn080482C6(struct Eq_199 * esi, word16 * edi)
{
	byte ah_30 = 0x07;
	while (true)
	{
		Eq_277 al_33 = esi->t0000;
		++esi;
		if (al_33 == 0x00)
			break;
		if (al_33 != 0x01)
		{
			word16 ax_63 = SEQ(ah_30, al_33);
			if (al_33 == 0x02)
			{
				esi += 2;
				edi = fn080482F0((uint32) esi->t0000);
			}
			else
			{
				*edi = ax_63;
				++edi;
			}
		}
		else
		{
			++esi;
			ah_30 = (byte) esi->t0000;
		}
	}
}

// 080482F0: Register ui32 fn080482F0(Register uint32 ecx)
// Called from:
//      fn08048159
//      fn08048160
//      fn080482C6
//      fn08048326
ui32 fn080482F0(uint32 ecx)
{
	byte ch_13 = SLICE(ecx, byte, 8);
	return (SEQ(SLICE(ecx, word16, 16), g_b8048340 *16 (byte) ecx) + (word32) ch_13 << 0x01) + 0x0804834F;
}

// 0804830A: void fn0804830A(Register uint32 ecx)
// Called from:
//      fn080480DD
void fn0804830A(uint32 ecx)
{
	fn08048326(ecx);
	__syscall(0x80);
}

// 08048318: void fn08048318(Register uint32 ecx)
// Called from:
//      fn080480DD
void fn08048318(uint32 ecx)
{
	fn08048326(ecx);
	__syscall(0x80);
}

// 08048326: void fn08048326(Register uint32 ecx)
// Called from:
//      fn0804830A
//      fn08048318
void fn08048326(uint32 ecx)
{
	fn080482F0(ecx);
}

word16 g_w804833F = 0x00; // 0804833F
bu8 g_b8048340 = 0x00; // 08048340
word32 g_dw8048343 = 0x00; // 08048343
word32 g_dw8048347 = 0x00; // 08048347
byte g_b804834B = 0x00; // 0804834B
word16 g_a804834F[] = // 0804834F
	{
	};
// subject_seg08048000_0001.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

ui32 g_dw805BBCF = 0x00; // 0805BBCF
ui32 g_dw805BBD3 = 0x00; // 0805BBD3
ui32 g_dw805BBDB = 0x00; // 0805BBDB
byte g_b805BBE5 = 0x00; // 0805BBE5
byte g_b805BBE6 = 0x00; // 0805BBE6
