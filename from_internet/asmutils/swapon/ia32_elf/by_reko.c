// subject_seg08048000.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0804804C: void fn0804804C(Stack (ptr32 Eq_2) dwArg04)
void fn0804804C(struct Eq_2 * dwArg04)
{
	struct Eq_2 * esi_11 = dwArg04;
	struct Eq_4 * esp_136 = fp + 8;
	do
	{
		esi_11 = esi_152 + 1;
		esi_152 = esi_11;
	} while (esi_152->b0000 != 0x00);
	while (true)
	{
		struct Eq_4 * esp_119;
		Eq_17 eax_47;
		struct Eq_4 * esp_127 = esp_136 + 1;
		if (esp_136->dw0000 == 0x00)
			break;
		if (esi_11->wFFFFFFF9 == 0x6B6D)
		{
			esp_127->dwFFFFFFFC = 0x02;
			esp_127->dwFFFFFFFC = 0x05;
			int32 eax_33 = esp_127->dwFFFFFFFC;
			__syscall(0x80);
			if (eax_33 < 0x00)
				break;
			esp_127->dwFFFFFFFC = 0x02;
			esp_127->dwFFFFFFFC = 0x13;
			eax_47 = esp_127->dwFFFFFFFC;
			__syscall(0x80);
			esp_119 = esp_127;
			if (eax_47 < 0x00)
				goto l08048094;
			goto l080480AD;
		}
		if (esi_11->wFFFFFFFD == 0x6666)
		{
			esp_127->dwFFFFFFFC = 115;
			__syscall(0x80);
			esp_136 = esp_127;
		}
		else
		{
			esp_127->dwFFFFFFFC = 0x57;
			__syscall(0x80);
			esp_136 = esp_127;
		}
	}
	while (true)
	{
l080480A6:
		union Eq_17 * esp_66 = esp_127 - 4;
		*esp_66 = 0x01;
		eax_47 = *esp_66;
		__syscall(0x80);
		esp_119 = (struct Eq_4 *) ((char *) esp_66 + 4);
l080480AD:
		struct Eq_100 * esp_81 = esp_119 - 4;
		esp_81->dw0000 = 0x13;
		int32 eax_83 = esp_81->dw0000;
		__syscall(0x80);
		uint32 edi_72 = eax_47 >> 0x0C;
		esp_119 = (struct Eq_4 *) (&esp_81->dw0000 + 1);
		if (eax_83 >= 0x00)
		{
			esp_81->dw0000 = 0x01;
			esp_81->dwFFFFFFFC = 0x04;
			esp_81->dwFFFFFFFC = 0x04;
			__syscall(0x80);
			esp_81->dwFFFFFFFC = edi_72 - 0x01;
			esp_81->dwFFFFFFF8 = 0x04;
			esp_81->dwFFFFFFF8 = 0x04;
			__syscall(0x80);
			esp_81->dwFFFFFFF8 = 0x13;
			__syscall(0x80);
			esp_81->dwFFFFFFF8 = 0x04;
			int32 eax_118 = esp_81->dwFFFFFFF8;
			__syscall(0x80);
			esp_119 = esp_81 - 4;
			if (eax_118 >= 0x00)
			{
				esp_81->dwFFFFFFF8 = 0x06;
				__syscall(0x80);
				esp_127 = esp_81 - 4;
				goto l080480A6;
			}
		}
l08048094:
		word32 * esp_55 = esp_119 - 4;
		*esp_55 = 0x02;
		*esp_55 = 0x04;
		__syscall(0x80);
		esp_127 = (struct Eq_4 *) (esp_55 + 1);
	}
}

