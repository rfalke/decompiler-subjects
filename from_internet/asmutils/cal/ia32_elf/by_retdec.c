//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
//

#include <stdbool.h>
#include <stdint.h>

// ------------------- Function Prototypes --------------------

int32_t entry_point(int32_t a1, int32_t a2, int32_t a3, int32_t a4);
int32_t function_80482d0(void);
int32_t function_80482ec(void);

// --------------------- Global Variables ---------------------

int16_t * g1 = (int16_t *)0x1f0000; // 0x804804c
int32_t g2 = 0x1f0000; // 0x8048066
int32_t g3 = 0x206e614a; // 0x8048080
int32_t g4 = 0x20202020; // 0x80480b6
int32_t g5 = 0; // 0x8048301
int64_t g6 = 0; // 0x8048315
int32_t g7 = 0; // 0x8048319
int32_t g8 = 0; // 0x804831d
int32_t g9 = 0; // 0x8048321
int32_t g10 = 0; // 0x8048335

// ------------------------ Functions -------------------------

// Address range: 0x8048158 - 0x80482d0
int32_t entry_point(int32_t a1, int32_t a2, int32_t a3, int32_t a4) {
    int32_t v1 = a2;
    int32_t v2; // 0x8048158
    int32_t * v3; // 0x8048158
    if (a1 != 3) {
        // 0x8048198
        __asm_int(128);
        v2 = g5 - 0x4650;
        v3 = &v1;
    } else {
        // 0x804815e
        function_80482ec();
        function_80482ec();
        v2 = 0;
        int32_t v4; // bp+16, 0x8048158
        v3 = &v4;
    }
    int32_t * v5 = (int32_t *)((int32_t)v3 - 4); // 0x80481bc
    uint16_t v6 = (int16_t)(v2 / 0x15180);
    g9 = (v6 + 4) % 7;
    uint32_t v7 = v2 / 0x1e13380; // 0x80481d2
    int32_t v8 = v7 + 1970; // 0x80481d6
    g8 = v8;
    *v5 = 4;
    unsigned char v9 = (char)v7 + 2;
    int32_t v10 = (int32_t)(v6 % 365) - (int32_t)(v9 / 4); // 0x80481ee
    int32_t v11 = v10; // 0x80481f9
    int32_t v12 = (int32_t)&g1; // 0x80481f9
    if (v9 % 4 == 0) {
        // 0x80481fb
        g10 = 1;
        v11 = v10 + 1;
        v12 = &g2;
    }
    int32_t v13 = v11;
    *v5 = 12;
    int32_t v14 = v8; // 0x804820f
    int32_t v15 = 12; // 0x804820f
    int32_t v16 = v12 + 22; // 0x804820f
    int32_t v17 = (int32_t)*(int16_t *)v16; // 0x8048210
    v14 = v14 & -0x10000 | v17;
    int32_t v18 = v15; // 0x8048215
    while (v13 <= v14) {
        // 0x8048217
        v15--;
        v16 -= 2;
        v18 = 0;
        if (v15 == 0) {
            // break -> 0x8048219
            break;
        }
        v17 = (int32_t)*(int16_t *)v16;
        v14 = v14 & -0x10000 | v17;
        v18 = v15;
    }
    int32_t v19 = v18 - 1;
    g7 = v19;
    g6 = ((v13 - v17) % 0x10000 | v13 & -0x10000) + 1;
    int32_t v20 = v14; // 0x8048237
    if (v18 != 0) {
        // .lr.ph
        v20 = *(int32_t *)(4 * v19 + (int32_t)&g3);
    }
    // 0x804826e
    g4 = v20;
    *v5 = 3;
    function_80482d0();
    *v5 = 7;
    int32_t v21 = g10 != 1 ? (int32_t)&g1 : (int32_t)&g2;
    int32_t v22 = g7 + 1; // 0x804829a
    int32_t v23 = v21 | 2; // 0x804829a
    int32_t v24 = (int32_t)*(int16_t *)v21;
    int32_t v25 = (int32_t)*(int16_t *)v23; // 0x804829b
    v22--;
    int32_t v26 = v24; // 0x804829e
    v23 += 2;
    while (v22 != 0) {
        // 0x804829b
        v24 = v25;
        v25 = v26 & -0x10000 | (int32_t)*(int16_t *)v23;
        v22--;
        v26 = v24;
        v23 += 2;
    }
    // 0x80482a0
    *v5 = 1;
    int32_t v27 = v25 - v24; // 0x80482a8
    function_80482d0();
    while (v27 != 1) {
        // 0x80482a9
        v27--;
        function_80482d0();
    }
    // 0x80482b7
    *v5 = 4;
    __asm_int(128);
    *v5 = 1;
    __asm_int(128);
    return 1;
}

// Address range: 0x80482d0 - 0x80482ec
int32_t function_80482d0(void) {
    int32_t v1; // 0x80482d0
    uint32_t v2 = v1;
    int32_t v3 = v2 / 10; // 0x80482d9
    int32_t v4; // 0x80482d0
    *(char *)v4 = (char)(v2 % 10) | 48;
    int32_t v5 = v4 - 1; // 0x80482de
    int32_t v6; // 0x80482d0
    int32_t v7 = v6 - 1; // 0x80482e0
    // 0x80482d0
    while (v7 != 0) {
        // 0x80482d7
        v2 = v3;
        v3 = v2 / 10;
        *(char *)v5 = (char)(v2 % 10) | 48;
        v5--;
        v7--;
    }
    if (v2 >= 10) {
        // 0x80482e6
        *(char *)v5 = (char)v3 + 48;
    }
    // 0x80482e9
    int32_t result; // 0x80482d0
    return result;
}

// Address range: 0x80482ec - 0x8048301
int32_t function_80482ec(void) {
    // 0x80482ec
    int32_t result; // 0x80482ec
    if (*(char *)result < 48) {
        // 0x80482ff
        return result;
    }
    int32_t v1; // 0x80482ec
    bool v2; // 0x80482ec
    int32_t v3 = v1 + (v2 ? -1 : 1); // 0x80482f1
    // 0x80482f6
    while (*(char *)v3 >= 48) {
        // 0x80482f6
        v3 += (v2 ? -1 : 1);
    }
    // 0x80482ff
    return result;
}

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: upx (3.xx)
// Detected functions: 3

