// subject_seg08048000.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0804804C: void fn0804804C(Register word24 eax_24_8, Stack word32 dwArg00, Stack (ptr32 Eq_4) dwArg04)
void fn0804804C(word24 eax_24_8, word32 dwArg00, struct Eq_4 * dwArg04)
{
	word32 edi_126 = 0x00;
	word32 ebp_100 = dwArg00;
	struct Eq_4 * esi_105 = dwArg04;
	word32 * esp_10 = fp + 8;
	do
	{
		byte al_13 = esi_105->b0000;
		++esi_105;
		word16 * eax_154 = SEQ(eax_24_8, al_13);
	} while (al_13 != 0x00);
	word16 * ebx_19 = (word16 *) ~0x011E2152;
	word32 ecx_137 = 672274793;
	word32 edx_135 = 19088743;
	while (true)
	{
		word32 edx_41;
		--ebp_100;
		if (ebp_100 == 0x00)
			break;
		eax_154 = *esp_10;
		++esp_10;
		if (*eax_154 == 0x702D)
			goto l08048091;
		if (*eax_154 != 0x662D)
			break;
		++edi_126;
	}
	if (esi_105->dwFFFFFFFB == 0x746C6168)
		edx_41 = 3454992675;
	else
	{
		if (esi_105->wFFFFFFFD != 0x6666)
			goto l080480AE;
l08048091:
		edx_41 = 1126301404;
	}
	struct Eq_160 * esp_46 = esp_10 - 4;
	esp_46->dw0000 = edx_41;
	esp_46->dwFFFFFFFC = 88;
	__syscall(0x80);
	edx_135 = esp_46->dw0000;
	esp_10 = (word32 *) (&esp_46->dw0000 + 1);
l080480A2:
	word16 ** esp_56 = esp_10 - 4;
	*esp_56 = (word16 **) (word16 *) 88;
	word16 * eax_58 = *esp_56;
	__syscall(0x80);
	*esp_56 = (word16 **) (word16 *) 0x01;
	eax_154 = (word16 *) *esp_56;
	__syscall(0x80);
	ebx_19 = eax_58;
	esp_10 = (word32 *) ((char *) esp_56 + 4);
l080480AE:
	if (edi_126 == 0x00)
	{
		struct Eq_85 * esp_75 = esp_10 - 4;
		esp_75->ptr0000 = eax_154;
		esp_75->dwFFFFFFFC = ecx_137;
		esp_75->dwFFFFFFF8 = edx_135;
		esp_75->ptrFFFFFFF4 = ebx_19;
		esp_75->ptrFFFFFFF0 = esp_10;
		esp_75->dwFFFFFFEC = ebp_100;
		esp_75->ptrFFFFFFE8 = esi_105;
		esp_75->dwFFFFFFE4 = edi_126;
		esp_75->dwFFFFFFE0 = 0x02;
		esp_75->dwFFFFFFE0 = 0x01;
		esp_75->dwFFFFFFE0 = 0x25;
		__syscall(0x80);
		__syscall(0x80);
		edi_126 = esp_75->dwFFFFFFE4;
		esi_105 = esp_75->ptrFFFFFFE8;
		ebp_100 = esp_75->dwFFFFFFEC;
		edx_135 = esp_75->dwFFFFFFF8;
		ecx_137 = esp_75->dwFFFFFFFC;
		esp_75->ptr0000 = (word16 *) 0x24;
		__syscall(0x80);
		esp_10 = (word32 *) ((char *) &esp_75->ptr0000 + 4);
	}
	goto l080480A2;
}

