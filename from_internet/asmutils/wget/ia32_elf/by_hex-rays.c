/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

void __noreturn start(); // weak
// char __usercall sub_804817C@<al>(int@<edi>, int@<esi>);

//-------------------------------------------------------------------------
// Data declarations

int fd; // idb


//----- (0804804C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __noreturn start()
{
  int v0; // eax
  int v1; // [esp+1FE4h] [ebp-10h]
  int v2; // [esp+1FECh] [ebp-8h]
  _WORD v3[2]; // [esp+1FF0h] [ebp-4h] BYREF

  if ( v1 == 3 )
  {
    __asm { int     80h; LINUX - sys_socket }
    fd = 102;
    v3[1] = 20480;
    v3[0] = 2;
    sub_804817C((int)v3, v2);
    __asm { int     80h; LINUX - sys_connect }
  }
  v0 = sys_exit(0);
}
// 8048050: positive sp value 10 has been found
// 8048053: variable 'v1' is possibly undefined
// 8048082: variable 'v2' is possibly undefined
// 804804C: using guessed type void __noreturn start();

//----- (0804817C) --------------------------------------------------------
char __usercall sub_804817C@<al>(int a1@<edi>, int a2@<esi>)
{
  int v2; // edx
  int i; // ecx
  char j; // bl
  unsigned __int8 v5; // al
  bool v6; // cf
  char result; // al

  v2 = 0;
  for ( i = 0; i != 4; ++i )
  {
    for ( j = 0; ; j = result + 10 * j )
    {
      v5 = *(_BYTE *)(a2 + v2++);
      v6 = v5 < 0x30u;
      result = v5 - 48;
      if ( v6 )
        break;
    }
    *(_BYTE *)(a1 + i + 4) = j;
  }
  return result;
}

// nfuncs=2 queued=2 decompiled=2 lumina nreq=0 worse=0 better=0
// ALL OK, 2 function(s) have been successfully decompiled
