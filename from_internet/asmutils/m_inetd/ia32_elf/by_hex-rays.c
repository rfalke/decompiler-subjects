/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

void __noreturn start(); // weak
// unsigned int __usercall sub_804821E@<eax>(unsigned int@<eax>, _BYTE *@<edi>);
// int __usercall sub_8048236@<eax>(unsigned __int8 *@<ebp>);
// char __usercall sub_8048253@<al>(_BYTE *@<edi>, char *@<esi>);

//-------------------------------------------------------------------------
// Data declarations

char byte_8049271[3]; // weak
uid_t old_fd; // idb
int dword_8049299; // weak
char byte_80492A1; // weak


//----- (0804804C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __noreturn start()
{
  int v0; // eax
  int v1; // [esp-14h] [ebp-14h]
  unsigned __int8 *v2; // [esp-Ch] [ebp-Ch]
  unsigned __int8 *v3; // [esp-8h] [ebp-8h]

  if ( v1 >= 4 && v1 <= 5 )
  {
    if ( v1 >= 5 )
    {
      byte_80492A1 = v1;
      dword_8049299 = (int)byte_8049271;
    }
    old_fd = sub_8048236(v2);
    sub_8048236(v3);
    __asm
    {
      int     80h; LINUX - sys_socket
      int     80h; LINUX - sys_setsockopt
    }
  }
  v0 = sys_exit(1);
}
// 80480FE: positive sp value 14 has been found
// 8048050: variable 'v1' is possibly undefined
// 804806A: variable 'v2' is possibly undefined
// 8048075: variable 'v3' is possibly undefined
// 804804C: using guessed type void __noreturn start();
// 8049261: using guessed type int dword_8049261;
// 8049299: using guessed type int dword_8049299;
// 80492A1: using guessed type char byte_80492A1;

//----- (0804821E) --------------------------------------------------------
unsigned int __usercall sub_804821E@<eax>(unsigned int a1@<eax>, _BYTE *a2@<edi>)
{
  int v2; // ecx
  unsigned int v3; // et2
  unsigned int v4; // edx
  unsigned int result; // eax

  v2 = 0;
  do
  {
    v3 = a1 % 0xA;
    a1 /= 0xAu;
    v4 = v3;
    LOBYTE(v4) = v3 + 48;
    ++v2;
  }
  while ( a1 );
  do
  {
    result = v4;
    *a2++ = v4;
    --v2;
  }
  while ( v2 );
  return result;
}

//----- (08048236) --------------------------------------------------------
int __usercall sub_8048236@<eax>(unsigned __int8 *a1@<ebp>)
{
  int result; // eax
  int i; // ebx
  unsigned __int8 v3; // bl
  bool v4; // cf

  result = 0;
  for ( i = 0; ; result = i + 10 * result )
  {
    v3 = *a1++;
    v4 = v3 < 0x30u;
    LOBYTE(i) = v3 - 48;
    if ( v4 || (char)i > 9 )
      break;
  }
  return result;
}

//----- (08048253) --------------------------------------------------------
char __usercall sub_8048253@<al>(_BYTE *a1@<edi>, char *a2@<esi>)
{
  char result; // al

  while ( 1 )
  {
    result = *a2++;
    if ( !result )
      break;
    *a1++ = result;
  }
  return result;
}

// nfuncs=4 queued=4 decompiled=4 lumina nreq=0 worse=0 better=0
// ALL OK, 4 function(s) have been successfully decompiled
