/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall sub_804804C(int@<edi>);
// unsigned int __usercall sub_804805C@<eax>(unsigned int@<eax>, _WORD *@<edi>);
int __fastcall sub_80480A7(int);

//-------------------------------------------------------------------------
// Data declarations

char aEax[7] = "EAX\t:\t"; // weak
char byte_8048185[3] = { '\n', '-', '-' }; // weak
int dword_80482B6; // weak
__int16 word_8048302; // weak


//----- (0804804C) --------------------------------------------------------
void __usercall sub_804804C(int a1@<edi>)
{
  _BYTE *v1; // edi

  v1 = (_BYTE *)(a1 - 1);
  do
    ++v1;
  while ( *v1 );
}

//----- (0804805C) --------------------------------------------------------
unsigned int __usercall sub_804805C@<eax>(unsigned int a1@<eax>, _WORD *a2@<edi>)
{
  char *v2; // edi
  unsigned int v3; // esi
  unsigned int v4; // edx
  _BYTE *v7; // edi
  unsigned int v8; // ecx
  char *v9; // edi
  _BYTE *v10; // et1
  char *v11; // esi
  char v12; // al
  char *v14; // [esp-28h] [ebp-28h]
  unsigned int v15; // [esp-24h] [ebp-24h]

  *a2 = 30768;
  v2 = (char *)(a2 + 1);
  v14 = v2;
  v15 = a1;
  v3 = 0;
  do
  {
    ++v3;
    v4 = v15 % 0x10;
    v15 /= 0x10u;
    _AL = v4 - (((unsigned __int8)v4 < 0xAu) + 105);
    __asm { das }
    *v2++ = _AL;
  }
  while ( v15 );
  *v2 = 0;
  v7 = v2 + 1;
  v8 = v3 >> 1;
  if ( v3 >> 1 )
  {
    v10 = v7;
    v9 = v14;
    v11 = v10 - 2;
    do
    {
      v12 = *v11;
      *v11 = *v9;
      *v9++ = v12;
      --v11;
      --v8;
    }
    while ( v8 );
  }
  return a1;
}
// 804805C: could not find valid save-restore pair for edi

//----- (080480A7) --------------------------------------------------------
int __fastcall sub_80480A7(int a1)
{
  unsigned int *v1; // esi
  char *v2; // ebp
  char *v3; // ecx
  int v4; // eax
  unsigned int v5; // eax
  size_t v6; // edx
  int v7; // eax
  int result; // eax
  int v9; // [esp-4h] [ebp-4h]

  v1 = (unsigned int *)&dword_80482B6;
  v2 = aEax;
  do
  {
    v9 = a1;
    v3 = v2;
    do
      ++v2;
    while ( *v2 );
    v4 = sys_write(1, v3, v2 - v3);
    ++v2;
    v5 = *v1++;
    sub_804805C(v5, &word_8048302);
    sub_804804C((int)&word_8048302);
    v7 = sys_write(1, &word_8048302, v6);
    result = sys_write(1, byte_8048185, 1u);
    a1 = v9 - 1;
  }
  while ( v9 != 1 );
  return result;
}
// 80480E0: variable 'v6' is possibly undefined
// 80482B6: using guessed type int dword_80482B6;
// 8048302: using guessed type __int16 word_8048302;

// nfuncs=3 queued=3 decompiled=3 lumina nreq=0 worse=0 better=0
// ALL OK, 3 function(s) have been successfully decompiled
