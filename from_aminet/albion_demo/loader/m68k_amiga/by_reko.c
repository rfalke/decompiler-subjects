// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00001000: void fn00001000(Register word32 a5)
void fn00001000(word32 a5)
{
	int32 d0_171;
	word32 d0_9 = OpenLibrary(0x1164, 39);
	if (d0_9 == 0x00)
		d0_171 = 0x0C;
	else
	{
		int32 d0_54;
		g_dw15E8 = d0_9;
		ui32 d0_22 = SuperState();
		if (d0_22 == 0x00)
			d0_54 = -1;
		else
		{
			int32 d0_40;
			(*((word32) (d0_22 << 0x02) + 4))();
			UserState(d0_40);
			d0_54 = d0_40;
		}
		if (d0_54 == 0x00)
		{
l000010EC:
			word32 d0_138 = g_dw15E8;
			if (d0_138 != 0x00)
			{
				CloseLibrary(d0_138);
				g_dw15E8 = 0x00;
			}
			return;
		}
		d0_171 = -(d0_54 + 0x01);
	}
	struct Eq_24 * a0_158 = &g_t11C8;
	while (true)
	{
		int32 v15_71 = a0_158->dw0000;
		a0_158 += 4;
		if (v15_71 < 0x00 || v15_71 - d0_171 == 0x00)
			break;
		do
		{
			a0_158 = a0_241 + 1;
			a0_241 = a0_158;
		} while (a0_241->dw0000 != 0x00);
		if (!__btst((byte) a0_158, 0x00))
			++a0_158;
	}
	word32 d0_91 = Supervisor(a0_158);
	if (d0_91 != 0x00)
	{
		g_dw15EC = d0_91;
		fn0000112A(&g_t1196);
		fn0000112A(a0_158);
		fn0000112A(&g_t11AE);
		fn0000110C();
		execPrivate1();
	}
	goto l000010EC;
}

// 0000110C: void fn0000110C()
// Called from:
//      fn00001000
void fn0000110C()
{
	execPrivate2();
}

// 0000112A: void fn0000112A(Register (ptr32 Eq_24) a0)
// Called from:
//      fn00001000
void fn0000112A(struct Eq_24 * a0)
{
	if (fn00001156(a0) != 0x00)
		execPrivate3();
}

// 00001156: Register int32 fn00001156(Register (ptr32 Eq_24) a0)
// Called from:
//      fn0000112A
int32 fn00001156(struct Eq_24 * a0)
{
	int32 d0_6 = -1;
	do
	{
		++d0_6;
		a0 = a0_27 + 1;
		a0_27 = a0;
	} while (a0_27->dw0000 != 0x00);
	return d0_6;
}

struct Eq_24 g_t1196 = // 00001196
	{
		0x416E2065,
	};
struct Eq_24 g_t11AE = // 000011AE
	{
		168448114,
	};
struct Eq_24 g_t11C8 = // 000011C8
	{
		0x00,
	};
word32 g_dw15E8 = 0x00; // 000015E8
word32 g_dw15EC = 0x00; // 000015EC
