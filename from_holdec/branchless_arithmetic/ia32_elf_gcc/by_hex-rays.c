/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

int sub_8049030();
// int printf(const char *format, ...);
// int puts(const char *s);
// int __cdecl __libc_start_main(int (__cdecl *main)(int, char **, char **), int argc, char **ubp_av, void (*init)(void), void (*fini)(void), void (*rtld_fini)(void), void *stack_end);
int __cdecl main(int argc, const char **argv, const char **envp);
// void __usercall __noreturn start(int@<eax>, void (*)(void)@<edx>);
void sub_80492D7();
int __cdecl sat_addu32b(int, int);
unsigned int __cdecl sat_subu32b(unsigned int a1, unsigned int a2);
unsigned int __cdecl sat_divu32b(unsigned int a1, unsigned int a2);
unsigned int __cdecl sat_mulu32b(unsigned int a1, unsigned int a2);
__int64 __cdecl sat_addu64b(__int64, __int64);
unsigned __int64 __cdecl sat_subu64b(unsigned __int64 a1, __int64 a2);
unsigned __int64 __cdecl sat_divu64b(unsigned __int64, unsigned __int64);
int __cdecl sat_adds32b_var1(int, int);
unsigned int __cdecl sat_adds32b_var2(unsigned int a1, int a2);
unsigned int __cdecl sat_adds32b_var3(unsigned int a1, int a2);
unsigned int __cdecl sat_subs32b(unsigned int a1, int a2);
int __cdecl sat_divs32b(int, int);
unsigned int __cdecl sat_muls32b(unsigned int, int);
int __cdecl sat_adds64b(__int64, __int64);
__int64 __cdecl sat_subs64b(__int64, __int64);
__int64 __cdecl sat_divs64b(__int64, __int64);
int __cdecl abs32(int);
int __cdecl abs64(__int64);
unsigned int __cdecl sgn32(unsigned int a1);
__int64 __cdecl sgn64(__int64);
// int _libc_csu_init();
// void _libc_csu_fini();
void _x86_get_pc_thunk_bp();

//-------------------------------------------------------------------------
// Data declarations

int (*dword_804C008)(void) = NULL; // weak


//----- (08049030) --------------------------------------------------------
int sub_8049030()
{
  return dword_804C008();
}
// 804C008: using guessed type int (*dword_804C008)(void);

//----- (08049070) --------------------------------------------------------
int __cdecl main(int argc, const char **argv, const char **envp)
{
  int v3; // eax
  unsigned int v4; // eax
  unsigned int v5; // eax
  unsigned int v6; // eax
  unsigned int v7; // edi
  unsigned int v8; // esi
  int v9; // eax
  unsigned int v10; // eax
  unsigned int v11; // eax
  int v12; // eax
  int v13; // eax
  unsigned int v14; // eax
  __int64 v15; // rax
  unsigned __int64 v16; // kr00_8
  unsigned __int64 v17; // kr08_8
  __int64 v18; // rax
  __int64 v19; // kr10_8
  __int64 v20; // kr18_8
  __int64 v21; // rax

  v3 = sat_addu32b(-1, 3);
  printf("sat_addu32b(0x%08x,0x%08x) = 0x%08x\n", -1, 3, v3);
  v4 = sat_subu32b(1u, 3u);
  printf("sat_subu32b(0x%08x,0x%08x) = 0x%08x\n", 1, 3, v4);
  v5 = sat_mulu32b(0xFFFFFFFF, 3u);
  printf("sat_mulu32b(0x%08x,0x%08x) = 0x%08x\n", -1, 3, v5);
  v6 = sat_divu32b(0xFFFFFFFF, 3u);
  printf("sat_divu32b(0x%08x,0x%08x) = 0x%08x\n", -1, 3, v6);
  v7 = sat_adds32b_var3(0x7FFFFFFFu, 2);
  v8 = sat_adds32b_var2(0x7FFFFFFFu, 2);
  v9 = sat_adds32b_var1(0x7FFFFFFF, 2);
  printf("sat_adds32b(0x%08x,0x%08x) = 0x%08x 0x%08x 0x%08x\n", 0x7FFFFFFF, 2, v9, v8, v7);
  v10 = sat_subs32b(0x80000000, 2);
  printf("sat_subs32b(0x%08x,0x%08x) = 0x%08x\n", 0x80000000, 2, v10);
  v11 = sat_muls32b(0x7FFFFFFFu, 2);
  printf("sat_muls32b(0x%08x,0x%08x) = 0x%08x\n", 0x7FFFFFFF, 2, v11);
  v12 = sat_divs32b(0x80000000, -1);
  printf("sat_divs32b(0x%08x,0x%08x) = 0x%08x\n", 0x80000000, -1, v12);
  v13 = abs32(-16);
  printf("abs32(0x%08x) = 0x%08x\n", -16, v13);
  v14 = sgn32(3u);
  printf("sgn32(0x%08x) = 0x%08x\n", 3, v14);
  v15 = sat_addu64b(0LL, 0LL);
  v16 = sat_subu64b(0LL, 0LL) + v15;
  v17 = sat_divu64b(0LL, 1uLL) + v16;
  LODWORD(v18) = sat_adds64b(0LL, 0LL);
  v19 = sat_subs64b(0LL, 0LL) + v18 + v17;
  v20 = sat_divs64b(0LL, 1LL) + v19;
  LODWORD(v21) = abs64(0LL);
  if ( v21 + v20 + sgn64(0LL) == 42 )
    puts("not reached");
  return 0;
}
// 8049228: variable 'v18' is possibly undefined
// 8049260: variable 'v21' is possibly undefined

//----- (080492A0) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn start(int a1@<eax>, void (*a2)(void)@<edx>)
{
  int v2; // esi
  int v3; // [esp-4h] [ebp-4h] BYREF
  char *retaddr; // [esp+0h] [ebp+0h] BYREF

  v2 = v3;
  v3 = a1;
  __libc_start_main(
    (int (__cdecl *)(int, char **, char **))main,
    v2,
    &retaddr,
    (void (*)(void))_libc_csu_init,
    _libc_csu_fini,
    a2,
    &v3);
  __halt();
}
// 80492A7: positive sp value 4 has been found

//----- (080492D7) --------------------------------------------------------
void sub_80492D7()
{
  ;
}

//----- (080493C0) --------------------------------------------------------
int __cdecl sat_addu32b(int a1, int a2)
{
  return __CFADD__(a1, a2) ? -1 : a1 + a2;
}

//----- (080493D0) --------------------------------------------------------
unsigned int __cdecl sat_subu32b(unsigned int a1, unsigned int a2)
{
  return a1 >= a2 ? a1 - a2 : 0;
}

//----- (080493F0) --------------------------------------------------------
unsigned int __cdecl sat_divu32b(unsigned int a1, unsigned int a2)
{
  return a1 / a2;
}

//----- (08049400) --------------------------------------------------------
unsigned int __cdecl sat_mulu32b(unsigned int a1, unsigned int a2)
{
  return (a1 * (unsigned __int64)a2) >> 32 != 0 ? -1 : a1 * a2;
}

//----- (08049420) --------------------------------------------------------
__int64 __cdecl sat_addu64b(__int64 a1, __int64 a2)
{
  return __CFADD__(a1, a2) ? -1 : a1 + a2;
}

//----- (08049450) --------------------------------------------------------
unsigned __int64 __cdecl sat_subu64b(unsigned __int64 a1, __int64 a2)
{
  return a1 >= a1 - a2 ? a1 - a2 : 0;
}

//----- (08049490) --------------------------------------------------------
unsigned __int64 __cdecl sat_divu64b(unsigned __int64 a1, unsigned __int64 a2)
{
  return a1 / a2;
}

//----- (080494B0) --------------------------------------------------------
int __cdecl sat_adds32b_var1(int a1, int a2)
{
  __int64 v2; // rax
  bool v3; // cc

  v2 = a2 + (__int64)a1;
  v3 = v2 > 0x7FFFFFFF;
  if ( v2 > 0x7FFFFFFF )
    LODWORD(v2) = 0x7FFFFFFF;
  if ( v3 )
    HIDWORD(v2) = 0;
  if ( SHIDWORD(v2) < ((unsigned int)v2 < 0x80000000) - 1 )
    LODWORD(v2) = 0x80000000;
  return v2;
}

//----- (080494F0) --------------------------------------------------------
unsigned int __cdecl sat_adds32b_var2(unsigned int a1, int a2)
{
  unsigned int result; // eax

  result = a2 + a1;
  if ( ((a1 ^ a2) & 0x80000000) == 0 && ((result ^ a1) & 0x80000000) != 0 )
    return (a1 >> 31) + 0x7FFFFFFF;
  return result;
}

//----- (08049520) --------------------------------------------------------
unsigned int __cdecl sat_adds32b_var3(unsigned int a1, int a2)
{
  unsigned int v2; // ecx

  v2 = a1 + a2;
  if ( ((((a1 >> 31) + 0x7FFFFFFF) ^ a2 | ~((a1 + a2) ^ a2)) & 0x80000000) == 0 )
    return (a1 >> 31) + 0x7FFFFFFF;
  return v2;
}

//----- (08049550) --------------------------------------------------------
unsigned int __cdecl sat_subs32b(unsigned int a1, int a2)
{
  unsigned int v2; // edx

  v2 = a1 - a2;
  if ( ((((a1 >> 31) + 0x7FFFFFFF) ^ (a1 - a2)) & (((a1 >> 31) + 0x7FFFFFFF) ^ a2) & 0x80000000) != 0 )
    return (a1 >> 31) + 0x7FFFFFFF;
  return v2;
}

//----- (08049580) --------------------------------------------------------
int __cdecl sat_divs32b(int a1, int a2)
{
  return ((((a1 + 0x80000000) | (a2 + 1)) == 0) + a1) / a2;
}

//----- (080495A0) --------------------------------------------------------
unsigned int __cdecl sat_muls32b(unsigned int a1, int a2)
{
  unsigned int v2; // ebx

  v2 = a2 * a1;
  if ( (int)(a2 * a1) >> 31 != (unsigned __int64)(a2 * (__int64)(int)a1) >> 32 )
    return ((a2 ^ a1) >> 31) + 0x7FFFFFFF;
  return v2;
}

//----- (080495D0) --------------------------------------------------------
int __cdecl sat_adds64b(__int64 a1, __int64 a2)
{
  int v2; // esi

  v2 = a2 + a1;
  if ( (((((unsigned __int64)(HIDWORD(a1) >> 31) + 0x7FFFFFFF) >> 32) ^ HIDWORD(a2) | ~(((unsigned __int64)(a2 + a1) >> 32) ^ HIDWORD(a2))) & 0x80000000) == 0LL )
    return (HIDWORD(a1) >> 31) + 0x7FFFFFFF;
  return v2;
}

//----- (08049620) --------------------------------------------------------
__int64 __cdecl sat_subs64b(__int64 a1, __int64 a2)
{
  __int64 result; // rax

  result = a1 - a2;
  if ( (((((unsigned __int64)(HIDWORD(a1) >> 31) + 0x7FFFFFFF) >> 32) ^ ((unsigned __int64)(a1 - a2) >> 32)) & ((((unsigned __int64)(HIDWORD(a1) >> 31) + 0x7FFFFFFF) >> 32) ^ HIDWORD(a2)) & 0x80000000) != 0LL )
    return (HIDWORD(a1) >> 31) + 0x7FFFFFFFLL;
  return result;
}

//----- (08049660) --------------------------------------------------------
__int64 __cdecl sat_divs64b(__int64 a1, __int64 a2)
{
  return (a1 + (((a2 + 1) | (a1 - 0x80000000LL)) == 0)) / a2;
}

//----- (080496C0) --------------------------------------------------------
int __cdecl abs32(int a1)
{
  int result; // eax

  result = -a1;
  if ( a1 > 0 )
    return a1;
  return result;
}

//----- (080496D0) --------------------------------------------------------
int __cdecl abs64(__int64 a1)
{
  __int64 v1; // rax

  v1 = -a1;
  if ( (((unsigned __int64)-a1 >> 32) & 0x80000000) != 0LL )
    LODWORD(v1) = a1;
  return v1;
}

//----- (080496F0) --------------------------------------------------------
unsigned int __cdecl sgn32(unsigned int a1)
{
  return ((int)a1 > 0) - (a1 >> 31);
}

//----- (08049710) --------------------------------------------------------
__int64 __cdecl sgn64(__int64 a1)
{
  return (int)(((unsigned int)((__PAIR64__(SHIDWORD(a1) >> 31, SHIDWORD(a1) >> 31) - a1) >> 32) >> 31)
             - (HIDWORD(a1) >> 31));
}

//----- (08049A15) --------------------------------------------------------
void _x86_get_pc_thunk_bp()
{
  ;
}

// nfuncs=43 queued=25 decompiled=25 lumina nreq=0 worse=0 better=0
// ALL OK, 25 function(s) have been successfully decompiled
