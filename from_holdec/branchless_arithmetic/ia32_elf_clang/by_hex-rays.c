/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

int sub_8049030();
// int printf(const char *format, ...);
// int puts(const char *s);
// int __cdecl __libc_start_main(int (__cdecl *main)(int, char **, char **), int argc, char **ubp_av, void (*init)(void), void (*fini)(void), void (*rtld_fini)(void), void *stack_end);
// void __usercall __noreturn start(int@<eax>, void (*)(void)@<edx>);
void sub_80490A7();
int __cdecl sat_addu32b(int, int);
unsigned int __cdecl sat_subu32b(unsigned int, unsigned int);
unsigned int __cdecl sat_divu32b(unsigned int a1, unsigned int a2);
unsigned int __cdecl sat_mulu32b(unsigned int a1, unsigned int a2);
int __cdecl sat_addu64b(__int64, __int64);
int __cdecl sat_subu64b(unsigned __int64, unsigned __int64);
unsigned __int64 __cdecl sat_divu64b(__int128);
int __cdecl sat_adds32b_var1(int, int);
unsigned int __cdecl sat_adds32b_var2(unsigned int a1, int a2);
unsigned int __cdecl sat_adds32b_var3(unsigned int a1, int a2);
unsigned int __cdecl sat_subs32b(unsigned int a1, int a2);
int __cdecl sat_divs32b(int, int);
int __cdecl sat_muls32b(int, unsigned int);
int __cdecl sat_adds64b(__int64, __int64);
int __cdecl sat_subs64b(__int64, __int64);
__int64 __cdecl sat_divs64b(__int64, __int64);
int __cdecl abs32(int);
int __cdecl abs64(__int64);
int __cdecl sgn32(int);
__int64 __cdecl sgn64(__int64);
int __cdecl main(int argc, const char **argv, const char **envp);
// int _libc_csu_init();
// void _libc_csu_fini();
void _x86_get_pc_thunk_bp();

//-------------------------------------------------------------------------
// Data declarations

__int128 xmmword_804A010 = 0x10000000000000000LL; // weak
int (*dword_804C008)(void) = NULL; // weak


//----- (08049030) --------------------------------------------------------
int sub_8049030()
{
  return dword_804C008();
}
// 804C008: using guessed type int (*dword_804C008)(void);

//----- (08049070) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn start(int a1@<eax>, void (*a2)(void)@<edx>)
{
  int v2; // esi
  int v3; // [esp-4h] [ebp-4h] BYREF
  char *retaddr; // [esp+0h] [ebp+0h] BYREF

  v2 = v3;
  v3 = a1;
  __libc_start_main(
    (int (__cdecl *)(int, char **, char **))main,
    v2,
    &retaddr,
    (void (*)(void))_libc_csu_init,
    _libc_csu_fini,
    a2,
    &v3);
  __halt();
}
// 8049077: positive sp value 4 has been found

//----- (080490A7) --------------------------------------------------------
void sub_80490A7()
{
  ;
}

//----- (08049190) --------------------------------------------------------
int __cdecl sat_addu32b(int a1, int a2)
{
  int result; // eax

  result = -1;
  if ( !__CFADD__(a2, a1) )
    return a2 + a1;
  return result;
}

//----- (080491B0) --------------------------------------------------------
unsigned int __cdecl sat_subu32b(unsigned int a1, unsigned int a2)
{
  unsigned int result; // eax

  result = a1 - a2;
  if ( a1 < a2 )
    return 0;
  return result;
}

//----- (080491C0) --------------------------------------------------------
unsigned int __cdecl sat_divu32b(unsigned int a1, unsigned int a2)
{
  return a1 / a2;
}

//----- (080491D0) --------------------------------------------------------
unsigned int __cdecl sat_mulu32b(unsigned int a1, unsigned int a2)
{
  unsigned int result; // eax

  result = a2 * a1;
  if ( !is_mul_ok(a2, a1) )
    return -1;
  return result;
}

//----- (080491F0) --------------------------------------------------------
int __cdecl sat_addu64b(__int64 a1, __int64 a2)
{
  int result; // eax

  result = a2 + a1;
  if ( __CFADD__(a2, a1) )
    return -1;
  return result;
}

//----- (08049210) --------------------------------------------------------
int __cdecl sat_subu64b(unsigned __int64 a1, unsigned __int64 a2)
{
  int result; // eax

  result = a1 - a2;
  if ( a1 < a2 )
    return 0;
  return result;
}

//----- (08049230) --------------------------------------------------------
unsigned __int64 __cdecl sat_divu64b(__int128 a1)
{
  return (unsigned __int64)a1 / *((_QWORD *)&a1 + 1);
}

//----- (08049250) --------------------------------------------------------
int __cdecl sat_adds32b_var1(int a1, int a2)
{
  int result; // eax

  result = a2 + a1;
  if ( __OFADD__(a2, a1) )
    return (a2 + a1 >= 0) + 0x7FFFFFFF;
  return result;
}

//----- (08049270) --------------------------------------------------------
unsigned int __cdecl sat_adds32b_var2(unsigned int a1, int a2)
{
  unsigned int result; // eax

  result = (a1 >> 31) + 0x7FFFFFFF;
  if ( ((a1 ^ (a2 + a1)) & 0x80000000) == 0 )
    result = a2 + a1;
  if ( ((a1 ^ a2) & 0x80000000) != 0 )
    return a2 + a1;
  return result;
}

//----- (080492A0) --------------------------------------------------------
unsigned int __cdecl sat_adds32b_var3(unsigned int a1, int a2)
{
  unsigned int result; // eax

  result = (a1 >> 31) + 0x7FFFFFFF;
  if ( ((a2 ^ result | ~((a2 + a1) ^ a2)) & 0x80000000) != 0 )
    return a2 + a1;
  return result;
}

//----- (080492D0) --------------------------------------------------------
unsigned int __cdecl sat_subs32b(unsigned int a1, int a2)
{
  unsigned int result; // eax

  result = (a1 >> 31) + 0x7FFFFFFF;
  if ( (((a1 - a2) ^ result) & (result ^ a2) & 0x80000000) == 0 )
    return a1 - a2;
  return result;
}

//----- (08049300) --------------------------------------------------------
int __cdecl sat_divs32b(int a1, int a2)
{
  return (a1 + (((a2 + 1) | a1 ^ 0x80000000) == 0)) / a2;
}

//----- (08049330) --------------------------------------------------------
int __cdecl sat_muls32b(int a1, unsigned int a2)
{
  __int64 v2; // rax

  v2 = a1 * (__int64)(int)a2;
  if ( (int)(a1 * a2) >> 31 != HIDWORD(v2) )
    LODWORD(v2) = ((a1 ^ a2) >> 31) + 0x7FFFFFFF;
  return v2;
}

//----- (08049360) --------------------------------------------------------
int __cdecl sat_adds64b(__int64 a1, __int64 a2)
{
  int result; // eax

  result = (HIDWORD(a1) >> 31) + 0x7FFFFFFF;
  if ( ((HIDWORD(a2) | ~((unsigned __int64)(a1 + a2) >> 32)) & 0x80000000) != 0LL )
    return a1 + a2;
  return result;
}

//----- (080493A0) --------------------------------------------------------
int __cdecl sat_subs64b(__int64 a1, __int64 a2)
{
  int result; // eax

  result = (HIDWORD(a1) >> 31) + 0x7FFFFFFF;
  if ( (HIDWORD(a2) & ((unsigned __int64)(a1 - a2) >> 32) & 0x80000000) == 0LL )
    return a1 - a2;
  return result;
}

//----- (080493D0) --------------------------------------------------------
__int64 __cdecl sat_divs64b(__int64 a1, __int64 a2)
{
  return ((((a2 + 1) | (a1 - 0x80000000LL)) == 0) + a1) / a2;
}

//----- (08049420) --------------------------------------------------------
int __cdecl abs32(int a1)
{
  int result; // eax

  result = -a1;
  if ( -a1 < 1 )
    return a1;
  return result;
}

//----- (08049430) --------------------------------------------------------
int __cdecl abs64(__int64 a1)
{
  return (SHIDWORD(a1) >> 31) ^ ((SHIDWORD(a1) >> 31) + a1);
}

//----- (08049450) --------------------------------------------------------
int __cdecl sgn32(int a1)
{
  return (a1 > 0) + (a1 >> 31);
}

//----- (08049470) --------------------------------------------------------
__int64 __cdecl sgn64(__int64 a1)
{
  return (((_DWORD)a1 != 0) + HIDWORD(a1) > 0) + (SHIDWORD(a1) >> 31);
}

//----- (08049490) --------------------------------------------------------
int __cdecl main(int argc, const char **argv, const char **envp)
{
  int v3; // eax
  unsigned int v4; // eax
  unsigned int v5; // eax
  unsigned int v6; // eax
  int v7; // esi
  unsigned int v8; // edi
  unsigned int v9; // eax
  unsigned int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // esi
  unsigned int v16; // edx
  unsigned int v17; // edi
  __int64 v18; // rax
  unsigned __int64 v19; // kr00_8
  __int64 v20; // rax
  __int64 v21; // kr08_8
  __int64 v22; // rax
  __int64 v23; // kr10_8
  __int64 v24; // rax

  v3 = sat_addu32b(-1, 3);
  printf("sat_addu32b(0x%08x,0x%08x) = 0x%08x\n", -1, 3, v3);
  v4 = sat_subu32b(1u, 3u);
  printf("sat_subu32b(0x%08x,0x%08x) = 0x%08x\n", 1, 3, v4);
  v5 = sat_mulu32b(0xFFFFFFFF, 3u);
  printf("sat_mulu32b(0x%08x,0x%08x) = 0x%08x\n", -1, 3, v5);
  v6 = sat_divu32b(0xFFFFFFFF, 3u);
  printf("sat_divu32b(0x%08x,0x%08x) = 0x%08x\n", -1, 3, v6);
  v7 = sat_adds32b_var1(0x7FFFFFFF, 2);
  v8 = sat_adds32b_var2(0x7FFFFFFFu, 2);
  v9 = sat_adds32b_var3(0x7FFFFFFFu, 2);
  printf("sat_adds32b(0x%08x,0x%08x) = 0x%08x 0x%08x 0x%08x\n", 0x7FFFFFFF, 2, v7, v8, v9);
  v10 = sat_subs32b(0x80000000, 2);
  printf("sat_subs32b(0x%08x,0x%08x) = 0x%08x\n", 0x80000000, 2, v10);
  v11 = sat_muls32b(0x7FFFFFFF, 2u);
  printf("sat_muls32b(0x%08x,0x%08x) = 0x%08x\n", 0x7FFFFFFF, 2, v11);
  v12 = sat_divs32b(0x80000000, -1);
  printf("sat_divs32b(0x%08x,0x%08x) = 0x%08x\n", 0x80000000, -1, v12);
  v13 = abs32(-16);
  printf("abs32(0x%08x) = 0x%08x\n", -16, v13);
  v14 = sgn32(3);
  printf("sgn32(0x%08x) = 0x%08x\n", 3, v14);
  v15 = sat_addu64b(0LL, 0LL);
  v17 = v16;
  LODWORD(v18) = sat_subu64b(0LL, 0LL);
  v19 = __PAIR64__(v17, v15) + v18 + sat_divu64b(xmmword_804A010);
  LODWORD(v20) = sat_adds64b(0LL, 0LL);
  v21 = v19 + v20;
  LODWORD(v22) = sat_subs64b(0LL, 0LL);
  v23 = v21 + v22 + sat_divs64b(0LL, 1LL);
  LODWORD(v24) = abs64(0LL);
  if ( v23 + v24 + sgn64(0LL) == 42 )
    puts("not reached");
  return 0;
}
// 804960E: variable 'v16' is possibly undefined
// 8049628: variable 'v18' is possibly undefined
// 8049660: variable 'v20' is possibly undefined
// 804967A: variable 'v22' is possibly undefined
// 80496AF: variable 'v24' is possibly undefined
// 804A010: using guessed type __int128 xmmword_804A010;

//----- (080499C5) --------------------------------------------------------
void _x86_get_pc_thunk_bp()
{
  ;
}

// nfuncs=43 queued=25 decompiled=25 lumina nreq=0 worse=0 better=0
// ALL OK, 25 function(s) have been successfully decompiled
