// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 004010A0: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	__rol(dx, 0x09);
	ui32 edx_7 = __ror(~0x06F0, 0x04);
	ui32 esi_13 = __ror(2952551554, 0x03);
	ui32 edi_20 = fp & __ror(2040, 0x03);
	union Eq_43 ** eax_25 = __rol(0x25FE, 0x07) + edi_20;
	word16 di_21 = (word16) edi_20;
	word32 esi_26 = -esi_13;
	union Eq_43 * ecx_28 = *eax_25;
	ui32 eax_265 = eax_25 & 3623043231;
	word16 ax_266 = (word16) (eax_25 & 3623043231);
	while (true)
	{
		ecx_28 = (union Eq_43 *) ((char *) ecx_28 + 0x01);
		di_21 = di_21 - 0x33;
		if (*ecx_28 == edx_7)
			break;
		ui32 eax_261 = DPB(eax_265, __ror(ax_266, 0x0E), 0);
		if (*ecx_28 == esi_26)
		{
			do
				;
			while (*(ecx_28 - 0x02) != (byte) __rol(0x40000002, 0x06));
			__rol(di_21, 0x07);
			goto l00401127;
		}
		eax_265 = eax_261 + 0x1CD8E373;
		ax_266 = (word16) (eax_261 + 0x1CD8E373);
	}
	ui32 eax_290 = __ror(0x1200, 0x05);
	byte al_292 = (byte) eax_290;
	if (*(ecx_28 - 0x01) != al_292)
	{
		word32 esp_301;
		word16 dx_302;
		byte C_303;
		word32 edx_304;
		word16 di_305;
		byte SCZO_306;
		word32 esi_307;
		Eq_2 eax_308;
		word32 edi_309;
		word32 ecx_310;
		byte SZO_311;
		byte Z_312;
		word16 ax_313;
		byte al_314;
		word32 ebp_315;
		struct Eq_105 * fs_316;
		word16 cx_317;
		struct Eq_107 * ds_318;
		(*(ecx_28 - 0x7E))();
		return eax_308;
	}
	else
	{
l00401127:
		struct Eq_113 * eax_68 = dwArg00;
		do
		{
			eax_68 = eax_68 + 0x01;
			ui32 edi_78 = __ror(0x0618, 0x03);
		} while (eax_68->t0000 != edi_78);
		ptr32 esp_86;
		word16 dx_87;
		byte C_88;
		word32 edx_89;
		word16 di_90;
		byte SCZO_91;
		word32 esi_92;
		word32 eax_93;
		word32 edi_94;
		word32 ecx_95;
		byte SZO_96;
		byte Z_97;
		word16 ax_98;
		byte al_99;
		word32 ebp_100;
		struct Eq_141 * fs_101;
		word16 cx_102;
		struct Eq_143 * ds_103;
		eax_68();
		word32 edx_126 = *((char *) *fs_101->ptr0030->ptr000C->ptr001C + 0x08);
		word16 di_128 = __rol((word16) ~0x08, 0x05);
		*(esp_86 - 0x04) = ~0x759F0868;
		*(esp_86 - 0x08) = edx_126;
		<anonymous> * esi_137;
		fn0040149E(dwArg00, dwArg04, out esi_137);
		ui32 eax_142 = __ror(0x06C0, 0x04);
		word32 edx_147 = __rol(0xB1B190B9, 0x06);
		*(esp_86 - 0x04) = eax_142;
		word16 ax_151 = __ror((word16) eax_142, 0x0C);
		*(esp_86 - 0x08) = edx_147;
		word32 edi_158 = __rol(0xE6C64746, 0x04);
		*(esp_86 - 0x0C) = edi_158;
		*(esp_86 - 0x10) = esp_86 - 0x0C;
		struct Eq_227 * esp_166;
		word16 dx_167;
		byte C_168;
		word32 edx_169;
		word16 di_170;
		byte SCZO_171;
		word32 esi_172;
		word32 eax_173;
		word32 edi_174;
		word32 ecx_175;
		byte SZO_176;
		byte Z_177;
		word16 ax_178;
		byte al_179;
		word32 ebp_180;
		struct Eq_242 * fs_181;
		word16 cx_182;
		struct Eq_244 * ds_183;
		esi_137();
		*(esp_166 - ~0x07) = 2412726150;
		*(esp_166 - ~0x03) = eax_173;
		<anonymous> * esi_191;
		fn0040149E(dwArg00, dwArg04, out esi_191);
		esp_166->dw0008 = 0x00;
		esp_166->dw0004 = 0x00;
		esp_166->dw0000 = 0x00;
		*(esp_166 - 0x04) = 0x00C0FA3D;
		*(esp_166 - 0x08) = 287702969;
		*(esp_166 - 0x0C) = 0x06D4;
		word32 esp_210;
		word16 dx_211;
		byte C_212;
		word32 edx_213;
		word16 di_214;
		byte SCZO_215;
		word32 esi_216;
		word32 eax_217;
		word32 edi_218;
		word32 ecx_219;
		byte SZO_220;
		byte Z_221;
		word16 ax_222;
		byte al_223;
		word32 ebp_224;
		struct Eq_305 * fs_225;
		word16 cx_226;
		struct Eq_307 * ds_227;
		esi_191();
		word32 ecx_236 = __rol(ecx_219 + 0x01, 0x02);
		<anonymous> * esi_237 = (<anonymous> **) 0x0002FF16;
		ui32 ecx_239 = __ror(ecx_236, 0x02);
		word32 esp_241;
		word16 dx_242;
		byte C_243;
		word32 edx_244;
		word16 di_245;
		byte SCZO_246;
		word32 esi_247;
		word32 eax_248;
		word32 edi_249;
		word32 ecx_250;
		byte SZO_251;
		byte Z_252;
		word16 ax_253;
		byte al_254;
		word32 ebp_255;
		struct Eq_336 * fs_256;
		word16 cx_257;
		struct Eq_338 * ds_258;
		esi_237();
	}
}

// 0040149E: Register (ptr (arr word16)) fn0040149E(Stack (ptr Eq_113) dwArg04, Stack word32 dwArg08, Register out ptr32 esiOut)
word16 * fn0040149E[](Eq_113 * dwArg04, word32 dwArg08, ptr32 & esiOut)
{
	__wait();
	word32 eax_13 = dwArg04 - ~0x77 + *(dwArg04 - ~0x3B);
	__wait();
	struct Eq_369 * eax_16 = dwArg04 + (eax_13 - ~0x1B);
	int32 * eax_29 = dwArg04 + eax_16->dw0004;
	word32 esi_26 = dwArg04 + eax_16->dw0000;
	word16 ecx_36[] = dwArg04 + eax_16->dw0008;
	byte * ecx_56 = dwArg04 + *eax_29;
	__wait();
	int32 * esi_43 = eax_29;
	ui32 dwLoc0C_50 = 0x00;
	ui32 eax_58 = 0x00;
	byte al_59 = 0x00;
	while (true)
	{
		do
		{
			ui32 eax_74 = __ror(DPB(eax_58, al_59 + *ecx_56, 0), 0x05);
			ecx_56 = ecx_56 + 0x01;
			eax_58 = eax_74 ^ 4187147681;
			al_59 = (byte) (eax_74 ^ 4187147681);
		} while (*ecx_56 != 0x00);
		if ((eax_74 ^ 4187147681 ^ dwArg08) == 0x00)
			break;
		esi_43 = esi_43 + 0x01;
		dwLoc0C_50 = dwLoc0C_50 + 0x01;
		ecx_56 = (byte *) (dwArg04 + *esi_43);
		eax_58 = 0x00;
		al_59 = 0x00;
	}
	word32 * eax_106 = esi_26 + ((word32) ecx_36[dwLoc0C_50] << 0x02);
	__wait();
	word32 esi_112;
	*esiOut = dwArg04 + *eax_106;
	__wait();
	return ecx_36;
}

