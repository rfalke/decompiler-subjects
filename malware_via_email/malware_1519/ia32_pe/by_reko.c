// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 004010A0: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_3 fp;
	ui32 ebp;
	struct Eq_5 * fs;
	struct Eq_6 * dwArg00;
	struct Eq_7 * edx_9 = __ror<word32,byte>(~0x06F0, 0x04);
	word32 esi_26 = -__ror<word32,byte>(2952551554, 0x03);
	struct Eq_21 * ecx_28 = __rol<word32,byte>(0x25FE, 0x07)[(fp & __ror<word32,byte>(2040, 0x03)) / 64];
	do
	{
		word16 dx_49 = (word16) edx_9;
		word16 edx_16_16_93 = SLICE(edx_9, word16, 16);
		++ecx_28;
		if (ecx_28->dw0000 == edx_9)
		{
			edx_9 = SEQ(edx_16_16_93, dx_49 - 0x3B);
			if (ecx_28->bFFFFFFFF == (byte) __ror<word32,byte>(0x1200, 0x05))
				goto l00401127;
			Eq_2 eax_58;
			ecx_28->ptrFFFFFF82();
			return eax_58;
		}
	} while (ecx_28->dw0000 != esi_26);
	do
		;
	while (ecx_28->bFFFFFFFE != (byte) __rol<word32,byte>(0x40000002, 0x06));
l00401127:
	Eq_3 ecx_113 = fp;
	word16 dx_122 = (word16) (edx_9 & ebp);
	struct Eq_6 * eax_107 = dwArg00;
	do
	{
		++eax_107;
		ecx_113 -= 1468097759;
	} while (eax_107->t0000.u0 != __ror<word32,byte>(0x0618, 0x03));
	struct Eq_83 * esp_127;
	eax_107();
	struct Eq_7 * edx_161 = *((char *) *fs->ptr0030->ptr000C->ptr001C + 8);
	esp_127->ptrFFFFFFFC = (struct Eq_7 *) ~0x759F0868;
	esp_127->ptrFFFFFFF8 = edx_161;
	<anonymous> * esi_175 = fn0040149E(esp_127->ptrFFFFFFF8, esp_127->ptrFFFFFFFC);
	struct Eq_7 * eax_184 = __ror<word32,byte>(0x06C0, 0x04);
	struct Eq_7 * edx_190 = __rol<word32,byte>(0xB1B190B9, 0x06);
	esp_127->ptrFFFFFFFC = eax_184;
	esp_127->ptrFFFFFFF8 = edx_190;
	esp_127->ptrFFFFFFF4 = __rol<word32,byte>(0xE6C64746, 0x04);
	esp_127->ptrFFFFFFF0 = esp_127 - 0x0C;
	struct Eq_7 * eax_212;
	esi_175();
	esp_127->ptrFFFFFFF8 = (struct Eq_7 *) 2412726150;
	esp_127->ptrFFFFFFF4 = eax_212;
	<anonymous> * esi_232 = fn0040149E(esp_127->ptrFFFFFFF4, esp_127->ptrFFFFFFF8);
	esp_127->ptrFFFFFFF8 = null;
	esp_127->ptrFFFFFFF4 = null;
	esp_127->ptrFFFFFFF0 = 0x00;
	esp_127->dwFFFFFFEC = 0x00C0FA3D;
	esp_127->dwFFFFFFE8 = 287702969;
	esp_127->dwFFFFFFE4 = 0x06D4;
	word32 ecx_258;
	esi_232();
	(*(<anonymous> **) 0x0002FF16)();
}

// 0040149E: Register word32 fn0040149E(Stack (ptr32 Eq_7) dwArg04, Stack (ptr32 Eq_7) dwArg08)
// Called from:
//      Win32CrtStartup
word32 fn0040149E(struct Eq_7 * dwArg04, struct Eq_7 * dwArg08)
{
	__wait();
	word32 eax_14 = *((word32) (dwArg04 - ~0x77) + dwArg04->dw003C);
	__wait();
	struct Eq_214 * eax_17 = dwArg04 + (eax_14 - ~0x1B) / 64;
	int32 * eax_30 = dwArg04 + eax_17->dw0004 / 64;
	word32 esi_27 = dwArg04 + eax_17->dw0000 / 64;
	word16 ecx_37[] = dwArg04 + eax_17->dw0008 / 64;
	byte * ecx_105 = dwArg04 + *eax_30 / 64;
	__wait();
	int32 * esi_101 = eax_30;
	ui32 dwLoc0C_122 = 0x00;
	ui8 al_110 = 0x00;
	ui24 eax_24_8_113 = 0x00;
	while (true)
	{
		do
		{
			struct Eq_7 * eax_66 = __ror<word32,byte>(SEQ(eax_24_8_113, al_110 + *ecx_105), 0x05);
			++ecx_105;
			al_110 = (byte) eax_66 ^ 161;
			eax_24_8_113 = SLICE(eax_66, word24, 8) ^ ~0x00066D32;
		} while (*ecx_105 != 0x00);
		if ((eax_66 ^ 4187147681 ^ dwArg08) == 0x00)
			break;
		++esi_101;
		++dwLoc0C_122;
		ecx_105 = (byte *) (dwArg04 + *esi_101 / 64);
		al_110 = 0x00;
		eax_24_8_113 = 0x00;
	}
	word32 * eax_87 = esi_27 + ((uint32) ecx_37[dwLoc0C_122] << 0x02);
	__wait();
	word32 esi_94 = dwArg04 + *eax_87 / 64;
	__wait();
	return esi_94;
}

