/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

int __cdecl start(int a1, int a2, int a3);
// int __usercall sub_4010D1@<eax>(int result@<eax>);
// HMODULE __stdcall GetModuleHandleA(LPCSTR lpModuleName);
// int __usercall sub_4040DB@<eax>(int a1@<ebp>, double a2@<st7>, double a3@<st6>, double a4@<st5>, double a5@<st4>, double a6@<st3>, double a7@<st2>, double a8@<st1>, double a9@<st0>);
_DWORD sub_4041A8(); // weak


//----- (0040107C) --------------------------------------------------------
int __cdecl start(int a1, int a2, int a3)
{
  int v3; // edx

  GetModuleHandleA(0);
  GetModuleHandleA(0);
  GetModuleHandleA(0);
  GetModuleHandleA(0);
  GetModuleHandleA(0);
  sub_4010D1(0x10000);
  v3 = *(_DWORD *)(a3 + 176) - 1;
  if ( *(_DWORD *)(a3 + 176) == 1 )
    *(_DWORD *)(a3 + 184) += 3;
  *(_DWORD *)(a3 + 176) = v3;
  return 0;
}

//----- (004010D1) --------------------------------------------------------
int __usercall sub_4010D1@<eax>(int result@<eax>)
{
  int v1; // [esp-4h] [ebp-4h] BYREF

  __writefsdword(0, (unsigned int)&v1);
  MEMORY[0] &= result;
  return result;
}

//----- (004040DB) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_4040DB@<eax>(int a1@<ebp>, double a2@<st7>, double a3@<st6>, double a4@<st5>, double a5@<st4>, double a6@<st3>, double a7@<st2>, double a8@<st1>, double a9@<st0>)
{
  int v18; // [esp-4h] [ebp-4h]

  _EBX = v18 + 357;
  __asm { repne mov edi, ebx }
  *(_DWORD *)(v18 + 357) += 1826255789;
  ((void (__usercall *)(double@<st0>, double@<st1>, double@<st2>, double@<st3>, double@<st4>, double@<st5>, double@<st6>, double@<st7>))sub_4041A8)(
    a9,
    a8,
    a7,
    a6,
    a5,
    a4 * a2,
    a3,
    a2);
  *(_DWORD *)(a1 + 1848157197) = __ROR4__(*(_DWORD *)(a1 + 1848157197), 51);
  _ECX = 879250878;
  __asm { rep inc ecx }
  return ((int (__thiscall *)(int))sub_4041A8)(_ECX);
}
// 404117: positive sp value 4 has been found
// 404117: variable 'v18' is possibly undefined
// 4041A8: using guessed type _DWORD sub_4041A8();

//----- (004041A8) --------------------------------------------------------
#error "4041A8: stack frame is too big (funcsize=0)"

// nfuncs=4 queued=4 decompiled=4 lumina nreq=0 worse=0 better=0
#error "There were 1 decompilation failure(s) on 4 function(s)"
