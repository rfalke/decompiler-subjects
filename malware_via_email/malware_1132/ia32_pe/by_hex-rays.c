/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int@<eax>, char *@<edx>, int@<ecx>, int@<ebx>, int@<ebp>, int@<edi>, int@<esi>);

//-------------------------------------------------------------------------
// Data declarations

int dword_418000[512] =
{
  -1876295519,
  88416000,
  39455844,
  -27299992,
  -776428289,
  1351714001,
  -2001430255,
  -1669043759,
  -1147717552,
  1511021061,
  -1216873601,
  -1833823171,
  -1448068337,
  -1989565789,
  -915862859,
  1345203749,
  -9440531,
  -1125869037,
  114462929,
  -778137064,
  -1549702191,
  -650038830,
  971897714,
  1745413823,
  -2019903073,
  1098966583,
  -1310720,
  -650475745,
  1774872412,
  -751119021,
  227485498,
  -1114562709,
  960083514,
  -2069641781,
  3126673,
  3032377,
  1679808828,
  -652914145,
  -1571660770,
  1130134808,
  -736926346,
  1413710112,
  -652282301,
  379594229,
  1841758417,
  -1210358738,
  1410798275,
  -2043925439,
  -426633663,
  -1740596662,
  -1368809661,
  -2109556316,
  1256489285,
  -1639699558,
  -1706367417,
  1235043851,
  -1833327442,
  1268074751,
  1764465226,
  -24687997,
  1306952846,
  -868133423,
  -54037447,
  873983387,
  722054585,
  1526074068,
  765734433,
  2012599574,
  1580933151,
  1890910473,
  -1856370743,
  328216293,
  -685157634,
  303616933,
  -459960177,
  -2025801470,
  1678479504,
  -1864198110,
  -483508221,
  1109866397,
  -993747666,
  -1190062296,
  1978251488,
  1491204153,
  -285482668,
  -1833359471,
  378536558,
  1764463540,
  -1833524050,
  1256459136,
  -1537501766,
  1257149076,
  -1558800454,
  1772658838,
  -1715886930,
  -458188665,
  -1691641270,
  787061437,
  -1667429488,
  851219478,
  -1449186406,
  271031896,
  -2122237888,
  254058535,
  -2121991105,
  965829678,
  -40058274,
  -938008484,
  -928794475,
  -1266585083,
  542933426,
  1555997975,
  -1552808487,
  882441128,
  1368754520,
  490453501,
  1373429636,
  1108302009,
  -1071511758,
  479141365,
  619538273,
  -569255393,
  -144307768,
  -774843052,
  925231457,
  542933400,
  397917975,
  -1099823672,
  1702017157,
  94445660,
  -871459434,
  -746657535,
  -814287052,
  -452539921,
  333124389,
  615792189,
  773061418,
  90907460,
  -1527070978,
  745296344,
  349676961,
  -124779703,
  -2037940729,
  736385717,
  -1142839460,
  -1672937259,
  -108545757,
  -1007931613,
  -177450489,
  377791571,
  534132921,
  1336867913,
  -567199241,
  -1529104086,
  23798831,
  -403927516,
  1800935617,
  -665026516,
  1512305466,
  611314737,
  -1073664465,
  -393895588,
  706511929,
  -560144602,
  571231193,
  -711893949,
  -2129190422,
  1339916572,
  -1289860989,
  994038751,
  -1005008812,
  -253965591,
  141706270,
  943250592,
  -58375280,
  -53108243,
  608284893,
  -388148601,
  -1426976540,
  -632563051,
  -1429727754,
  30536156,
  -48271391,
  -1496207892,
  -695290671,
  -1182768740,
  1927991529,
  1555314502,
  -1149200799,
  549439699,
  -1526347753,
  -2123233867,
  1925037404,
  -2532223,
  1179010907,
  1225115671,
  1801880392,
  -616557078,
  -2126964286,
  -1833196370,
  -1508474741,
  731531907,
  -2105528855,
  -1833327452,
  -2068544026,
  1764465315,
  -2035775570,
  -469006718,
  -1064793782,
  -1833368852,
  -1601533022,
  195798190,
  -1933806963,
  1085849784,
  1250833295,
  325659546,
  784249271,
  -1327232080,
  783452595,
  -437703792,
  783594928,
  -1981207664,
  968275896,
  -826230592,
  -847164743,
  -2130899419,
  -69617863,
  -1674829544,
  -1459265,
  780164201,
  -710602518,
  1738806250,
  740660314,
  957389249,
  1876627678,
  -559671553,
  944822630,
  -634483812,
  1480434712,
  -1291888102,
  -308674608,
  783751634,
  1589102496,
  290597713,
  2009426133,
  -18874877,
  273716223,
  -775749326,
  -393097158,
  732179865,
  614738180,
  -2063990438,
  -785690587,
  788229743,
  -1848466737,
  893203002,
  1759064155,
  60288388,
  828603280,
  -653411246,
  -395404797,
  953747931,
  160748045,
  -702662201,
  2010908934,
  230438623,
  964834562,
  -1940338507,
  244109877,
  -345608489,
  -2096025324,
  818940205,
  1877849708,
  -314101979,
  -755396262,
  507333392,
  -1686920167,
  207503337,
  1393311749,
  1826341871,
  16928001,
  -1541880519,
  -882044911,
  -2012384035,
  91067430,
  927913089,
  367949047,
  277336634,
  35766741,
  -1664272123,
  -2103067205,
  549796374,
  -1917371897,
  421066677,
  -444503639,
  -309369575,
  187799273,
  -1052499583,
  1604660116,
  622958494,
  -1970473671,
  -913679123,
  -614668529,
  576645594,
  383700229,
  -388232691,
  500418939,
  -1440386601,
  1483792860,
  -1873224296,
  1687501273,
  -1044806767,
  -946693954,
  609718715,
  -6397398,
  1512374143,
  307266970,
  -984624855,
  -471669276,
  -1195808288,
  -146890052,
  -1979096122,
  1510148826,
  868188680,
  -739403820,
  -1727969680,
  972667777,
  -1642450478,
  -2122312723,
  151469343,
  -920975578,
  -844561610,
  1028973310,
  -445943114,
  -1390043910,
  1154627849,
  2147326013,
  435817046,
  399784018,
  -1688717101,
  1871023824,
  -1704796769,
  -516255785,
  1522637696,
  921421202,
  100194039,
  -757235110,
  964913421,
  -652819631,
  -843356424,
  -2131381744,
  1384697618,
  -2070349550,
  -1779934729,
  806972957,
  -659035436,
  124547038,
  396453130,
  -1492710702,
  1006353925,
  -1025066698,
  -1237753731,
  -128009805,
  -967696496,
  448396187,
  1512936970,
  411744981,
  -594108838,
  -1055392317,
  563204537,
  286162309,
  -822598563,
  288088374,
  1689850874,
  -572517456,
  1414031996,
  550039833,
  1893137539,
  -843399856,
  -124633326,
  -2026587886,
  -1671919554,
  105408781,
  -252296272,
  459540772,
  1855355169,
  588329413,
  1016383758,
  366074036,
  -2020423215,
  1192839916,
  1607946717,
  1838752201,
  946422760,
  -130673481,
  318192311,
  1379752580,
  -2045760235,
  372641005,
  -1519676074,
  1890330545,
  1548881284,
  1013733706,
  -363703918,
  -953160087,
  -905080649,
  -952473017,
  1985101625,
  -721984801,
  1376175673,
  958917359,
  -1442197386,
  -1272173603,
  1278544600,
  1167922156,
  565320210,
  1712810199,
  405199118,
  -475774088,
  920229043,
  -1857522652,
  1190137811,
  389681677,
  699535076,
  761149345,
  1808995129,
  -1306681386,
  303438113,
  -1344433457,
  -1433130644,
  -1805260286,
  814806573,
  -1226684828,
  567190567,
  1135740338,
  516866466,
  -653487958,
  -642985405,
  149005328,
  -602746151,
  -96005691,
  1151208833,
  -584711590,
  -781104599,
  1768144655,
  1239009983,
  -576918890,
  -419916891,
  1532680278,
  644011308,
  453820194,
  -220800004,
  688052061,
  775311543,
  -573392930,
  -261130533,
  693240102,
  -355281297,
  566677635,
  -1913509421,
  1154706349,
  433409800,
  312924629,
  542510597,
  -575902254,
  1852235109,
  -1971270503,
  -1931613987,
  1869394636,
  -845718785,
  -979101974,
  -1755400914,
  -842988087,
  -872455392,
  -684002875,
  602597210,
  -1052504412,
  -151058995,
  34102711,
  291485489,
  1539594999,
  -436329207,
  -2091249418,
  1557988065,
  -1017509030,
  2128744930,
  -605159429,
  -380132350,
  -1409440932,
  -710452513,
  -902154240,
  -1210706416,
  -1030902660,
  -1548715137,
  -1498741543,
  238113490,
  -1051191728,
  -672300169,
  821373394,
  -1817919510,
  227527059,
  1833306185,
  -1945230899,
  168583533,
  531188773,
  398418898,
  -912598024,
  601027001,
  -1132687302,
  1898011271,
  1303895354,
  1635629447
}; // weak


//----- (0041E580) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(
        int a1@<eax>,
        char *a2@<edx>,
        int a3@<ecx>,
        int a4@<ebx>,
        int a5@<ebp>,
        int a6@<edi>,
        int a7@<esi>)
{
  int *v7; // esi
  int *v8; // edi
  unsigned int v9; // ebp
  char v10; // al
  bool v11; // cf
  int v12; // ebx
  int v13; // ebx
  int v14; // ett
  unsigned int v15; // eax
  bool v16; // cf
  int v17; // ebx
  int v18; // ebx
  int v19; // ett
  bool v20; // zf
  int v21; // ebx
  int v22; // ett
  int v23; // ecx
  unsigned int v24; // eax
  unsigned int v25; // eax
  int v26; // eax
  bool v27; // cf
  int v28; // ebx
  int v29; // ebx
  int v30; // ett
  BOOL v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  int v35; // ecx
  int v36; // ecx
  bool v37; // cf
  int v38; // ebx
  int v39; // ebx
  int v40; // ett
  bool v41; // zf
  int v42; // ebx
  int v43; // ett
  unsigned int v44; // ecx
  char v45; // al
  int v46; // eax
  bool v47; // cc
  int *v48; // esi
  char *v49; // edi
  int v50; // eax
  int *v51; // ebx
  int v52; // ebp
  char v53; // al
  char *v54; // ecx
  unsigned __int8 v55; // al
  int v56; // eax
  void (__fastcall *v57)(int, char *, int *, int, int, int *); // ebp
  int *v58; // edi
  int v59[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v60; // [esp+2Ch] [ebp-80h] BYREF
  int v61; // [esp+30h] [ebp-7Ch] BYREF
  char *v62; // [esp+34h] [ebp-78h]
  int *v63; // [esp+38h] [ebp-74h]
  int v64; // [esp+3Ch] [ebp-70h]
  char *v65; // [esp+40h] [ebp-6Ch]
  int v66; // [esp+44h] [ebp-68h]
  int v67; // [esp+48h] [ebp-64h]
  int *v68; // [esp+4Ch] [ebp-60h]
  int v69; // [esp+50h] [ebp-5Ch]
  int v70; // [esp+54h] [ebp-58h]
  int v71; // [esp+58h] [ebp-54h]
  int v72; // [esp+5Ch] [ebp-50h] BYREF

  v71 = a7;
  v70 = a6;
  v69 = a5;
  v68 = &v72;
  v67 = a4;
  v66 = a3;
  v65 = a2;
  v64 = a1;
  v7 = dword_418000;
  v8 = &dword_418000[-23552];
  v63 = &dword_418000[-23552];
  v9 = -1;
  while ( 1 )
  {
    v13 = *v7;
    v11 = (unsigned int)v7++ < 0xFFFFFFFC;
    v14 = v11 + v13;
    v11 = __CFADD__(v11, v13) | __CFADD__(v13, v14);
    v12 = v13 + v14;
    do
    {
      if ( v11 )
      {
        v10 = *(_BYTE *)v7;
        v7 = (int *)((char *)v7 + 1);
        *(_BYTE *)v8 = v10;
        v8 = (int *)((char *)v8 + 1);
      }
      else
      {
        v15 = 1;
        while ( 1 )
        {
          v16 = __CFADD__(v12, v12);
          v17 = 2 * v12;
          if ( !v17 )
          {
            v18 = *v7;
            v11 = (unsigned int)v7++ < 0xFFFFFFFC;
            v19 = v11 + v18;
            v16 = __CFADD__(v11, v18) | __CFADD__(v18, v19);
            v17 = v18 + v19;
          }
          v15 += v16 + v15;
          v11 = __CFADD__(v17, v17);
          v20 = 2 * v17 == 0;
          v12 = 2 * v17;
          if ( v11 )
          {
            if ( !v20 )
              break;
            v21 = *v7;
            v11 = (unsigned int)v7++ < 0xFFFFFFFC;
            v22 = v11 + v21;
            v11 = __CFADD__(v11, v21) | __CFADD__(v21, v22);
            v12 = v21 + v22;
            if ( v11 )
              break;
          }
        }
        v23 = 0;
        v11 = v15 < 3;
        v24 = v15 - 3;
        if ( !v11 )
        {
          v25 = v24 << 8;
          LOBYTE(v25) = *(_BYTE *)v7;
          v7 = (int *)((char *)v7 + 1);
          v26 = ~v25;
          if ( !v26 )
          {
            v48 = v63;
            v49 = (char *)(v63 + 28672);
LABEL_33:
            v50 = *(_DWORD *)v49;
            if ( *(_DWORD *)v49 )
            {
              v51 = (int *)((char *)v48 + *((_DWORD *)v49 + 1));
              v49 += 8;
              v52 = ((int (__fastcall *)(int, char *, int, int, char *, int, int, int *, int, int, int))v48[33638])(
                      v23,
                      a2,
                      (int)v48 + v50 + 134352,
                      v64,
                      v65,
                      v66,
                      v67,
                      v68,
                      v69,
                      v70,
                      v71);
              while ( 1 )
              {
                v53 = *v49++;
                if ( !v53 )
                  goto LABEL_33;
                v54 = v49;
                v62 = v49;
                v55 = v53 - 1;
                do
                {
                  if ( !v54 )
                    break;
                  v20 = *v49++ == (char)v55;
                  --v54;
                }
                while ( !v20 );
                v56 = ((int (__cdecl *)(int, char *))v48[33639])(v52, v62);
                if ( !v56 )
                  break;
                *v51++ = v56;
              }
              v50 = ((int (*)(void))v48[33643])();
            }
            v57 = (void (__fastcall *)(int, char *, int *, int, int, int *))v48[33640];
            v58 = v48 - 1024;
            v60 = v50;
            v57(v23, a2, v48 - 1024, 4096, 4, &v60);
            *((_BYTE *)v58 + 479) &= ~0x80u;
            *((_BYTE *)v58 + 519) &= ~0x80u;
            ((void (__cdecl *)(int *, int, int, int *))v57)(v48 - 1024, 4096, v59[0], v59);
            do
              v60 = 0;
            while ( &v60 != &v61 - 32 );
            JUMPOUT(0x40FE46);
          }
          v9 = v26;
        }
        v27 = __CFADD__(v12, v12);
        v28 = 2 * v12;
        if ( !v28 )
        {
          v29 = *v7;
          v11 = (unsigned int)v7++ < 0xFFFFFFFC;
          v30 = v11 + v29;
          v27 = __CFADD__(v11, v29) | __CFADD__(v29, v30);
          v28 = v29 + v30;
        }
        v31 = v27;
        v32 = __CFADD__(v28, v28);
        v12 = 2 * v28;
        if ( !v12 )
        {
          v33 = *v7;
          v11 = (unsigned int)v7++ < 0xFFFFFFFC;
          v34 = v11 + v33;
          v32 = __CFADD__(v11, v33) | __CFADD__(v33, v34);
          v12 = v33 + v34;
        }
        v35 = v31 + v32 + v31;
        if ( !v35 )
        {
          v36 = 1;
          while ( 1 )
          {
            v37 = __CFADD__(v12, v12);
            v38 = 2 * v12;
            if ( !v38 )
            {
              v39 = *v7;
              v11 = (unsigned int)v7++ < 0xFFFFFFFC;
              v40 = v11 + v39;
              v37 = __CFADD__(v11, v39) | __CFADD__(v39, v40);
              v38 = v39 + v40;
            }
            v36 += v37 + v36;
            v11 = __CFADD__(v38, v38);
            v41 = 2 * v38 == 0;
            v12 = 2 * v38;
            if ( v11 )
            {
              if ( !v41 )
                break;
              v42 = *v7;
              v11 = (unsigned int)v7++ < 0xFFFFFFFC;
              v43 = v11 + v42;
              v11 = __CFADD__(v11, v42) | __CFADD__(v42, v43);
              v12 = v42 + v43;
              if ( v11 )
                break;
            }
          }
          v35 = v36 + 2;
        }
        v44 = (v9 < 0xFFFFF300) + v35 + 1;
        a2 = (char *)v8 + v9;
        if ( v9 <= 0xFFFFFFFC )
        {
          do
          {
            v46 = *(_DWORD *)a2;
            a2 += 4;
            *v8++ = v46;
            v47 = v44 <= 4;
            v44 -= 4;
          }
          while ( !v47 );
          v8 = (int *)((char *)v8 + v44);
        }
        else
        {
          do
          {
            v45 = *a2++;
            *(_BYTE *)v8 = v45;
            v8 = (int *)((char *)v8 + 1);
            --v44;
          }
          while ( v44 );
        }
      }
      v11 = __CFADD__(v12, v12);
      v12 *= 2;
    }
    while ( v12 );
  }
}
// 41E6D8: positive sp value 50 has been found
// 41E6D8: control flows out of bounds to 40FE46
// 41E66F: variable 'v23' is possibly undefined
// 41E66F: variable 'a2' is possibly undefined
// 418000: using guessed type int dword_418000[512];
// 41E580: using guessed type int anonymous_0[4];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
