/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

// void __userpurge sub_4010F4(int@<edx>, int@<ebp>, int@<edi>, int@<esi>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
void sub_401137();
// double __usercall start@<st0>(int@<eax>, int@<ecx>, int@<ebx>, int@<edi>, double result@<st0>);
// void __userpurge sub_4012E5(__int64 *@<edi>, __int32@<esi>, int eax0@<eax>, int ecx0@<ecx>, int ebx0@<ebx>, int ebp0@<ebp>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
// void __userpurge sub_401334(__int32@<esi>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
// void __usercall sub_40136C(char@<al>, int@<ecx>, int@<ebx>, int@<ebp>, int@<edi>, int@<esi>);
void __thiscall sub_402064(void *this);
_DWORD sub_402109(); // weak
// void __usercall sub_402260(__int32@<esi>);
// void __usercall sub_402283(__int32@<esi>);
// int __usercall sub_4022BF@<eax>(char@<dl>, __int16@<bx>, int _EDI@<edi>, __int32@<esi>);
_DWORD __far sub_4022E3(); // weak
// void __usercall sub_402386(__int32@<esi>);
void sub_402440();
void sub_4024D4();
// void __usercall sub_4025D2(_DWORD *_EAX@<eax>, unsigned int@<edx>, int@<ecx>, __int16@<bx>, int@<ebp>, int@<edi>, __int32 _ESI@<esi>);
// void __usercall sub_40263E(int@<eax>, int@<edx>, int@<ecx>, int@<ebx>);
// void __usercall sub_40267F(__int16@<dx>, int@<ecx>, int _ESI@<esi>);
// void __usercall sub_4026D1(__int32@<ecx>, int@<ebp>, _BYTE *@<edi>);
// void __usercall sub_4026EA(int@<eax>, char@<dh>, char@<bl>);
// void __usercall sub_402707(int@<eax>);
// void __usercall sub_402804(__int32@<eax>, __int16@<dx>, int@<ecx>, char@<bl>, __int16@<di>, int@<esi>);
_DWORD sub_40281C(); // weak
// void __usercall sub_4028F2(__int16@<dx>, int@<ecx>, __int32@<ebx>, int@<edi>, __int32@<eax>);
// void __usercall sub_40291C(__int32@<eax>, int@<ecx>, int@<ebx>, _BYTE *@<edi>);
void sub_402A2A();
// void __usercall sub_402A4B(char@<al>, __int32@<ecx>, int@<ebx>, int@<edi>);
// void __usercall sub_402A67(int@<eax>, int@<edx>, int@<ecx>, int@<ebx>);
// void __usercall sub_402B42(int@<ebx>, int@<ebp>, int@<edi>);
void sub_402B8E();
void sub_402C34();
// void __usercall sub_402C5F(int _EAX@<eax>, char@<bh>, _DWORD *@<edi>);
// void __userpurge sub_402D58(int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
// void __usercall __noreturn sub_402E13(int@<ecx>, int@<edi>);
_DWORD sub_402F06(); // weak

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_4010BA; // weak
_UNKNOWN loc_4012A1; // weak
_UNKNOWN loc_401345; // weak
_UNKNOWN loc_4021E5; // weak
_UNKNOWN loc_40256B; // weak
_UNKNOWN loc_4028B6; // weak
_UNKNOWN loc_4029AB; // weak
_UNKNOWN loc_402C8B; // weak
_UNKNOWN loc_402ED0; // weak
_UNKNOWN loc_402F63; // weak


//----- (004010F4) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_4010F4(
        int a1@<edx>,
        int a2@<ebp>,
        int a3@<edi>,
        int a4@<esi>,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  int v64; // ebx
  int v65; // edx
  __int32 v66; // esi
  bool v67; // of
  int v68; // ecx
  int v70; // edx
  int *v71; // eax
  int v72; // ecx
  int v73; // ebx
  int v74; // edi
  int v75; // ecx
  int v76; // edi
  _DWORD *v77; // ebx
  int v78; // eax
  int v79; // edx
  int v80; // ecx
  int v81; // ebx
  int v82; // edi
  int v83; // esi
  int v84; // ecx
  char v86; // cf
  unsigned int v88; // edx
  int v89; // ecx
  char v90; // sf
  int v91; // ett
  int v97; // [esp-F9EBh] [ebp-FA07h] BYREF
  int v98; // [esp-F9E7h] [ebp-FA03h]
  int v99; // [esp-F9E3h] [ebp-F9FFh]
  int v100; // [esp-F9DFh] [ebp-F9FBh]
  int *v101; // [esp-F9DBh] [ebp-F9F7h]
  int v102; // [esp-F9D7h] [ebp-F9F3h]
  int v103; // [esp-F9D3h] [ebp-F9EFh]
  int v104; // [esp-F9CFh] [ebp-F9EBh]
  int v105[15986]; // [esp-F9CBh] [ebp-F9E7h] BYREF

  v78 = ((int (__fastcall *)(int, int))((char *)&loc_4012A1 + 5))(a3, a1 - a4);
  LOBYTE(v78) = __inbyte(v79);
  v104 = a4;
  v103 = a3;
  v102 = a2;
  v101 = v105;
  v100 = a3 + 1;
  v99 = v80;
  v98 = v79;
  v97 = v78;
  LOBYTE(v78) = BYTE1(v79);
  v81 = a3 + 3;
  v82 = (a3 + 3) ^ a3;
  v83 = v79 | (a4 - 1);
  v84 = v83 | v80;
  _EAX = *(_DWORD *)((__int16)v78 + 0x90);
  v64 = v82 + v81;
  v65 = v64 + v83 - 1;
  v66 = v64 + v65;
  v67 = __OFADD__(v64, v84);
  v68 = v64 + v84;
  if ( !v67 && v67 )
  {
    __asm { das }
    v71 = &v97;
    v70 = v65 - 1;
    LOBYTE(v71) = (unsigned __int8)&v97 & 0xF0;
    v72 = v64 ^ v68;
    v73 = v72 ^ v64;
    v74 = v82 - v73;
    v75 = v72 - 1;
    if ( !__CFADD__(v70, v73)
      && (int *)((char *)v71 + v66) != (int *)-1
      && (__CFADD__(v70, v73) || (int *)((char *)v71 + v66) == (int *)-1) )
    {
      __asm { retf    7B23h }
    }
    v76 = v70 | v74;
    v77 = (_DWORD *)(v76 | v70);
    _AL = ((int (__thiscall *)(int))sub_402109)(v75);
    if ( !v90 )
    {
      v91 = v86;
      v86 = __CFADD__(v86, *(_DWORD *)v88) | __CFADD__(v89, v86 + *(_DWORD *)v88);
      *(_DWORD *)v88 += v89 + v91;
      _EDX = (_DWORD *)(v89 + v86 + v88);
      __asm { lock lea eax, [edx+18h] }
      LOBYTE(_EAX) = _EAX - 23;
      __asm { aaa }
      *v77 ^= v76;
      __asm
      {
        aaa
        aaa
      }
      v97 = (unsigned int)&v97 ^ (unsigned __int16)a2;
      *_EDX |= a2;
      __asm { retf    0C007h }
    }
    __writefsdword(v88, v88 + v86 + __readfsdword(v88));
    __asm { aaa }
    *(_BYTE *)v76 |= v88;
    __asm
    {
      aaa
      aaa
    }
    JUMPOUT(0x401441);
  }
  sub_401334(
    v66,
    v97,
    v98,
    v99,
    v100,
    (int)v101,
    v102,
    v103,
    v104,
    v105[0],
    v105[1],
    v105[2],
    v105[3],
    v105[4],
    v105[5],
    v105[6],
    v105[7],
    v105[8],
    v105[9],
    v105[10],
    v105[11],
    v105[12],
    v105[13],
    v105[14],
    v105[15],
    v105[16],
    v105[17],
    v105[18],
    v105[19],
    v105[20],
    v105[21],
    v105[22],
    v105[23],
    v105[24],
    v105[25],
    v105[26],
    v105[27],
    v105[28],
    v105[29],
    v105[30],
    v105[31],
    v105[32],
    v105[33],
    v105[34],
    v105[35],
    v105[36],
    v105[37],
    v105[38],
    v105[39],
    v105[40],
    v105[41],
    v105[42],
    v105[43],
    v105[44],
    v105[45],
    v105[46],
    v105[47],
    v105[48],
    v105[49],
    v105[50],
    v105[51],
    v105[52],
    v105[53]);
}
// 401090: positive sp value F9EB has been found
// 401440: control flows out of bounds to 401441
// 401105: variable 'v79' is possibly undefined
// 401106: variable 'v80' is possibly undefined
// 4013AB: variable 'v90' is possibly undefined
// 4013B4: variable 'v86' is possibly undefined
// 4013B4: variable 'v88' is possibly undefined
// 4013B4: variable 'v89' is possibly undefined
// 4010F4: too many input arguments, some ignored
// 402109: using guessed type _DWORD sub_402109();

//----- (00401137) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_401137()
{
  JUMPOUT(0x40128D);
}
// 401143: positive sp value 8 has been found
// 401156: control flows out of bounds to 40115C
// 40114F: control flows out of bounds to 40128D

//----- (004011C6) --------------------------------------------------------
double __usercall start@<st0>(int a1@<eax>, int a2@<ecx>, int a3@<ebx>, int a4@<edi>, double result@<st0>)
{
  int v5; // ecx
  _DWORD *v6; // edi
  _DWORD *v7; // esi
  int v8; // ecx
  int v9; // edi
  int v10; // ebx
  int v11; // ecx
  bool v12; // zf
  int v13; // ebx
  int v14; // esi
  unsigned __int32 v15; // eax
  int v16; // edi
  unsigned int v17; // esi
  int v18; // ebx
  int v19; // edi
  bool v21; // cf
  bool v22; // pf
  unsigned __int32 v23; // ecx
  int v24; // ebx
  bool v25; // of
  int v26; // ebx
  int savedregs; // [esp+0h] [ebp+0h] BYREF

  v9 = a4 - 1;
  v10 = a3 - a2 - a2;
  v11 = a2 - 1;
  v12 = v10 == 1;
  v13 = v10 - 1;
  if ( !v13 || !v12 )
  {
    ((void (__usercall *)(double@<st0>))loc_4010BA)(result);
    JUMPOUT(0x40118D);
  }
  v14 = *(int *)((char *)&savedregs + a1);
  v15 = __indword(a1 | v9);
  v16 = v14 + v9;
  v17 = v11 | v14;
  v18 = v13 + 2;
  v19 = v16 - 1;
  _EDX = v15 ^ (v11 + 1);
  v21 = _EDX < v17;
  v22 = __SETP__(_EDX, v17);
  if ( !__SETP__(_EDX, v17) )
  {
    __asm { repne lea dx, [edx] }
    if ( v22 )
    {
      v23 = v15;
      if ( v21 )
      {
        _enable();
        LOBYTE(v23) = ~(_BYTE)v15;
        v24 = v18 - 1;
        v25 = __OFSUB__(v24, v23);
        v26 = v24 - v23;
        if ( !v25 && v25 )
          JUMPOUT(0x4011AF);
        v5 = v19 ^ v23;
        v6 = (_DWORD *)((v5 ^ _EDX) + 1);
        v7 = (_DWORD *)((v26 - (v5 + 1)) ^ v17);
        ((void (*)(void))loc_401345)();
        *v6 = *v7;
        v6[297601298] += v8;
        JUMPOUT(0x401209);
      }
      JUMPOUT(0x401261);
    }
  }
  if ( !v15 )
    JUMPOUT(0x40126F);
  return result;
}
// 40126C: control flows out of bounds to 401272
// 401171: control flows out of bounds to 401172
// 401188: control flows out of bounds to 40118D
// 40123D: control flows out of bounds to 4011AF
// 40116C: control flows out of bounds to 40126F
// 401206: control flows out of bounds to 401261
// 401258: control flows out of bounds to 40131D
// 401059: control flows out of bounds to 401209
// 4011AE: variable 'v8' is possibly undefined

//----- (004012E5) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_4012E5(
        __int64 *_EDI@<edi>,
        __int32 a2@<esi>,
        int eax0@<eax>,
        int ecx0@<ecx>,
        int ebx0@<ebx>,
        int ebp0@<ebp>,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  char v64; // cf
  char v65; // al
  char v66; // zf
  __int32 v67; // [esp-4h] [ebp-4h] BYREF
  void *retaddr[2]; // [esp+0h] [ebp+0h]

  _InterlockedExchange(&v67, a2);
  sub_40136C(*(_DWORD *)(eax0 + 8), eax0 + ebx0 + eax0 + ecx0, eax0 + ebx0, ebp0, (int)_EDI, v67);
  __asm { fild    qword ptr [edi] }
  if ( v64 | v66 )
  {
    MEMORY[0x4FDF0BB2] = v65;
    JUMPOUT(0x40138C);
  }
  if ( v64 )
  {
    v67 = (unsigned __int16)__SS__;
    JUMPOUT(0x40110A);
  }
  MK_FP(retaddr[0], retaddr[0])();
}
// 4012BC: positive sp value 4 has been found
// 401302: inconsistent fpu stack
// 401316: control flows out of bounds to 40138C
// 4012CF: control flows out of bounds to 40110A
// 40131F: bad sp value at call
// 4012D7: conditional instruction was optimized away because esi.4>=0
// 401304: variable 'v64' is possibly undefined
// 401304: variable 'v66' is possibly undefined
// 401306: variable 'v65' is possibly undefined
// 4012E5: too many input arguments, some ignored

//----- (00401334) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_401334(
        __int32 a1@<esi>,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  __int32 v65; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v65, a1);
  __asm { rep pop esi }
  JUMPOUT(0x401308);
}
// 401339: positive sp value 4 has been found
// 40133F: control flows out of bounds to 401308
// 401334: too many input arguments, some ignored

//----- (0040136C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40136C(char a1@<al>, int a2@<ecx>, int a3@<ebx>, int a4@<ebp>, int a5@<edi>, int a6@<esi>)
{
  int v6; // ebx
  int v7; // edi
  bool v8; // zf
  int v9; // ebx
  int v10; // edi
  char v11; // cf
  char v12; // cl
  unsigned int v13; // kr00_4
  int v14; // edx
  int v15; // [esp-F9FFh] [ebp-FA0Bh]
  _BYTE v16[64007]; // [esp-F9FBh] [ebp-FA07h]

  *(_DWORD *)&v16[-16] = v15;
  v6 = a3 + 1;
  v7 = a2 | (a2 + a5);
  v8 = v6 == 1;
  v9 = v6 - 1;
  if ( v9 && v8 )
  {
    v10 = v7 - (__CFADD__(a1, 23) + *(_DWORD *)(a6 + 1));
    sub_4012E5(
      (__int64 *)v10,
      v10 | v9 | a6,
      a1 + 23,
      (v10 ^ a2) + 1,
      (v10 | v9) - v10,
      a4,
      *(int *)v16,
      *(int *)&v16[4],
      *(int *)&v16[8],
      *(int *)&v16[12],
      *(int *)&v16[16],
      *(int *)&v16[20],
      *(int *)&v16[24],
      *(int *)&v16[28],
      *(int *)&v16[32],
      *(int *)&v16[36],
      *(int *)&v16[40],
      *(int *)&v16[44],
      *(int *)&v16[48],
      *(int *)&v16[52],
      *(int *)&v16[56],
      *(int *)&v16[60],
      *(int *)&v16[64],
      *(int *)&v16[68],
      *(int *)&v16[72],
      *(int *)&v16[76],
      *(int *)&v16[80],
      *(int *)&v16[84],
      *(int *)&v16[88],
      *(int *)&v16[92],
      *(int *)&v16[96],
      *(int *)&v16[100],
      *(int *)&v16[104],
      *(int *)&v16[108],
      *(int *)&v16[112],
      *(int *)&v16[116],
      *(int *)&v16[120],
      *(int *)&v16[124],
      *(int *)&v16[128],
      *(int *)&v16[132],
      *(int *)&v16[136],
      *(int *)&v16[140],
      *(int *)&v16[144],
      *(int *)&v16[148],
      *(int *)&v16[152],
      *(int *)&v16[156],
      *(int *)&v16[160],
      *(int *)&v16[164],
      *(int *)&v16[168],
      *(int *)&v16[172],
      *(int *)&v16[176],
      *(int *)&v16[180],
      *(int *)&v16[184],
      *(int *)&v16[188],
      *(int *)&v16[192],
      *(int *)&v16[196],
      *(int *)&v16[200],
      *(int *)&v16[204],
      *(int *)&v16[208],
      *(int *)&v16[212],
      *(int *)&v16[216],
      *(int *)&v16[220],
      *(int *)&v16[224]);
    v13 = __readeflags();
    *(_DWORD *)&v16[64003] = v13;
    *(_BYTE *)(a4 - 21) += v12 + v11;
    *(_DWORD *)&v16[63999] = v14;
    JUMPOUT(0x4013A6);
  }
  JUMPOUT(0x401248);
}
// 4013A1: positive sp value FA0B has been found
// 4013A5: control flows out of bounds to 4013A6
// 401378: control flows out of bounds to 401248
// 4013A2: variable 'v12' is possibly undefined
// 4013A2: variable 'v11' is possibly undefined
// 4013A5: variable 'v14' is possibly undefined

//----- (00402064) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __thiscall sub_402064(void *this)
{
  __int32 v1; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v1, (__int32)this);
  JUMPOUT(0x402970);
}
// 40206A: positive sp value 4 has been found
// 402072: control flows out of bounds to 402970

//----- (00402109) --------------------------------------------------------
#error "402ECA: cannot convert to microcode (funcsize=77)"

//----- (00402260) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402260(__int32 a1@<esi>)
{
  __int32 v2; // esi
  void *v4; // [esp+10h] [ebp-4h]
  void *retaddr; // [esp+14h] [ebp+0h]

  *(&retaddr - 6) = v4;
  sub_402386(a1);
  v2 = _EAX;
  __asm { aam     6 }
  sub_402283(v2);
}
// 402264: positive sp value 4 has been found
// 40227D: variable '_EAX' is possibly undefined

//----- (00402283) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402283(__int32 a1@<esi>)
{
  sub_402260(a1);
  JUMPOUT(0x402AB7);
}
// 402289: positive sp value 4 has been found
// 402AE2: control flows out of bounds to 402AB7

//----- (004022BF) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_4022BF@<eax>(char a1@<dl>, __int16 a2@<bx>, int _EDI@<edi>, __int32 a4@<esi>)
{
  int v4; // ecx

  HIWORD(v4) = HIWORD(_EDI);
  BYTE1(v4) = -22;
  if ( (char)a2 <= a1 )
    goto LABEL_4;
  __asm { repne push di }
  if ( (char)a2 > a1 )
  {
LABEL_4:
    sub_402283(a4);
    JUMPOUT(0x402620);
  }
  LOBYTE(v4) = HIBYTE(a2) + _EDI;
  return ((int (__thiscall *)(int))sub_4022E3)(v4);
}
// 4022C3: positive sp value 4 has been found
// 40261E: control flows out of bounds to 402620
// 4022E3: using guessed type _DWORD __far sub_4022E3();

//----- (004022E3) --------------------------------------------------------
#error "4022E3: function frame is wrong (funcsize=0)"

//----- (00402386) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402386(__int32 a1@<esi>)
{
  __int32 v1; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v1, a1);
  JUMPOUT(0x402A83);
}
// 402392: positive sp value 4 has been found
// 40239B: control flows out of bounds to 402A83

//----- (00402440) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402440()
{
  JUMPOUT(0x402BB7);
}
// 402444: positive sp value 4 has been found
// 40244F: control flows out of bounds to 402BB7

//----- (004024D4) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4024D4()
{
  JUMPOUT(0x402126);
}
// 4024D8: positive sp value 4 has been found
// 4024E9: control flows out of bounds to 402126

//----- (00402593) --------------------------------------------------------
#error "402593: function frame is wrong (funcsize=0)"

//----- (004025D2) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4025D2(
        _DWORD *_EAX@<eax>,
        unsigned int a2@<edx>,
        int a3@<ecx>,
        __int16 a4@<bx>,
        int a5@<ebp>,
        int a6@<edi>,
        __int32 _ESI@<esi>)
{
  bool v7; // cf
  bool v8; // of
  unsigned int v9; // edx
  bool v10; // sf
  __int16 v11; // bx
  __int16 v12; // bx
  __int32 v13; // ecx
  __int16 v14; // bx
  __int16 v15; // dx
  __int32 v16; // [esp-4h] [ebp-4h]

  while ( 1 )
  {
    LOBYTE(_EAX) = (_BYTE)_EAX + 1;
    HIBYTE(a4) = -HIBYTE(a4);
    v9 = a6 | a2;
    LOBYTE(v9) = v9 - 110;
    a2 = (unsigned int)_EAX + v9 - 1;
    a3 = a2 | (a3 + 1);
    v10 = a3 < 0;
    BYTE1(a3) = ~BYTE1(a3);
    if ( v10 || !v10 )
      JUMPOUT(0x402BEA);
    if ( ++a5 < 0 )
    {
      *_EAX += a5;
      JUMPOUT(0x402600);
    }
    v7 = __CFADD__((_BYTE)a4, --HIBYTE(a4));
    v8 = __OFADD__((_BYTE)a4, HIBYTE(a4));
    HIBYTE(a4) += a4;
    if ( v7 )
      break;
    __asm { repne push esi }
    _ESI = v16;
    if ( !v7 )
      break;
    __asm { aam     0BAh ; 'º' }
    if ( v8 )
      JUMPOUT(0x40260E);
  }
  v14 = a4 - _ESI;
  LOBYTE(v14) = v14 - 17;
  if ( a3 != 503051727 )
  {
    v15 = a3 | a2;
    HIBYTE(v14) += a3;
    HIBYTE(v15) += (_BYTE)_EAX;
    v11 = v15 | v14;
    HIBYTE(v11) += 40;
    v12 = v11 - _ESI;
    HIBYTE(v12) += 26;
    sub_4022BF(v15, v12, a6, _ESI);
    __asm { fcom    st(3) }
    sub_4026D1(v13, 1371804199, (_BYTE *)a6);
  }
}
// 4020DF: positive sp value 4 has been found
// 4025FE: control flows out of bounds to 402600
// 4021ED: inconsistent fpu stack
// 4025E7: control flows out of bounds to 402BEA
// 4021F5: control flows out of bounds to 4020C1
// 4025D0: control flows out of bounds to 40260E
// 402766: conditional instruction was optimized away because ecx.4!=0
// 402B1A: conditional instruction was optimized away because cl.1!=0
// 4025C7: variable 'v16' is possibly undefined
// 4026D0: variable 'v13' is possibly undefined

//----- (0040263E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40263E(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>)
{
  int v4; // ebx
  int v7; // ecx
  __int32 v8; // esi
  int v9; // eax
  int v10; // [esp+18h] [ebp-8h]
  int v11; // [esp+1Ch] [ebp-4h]

  *(&v11 - 9) = v10;
  LOBYTE(a4) = a4 - (__CFADD__(BYTE1(a1), (_BYTE)a2) - 101);
  v7 = a3 - 1;
  LOBYTE(a2) = -(char)(BYTE1(a1) + a2);
  v8 = v11;
  v9 = a1 - 1;
  ++BYTE1(v7);
  LOBYTE(v9) = BYTE1(a4) | v9;
  LOBYTE(a4) = BYTE1(v9) | a4;
  v4 = v11 ^ a4;
  ++BYTE1(v9);
  LOBYTE(v7) = ~(_BYTE)v7;
  LOBYTE(v4) = v7;
  BYTE1(a2) = BYTE1(v9) | (BYTE1(v7) + BYTE1(a2));
  _EBX = v9 | v4;
  LOBYTE(a2) = ~(_BYTE)a2;
  ((void (__fastcall *)(int, int))((char *)&loc_402C8B + 1))(v11 ^ v7, a2);
  __asm { arpl    [ebx], dx }
  sub_402386(v8);
}
// 402365: positive sp value 8 has been found
// 40263E: could not find valid save-restore pair for esi

//----- (0040267F) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40267F(__int16 a1@<dx>, int a2@<ecx>, int _ESI@<esi>)
{
  HIBYTE(a1) = 17;
  LOBYTE(a2) = a2 - 111;
  ((void (__fastcall *)(int, __int16))((char *)&loc_4029AB + 4))(a2, a1);
  __asm { outsd }
  JUMPOUT(0x40269E);
}
// 402685: positive sp value 4 has been found
// 402697: control flows out of bounds to 40269E

//----- (004026D1) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4026D1(__int32 a1@<ecx>, int a2@<ebp>, _BYTE *a3@<edi>)
{
  int v3; // ecx
  __int32 v4; // eax
  int v5; // eax
  int v6; // edx
  __int32 v7; // eax
  _BYTE *v8; // ebx
  unsigned int v9; // edx
  int v10; // ecx
  unsigned int v11; // edi
  _BYTE *v13; // edx
  char v20; // ch
  int v21; // ecx
  __int32 v22; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v22, a1);
  ((void (*)(void))((char *)&loc_402ED0 + 1))();
  v4 = __indword(0x51u);
  sub_4026D1(v4, a2, a3);
  v7 = v5 - *(_DWORD *)(a2 + v6 - 1882334863);
  LOBYTE(v7) = v7 & 0xE4;
  *a3 = BYTE1(v6);
  v8 = a3 + 1;
  sub_402A4B(v7, v7, (int)(a3 + 1), (int)a3);
  LOBYTE(v10) = 63;
  v11 = v9 | v10;
  LOBYTE(v8) = 53;
  BYTE1(v8) = (BYTE1(v9) ^ BYTE1(v8)) + 1;
  _EBX = (int)&v8[v10];
  LOBYTE(_EBX) = -(char)(BYTE1(v10) + _EBX);
  if ( !__SETP__(_EBX, 0) && __SETP__(_EBX, 0) )
  {
    LOBYTE(v10) = 111;
    *(_BYTE *)v9 = BYTE1(a2);
    BYTE1(v9) = ~BYTE1(v9);
    v13 = (_BYTE *)(v11 + v9);
    BYTE1(v13) = BYTE1(v10);
    _RAX = ((__int64 (__fastcall *)(int, _BYTE *))((char *)&loc_4021E5 + 1))(v10, v13);
    __asm { rep adc al, [ebx] }
    --*(_BYTE *)HIDWORD(_RAX);
    LOBYTE(v21) = 10;
    BYTE1(v21) = BYTE1(_EBX) + _CF + v20 + 118;
    sub_40291C(MEMORY[0xF28AD00B], v21, _EBX, (_BYTE *)v11);
    JUMPOUT(0x402DEA);
  }
  ((void (*)(void))loc_40256B)();
  if ( v3 - 1 < 0 )
    JUMPOUT(0x402221);
  JUMPOUT(0x4021F3);
}
// 40220B: positive sp value 4 has been found
// 40221F: control flows out of bounds to 402221
// 402DE5: control flows out of bounds to 402DEA
// 40221F: control flows out of bounds to 4021F3
// 4028B6: variable 'v5' is possibly undefined
// 4028B6: variable 'v6' is possibly undefined
// 4028E3: variable 'v9' is possibly undefined
// 4028E3: variable 'v10' is possibly undefined
// 40221E: variable 'v3' is possibly undefined
// 402DDE: variable 'v20' is possibly undefined
// 402DE5: variable 'v21' is possibly undefined

//----- (004026EA) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4026EA(int a1@<eax>, char a2@<dh>, char a3@<bl>)
{
  int v5; // [esp+10h] [ebp-8h]
  int v6; // [esp+14h] [ebp-4h]

  *(&v6 - 7) = v5;
  if ( __OFSUB__(a3, a2) || !__OFSUB__(a3, a2) )
  {
    sub_402C34();
    __asm { das }
    JUMPOUT(0x402740);
  }
  sub_402707(a1);
}
// 40273F: positive sp value 8 has been found
// 40273F: control flows out of bounds to 402740

//----- (00402707) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402707(int a1@<eax>)
{
  void *v1; // [esp+1Ch] [ebp-4h]
  void *retaddr; // [esp+20h] [ebp+0h]

  *(&retaddr - 9) = v1;
  if ( !a1 )
    JUMPOUT(0x402B66);
  JUMPOUT(0x402358);
}
// 402304: positive sp value 4 has been found
// 40272D: control flows out of bounds to 40272E
// 402317: control flows out of bounds to 402B66
// 402304: control flows out of bounds to 402358
// 402720: conditional instruction was optimized away because bl.1!=1

//----- (00402804) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402804(
        __int32 a1@<eax>,
        __int16 a2@<dx>,
        int a3@<ecx>,
        char a4@<bl>,
        __int16 a5@<di>,
        int a6@<esi>)
{
  __int16 v6; // bx
  __int16 v7; // dx
  int v8; // ecx
  void *v9; // [esp+Ch] [ebp-4h]
  void *retaddr; // [esp+10h] [ebp+0h]

  *(&retaddr - 5) = v9;
  LOBYTE(v6) = ~a4;
  v7 = a5 + a2 - 1;
  LOBYTE(a3) = a3 - 61;
  v8 = a3 - 1;
  v9 = 0;
  HIBYTE(v6) = 115;
  LOBYTE(v7) = v7 + 115;
  BYTE1(v8) = ~(BYTE1(v8) + 1);
  sub_4028F2(v7 - v6, v8, v6, a6, a1);
  JUMPOUT(0x4026B3);
}
// 40269E: positive sp value 4 has been found
// 4026B2: control flows out of bounds to 4026B3

//----- (0040281C) --------------------------------------------------------
#error "40209A: cannot convert to microcode (funcsize=44)"

//----- (004028F2) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4028F2(__int16 a1@<dx>, int a2@<ecx>, __int32 a3@<ebx>, int a4@<edi>, __int32 a5@<eax>)
{
  int v5; // ecx
  __int32 v6; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v6, a3);
  BYTE1(a2) = ~BYTE1(a2);
  LOBYTE(a2) = a2 - ((unsigned __int16)(a2 ^ a1) >> 8);
  v5 = a4 | a2;
  if ( __SETP__(v5, 0) || !__SETP__(v5, 0) )
    JUMPOUT(0x402F2B);
  sub_40291C(a5, v5, v6, (_BYTE *)a4);
}
// 4028FC: positive sp value 4 has been found
// 402904: control flows out of bounds to 402F2B

//----- (0040291C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40291C(__int32 a1@<eax>, int a2@<ecx>, int a3@<ebx>, _BYTE *a4@<edi>)
{
  char v5; // al
  __int32 v8; // [esp+0h] [ebp-4h] BYREF
  void *retaddr; // [esp+4h] [ebp+0h]

  _InterlockedExchange(&v8, a1);
  *(&retaddr - 2) = (void *)v8;
  _EBX = a2 + a3;
  v5 = ((int (*)(void))((char *)&loc_402F63 + 5))();
  v8 = 46;
  *a4 = v5;
  _EDI = a4 + 1;
  __asm { repne or edi, ebx }
  JUMPOUT(0x4028D9);
}
// 402922: positive sp value 4 has been found
// 402941: control flows out of bounds to 4028D9

//----- (00402A2A) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402A2A()
{
  JUMPOUT(0x402848);
}
// 402A2E: positive sp value 4 has been found
// 402A40: control flows out of bounds to 402848

//----- (00402A4B) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402A4B(char a1@<al>, __int32 a2@<ecx>, int a3@<ebx>, int a4@<edi>)
{
  int v4; // ebx
  int v5; // eax
  int v6; // edx
  int v7; // ecx
  _WORD v8[30185]; // [esp-EBD2h] [ebp-EBD2h] BYREF

  _InterlockedExchange((volatile __int32 *)v8, a2);
  LOBYTE(a3) = -(char)a3;
  v4 = a3 - a4;
  LOBYTE(v4) = a1 + v4;
  sub_402D58(
    *(int *)&v8[2],
    *(int *)&v8[4],
    *(int *)&v8[6],
    *(int *)&v8[8],
    *(int *)&v8[10],
    *(int *)&v8[12],
    *(int *)&v8[14],
    *(int *)&v8[16],
    *(int *)&v8[18],
    *(int *)&v8[20],
    *(int *)&v8[22],
    *(int *)&v8[24],
    *(int *)&v8[26],
    *(int *)&v8[28],
    *(int *)&v8[30],
    *(int *)&v8[32],
    *(int *)&v8[34],
    *(int *)&v8[36],
    *(int *)&v8[38],
    *(int *)&v8[40],
    *(int *)&v8[42],
    *(int *)&v8[44],
    *(int *)&v8[46],
    *(int *)&v8[48],
    *(int *)&v8[50],
    *(int *)&v8[52],
    *(int *)&v8[54],
    *(int *)&v8[56],
    *(int *)&v8[58],
    *(int *)&v8[60],
    *(int *)&v8[62],
    *(int *)&v8[64],
    *(int *)&v8[66],
    *(int *)&v8[68],
    *(int *)&v8[70],
    *(int *)&v8[72],
    *(int *)&v8[74],
    *(int *)&v8[76],
    *(int *)&v8[78],
    *(int *)&v8[80],
    *(int *)&v8[82],
    *(int *)&v8[84],
    *(int *)&v8[86],
    *(int *)&v8[88],
    *(int *)&v8[90],
    *(int *)&v8[92],
    *(int *)&v8[94],
    *(int *)&v8[96],
    *(int *)&v8[98],
    *(int *)&v8[100],
    *(int *)&v8[102],
    *(int *)&v8[104],
    *(int *)&v8[106],
    *(int *)&v8[108],
    *(int *)&v8[110],
    *(int *)&v8[112],
    *(int *)&v8[114],
    *(int *)&v8[116],
    *(int *)&v8[118],
    *(int *)&v8[120],
    *(int *)&v8[122],
    *(int *)&v8[124],
    *(int *)&v8[126]);
  *(_DWORD *)&v8[30183] = v4;
  v5 = __indword(0x27u);
  sub_402A67(v5, v6, v7, v4);
}
// 402A62: positive sp value EBD2 has been found
// 402A66: variable 'v6' is possibly undefined
// 402A66: variable 'v7' is possibly undefined

//----- (00402A67) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402A67(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>)
{
  int v5; // ecx
  char v6; // zf
  char v7; // sf
  char v8; // of

  __asm { rep pop edi }
  v5 = a2 | a3;
  LOBYTE(v5) = v5 + 1;
  LOBYTE(a2) = a2 + 100;
  sub_40263E(a1, a2, v5, a4);
  LOBYTE(a4) = -(char)a4;
  sub_402A2A();
  if ( !(v7 ^ v8 | v6) )
  {
    *(_BYTE *)(a4 + 229462054) = ~*(_BYTE *)(a4 + 229462054);
    JUMPOUT(0x402AA4);
  }
  JUMPOUT(0x402B15);
}
// 402A6C: positive sp value 4 has been found
// 402A9E: control flows out of bounds to 402AA4
// 402A9C: control flows out of bounds to 402B15
// 402A9C: variable 'v7' is possibly undefined
// 402A9C: variable 'v8' is possibly undefined
// 402A9C: variable 'v6' is possibly undefined

//----- (00402B42) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402B42(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  bool v3; // zf
  char v4; // cc
  int v5; // ebx
  int v6; // edi
  int v7; // ebx

  v5 = a3 + a1;
  v3 = (_BYTE)v5 == 0xFF;
  v4 = ((char)(v5 + 1) < 0) ^ __OFADD__(1, (_BYTE)v5);
  LOBYTE(v5) = v5 + 1;
  BYTE1(v5) = ~BYTE1(v5);
  if ( !v3 && v3 )
  {
    if ( !v4 )
    {
      if ( !__SETP__(v5 | a2, 0) )
      {
        v6 = a3 - 1;
        LOBYTE(v5) = -20;
        BYTE1(v5) -= 46;
        v7 = v5 + 1;
        LOBYTE(v7) = ~(_BYTE)v7;
        if ( !__OFADD__(1, v7 + v6) && __OFADD__(1, v7 + v6) )
        {
          __asm { iret }
          JUMPOUT(0x402B8D);
        }
        JUMPOUT(0x40289A);
      }
      JUMPOUT(0x402BAB);
    }
    JUMPOUT(0x402B2C);
  }
  JUMPOUT(0x40241A);
}
// 402B46: positive sp value 4 has been found
// 402B8C: control flows out of bounds to 402B8D
// 402CB3: control flows out of bounds to 40241A
// 402B5F: control flows out of bounds to 402B2C
// 402B64: control flows out of bounds to 402BAB
// 402B79: control flows out of bounds to 40289A

//----- (00402B8E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402B8E()
{
  void *v0; // [esp+4h] [ebp-4h]
  void *retaddr; // [esp+8h] [ebp+0h]

  *(&retaddr - 3) = v0;
  JUMPOUT(0x4021B0);
}
// 402B92: positive sp value 4 has been found
// 402BC4: control flows out of bounds to 402771
// 402BA0: control flows out of bounds to 4021B0

//----- (00402C34) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402C34()
{
  __asm { repne pop edi }
  JUMPOUT(0x402933);
}
// 402C39: positive sp value 4 has been found
// 402C46: control flows out of bounds to 402933
// 402C51: conditional instruction was optimized away because edx.4!=0

//----- (00402C5F) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402C5F(int _EAX@<eax>, char a2@<bh>, _DWORD *a3@<edi>)
{
  char v3; // bh

  v3 = a2 + 1;
  if ( !__SETP__(v3, 0) && __SETP__(v3, 0) )
  {
    *a3 = _EAX;
    __asm { aam     66h ; 'f' }
    JUMPOUT(0x402C90);
  }
  sub_4024D4();
  JUMPOUT(0x402E8D);
}
// 402C63: positive sp value 4 has been found
// 402C8B: control flows out of bounds to 402C90
// 402E8B: control flows out of bounds to 402E8D

//----- (00402D58) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_402D58(
        int a1,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  int v64; // [esp+1Ch] [ebp-8h]
  int v65; // [esp+20h] [ebp-4h]

  *(&v65 - 10) = v64;
  JUMPOUT(0x402E2E);
}
// 402D72: positive sp value 8 has been found
// 402D79: unbalanced stack, ignored a potential tail call
// 402D65: control flows out of bounds to 402E2E
// 402D73: conditional instruction was optimized away because ebx.4>=1
// 402D58: too many input arguments, some ignored

//----- (00402E13) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn sub_402E13(int a1@<ecx>, int a2@<edi>)
{
  int v2; // ecx

  BYTE1(a1) |= 0x31u;
  LOBYTE(a1) = ~(_BYTE)a1;
  ((void (__thiscall *)(int))((char *)&loc_4028B6 + 6))(a1);
  ((void (__thiscall *)(int))sub_40281C)(a2 ^ v2);
  JUMPOUT(0x847AD776);
}
// 402E3F: positive sp value 8 has been found
// 402E3F: control flows out of bounds to 847AD776
// 402E35: variable 'v2' is possibly undefined
// 40281C: using guessed type _DWORD sub_40281C();

//----- (00402F06) --------------------------------------------------------
#error "402F43: cannot convert to microcode (funcsize=28)"

// nfuncs=36 queued=36 decompiled=36 lumina nreq=0 worse=0 better=0
#error "There were 5 decompilation failure(s) on 36 function(s)"
