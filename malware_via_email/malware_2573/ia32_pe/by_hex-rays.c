/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

// BOOL __usercall start@<eax>(int@<eax>, int@<edx>, int@<ebx>, char);

//-------------------------------------------------------------------------
// Data declarations

// extern BOOL (__stdcall *SetConsoleCtrlHandler)(PHANDLER_ROUTINE HandlerRoutine, BOOL Add);
int (__thiscall *off_404C04)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD) = &loc_40120C; // weak
_UNKNOWN unk_4053BF; // weak
int dword_405607; // weak
int dword_40FB61; // weak
int dword_40FE6E; // weak


//----- (004011B0) --------------------------------------------------------
BOOL __usercall start@<eax>(int a1@<eax>, int a2@<edx>, int a3@<ebx>, char a4)
{
  int v4; // ebx
  void *v5; // ecx
  BOOL result; // eax
  int v7; // [esp+0h] [ebp-30h]
  void *v8; // [esp+8h] [ebp-28h]
  BOOL (__stdcall *v9)(DWORD); // [esp+28h] [ebp-8h]
  BOOL v10; // [esp+2Ch] [ebp-4h]

  v4 = a1 | a3;
  v7 = dword_405607;
  v5 = &unk_4053BF;
  if ( (a2 & v4) == 0 )
  {
    v5 = v8;
    v7 = v4;
  }
  ((void (__thiscall *)(void *, int, int))off_404C04)(v5, 1077255189, v7);
  dword_40FB61 = (int)&a4;
  result = SetConsoleCtrlHandler(v9, v10);
  --dword_40FE6E;
  return result;
}
// 4011DB: variable 'v8' is possibly undefined
// 4011F5: variable 'v9' is possibly undefined
// 4011F5: variable 'v10' is possibly undefined
// 404C04: using guessed type int (__thiscall *off_404C04)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 405607: using guessed type int dword_405607;
// 40FB61: using guessed type int dword_40FB61;
// 40FE6E: using guessed type int dword_40FE6E;

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
