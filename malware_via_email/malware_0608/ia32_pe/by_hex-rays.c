/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// int __usercall sub_40101F@<eax>(int@<eax>);
void sub_401098();
void sub_4010C3();
// void __usercall sub_4010DC(int@<edx>, int@<ebx>, int@<edi>);
void sub_4010F9();
// int __usercall sub_4011C8@<eax>(int@<ebx>);
void sub_401261();
// void __usercall sub_402015(int@<ebx>, int@<ebp>);
// int __userpurge sub_402068@<eax>(char@<al>, __int16@<bx>, int@<edi>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
void sub_4020DA();
_DWORD sub_40225A(); // weak
_DWORD __far sub_402432(); // weak
double sub_40251F(); // weak
// void __usercall sub_402558(char@<cf>, int@<edx>, __int16@<cx>, double *@<ebx>, int@<edi>, int@<esi>, double@<st0>);
// void __usercall sub_402574(int _EAX@<eax>, __int16@<dx>, __int16@<cx>, double *@<ebx>, int@<edi>, int@<esi>, double@<st0>);
// void __userpurge sub_4025C3(int _EAX@<eax>, unsigned int a2@<edx>, unsigned int a3@<ecx>, int a4@<ebx>, int a5@<esi>, double a6@<st0>, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63);
// void __usercall sub_402628(int@<ebx>);
_DWORD sub_4026A8(); // weak
void sub_402780();
// void __usercall sub_4027A3(char@<al>, __int16@<bx>, int@<edi>);
// void __usercall sub_4027C3(int@<eax>, char@<bl>, int@<edi>);
_DWORD sub_402A56(); // weak
// void __usercall sub_402B3A(__int32@<eax>, int@<ecx>, char@<bh>);
// void __usercall sub_402CD2(int@<eax>, int@<edi>);
// void __userpurge sub_402D2E(char@<dl>, char@<cl>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
// double __userpurge sub_402D9C@<st0>(bool@<cf>, char@<cl>, unsigned __int32@<ebx>, unsigned __int32@<esi>, double@<st0>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
// void __userpurge sub_402DF7(int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
// void __usercall sub_402E65(__int32@<eax>, int@<ecx>);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_4020F6; // weak
_UNKNOWN loc_4023C8; // weak
_UNKNOWN loc_4027F7; // weak
_UNKNOWN loc_40285A; // weak
_UNKNOWN loc_402B5A; // weak
_UNKNOWN loc_402C0F; // weak
_UNKNOWN loc_402C26; // weak
_UNKNOWN loc_402CF0; // weak


//----- (0040101F) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_40101F@<eax>(int a1@<eax>)
{
  int result; // eax
  char v2; // cf
  char v3; // zf
  int v4; // ecx
  int v5; // ecx

  result = a1 + 286331154;
  if ( !result )
  {
    sub_4010F9();
    __indword(0x82u);
    v5 = v4 - 1;
    if ( v3 || !v5 )
    {
      __asm { ffreep  st(2) }
      JUMPOUT(0x4012F3);
    }
    if ( !v2 )
      JUMPOUT(0x4012AA);
    JUMPOUT(0x40130F);
  }
  return result;
}
// 401023: positive sp value 4 has been found
// 4012A9: control flows out of bounds to 4012AA
// 4012F2: control flows out of bounds to 4012F3
// 4012A7: control flows out of bounds to 40130F
// 40135B: conditional instruction was optimized away because ecx.4>=0
// 4012A7: variable 'v2' is possibly undefined
// 4012EE: variable 'v4' is possibly undefined
// 4012EE: variable 'v3' is possibly undefined

//----- (00401098) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_401098()
{
  JUMPOUT(0x401160);
}
// 40109C: positive sp value 4 has been found
// 4010AE: control flows out of bounds to 401160

//----- (004010C3) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4010C3()
{
  void *v0; // [esp+14h] [ebp-4h]
  void *retaddr; // [esp+18h] [ebp+0h]

  *(&retaddr - 7) = v0;
  JUMPOUT(0x401079);
}
// 401006: positive sp value 4 has been found
// 401018: control flows out of bounds to 401079

//----- (004010DC) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4010DC(int a1@<edx>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // ebx
  unsigned int v4; // esi
  int v5; // eax
  int v7; // esi
  int v8; // et0
  _BYTE *v10; // edx
  char v11; // cl
  char v12; // cl
  int v13; // edi
  int v14; // esi
  int v15; // eax
  int v21; // ebx
  int v23; // ebx
  int v25; // eax
  unsigned int v26; // edx
  unsigned int v27; // ecx
  int v28; // esi
  int v29; // edx
  int v30; // ecx
  int v31; // ecx
  int v32; // ecx
  unsigned int v33; // [esp-4h] [ebp-4h]

  v23 = (a3 ^ (a2 - 2)) - (a3 ^ (a1 + 1));
  sub_401098();
  if ( _SF )
  {
    v3 = v23 - v25;
    BYTE1(v3) += (v27 < v26) + 62;
    _CF = BYTE1(v3) < BYTE1(v25);
    BYTE1(v3) -= BYTE1(v25);
    if ( !_CF && _CF )
    {
      __asm { iret }
      JUMPOUT(0x4011C2);
    }
    LOBYTE(v3) = -(char)v3;
    BYTE1(v26) = 8;
    v4 = v26;
    sub_4010C3();
    v8 = v5;
    _EAX = v4;
    v7 = v8;
    __asm { aam     0A8h ; '¨' }
    v12 = *v10 & v11;
    __outbyte(0x39u, _EAX);
    if ( v12 <= 0 )
      JUMPOUT(0x401086);
    v13 = v7 + 1;
    v14 = v3 | v7;
    sub_4010DC(v3, v3, v13);
    __writeeflags(v33);
    __asm { rep dec ecx }
    v21 = v3 - 1;
    v28 = v21 | v14;
    v32 = _ECX - v28;
    v29 = v32 ^ v21;
    v30 = v32 + 1 - v21;
    if ( __SETP__(v30, 0) || !__SETP__(v30, 0) )
    {
      while ( 1 )
      {
        v31 = (v28 ^ (v30 + 2)) - v21;
        v21 |= v15;
        v28 = (v15 | v28) - (v29 - 1) - v31;
        v15 = sub_4011C8(v21);
        MEMORY[0x431735BD] ^= v21;
      }
    }
  }
  JUMPOUT(0x40105A);
}
// 401078: positive sp value 8 has been found
// 401228: control flows out of bounds to 401229
// 4011C1: control flows out of bounds to 4011C2
// 401059: control flows out of bounds to 401086
// 401212: control flows out of bounds to 40105A
// 40108A: conditional instruction was optimized away because ebx.4!=0
// 40121E: conditional instruction was optimized away because edx.4!=0
// 401049: variable 'v26' is possibly undefined
// 401052: variable 'v5' is possibly undefined
// 401055: variable 'v10' is possibly undefined
// 401055: variable 'v11' is possibly undefined
// 401077: variable 'v33' is possibly undefined
// 4011A9: variable 'v25' is possibly undefined
// 4011AB: variable 'v27' is possibly undefined
// 4011FF: variable '_SF' is possibly undefined
// 4012C6: variable 'v30' is possibly undefined
// 4012D1: variable 'v15' is possibly undefined
// 4012B0: variable 'v29' is possibly undefined

//----- (004010F9) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4010F9()
{
  JUMPOUT(0x401250);
}
// 4010FD: positive sp value 4 has been found
// 401106: control flows out of bounds to 401250

//----- (00401144) --------------------------------------------------------
#error "401144: stack frame is too big (funcsize=0)"

//----- (004011C8) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_4011C8@<eax>(int a1@<ebx>)
{
  void *v2; // [esp+2Ch] [ebp-4h]
  void *retaddr; // [esp+30h] [ebp+0h]

  *(&retaddr - 13) = v2;
  sub_401261();
  return a1 + 1;
}
// 4011CC: positive sp value 4 has been found

//----- (00401261) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_401261()
{
  JUMPOUT(0x401311);
}
// 401265: positive sp value 4 has been found
// 401274: control flows out of bounds to 401311

//----- (00402015) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402015(int a1@<ebx>, int a2@<ebp>)
{
  char v2; // cf
  int v3; // ecx
  void *v4; // [esp+18h] [ebp-4h]
  void *retaddr; // [esp+1Ch] [ebp+0h]

  *(&retaddr - 8) = v4;
  sub_402628(a1);
  *(_DWORD *)(v3 + 92) += a2 + v2;
  MEMORY[0x2484BB95]();
  MEMORY[0xC7C06BD0]();
  ((void (__cdecl *)(_DWORD))((char *)&loc_40285A + 3))((unsigned __int16)__DS__);
  JUMPOUT(0x40232F);
}
// 402019: positive sp value 4 has been found
// 402C3E: control flows out of bounds to 40232F
// 402C0C: variable 'v2' is possibly undefined
// 402C0C: variable 'v3' is possibly undefined

//----- (00402068) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
int __userpurge sub_402068@<eax>(
        char a1@<al>,
        __int16 a2@<bx>,
        int a3@<edi>,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  void *retaddr[2]; // [esp+0h] [ebp+0h]

  sub_4027A3(a1, a2, a3);
  return MK_FP(retaddr[0], retaddr[0])();
}
// 40206C: positive sp value 4 has been found
// 402F0E: bad sp value at call
// 402068: too many input arguments, some ignored

//----- (004020DA) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4020DA()
{
  void *v0; // [esp+20h] [ebp-4h]
  void *retaddr; // [esp+24h] [ebp+0h]

  *(&retaddr - 10) = v0;
  JUMPOUT(0x402739);
}
// 4020DE: positive sp value 4 has been found
// 4020F6: control flows out of bounds to 4020FC
// 4020E6: control flows out of bounds to 402739
// 4020EE: conditional instruction was optimized away because cl.1>=0

//----- (004021F3) --------------------------------------------------------
#error "402208: cannot convert to microcode (funcsize=10)"

//----- (0040225A) --------------------------------------------------------
#error "40272C: cannot convert to microcode (funcsize=112)"

//----- (00402432) --------------------------------------------------------
#error "402432: function frame is wrong (funcsize=0)"

//----- (0040251F) --------------------------------------------------------
#error "40254B: cannot convert to microcode (funcsize=19)"

//----- (00402558) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402558(
        char a1@<cf>,
        int a2@<edx>,
        __int16 a3@<cx>,
        double *a4@<ebx>,
        int a5@<edi>,
        int a6@<esi>,
        double a7@<st0>)
{
  int v7; // edx
  int v8; // eax
  __int16 v9; // cx
  __int16 v10; // dx

  BYTE1(a2) += a1 + 79;
  v7 = a2 - 1;
  HIBYTE(a3) = (_BYTE)a4;
  BYTE1(v7) -= 85;
  v8 = ((int (__fastcall *)(__int16, int))sub_402432)(a3, v7);
  MEMORY[0x236C711F] -= HIBYTE(v9);
  sub_402574(v8, v10, v9, a4, a5 - 1, a6, a7);
}
// 40256E: positive sp value 8 has been found
// 40256E: variable 'v9' is possibly undefined
// 40256F: variable 'v10' is possibly undefined
// 402432: using guessed type _DWORD __far sub_402432();

//----- (00402574) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402574(
        int _EAX@<eax>,
        __int16 a2@<dx>,
        __int16 a3@<cx>,
        double *a4@<ebx>,
        int a5@<edi>,
        int a6@<esi>,
        double a7@<st0>)
{
  __int16 v13; // cx
  int v15; // eax
  unsigned __int16 v16; // dx

  HIBYTE(a3) |= (unsigned __int8)a4;
  LOBYTE(a3) = a3 - 99;
  _ESI = (a5 | a6) - 1;
  if ( (unsigned __int8)(_EAX ^ HIBYTE(a2)) >= 0x93u
    && (HIBYTE(a2) ^ (unsigned __int8)((unsigned __int16)(a2 + a3) >> 8)) != -1
    && ((unsigned __int8)(_EAX ^ HIBYTE(a2)) < 0x93u
     || (HIBYTE(a2) ^ (unsigned __int8)((unsigned __int16)(a2 + v13) >> 8)) == -1) )
  {
    __asm { repne sub esi, eax }
    v15 = ((int (__usercall *)@<eax>(double@<st0>))((char *)&loc_402C0F + 2))(*a4 - a7);
    __outbyte(v16, v15);
    __outdword(v16, v15);
    JUMPOUT(0x4025A0);
  }
  JUMPOUT(0x4029F0);
}
// 402417: positive sp value 8 has been found
// 40259E: control flows out of bounds to 4025A0
// 402403: control flows out of bounds to 4029F0
// 40259C: variable 'v16' is possibly undefined

//----- (004025C3) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_4025C3(
        int _EAX@<eax>,
        unsigned int a2@<edx>,
        unsigned int a3@<ecx>,
        int a4@<ebx>,
        int a5@<esi>,
        double a6@<st0>,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  int v64; // ebx
  int v65; // eax
  char v66; // cl
  bool v67; // cc
  bool v68; // cf
  int v70; // edx
  int v71; // esi
  int v72; // eax
  int v73; // edx
  int v74; // ecx
  unsigned int v75; // ecx
  unsigned int v76; // ecx
  int v77; // esi
  bool v78; // cc
  int v79; // esi
  int v80; // ebp
  bool v81; // zf
  int v82; // ebx
  int v83; // ebx
  int v84; // [esp-334Dh] [ebp-334Dh] BYREF
  _DWORD v85[3282]; // [esp-3349h] [ebp-3349h] BYREF

  LOBYTE(a4) = a4 - 123;
  BYTE1(a4) = BYTE1(a4) + 94 - BYTE1(_EAX) - 1;
  v67 = SBYTE1(a4) <= (unsigned __int8)a3;
  BYTE1(a4) -= a3;
  if ( !v67 && v67 )
  {
    MEMORY[0x8087EEF8] = _EAX;
    __asm { aam     0F3h ; 'ó' }
    LOBYTE(a3) = BYTE1(a4) ^ a3;
    v68 = a2 < a3;
    LOBYTE(_EAX) = _EAX + 1;
    --BYTE1(a3);
    if ( !v68 && _EAX != 1 && (v68 || _EAX == 1) )
      __asm { retf    3341h }
    v70 = a5;
    v84 = a4;
    BYTE1(v70) = BYTE1(a5) - 1;
    BYTE1(a3) -= a5;
    v71 = a5 - 1;
    LOBYTE(a3) = BYTE1(a3) | a3;
    BYTE1(a3) = ~BYTE1(a3);
    v76 = a3 + 1;
    v77 = a4 | v71;
    if ( !(((int)(v76 + 1) < 0) ^ __OFADD__(1, v76) | (v76 == -1))
      && ((int)(v76 + 1) < 0) ^ __OFADD__(1, v76) | (v76 == -1) )
    {
      if ( (int)v85 < 0 )
      {
        v78 = v77 < 1;
        v79 = v77 - 1;
        if ( v78 || !v78 )
          JUMPOUT(0x402BA5);
        v80 = v85[0];
        v81 = a4 == 1;
        v82 = a4 - 1;
        if ( (unsigned __int8)((unsigned __int16)((unsigned __int16)&v85[-1] + v70) >> 8) >= (unsigned __int8)(__CFADD__(v70, &v84) - 109)
          && !v81 )
        {
          JUMPOUT(0x402B64);
        }
        if ( (unsigned __int8)((unsigned __int16)((unsigned __int16)&v85[-1] + v70) >> 8) >= (unsigned __int8)(__CFADD__(v70, &v84) - 109)
          && !v81 )
        {
          BYTE1(v82) = -106;
          LOBYTE(v82) = (BYTE1(v70) | v82) - 1;
          v83 = v82 - v79;
          if ( !__SETP__(v83, 0) && __SETP__(v83, 0) )
          {
            if ( (v79 & *(_DWORD *)(v84 + 8 * v85[0])) != 0 )
            {
              *(_BYTE *)(v79 - 562017635) *= 2;
              v85[0] = v80;
              JUMPOUT(0x4025E4);
            }
            JUMPOUT(0x402B53);
          }
          ((void (*)(void))((char *)&loc_4020F6 + 4))();
          __asm { lock retn }
        }
        if ( (unsigned __int8)((unsigned __int16)((unsigned __int16)&v85[-1] + v70) >> 8) < (unsigned __int8)(__CFADD__(v70, &v84) - 109)
          || v81 )
        {
          if ( (unsigned __int8)((unsigned __int16)((unsigned __int16)&v85[-1] + v70) >> 8) >= (unsigned __int8)(__CFADD__(v70, &v84) - 109) )
            JUMPOUT(0x402B39);
          JUMPOUT(0x40223D);
        }
      }
      JUMPOUT(0x4024B1);
    }
    JUMPOUT(0x40219F);
  }
  v72 = ((int (__stdcall *)(_DWORD))((char *)&loc_402CF0 + 4))(v85[0]);
  v75 = v74 - 1;
  if ( v81 || !v75 )
  {
    v64 = v75;
    LOBYTE(v64) = __CFADD__(v73, -1256296181 - v73) + v75 - 33;
    v64 ^= 0xB51E710B;
    LOBYTE(v64) = v64 - 55;
    sub_4025C3(
      v72,
      v72 + 248,
      v75,
      v64,
      -1256296181 - v73 - 1,
      v85[1],
      v85[2],
      v85[3],
      v85[4],
      v85[5],
      v85[6],
      v85[7],
      v85[8],
      v85[9],
      v85[10],
      v85[11],
      v85[12],
      v85[13],
      v85[14],
      v85[15],
      v85[16],
      v85[17],
      v85[18],
      v85[19],
      v85[20],
      v85[21],
      v85[22],
      v85[23],
      v85[24],
      v85[25],
      v85[26],
      v85[27],
      v85[28],
      v85[29],
      v85[30],
      v85[31],
      v85[32],
      v85[33],
      v85[34],
      v85[35],
      v85[36],
      v85[37],
      v85[38],
      v85[39],
      v85[40],
      v85[41],
      v85[42],
      v85[43],
      v85[44],
      v85[45],
      v85[46],
      v85[47],
      v85[48],
      v85[49],
      v85[50],
      v85[51],
      v85[52],
      v85[53],
      v85[54],
      v85[55],
      v85[56],
      v85[57],
      v85[58]);
    if ( v68 )
    {
      *(_QWORD *)(v65 + 736476078) = (__int64)a6;
      JUMPOUT(0x4021A0);
    }
    LOBYTE(v65) = *(_BYTE *)v65 + v65;
    v68 = __CFADD__(v66, *(_BYTE *)(v65 - 47));
    *(_BYTE *)(v65 - 47) += v66;
    *(_BYTE *)v65 -= v68 + BYTE1(v65);
    JUMPOUT(0x40217A);
  }
  JUMPOUT(0x402418);
}
// 402173: positive sp value 334D has been found
// 402178: control flows out of bounds to 40217A
// 40219A: control flows out of bounds to 4021A0
// 402A09: control flows out of bounds to 402A0E
// 402B37: control flows out of bounds to 402B39
// 402605: unbalanced stack, ignored a potential tail call
// 40296C: control flows out of bounds to 402418
// 402ACB: control flows out of bounds to 40223D
// 402B2E: control flows out of bounds to 4024B1
// 402BB1: control flows out of bounds to 4025E4
// 40295B: control flows out of bounds to 4028EC
// 402B03: control flows out of bounds to 40219F
// 402B75: control flows out of bounds to 402BA5
// 402B7D: control flows out of bounds to 402B64
// 402BA2: control flows out of bounds to 402B53
// 40295B: conditional instruction was optimized away because zf.1==0
// 4029E5: conditional instruction was optimized away because al.1!=0
// 402173: variable 'v65' is possibly undefined
// 402175: variable 'v66' is possibly undefined
// 40217F: variable 'v73' is possibly undefined
// 402198: variable 'v68' is possibly undefined
// 4029C9: variable 'v74' is possibly undefined
// 4029C9: variable 'v81' is possibly undefined
// 4025C3: too many input arguments, some ignored

//----- (00402628) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402628(int a1@<ebx>)
{
  void *retaddr; // [esp+0h] [ebp+0h] BYREF

  sub_402780();
  *(_DWORD *)(a1 + 47) &= (unsigned int)&retaddr;
  JUMPOUT(0x4023C8);
}
// 402344: positive sp value 4 has been found
// 4023C5: control flows out of bounds to 4023C8
// 402620: control flows out of bounds to 402621
// 402686: control flows out of bounds to 402ED8
// 402663: control flows out of bounds to 402A71
// 40264B: conditional instruction was optimized away because cl.1>=0

//----- (004026A8) --------------------------------------------------------
#error "402292: cannot convert to microcode (funcsize=36)"

//----- (00402780) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402780()
{
  __asm { repne pop ecx }
  JUMPOUT(0x402604);
}
// 402787: positive sp value 4 has been found
// 40278F: control flows out of bounds to 402604
// 4027A0: control flows out of bounds to 40272C
// 402798: conditional instruction was optimized away because cl.1>=1

//----- (004027A3) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4027A3(char a1@<al>, __int16 a2@<bx>, int a3@<edi>)
{
  __int16 v3; // cx
  __int64 v4; // rax
  char v5; // cf

  HIBYTE(v3) = (HIBYTE(a2) ^ (a2 - 1)) - 1;
  LOBYTE(v3) = a1 ^ 0x92;
  v4 = ((__int64 (__thiscall *)(__int16))loc_4023C8)(v3);
  *(_BYTE *)(HIDWORD(v4) + 752584352) += BYTE1(v4) + v5;
  sub_4027C3(v4, a2, a3);
}
// 4027A7: positive sp value 4 has been found
// 4027BD: variable 'v5' is possibly undefined

//----- (004027C3) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4027C3(int a1@<eax>, char a2@<bl>, int a3@<edi>)
{
  char v3; // zf
  int v4; // ecx
  int v5; // ecx
  char v6; // dl
  _BYTE *v7; // ecx

  sub_402CD2(a1, a3);
  v5 = v4 - 1;
  if ( !v3 || !v5 )
  {
    ((void (*)(void))((char *)&loc_402B5A + 5))();
    *v7 = v6;
    v7[610569510] &= a2;
    JUMPOUT(0x4027FD);
  }
  JUMPOUT(0x402828);
}
// 4027C7: positive sp value 4 has been found
// 4027F7: control flows out of bounds to 4027FD
// 4027DC: control flows out of bounds to 402828
// 4027DC: variable 'v4' is possibly undefined
// 4027DC: variable 'v3' is possibly undefined
// 4027F5: variable 'v6' is possibly undefined
// 4027F5: variable 'v7' is possibly undefined

//----- (00402A56) --------------------------------------------------------
#error "402A96: cannot convert to microcode (funcsize=28)"

//----- (00402B3A) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402B3A(__int32 a1@<eax>, int a2@<ecx>, char a3@<bh>)
{
  char v3; // bh

  v3 = 30 - a3;
  if ( !__OFSUB__(v3, 1) && __OFSUB__(v3, 1) )
  {
    _disable();
    JUMPOUT(0x402B60);
  }
  sub_402E65(a1, a2);
  JUMPOUT(0x4022CB);
}
// 4022BA: positive sp value 8 has been found
// 402B5A: control flows out of bounds to 402B60
// 4022CA: control flows out of bounds to 4022CB

//----- (00402CD2) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402CD2(int a1@<eax>, int a2@<edi>)
{
  bool v2; // of
  _DWORD *v3; // edi

  v2 = __OFADD__(1, a2);
  v3 = (_DWORD *)(a2 + 1);
  if ( !v2 && v2 )
  {
    *v3 = a1;
    JUMPOUT(0x402CF6);
  }
  JUMPOUT(0x4026F3);
}
// 402909: positive sp value 8 has been found
// 402CF0: control flows out of bounds to 402CF6
// 4028FF: control flows out of bounds to 4026F3
// 40291C: control flows out of bounds to 402C8D

//----- (00402D2E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_402D2E(
        char a1@<dl>,
        char a2@<cl>,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  char v64; // bl
  int v65; // edx
  int v66; // ecx

  v64 = a1 + a2;
  sub_40225A();
  LOBYTE(v65) = ~(_BYTE)v65;
  BYTE1(v66) ^= v64;
  LOBYTE(v66) = BYTE1(v66) ^ (v66 + 1);
  BYTE1(v66) |= v66;
  if ( BYTE1(v66) < 0x21u && BYTE1(v66) != 33 && (BYTE1(v66) >= 0x21u || BYTE1(v66) == 33) )
    JUMPOUT(0x4300A7);
  LOBYTE(v65) = v65 - 122;
  LOBYTE(v66) = ~(BYTE1(v65) + ~(_BYTE)v66 + 103);
  BYTE1(v66) = v65 ^ 0x5C;
  LOBYTE(v65) = __ROL1__(v65, 3);
  ((void (__fastcall *)(int, int))((char *)&loc_4027F7 + 3))(v66 + 1, v65);
  JUMPOUT(0x402159);
}
// 402D32: positive sp value 4 has been found
// 402157: control flows out of bounds to 402159
// 402D76: unbalanced stack, ignored a potential tail call
// 402D57: variable 'v65' is possibly undefined
// 402D59: variable 'v66' is possibly undefined
// 402D2E: too many input arguments, some ignored
// 40225A: using guessed type _DWORD sub_40225A();

//----- (00402D9C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
double __userpurge sub_402D9C@<st0>(
        bool a1@<cf>,
        char a2@<cl>,
        unsigned __int32 a3@<ebx>,
        unsigned __int32 a4@<esi>,
        double a5@<st0>,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  unsigned __int32 v64; // esi
  int v65; // eax
  int v67; // [esp-3345h] [ebp-3345h]
  int v68; // [esp-3341h] [ebp-3341h]
  int v69; // [esp-333Dh] [ebp-333Dh]
  int v70; // [esp-3339h] [ebp-3339h]
  int v71; // [esp-3335h] [ebp-3335h]
  int v72; // [esp-3331h] [ebp-3331h]
  int v73; // [esp-332Dh] [ebp-332Dh]
  int v74; // [esp-3329h] [ebp-3329h]
  int v75; // [esp-3325h] [ebp-3325h]
  int v76; // [esp-3321h] [ebp-3321h]
  int v77; // [esp-331Dh] [ebp-331Dh]
  int v78; // [esp-3319h] [ebp-3319h]
  int v79; // [esp-3315h] [ebp-3315h]
  int v80; // [esp-3311h] [ebp-3311h]
  int v81; // [esp-330Dh] [ebp-330Dh]
  int v82; // [esp-3309h] [ebp-3309h]
  int v83; // [esp-3305h] [ebp-3305h]
  int v84; // [esp-3301h] [ebp-3301h]
  int v85; // [esp-32FDh] [ebp-32FDh]
  int v86; // [esp-32F9h] [ebp-32F9h]
  int v87; // [esp-32F5h] [ebp-32F5h]
  int v88; // [esp-32F1h] [ebp-32F1h]
  int v89; // [esp-32EDh] [ebp-32EDh]
  int v90; // [esp-32E9h] [ebp-32E9h]
  int v91; // [esp-32E5h] [ebp-32E5h]
  int v92; // [esp-32E1h] [ebp-32E1h]
  int v93; // [esp-32DDh] [ebp-32DDh]
  int v94; // [esp-32D9h] [ebp-32D9h]
  int v95; // [esp-32D5h] [ebp-32D5h]
  int v96; // [esp-32D1h] [ebp-32D1h]
  int v97; // [esp-32CDh] [ebp-32CDh]
  int v98; // [esp-32C9h] [ebp-32C9h]
  int v99; // [esp-32C5h] [ebp-32C5h]
  int v100; // [esp-32C1h] [ebp-32C1h]
  int v101; // [esp-32BDh] [ebp-32BDh]
  int v102; // [esp-32B9h] [ebp-32B9h]
  int v103; // [esp-32B5h] [ebp-32B5h]
  int v104; // [esp-32B1h] [ebp-32B1h]
  int v105; // [esp-32ADh] [ebp-32ADh]
  int v106; // [esp-32A9h] [ebp-32A9h]
  int v107; // [esp-32A5h] [ebp-32A5h]
  int v108; // [esp-32A1h] [ebp-32A1h]
  int v109; // [esp-329Dh] [ebp-329Dh]
  int v110; // [esp-3299h] [ebp-3299h]
  int v111; // [esp-3295h] [ebp-3295h]
  int v112; // [esp-3291h] [ebp-3291h]
  int v113; // [esp-328Dh] [ebp-328Dh]
  int v114; // [esp-3289h] [ebp-3289h]
  int v115; // [esp-3285h] [ebp-3285h]
  int v116; // [esp-3281h] [ebp-3281h]
  int v117; // [esp-327Dh] [ebp-327Dh]
  int v118; // [esp-3279h] [ebp-3279h]
  int v119; // [esp-3275h] [ebp-3275h]
  int v120; // [esp-3271h] [ebp-3271h]
  int v121; // [esp-326Dh] [ebp-326Dh]
  int v122; // [esp-3269h] [ebp-3269h]
  int v123; // [esp-3265h] [ebp-3265h]
  int v124; // [esp-3261h] [ebp-3261h]
  int v125; // [esp-325Dh] [ebp-325Dh]
  int v126; // [esp-3259h] [ebp-3259h]
  int v127; // [esp-3255h] [ebp-3255h]
  int v128; // [esp-3251h] [ebp-3251h]
  int v129; // [esp-324Dh] [ebp-324Dh]

  BYTE1(a3) = a1 + BYTE1(a3) - 9;
  LOBYTE(a3) = BYTE1(a3);
  a1 = a4 < a3;
  v64 = a4 - a3;
  LOBYTE(a3) = ~(BYTE1(a3) - (a1 - 38));
  BYTE1(a3) ^= a2;
  sub_402DF7(
    v67,
    v68,
    v69,
    v70,
    v71,
    v72,
    v73,
    v74,
    v75,
    v76,
    v77,
    v78,
    v79,
    v80,
    v81,
    v82,
    v83,
    v84,
    v85,
    v86,
    v87,
    v88,
    v89,
    v90,
    v91,
    v92,
    v93,
    v94,
    v95,
    v96,
    v97,
    v98,
    v99,
    v100,
    v101,
    v102,
    v103,
    v104,
    v105,
    v106,
    v107,
    v108,
    v109,
    v110,
    v111,
    v112,
    v113,
    v114,
    v115,
    v116,
    v117,
    v118,
    v119,
    v120,
    v121,
    v122,
    v123,
    v124,
    v125,
    v126,
    v127,
    v128,
    v129);
  if ( a1 )
    JUMPOUT(0x402E1E);
  _InterlockedExchange((volatile __int32 *)(v64 - 77), a3);
  return a5 + (double)*(int *)(v65 - 780136765);
}
// 402DB3: positive sp value 3349 has been found
// 402DB3: control flows out of bounds to 402E1E
// 402DAE: variable 'v67' is possibly undefined
// 402DAE: variable 'v68' is possibly undefined
// 402DAE: variable 'v69' is possibly undefined
// 402DAE: variable 'v70' is possibly undefined
// 402DAE: variable 'v71' is possibly undefined
// 402DAE: variable 'v72' is possibly undefined
// 402DAE: variable 'v73' is possibly undefined
// 402DAE: variable 'v74' is possibly undefined
// 402DAE: variable 'v75' is possibly undefined
// 402DAE: variable 'v76' is possibly undefined
// 402DAE: variable 'v77' is possibly undefined
// 402DAE: variable 'v78' is possibly undefined
// 402DAE: variable 'v79' is possibly undefined
// 402DAE: variable 'v80' is possibly undefined
// 402DAE: variable 'v81' is possibly undefined
// 402DAE: variable 'v82' is possibly undefined
// 402DAE: variable 'v83' is possibly undefined
// 402DAE: variable 'v84' is possibly undefined
// 402DAE: variable 'v85' is possibly undefined
// 402DAE: variable 'v86' is possibly undefined
// 402DAE: variable 'v87' is possibly undefined
// 402DAE: variable 'v88' is possibly undefined
// 402DAE: variable 'v89' is possibly undefined
// 402DAE: variable 'v90' is possibly undefined
// 402DAE: variable 'v91' is possibly undefined
// 402DAE: variable 'v92' is possibly undefined
// 402DAE: variable 'v93' is possibly undefined
// 402DAE: variable 'v94' is possibly undefined
// 402DAE: variable 'v95' is possibly undefined
// 402DAE: variable 'v96' is possibly undefined
// 402DAE: variable 'v97' is possibly undefined
// 402DAE: variable 'v98' is possibly undefined
// 402DAE: variable 'v99' is possibly undefined
// 402DAE: variable 'v100' is possibly undefined
// 402DAE: variable 'v101' is possibly undefined
// 402DAE: variable 'v102' is possibly undefined
// 402DAE: variable 'v103' is possibly undefined
// 402DAE: variable 'v104' is possibly undefined
// 402DAE: variable 'v105' is possibly undefined
// 402DAE: variable 'v106' is possibly undefined
// 402DAE: variable 'v107' is possibly undefined
// 402DAE: variable 'v108' is possibly undefined
// 402DAE: variable 'v109' is possibly undefined
// 402DAE: variable 'v110' is possibly undefined
// 402DAE: variable 'v111' is possibly undefined
// 402DAE: variable 'v112' is possibly undefined
// 402DAE: variable 'v113' is possibly undefined
// 402DAE: variable 'v114' is possibly undefined
// 402DAE: variable 'v115' is possibly undefined
// 402DAE: variable 'v116' is possibly undefined
// 402DAE: variable 'v117' is possibly undefined
// 402DAE: variable 'v118' is possibly undefined
// 402DAE: variable 'v119' is possibly undefined
// 402DAE: variable 'v120' is possibly undefined
// 402DAE: variable 'v121' is possibly undefined
// 402DAE: variable 'v122' is possibly undefined
// 402DAE: variable 'v123' is possibly undefined
// 402DAE: variable 'v124' is possibly undefined
// 402DAE: variable 'v125' is possibly undefined
// 402DAE: variable 'v126' is possibly undefined
// 402DAE: variable 'v127' is possibly undefined
// 402DAE: variable 'v128' is possibly undefined
// 402DAE: variable 'v129' is possibly undefined
// 402DB3: variable 'a1' is possibly undefined
// 402DB8: variable 'v65' is possibly undefined
// 402D9C: too many input arguments, some ignored

//----- (00402DF7) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_402DF7(
        int a1,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  void *v64; // [esp+2Ch] [ebp-4h]
  void *retaddr[2]; // [esp+30h] [ebp+0h]

  retaddr[-13] = v64;
  JUMPOUT(0x402B81);
}
// 402997: positive sp value 4 has been found
// 4029AD: control flows out of bounds to 402B81
// 402DF7: too many input arguments, some ignored

//----- (00402E65) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402E65(__int32 a1@<eax>, int a2@<ecx>)
{
  __int32 v2; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v2, a1);
  ((void (__thiscall *)(int))((char *)&loc_402C26 + 4))(a2);
  v2 = -113;
  JUMPOUT(0x402E7D);
}
// 402E6B: positive sp value 4 has been found
// 402E7B: control flows out of bounds to 402E7D

// nfuncs=30 queued=30 decompiled=30 lumina nreq=0 worse=0 better=0
#error "There were 7 decompilation failure(s) on 30 function(s)"
