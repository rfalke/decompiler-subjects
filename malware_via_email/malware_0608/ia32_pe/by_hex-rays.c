/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// int __usercall sub_40101F@<eax>(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<edi>, int a6@<esi>);
double sub_401098(); // weak
void sub_4010C3();
// void __usercall sub_4010DC(int a1@<edx>, int a2@<ecx>, int a3@<ebx>, int a4@<edi>);
double sub_4010F9(); // weak
double sub_4011C8(); // weak
void sub_401261();
// void __usercall sub_402015(int a1@<ebx>, int a2@<ebp>);
// int __userpurge sub_402068@<eax>(char a1@<al>, __int16 a2@<bx>, int a3@<edi>, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63);
void sub_4020DA();
_DWORD sub_40225A(); // weak
// void __usercall sub_402432(__int32 a1@<eax>, int a2@<ecx>, int a3@<ebx>, _BYTE *a4@<edi>, int a5@<esi>, double a6@<st0>);
double sub_40251F(); // weak
// void __usercall sub_402558(__int16 a3@<cx>, double *a4@<ebx>, int a5@<edi>, int a6@<esi>, double a7@<st0>, __int32 eax0@<eax>);
// void __usercall sub_402574(int _EAX@<eax>, __int16 a2@<dx>, __int16 a3@<cx>, double *a4@<ebx>, int a5@<edi>, int a6@<esi>, double a7@<st0>);
// void __userpurge sub_4025C3(int _EAX@<eax>, unsigned int a2@<edx>, unsigned int a3@<ecx>, int a4@<ebx>, int a5@<esi>, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63);
// void __usercall sub_402628(int a1@<ebx>);
_DWORD sub_4026A8(); // weak
void sub_402780();
// void __usercall sub_4027A3(char a1@<al>, __int16 a2@<bx>, int a3@<edi>);
// void __usercall sub_4027C3(int a1@<eax>, char a2@<bl>, int a3@<edi>);
_DWORD sub_402A56(); // weak
// void __usercall sub_402B3A(__int32 a1@<eax>, int a2@<ecx>, char a3@<bh>);
// void __usercall sub_402CD2(int a1@<eax>, int a2@<edi>);
// void __userpurge sub_402D2E(char a1@<dl>, char a2@<cl>, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63);
// double __userpurge sub_402D9C@<st0>(bool a1@<cf>, char a2@<cl>, unsigned __int32 a3@<ebx>, unsigned __int32 a4@<esi>, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63);
// void __usercall sub_402E65(__int32 a1@<eax>, int a2@<ecx>);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_4020F6; // weak
_UNKNOWN loc_4023C8; // weak
_UNKNOWN loc_4027F7; // weak
_UNKNOWN loc_40285A; // weak
_UNKNOWN loc_402B5A; // weak
_UNKNOWN loc_402C0F; // weak
_UNKNOWN loc_402C26; // weak
_UNKNOWN loc_402CF0; // weak
_UNKNOWN sub_402DF7; // weak
_UNKNOWN loc_402EAC; // weak


//----- (0040101F) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_40101F@<eax>(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<edi>, int a6@<esi>)
{
  int v6; // ecx
  int result; // eax
  int v8; // edx
  int v9; // esi
  int v10; // ecx
  int v11; // edx
  char v12; // cf
  unsigned __int32 v13; // eax
  char v14; // zf
  int v15; // ecx
  int v16; // ecx
  int v18; // edx
  int v19; // ecx
  int v20; // edx
  int v21; // ecx
  int v22; // esi
  int v23; // ebx
  int v24; // edx

  v6 = a6 | a3;
  result = a1 + 286331154;
  v8 = a2 + 1;
  v9 = v8 + a6 + 1 - v6;
  v10 = v6 - 1;
  v11 = result + v8;
  v22 = v9 + 1;
  v23 = (v11 - 1) ^ a5 ^ (a4 - 1);
  v24 = result + v11 - 1;
  v18 = v24 + 1;
  v19 = v10 - v18;
  v20 = v23 | v18;
  if ( !result )
  {
    v21 = v19 - 1;
    ((void (__fastcall *)(int, int))sub_4010F9)(v21 - 1, v20 + 1 - v22);
    v13 = __indword(0x82u);
    v16 = v15 - 1;
    if ( v14 || !v16 )
    {
      __asm { ffreep  st(2) }
      JUMPOUT(0x4012F3);
    }
    if ( !v12 )
      JUMPOUT(0x4012AA);
    JUMPOUT(0x40130F);
  }
  return result;
}
// 401023: positive sp value 4 has been found
// 4012A9: control flows out of bounds to 4012AA
// 4012F2: control flows out of bounds to 4012F3
// 4012A7: control flows out of bounds to 40130F
// 40135B: conditional instruction was optimized away because of 'ecx.4>=0'
// 4012A7: variable 'v12' is possibly undefined
// 4012EE: variable 'v15' is possibly undefined
// 4012EE: variable 'v14' is possibly undefined
// 4010F9: using guessed type double sub_4010F9();

//----- (00401098) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_401098()
{
  JUMPOUT(0x401160);
}
// 40109C: positive sp value 4 has been found
// 4010AE: control flows out of bounds to 401160

//----- (004010C3) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4010C3()
{
  void *v0; // [esp+14h] [ebp-4h]
  void *retaddr; // [esp+18h] [ebp+0h]

  *(&retaddr - 7) = v0;
  JUMPOUT(0x401079);
}
// 401006: positive sp value 4 has been found
// 401018: control flows out of bounds to 401079

//----- (004010DC) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4010DC(int a1@<edx>, int a2@<ecx>, int a3@<ebx>, int a4@<edi>)
{
  int v4; // ebx
  unsigned int v5; // esi
  int v6; // eax
  int v8; // esi
  int v9; // et0
  _BYTE *v11; // edx
  int v12; // ecx
  int v13; // esi
  int v14; // eax
  int v19; // ebx
  int v21; // ebx
  int v22; // ecx
  int v23; // ebx
  int v25; // eax
  unsigned int v26; // edx
  unsigned int v27; // ecx
  int v28; // edx
  int v29; // esi
  int v30; // edx
  int v31; // ecx
  int v32; // ecx
  int v33; // ecx
  unsigned int v34; // [esp-4h] [ebp-4h]

  v21 = a3 - 2;
  v22 = (v21 ^ (a2 + 1)) - 1;
  v23 = (a4 ^ v21) - (a4 ^ (a1 + 1));
  ((void (__thiscall *)(int))sub_401098)(v22);
  if ( _SF )
  {
    v4 = v23 - v25;
    BYTE1(v4) += (v27 < v26) + 62;
    _CF = BYTE1(v4) < BYTE1(v25);
    BYTE1(v4) -= BYTE1(v25);
    if ( !_CF && _CF )
    {
      __asm { iret }
      JUMPOUT(0x4011C2);
    }
    LOBYTE(v4) = -(char)v4;
    BYTE1(v26) = 8;
    v5 = v26;
    sub_4010C3();
    v9 = v6;
    _EAX = v5;
    v8 = v9;
    __asm { aam     0A8h ; '¨' }
    LOBYTE(v12) = *v11 & v12;
    __outbyte(0x39u, _EAX);
    if ( (char)v12 <= 0 )
      JUMPOUT(0x401086);
    v13 = v4 | v8;
    ((void (__thiscall *)(int))sub_4010DC)(v4 ^ (v12 - v4));
    __writeeflags(v34);
    __asm { rep dec ecx }
    v19 = v4 - 1;
    v29 = v19 | v13;
    v33 = _ECX - v29;
    v30 = v33 ^ v19;
    v31 = v33 + 1 - v19;
    if ( __SETP__(v31, 0) || !__SETP__(v31, 0) )
    {
      while ( 1 )
      {
        v32 = (v29 ^ (v31 + 2)) - v19;
        v19 |= v14;
        v28 = v30 - 1;
        v29 = (v14 | v29) - v28 - v32;
        ((void (__fastcall *)(int, int))sub_4011C8)(v32 - v29, v29 | v28);
        MEMORY[0x431735BD] ^= v19;
      }
    }
  }
  JUMPOUT(0x40105A);
}
// 401078: positive sp value 8 has been found
// 401228: control flows out of bounds to 401229
// 4011C1: control flows out of bounds to 4011C2
// 401059: control flows out of bounds to 401086
// 401212: control flows out of bounds to 40105A
// 40108A: conditional instruction was optimized away because of 'ebx.4!=0'
// 40121E: conditional instruction was optimized away because of 'edx.4!=0'
// 401049: variable 'v26' is possibly undefined
// 401052: variable 'v6' is possibly undefined
// 401055: variable 'v11' is possibly undefined
// 401055: variable 'v12' is possibly undefined
// 401077: variable 'v34' is possibly undefined
// 4011A9: variable 'v25' is possibly undefined
// 4011AB: variable 'v27' is possibly undefined
// 4011FF: variable '_SF' is possibly undefined
// 4012C6: variable 'v31' is possibly undefined
// 4012D1: variable 'v14' is possibly undefined
// 4012B0: variable 'v30' is possibly undefined
// 401098: using guessed type double sub_401098();
// 4011C8: using guessed type double sub_4011C8();

//----- (004010F9) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4010F9()
{
  JUMPOUT(0x401250);
}
// 4010FD: positive sp value 4 has been found
// 401106: control flows out of bounds to 401250

//----- (00401144) --------------------------------------------------------
#error "401144: stack frame is too big (funcsize=0)"

//----- (004011C8) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_4011C8@<eax>(int a1@<ebx>)
{
  void *v2; // [esp+2Ch] [ebp-4h]
  void *retaddr; // [esp+30h] [ebp+0h]

  *(&retaddr - 13) = v2;
  sub_401261();
  return a1 + 1;
}
// 4011CC: positive sp value 4 has been found

//----- (00401261) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_401261()
{
  JUMPOUT(0x401311);
}
// 401265: positive sp value 4 has been found
// 401274: control flows out of bounds to 401311

//----- (00402015) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402015(int a1@<ebx>, int a2@<ebp>)
{
  char v2; // cf
  int v3; // ecx
  void *v4; // [esp+18h] [ebp-4h]
  void *retaddr; // [esp+1Ch] [ebp+0h]

  *(&retaddr - 8) = v4;
  sub_402628(a1);
  *(_DWORD *)(v3 + 92) += a2 + v2;
  MEMORY[0x2484BB95]();
  MEMORY[0xC7C06BD0]();
  ((void (__cdecl *)(_DWORD))((char *)&loc_40285A + 3))((unsigned __int16)__DS__);
  JUMPOUT(0x40232F);
}
// 402019: positive sp value 4 has been found
// 402C3E: control flows out of bounds to 40232F
// 402C0C: variable 'v2' is possibly undefined
// 402C0C: variable 'v3' is possibly undefined

//----- (00402068) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
int __userpurge sub_402068@<eax>(char a1@<al>, __int16 a2@<bx>, int a3@<edi>, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63)
{
  void *retaddr[2]; // [esp+0h] [ebp+0h]

  sub_4027A3(a1, a2, a3);
  return MK_FP(retaddr[0], retaddr[0])();
}
// 40206C: positive sp value 4 has been found
// 402F0E: bad sp value at call
// 402068: too many input arguments, some ignored

//----- (004020DA) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4020DA()
{
  void *v0; // [esp+20h] [ebp-4h]
  void *retaddr; // [esp+24h] [ebp+0h]

  *(&retaddr - 10) = v0;
  JUMPOUT(0x402739);
}
// 4020DE: positive sp value 4 has been found
// 4020F6: control flows out of bounds to 4020FC
// 4020E6: control flows out of bounds to 402739
// 4020EE: conditional instruction was optimized away because of 'cl.1>=0'

//----- (004021F3) --------------------------------------------------------
#error "402208: cannot convert to microcode (funcsize=10)"

//----- (0040225A) --------------------------------------------------------
#error "40272C: cannot convert to microcode (funcsize=112)"

//----- (00402432) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402432(__int32 a1@<eax>, int a2@<ecx>, int a3@<ebx>, _BYTE *a4@<edi>, int a5@<esi>, double a6@<st0>)
{
  double *v6; // ebx
  char v7; // cf
  char v8; // dh
  int v9; // edx
  char v10; // dl
  int v11; // ecx
  _BYTE *v12; // edi
  int v13; // edx
  int v14; // ecx
  int v15; // esi
  void (__thiscall *v16)(int); // [esp-4h] [ebp-4h] BYREF
  void *retaddr[2]; // [esp+0h] [ebp+0h] BYREF

  _InterlockedExchange((volatile __int32 *)&v16, a1);
  BYTE1(a2) = -(char)(BYTE1(a2) + 1);
  v6 = (double *)(a3 - 1);
  v16(a2);
  BYTE1(v9) = v8 - (v7 - 103);
  LOBYTE(v9) = v11 + v10;
  *a4 = ((int (__fastcall *)(int, int))((char *)&loc_402EAC + 1))(v11, v9 - (_DWORD)v6) + 118;
  v12 = a4 + 1;
  --*(_DWORD *)(v12 - 2);
  *(_DWORD *)(v13 + 1591443690) = __ROR4__(*(_DWORD *)(v13 + 1591443690), 128);
  v15 = v13 | v14 | a5;
  LOBYTE(v6) = 5;
  v16 = 0;
  BYTE1(v14) = ((BYTE1(v12) ^ (BYTE1(v13) - BYTE1(v14))) - 1) | BYTE1(v12);
  BYTE1(v6) = -BYTE1(v6) - 1;
  LOBYTE(v14) = BYTE1(v14);
  sub_402558(v14, v6, (int)(v12 - 1), v15, a6, (__int32)retaddr);
  __asm { retf }
}
// 4022CB: positive sp value 4 has been found
// 402445: variable 'v8' is possibly undefined
// 402445: variable 'v7' is possibly undefined
// 402448: variable 'v11' is possibly undefined
// 402448: variable 'v10' is possibly undefined
// 40244A: variable 'v9' is possibly undefined
// 402457: variable 'v13' is possibly undefined
// 402460: variable 'v14' is possibly undefined

//----- (0040251F) --------------------------------------------------------
#error "40254B: cannot convert to microcode (funcsize=19)"

//----- (00402558) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402558(__int16 a3@<cx>, double *a4@<ebx>, int a5@<edi>, int a6@<esi>, double a7@<st0>, __int32 eax0@<eax>)
{
  _BYTE *v8; // edi
  __int16 v9; // cx
  int v10; // eax
  __int16 v11; // dx

  HIBYTE(a3) = (_BYTE)a4;
  v8 = (_BYTE *)(a5 - 1);
  sub_402432(eax0, a3, (int)a4, v8, a6, a7);
  MEMORY[0x236C711F] -= HIBYTE(v9);
  sub_402574(v10, v11, v9, a4, (int)v8, a6, a7);
}
// 40256E: positive sp value 8 has been found
// 40256E: variable 'v9' is possibly undefined
// 40256F: variable 'v10' is possibly undefined
// 40256F: variable 'v11' is possibly undefined

//----- (00402574) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402574(int _EAX@<eax>, __int16 a2@<dx>, __int16 a3@<cx>, double *a4@<ebx>, int a5@<edi>, int a6@<esi>, double a7@<st0>)
{
  __int16 v12; // cx
  int v14; // eax
  unsigned __int16 v15; // dx

  HIBYTE(a3) |= (unsigned __int8)a4;
  LOBYTE(a3) = a3 - 99;
  _ESI = (a5 | a6) - 1;
  if ( (unsigned __int8)(_EAX ^ HIBYTE(a2)) >= 0x93u
    && (HIBYTE(a2) ^ (unsigned __int8)((unsigned __int16)(a2 + a3) >> 8)) != -1
    && ((unsigned __int8)(_EAX ^ HIBYTE(a2)) < 0x93u
     || (HIBYTE(a2) ^ (unsigned __int8)((unsigned __int16)(a2 + v12) >> 8)) == -1) )
  {
    __asm { repne sub esi, eax }
    v14 = ((int (__usercall *)@<eax>(double@<st0>))((char *)&loc_402C0F + 2))(*a4 - a7);
    __outbyte(v15, v14);
    __outdword(v15, v14);
    JUMPOUT(0x4025A0);
  }
  JUMPOUT(0x4029F0);
}
// 402417: positive sp value 8 has been found
// 40259E: control flows out of bounds to 4025A0
// 402403: control flows out of bounds to 4029F0
// 40259C: variable 'v15' is possibly undefined

//----- (004025C3) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_4025C3(int _EAX@<eax>, unsigned int a2@<edx>, unsigned int a3@<ecx>, int a4@<ebx>, int a5@<esi>, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63)
{
  int v64; // eax
  char v65; // cl
  double v66; // st7
  bool v67; // cc
  bool v68; // cf
  int v70; // edx
  int v71; // esi
  int v72; // ecx
  int v73; // ecx
  unsigned int v74; // ecx
  int v75; // esi
  bool v76; // cc
  int v77; // esi
  int v78; // ebp
  bool v79; // zf
  int v80; // ebx
  int v81; // ebx
  int v82; // [esp-334Dh] [ebp-334Dh] BYREF
  int v83; // [esp-3349h] [ebp-3349h] BYREF

  LOBYTE(a4) = a4 - 123;
  BYTE1(a4) = BYTE1(a4) + 94 - BYTE1(_EAX) - 1;
  v67 = SBYTE1(a4) <= (unsigned __int8)a3;
  BYTE1(a4) -= a3;
  if ( !v67 && v67 )
  {
    MEMORY[0x8087EEF8] = _EAX;
    __asm { aam     0F3h ; 'ó' }
    LOBYTE(a3) = BYTE1(a4) ^ a3;
    v68 = a2 < a3;
    LOBYTE(_EAX) = _EAX + 1;
    --BYTE1(a3);
    if ( !v68 && _EAX != 1 && (v68 || _EAX == 1) )
      __asm { retf    3341h }
    v70 = a5;
    v82 = a4;
    BYTE1(v70) = BYTE1(a5) - 1;
    BYTE1(a3) -= a5;
    v71 = a5 - 1;
    LOBYTE(a3) = BYTE1(a3) | a3;
    BYTE1(a3) = ~BYTE1(a3);
    v74 = a3 + 1;
    v75 = a4 | v71;
    if ( !(((int)(v74 + 1) < 0) ^ __OFADD__(1, v74) | (v74 == -1))
      && ((int)(v74 + 1) < 0) ^ __OFADD__(1, v74) | (v74 == -1) )
    {
      if ( (int)&v83 < 0 )
      {
        v76 = v75 < 1;
        v77 = v75 - 1;
        if ( v76 || !v76 )
          JUMPOUT(0x402BA5);
        v78 = v83;
        v79 = a4 == 1;
        v80 = a4 - 1;
        if ( (unsigned __int8)((unsigned __int16)((unsigned __int16)&v82 + v70) >> 8) >= (unsigned __int8)(__CFADD__(v70, &v82) - 109)
          && !v79 )
        {
          JUMPOUT(0x402B64);
        }
        if ( (unsigned __int8)((unsigned __int16)((unsigned __int16)&v82 + v70) >> 8) >= (unsigned __int8)(__CFADD__(v70, &v82) - 109)
          && !v79 )
        {
          BYTE1(v80) = -106;
          LOBYTE(v80) = (BYTE1(v70) | v80) - 1;
          v81 = v80 - v77;
          if ( !__SETP__(v81, 0) && __SETP__(v81, 0) )
          {
            if ( (v77 & *(_DWORD *)(v82 + 8 * v83)) != 0 )
            {
              *(_BYTE *)(v77 - 562017635) *= 2;
              v83 = v78;
              JUMPOUT(0x4025E4);
            }
            JUMPOUT(0x402B53);
          }
          ((void (*)(void))((char *)&loc_4020F6 + 4))();
          __asm { lock retn }
        }
        if ( (unsigned __int8)((unsigned __int16)((unsigned __int16)&v82 + v70) >> 8) < (unsigned __int8)(__CFADD__(v70, &v82) - 109)
          || v79 )
        {
          if ( (unsigned __int8)((unsigned __int16)((unsigned __int16)&v82 + v70) >> 8) >= (unsigned __int8)(__CFADD__(v70, &v82) - 109) )
            JUMPOUT(0x402B39);
          JUMPOUT(0x40223D);
        }
      }
      JUMPOUT(0x4024B1);
    }
    JUMPOUT(0x40219F);
  }
  ((void (__stdcall *)(int))((char *)&loc_402CF0 + 4))(v83);
  v73 = v72 - 1;
  if ( v79 || !v73 )
  {
    v66 = ((double (*)(void))sub_4025C3)();
    if ( v68 )
    {
      *(_QWORD *)(v64 + 736476078) = (__int64)v66;
      JUMPOUT(0x4021A0);
    }
    LOBYTE(v64) = *(_BYTE *)v64 + v64;
    v68 = __CFADD__(v65, *(_BYTE *)(v64 - 47));
    *(_BYTE *)(v64 - 47) += v65;
    *(_BYTE *)v64 -= v68 + BYTE1(v64);
    JUMPOUT(0x40217A);
  }
  JUMPOUT(0x402418);
}
// 402173: positive sp value 334D has been found
// 402178: control flows out of bounds to 40217A
// 40219A: control flows out of bounds to 4021A0
// 402A09: control flows out of bounds to 402A0E
// 402B37: control flows out of bounds to 402B39
// 40296C: control flows out of bounds to 402418
// 402ACB: control flows out of bounds to 40223D
// 402B2E: control flows out of bounds to 4024B1
// 402BB1: control flows out of bounds to 4025E4
// 40295B: control flows out of bounds to 4028EC
// 402B03: control flows out of bounds to 40219F
// 402B75: control flows out of bounds to 402BA5
// 402B7D: control flows out of bounds to 402B64
// 402BA2: control flows out of bounds to 402B53
// 402193: bad sp value at call
// 4029E5: conditional instruction was optimized away because of 'al.1!=0'
// 402173: variable 'v64' is possibly undefined
// 402175: variable 'v65' is possibly undefined
// 402198: variable 'v68' is possibly undefined
// 4029C9: variable 'v72' is possibly undefined
// 4029C9: variable 'v79' is possibly undefined
// 4025C3: too many input arguments, some ignored

//----- (00402628) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402628(int a1@<ebx>)
{
  void *retaddr; // [esp+0h] [ebp+0h] BYREF

  sub_402780();
  *(_DWORD *)(a1 + 47) &= (unsigned int)&retaddr;
  JUMPOUT(0x4023C8);
}
// 402344: positive sp value 4 has been found
// 4023C5: control flows out of bounds to 4023C8
// 402620: control flows out of bounds to 402621
// 402686: control flows out of bounds to 402ED8
// 402663: control flows out of bounds to 402A71
// 40264B: conditional instruction was optimized away because of 'cl.1>=0'

//----- (004026A8) --------------------------------------------------------
#error "402292: cannot convert to microcode (funcsize=36)"

//----- (00402780) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402780()
{
  __asm { repne pop ecx }
  JUMPOUT(0x402604);
}
// 402787: positive sp value 4 has been found
// 40278F: control flows out of bounds to 402604
// 4027A0: control flows out of bounds to 40272C
// 402798: conditional instruction was optimized away because of 'cl.1>=1'

//----- (004027A3) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4027A3(char a1@<al>, __int16 a2@<bx>, int a3@<edi>)
{
  __int16 v3; // cx
  __int64 v4; // rax
  char v5; // cf

  HIBYTE(v3) = (HIBYTE(a2) ^ (a2 - 1)) - 1;
  LOBYTE(v3) = a1 ^ 0x92;
  v4 = ((__int64 (__thiscall *)(__int16))loc_4023C8)(v3);
  *(_BYTE *)(HIDWORD(v4) + 752584352) += BYTE1(v4) + v5;
  sub_4027C3(v4, a2, a3);
}
// 4027A7: positive sp value 4 has been found
// 4027BD: variable 'v5' is possibly undefined

//----- (004027C3) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4027C3(int a1@<eax>, char a2@<bl>, int a3@<edi>)
{
  char v3; // zf
  int v4; // ecx
  int v5; // ecx
  char v6; // dl
  _BYTE *v7; // ecx

  sub_402CD2(a1, a3);
  v5 = v4 - 1;
  if ( !v3 || !v5 )
  {
    ((void (*)(void))((char *)&loc_402B5A + 5))();
    *v7 = v6;
    v7[610569510] &= a2;
    JUMPOUT(0x4027FD);
  }
  JUMPOUT(0x402828);
}
// 4027C7: positive sp value 4 has been found
// 4027F7: control flows out of bounds to 4027FD
// 4027DC: control flows out of bounds to 402828
// 4027DC: variable 'v4' is possibly undefined
// 4027DC: variable 'v3' is possibly undefined
// 4027F5: variable 'v6' is possibly undefined
// 4027F5: variable 'v7' is possibly undefined

//----- (00402A56) --------------------------------------------------------
#error "402A96: cannot convert to microcode (funcsize=28)"

//----- (00402B3A) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402B3A(__int32 a1@<eax>, int a2@<ecx>, char a3@<bh>)
{
  char v3; // bh

  v3 = 30 - a3;
  if ( !__OFSUB__(v3, 1) && __OFSUB__(v3, 1) )
  {
    _disable();
    JUMPOUT(0x402B60);
  }
  sub_402E65(a1, a2);
  JUMPOUT(0x4022CB);
}
// 4022BA: positive sp value 8 has been found
// 402B5A: control flows out of bounds to 402B60
// 4022CA: control flows out of bounds to 4022CB

//----- (00402CD2) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402CD2(int a1@<eax>, int a2@<edi>)
{
  bool v2; // of
  _DWORD *v3; // edi

  v2 = __OFADD__(1, a2);
  v3 = (_DWORD *)(a2 + 1);
  if ( !v2 && v2 )
  {
    *v3 = a1;
    JUMPOUT(0x402CF6);
  }
  JUMPOUT(0x4026F3);
}
// 402909: positive sp value 8 has been found
// 402CF0: control flows out of bounds to 402CF6
// 4028FF: control flows out of bounds to 4026F3
// 40291C: control flows out of bounds to 402C8D

//----- (00402D2E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_402D2E(char a1@<dl>, char a2@<cl>, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63)
{
  char v64; // bl
  int v65; // edx
  int v66; // ecx

  v64 = a1 + a2;
  sub_40225A();
  LOBYTE(v65) = ~(_BYTE)v65;
  BYTE1(v66) ^= v64;
  LOBYTE(v66) = BYTE1(v66) ^ (v66 + 1);
  BYTE1(v66) |= v66;
  if ( BYTE1(v66) < 0x21u && BYTE1(v66) != 33 && (BYTE1(v66) >= 0x21u || BYTE1(v66) == 33) )
    JUMPOUT(0x4300A7);
  LOBYTE(v65) = v65 - 122;
  LOBYTE(v66) = ~(BYTE1(v65) + ~(_BYTE)v66 + 103);
  BYTE1(v66) = v65 ^ 0x5C;
  LOBYTE(v65) = __ROL1__(v65, 3);
  ((void (__fastcall *)(int, int))((char *)&loc_4027F7 + 3))(v66 + 1, v65);
  JUMPOUT(0x402159);
}
// 402D32: positive sp value 4 has been found
// 402157: control flows out of bounds to 402159
// 402D57: variable 'v65' is possibly undefined
// 402D59: variable 'v66' is possibly undefined
// 402D2E: too many input arguments, some ignored
// 40225A: using guessed type _DWORD sub_40225A();

//----- (00402D9C) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
double __userpurge sub_402D9C@<st0>(bool a1@<cf>, char a2@<cl>, unsigned __int32 a3@<ebx>, unsigned __int32 a4@<esi>, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63)
{
  unsigned __int32 v64; // esi
  int v65; // eax
  double v66; // st7

  BYTE1(a3) = a1 + BYTE1(a3) - 9;
  LOBYTE(a3) = BYTE1(a3);
  a1 = a4 < a3;
  v64 = a4 - a3;
  LOBYTE(a3) = ~(BYTE1(a3) - (a1 - 38));
  BYTE1(a3) ^= a2;
  v66 = ((double (*)(void))sub_402DF7)();
  if ( a1 )
    JUMPOUT(0x402E1E);
  _InterlockedExchange((volatile __int32 *)(v64 - 77), a3);
  return v66 + (double)*(int *)(v65 - 780136765);
}
// 402DB3: positive sp value 3349 has been found
// 402DB3: control flows out of bounds to 402E1E
// 402DAE: bad sp value at call
// 402DB3: variable 'a1' is possibly undefined
// 402DB8: variable 'v65' is possibly undefined
// 402D9C: too many input arguments, some ignored

//----- (00402DF7) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_402DF7(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63)
{
  void *v64; // [esp+2Ch] [ebp-4h]
  void *retaddr[2]; // [esp+30h] [ebp+0h]

  retaddr[-13] = v64;
  JUMPOUT(0x402B81);
}
// 402997: positive sp value 4 has been found
// 4029AD: control flows out of bounds to 402B81
// 402DF7: too many input arguments, some ignored

//----- (00402E65) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402E65(__int32 a1@<eax>, int a2@<ecx>)
{
  __int32 v2; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v2, a1);
  ((void (__thiscall *)(int))((char *)&loc_402C26 + 4))(a2);
  v2 = -113;
  JUMPOUT(0x402E7D);
}
// 402E6B: positive sp value 4 has been found
// 402E7B: control flows out of bounds to 402E7D

// nfuncs=30 queued=30 decompiled=30 lumina nreq=0 worse=0 better=0
#error "There were 6 decompilation failure(s) on 30 function(s)"
