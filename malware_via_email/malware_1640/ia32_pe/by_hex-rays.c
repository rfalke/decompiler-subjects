/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// int __usercall sub_40265B@<eax>(unsigned __int64 _RAX@<edx:eax>, int a2@<ecx>, int a3@<ebx>, unsigned int a4@<edi>, int a5@<esi>, double a6@<st2>, double a7@<st1>);


//----- (0040265B) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_40265B@<eax>(unsigned __int64 _RAX@<edx:eax>, int a2@<ecx>, int a3@<ebx>, unsigned int a4@<edi>, int a5@<esi>, double a6@<st2>, double a7@<st1>)
{
  unsigned int v7; // ecx
  int v8; // ebx
  int v9; // edi
  int v10; // edx
  int v11; // edi
  int v12; // esi
  int v13; // edi
  int v14; // ebx
  unsigned int v15; // ecx
  int v16; // ebx
  int v17; // eax
  int v18; // ebx
  int v19; // esi
  int v20; // ebx
  int v21; // edi
  int v22; // esi
  __int64 v23; // rdi
  int v24; // ebx
  int v25; // esi
  unsigned int v26; // ecx
  unsigned int v27; // ecx
  unsigned int v28; // ecx
  int v29; // esi
  unsigned int v30; // edi
  int v31; // edi
  int v32; // esi
  unsigned int v33; // ebx
  int v34; // ebx
  int v35; // edi
  int v36; // ebx
  unsigned int v37; // esi
  int v38; // ebx
  int v39; // ebx
  int v40; // ebx
  int v41; // ebx
  int v42; // ecx
  unsigned __int64 v43; // kr40_8
  unsigned int v44; // edi
  int v45; // ebx
  int v46; // esi
  int v47; // ebx
  unsigned __int64 v48; // kr20_8
  unsigned int v49; // ecx
  unsigned int v50; // ebx
  int v52; // ecx
  unsigned int v53; // edi
  int v54; // esi
  __int64 v55; // rdi
  int v56; // ecx
  unsigned int v57; // edi
  int v58; // esi
  int v59; // eax
  int v60; // ecx
  int v61; // edx
  int v62; // ebx
  int v63; // edi
  int v64; // ebx
  int v65; // ebx
  int v66; // eax
  int v67; // esi
  int v68; // ebx
  int v69; // esi
  int v70; // edx
  int v71; // esi
  int v72; // edx
  __int64 v73; // rcx
  unsigned int v75; // ebx
  unsigned int v76; // ecx
  bool v77; // cf
  unsigned int v78; // ecx
  int v79; // ecx
  unsigned int v80; // edi
  unsigned int v81; // ecx
  int v82; // ebx
  unsigned int v83; // esi
  int v84; // esi
  int v85; // ebx
  int v86; // ecx
  unsigned int v87; // ecx
  int v88; // edi
  unsigned int v89; // eax
  unsigned __int64 v90; // kr38_8
  int v91; // ecx
  bool v92; // tt
  int v93; // ebx
  int v94; // ecx
  int v95; // ebx
  int v96; // esi
  unsigned int v97; // esi
  unsigned int v98; // eax
  int v99; // ebx
  unsigned int v100; // esi
  int v101; // [esp-10h] [ebp-10h]
  unsigned int *v102; // [esp-Ch] [ebp-Ch]
  unsigned int v103; // [esp-8h] [ebp-8h] BYREF
  int v104; // [esp-4h] [ebp-4h] BYREF
  void *retaddr; // [esp+0h] [ebp+0h]

  v84 = a2 | a5;
  v85 = (__PAIR64__(a2 + a3, a4) - __PAIR64__(a4 - v84, v84)) >> 32;
  v86 = (HIDWORD(_RAX) - a2) | a2;
  HIDWORD(_RAX) = _RAX;
  v87 = _RAX + v86;
  v25 = _RAX | v84;
  v103 = v87;
  v18 = _RAX + v85;
  LODWORD(_RAX) = v25 + _RAX;
  v19 = v18 | v25;
  v13 = v87;
  v26 = v87 - HIDWORD(_RAX);
  if ( v18 == 1321776038 )
  {
    LOBYTE(_RAX) = _RAX & 0x21;
    *(_DWORD *)(_RAX + 16) &= v26;
LABEL_12:
    v27 = (HIDWORD(_RAX) & v26) - v19;
    LODWORD(_RAX) = (__PAIR64__(v19, v18) - __PAIR64__(v27, v19)) >> 32;
    BYTE5(_RAX) += 38;
    v28 = HIDWORD(_RAX) + v27;
    if ( v28 == -794823637 )
    {
      MEMORY[0xD09FF42B] += BYTE4(_RAX);
      LOBYTE(_RAX) = _RAX + 33;
      while ( 1 )
      {
        v29 = v13 + v19;
        v30 = (v28 & (v13 - v28)) - v28;
        HIDWORD(_RAX) -= v28;
        if ( HIDWORD(_RAX) == -1844121112 )
          break;
        v35 = (_RAX | v30) - v28;
        v36 = _RAX;
        if ( !(_DWORD)_RAX )
        {
          v96 = v28 | v29;
          if ( v96 == 999369032 )
          {
            *(_BYTE *)(5 * (*(_DWORD *)(v28 + 60) + v28)) += (unsigned __int16)(*(_WORD *)(v28 + 60) + v28) >> 8;
            JUMPOUT(0x40231C);
          }
          JUMPOUT(0x402247);
        }
LABEL_33:
        v29 |= v35;
        while ( 1 )
        {
          v48 = __PAIR64__(
                  v29,
                  v36 + (v35 | HIDWORD(_RAX)) - ((__PAIR64__(v36, v36) + ((unsigned int)v35 | HIDWORD(_RAX))) >> 32))
              - __PAIR64__(
                  v36,
                  (unsigned int)(v36 + ((unsigned int)v35 | HIDWORD(_RAX)) < (unsigned int)__CFADD__(
                                                                                             v36,
                                                                                             v35 | HIDWORD(_RAX))
                                                                           + v36)
                + v29);
          v49 = v28 - 1;
          LODWORD(_RAX) = ((__PAIR64__(
                              v36
                            + (v35 | HIDWORD(_RAX))
                            - ((__PAIR64__(v36, v36) + ((unsigned int)v35 | HIDWORD(_RAX))) >> 32),
                              v36 + ((unsigned int)v35 | HIDWORD(_RAX)))
                          - __PAIR64__(v29, (unsigned int)__CFADD__(v36, v35 | HIDWORD(_RAX)) + v36)) >> 32) | v49;
          v50 = (v36 - v49) & (v36
                             - ((__PAIR64__(
                                   v29,
                                   v36
                                 + (v35 | HIDWORD(_RAX))
                                 - ((__PAIR64__(v36, v36) + ((unsigned int)v35 | HIDWORD(_RAX))) >> 32))
                               - __PAIR64__(
                                   v36,
                                   (unsigned int)(v36 + ((unsigned int)v35 | HIDWORD(_RAX)) < (unsigned int)__CFADD__(v36, v35 | HIDWORD(_RAX))
                                                                                            + v36)
                                 + v29)) >> 32));
          if ( ((unsigned int)v48 | v49) != -885075078 )
          {
            v28 = v49 >> 15 << 15;
LABEL_38:
            v103 = *(_DWORD *)v28;
            v65 = BYTE1(v103);
            v97 = v103 & (unsigned __int8)v28;
            v98 = HIWORD(v103);
            if ( v28 == 2114656260 )
            {
              *(int *)((char *)&v104 + v98) &= (unsigned int)&v104;
              JUMPOUT(0x402774);
            }
            v53 = (v98 & v28) - v97;
            v54 = v98 | (v97 - v28);
            LODWORD(v55) = v53 - v54 - v98;
            HIDWORD(v55) = v55 | v54;
            LODWORD(_RAX) = (unsigned __int8)v103 + v98;
            HIDWORD(_RAX) = _RAX
                          + ((__PAIR64__(
                                (unsigned __int8)v103,
                                (v55 - __PAIR64__((int)v55 - HIDWORD(v55), HIDWORD(v55))) >> 32)
                            - __PAIR64__(
                                _RAX,
                                ((v55 - __PAIR64__((int)v55 - HIDWORD(v55), HIDWORD(v55))) >> 32) & (v28 + v55 - HIDWORD(v55)))) >> 32);
            v13 = _RAX - v28 - BYTE1(v103);
            v19 = BYTE1(v103) + (v13 & _RAX);
            goto LABEL_53;
          }
          LOBYTE(_RAX) = 43;
          __asm { rep push dword ptr [eax+10h] }
          _KR28_8 = __PAIR64__(v49 & (unsigned int)_RAX, v49 & (unsigned int)_RAX) + v50;
          HIDWORD(_RAX) = v102;
          v19 = v49 + (v50 | v48) + HIDWORD(v48) - HIDWORD(_KR28_8);
          if ( (_DWORD)_KR28_8 == 1193198022 )
          {
            LODWORD(_RAX) = _RAX - 2;
            BYTE4(_RAX) = *(_BYTE *)v49 + (_BYTE)v102;
            __asm { xlat }
            HIDWORD(_RAX) |= _RAX;
            v52 = ((v19 | 0x471EC1C6u) - (unsigned __int64)HIDWORD(_RAX)) >> 32;
            LODWORD(_RAX) = v52 + _RAX;
            v13 = 813371191;
            HIDWORD(_RAX) -= v19;
            v99 = _RAX;
            v28 = v52 | 0x307B0F37;
            _RAX -= __PAIR64__(v19, v19);
            v33 = v99 - v19;
            goto LABEL_18;
          }
          v57 = *(unsigned int *)((char *)v102 + v49);
          v58 = v57 & ((__PAIR64__(__CFADD__(v49, v49) + 2 * v49, v49) - (__CFADD__(v49, v49) + 2 * v49)) >> 32);
          v59 = ((int (__cdecl *)(unsigned int, int))v57)(v103, v104);
          v61 = v60 - v57;
          v7 = v103;
          v8 = v59 | (v58 + v58 + v57 - v61);
          v9 = v8 & (-2 * v58);
          if ( v8 != -447403213 )
            break;
          v10 = v61 - (__CFADD__(v104, v103) + v104 + v103);
          LODWORD(_RAX) = v10 | (v104 + v103);
          v11 = _RAX & v104 | v9;
          v12 = v10 & (v11 + (v10 & _RAX & v104));
          HIDWORD(_RAX) = v10 - (_RAX - 447403213);
          v104 = v103 ^ 0x21CB3AB;
          v79 = (v103 ^ 0x21CB3AB) - HIDWORD(_RAX) - _RAX;
          v80 = (_RAX - 447403213) | (v11 - v79);
          v81 = v79 - _RAX;
          HIDWORD(_RAX) += v81;
          v82 = _RAX - 447403213 - v81 - (_RAX | ((v103 ^ 0x21CB3AB) + v12));
          v83 = _RAX - HIDWORD(_RAX);
          v103 = 4203470;
          v45 = v80 | v82;
          v28 = (__PAIR64__(v81 - ((__PAIR64__(v45, v45) + v83) >> 32), v81)
               - __PAIR64__(HIDWORD(_RAX), (unsigned int)__CFADD__(v45, v83) + v45)) >> 32;
          HIDWORD(_RAX) -= v80;
          v46 = v45 & (v45 + v83);
          v47 = (__PAIR64__(v45 - v80, v45) - __PAIR64__(HIDWORD(_RAX), v80)) >> 32;
          v35 = HIDWORD(_RAX) | v80;
          v36 = HIDWORD(_RAX) | v47;
          v29 = v36 & v46;
          if ( (_DWORD)_RAX != -479932064 )
          {
            v28 = v103;
            v77 = _RAX < __PAIR64__(_RAX, -479932064);
            HIDWORD(_RAX) = (_RAX - __PAIR64__(_RAX, -479932064)) >> 32;
            v62 = v103 & (v36 - (v77 + HIDWORD(_RAX)));
            v63 = v103 & v35;
            HIDWORD(_RAX) = v63 & (HIDWORD(_RAX) - (HIDWORD(_RAX) & _RAX));
            if ( v29 == 16530017 )
              JUMPOUT(0x40254C);
            v35 = v29 + v63 - HIDWORD(_RAX);
            v36 = v62 - v35;
            goto LABEL_33;
          }
          BYTE4(_RAX) = MEMORY[0xE364D160] + (*(_BYTE *)v28 & BYTE4(_RAX));
        }
        v88 = (__PAIR64__(v9, v8) - __PAIR64__(v103, -447403213)) >> 32;
        v89 = v103 - (v103 & v61);
        if ( v89 != -28885720 )
        {
          v104 += 2103;
          JUMPOUT(0x40244A);
        }
        MEMORY[0xFE473D2A] |= 0x84u;
        BYTE1(v89) = *((_BYTE *)&retaddr - 28885720) + 61;
        v90 = __PAIR64__(v104, v104)
            - __PAIR64__(
                v104 - ((unsigned int)__CFADD__(*((_BYTE *)&retaddr - 28885720), 61) - 28885720),
                (unsigned int)__CFADD__(*((_BYTE *)&retaddr - 28885720), 61) - 28885720);
        v104 = v103;
        v37 = HIDWORD(v90) - v89;
        v13 = (v89 | v88 | 0xFE473D28) & (HIDWORD(v90) - (v89 | v88 | 0xFE473D28) - v103);
        v38 = v89 + v89 + v89 + (HIDWORD(v90) & (v103 + (v89 & (v90 - HIDWORD(v90) - HIDWORD(v90)))));
        LODWORD(_RAX) = v89 + 120;
        if ( v13 != 101540191 )
        {
          if ( v37 - v103 - v103 == 617622183 )
          {
            LOBYTE(_RAX) = _RAX - 124;
            *(_DWORD *)(5 * _RAX - 668217557) &= _RAX;
            JUMPOUT(0x402227);
          }
          JUMPOUT(0x40241D);
        }
        LOBYTE(_RAX) = _RAX & 0x21;
        LOBYTE(_RAX) = *(_BYTE *)(_RAX - 670839029) & _RAX;
        v39 = v103 & v38;
        *(_BYTE *)v37 = _RAX;
        if ( v39 == 936179505 )
        {
          _enable();
          JUMPOUT(0x4026F8);
        }
        v56 = (v7 & 0x60D615F) - (v37 | (v39 + v37 - 101540191));
        HIDWORD(_RAX) = 101540191;
        v19 = v37 + 1;
        v42 = (v56 | 0x60D615F) + 101540191;
        while ( 2 )
        {
          HIDWORD(_RAX) &= _RAX & v13;
          v28 = HIDWORD(_RAX) & v42;
          if ( v13 == -1947865160 )
          {
            *(_BYTE *)HIDWORD(_RAX) &= 0x21u;
            goto LABEL_38;
          }
          --v13;
          v14 = (v28 & HIDWORD(_RAX)) - HIDWORD(_RAX);
          v15 = v28 - _RAX;
          v16 = (__PAIR64__(_RAX, (__PAIR64__(v15 - (unsigned int)_RAX, v15) - __PAIR64__(v19, _RAX)) >> 32)
               - __PAIR64__(
                   (__PAIR64__(v15 - (unsigned int)_RAX, v15)
                  - __PAIR64__(v19, _RAX)
                  - __PAIR64__(v14, (unsigned int)(v15 < (unsigned int)_RAX) + v19)) >> 32,
                   (unsigned int)(v15 - (unsigned int)_RAX < (unsigned int)(v15 < (unsigned int)_RAX) + v19) + v14)) >> 32;
          v40 = v13 | ((_RAX | v19 | HIDWORD(_RAX)) + v16 - v13 - v13);
          HIDWORD(_RAX) = _RAX;
          v41 = v40 - v13;
          v42 = v13 - 1387267859;
          if ( v19 == -1803164207 )
          {
            v77 = __CFADD__(BYTE1(_RAX), *(_BYTE *)_RAX);
            *(_BYTE *)_RAX += BYTE1(_RAX);
            *(_BYTE *)_RAX += _RAX + v77;
            continue;
          }
          break;
        }
        v18 = v19 & (v13 | (v19 + v19 + v41 - v13));
        HIDWORD(_RAX) = v42 | v19;
        if ( !v13 )
          goto LABEL_9;
        while ( 2 )
        {
          while ( 1 )
          {
            v65 = v13 + v18;
            HIDWORD(_RAX) = v19;
            LODWORD(_RAX) = v19 | (v13 + _RAX);
            BYTE5(_RAX) = *(_BYTE *)v19;
            v28 = (_RAX & (v65 - HIDWORD(_RAX))) - _RAX;
            if ( HIDWORD(_RAX) == -501769135 )
              break;
            v91 = (__PAIR64__(v28 - v19, v28) - __PAIR64__(HIDWORD(_RAX), v19)) >> 32;
            v92 = __CFSHR__(BYTE5(_RAX), 6);
            BYTE5(_RAX) = __ROR1__(BYTE5(_RAX), 6);
            v93 = (__PAIR64__((v13 & v65) - ((unsigned int)v92 + v91), v13 & (unsigned int)v65)
                 - __PAIR64__(v19, (unsigned int)v92 + v91)) >> 32;
            v94 = HIDWORD(_RAX) & v19 & v91;
            v95 = v93 - v94;
            if ( v19 == 1408004524 )
            {
              LOBYTE(v95) = *(_BYTE *)v95 & v95;
              *(_WORD *)(v95 - 1946735623) = (__int16)a6;
              *(_WORD *)(v95 + 66257907) = (__int16)a7;
              JUMPOUT(0x402710);
            }
            v75 = v95 - v94;
            v76 = v13 & v94;
            v77 = v76 < (unsigned int)(__PAIR64__(v75 - v19, v75) < __PAIR64__(v13, v19)) + v13;
            v78 = v76 - ((__PAIR64__(v75 - v19, v75) < __PAIR64__(v13, v19)) + v13);
            BYTE5(_RAX) = ~BYTE5(_RAX);
            v64 = HIDWORD(_RAX) | (HIDWORD(_RAX) - (v77 + v19));
            v26 = HIDWORD(_RAX) + ((__PAIR64__(v13 & v78, v19) - __PAIR64__(v19 - v13, v13)) >> 32);
            BYTE5(_RAX) ^= 0xA6u;
            LODWORD(_RAX) = v64 & (v19 - v13);
            v18 = v13 + v64;
            if ( (_DWORD)_RAX != -463600706 )
              goto LABEL_12;
            LOBYTE(_RAX) = *(_BYTE *)HIDWORD(_RAX) - 66;
            *(_DWORD *)v26 &= (unsigned int)&v104;
          }
          LOBYTE(_RAX) = *(_BYTE *)(_RAX + 570688034) + _RAX;
LABEL_53:
          LODWORD(_RAX) = v65 + _RAX;
          v67 = v19 - v65;
          v68 = (__PAIR64__(v65 - v67, v65) - __PAIR64__(_RAX, v67)) >> 32;
          v69 = HIDWORD(_RAX) + v67;
          v70 = v68 & HIDWORD(_RAX);
          v71 = v70 & v69;
          v72 = v68 + v13 + v70;
          v31 = v71 - v72;
          v32 = v71 - v72 - v72;
          v13 = v31 - v32;
          v33 = v66 ^ 0xFFFFFEC8;
          v19 = v28 & v32;
          HIDWORD(_RAX) = v13 & v72;
          LODWORD(_RAX) = ~(v66 ^ 0xFFFFFEC8);
          if ( (_DWORD)_RAX == 671361007 )
          {
            *(_DWORD *)HIDWORD(_RAX) &= (unsigned int)&v104;
LABEL_18:
            v34 = v28 & v33;
            v13 ^= 0x307B04BEu;
            LODWORD(_RAX) = (__PAIR64__(
                               (v19 | v19 | ((v28 | HIDWORD(_RAX)) + v28)) & (v28 | HIDWORD(_RAX)),
                               v19 | v19 | ((v28 | HIDWORD(_RAX)) + v28))
                           - __PAIR64__(v34, v19)) >> 32;
            v18 = v34 - __CFADD__(v19, _RAX - v19);
            continue;
          }
          break;
        }
      }
    }
    JUMPOUT(0x4027F2);
  }
  v100 = (__PAIR64__(v19, v18) - __PAIR64__(_RAX, 1321776038)) >> 32;
  v42 = v18 & ((__PAIR64__(v26, v13) - __PAIR64__(v100, v18)) >> 32);
  v102 = &v103;
  v43 = __PAIR64__((v18 & _RAX) + v18 - _RAX, v100) - __PAIR64__(v18 - v100, v18 & (unsigned int)_RAX);
  v44 = v43 & HIDWORD(v43);
  HIDWORD(_RAX) = v42;
  v101 = 35435499;
  v17 = ((unsigned int)v42 - (unsigned __int64)v44) >> 32;
  v18 = v42 - v44;
  v13 = v42 | v44;
  v19 = v13 + v42 + v43;
  LODWORD(_RAX) = v18 | (v17 - v42);
  if ( v18 != 2109289337 )
  {
    if ( v18 + v13 - ((__PAIR64__(v42, v18) + (unsigned int)v13) >> 32) == -1008572064 )
      JUMPOUT(0x4022C0);
    JUMPOUT(0x401FF1);
  }
  LOBYTE(_RAX) = *(_BYTE *)v42 + _RAX + 72;
LABEL_9:
  v20 = v18 - _RAX;
  v21 = v42 & (_RAX + v13);
  LODWORD(_RAX) = HIDWORD(_RAX) | _RAX;
  v22 = (v20 | v19) - v20 - _RAX;
  LODWORD(v23) = v42 & v21;
  v24 = v20 - v22;
  LODWORD(v73) = v42 - HIDWORD(_RAX);
  HIDWORD(v23) = v24 + v22 - _RAX;
  HIDWORD(v73) = HIDWORD(v23) | v24;
  return ((__PAIR64__(_RAX, (unsigned int)v23 & HIDWORD(_RAX)) - v23) >> 32)
       - ((v73 + ((__PAIR64__(_RAX, (unsigned int)v23 & HIDWORD(_RAX)) - v23) >> 32)) >> 32);
}
// 401F90: positive sp value 4 has been found
// 4022BE: control flows out of bounds to 4022C0
// 402319: control flows out of bounds to 40231C
// 4024A0: control flows out of bounds to 4024A2
// 40254A: control flows out of bounds to 40254C
// 40270D: control flows out of bounds to 402710
// 402771: control flows out of bounds to 402774
// 402151: control flows out of bounds to 4027F2
// 40218E: control flows out of bounds to 40241D
// 402262: control flows out of bounds to 4026F8
// 402808: control flows out of bounds to 402227
// 402848: control flows out of bounds to 40244A
// 4022B8: control flows out of bounds to 401FF1
// 402313: control flows out of bounds to 402247
// 40249A: conditional instruction was optimized away because of 'edi.4==60D615F'
// 4024BB: variable 'v60' is possibly undefined

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
