/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall sub_408F4E(unsigned __int64 _RAX@<edx:eax>, unsigned int _ECX@<ecx>, int _EBX@<ebx>, int@<ebp>, int@<edi>, unsigned int _ESI@<esi>);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_408F96; // weak


//----- (0040631D) --------------------------------------------------------
#error "40631D: stack frame is too big (funcsize=0)"

//----- (00408F4E) --------------------------------------------------------
void __usercall sub_408F4E(
        unsigned __int64 _RAX@<edx:eax>,
        unsigned int _ECX@<ecx>,
        int _EBX@<ebx>,
        int a4@<ebp>,
        int a5@<edi>,
        unsigned int _ESI@<esi>)
{
  bool v8; // cf
  bool v12; // cf
  char v13; // tt
  bool v14; // cc
  unsigned __int16 v15; // ax
  _DWORD *v16; // edi
  char *v22; // ebx
  unsigned __int8 v23; // tt
  int v24; // ebx
  unsigned int v25; // ett
  char v26; // cf
  int v27; // edi
  BOOL v28; // ett
  __int16 v29; // bx
  _DWORD *i; // eax
  int v31; // eax
  unsigned __int64 v34; // rt2
  int v35; // edi
  bool v45; // tt
  unsigned int v46; // esi
  __int16 v53; // bx
  unsigned __int8 v58; // al
  __int16 v62; // kr00_2
  unsigned int v63; // [esp-24h] [ebp-24h]
  unsigned int *v64; // [esp-8h] [ebp-8h] BYREF
  unsigned int v65; // [esp-4h] [ebp-4h] BYREF

  _EDI = __ROR4__(a5, 1);
  LOBYTE(_EBX) = 0;
  __asm
  {
    rcr     si, cl
    rcr     ebx, 1Eh
  }
  LOBYTE(_RAX) = 0;
  _CF = HIDWORD(_RAX) < 0x2373AC6F;
  if ( HIDWORD(_RAX) != 594783343 )
  {
    BYTE1(_RAX) &= 0xD8u;
    LOBYTE(_EBX) = __ROR1__(_EBX, 24);
    LODWORD(_RAX) = _ESI | _RAX;
    BYTE5(_RAX) += 105;
    v65 = _ECX;
    _ECX = (unsigned int)&v65;
    v64 = &v65;
    if ( _EDI != -1027104165 )
    {
      for ( i = (_DWORD *)&loc_408F96; ; i = (_DWORD *)(_RAX & 0xFFFFF000) )
      {
        if ( *i == 9460301 )
          JUMPOUT(0x408C5B);
        LODWORD(_RAX) = (char *)i - 1;
        if ( _ESI == 1762463806 )
          break;
      }
      HIDWORD(_RAX) = (unsigned __int16)__ES__;
      LOBYTE(_EBX) = 64;
      __inbyte(0x1Du);
LABEL_72:
      BYTE5(_RAX) &= 0xA5u;
      LOBYTE(_RAX) = 0;
      LOWORD(_RAX) = __ROL2__(_RAX, _ECX);
      __asm { rcr     bl, cl }
      LOBYTE(_RAX) = -121;
      BYTE5(_RAX) = __ROL1__(BYTE5(_RAX) >> _ECX, _ECX);
      BYTE1(_RAX) += 68;
      SBYTE4(_RAX) >>= _ECX;
      _EDI = (_EDI >> _ECX) ^ 0x705ABFFC;
      __asm { rcl     edi, 10h }
      if ( (_DWORD)_RAX != -194454809 )
        JUMPOUT(0x408E0A);
      ++*(_BYTE *)HIDWORD(_RAX);
      goto LABEL_7;
    }
    v8 = BYTE1(_EBX) < *(_BYTE *)(_EBX + 2 * _RAX + 1);
    BYTE1(_EBX) -= *(_BYTE *)(_EBX + 2 * _RAX + 1);
    _disable();
    _ECX = (unsigned int)&v64 + 3;
    if ( !BYTE1(_EBX) || &v64 == (unsigned int **)-3 )
    {
      _CF = __CFSHL__(*(_DWORD *)(HIDWORD(_RAX) + 11), (unsigned __int8)&v64 + 3);
      *(_DWORD *)(HIDWORD(_RAX) + 11) = __ROL4__(*(_DWORD *)(HIDWORD(_RAX) + 11), (char)&v64 + 3);
      __asm { insb }
      LODWORD(_RAX) = *(_DWORD *)_ESI;
      _ESI += 4;
      BYTE5(_RAX) = _EBX + _CF + HIBYTE(_DX);
      LOWORD(_EDI) = 23972;
      HIDWORD(_RAX) &= 0xF1D86A2E;
      v16 = (_DWORD *)(_EDI ^ 0x4EAB30D8);
      if ( (unsigned int **)((char *)&v64 + 3) != (unsigned int **)-343832497 )
      {
        v22 = (char *)&v64 + ((unsigned int)&v64 + 3 < 0xEB81884F) + _EBX + 3;
        v23 = _RAX & 1;
        LOBYTE(_RAX) = __ROR1__(_RAX, 1);
        WORD2(_RAX) += (_WORD)v16 + v23;
        _CF = __CFSHL__(BYTE1(v22), 3);
        BYTE1(v22) *= 8;
        v25 = _CF + 910869910;
        _CF = (unsigned int)v22 < v25;
        v24 = (int)&v22[-v25];
        v28 = _CF;
        _CF = __CFADD__(_CF, v16);
        v27 = (int)v16 + v28;
        v26 = _CF | __CFADD__(v27, -171613703);
        v27 -= 171613703;
        BYTE1(v24) += BYTE4(_RAX) + v26;
        HIDWORD(_RAX) = __ROL4__(HIDWORD(_RAX), 11);
        SBYTE4(_RAX) >>= (char)&v64 + 3;
        ++WORD2(_RAX);
        _EBX = -v24 - 2111077381;
        if ( _EBX == -1438162553 )
        {
          __asm { insd }
          JUMPOUT(0x408D49);
        }
        BYTE5(_RAX) = 30;
        LOBYTE(_EBX) = __ROR1__((_EBX < 0xAA476187) + _EBX + 113, (char)&v64 + 3);
        LOWORD(_EBX) = (_WORD)_EBX << ((char)&v64 + 3);
        if ( _EBX != 1579017670 )
          JUMPOUT(0x408A37);
        *(_DWORD *)v27 <<= 25;
        __asm { insd }
        goto LABEL_91;
      }
      HIBYTE(v64) = HIBYTE(_RAX);
      LOBYTE(_ECX) = -13;
      *v16 = *(_DWORD *)(_ESI - 1);
LABEL_41:
      __asm { rcr     ah, 13h }
      goto LABEL_42;
    }
LABEL_13:
    BYTE1(_ECX) -= v8 + *(_BYTE *)(_RAX + 45);
LABEL_14:
    __asm { rcl     edi, cl }
    LOWORD(_EDI) = (_WORD)_EDI - 1;
    __asm { rcl     al, cl }
    if ( _ECX == -909587581 )
    {
      *_EDI = _AL;
      return;
    }
    _EDI = (__PAIR64__((unsigned int)_EDI, _ECX) - 0x23C4E6A2C9C8CB83i64) >> 32;
    LOBYTE(_EBX) = _EBX & 0x8D;
    if ( _ESI == -551096562 )
    {
      if ( !__OFSUB__(_EBX, 1) )
        __asm { into }
      __asm { iret }
      JUMPOUT(0x408E0F);
    }
    goto LABEL_72;
  }
  *(_DWORD *)(_EBX - 183220274) = a4;
  while ( 1 )
  {
    __asm { rcl     bl, 8 }
    _EBX -= _CF + 2104758949;
    BYTE5(_RAX) ^= 0xA9u;
    ++HIDWORD(_RAX);
    LOBYTE(_EBX) = BYTE1(_ECX) + __CFADD__((_WORD)_ECX, (_WORD)_EDI) + _EBX;
    __asm { rcr     bl, 15h }
    LOWORD(_EDI) = (__int16)(_ECX + _EDI) >> _ECX;
    --BYTE1(_RAX);
    _EDI <<= 9;
    while ( _EDI == 1601778462 )
    {
      if ( __SETP__(1601778462, 1601778462) )
      {
        *(_BYTE *)(_EBX + 121) -= _RAX;
        HIBYTE(v15) = BYTE1(_RAX) | 0x60;
        LOBYTE(v15) = 0;
        __asm
        {
          rcl     ch, cl
          rcr     ch, 10h
        }
        LOWORD(_RAX) = v15 >> _ECX;
        goto LABEL_41;
      }
    }
    HIDWORD(_RAX) &= _RAX;
    SBYTE5(_RAX) >>= _ECX;
    LOWORD(_RAX) = _ECX ^ _RAX;
    if ( _ECX != 2041353160 )
    {
      HIWORD(_EDI) |= 0xB714u;
      LOWORD(_EBX) = (__int16)(_EBX - _ESI) >> _ECX;
      _ESI = -556095960;
      LOWORD(_EDI) = _EBX;
      __asm { rcr     edx, 1Eh }
      BYTE1(_EBX) = (BYTE1(_EBX) << _ECX) & 0xEE;
      goto LABEL_14;
    }
    v65 = _ESI;
    HIBYTE(v64) = HIBYTE(_EDI);
    LODWORD(_RAX) = MEMORY[0xA8902198];
    BYTE1(_RAX) = *(_BYTE *)(_EBX + a4) + MEMORY[0xA8902199];
    __asm { xlat }
    LOBYTE(_RAX) = ~(_BYTE)_RAX;
    if ( (_DWORD)_RAX == -190230893 )
    {
      v14 = (int)(_EDI ^ *(_DWORD *)(HIDWORD(_RAX) - 1525592459)) <= 0;
      *(_DWORD *)(HIDWORD(_RAX) - 1525592459) ^= _EDI;
      if ( !v14 )
      {
        v12 = MEMORY[0xC0350F42] > 0xF4A94E93;
        LODWORD(_RAX) = -190230893 - MEMORY[0xC0350F42];
        goto LABEL_25;
      }
      LODWORD(_RAX) = -190230892;
      _CF = __CFADD__(BYTE1(_EBX), BYTE1(_EBX));
      BYTE1(_EBX) *= 2;
      LOBYTE(_RAX) = _CF - 108 + 1;
      _ECX = HIDWORD(_RAX);
    }
    else
    {
      _EBX *= 16;
      LOBYTE(_RAX) = MEMORY[0x79AC93C8];
      BYTE5(_RAX) = 0;
      if ( (_DWORD)_RAX == 954821558 )
      {
        --a4;
        goto LABEL_86;
      }
      __asm { rcr     bl, 10h }
      v53 = (_WORD)_EBX << 8;
      ++WORD2(_RAX);
      LOBYTE(_EBX) = 0;
      BYTE1(_EBX) = -HIBYTE(v53);
      if ( _ESI != -1627253030 )
      {
        __asm { rcr     dl, cl }
        SHIDWORD(_RAX) >>= 23;
        LOBYTE(_EBX) = -((_EBX ^ 0x79AC93C8u) >> 8) & 0xD0;
        BYTE1(_EBX) = 56;
        BYTE4(_RAX) -= 15;
        if ( HIDWORD(_RAX) == -1889580905 )
          JUMPOUT(0x408BE6);
        _CF = __CFSHL__(_EBX, 11);
        LOBYTE(_EBX) = 0;
        v29 = _EBX - (_CF - 26346);
        __asm { rcr     dx, cl }
        if ( HIDWORD(_RAX) == -293523562 )
        {
          __indword(0x82u);
          __asm { fsubr   dword ptr [ecx+31h] }
          JUMPOUT(0x408D95);
        }
        __asm { rcr     dh, cl }
        _BH = HIBYTE(v29) + 109;
        BYTE5(_RAX) = ~MEMORY[0x79AC93C8];
        __asm
        {
          rcr     bh, cl
          rcl     dx, cl
        }
LABEL_7:
        __asm { rcr     dx, cl }
LABEL_42:
        __asm { rcr     dl, 0Ch }
        _DL -= 124;
        __asm { rcr     dl, cl }
        JUMPOUT(0x408B2E);
      }
      MEMORY[0x2A0A788B] = _RAX;
      __asm { lock inc edi }
    }
    LOBYTE(_RAX) = _RAX + 1;
    __asm { rcl     ah, cl }
    if ( _EBX == -529299816 )
      break;
    LOBYTE(_EBX) = (char)_EBX >> 1;
    HIDWORD(_RAX) |= _ECX;
    BYTE4(_RAX) |= BYTE1(_EBX);
    BYTE1(_RAX) ^= 0x67u;
    __asm
    {
      rcl     dx, cl
      rcr     ebx, cl
      rcr     ah, cl
    }
    LOBYTE(_RAX) = __ROR1__(_RAX, _ECX) >> _ECX;
    _ECX += 2264;
    _CF = __CFSHL__(_RAX, _ECX);
    LODWORD(_RAX) = (_DWORD)_RAX << _ECX;
    v27 = (__ROR4__(_EDI - 1, 7) - (_CF + _EBX)) << 22;
    __asm { rcr     ebx, 12h }
LABEL_91:
    _EBX = _EBX ^ 0x5F9D361D;
    WORD2(_RAX) = v27;
    LODWORD(_RAX) = __ROL4__(_RAX, 22);
    LOWORD(v27) = v27 - _ECX;
    _EDI = v27 & 0x2CF7ADDD;
    LOBYTE(_RAX) = _RAX ^ 0x7C;
    __asm
    {
      rcr     si, cl
      rcl     dl, cl
    }
LABEL_27:
    LODWORD(_RAX) = _RAX | 0xCC7CB6DD;
    LOBYTE(_EBX) = BYTE4(_RAX) | _EBX;
    LOBYTE(_RAX) = (unsigned __int8)_RAX >> 2;
    __asm { rcl     al, 18h }
    LOBYTE(_RAX) = BYTE1(_EBX) | _RAX;
    if ( HIDWORD(_RAX) == 1221549179 )
      JUMPOUT(0x408C24);
    __asm { rcr     bh, 2 }
    v63 = _ECX;
    v46 = _ESI >> 10;
    BYTE1(_RAX) -= 32;
    _ESI = v46 | 0xD04259FB;
    BYTE5(_RAX) -= _EBX;
    LOWORD(_ESI) = ~(_WORD)_ESI;
    __asm { rcl     di, cl }
    HIDWORD(_RAX) = -HIDWORD(_RAX);
    if ( HIDWORD(_RAX) == -166646445 )
    {
      LOBYTE(_RAX) = 0;
      _disable();
      HIDWORD(_RAX) = -3 * *(_DWORD *)(_EDI + 33);
      v34 = _RAX % (unsigned int)*(_DWORD *)HIDWORD(_RAX);
      _EAX = _RAX / (unsigned int)*(_DWORD *)HIDWORD(_RAX);
      _EDX = v34;
      v35 = __ROL4__(_EDI, 23);
      BYTE1(_EAX) = __ROL1__(BYTE1(_EAX), 9);
      LOBYTE(_EDX) = v34 - 47;
      if ( _ECX == -1656640543 )
      {
        v14 = __CFSHR__(*(_BYTE *)(a4 - 2129169109), -8) || *(_BYTE *)(a4 - 2129169109) >= 0;
        *(char *)(a4 - 2129169109) >>= 7;
        if ( !v14 )
        {
          __asm { aad     0E9h ; 'é' }
          JUMPOUT(0x408ECB);
        }
        JUMPOUT(0x408EAD);
      }
      __asm { rcl     dh, 0Eh }
      _CF = (unsigned __int16)_EDX < (unsigned __int16)_ECX;
      LOWORD(_EDX) = _EDX - _ECX;
      LOBYTE(_EAX) = BYTE1(_EAX) + _CF + BYTE1(_ECX) + _EAX;
      _EDI = v35 << 8;
      v62 = _EAX - _EDI;
      LOWORD(_EDI) = (__PAIR32__(_EDI, _EAX) - __PAIR32__(_EBX, _EDI)) >> 16;
      _EDX = __ROL4__(_EDX - 283087354, 3);
      LOBYTE(_EAX) = (_BYTE)v62 << 7;
      __asm { rcr     edi, 17h }
      *(_BYTE *)_ECX = BYTE1(_EBX);
      BYTE1(_EAX) = (unsigned __int8)(SHIBYTE(v62) >> 7) >> _ECX;
      LOBYTE(_EDX) = __ROL1__(_EDX, _ECX) - (__CFSHR__(SHIBYTE(v62) >> 7, _ECX) - 70);
      v31 = _EAX & 0x4BCCE67A;
      _EDI = (_DWORD *)(_EBX ^ _EDI);
      __asm { rcr     dl, 17h }
      BYTE1(_EDX) = -1;
      _CL = _ECX + 1;
      BYTE1(v31) = 0;
      if ( v31 == -1854263284 )
      {
        *_EDI = *(_DWORD *)_ESI;
        _ESI = _ESI + 4;
        __asm
        {
          outsd
          retf    0D0D3h
        }
      }
      LOBYTE(_EDX) = _EDX + 59;
      _AL = v31 & 0x2E;
      __asm
      {
        rcl     al, 19h
        rcl     edx, 8
        rcl     edi, cl
      }
      JUMPOUT(0x408EB9);
    }
    BYTE1(_EBX) -= (HIDWORD(_RAX) < 0xF6112D53) + BYTE5(_RAX);
    __asm { rcl     ah, 11h }
    _CF = __CFADD__(_ECX, -2264);
    _ECX -= 2264;
  }
  _EBX = _InterlockedExchange((volatile __int32 *)(_ESI - 88842274), -529299816);
  _ECX &= *(_DWORD *)(_EBX - 1612676866);
  v58 = 2 * (BYTE1(_ECX) | _RAX);
  if ( _ESI == 1662038641 )
  {
    __asm { into }
    __outbyte(0x93u, v58);
    return;
  }
  LODWORD(_RAX) = -590541543;
  BYTE4(_RAX) = (char)(BYTE4(_RAX) ^ 0xA3) >> 7;
  if ( HIDWORD(_RAX) == 2084376867 )
    JUMPOUT(0x12661906);
  WORD2(_RAX) = __ROR2__(WORD2(_RAX), _ECX);
  __asm { rcr     ax, cl }
  LODWORD(_RAX) = __ROR4__(_RAX, 21);
  BYTE4(_RAX) -= 61;
  if ( HIDWORD(_RAX) == -546707697 )
  {
    *MK_FP(-27704, _EDI) = *(_BYTE *)_ESI;
    MEMORY[0xDF69E6E8] *= 2;
    JUMPOUT(0x408C92);
  }
  HIDWORD(_RAX) += (HIDWORD(_RAX) < 0xDF69E70F) + 300047410;
  _EDI -= 1942184300;
LABEL_86:
  SHIDWORD(_RAX) >>= 2;
  WORD2(_RAX) <<= _ECX;
  LOBYTE(_RAX) = _RAX - 1;
  LODWORD(_RAX) = _RAX + 1;
  BYTE5(_RAX) <<= _ECX;
  SBYTE4(_RAX) >>= 1;
  v45 = __CFSHR__(BYTE1(_RAX), _ECX);
  BYTE1(_RAX) = __ROR1__(BYTE1(_RAX), _ECX);
  v12 = v45;
LABEL_25:
  v13 = v12;
  _CF = __CFADD__(v12, BYTE4(_RAX));
  BYTE4(_RAX) += v13;
  _CF |= __CFADD__(BYTE4(_RAX), -37);
  BYTE4(_RAX) -= 37;
  BYTE5(_RAX) += BYTE1(_EBX) + _CF;
  SBYTE1(_RAX) >>= _ECX;
  if ( _EBX == 2068628397 )
  {
    *(_DWORD *)(_RAX + 2 * _ESI + 773485993) -= _EDI;
    LODWORD(_RAX) = *(_DWORD *)_ESI;
    _ESI += 4;
    goto LABEL_27;
  }
  BYTE1(_RAX) = ~BYTE1(_RAX);
  LODWORD(_RAX) = _RAX - _ESI;
  BYTE5(_RAX) += BYTE1(_RAX) + 1;
  __asm { rcr     eax, cl }
  if ( _EDI == 125239727 )
  {
    v8 = BYTE1(_EBX) < BYTE4(_RAX);
    BYTE1(_EBX) -= BYTE4(_RAX);
    goto LABEL_13;
  }
  WORD2(_RAX) -= _ESI;
  if ( _ESI != 1359093347 )
  {
    BYTE5(_RAX) = ~BYTE5(_RAX);
    _CF = __CFADD__((_BYTE)_EBX, BYTE1(_RAX));
    BYTE1(_RAX) += _EBX;
    WORD2(_RAX) += _EBX + _CF;
    if ( _EDI == -1942184300 )
    {
      if ( _EBX == 1571478393 )
      {
        *(_BYTE *)(HIDWORD(_RAX) + 4) = __ROL1__(*(_BYTE *)(HIDWORD(_RAX) + 4), 1);
        __outdword(WORD2(_RAX), _RAX);
        BYTE4(_RAX) += 46;
        if ( !(_ECX - 1) )
        {
          __asm
          {
            fadd    dword ptr [ecx+0A6632D0h]
            arpl    bx, dx
          }
          JUMPOUT(0x408F38);
        }
        JUMPOUT(0x408EEE);
      }
      JUMPOUT(0x408F2A);
    }
    JUMPOUT(0x408E0D);
  }
}
// 408BE0: control flows out of bounds to 408BE6
// 408C1E: control flows out of bounds to 408C24
// 408C8F: control flows out of bounds to 408C92
// 408D48: control flows out of bounds to 408D49
// 408D92: inconsistent fpu stack
// 408D92: control flows out of bounds to 408D95
// 408EC9: control flows out of bounds to 408ECB
// 408F36: control flows out of bounds to 408F38
// 408E0E: control flows out of bounds to 408E0F
// 408A33: control flows out of bounds to 12661906
// 408B0C: control flows out of bounds to 408C5B
// 408CFB: control flows out of bounds to 408B2E
// 4090B1: control flows out of bounds to 408EB9
// 4089FA: control flows out of bounds to 408E0A
// 408EC1: control flows out of bounds to 408EAD
// 408F16: control flows out of bounds to 408E0D
// 408F22: control flows out of bounds to 408F2A
// 408F2B: control flows out of bounds to 408EEE
// 40920F: control flows out of bounds to 408A37
// 4091AC: conditional instruction was optimized away because eax.4==38E96BB6

// nfuncs=2 queued=2 decompiled=2 lumina nreq=0 worse=0 better=0
#error "There were 1 decompilation failure(s) on 2 function(s)"
