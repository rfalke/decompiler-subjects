/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// int __usercall sub_40202A@<eax>(_BYTE *a1@<edi>, _BYTE *a2@<esi>);
// int __usercall sub_402042@<eax>(int a1@<ebx>);
// int __usercall sub_40208F@<eax>(unsigned int a1@<eax>, int a2@<ebx>);

//-------------------------------------------------------------------------
// Data declarations

__int16 word_4020BA = -24220; // weak


//----- (0040202A) --------------------------------------------------------
int __usercall sub_40202A@<eax>(_BYTE *a1@<edi>, _BYTE *a2@<esi>)
{
  int v2; // edx
  bool v3; // zf
  _BYTE *v5; // [esp+0h] [ebp-4h]

  v2 = 0;
  while ( *a2 )
  {
    v3 = *a2++ == *a1++;
    if ( !v3 )
    {
      do
        v3 = *a1++ == 0;
      while ( !v3 );
      a2 = v5;
      ++v2;
    }
  }
  return v2;
}
// 40203A: variable 'v5' is possibly undefined

//----- (00402042) --------------------------------------------------------
int __usercall sub_402042@<eax>(int a1@<ebx>)
{
  _DWORD *v1; // ebp

  v1 = (_DWORD *)(a1 + *(_DWORD *)(a1 + *(_DWORD *)(a1 + 60) + 120));
  return a1
       + *(_DWORD *)(a1
                   + v1[7]
                   + 4
                   * *(unsigned __int16 *)(a1
                                         + v1[9]
                                         + 2 * sub_40202A((_BYTE *)(a1 + *(_DWORD *)(a1 + v1[8])), "GetProcAddress")
                                         + 2
                                         - 2 * v1[4]));
}

//----- (0040208F) --------------------------------------------------------
int __usercall sub_40208F@<eax>(unsigned int a1@<eax>, int a2@<ebx>)
{
  int v2; // ecx
  unsigned int retaddr; // [esp+0h] [ebp+0h]

  v2 = 2147482741;
  do
  {
    retaddr = a1;
    a1 ^= v2;
    a2 ^= retaddr;
    --v2;
  }
  while ( v2 );
  return ((int (*)(void))word_4020BA)();
}
// 4020BA: using guessed type __int16 word_4020BA;

// nfuncs=4 queued=3 decompiled=3 lumina nreq=0 worse=0 better=0
// ALL OK, 3 function(s) have been successfully decompiled
