/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// HANDLE __stdcall CreateEventW(LPSECURITY_ATTRIBUTES lpEventAttributes, BOOL bManualReset, BOOL bInitialState, LPCWSTR lpName);
// struct _SECURITY_ATTRIBUTES *__userpurge sub_401140@<eax>(struct _SECURITY_ATTRIBUTES *a1@<edi>, int a2);
// void __usercall sub_401180(int a1@<ecx>, int a2@<edi>);
// int __usercall sub_401190@<eax>(int a1@<ecx>, int a2@<edi>);
// int __usercall sub_4011B0@<eax>(int a1@<eax>, int a2@<ecx>);
int __stdcall sub_401230(int a1);
int __fastcall sub_401250(int a1);


//----- (00401030) --------------------------------------------------------
#error "401030: stack frame is too big (funcsize=0)"

//----- (00401140) --------------------------------------------------------
struct _SECURITY_ATTRIBUTES *__userpurge sub_401140@<eax>(struct _SECURITY_ATTRIBUTES *a1@<edi>, int a2)
{
  int v2; // eax

  v2 = sub_401230(25);
  ((HANDLE (__stdcall *)(LPSECURITY_ATTRIBUTES, BOOL, BOOL, LPCWSTR))((char *)CreateEventW + v2 + 1))(
    a1,
    0,
    v2 + 1,
    (LPCWSTR)(v2 + 1));
  return a1;
}

//----- (00401180) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_401180(int a1@<ecx>, int a2@<edi>)
{
  int v2; // eax
  int v3; // ecx
  void (*v4)(void); // eax

  v2 = sub_401190(a1, a2);
  v4 = (void (*)(void))sub_4011B0(v2, v3);
  v4();
  __asm { retn }
}
// 40118C: positive sp value 4 has been found
// 401186: variable 'v3' is possibly undefined

//----- (00401190) --------------------------------------------------------
int __usercall sub_401190@<eax>(int a1@<ecx>, int a2@<edi>)
{
  return *(_DWORD *)(**(_DWORD **)(*(_DWORD *)(*(_DWORD *)(a2 + 48 + a1) + 12) + 28) + 8);
}

//----- (004011B0) --------------------------------------------------------
int __usercall sub_4011B0@<eax>(int a1@<eax>, int a2@<ecx>)
{
  int v2; // esi
  int v3; // edi
  int i; // [esp+0h] [ebp-8h]
  int v6; // [esp+4h] [ebp-4h]

  v2 = a1 + *(_DWORD *)(a1 + *(_DWORD *)(a1 + *(_DWORD *)(a1 + 2 * a2 - 304011 - a2) + 120) + 32);
  v3 = a1 + *(_DWORD *)(a1 + *(_DWORD *)(a1 + *(_DWORD *)(a1 + 2 * a2 - 304011 - a2) + 120) + 28);
  *(unsigned int *)((char *)&STACK[0x4A3CB] - a2) = 1443174442 - a2;
  for ( i = 0; v6 != *(_DWORD *)(a2 + a1 + *(_DWORD *)(v2 + i) - 304059); i += 4 )
    ;
  return a1 + *(_DWORD *)(i + v3);
}
// 401213: variable 'v6' is possibly undefined

//----- (00401230) --------------------------------------------------------
int __stdcall sub_401230(int a1)
{
  return -1;
}

//----- (00401250) --------------------------------------------------------
int __fastcall sub_401250(int a1)
{
  return (((a1 << 9) - 155749888) & ((a1 << 10) - 307169712)) + 311368764 - (a1 << 10);
}

// nfuncs=7 queued=7 decompiled=7 lumina nreq=0 worse=0 better=0
#error "There were 1 decompilation failure(s) on 7 function(s)"
