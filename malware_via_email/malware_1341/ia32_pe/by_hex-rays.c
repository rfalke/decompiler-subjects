/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int@<eax>, int@<edx>, int@<ecx>, unsigned int@<ebp>);

//-------------------------------------------------------------------------
// Data declarations

int dword_410000[512] =
{
  -152712265,
  -933036033,
  2045115907,
  267973846,
  -1180348220,
  980364892,
  1588269624,
  -1758569288,
  669520347,
  1249053495,
  -380395441,
  -1184441449,
  66628489,
  1974403874,
  -1748362883,
  1021390431,
  66389,
  25174048,
  1811363456,
  198879,
  168362240,
  454230912,
  -1384948480,
  18875117,
  101646870,
  2073690883,
  134378333,
  388530193,
  -1246862586,
  539432694,
  55389185,
  2073785308,
  -2147217380,
  1934368828,
  602324430,
  657927690,
  -294452461,
  -2143986827,
  2063925560,
  967772976,
  1583045879,
  556034842,
  1959687068,
  -2041249453,
  -831297720,
  1110439737,
  85402238,
  -371397850,
  -2135966308,
  1736490025,
  -642134413,
  2122611606,
  -827128008,
  746298565,
  -1809837048,
  2078243820,
  8265647,
  -148840914,
  -555303473,
  -1727676761,
  250023444,
  25591279,
  -466664167,
  -813961315,
  681022905,
  184784907,
  250067355,
  86272339,
  -1176433389,
  940219623,
  325328150,
  -545546555,
  -1923021974,
  1485246364,
  381480836,
  -1448794112,
  1669061856,
  -548069340,
  -126841330,
  829721502,
  -1994348750,
  -504570633,
  -620513104,
  -1052377607,
  64944057,
  -212982976,
  236831942,
  -1428367225,
  -407036823,
  -581964190,
  2014500576,
  -867987589,
  1264902929,
  931433279,
  -229728538,
  1648296358,
  -1014554889,
  -1274399922,
  -278512202,
  1589563833,
  -138671747,
  2111627678,
  -323508436,
  1002683854,
  1349571285,
  -820101026,
  -1239019971,
  -277710011,
  -658212667,
  342053948,
  428828407,
  -828063339,
  -505485486,
  1372170553,
  993874776,
  1655774916,
  2114870065,
  -662216132,
  -2009244317,
  585612023,
  -1327627095,
  293221248,
  512195550,
  -1192656248,
  411310003,
  508929971,
  1660024708,
  545909955,
  -1703431523,
  2028789277,
  -1888219390,
  330931097,
  1891119076,
  2078067771,
  693797749,
  -1107829810,
  58780871,
  -2144532286,
  639377521,
  1180186552,
  -1972829035,
  -1329367367,
  814276864,
  368903995,
  516288100,
  1869031663,
  -192805916,
  1682542434,
  1223161990,
  115546023,
  916094343,
  -1932273492,
  956540044,
  702346766,
  33909574,
  -146932026,
  1311993052,
  -325364614,
  1640782013,
  -940989095,
  -1166590544,
  16594755,
  588706132,
  162063302,
  2067201766,
  -1406187080,
  104153514,
  -554595727,
  2093385927,
  -1736995314,
  126564925,
  -1952860101,
  -1833116688,
  -407040974,
  51264806,
  1549743503,
  -484996026,
  -85257834,
  -1117375702,
  731775351,
  2051290686,
  -750421815,
  1032353692,
  202968823,
  -174677346,
  686943196,
  2036599879,
  -518643440,
  -1150792442,
  -330161213,
  1110287446,
  1660219313,
  215266737,
  -280474860,
  -1804267788,
  131264033,
  -339883209,
  1553808898,
  1593280379,
  1534067077,
  -1537284032,
  1447157495,
  -1045666979,
  -2085402183,
  1588067385,
  -1041281389,
  -1326437571,
  2072230950,
  2036615222,
  653770080,
  -928654352,
  259150145,
  1116130526,
  -1182259372,
  -707953705,
  178547523,
  2063053662,
  -1956992169,
  1675500870,
  1839418854,
  411131696,
  1588029107,
  -1631127142,
  332281355,
  -2029934227,
  1271237587,
  -1088722660,
  61627933,
  -464316120,
  1648190192,
  2090154970,
  1659922167,
  -726253816,
  -866208970,
  563462333,
  -1109155052,
  1773166327,
  768223253,
  -567051515,
  -156811589,
  2026126129,
  -1198193065,
  -1690878943,
  932396167,
  980454346,
  -745966148,
  652721835,
  1911283396,
  2060131458,
  -2121514105,
  688715087,
  -742098042,
  1352741236,
  -970830792,
  -1678860525,
  692353781,
  -2127427996,
  -1048394289,
  1929589798,
  1648130125,
  -209240437,
  -371263604,
  -1804905785,
  836807825,
  -986069469,
  955745372,
  -569013684,
  953006809,
  11256764,
  2008897031,
  -1955795080,
  1655058860,
  -2090403965,
  -716963487,
  -1063539941,
  -1085722229,
  -1731862618,
  -1017389340,
  1502556648,
  -836575156,
  -944701169,
  -1720187285,
  -675500214,
  -1439364735,
  300622007,
  -1016133460,
  -1684098946,
  1566971833,
  578557116,
  1972468421,
  241513056,
  1978763329,
  1131228306,
  335229420,
  564232960,
  887145661,
  1638404268,
  583285494,
  230060071,
  1590551106,
  -570122964,
  2022792817,
  -770960692,
  107017606,
  -1625270605,
  -1729043763,
  -2014949359,
  -516625194,
  1944178146,
  -1011808586,
  -596742111,
  61653725,
  -1640884881,
  1148719574,
  -351304856,
  304106985,
  730820104,
  -697344365,
  -1928348226,
  1654397060,
  -1704777638,
  -641889320,
  -1051442300,
  246432283,
  -1355600461,
  275122002,
  -180781535,
  2074002921,
  267129429,
  -149967556,
  1601049638,
  -1290908012,
  -1172267751,
  -285066722,
  -568920259,
  1777536823,
  1664597475,
  -1922460429,
  789492725,
  889148376,
  588312404,
  -1633799415,
  81588258,
  -486800026,
  244546237,
  -1679858449,
  -1014913836,
  -1719240948,
  1579638829,
  -1774901743,
  1818117056,
  406983446,
  -1317301531,
  828813688,
  -2074250414,
  1323207891,
  1849324857,
  516138822,
  -481509380,
  -111564495,
  -964587231,
  624410081,
  1282927661,
  602148962,
  730727355,
  -1057551146,
  -496811003,
  881478712,
  1645819563,
  -660789732,
  -555400430,
  1066190219,
  1778359311,
  269581190,
  1864086033,
  -795162354,
  2057028518,
  -1004682675,
  690912520,
  1766711768,
  1323123729,
  -712579164,
  -414374051,
  394462498,
  -1883571517,
  2132642755,
  -1064454848,
  2077729072,
  1421218046,
  -283208837,
  -916211059,
  -602075869,
  22336667,
  -1108600086,
  141466584,
  1364526987,
  1376317664,
  873281277,
  622676131,
  -350986504,
  919640852,
  -796231936,
  146745004,
  1593208665,
  706336048,
  -472253282,
  254892221,
  958204730,
  -829737047,
  645955310,
  -1070273771,
  -1109259605,
  947504152,
  -850797380,
  148196834,
  -280455056,
  1673503505,
  -1528920051,
  -2084133096,
  572370646,
  1440544701,
  -2007196861,
  688415169,
  550245682,
  -166456568,
  -1000758028,
  964696930,
  -1539169353,
  620971865,
  -1961393350,
  -327091243,
  -2113662715,
  2027894293,
  -1679739409,
  488509226,
  -1002814432,
  1161721976,
  -1350929050,
  -534948155,
  -138810914,
  1428088971,
  2078171477,
  656274927,
  518162175,
  -853350487,
  -1285558006,
  1711562373,
  82183220,
  -1286730532,
  1411380063,
  752750934,
  1407219904,
  1765260633,
  1141354483,
  -1458280803,
  -597160765,
  -2048340933,
  -422459592,
  618578254,
  1876053514,
  30641922,
  -1337403718,
  1825610512,
  2065510823,
  388167559,
  -2004130487,
  -1556837650,
  -1561919721,
  -851917704,
  807289434,
  -870411400,
  2054847484,
  2007456161,
  -717583971,
  646209106,
  2050731573,
  -839544276,
  -805093078,
  554736536,
  -1271023546,
  -1931600494,
  243621079,
  1294108509,
  -1253619816,
  -1854160094,
  -1556391834,
  -482899194,
  -1933540331,
  566696955,
  2127998146,
  -698342381,
  -149504541,
  -853347302,
  1350684138,
  789161543,
  2083521302,
  -2127466603,
  2012384327,
  502056229,
  -1817679486,
  -1022219239,
  350961818,
  -1539234219,
  -1187133625,
  286134336,
  1166395404,
  -729615990,
  -143842997,
  132318306,
  -610538446,
  -1932485967,
  -846237273
}; // weak


//----- (004180B0) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>)
{
  int *v4; // esi
  int *v5; // edi
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  unsigned int v11; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  bool v16; // zf
  int v17; // ebx
  int v18; // ett
  unsigned int v19; // eax
  unsigned int v20; // eax
  int v21; // eax
  bool v22; // cf
  int v23; // ebx
  int v24; // ebx
  int v25; // ett
  BOOL v26; // ecx
  bool v27; // cf
  int v28; // ebx
  int v29; // ett
  int v30; // ecx
  int v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ebx
  int v35; // ett
  bool v36; // zf
  int v37; // ebx
  int v38; // ett
  unsigned int v39; // ecx
  char *v40; // edx
  char v41; // al
  int v42; // eax
  bool v43; // cc
  int *v44; // esi
  int *v45; // edi
  int v46; // ecx
  char v47; // al
  unsigned __int8 v48; // al
  int v49; // eax
  int v50; // eax
  char v51; // t0
  unsigned __int8 v52; // bl
  char *v53; // edi
  int v54; // eax
  int *v55; // ebx
  int v56; // ebp
  char v57; // al
  char *v58; // ecx
  unsigned __int8 v59; // al
  int v60; // eax
  void (__cdecl *v61)(int *, int, int, int *); // ebp
  int *v62; // edi
  int v63[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v64; // [esp+2Ch] [ebp-80h] BYREF
  int v65; // [esp+30h] [ebp-7Ch] BYREF
  char *v66; // [esp+34h] [ebp-78h]
  int *v67; // [esp+38h] [ebp-74h]
  int v68; // [esp+3Ch] [ebp-70h]
  int v69; // [esp+40h] [ebp-6Ch]
  int v70; // [esp+44h] [ebp-68h]
  int v71; // [esp+48h] [ebp-64h]
  int *v72; // [esp+4Ch] [ebp-60h]
  int v73; // [esp+50h] [ebp-5Ch]
  int v74; // [esp+54h] [ebp-58h]
  int v75; // [esp+58h] [ebp-54h]
  int v76; // [esp+5Ch] [ebp-50h] BYREF

  v72 = &v76;
  v70 = a3;
  v69 = a2;
  v68 = a1;
  v4 = dword_410000;
  v5 = &dword_410000[-15360];
  v67 = &dword_410000[-15360];
  while ( 1 )
  {
    v9 = *v4;
    v7 = (unsigned int)v4++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v4;
        v4 = (int *)((char *)v4 + 1);
        *(_BYTE *)v5 = v6;
        v5 = (int *)((char *)v5 + 1);
      }
      else
      {
        v11 = 1;
        while ( 1 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v11 += v12 + v11;
          v7 = __CFADD__(v13, v13);
          v16 = 2 * v13 == 0;
          v8 = 2 * v13;
          if ( v7 )
          {
            if ( !v16 )
              break;
            v17 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v18 = v7 + v17;
            v7 = __CFADD__(v7, v17) | __CFADD__(v17, v18);
            v8 = v17 + v18;
            if ( v7 )
              break;
          }
        }
        v7 = v11 < 3;
        v19 = v11 - 3;
        if ( !v7 )
        {
          v20 = v19 << 8;
          LOBYTE(v20) = *(_BYTE *)v4;
          v4 = (int *)((char *)v4 + 1);
          v21 = ~v20;
          if ( !v21 )
          {
            v44 = v67;
            v45 = v67;
            v46 = 85;
            while ( 1 )
            {
              v47 = *(_BYTE *)v45;
              v45 = (int *)((char *)v45 + 1);
              v48 = v47 + 24;
              while ( v48 <= 1u && *(_BYTE *)v45 == 2 )
              {
                v49 = *v45;
                LOWORD(v49) = BYTE1(*v45);
                v50 = __ROL4__(v49, 16);
                v51 = v50;
                LOBYTE(v50) = BYTE1(v50);
                BYTE1(v50) = v51;
                v52 = *((_BYTE *)v45 + 4) + 24;
                *v45 = (int)v44 + v50 - (_DWORD)v45;
                v45 = (int *)((char *)v45 + 5);
                v48 = v52;
                if ( !--v46 )
                {
                  v53 = (char *)(v44 + 22528);
LABEL_38:
                  v54 = *(_DWORD *)v53;
                  if ( *(_DWORD *)v53 )
                  {
                    v55 = (int *)((char *)v44 + *((_DWORD *)v53 + 1));
                    v53 += 8;
                    v56 = ((int (__cdecl *)(int, int, int, int, int, int *, int, int, int))v44[27662])(
                            (int)v44 + v54 + 110568,
                            v68,
                            v69,
                            v70,
                            v71,
                            v72,
                            v73,
                            v74,
                            v75);
                    while ( 1 )
                    {
                      v57 = *v53++;
                      if ( !v57 )
                        goto LABEL_38;
                      v58 = v53;
                      v66 = v53;
                      v59 = v57 - 1;
                      do
                      {
                        if ( !v58 )
                          break;
                        v16 = *v53++ == (char)v59;
                        --v58;
                      }
                      while ( !v16 );
                      v60 = ((int (__cdecl *)(int, char *))v44[27663])(v56, v66);
                      if ( !v60 )
                        break;
                      *v55++ = v60;
                    }
                    v54 = ((int (*)(void))v44[27667])();
                  }
                  v61 = (void (__cdecl *)(int *, int, int, int *))v44[27664];
                  v62 = v44 - 1024;
                  v64 = v54;
                  v61(v44 - 1024, 4096, 4, &v64);
                  *((_BYTE *)v62 + 463) &= ~0x80u;
                  *((_BYTE *)v62 + 503) &= ~0x80u;
                  v61(v44 - 1024, 4096, v63[0], v63);
                  do
                    v64 = 0;
                  while ( &v64 != &v65 - 32 );
                  JUMPOUT(0x40A37B);
                }
              }
            }
          }
          a4 = v21;
        }
        v22 = __CFADD__(v8, v8);
        v23 = 2 * v8;
        if ( !v23 )
        {
          v24 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v25 = v7 + v24;
          v22 = __CFADD__(v7, v24) | __CFADD__(v24, v25);
          v23 = v24 + v25;
        }
        v26 = v22;
        v27 = __CFADD__(v23, v23);
        v8 = 2 * v23;
        if ( !v8 )
        {
          v28 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v29 = v7 + v28;
          v27 = __CFADD__(v7, v28) | __CFADD__(v28, v29);
          v8 = v28 + v29;
        }
        v30 = v26 + v27 + v26;
        if ( !v30 )
        {
          v31 = 1;
          while ( 1 )
          {
            v32 = __CFADD__(v8, v8);
            v33 = 2 * v8;
            if ( !v33 )
            {
              v34 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v35 = v7 + v34;
              v32 = __CFADD__(v7, v34) | __CFADD__(v34, v35);
              v33 = v34 + v35;
            }
            v31 += v32 + v31;
            v7 = __CFADD__(v33, v33);
            v36 = 2 * v33 == 0;
            v8 = 2 * v33;
            if ( v7 )
            {
              if ( !v36 )
                break;
              v37 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v38 = v7 + v37;
              v7 = __CFADD__(v7, v37) | __CFADD__(v37, v38);
              v8 = v37 + v38;
              if ( v7 )
                break;
            }
          }
          v30 = v31 + 2;
        }
        v39 = (a4 < 0xFFFFF300) + v30 + 1;
        v40 = (char *)v5 + a4;
        if ( a4 <= 0xFFFFFFFC )
        {
          do
          {
            v42 = *(_DWORD *)v40;
            v40 += 4;
            *v5++ = v42;
            v43 = v39 <= 4;
            v39 -= 4;
          }
          while ( !v43 );
          v5 = (int *)((char *)v5 + v39);
        }
        else
        {
          do
          {
            v41 = *v40++;
            *(_BYTE *)v5 = v41;
            v5 = (int *)((char *)v5 + 1);
            --v39;
          }
          while ( v39 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// 418233: positive sp value 50 has been found
// 418233: control flows out of bounds to 40A37B
// 410000: using guessed type int dword_410000[512];
// 4180B0: using guessed type int anonymous_0[4];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
