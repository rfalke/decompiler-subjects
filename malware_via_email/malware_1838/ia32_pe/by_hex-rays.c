/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

void __stdcall sub_4049FC(__int16, bool);
void __stdcall fxUnmcbxMnBjr(__int16, bool);
// int __usercall sub_404A3A@<eax>(struct tagRECT *@<ebx>);
int sub_405009();
// int __userpurge sub_40514F@<eax>(unsigned int@<ebx>, int, _DWORD *);
int __stdcall sub_405375(int);
// int __usercall sub_405402@<eax>(unsigned int@<edi>);
// int __userpurge sub_4055AA@<eax>(int@<edi>, int *@<esi>, _DWORD *, unsigned int *, _DWORD *, _DWORD *, _DWORD *, _DWORD *, _DWORD *, unsigned int *);
void __thiscall jCEoogfwBXoqxKlaNgtzkR(void *this, unsigned __int16, unsigned __int8);
// int __userpurge sub_405813@<eax>(unsigned int@<edi>, int, int, int);
// int __userpurge sub_4059C7@<eax>(char@<al>, unsigned __int8);
// int __userpurge sub_405A42@<eax>(unsigned int@<edi>, int, int, int *);
int sub_406185();
int sub_4061B8();
char **__stdcall sub_4061CB(int, int, void (__stdcall *)(int (__cdecl *)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD), int (__stdcall *)(int, int, int), int, int, int, int, int **), int);
// int __userpurge sub_4063A7@<eax>(__int16@<ax>, unsigned __int16);
LPSTR __stdcall sub_40643A(int);
void __stdcall vzswloIbjjKVd(unsigned __int16);
int sub_406773();
// void __userpurge mcgroqeonY(unsigned int@<eax>, unsigned int@<edi>, unsigned int);
// SHORT __usercall sub_40688D@<ax>(_DWORD *@<esi>);
int __cdecl sub_4068D0(char *, int, int, int);
int sub_406E0C();
// int __usercall sub_407567@<eax>(_DWORD *@<eax>);
int __stdcall sub_40758B(int, int);
int sub_407978();
// int __usercall sub_407AAD@<eax>(struct tagRECT *@<ebx>);

//-------------------------------------------------------------------------
// Data declarations

// extern UINT (__stdcall *SetPaletteEntries)(HPALETTE hpal, UINT iStart, UINT cEntries, const PALETTEENTRY *pPalEntries);
// extern int (__stdcall *GetDeviceCaps)(HDC hdc, int index);
// extern COLORREF (__stdcall *GetPixel)(HDC hdc, int x, int y);
// extern int (__stdcall *GetRgnBox)(HRGN hrgn, LPRECT lprc);
// extern LPSTR (__stdcall *PathGetArgsA)(LPCSTR pszPath);
// extern BOOL (__stdcall *SetSystemTime)(const SYSTEMTIME *lpSystemTime);
// extern BOOL (__stdcall *SetWaitableTimer)(HANDLE hTimer, const LARGE_INTEGER *lpDueTime, LONG lPeriod, PTIMERAPCROUTINE pfnCompletionRoutine, LPVOID lpArgToCompletionRoutine, BOOL fResume);
// extern DWORD (__stdcall *WaitForSingleObjectEx)(HANDLE hHandle, DWORD dwMilliseconds, BOOL bAlertable);
// extern int (__stdcall *lstrlenW)(LPCWSTR lpString);
// extern BOOL (__stdcall *GetCommTimeouts)(HANDLE hFile, LPCOMMTIMEOUTS lpCommTimeouts);
// extern HANDLE (__stdcall *HeapCreate)(DWORD flOptions, SIZE_T dwInitialSize, SIZE_T dwMaximumSize);
// extern HRESULT (__stdcall *PrintDlgExW)(LPPRINTDLGEXW pPD);
// extern HWND (__stdcall *FindTextW)(LPFINDREPLACEW);
// extern HWND (__stdcall *CreateDialogParamA)(HINSTANCE hInstance, LPCSTR lpTemplateName, HWND hWndParent, DLGPROC lpDialogFunc, LPARAM dwInitParam);
// extern int (__stdcall *DrawTextW)(HDC hdc, LPCWSTR lpchText, int cchText, LPRECT lprc, UINT format);
// extern HICON (__stdcall *LoadIconA)(HINSTANCE hInstance, LPCSTR lpIconName);
// extern ATOM (__stdcall *RegisterClassExA)(const WNDCLASSEXA *);
// extern BOOL (__stdcall *DrawStateA)(HDC hdc, HBRUSH hbrFore, DRAWSTATEPROC qfnCallBack, LPARAM lData, WPARAM wData, int x, int y, int cx, int cy, UINT uFlags);
// extern HACCEL (__stdcall *LoadAcceleratorsA)(HINSTANCE hInstance, LPCSTR lpTableName);
// extern WORD (__stdcall *CascadeWindows)(HWND hwndParent, UINT wHow, const RECT *lpRect, UINT cKids, const HWND *lpKids);
// extern SHORT (__stdcall *GetKeyState)(int nVirtKey);
// extern BOOL (__stdcall *GetMonitorInfoW)(HMONITOR hMonitor, LPMONITORINFO lpmi);
void ***off_40B038 = &off_40B034; // weak
void **off_40B04C = &off_40B040; // weak
void ***off_40B050 = &off_40B04C; // weak
int (**off_40B070)[459] = &off_40B058; // weak
int (__stdcall **off_40B074)(int, int) = &off_40B064; // weak
int dword_40B080 = 0; // weak
int dword_40B088 = -12323; // weak
void *off_40B0C4 = &unk_40B084; // weak
int dword_40B0DC = 0; // weak
int dword_40B0E0 = 0; // weak
int dword_40B0E4 = 0; // weak
int dword_40B0F0 = 0; // weak
int dword_40B0F4 = 0; // weak
int dword_40B0FC = 0; // weak
void *off_40B10C = &unk_40B0F8; // weak
_UNKNOWN unk_40B190; // weak
int **off_40B2C4 = &off_40B100; // weak
int dword_40B2D4 = 88433765; // weak
int dword_40B2D8 = 88561524; // weak
int (*off_40B2E0)[512] = &dword_40272C; // weak
int dword_40B2E8 = 106390533; // weak
int dword_40B2EC = 106193926; // weak
int dword_40B2F0 = 6624259; // weak
int dword_40B2F4 = 15080039; // weak
int dword_40B2F8 = 489232; // weak
int dword_40B2FC = 108336912; // weak
int dword_40B300 = 395024; // weak
int dword_40B304 = 124082023; // weak
__int16 word_40B308[130] =
{
  -31215,
  -27119,
  -23023,
  -18927,
  -14831,
  -10735,
  -6639,
  -2543,
  1553,
  5649,
  9745,
  13841,
  17937,
  22033,
  26129,
  30225,
  -31471,
  -31727,
  -29935,
  -30191,
  -30447,
  -30703,
  -28911,
  -29167,
  32017,
  31761,
  -31983,
  -32239,
  -32495,
  -32751,
  -30959,
  -31135,
  -31119,
  -31167,
  -31151,
  -31071,
  -31055,
  -31103,
  -31087,
  -31007,
  -30735,
  -30783,
  -30767,
  -31199,
  -31183,
  -31231,
  -31216,
  -31209,
  -31210,
  -31211,
  -31212,
  -31125,
  -31126,
  -31127,
  -31128,
  -31121,
  -31122,
  -31203,
  -31204,
  -31213,
  -31214,
  -31215,
  -27119,
  -23023,
  -18927,
  -14831,
  -10735,
  -6639,
  -2543,
  1553,
  5649,
  9745,
  13841,
  17937,
  22033,
  26129,
  30225,
  -31471,
  -31727,
  -29935,
  -30191,
  -30447,
  -30703,
  -28911,
  -29167,
  32017,
  31761,
  -31983,
  -32239,
  -32495,
  -32751,
  -30959,
  -31135,
  -31119,
  -31167,
  -31151,
  -31071,
  -31055,
  -31103,
  -31087,
  -31007,
  -30735,
  -30783,
  -30767,
  -31199,
  -31183,
  -31231,
  -31216,
  -31209,
  -31210,
  -31211,
  -31212,
  -31125,
  -31126,
  -31127,
  -31128,
  -31121,
  -31122,
  -31203,
  -31204,
  -31213,
  -31214,
  -27289,
  29968,
  16944,
  -31216,
  11457,
  24624,
  -6635,
  0
}; // weak
wchar_t *off_40B454 = L"IDEIODJJK"; // weak
int dword_40B458 = -4108; // weak
int dword_40B474 = 3417345; // weak
__int16 word_40B478 = -304; // weak
__int16 word_40B480 = 24678; // weak
int dword_40B488 = 488802; // weak
int dword_40B48C = 489335; // weak
int dword_40B490 = 141968996; // weak
int dword_40B494 = 271366; // weak
_UNKNOWN unk_40B498; // weak
int dword_40B4A8 = 0; // weak
_UNKNOWN unk_40B4AC; // weak
WCHAR String[] = L"hfkjhdkj"; // idb
CHAR pszPath[] = "C:\\SJHKjhkjhsjhkh HusUsll"; // idb
char aUser32[7] = "user32"; // weak
int (__cdecl *dword_40B508)(_DWORD) = NULL; // weak
int (__stdcall *off_40B50C)(_DWORD) = &sub_40643A; // weak
char aLstrlenw[9] = "lstrlenW"; // weak
int dword_40B51C = 7894550; // weak
int dword_40B520 = 3479004; // weak
int dword_40B524 = 144131956; // weak
int dword_40B528 = 1988494384; // weak
WCHAR aOspdai21[] = L"ospdai21"; // idb
CHAR IconName[] = "dfhkjher"; // idb
int (__cdecl *off_40B568)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD) = &sub_4068D0; // weak
int (__stdcall *off_40B56C)(int, int, int) = &sub_405A42; // weak
int dword_411641 = 1072724; // weak
int dword_411645 = 1073437; // weak
int dword_411649 = 1058932; // weak
int dword_41164D = 1050955; // weak
_UNKNOWN unk_411651; // weak
int dword_411655 = 1070035; // weak
int dword_411659 = 1064732; // weak
int dword_41165D = 1072431; // weak
int dword_411661 = 1056864; // weak
int dword_411665 = 1050374; // weak
int dword_41166D = 1068244; // weak
int dword_411671 = 1073162; // weak
int dword_411675 = 1054332; // weak
int dword_411679 = 1073305; // weak
struct tagTEXTMETRICA tm =
{
  1065170,
  1052581,
  1053478,
  1064296,
  1069638,
  1049325,
  1074340,
  1073197,
  1071221,
  1050655,
  1074186,
  62u,
  50u,
  16u,
  0u,
  179u,
  121u,
  16u,
  0u,
  84u
}; // idb
_UNKNOWN unk_4116B5; // weak
int dword_4116B9 = 1052041; // weak
int dword_4116BD = 1065860; // weak
int dword_4116C1 = 1048589; // weak
int dword_4116C5 = 1055097; // weak
int dword_4116C9 = 1073356; // weak
_UNKNOWN unk_4116CD; // weak
int dword_4116D1 = 1049359; // weak
int dword_4116D5 = 1071949; // weak
int dword_4116D9 = 1074180; // weak
int dword_4116DD = 1060476; // weak
int dword_4116E1 = 1054321; // weak
int dword_4116E5 = 1075434; // weak
char byte_4116E9 = '\''; // weak
int dword_4116ED = 1064294; // weak
_UNKNOWN unk_4116F1; // weak
int dword_4116F5 = 1052639; // weak
int dword_4116F9 = 1070357; // weak
struct _COMMTIMEOUTS CommTimeouts = { 1078129u, 1061265u, 1065480u, 1060044u, 1073650u }; // idb
int dword_411715 = 1061136; // weak
char byte_41171D = 'Š'; // weak
_UNKNOWN unk_411721; // weak
int dword_411725 = 1065781; // weak
int dword_41172D = 1055238; // weak
int dword_411731 = 1075100; // weak
int dword_411735 = 1066315; // weak
int dword_411739 = 1067674; // weak
int *off_41180D[4] = { &dword_411641, &dword_411645, &dword_411649, &dword_41164D }; // weak
int *off_411811[3] = { &dword_411645, &dword_411649, &dword_41164D }; // weak
int *off_41182D[7] =
{
  &dword_411661,
  &dword_411665,
  &dword_411669,
  &dword_41166D,
  &dword_411671,
  &dword_411675,
  &dword_411679
}; // weak
int *off_411831[6] =
{
  &dword_411665,
  &dword_411669,
  &dword_41166D,
  &dword_411671,
  &dword_411675,
  &dword_411679
}; // weak
int *off_411835[5] = { &dword_411669, &dword_41166D, &dword_411671, &dword_411675, &dword_411679 }; // weak
int *off_411841[2] = { &dword_411675, &dword_411679 }; // weak
int *off_411845 = &dword_411679; // weak
void *off_41184D = (void *)0x411681; // weak
void *off_411859 = (void *)0x41168D; // weak
void *off_411869 = (void *)0x41169D; // weak
void *off_411875 = (void *)0x4116A9; // weak
int *off_411889[4] = { &dword_4116BD, &dword_4116C1, &dword_4116C5, &dword_4116C9 }; // weak
int *off_41188D[3] = { &dword_4116C1, &dword_4116C5, &dword_4116C9 }; // weak
void *off_411899 = &unk_4116CD; // weak
int *off_4118A1[5] = { &dword_4116D5, &dword_4116D9, &dword_4116DD, &dword_4116E1, &dword_4116E5 }; // weak
int *off_4118A5[4] = { &dword_4116D9, &dword_4116DD, &dword_4116E1, &dword_4116E5 }; // weak
int *off_4118A9[3] = { &dword_4116DD, &dword_4116E1, &dword_4116E5 }; // weak
int *off_4118AD[2] = { &dword_4116E1, &dword_4116E5 }; // weak
int *off_4118B1 = &dword_4116E5; // weak
char *off_4118B5[2] = { &byte_4116E9, &dword_4116ED }; // weak
int *off_4118B9 = &dword_4116ED; // weak
void *off_4118BD = &unk_4116F1; // weak
int *off_4118C1[2] = { &dword_4116F5, &dword_4116F9 }; // weak
void *off_4118D1 = (void *)0x411705; // weak
int *off_4118DD[3] = { &dword_411711, &dword_411715, &dword_411719 }; // weak
int *off_4118E1[2] = { &dword_411715, &dword_411719 }; // weak
int *off_4118F9[5] = { &dword_41172D, &dword_411731, &dword_411735, &dword_411739, &dword_41173D }; // weak
int *off_411901[3] = { &dword_411735, &dword_411739, &dword_41173D }; // weak
CHAR TableName[] = "QKX_ASKU7_24SN"; // idb
WCHAR chText = 82u; // idb


//----- (004049FC) --------------------------------------------------------
void __stdcall sub_4049FC(__int16 a1, bool a2)
{
  fxUnmcbxMnBjr(a1, a2);
}

//----- (00404A00) --------------------------------------------------------
void __stdcall fxUnmcbxMnBjr(__int16 a1, bool a2)
{
  *off_4118AD[0] -= dword_411645;
  dword_4116D5 ^= *(_DWORD *)off_41184D;
  *off_4118A9[0] |= dword_4116E5;
}
// 411645: using guessed type int dword_411645;
// 4116D5: using guessed type int dword_4116D5;
// 4116E5: using guessed type int dword_4116E5;
// 41184D: using guessed type void *off_41184D;
// 4118A9: using guessed type int *off_4118A9[3];
// 4118AD: using guessed type int *off_4118AD[2];

//----- (00404A3A) --------------------------------------------------------
int __usercall sub_404A3A@<eax>(struct tagRECT *a1@<ebx>)
{
  unsigned int j; // edx
  int v2; // eax
  int v3; // eax
  __int16 v4; // ax
  __int16 m; // ax
  __int16 v6; // ax
  int v7; // eax
  int v8; // edi
  int v9; // edi
  int v11; // [esp+0h] [ebp-304h]
  int v12; // [esp+38h] [ebp-2CCh]
  int v13; // [esp+48h] [ebp-2BCh]
  int v14; // [esp+60h] [ebp-2A4h]
  int v15; // [esp+6Ch] [ebp-298h]
  int v16; // [esp+7Ch] [ebp-288h]
  int v17; // [esp+B0h] [ebp-254h]
  unsigned int v18; // [esp+CCh] [ebp-238h]
  int v19; // [esp+D8h] [ebp-22Ch]
  int v20; // [esp+144h] [ebp-1C0h]
  int v21; // [esp+178h] [ebp-18Ch]
  char v22; // [esp+188h] [ebp-17Ch]
  char v23; // [esp+194h] [ebp-170h]
  unsigned __int16 v24; // [esp+1A8h] [ebp-15Ch]
  unsigned int v25; // [esp+1B4h] [ebp-150h]
  int v26; // [esp+208h] [ebp-FCh]
  unsigned int v27; // [esp+22Ch] [ebp-D8h]
  unsigned int v28; // [esp+240h] [ebp-C4h]
  unsigned int k; // [esp+268h] [ebp-9Ch]
  int i; // [esp+274h] [ebp-90h]
  __int16 *v31; // [esp+2E0h] [ebp-24h] BYREF
  int v32; // [esp+2E4h] [ebp-20h] BYREF
  int *v33; // [esp+2E8h] [ebp-1Ch]
  int v34; // [esp+2ECh] [ebp-18h]
  int (__cdecl *v35)(_DWORD, char *); // [esp+2F0h] [ebp-14h]
  SYSTEMTIME *lpSystemTime; // [esp+2F4h] [ebp-10h]
  unsigned int n; // [esp+2F8h] [ebp-Ch]
  int v38; // [esp+2FCh] [ebp-8h]
  int v39; // [esp+300h] [ebp-4h]

  v34 = -4111;
  v32 = 183088;
  for ( i = 18; i; --i )
  {
    if ( i == 24 )
      SetSystemTime(lpSystemTime);
  }
  v33 = &v32;
  v38 = 0;
  n = 0;
  for ( j = 3; j < 0x12; ++j )
  {
    tm.tmInternalLeading += v21;
    if ( dword_40B080 )
      break;
    v23 |= v22;
    *((_BYTE *)&dword_40B494 + j + 1) = (*((_BYTE *)&dword_40B494 + j + 1) ^ 0x5B) + 45;
  }
  dword_4116C9 |= 0xC0Bu;
  v2 = -4099;
  do
  {
    v3 = v2 ^ 0x352B;
    v38 = 2 * v3 + 19028;
    v19 -= 30754;
    v2 = (v3 + 1) ^ 0x352B;
    *(__int16 *)((char *)&word_40B480 + v38) = (*(__int16 *)((char *)&word_40B478 + v38) ^ 0x32B) + 554;
  }
  while ( v2 != -4110 );
  for ( lpSystemTime = (SYSTEMTIME *)-4099;
        lpSystemTime != (SYSTEMTIME *)-4595;
        lpSystemTime = (SYSTEMTIME *)((((unsigned int)lpSystemTime ^ 0x352B) + 1) ^ 0x352B) )
  {
    v15 |= v14;
    if ( dword_40B080 )
      break;
    v35 = (int (__cdecl *)(_DWORD, char *))dword_40B080;
    if ( !*off_40B2C4[3] )
    {
      dword_4116ED = (unsigned __int16)dword_4116ED - v26;
      v39 = 1;
      for ( k = 0; k < 0x18; ++k )
        ;
      v39 <<= 16;
      n = (unsigned int)**off_40B038;
      v13 |= *(_DWORD *)off_4118B5[0];
      v17 &= *off_411845;
      v31 = (__int16 *)(*(_DWORD *)n & ~(v39 - 1));
      n = (unsigned int)&v31;
      v12 += *(_DWORD *)off_411859;
      v4 = *v31;
      *(_BYTE *)off_411889[0] >>= 1;
      for ( m = (v4 - 554) ^ 0x32B; m != 23304; m = (v6 - 554) ^ 0x32B )
      {
        *(_DWORD *)n -= v39;
        v6 = **(_WORD **)n;
        dword_411645 += v11;
        v16 = __ROL4__(v16, 11);
      }
      *off_40B2C4[3] = *(_DWORD *)n;
    }
    for ( n = -4099; ; n = (v9 + 1) ^ 0x352B )
    {
      v28 = 0;
      do
      {
        if ( ++v28 == 31 )
          DrawTextW((HDC)a1, &chText, (int)a1, a1, (UINT)lpSystemTime);
      }
      while ( v28 < 0x17 );
      if ( *v33 % 0x5Fu > 0x87 || n == -4147 )
        break;
      v7 = -4595;
      v8 = -9434;
      do
      {
        switch ( v7 )
        {
          case -4563:
            v20 -= 8168;
            dword_411649 = (__PAIR64__(&dword_4116D1, v25) - __PAIR64__((struct tagTEXTMETRICA *)&tm.tmMaxCharWidth, v8)) >> 32;
            v38 = 8 * (((n ^ 0x352B) + 9514) % ((v34 ^ 0x352Bu) + 9514));
            break;
          case -4131:
            sub_405375(v38);
            break;
          case -4576:
            v27 = 0;
            do
            {
              if ( ++v27 == 42 )
                SetPaletteEntries((HPALETTE)0x3A15, 0x69C0u, 0x3FA2u, (const PALETTEENTRY *)0x86A5);
            }
            while ( v27 < 0x1F );
            dword_40B508 = (int (__cdecl *)(_DWORD))v35(*off_40B2C4[3], aLstrlenw);
            break;
          case -4547:
            v35 = (int (__cdecl *)(_DWORD, char *))off_40B568(
                                                     off_40B56C,
                                                     *(_DWORD *)off_40B10C,
                                                     &unk_40B190,
                                                     2,
                                                     *(_DWORD *)off_40B10C,
                                                     &unk_40B498);
            break;
        }
        v7 = (v8 - 1) ^ 0x352B;
        dword_4116D5 -= v24;
        v8 = v7 ^ 0x352B;
      }
      while ( (v7 ^ 0x352B) != -9514 );
      dword_4116C1 += (int)&dword_411739;
      dword_4116C1 &= (unsigned int)&tm.tmCharSet;
      v9 = n ^ 0x352B;
      dword_411675 = (int)&dword_4116E1 + (_DWORD)&unk_4116CD + (v18 > 0x252A);
      dword_411675 -= (int)&dword_411671
                    + (__CFADD__(v18 > 0x252A, &unk_4116CD) | __CFADD__(
                                                                &dword_4116E1,
                                                                (char *)&unk_4116CD + (v18 > 0x252A)));
      n = 8 * (((n ^ 0x352B) + 9514) % ((v34 ^ 0x352Bu) + 9514));
      sub_40758B(v38, n);
      *off_4118B9 ^= dword_4116BD;
    }
  }
  CommTimeouts.WriteTotalTimeoutMultiplier &= *off_4118F9[0];
  return 1;
}
// 404A3A: could not find valid save-restore pair for ebx
// 404C57: conditional instruction was optimized away because %var_9C.4<18u
// 404AD2: variable 'v21' is possibly undefined
// 404AF4: variable 'v22' is possibly undefined
// 404AF4: variable 'v23' is possibly undefined
// 404B6F: variable 'v19' is possibly undefined
// 404BCB: variable 'v14' is possibly undefined
// 404BCB: variable 'v15' is possibly undefined
// 404C09: variable 'v26' is possibly undefined
// 404CA0: variable 'v13' is possibly undefined
// 404CC1: variable 'v17' is possibly undefined
// 404CE1: variable 'v12' is possibly undefined
// 404D26: variable 'v11' is possibly undefined
// 404D38: variable 'v16' is possibly undefined
// 404DB5: variable 'v20' is possibly undefined
// 404DD9: variable 'v25' is possibly undefined
// 404EDA: variable 'v24' is possibly undefined
// 404F1A: variable 'v18' is possibly undefined
// 40B038: using guessed type void ***off_40B038;
// 40B080: using guessed type int dword_40B080;
// 40B10C: using guessed type void *off_40B10C;
// 40B2C4: using guessed type int **off_40B2C4;
// 40B478: using guessed type __int16 word_40B478;
// 40B480: using guessed type __int16 word_40B480;
// 40B494: using guessed type int dword_40B494;
// 40B508: using guessed type int (__cdecl *dword_40B508)(_DWORD);
// 40B568: using guessed type int (__cdecl *off_40B568)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 40B56C: using guessed type int (__stdcall *off_40B56C)(int, int, int);
// 411645: using guessed type int dword_411645;
// 411649: using guessed type int dword_411649;
// 411655: using guessed type int dword_411655;
// 411671: using guessed type int dword_411671;
// 411675: using guessed type int dword_411675;
// 4116BD: using guessed type int dword_4116BD;
// 4116C1: using guessed type int dword_4116C1;
// 4116C9: using guessed type int dword_4116C9;
// 4116D1: using guessed type int dword_4116D1;
// 4116D5: using guessed type int dword_4116D5;
// 4116E1: using guessed type int dword_4116E1;
// 4116ED: using guessed type int dword_4116ED;
// 411739: using guessed type int dword_411739;
// 411845: using guessed type int *off_411845;
// 411859: using guessed type void *off_411859;
// 411889: using guessed type int *off_411889[4];
// 4118B5: using guessed type char *off_4118B5[2];
// 4118B9: using guessed type int *off_4118B9;
// 4118F9: using guessed type int *off_4118F9[5];

//----- (00405009) --------------------------------------------------------
int sub_405009()
{
  int v0; // eax
  int v1; // ebx
  int v2; // eax
  int v3; // eax
  unsigned __int16 v5; // [esp+0h] [ebp-104h]
  int v6; // [esp+44h] [ebp-C0h]
  unsigned int i; // [esp+A8h] [ebp-5Ch]
  void (__stdcall *v8)(int (__cdecl *)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD), int (__stdcall *)(int, int, int), int, int, int, int, int **); // [esp+F0h] [ebp-14h]
  _DWORD *v9; // [esp+F8h] [ebp-Ch]
  char *retaddr; // [esp+108h] [ebp+4h] BYREF

  v9 = (_DWORD *)dword_40B2EC;
  for ( i = 0; i < 0x1D; ++i )
    ;
  v0 = dword_40B2F4;
  *(_BYTE *)off_41180D[21] &= 0x12u;
  v1 = dword_40B2F0;
  v8 = (void (__stdcall *)(int (__cdecl *)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD), int (__stdcall *)(int, int, int), int, int, int, int, int **))v0;
  v2 = sub_40514F(dword_40B2F0, (int)off_40B2C4, v9);
  *(_BYTE *)off_4118C1[0] *= 2;
  if ( v2 )
  {
    v3 = -4100;
  }
  else
  {
    sub_4061CB((int)off_40B2C4, v1, v8, 203264);
    tm.tmDigitizedAspectY += v6;
    dword_40B2E8 = (int)&retaddr;
    retaddr += dword_40B0F0;
    v3 = -4099;
  }
  dword_411645 += v5;
  return (v3 ^ 0x352B) + 9514;
}
// 405058: conditional instruction was optimized away because %var_5C.4<1Du
// 405113: variable 'v6' is possibly undefined
// 405132: variable 'v5' is possibly undefined
// 40B0F0: using guessed type int dword_40B0F0;
// 40B2C4: using guessed type int **off_40B2C4;
// 40B2E8: using guessed type int dword_40B2E8;
// 40B2EC: using guessed type int dword_40B2EC;
// 40B2F0: using guessed type int dword_40B2F0;
// 40B2F4: using guessed type int dword_40B2F4;
// 411645: using guessed type int dword_411645;
// 41180D: using guessed type int *off_41180D[4];
// 4118C1: using guessed type int *off_4118C1[2];

//----- (0040514F) --------------------------------------------------------
int __userpurge sub_40514F@<eax>(unsigned int a1@<ebx>, int a2, _DWORD *a3)
{
  int v3; // eax
  unsigned int v5; // [esp+90h] [ebp-44h]
  unsigned int v6; // [esp+A0h] [ebp-34h]
  WNDCLASSEXA *v7; // [esp+B8h] [ebp-1Ch]

  v6 = 0;
  do
  {
    if ( ++v6 == 37 )
      FindTextW((LPFINDREPLACEW)0x3CA1);
  }
  while ( v6 < 0x17 );
  dword_411665 &= 0x28C4u;
  tm.tmExternalLeading = (__PAIR64__(tm.tmExternalLeading, -4100) - __PAIR64__(dword_411645, a1)) >> 32;
  if ( dword_40B0E0 == 1 || !**(_DWORD **)(a2 + 52) )
  {
    v3 = -4099;
  }
  else
  {
    if ( off_40B2C4[15] )
      *a3 = ((int (__stdcall *)(_DWORD, int, int))(*off_40B2C4[2]
                                                 + *(_DWORD *)(*(_DWORD *)(*off_40B2C4[2] + 60) + *off_40B2C4[2] + 40)))(
              *off_40B2C4[2],
              dword_40B0E0,
              dword_40B0E4);
    dword_40B0F0 = 0;
    v5 = 0;
    do
    {
      if ( ++v5 == 42 )
        RegisterClassExA(v7);
    }
    while ( v5 < 0x1A );
    dword_40B0F4 = 0;
    v3 = -4100;
  }
  return (v3 ^ 0x352B) + 9514;
}
// 4052C2: variable 'v7' is possibly undefined
// 40B0E0: using guessed type int dword_40B0E0;
// 40B0E4: using guessed type int dword_40B0E4;
// 40B0F0: using guessed type int dword_40B0F0;
// 40B0F4: using guessed type int dword_40B0F4;
// 40B2C4: using guessed type int **off_40B2C4;
// 411645: using guessed type int dword_411645;
// 411665: using guessed type int dword_411665;

//----- (00405375) --------------------------------------------------------
int __stdcall sub_405375(int a1)
{
  int i; // edi
  int result; // eax
  unsigned int j; // [esp+28h] [ebp-14h]

  for ( i = -4099; i != -4110; i = ((i ^ 0x352B) + 1) ^ 0x352B )
  {
    for ( j = 0; j < 0x16; ++j )
      ;
    result = off_40B50C(a1);
  }
  return result;
}
// 4053C8: conditional instruction was optimized away because %var_14.4<16u
// 40B50C: using guessed type int (__stdcall *off_40B50C)(_DWORD);

//----- (00405402) --------------------------------------------------------
int __usercall sub_405402@<eax>(unsigned int a1@<edi>)
{
  int v1; // eax
  LPARAM lData; // [esp+80h] [ebp-28h]
  int y; // [esp+84h] [ebp-24h]
  WPARAM wData; // [esp+88h] [ebp-20h]
  int v6; // [esp+A4h] [ebp-4h] BYREF
  char *retaddr; // [esp+ACh] [ebp+4h] BYREF

  dword_40B0DC = *(&dword_40B2F8 + 1);
  for ( y = 30; y; --y )
  {
    if ( y == 38 )
      DrawStateA((HDC)0x4C86, (HBRUSH)0x5B82, (DRAWSTATEPROC)0x4C86, lData, wData, 14751, 38, wData, 19590, 0x16CCu);
  }
  dword_40B0E0 = *(&dword_40B2F8 + 2);
  v1 = *(&dword_40B2F8 + 3);
  tm.tmDescent += (LONG)&dword_41165D;
  tm.tmDescent &= (unsigned int)&tm.tmFirstChar;
  tm.tmDescent += (LONG)&dword_4116F5;
  dword_40B0E4 = v1;
  sub_405813(a1, (int)&v6, *(_DWORD *)dword_40B2F8, (int)off_40B2E0);
  if ( sub_405009() )
  {
    v6 = 0;
    dword_40B088 += 6780263;
  }
  else
  {
    v6 = *off_40B2C4[14];
  }
  dword_40B0FC = (int)&retaddr;
  retaddr += dword_40B0F0;
  return v6;
}
// 405487: variable 'lData' is possibly undefined
// 405487: variable 'wData' is possibly undefined
// 405492: variable 'y' is possibly undefined
// 40B088: using guessed type int dword_40B088;
// 40B0DC: using guessed type int dword_40B0DC;
// 40B0E0: using guessed type int dword_40B0E0;
// 40B0E4: using guessed type int dword_40B0E4;
// 40B0F0: using guessed type int dword_40B0F0;
// 40B0FC: using guessed type int dword_40B0FC;
// 40B2C4: using guessed type int **off_40B2C4;
// 40B2E0: using guessed type int (*off_40B2E0)[512];
// 40B2F8: using guessed type int dword_40B2F8;
// 411655: using guessed type int dword_411655;
// 411659: using guessed type int dword_411659;
// 41165D: using guessed type int dword_41165D;
// 4116F5: using guessed type int dword_4116F5;
// 4116F9: using guessed type int dword_4116F9;

//----- (004055AA) --------------------------------------------------------
int __userpurge sub_4055AA@<eax>(
        int a1@<edi>,
        int *a2@<esi>,
        _DWORD *a3,
        unsigned int *a4,
        _DWORD *a5,
        _DWORD *a6,
        _DWORD *a7,
        _DWORD *a8,
        _DWORD *a9,
        unsigned int *a10)
{
  unsigned int i; // ebx
  int v11; // eax
  unsigned int v12; // ecx
  unsigned int v13; // eax
  unsigned int *v14; // ecx
  int v15; // eax
  int v16; // eax
  int result; // eax
  int v18; // [esp+20h] [ebp-54h]
  int v19; // [esp+24h] [ebp-50h]
  int v20; // [esp+28h] [ebp-4Ch] BYREF
  unsigned int k; // [esp+3Ch] [ebp-38h]
  LARGE_INTEGER *lpDueTime; // [esp+54h] [ebp-20h]
  int j; // [esp+5Ch] [ebp-18h]
  LPVOID lpArgToCompletionRoutine; // [esp+64h] [ebp-10h]
  unsigned int v25; // [esp+6Ch] [ebp-8h]

  for ( i = -4099; i != -4147; i = ((i ^ 0x352B) + 1) ^ 0x352B )
  {
    v25 = 67;
    for ( j = 17; j; --j )
    {
      if ( j == 21 )
        SetWaitableTimer(
          (HANDLE)0x3571,
          lpDueTime,
          10043,
          (PTIMERAPCROUTINE)lpDueTime,
          lpArgToCompletionRoutine,
          (BOOL)lpDueTime);
    }
    v18 = 28156;
    if ( i % v25 == 118 || i == -4112 )
    {
      v16 = *(_DWORD *)(*a2 + 32);
      *a3 = a1 + *(_DWORD *)(*a2 + 28);
      v14 = a4;
      v13 = a1 + v16;
LABEL_24:
      *v14 = v13;
      goto LABEL_25;
    }
    if ( i % 0x76 >= 0x98 || i == -4110 )
    {
      for ( k = 0; k < 0x15; ++k )
        ;
      v15 = a1 + *(_DWORD *)(a1 + 60);
      *a5 = v15;
      *a2 = a1 + *(_DWORD *)(v15 + 120);
    }
    else
    {
      v18 = (int)&v20;
      v20 -= 98;
      if ( i % 0x65 > 0x896 || i == -4108 )
      {
        *a6 = -4111;
        *a7 = -4111;
        *a8 = -4109;
        goto LABEL_25;
      }
      if ( i % 0x87 == 259 || i == -4106 )
      {
        v11 = *a2;
        *a9 = a1 + *(_DWORD *)(*a2 + 36);
        v12 = *(_DWORD *)(v11 + 20);
        v13 = *(_DWORD *)(v11 + 24);
        if ( v12 > v13 )
          v13 = v12;
        v14 = a10;
        goto LABEL_24;
      }
    }
LABEL_25:
    v19 ^= v18;
    result = 13611;
  }
  return result;
}
// 405741: conditional instruction was optimized away because %var_38.4<15u
// 4057B1: variable 'v19' is possibly undefined

//----- (004057D0) --------------------------------------------------------
void __thiscall jCEoogfwBXoqxKlaNgtzkR(void *this, unsigned __int16 a2, unsigned __int8 a3)
{
  unsigned int v3; // [esp+0h] [ebp-20h]

  tm.tmOverhang = (__PAIR64__(tm.tmOverhang, v3) - __PAIR64__(*off_411831[0], (unsigned int)this)) >> 32;
  *off_4118E1[0] |= *(_DWORD *)&tm.tmItalic;
  dword_41164D &= *off_4118A5[0];
}
// 4057E5: variable 'v3' is possibly undefined
// 41164D: using guessed type int dword_41164D;
// 411831: using guessed type int *off_411831[6];
// 4118A5: using guessed type int *off_4118A5[4];
// 4118E1: using guessed type int *off_4118E1[2];

//----- (00405813) --------------------------------------------------------
int __userpurge sub_405813@<eax>(unsigned int a1@<edi>, int a2, int a3, int a4)
{
  int v4; // ecx
  int result; // eax
  _DWORD *v6; // esi
  _DWORD *v7; // esi
  _DWORD *v8; // eax
  _DWORD *v9; // esi
  int v10; // [esp+0h] [ebp-70h]
  unsigned int v11; // [esp+8h] [ebp-68h]
  unsigned int v12; // [esp+10h] [ebp-60h]
  int v13; // [esp+14h] [ebp-5Ch]
  int v14; // [esp+18h] [ebp-58h]
  int v15; // [esp+3Ch] [ebp-34h]
  char v16; // [esp+40h] [ebp-30h]
  char v17; // [esp+44h] [ebp-2Ch]
  int v18; // [esp+48h] [ebp-28h]
  int i; // [esp+58h] [ebp-18h]
  BOOL bAlertable; // [esp+5Ch] [ebp-14h]

  v4 = -4099;
  for ( i = 27; i; --i )
  {
    if ( i == 30 )
      WaitForSingleObjectEx((HANDLE)0x3EED, 0x4625u, bAlertable);
  }
  v17 = 16;
  if ( __SETP__(v10, 23107) )
    v18 = v15 + (unsigned __int16)v18;
  else
    v13 |= *(_DWORD *)off_41184D;
  result = 33632295;
  do
  {
    v6 = *(&off_40B0C4 + (((_BYTE)v4 + 1) & 3));
    v17 += v16;
    *v6 *= -8208 * v4;
    v7 = *(&off_40B0C4 + (((_BYTE)v4 - 1) & 3));
    *v7 ^= v4 | result;
    switch ( v4 )
    {
      case -4131:
        dword_40B2EC = a2;
        break;
      case -4547:
        dword_40B2F0 = a3;
        break;
      case -4483:
        dword_40B2F4 = a4;
        break;
    }
    v14 -= v13;
    v12 = (__PAIR64__(v12, dword_4116DD) - __PAIR64__(v11, a1)) >> 32;
    v4 = ((v4 ^ 0x352B) - 9513 + 9514) ^ 0x352B;
    v18 += dword_41172D;
    v8 = *(&off_40B0C4 + (v4 & 3));
    *v8 += v4 ^ (-8196 * v4);
    result = -8205 * v4;
    v9 = *(&off_40B0C4 + (((_BYTE)v4 - 2) & 3));
    *v9 |= -8205 * v4;
  }
  while ( v4 != -4403 );
  return result;
}
// 40584E: variable 'bAlertable' is possibly undefined
// 405882: variable 'v10' is possibly undefined
// 40589C: variable 'v13' is possibly undefined
// 4058B0: variable 'v15' is possibly undefined
// 4058A5: variable 'v18' is possibly undefined
// 4058CD: variable 'v4' is possibly undefined
// 4058E3: variable 'v16' is possibly undefined
// 405952: variable 'v14' is possibly undefined
// 405964: variable 'v12' is possibly undefined
// 405964: variable 'v11' is possibly undefined
// 40B0C4: using guessed type void *off_40B0C4;
// 40B2EC: using guessed type int dword_40B2EC;
// 40B2F0: using guessed type int dword_40B2F0;
// 40B2F4: using guessed type int dword_40B2F4;
// 4116DD: using guessed type int dword_4116DD;
// 41172D: using guessed type int dword_41172D;
// 41184D: using guessed type void *off_41184D;

//----- (004059C7) --------------------------------------------------------
int __userpurge sub_4059C7@<eax>(char a1@<al>, unsigned __int8 a2)
{
  bool v2; // zf
  int v3; // eax
  int i; // [esp+10h] [ebp-18h]
  HINSTANCE hInstance; // [esp+14h] [ebp-14h]

  v2 = a1 == (char)a2;
  v3 = -4099;
  if ( v2 )
  {
    for ( i = 21; i; --i )
    {
      if ( i == 27 )
        LoadAcceleratorsA(hInstance, TableName);
    }
    v3 = -4100;
  }
  return (v3 ^ 0x352B) + 9514;
}
// 405A12: variable 'hInstance' is possibly undefined

//----- (00405A42) --------------------------------------------------------
int __userpurge sub_405A42@<eax>(unsigned int a1@<edi>, int a2, int a3, int *a4)
{
  int DeviceCaps; // eax
  int v5; // ecx
  unsigned int v7; // edx
  unsigned int v8; // ebx
  unsigned __int16 v9; // ax
  __int16 v10; // ax
  unsigned int v11; // eax
  __int16 v12; // ax
  unsigned int v13; // eax
  int v14; // eax
  int result; // eax
  __int16 v16; // [esp+10h] [ebp-2D8h]
  __int16 v17; // [esp+1Ch] [ebp-2CCh]
  int v18; // [esp+28h] [ebp-2C0h]
  unsigned int v19; // [esp+74h] [ebp-274h]
  int v20; // [esp+C8h] [ebp-220h]
  __int16 v21; // [esp+D4h] [ebp-214h]
  unsigned int v22; // [esp+E8h] [ebp-200h]
  int v23; // [esp+ECh] [ebp-1FCh]
  unsigned int v24; // [esp+108h] [ebp-1E0h]
  int v25; // [esp+140h] [ebp-1A8h]
  int v26; // [esp+15Ch] [ebp-18Ch]
  unsigned int v27; // [esp+184h] [ebp-164h]
  int v28; // [esp+1ACh] [ebp-13Ch]
  int v29; // [esp+1F0h] [ebp-F8h]
  int v30; // [esp+1F4h] [ebp-F4h]
  int v31; // [esp+208h] [ebp-E0h]
  int v32; // [esp+208h] [ebp-E0h]
  int v33; // [esp+20Ch] [ebp-DCh]
  unsigned int v34; // [esp+22Ch] [ebp-BCh]
  unsigned int v35; // [esp+234h] [ebp-B4h]
  unsigned int i; // [esp+23Ch] [ebp-ACh]
  unsigned int j; // [esp+268h] [ebp-80h]
  unsigned int v38; // [esp+280h] [ebp-68h]
  UINT cKids; // [esp+2C0h] [ebp-28h]
  __int16 v40; // [esp+2C4h] [ebp-24h]
  int x; // [esp+2C8h] [ebp-20h]
  WPARAM wParam; // [esp+2CCh] [ebp-1Ch]
  int v43; // [esp+2D0h] [ebp-18h]
  HDC hdc; // [esp+2D4h] [ebp-14h]
  int hdca; // [esp+2D4h] [ebp-14h]
  int v46; // [esp+2E0h] [ebp-8h]
  int v47; // [esp+2E4h] [ebp-4h]
  int v48; // [esp+2E4h] [ebp-4h]
  int v49; // [esp+2E4h] [ebp-4h]
  int v50; // [esp+2E4h] [ebp-4h]
  int v51; // [esp+2E4h] [ebp-4h]
  int v52; // [esp+2E4h] [ebp-4h]
  WPARAM v53; // [esp+2F0h] [ebp+8h]

  DeviceCaps = -4100;
  v38 = 0;
  do
  {
    if ( ++v38 == 39 )
      DeviceCaps = GetDeviceCaps(hdc, 27884);
  }
  while ( v38 < 0x1E );
  v47 = 108356880;
  dword_411715 = LOBYTE(tm.tmOverhang) + (unsigned __int8)dword_411715;
  v40 = -4099;
  v5 = 13611;
  v32 = -v31;
  hdca = -1;
  x = DeviceCaps;
  dword_4116F5 += *off_4118AD[0] + (v24 < a1);
  dword_4116BD -= v23;
  v7 = 9514;
  v46 = 1;
  while ( 1 )
  {
    v21 += LOWORD(tm.tmWeight);
    v43 = -11356;
    v48 = 3287858 * (v47 | 0x651516) + 2385255;
    *(_DWORD *)off_4118B5[0] += v28 + (v7 < v19);
    v8 = hdca;
    dword_411655 ^= (unsigned int)&dword_4116D1;
    hdca += (v5 ^ 0xFFFFEFFC) + 9514;
    *(_DWORD *)&tm.tmCharSet += *off_41180D[0] + (v8 < v27);
    v9 = (*(_WORD *)(a2 + 32) ^ 0x32B) + 554;
    if ( v22 >= 0x1D57 )
      *(_BYTE *)off_41180D[33] += (v22 < 0x1D57) + 105;
    else
      dword_411659 += (unsigned __int8)dword_411739;
    dword_4116B9 &= *off_41188D[0];
    if ( v7 + (v5 ^ 0xFFFFEFFC) <= v9 )
    {
      wParam = -9514;
      do
      {
        for ( i = 0; i < 0x19; ++i )
          ;
        v53 = wParam + 9514;
        v10 = *(_WORD *)(a2 + 4 * (wParam + 9514) + 2) ^ 0x32B;
        dword_411665 += v25;
        v11 = (unsigned __int16)(v10 + 554);
        if ( v11 == hdca )
        {
          v34 = (__PAIR64__(v34, v11) - __PAIR64__(tm.tmAveCharWidth, v5)) >> 32;
          v46 *= v7 + (v5 ^ 0xFFFFEFFC);
          v12 = *(_WORD *)(a2 + 4 * v53);
          dword_411731 ^= (unsigned int)&CommTimeouts.ReadTotalTimeoutConstant;
          dword_411731 += (int)&tm.tmDigitizedAspectY;
          dword_411731 &= (unsigned int)&unk_4116F1;
          if ( sub_4063A7(v12, 0xFEFDu) && (dword_411735 ^= v32, sub_4059C7(*(_BYTE *)(hdca * (v7 + (v5 ^ x)) + a3), 0))
            || (v30 += v29,
                v17 -= v16,
                sub_4063A7(*(_WORD *)(a2 + 4 * v53), (*(unsigned __int8 *)(hdca * (v7 + (v5 ^ x)) + a3) - 554) ^ 0x32B)) )
          {
            v43 = -10356;
            v40 = v5 ^ ((v5 ^ v40) + (v5 ^ 0xEFFC) + 9514);
            break;
          }
          v43 = -5228;
        }
        v26 -= tm.tmDigitizedAspectY;
        v13 = (v5 ^ 0xFFFFEFFC) + wParam + 9514;
        for ( j = 0; j < 0x1B; ++j )
          ;
        wParam += (v5 ^ 0xFFFFEFFC) + 9514;
      }
      while ( (v5 ^ 0xFFFFEFFC) + v13 + 19028 <= (unsigned __int16)((*(_WORD *)(a2 + 32) ^ 0x32B) + 554) );
    }
    v18 = (__PAIR64__((unsigned __int16)v18, v7) - __PAIR64__(*off_411841[0], dword_411641)) >> 32;
    v49 = v48 ^ 0x47516;
    v20 -= *off_411811[0];
    if ( (v5 ^ (*(unsigned __int8 *)(hdca * (v7 + (v5 ^ x)) + a3) - v7)) == -4099 )
      break;
    v50 = v49 + 332801;
    if ( v43 == -5228 )
    {
      dword_41172D = CommTimeouts.WriteTotalTimeoutConstant | (unsigned __int8)dword_41172D;
      v46 += -9514 - (v5 ^ 0xFFFFEFFC);
      v52 = v50 - 145458;
    }
    else
    {
      v33 -= *(_DWORD *)off_4118B5[0];
      v51 = v50 & 0x2CA01;
      v46 += -9514 - (v5 ^ 0xFFFFEFFD);
      v35 = 0;
      do
      {
        if ( ++v35 == 29 )
          CascadeWindows((HWND)0xFFFFEFFC, 0x4C0Fu, (const RECT *)0x49FC, cKids, (const HWND *)hdca);
      }
      while ( v35 < 0x18 );
      v52 = 480870 * v51;
    }
    if ( v46 == v7 + (v5 ^ 0xFFFFEFFD) )
      goto LABEL_36;
    v47 = v52 + 2308640;
  }
  tm.tmWeight |= (unsigned int)&dword_41165D;
  tm.tmWeight -= (LONG)&dword_411739;
  tm.tmWeight |= (unsigned int)&dword_411675;
  v46 += (v5 ^ 0xFFFFEFFD) + 9514;
LABEL_36:
  if ( ((unsigned __int16)((v5 ^ v40) + 8960) ^ 0x32B) == *(_WORD *)(a2 + 32)
    || (v14 = -4100, v46 == v7 + (v5 ^ 0xFFFFEFFD)) )
  {
    dword_4116D1 ^= dword_411659;
    v14 = -4099;
  }
  result = v46 + -9514 - (v5 ^ v14);
  *a4 = result;
  return result;
}
// 405CAC: conditional instruction was optimized away because %var_AC.4<19u
// 405E8C: conditional instruction was optimized away because %var_80.4<1Bu
// 405A7E: variable 'hdc' is possibly undefined
// 405B31: variable 'v31' is possibly undefined
// 405B4A: variable 'v24' is possibly undefined
// 405B78: variable 'v23' is possibly undefined
// 405B9E: variable 'v21' is possibly undefined
// 405BD8: variable 'v28' is possibly undefined
// 405BC6: variable 'v7' is possibly undefined
// 405BC6: variable 'v19' is possibly undefined
// 405BE0: variable 'v5' is possibly undefined
// 405BF8: variable 'v27' is possibly undefined
// 405C23: variable 'v22' is possibly undefined
// 405D20: variable 'v25' is possibly undefined
// 405D4B: variable 'v34' is possibly undefined
// 405DEF: variable 'v29' is possibly undefined
// 405DEF: variable 'v30' is possibly undefined
// 405E0C: variable 'v17' is possibly undefined
// 405E0C: variable 'v16' is possibly undefined
// 405E4D: variable 'v26' is possibly undefined
// 405F37: variable 'v18' is possibly undefined
// 405F5A: variable 'v20' is possibly undefined
// 405FA2: variable 'v33' is possibly undefined
// 405FFB: variable 'cKids' is possibly undefined
// 411641: using guessed type int dword_411641;
// 411655: using guessed type int dword_411655;
// 411659: using guessed type int dword_411659;
// 41165D: using guessed type int dword_41165D;
// 411665: using guessed type int dword_411665;
// 411675: using guessed type int dword_411675;
// 4116B9: using guessed type int dword_4116B9;
// 4116BD: using guessed type int dword_4116BD;
// 4116D1: using guessed type int dword_4116D1;
// 4116F5: using guessed type int dword_4116F5;
// 411715: using guessed type int dword_411715;
// 41172D: using guessed type int dword_41172D;
// 411731: using guessed type int dword_411731;
// 411735: using guessed type int dword_411735;
// 411739: using guessed type int dword_411739;
// 41180D: using guessed type int *off_41180D[4];
// 411811: using guessed type int *off_411811[3];
// 411841: using guessed type int *off_411841[2];
// 41184D: using guessed type void *off_41184D;
// 41188D: using guessed type int *off_41188D[3];
// 4118A5: using guessed type int *off_4118A5[4];
// 4118AD: using guessed type int *off_4118AD[2];
// 4118B5: using guessed type char *off_4118B5[2];

//----- (00406185) --------------------------------------------------------
int sub_406185()
{
  dword_40B51C = 0;
  dword_40B520 = 0;
  dword_40B524 = 0;
  return dword_40B528;
}
// 40B51C: using guessed type int dword_40B51C;
// 40B520: using guessed type int dword_40B520;
// 40B524: using guessed type int dword_40B524;
// 40B528: using guessed type int dword_40B528;

//----- (004061B8) --------------------------------------------------------
int sub_4061B8()
{
  int v1; // [esp+4h] [ebp-4h] BYREF

  sub_40688D(&v1);
  return v1;
}

//----- (004061CB) --------------------------------------------------------
char **__stdcall sub_4061CB(
        int a1,
        int a2,
        void (__stdcall *a3)(int (__cdecl *)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD), int (__stdcall *)(int, int, int), int, int, int, int, int **),
        int a4)
{
  int v4; // eax
  char **result; // eax
  unsigned __int16 v6; // [esp+3Ch] [ebp-74h]
  unsigned int v7; // [esp+6Ch] [ebp-44h]
  HANDLE hFile; // [esp+A0h] [ebp-10h]
  int v9; // [esp+A4h] [ebp-Ch]
  char *retaddr; // [esp+B4h] [ebp+4h] BYREF
  char *v11; // [esp+C0h] [ebp+10h]

  if ( a4 != 550007 )
  {
    if ( a4 == 394273 )
    {
      v7 = 0;
      do
      {
        if ( ++v7 == 26 )
          GetCommTimeouts(hFile, &CommTimeouts);
      }
      while ( v7 < 0x12 );
      *(_DWORD *)off_411869 -= v6;
      if ( *off_40B2C4[3] && !dword_40B080 )
        sub_406E0C();
      v9 = 550007;
    }
    else
    {
      if ( a4 != 203264 )
        goto LABEL_15;
      v9 = 394273;
    }
    *(_DWORD *)&tm.tmItalic += &dword_4116D9;
    sub_4061CB(a1, a2, a3, v9);
    goto LABEL_15;
  }
  dword_411645 += (int)&dword_411675;
  a3(off_40B568, off_40B56C, dword_40B0DC, dword_40B0E0, dword_40B0E4, a2, off_40B2C4);
LABEL_15:
  v4 = dword_40B0F0;
  *(_DWORD *)off_411859 ^= 0x6DB4u;
  v11 = &retaddr[v4];
  result = &retaddr;
  dword_411661 -= dword_41164D;
  retaddr = v11;
  return result;
}
// 406389: returning address of temporary local variable '%" r"'
// 406260: variable 'hFile' is possibly undefined
// 406280: variable 'v6' is possibly undefined
// 40B080: using guessed type int dword_40B080;
// 40B0DC: using guessed type int dword_40B0DC;
// 40B0E0: using guessed type int dword_40B0E0;
// 40B0E4: using guessed type int dword_40B0E4;
// 40B0F0: using guessed type int dword_40B0F0;
// 40B2C4: using guessed type int **off_40B2C4;
// 40B568: using guessed type int (__cdecl *off_40B568)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 40B56C: using guessed type int (__stdcall *off_40B56C)(int, int, int);
// 411645: using guessed type int dword_411645;
// 41164D: using guessed type int dword_41164D;
// 411661: using guessed type int dword_411661;
// 411675: using guessed type int dword_411675;
// 4116D9: using guessed type int dword_4116D9;
// 4116E1: using guessed type int dword_4116E1;
// 411859: using guessed type void *off_411859;
// 411869: using guessed type void *off_411869;
// 411899: using guessed type void *off_411899;
// 4118B5: using guessed type char *off_4118B5[2];

//----- (004063A7) --------------------------------------------------------
int __userpurge sub_4063A7@<eax>(__int16 a1@<ax>, unsigned __int16 a2)
{
  bool v2; // zf
  int v3; // eax
  int i; // [esp+0h] [ebp-18h]

  v2 = a1 == (__int16)a2;
  v3 = -4099;
  if ( v2 )
  {
    for ( i = 31; i; --i )
    {
      if ( i == 43 )
        GetRgnBox((HRGN)0x8C5B, (LPRECT)&tm.tmOverhang);
    }
    v3 = -4100;
  }
  dword_411725 -= (int)&dword_4116E5;
  dword_411725 &= (unsigned int)&dword_4116BD;
  return (v3 ^ 0x352B) + 9514;
}
// 4116BD: using guessed type int dword_4116BD;
// 4116E5: using guessed type int dword_4116E5;
// 411725: using guessed type int dword_411725;

//----- (0040643A) --------------------------------------------------------
LPSTR __stdcall sub_40643A(int a1)
{
  int v1; // esi
  LPSTR result; // eax
  int v3; // [esp+28h] [ebp-5Ch]
  int v4; // [esp+34h] [ebp-50h]
  unsigned int i; // [esp+3Ch] [ebp-48h]
  int v6; // [esp+80h] [ebp-4h]

  v1 = 80;
  dword_4116D5 += (int)&unk_411721;
  dword_4116D5 &= (unsigned int)&dword_411671;
  result = (LPSTR)lstrlenW(String);
  if ( result == (LPSTR)8 )
  {
    do
    {
      result = PathGetArgsA(pszPath);
      if ( result[2] == 115 )
      {
        if ( v1 == 48 )
        {
          for ( i = 0; i < 0x12; ++i )
            ;
          result = (LPSTR)dword_40B4A8;
          if ( !dword_40B4A8 )
          {
            v4 += v3;
            result = (LPSTR)off_40B568(off_40B56C, *off_40B2C4[3], off_40B2C4 + 19, 1, aUser32, v6);
            dword_40B4A8 = (int)result;
          }
        }
        else if ( v1 == 32 )
        {
          result = (LPSTR)off_40B568(off_40B56C, dword_40B4A8, &unk_40B4AC, 3, word_40B308, &word_40B480);
        }
      }
      --v1;
    }
    while ( v1 );
  }
  return result;
}
// 4064B3: conditional instruction was optimized away because %var_48.4<12u
// 406512: variable 'v3' is possibly undefined
// 406512: variable 'v4' is possibly undefined
// 406531: variable 'v6' is possibly undefined
// 40B2C4: using guessed type int **off_40B2C4;
// 40B308: using guessed type __int16 word_40B308[130];
// 40B480: using guessed type __int16 word_40B480;
// 40B4A8: using guessed type int dword_40B4A8;
// 40B568: using guessed type int (__cdecl *off_40B568)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 40B56C: using guessed type int (__stdcall *off_40B56C)(int, int, int);
// 411671: using guessed type int dword_411671;
// 4116D5: using guessed type int dword_4116D5;

//----- (00406588) --------------------------------------------------------
void __stdcall vzswloIbjjKVd(unsigned __int16 a1)
{
  *off_4118A1[0] ^= (unsigned __int8)byte_41171D;
  dword_411641 ^= dword_411715;
  dword_411645 = *(_DWORD *)off_4118BD & (unsigned __int8)dword_411645;
}
// 411641: using guessed type int dword_411641;
// 411645: using guessed type int dword_411645;
// 411715: using guessed type int dword_411715;
// 41171D: using guessed type char byte_41171D;
// 4118A1: using guessed type int *off_4118A1[5];
// 4118BD: using guessed type void *off_4118BD;

//----- (00406773) --------------------------------------------------------
int sub_406773()
{
  int i; // [esp+18h] [ebp-40h]
  HMONITOR hMonitor; // [esp+34h] [ebp-24h]

  for ( i = 16; i; --i )
  {
    if ( i == 27 )
      GetMonitorInfoW(hMonitor, (LPMONITORINFO)0x57A5);
  }
  return off_40B568(off_40B56C, *off_40B2C4[3], (char *)off_40B2C4 + 314, 4, dword_40B2D4, dword_40B2D8);
}
// 4067B6: variable 'hMonitor' is possibly undefined
// 40B2C4: using guessed type int **off_40B2C4;
// 40B2D4: using guessed type int dword_40B2D4;
// 40B2D8: using guessed type int dword_40B2D8;
// 40B568: using guessed type int (__cdecl *off_40B568)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 40B56C: using guessed type int (__stdcall *off_40B56C)(int, int, int);

//----- (00406847) --------------------------------------------------------
void __userpurge mcgroqeonY(unsigned int a1@<eax>, unsigned int a2@<edi>, unsigned int a3)
{
  unsigned int v3; // [esp+0h] [ebp-20h]

  *(_DWORD *)off_4118D1 ^= CommTimeouts.ReadTotalTimeoutMultiplier;
  dword_41166D += (unsigned __int8)byte_4116E9 + (a2 < v3);
  CommTimeouts.WriteTotalTimeoutMultiplier = (__PAIR64__(CommTimeouts.WriteTotalTimeoutMultiplier, dword_41166D)
                                            - __PAIR64__(*off_411901[0], a1)) >> 32;
}
// 40685B: variable 'v3' is possibly undefined
// 41166D: using guessed type int dword_41166D;
// 4116E9: using guessed type char byte_4116E9;
// 4118D1: using guessed type void *off_4118D1;
// 411901: using guessed type int *off_411901[3];

//----- (0040688D) --------------------------------------------------------
SHORT __usercall sub_40688D@<ax>(_DWORD *a1@<esi>)
{
  if ( lstrlenW(aOspdai21) == 8 )
  {
    LoadIconA((HINSTANCE)*off_40B04C, IconName);
    *a1 = 1;
  }
  else
  {
    *a1 = 3;
  }
  return GetKeyState(20850);
}
// 40B04C: using guessed type void **off_40B04C;

//----- (004068D0) --------------------------------------------------------
int __cdecl sub_4068D0(char *a1, int a2, int a3, int a4)
{
  DWORD v4; // ecx
  unsigned int v5; // edx
  unsigned int v6; // eax
  int v7; // edx
  int v8; // edx
  int v9; // ecx
  int v10; // esi
  _DWORD *v11; // eax
  int v12; // ecx
  int v13; // edx
  int *v14; // eax
  unsigned int v16; // [esp+0h] [ebp-3ACh]
  unsigned int v17; // [esp+8Ch] [ebp-320h]
  int v18; // [esp+198h] [ebp-214h]
  int v19; // [esp+19Ch] [ebp-210h]
  unsigned int j; // [esp+224h] [ebp-188h]
  int k; // [esp+230h] [ebp-17Ch]
  unsigned int i; // [esp+2ACh] [ebp-100h]
  int *v23; // [esp+33Ch] [ebp-70h] BYREF
  _DWORD v24[7]; // [esp+340h] [ebp-6Ch] BYREF
  int v25; // [esp+35Ch] [ebp-50h] BYREF
  int v26; // [esp+360h] [ebp-4Ch] BYREF
  int v27; // [esp+364h] [ebp-48h] BYREF
  int v28; // [esp+368h] [ebp-44h] BYREF
  int v29; // [esp+36Ch] [ebp-40h] BYREF
  int v30; // [esp+370h] [ebp-3Ch] BYREF
  int v31; // [esp+374h] [ebp-38h]
  unsigned int v32; // [esp+378h] [ebp-34h] BYREF
  int v33; // [esp+37Ch] [ebp-30h] BYREF
  unsigned int v34; // [esp+380h] [ebp-2Ch] BYREF
  int v35; // [esp+384h] [ebp-28h] BYREF
  int v36; // [esp+388h] [ebp-24h] BYREF
  ENUMRESNAMEPROCW lpEnumFunc; // [esp+38Ch] [ebp-20h] BYREF
  SIZE_T dwInitialSize; // [esp+390h] [ebp-1Ch] BYREF
  HMODULE hModule; // [esp+394h] [ebp-18h]
  SIZE_T dwMaximumSize; // [esp+398h] [ebp-14h]
  _DWORD *v41; // [esp+39Ch] [ebp-10h]
  DWORD lReadTimeout; // [esp+3A0h] [ebp-Ch]
  _DWORD *v43; // [esp+3A4h] [ebp-8h]
  int v44; // [esp+3A8h] [ebp-4h] BYREF
  char *v45; // [esp+3B4h] [ebp+8h]

  v25 = 11015;
  v26 = 30006;
  v27 = 549991;
  v28 = 18023;
  v24[3] = &v25;
  v24[4] = &v26;
  v24[5] = &v27;
  v24[6] = &v28;
  *(_DWORD *)&tm.tmItalic = &dword_411671;
  dwMaximumSize = -4100;
  hModule = (HMODULE)-4099;
  for ( lReadTimeout = -4099; ; lReadTimeout = ((lReadTimeout ^ 0x352B) + 1) ^ 0x352B )
  {
    if ( hModule == (HMODULE)-4099 )
    {
      for ( i = 0; i < 0x12; ++i )
        ;
      sub_4055AA(a2, (int *)&dwInitialSize, &v30, &v32, &v29, &v35, &v36, &v33, &lpEnumFunc, &v34);
    }
    if ( v36 != -4099 && (!*(_DWORD *)(dwInitialSize + 24) || !*(_DWORD *)(dwInitialSize + 20)) )
    {
      dwMaximumSize = -4099;
      continue;
    }
    if ( v35 == -4099 || lReadTimeout == ((v34 - 9514) ^ 0x352B) || dwMaximumSize != -4100 )
      return 0;
    for ( j = 0; j < 0x1B; ++j )
      ;
    v4 = (lReadTimeout ^ 0x352B) + 9514;
    if ( v4 >= 5 )
      hModule = (HMODULE)-4100;
    v45 = a1 + 30002;
    if ( v4 >= *(_DWORD *)(dwInitialSize + 24) )
      return 0;
    CommTimeouts.ReadIntervalTimeout = (char *)&dword_411725 - (char *)&tm.tmInternalLeading;
    v5 = *((unsigned __int16 *)lpEnumFunc + v4);
    v6 = *(_DWORD *)(dwInitialSize + 20);
    tm.tmAveCharWidth += (LONG)&dword_411679 + (v6 > 0xFFFFEFFD);
    tm.tmAveCharWidth &= (unsigned int)&dword_411659;
    tm.tmAveCharWidth -= (LONG)&dword_4116E5;
    if ( v5 > v6 - 1 )
      return 0;
    a1 = v45 - 30002;
    v7 = v33;
    *(_BYTE *)off_41180D[55] |= 0x72u;
    v44 = 0;
    dword_4116C5 -= (int)&tm.tmAscent;
    v8 = *(unsigned __int16 *)((char *)lpEnumFunc + v4 * ((v7 ^ 0x352B) + 9514));
    dword_4116C9 ^= (unsigned int)&CommTimeouts.ReadTotalTimeoutConstant;
    dword_4116C9 += (int)&byte_4116E9;
    v31 = v8;
    v23 = &v44;
    v19 &= v18;
    dword_4116C1 = (__PAIR64__(dword_4116C1, 9514) - __PAIR64__((struct tagTEXTMETRICA *)&tm.tmDigitizedAspectX, &v23)) >> 32;
    dword_4116C1 &= (unsigned int)&byte_41171D;
    dword_4116C1 -= (int)&tm.tmDescent;
    ((void (__stdcall *)(int, int, int *))a1)(a3, a2 + *(_DWORD *)(v4 * ((v36 ^ 0x352B) + 9514) + v32), &v44);
    if ( v44 == 1 )
      break;
  }
  v9 = v30;
  v31 = a2 + *(_DWORD *)(v30 + 4 * v31);
  v43 = 0;
  if ( a4 )
  {
    for ( k = 28; k; --k )
    {
      if ( k == 40 )
        HeapCreate(0x617Fu, dwInitialSize, dwMaximumSize);
    }
    v41 = 0;
    v10 = (v35 ^ 0x352B) + 9514;
    v29 = a4 * v10;
    v43 = v24;
    if ( v16 == 23188 )
      *(_DWORD *)off_411875 = (__PAIR64__(*(_DWORD *)off_411875, v16) - __PAIR64__(v17, 23188)) >> 32;
    *(_BYTE *)off_41180D[43] += 73;
    v11 = v24;
    v12 = a4 * v10;
    do
    {
      v11 = (_DWORD *)((char *)v11 - 1);
      --v12;
    }
    while ( v12 );
    v41 = v11;
    CommTimeouts.ReadTotalTimeoutMultiplier = LOWORD(CommTimeouts.ReadTotalTimeoutMultiplier) - dword_411725;
    v13 = a4;
    v9 = 0;
    v14 = &a4;
    do
    {
      ++v14;
      *(_DWORD *)&tm.tmCharSet += 30925;
      *(_DWORD *)((char *)v41 + v9) = *v14;
      v9 += v10;
      --v13;
    }
    while ( v13 );
  }
  else
  {
    v43 = 0;
  }
  dword_411739 -= (int)&dword_4116C5;
  dword_411739 &= (unsigned int)&dword_411679;
  dword_411739 += (int)&tm.tmDescent;
  return ((int (__thiscall *)(int))v31)(v9);
}
// 406978: conditional instruction was optimized away because %var_100.4<12u
// 406A90: conditional instruction was optimized away because %var_188.4<1Bu
// 406B80: variable 'v18' is possibly undefined
// 406B80: variable 'v19' is possibly undefined
// 406D0B: variable 'v16' is possibly undefined
// 406D3F: variable 'v17' is possibly undefined
// 411655: using guessed type int dword_411655;
// 411659: using guessed type int dword_411659;
// 411671: using guessed type int dword_411671;
// 411679: using guessed type int dword_411679;
// 4116C1: using guessed type int dword_4116C1;
// 4116C5: using guessed type int dword_4116C5;
// 4116C9: using guessed type int dword_4116C9;
// 4116E5: using guessed type int dword_4116E5;
// 4116E9: using guessed type char byte_4116E9;
// 41171D: using guessed type char byte_41171D;
// 411725: using guessed type int dword_411725;
// 411739: using guessed type int dword_411739;
// 41180D: using guessed type int *off_41180D[4];
// 411875: using guessed type void *off_411875;

//----- (00406E0C) --------------------------------------------------------
int sub_406E0C()
{
  int v0; // eax
  unsigned int v1; // edx
  int v2; // eax
  PALETTEENTRY *v3; // edx
  int DialogParamA; // eax
  int v5; // ecx
  _DWORD *v6; // eax
  bool v7; // cf
  int m; // ecx
  int *v9; // eax
  int v10; // ebx
  int n; // eax
  unsigned int v13; // [esp+0h] [ebp-4B0h]
  int v14; // [esp+88h] [ebp-428h]
  int v15; // [esp+A8h] [ebp-408h]
  int v16; // [esp+E0h] [ebp-3D0h]
  char v17; // [esp+E4h] [ebp-3CCh]
  unsigned __int8 v18; // [esp+E4h] [ebp-3CCh]
  int v19; // [esp+F0h] [ebp-3C0h]
  int v20; // [esp+194h] [ebp-31Ch]
  int v21; // [esp+1B0h] [ebp-300h]
  int v22; // [esp+1B4h] [ebp-2FCh]
  int v23; // [esp+1B8h] [ebp-2F8h]
  int v24; // [esp+1D4h] [ebp-2DCh]
  int v25; // [esp+1E0h] [ebp-2D0h]
  int v26; // [esp+1E8h] [ebp-2C8h]
  unsigned int v27; // [esp+204h] [ebp-2ACh]
  unsigned __int8 v28; // [esp+208h] [ebp-2A8h]
  unsigned __int16 v29; // [esp+20Ch] [ebp-2A4h]
  int v30; // [esp+2F0h] [ebp-1C0h]
  int v31; // [esp+31Ch] [ebp-194h]
  unsigned __int16 v32; // [esp+328h] [ebp-188h]
  int k; // [esp+368h] [ebp-148h]
  unsigned int v34; // [esp+3B0h] [ebp-100h]
  unsigned int v35; // [esp+3B8h] [ebp-F8h]
  unsigned int ii; // [esp+3C8h] [ebp-E8h]
  unsigned int i; // [esp+3F4h] [ebp-BCh]
  int v38[4]; // [esp+45Ch] [ebp-54h]
  int v39; // [esp+46Ch] [ebp-44h] BYREF
  int v40; // [esp+470h] [ebp-40h] BYREF
  int v41; // [esp+474h] [ebp-3Ch] BYREF
  int v42; // [esp+478h] [ebp-38h] BYREF
  int v43; // [esp+47Ch] [ebp-34h]
  int v44; // [esp+480h] [ebp-30h]
  int v45; // [esp+484h] [ebp-2Ch]
  LPARAM dwInitParam; // [esp+488h] [ebp-28h]
  PALETTEENTRY *pPalEntries; // [esp+48Ch] [ebp-24h]
  int index; // [esp+490h] [ebp-20h]
  int v49; // [esp+494h] [ebp-1Ch]
  int v50; // [esp+498h] [ebp-18h]
  int v51; // [esp+49Ch] [ebp-14h]
  int v52; // [esp+4A0h] [ebp-10h]
  int j; // [esp+4A4h] [ebp-Ch]
  int v54; // [esp+4A8h] [ebp-8h]
  char v55; // [esp+4AFh] [ebp-1h]

  for ( i = 0; i < 0x17; ++i )
    ;
  v49 = -4100;
  index = -4099;
  v43 = 0;
  tm.tmWeight -= (LONG)&dword_4116F9;
  if ( sub_407978() )
  {
    sub_406773();
    v0 = v49;
    *off_4118A9[0] = (__PAIR64__(*off_4118A9[0], v27) - __PAIR64__(v28, 13611)) >> 32;
    dwInitParam = (v0 ^ 0x352B) + 9514;
    v50 = -4565;
    v1 = *off_4118A1[0];
    dword_4116F5 ^= *off_4118A1[0];
    v49 = -4100;
    v54 = -4099;
    v51 = -4100;
    pPalEntries = (PALETTEENTRY *)dword_40B2D4;
    dword_41172D += v29 + (dword_4116C1 < v1);
    v55 = 0;
    v52 = -4100;
    v39 = 10785;
    v40 = 6498870;
    v41 = 8590439;
    v18 = v17 ^ 0x65;
    v42 = 210535;
    v38[0] = (int)&v39;
    v38[1] = (int)&v40;
    v38[2] = (int)&v41;
    v38[3] = (int)&v42;
    v2 = -4099;
    v43 = (dword_40B2D8 - 9514) ^ 0x352B;
    if ( -4099 != v43 )
    {
      do
      {
        if ( __SETP__(v14, 22679) )
          v15 |= 0x3976u;
        else
          v30 = *off_4118B1 ^ (unsigned __int8)v30;
        v3 = pPalEntries;
        *(_DWORD *)&tm.tmFirstChar &= dword_411641;
        v44 = v2 ^ 0x352B;
        DialogParamA = (v2 ^ 0x352B) + 9514;
        dword_411659 ^= dword_411679;
        v5 = DialogParamA * ((v52 ^ 0x352B) + 9514);
        v35 = 0;
        do
        {
          if ( ++v35 == 24 )
            DialogParamA = (int)CreateDialogParamA(
                                  (HINSTANCE)pPalEntries,
                                  TableName,
                                  (HWND)0x8112,
                                  (DLGPROC)0x3B46,
                                  dwInitParam);
        }
        while ( v35 < 0x17 );
        v55 = *(&v3->peRed + v5);
        if ( v20 >= 32945 )
          v24 += *off_41182D[0] + ((unsigned int)v20 < 0x80B1);
        else
          v21 -= *off_411831[0];
        v19 ^= v16;
        v45 = DialogParamA;
        *(&v3->peRed + DialogParamA * ((v52 ^ 0x352B) + 9514)) = (v54 ^ 0x2B) + 42;
        v34 = (__PAIR64__(v34, 9514) - ((unsigned int)dword_4116BD | 0x412B00000000i64)) >> 32;
        for ( j = 1; j != 11; ++j )
        {
          v18 = __ROL4__(v18, 1);
          v6 = (_DWORD *)v38[j & 3];
          *v6 += (j - 9514) ^ 0x352B;
        }
        v7 = __CFADD__(v31, v32);
        v32 += v31;
        v23 += v22 + v7;
        v55 = v55 - (v50 ^ 0x2B) - 42;
        v13 = (__PAIR64__(v13, (unsigned int)v3) - __PAIR64__(*off_4118DD[0], dword_411665)) >> 32;
        if ( dwInitParam == (v54 ^ 0x352B) + 9514 )
        {
          for ( k = 18; k; --k )
          {
            if ( k == 22 )
              GetDeviceCaps((HDC)0x49CA, index);
          }
          v32 = 24535;
          v55 += (v50 ^ 0x2B) + 42;
          v55 = (v55 ^ 0x5B) + 45;
        }
        else
        {
          for ( m = 1; m != 11; ++m )
          {
            v9 = (int *)v38[m & 3];
            CommTimeouts.ReadIntervalTimeout -= (DWORD)&dword_4116C1;
            CommTimeouts.ReadIntervalTimeout ^= (unsigned int)&unk_4116B5;
            v10 = *v9 * ((m - 9514) ^ 0x352B);
            *v9 = v10;
          }
          for ( n = v54; n != v49; n = ((v51 ^ 0x352B) + (n ^ 0x352B) + 9514) ^ 0x352B )
            v55 = __ROR1__(v55, (v51 ^ 0x2B) + 42);
        }
        *(&v3->peRed + v45 * ((v52 ^ 0x352B) + 9514)) ^= v55;
        LOBYTE(v30) = v30 ^ 0x53;
        v26 -= v25;
        v2 = ((v51 ^ 0x352B) + v44 + 9514) ^ 0x352B;
        for ( ii = 0; ii < 0x1C; ++ii )
          ;
      }
      while ( v2 - v43 != (v54 ^ 0x352B) + 9514 );
    }
  }
  return (index ^ 0x352B) + 9514;
}
// 406E53: conditional instruction was optimized away because %var_BC.4<17u
// 4074D2: conditional instruction was optimized away because %var_E8.4<1Cu
// 406F64: variable 'v27' is possibly undefined
// 406F5C: variable 'v28' is possibly undefined
// 406FAF: variable 'v29' is possibly undefined
// 40704E: variable 'v17' is possibly undefined
// 4070F0: variable 'v14' is possibly undefined
// 40710F: variable 'v15' is possibly undefined
// 407121: variable 'v30' is possibly undefined
// 4071D0: variable 'v5' is possibly undefined
// 4071D0: variable 'v3' is possibly undefined
// 4071E1: variable 'v20' is possibly undefined
// 4071EF: variable 'v21' is possibly undefined
// 407203: variable 'v24' is possibly undefined
// 407226: variable 'v16' is possibly undefined
// 407226: variable 'v19' is possibly undefined
// 407261: variable 'v34' is possibly undefined
// 4072B9: variable 'v31' is possibly undefined
// 4072B1: variable 'v32' is possibly undefined
// 4072E8: variable 'v22' is possibly undefined
// 4072E1: variable 'v23' is possibly undefined
// 40730F: variable 'v13' is possibly undefined
// 40748E: variable 'v26' is possibly undefined
// 40748E: variable 'v25' is possibly undefined
// 40B2D4: using guessed type int dword_40B2D4;
// 40B2D8: using guessed type int dword_40B2D8;
// 411641: using guessed type int dword_411641;
// 411659: using guessed type int dword_411659;
// 411665: using guessed type int dword_411665;
// 411679: using guessed type int dword_411679;
// 4116BD: using guessed type int dword_4116BD;
// 4116C1: using guessed type int dword_4116C1;
// 4116D1: using guessed type int dword_4116D1;
// 4116F5: using guessed type int dword_4116F5;
// 4116F9: using guessed type int dword_4116F9;
// 41172D: using guessed type int dword_41172D;
// 41180D: using guessed type int *off_41180D[4];
// 41182D: using guessed type int *off_41182D[7];
// 411831: using guessed type int *off_411831[6];
// 4118A1: using guessed type int *off_4118A1[5];
// 4118A9: using guessed type int *off_4118A9[3];
// 4118B1: using guessed type int *off_4118B1;
// 4118DD: using guessed type int *off_4118DD[3];

//----- (00407567) --------------------------------------------------------
int __usercall sub_407567@<eax>(_DWORD *a1@<eax>)
{
  int result; // eax

  dword_40B528 = (int)(a1 + 1);
  dword_40B51C = a1[2];
  dword_40B520 = a1[3];
  result = a1[4];
  dword_40B524 = result;
  return result;
}
// 40B51C: using guessed type int dword_40B51C;
// 40B520: using guessed type int dword_40B520;
// 40B524: using guessed type int dword_40B524;
// 40B528: using guessed type int dword_40B528;

//----- (0040758B) --------------------------------------------------------
int __stdcall sub_40758B(int a1, int a2)
{
  HRESULT v2; // eax
  int result; // eax
  int v4; // [esp+80h] [ebp-1A8h]
  unsigned int v5; // [esp+144h] [ebp-E4h]
  unsigned int v6; // [esp+1A0h] [ebp-88h]
  int v7; // [esp+1ECh] [ebp-3Ch]
  __int16 v8[2]; // [esp+1FCh] [ebp-2Ch] BYREF
  PTIMERAPCROUTINE pfnCompletionRoutine; // [esp+200h] [ebp-28h]
  LPVOID lpArgToCompletionRoutine; // [esp+204h] [ebp-24h]
  __int16 v11; // [esp+208h] [ebp-20h]
  __int16 v12; // [esp+20Ah] [ebp-1Eh]
  __int16 v13; // [esp+20Ch] [ebp-1Ch]
  __int16 v14; // [esp+20Eh] [ebp-1Ah]
  HANDLE hTimer; // [esp+210h] [ebp-18h]
  __int16 v16; // [esp+214h] [ebp-14h]
  __int16 v17; // [esp+216h] [ebp-12h]
  __int16 v18; // [esp+218h] [ebp-10h]
  _BYTE v19[6]; // [esp+21Ah] [ebp-Eh]
  int v20; // [esp+220h] [ebp-8h]
  int v21; // [esp+224h] [ebp-4h]

  v2 = *(int *)((char *)&dword_40B458 + a2);
  v6 = 0;
  do
  {
    if ( ++v6 == 38 )
      v2 = PrintDlgExW(*(LPPRINTDLGEXW *)&v19[2]);
  }
  while ( v6 < 0x1F );
  v21 = -4099;
  v20 = (v2 ^ 0x352B) + 9514;
  dword_411739 ^= tm.tmCharSet;
  word_40B308[v20] = 0;
  v8[0] = -663;
  v8[1] = -259;
  pfnCompletionRoutine = (PTIMERAPCROUTINE)-17629853;
  lpArgToCompletionRoutine = (LPVOID)-17695470;
  v11 = -740;
  *off_4118C1[0] &= LOBYTE(CommTimeouts.ReadTotalTimeoutConstant);
  v12 = -272;
  dword_4116D9 |= *off_411835[0];
  v13 = -671;
  v14 = -265;
  hTimer = (HANDLE)-17367802;
  dword_411725 &= v4;
  v7 = *(int *)((char *)&off_40B454 + a1);
  v16 = -259;
  dword_4116C1 = (unsigned int)&dword_411655 & (&unk_411651 - (_UNKNOWN *)&tm.tmMaxCharWidth);
  v17 = -267;
  v18 = 5073;
  *(_DWORD *)v19 = -17427760;
  dword_4116D1 = (__PAIR64__(dword_4116D1, 65270)
                - __PAIR64__((struct tagTEXTMETRICA *)&tm.tmInternalLeading, dword_4116C5)) >> 32;
  off_40B568(off_40B56C, *off_40B2C4[3], v8, 3, word_40B308, v7);
  result = dword_40B508(word_40B308);
  if ( result != (*(int *)((char *)&dword_40B458 + a1) ^ 0x352B)
               + (*(int *)((char *)&dword_40B458 + a2) ^ 0x352B)
               + 19028 )
  {
    v5 = 0;
    do
    {
      if ( ++v5 == 33 )
        SetWaitableTimer(
          hTimer,
          (const LARGE_INTEGER *)0x7265,
          34339,
          pfnCompletionRoutine,
          lpArgToCompletionRoutine,
          0);
    }
    while ( v5 < 0x14 );
    *(_DWORD *)dword_40B494 = (v21 ^ 0x352B) + 9514;
    result = (v21 ^ 0x352B) + 9514;
    *off_40B2C4[3] = result;
  }
  return result;
}
// 40758B: could not find valid save-restore pair for ebx
// 40758B: could not find valid save-restore pair for edi
// 40758B: could not find valid save-restore pair for esi
// 4077D6: variable 'v4' is possibly undefined
// 40B2C4: using guessed type int **off_40B2C4;
// 40B308: using guessed type __int16 word_40B308[130];
// 40B454: using guessed type wchar_t *off_40B454;
// 40B458: using guessed type int dword_40B458;
// 40B494: using guessed type int dword_40B494;
// 40B508: using guessed type int (__cdecl *dword_40B508)(_DWORD);
// 40B568: using guessed type int (__cdecl *off_40B568)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 40B56C: using guessed type int (__stdcall *off_40B56C)(int, int, int);
// 411655: using guessed type int dword_411655;
// 411665: using guessed type int dword_411665;
// 4116C1: using guessed type int dword_4116C1;
// 4116C5: using guessed type int dword_4116C5;
// 4116D1: using guessed type int dword_4116D1;
// 4116D9: using guessed type int dword_4116D9;
// 411725: using guessed type int dword_411725;
// 411731: using guessed type int dword_411731;
// 411739: using guessed type int dword_411739;
// 41180D: using guessed type int *off_41180D[4];
// 411835: using guessed type int *off_411835[5];
// 4118C1: using guessed type int *off_4118C1[2];

//----- (00407978) --------------------------------------------------------
int sub_407978()
{
  int v0; // eax
  int v1; // esi
  bool v2; // zf
  int v3; // eax
  int v5; // [esp+8h] [ebp-44h]
  unsigned int i; // [esp+14h] [ebp-38h]
  int v7; // [esp+40h] [ebp-Ch]

  dword_411641 = v5 ^ (unsigned __int16)dword_411641;
  v0 = (int)*off_40B070;
  for ( i = 0; i < 0x13; ++i )
    ;
  v7 = (int)*off_40B074;
  dword_4116F5 = *(_DWORD *)off_411899 ^ (unsigned __int16)dword_4116F5;
  tm.tmHeight += 29539;
  dword_40B2D4 = v0;
  v1 = 4 - v0 + v7;
  v2 = v0 == 0;
  v3 = -4100;
  dword_40B2D8 = v1;
  if ( v2 )
    v3 = -4099;
  return (v3 ^ 0x352B) + 9514;
}
// 407A1B: conditional instruction was optimized away because %var_38.4<13u
// 4079E7: variable 'v5' is possibly undefined
// 40B070: using guessed type int (**off_40B070)[459];
// 40B074: using guessed type int (__stdcall **off_40B074)(int, int);
// 40B2D4: using guessed type int dword_40B2D4;
// 40B2D8: using guessed type int dword_40B2D8;
// 411641: using guessed type int dword_411641;
// 4116DD: using guessed type int dword_4116DD;
// 4116F5: using guessed type int dword_4116F5;
// 411899: using guessed type void *off_411899;
// 4118D1: using guessed type void *off_4118D1;

//----- (00407AAD) --------------------------------------------------------
int __usercall sub_407AAD@<eax>(struct tagRECT *a1@<ebx>)
{
  int v1; // eax
  int result; // eax
  int i; // edi
  int v4; // [esp+8h] [ebp-4Ch]
  int v5; // [esp+10h] [ebp-44h]
  int j; // [esp+1Ch] [ebp-38h]
  int v7; // [esp+40h] [ebp-14h]
  int v8; // [esp+44h] [ebp-10h]
  int *v9; // [esp+48h] [ebp-Ch]
  int v10; // [esp+4Ch] [ebp-8h] BYREF
  int v11; // [esp+50h] [ebp-4h] BYREF
  void *retaddr; // [esp+58h] [ebp+4h] BYREF

  v11 = 183088;
  v9 = &v11;
  v8 = -4100;
  v7 = -4105;
  v1 = (int)*off_40B050;
  *(_DWORD *)&tm.tmItalic -= &CommTimeouts.ReadTotalTimeoutConstant;
  *(_DWORD *)&tm.tmItalic |= (unsigned int)&dword_4116D9;
  *(_DWORD *)&tm.tmItalic += &CommTimeouts.WriteTotalTimeoutConstant;
  v10 = v1;
  dword_40B474 = 0;
  result = sub_404A3A(a1);
  if ( result )
  {
    for ( i = -4368; i != -4100; i = ((i ^ 0x352B) - (v8 ^ 0x352B) - 9514) ^ 0x352B )
    {
      switch ( i )
      {
        case -4131:
          dword_40B474 = (int)&retaddr;
          break;
        case -4109:
          for ( j = 23; j; --j )
          {
            if ( j == 28 )
              GetPixel((HDC)0x7E75, 18100, 30308);
          }
          if ( !dword_40B474 )
          {
LABEL_15:
            v11 |= *v9 - 333057 * v11;
            break;
          }
          v5 = 1;
          *(_DWORD *)dword_40B474 += dword_40B0F0;
          break;
        case -4547:
          dword_40B2FC = dword_40B488;
          v4 -= *off_411831[0];
          dword_40B300 = dword_40B48C;
          dword_40B304 = dword_40B490;
          dword_40B2F8 = (int)&v10;
          *(_DWORD *)dword_40B494 = sub_405402(0xFFFFEE3D);
          break;
        default:
          goto LABEL_15;
      }
      result = v8 ^ 0x352B;
      dword_411731 ^= (unsigned int)&dword_411659;
    }
  }
  return result;
}
// 40B050: using guessed type void ***off_40B050;
// 40B0F0: using guessed type int dword_40B0F0;
// 40B2F8: using guessed type int dword_40B2F8;
// 40B2FC: using guessed type int dword_40B2FC;
// 40B300: using guessed type int dword_40B300;
// 40B304: using guessed type int dword_40B304;
// 40B474: using guessed type int dword_40B474;
// 40B488: using guessed type int dword_40B488;
// 40B48C: using guessed type int dword_40B48C;
// 40B490: using guessed type int dword_40B490;
// 40B494: using guessed type int dword_40B494;
// 411659: using guessed type int dword_411659;
// 41165D: using guessed type int dword_41165D;
// 4116D9: using guessed type int dword_4116D9;
// 4116F5: using guessed type int dword_4116F5;
// 411731: using guessed type int dword_411731;
// 411831: using guessed type int *off_411831[6];

// nfuncs=28 queued=27 decompiled=27 lumina nreq=0 worse=0 better=0
// ALL OK, 27 function(s) have been successfully decompiled
