/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int@<eax>, char *@<edx>, int@<ecx>, int@<ebx>, int@<ebp>, int@<edi>, int@<esi>);

//-------------------------------------------------------------------------
// Data declarations

int dword_414000[512] =
{
  -1876295519,
  88416000,
  1162546276,
  -174,
  1279610623,
  1143878195,
  603999308,
  -1411519789,
  1981763997,
  -1633761577,
  -640883162,
  1235078137,
  -591415513,
  316666058,
  366932652,
  -697166515,
  2122720800,
  1795162103,
  -539532959,
  1570602653,
  -849600545,
  533461199,
  636267892,
  -86379425,
  -192821,
  -855588817,
  85169781,
  -1628712808,
  1752538229,
  -693930555,
  260419774,
  -1925876211,
  460071005,
  539902386,
  -80846434,
  487258891,
  319854170,
  277023757,
  1798041664,
  -871110879,
  -1229317357,
  165411709,
  1979752025,
  1476693026,
  274927131,
  -1532080439,
  253117161,
  -1706423081,
  231762219,
  -1833327411,
  198052582,
  1085908177,
  -771159890,
  -1368839270,
  -637030394,
  1256624825,
  554028036,
  -928731543,
  1605803522,
  -836237064,
  881343350,
  1682367222,
  -2135356773,
  359657708,
  1659593070,
  1354406489,
  -537375223,
  1073368701,
  -569047162,
  -1738138198,
  1566022890,
  48553871,
  -925220679,
  194021776,
  -1191127073,
  -1397936576,
  239122696,
  -607661358,
  -1953784609,
  979261543,
  160085878,
  -542237929,
  96998260,
  -546775314,
  628357910,
  -102984243,
  1574066141,
  1541066569,
  -765994005,
  383262813,
  -853157396,
  -408914795,
  1557317846,
  -2657463,
  1552020180,
  -757770464,
  2001296593,
  -790948141,
  -469122330,
  1758550165,
  -123705138,
  -2080339999,
  -1859427890,
  -1181937290,
  -1669781952,
  -1862804814,
  -335354869,
  1085866747,
  787152174,
  -236713072,
  -1352603668,
  -671364380,
  1962778356,
  -153911792,
  402005724,
  125635904,
  -2072866963,
  502656413,
  659563682,
  -1790976616,
  -1709469346,
  -1503551841,
  1926707050,
  -266314623,
  -938008328,
  -1781862139,
  -144932495,
  -2095512082,
  -1495676921,
  -1935904664,
  -279120063,
  -2069231927,
  -1831798625,
  -81080624,
  353067283,
  603388920,
  513272826,
  -353489885,
  535565464,
  55160312,
  368757192,
  -401396821,
  1687876782,
  784920161,
  968258504,
  568456723,
  589165931,
  -873770054,
  -31158506,
  -512231913,
  2121709568,
  -1795769455,
  -344570315,
  1802199275,
  -770142552,
  -490181586,
  599529799,
  370643477,
  1314992448,
  938874126,
  -890367040,
  110127592,
  -750642031,
  -326221679,
  -569162971,
  617540250,
  -1836347249,
  -1939566340,
  1892893095,
  -2076596540,
  -1819989475,
  1116991472,
  1998720894,
  -1695617673,
  -1580711022,
  -1843555661,
  551048569,
  529914600,
  67662404,
  -1631677547,
  1876033520,
  -1629314303,
  -1045127447,
  785585088,
  -1616447793,
  -635722951,
  -1775365142,
  -929237809,
  -469004048,
  49998338,
  -231849799,
  -2139748878,
  1527284561,
  -938008483,
  -1392048631,
  -2095556695,
  1455592463,
  1257148985,
  -809185638,
  -1368790762,
  768392100,
  -420753969,
  -903112118,
  -1532048389,
  -924020039,
  -1875981849,
  -959616725,
  1256459207,
  -991051750,
  -1339117934,
  1925357765,
  48431859,
  868271033,
  -509301143,
  -17296447,
  -1875984143,
  -1979908309,
  -1146835392,
  -83892739,
  -1146835392,
  -117995013,
  -1157438720,
  1257688825,
  -403425129,
  -126431282,
  1847131030,
  -5837213,
  321311543,
  1604673999,
  1554356970,
  -619354133,
  -37802902,
  -695272357,
  1603368543,
  -1775660636,
  -992774369,
  -346581714,
  1120606066,
  354054143,
  1453171414,
  -1997577736,
  1683034616,
  -151032035,
  664428287,
  -598984566,
  1316839199,
  -559979124,
  -345844057,
  -345635740,
  394114923,
  -1253173761,
  1679780555,
  -1645359202,
  1031632350,
  30104442,
  -1775224888,
  741657383,
  -302762114,
  1123229174,
  -1773796458,
  -610450888,
  1366738758,
  460307353,
  -1136261555,
  -847642046,
  399047286,
  1974679491,
  -1013089554,
  293475342,
  -1622790708,
  1804777462,
  1194290224,
  -1226959454,
  -1186242659,
  1926984909,
  289363486,
  -515880436,
  215103085,
  38620700,
  411727438,
  -138776859,
  219176683,
  584804807,
  -147162363,
  1318814134,
  -2019723942,
  562993680,
  -1679893042,
  -361346558,
  -1972038014,
  -624556256,
  406480635,
  -2123781802,
  -1731496790,
  -1893066277,
  1148112395,
  -875614322,
  1848368118,
  -1011190166,
  -1374444859,
  -976032403,
  296095622,
  -561904350,
  -457313258,
  -1677062797,
  1785829458,
  1852754988,
  397317034,
  -1791387937,
  1600183339,
  -577203912,
  1474229384,
  2143234667,
  -782057070,
  533386517,
  1335780957,
  -478434422,
  -1381302351,
  -165236820,
  166589431,
  54891973,
  -1077065963,
  -1623692810,
  1313250099,
  230411990,
  -1228146993,
  -816013962,
  1215438798,
  -1687918327,
  -1459152767,
  -1176325683,
  1418588853,
  1792259442,
  -1653208659,
  1529561086,
  -1257606588,
  -1686692522,
  393714776,
  -810049580,
  1653525614,
  1972345045,
  -1902391378,
  -60065003,
  -343220798,
  -1832053430,
  -865530467,
  -1279058314,
  379283165,
  -1162735466,
  -75492657,
  -948145108,
  -675914467,
  1450070677,
  -269837441,
  -1212008905,
  -1591080376,
  -552952488,
  124526077,
  -1443481880,
  1982804621,
  301380601,
  -850337865,
  1375919357,
  1654000213,
  -289745643,
  -974946591,
  1486755159,
  -560007538,
  310215969,
  239822716,
  732837470,
  165214814,
  -166514960,
  1210397586,
  1099962651,
  -1715588482,
  -168681665,
  1685866783,
  -1745461886,
  398933742,
  567804883,
  426328713,
  -1924782954,
  -1524351856,
  1680969611,
  1588731466,
  -1634206941,
  628507482,
  1451662983,
  -1864068537,
  -1742812852,
  -2062768094,
  649059327,
  -143313545,
  1914030941,
  -849192419,
  -2081568312,
  1343587725,
  514976363,
  220273842,
  -1642199631,
  -923684508,
  1772428633,
  -551604319,
  1199912514,
  1988654442,
  -610577808,
  1994230653,
  -1608710519,
  964061418,
  -1830483553,
  -793727990,
  -330532254,
  1212521820,
  -1735997336,
  963008616,
  929078116,
  -1280513213,
  -1864853797,
  -1663163952,
  877051663,
  -1419974584,
  -2069444594,
  1986158302,
  -1721000868,
  -2033682785,
  -815965852,
  -1112894755,
  38839730,
  1658545573,
  -1866316839,
  1756802374,
  -920550933,
  -317798378,
  -450965874,
  258224707,
  278324125,
  596008427,
  -1965274268,
  -381401327,
  360199687,
  697443917,
  -1080148475,
  -1517355971,
  -649488763,
  -359476315,
  1537865948,
  745368417,
  1831232154,
  1874660543,
  1566273520,
  -127532392,
  -1855882977,
  1771229944,
  -1109693106,
  1868963265,
  -2086298215,
  -1675523681,
  -1237858263,
  1195678894,
  -1709598129,
  1499326870,
  -2103090976,
  1704125293,
  -429006973,
  -1832550250,
  -2087939352,
  -1518151659,
  -151598292,
  1636494169,
  -2032660043,
  -1971155451,
  -1074384369,
  362313150,
  -345201240,
  -124894143,
  1558136594,
  2114088944,
  -1201794824,
  156994325,
  -1362356897,
  1851777629,
  353604098,
  -1383328444,
  1300147550,
  -536889365,
  329668542,
  -1867795732,
  1335552021,
  1602581879,
  871930201,
  -1343422548,
  -1766326501,
  -1645616124,
  524385821,
  -1043808167,
  -1930074467,
  2145060590,
  -1813266523,
  579831516,
  -1843784499,
  -1022484208,
  -1025788123,
  535186456,
  -2032835683,
  1939717817,
  1827680127,
  -1137451147,
  1903039944,
  1630704245,
  -1687177390,
  1897864718
}; // weak


//----- (00417AE0) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(
        int a1@<eax>,
        char *a2@<edx>,
        int a3@<ecx>,
        int a4@<ebx>,
        int a5@<ebp>,
        int a6@<edi>,
        int a7@<esi>)
{
  int *v7; // esi
  int *v8; // edi
  unsigned int v9; // ebp
  char v10; // al
  bool v11; // cf
  int v12; // ebx
  int v13; // ebx
  int v14; // ett
  unsigned int v15; // eax
  bool v16; // cf
  int v17; // ebx
  int v18; // ebx
  int v19; // ett
  bool v20; // zf
  int v21; // ebx
  int v22; // ett
  int v23; // ecx
  unsigned int v24; // eax
  unsigned int v25; // eax
  int v26; // eax
  bool v27; // cf
  int v28; // ebx
  int v29; // ebx
  int v30; // ett
  BOOL v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  int v35; // ecx
  int v36; // ecx
  bool v37; // cf
  int v38; // ebx
  int v39; // ebx
  int v40; // ett
  bool v41; // zf
  int v42; // ebx
  int v43; // ett
  unsigned int v44; // ecx
  char v45; // al
  int v46; // eax
  bool v47; // cc
  int *v48; // esi
  char *v49; // edi
  int v50; // eax
  int *v51; // ebx
  int v52; // ebp
  char v53; // al
  char *v54; // ecx
  unsigned __int8 v55; // al
  int v56; // eax
  void (__fastcall *v57)(int, char *, int *, int, int, int *); // ebp
  int *v58; // edi
  int v59[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v60; // [esp+2Ch] [ebp-80h] BYREF
  int v61; // [esp+30h] [ebp-7Ch] BYREF
  char *v62; // [esp+34h] [ebp-78h]
  int *v63; // [esp+38h] [ebp-74h]
  int v64; // [esp+3Ch] [ebp-70h]
  char *v65; // [esp+40h] [ebp-6Ch]
  int v66; // [esp+44h] [ebp-68h]
  int v67; // [esp+48h] [ebp-64h]
  int *v68; // [esp+4Ch] [ebp-60h]
  int v69; // [esp+50h] [ebp-5Ch]
  int v70; // [esp+54h] [ebp-58h]
  int v71; // [esp+58h] [ebp-54h]
  int v72; // [esp+5Ch] [ebp-50h] BYREF

  v71 = a7;
  v70 = a6;
  v69 = a5;
  v68 = &v72;
  v67 = a4;
  v66 = a3;
  v65 = a2;
  v64 = a1;
  v7 = dword_414000;
  v8 = &dword_414000[-19456];
  v63 = &dword_414000[-19456];
  v9 = -1;
  while ( 1 )
  {
    v13 = *v7;
    v11 = (unsigned int)v7++ < 0xFFFFFFFC;
    v14 = v11 + v13;
    v11 = __CFADD__(v11, v13) | __CFADD__(v13, v14);
    v12 = v13 + v14;
    do
    {
      if ( v11 )
      {
        v10 = *(_BYTE *)v7;
        v7 = (int *)((char *)v7 + 1);
        *(_BYTE *)v8 = v10;
        v8 = (int *)((char *)v8 + 1);
      }
      else
      {
        v15 = 1;
        while ( 1 )
        {
          v16 = __CFADD__(v12, v12);
          v17 = 2 * v12;
          if ( !v17 )
          {
            v18 = *v7;
            v11 = (unsigned int)v7++ < 0xFFFFFFFC;
            v19 = v11 + v18;
            v16 = __CFADD__(v11, v18) | __CFADD__(v18, v19);
            v17 = v18 + v19;
          }
          v15 += v16 + v15;
          v11 = __CFADD__(v17, v17);
          v20 = 2 * v17 == 0;
          v12 = 2 * v17;
          if ( v11 )
          {
            if ( !v20 )
              break;
            v21 = *v7;
            v11 = (unsigned int)v7++ < 0xFFFFFFFC;
            v22 = v11 + v21;
            v11 = __CFADD__(v11, v21) | __CFADD__(v21, v22);
            v12 = v21 + v22;
            if ( v11 )
              break;
          }
        }
        v23 = 0;
        v11 = v15 < 3;
        v24 = v15 - 3;
        if ( !v11 )
        {
          v25 = v24 << 8;
          LOBYTE(v25) = *(_BYTE *)v7;
          v7 = (int *)((char *)v7 + 1);
          v26 = ~v25;
          if ( !v26 )
          {
            v48 = v63;
            v49 = (char *)(v63 + 21504);
LABEL_33:
            v50 = *(_DWORD *)v49;
            if ( *(_DWORD *)v49 )
            {
              v51 = (int *)((char *)v48 + *((_DWORD *)v49 + 1));
              v49 += 8;
              v52 = ((int (__fastcall *)(int, char *, int, int, char *, int, int, int *, int, int, int))v48[26125])(
                      v23,
                      a2,
                      (int)v48 + v50 + 104300,
                      v64,
                      v65,
                      v66,
                      v67,
                      v68,
                      v69,
                      v70,
                      v71);
              while ( 1 )
              {
                v53 = *v49++;
                if ( !v53 )
                  goto LABEL_33;
                v54 = v49;
                v62 = v49;
                v55 = v53 - 1;
                do
                {
                  if ( !v54 )
                    break;
                  v20 = *v49++ == (char)v55;
                  --v54;
                }
                while ( !v20 );
                v56 = ((int (__cdecl *)(int, char *))v48[26126])(v52, v62);
                if ( !v56 )
                  break;
                *v51++ = v56;
              }
              v50 = ((int (*)(void))v48[26130])();
            }
            v57 = (void (__fastcall *)(int, char *, int *, int, int, int *))v48[26127];
            v58 = v48 - 1024;
            v60 = v50;
            v57(v23, a2, v48 - 1024, 4096, 4, &v60);
            *((_BYTE *)v58 + 479) &= ~0x80u;
            *((_BYTE *)v58 + 519) &= ~0x80u;
            ((void (__cdecl *)(int *, int, int, int *))v57)(v48 - 1024, 4096, v59[0], v59);
            do
              v60 = 0;
            while ( &v60 != &v61 - 32 );
            JUMPOUT(0x40FEB4);
          }
          v9 = v26;
        }
        v27 = __CFADD__(v12, v12);
        v28 = 2 * v12;
        if ( !v28 )
        {
          v29 = *v7;
          v11 = (unsigned int)v7++ < 0xFFFFFFFC;
          v30 = v11 + v29;
          v27 = __CFADD__(v11, v29) | __CFADD__(v29, v30);
          v28 = v29 + v30;
        }
        v31 = v27;
        v32 = __CFADD__(v28, v28);
        v12 = 2 * v28;
        if ( !v12 )
        {
          v33 = *v7;
          v11 = (unsigned int)v7++ < 0xFFFFFFFC;
          v34 = v11 + v33;
          v32 = __CFADD__(v11, v33) | __CFADD__(v33, v34);
          v12 = v33 + v34;
        }
        v35 = v31 + v32 + v31;
        if ( !v35 )
        {
          v36 = 1;
          while ( 1 )
          {
            v37 = __CFADD__(v12, v12);
            v38 = 2 * v12;
            if ( !v38 )
            {
              v39 = *v7;
              v11 = (unsigned int)v7++ < 0xFFFFFFFC;
              v40 = v11 + v39;
              v37 = __CFADD__(v11, v39) | __CFADD__(v39, v40);
              v38 = v39 + v40;
            }
            v36 += v37 + v36;
            v11 = __CFADD__(v38, v38);
            v41 = 2 * v38 == 0;
            v12 = 2 * v38;
            if ( v11 )
            {
              if ( !v41 )
                break;
              v42 = *v7;
              v11 = (unsigned int)v7++ < 0xFFFFFFFC;
              v43 = v11 + v42;
              v11 = __CFADD__(v11, v42) | __CFADD__(v42, v43);
              v12 = v42 + v43;
              if ( v11 )
                break;
            }
          }
          v35 = v36 + 2;
        }
        v44 = (v9 < 0xFFFFF300) + v35 + 1;
        a2 = (char *)v8 + v9;
        if ( v9 <= 0xFFFFFFFC )
        {
          do
          {
            v46 = *(_DWORD *)a2;
            a2 += 4;
            *v8++ = v46;
            v47 = v44 <= 4;
            v44 -= 4;
          }
          while ( !v47 );
          v8 = (int *)((char *)v8 + v44);
        }
        else
        {
          do
          {
            v45 = *a2++;
            *(_BYTE *)v8 = v45;
            v8 = (int *)((char *)v8 + 1);
            --v44;
          }
          while ( v44 );
        }
      }
      v11 = __CFADD__(v12, v12);
      v12 *= 2;
    }
    while ( v12 );
  }
}
// 417C38: positive sp value 50 has been found
// 417C38: control flows out of bounds to 40FEB4
// 417BCF: variable 'v23' is possibly undefined
// 417BCF: variable 'a2' is possibly undefined
// 414000: using guessed type int dword_414000[512];
// 417AE0: using guessed type int anonymous_0[4];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
