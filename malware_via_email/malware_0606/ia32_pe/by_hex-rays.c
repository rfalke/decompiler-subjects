/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

_DWORD __far sub_40115E(); // weak
// int __usercall sub_40120B@<eax>(int@<edx>, int@<ecx>, char@<bl>);
_DWORD __far sub_401228(); // weak
void sub_401264();
// void __usercall sub_401290(int@<edx>, __int32@<ecx>, char@<bl>);
// void __usercall __noreturn start(int _EAX@<eax>, int@<edx>, int@<ecx>, int@<ebx>, int@<edi>, int@<esi>);
void sub_401368();
_DWORD sub_4013ED(); // weak
void sub_401422();
_DWORD nullsub_1(); // weak
// void __userpurge sub_4021DB(int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
void sub_4022BE();
// void __usercall sub_4022DF(int@<edx>, int@<ecx>, int@<ebx>, int@<esi>);
// void __usercall sub_4023B4(char@<al>, unsigned __int8@<ch>, int@<ebx>, int@<esi>);
void sub_40243B();
void __noreturn sub_402517(); // weak
// int __usercall sub_40258A@<eax>(__int32@<ecx>, char@<bh>);
void sub_4025A4();
void __noreturn sub_402800(); // weak
// void __usercall sub_40293E(unsigned int@<eax>, unsigned __int32@<edx>, unsigned __int32@<ecx>, __int16@<si>);
// void __usercall sub_402964(char@<dl>, __int16@<cx>, _BYTE *@<ebx>);
// void __userpurge sub_4029C5(__int32@<ecx>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
// void __userpurge sub_402A3E(int@<ecx>, int@<ebx>, int@<esi>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
// void __usercall __noreturn sub_402A75(int@<eax>, int _EDX@<edx>, int@<esi>);
void sub_402AFA();
// void __usercall sub_402BC3(int@<eax>, int@<edx>, int@<ecx>, int@<ebx>);
// void __usercall __noreturn sub_402C1A(int@<ecx>, int@<ebx>, int@<edi>, int@<esi>);
void sub_402D0E();
void sub_402D44();
// void __usercall sub_402D7C(int@<eax>, char@<dh>, char@<ch>, int@<ebx>, unsigned int@<edi>);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_4013B5; // weak
_UNKNOWN loc_40215D; // weak
_UNKNOWN loc_40236A; // weak
_UNKNOWN loc_402395; // weak
_UNKNOWN loc_402719; // weak
_UNKNOWN loc_40285E; // weak
_UNKNOWN loc_402B9D; // weak
_UNKNOWN loc_402E2D; // weak


//----- (0040115E) --------------------------------------------------------
#error "40148E: cannot convert to microcode (funcsize=163)"

//----- (0040120B) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_40120B@<eax>(int a1@<edx>, int a2@<ecx>, char a3@<bl>)
{
  int v3; // edx
  int v4; // ecx

  LOBYTE(a1) = a1 - a3;
  BYTE1(a1) = ~BYTE1(a1);
  LOBYTE(a2) = -(char)a2;
  BYTE1(a2) = ~(BYTE1(a2) + 5);
  ((void (__fastcall *)(int, int))loc_4013B5)(a2, a1);
  BYTE1(v4) = 102;
  return ((int (__fastcall *)(int, int))sub_401228)(v4, v3 - 1);
}
// 40120F: positive sp value 4 has been found
// 401227: variable 'v4' is possibly undefined
// 401223: variable 'v3' is possibly undefined
// 401228: using guessed type _DWORD __far sub_401228();

//----- (00401228) --------------------------------------------------------
#error "401228: function frame is wrong (funcsize=0)"

//----- (00401264) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_401264()
{
  int v0; // [esp+Ch] [ebp-8h]
  int v1; // [esp+10h] [ebp-4h]

  *(&v1 - 6) = v0;
  sub_401368();
  JUMPOUT(0x4012BA);
}
// 4012AD: positive sp value 8 has been found
// 4012B8: control flows out of bounds to 4012BA

//----- (00401290) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_401290(int a1@<edx>, __int32 a2@<ecx>, char a3@<bl>)
{
  char v4; // bl
  char v5; // zf
  __int32 v6; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v6, a2);
  __asm { rep pop ecx }
  v4 = 1 - a3 + 1;
  do
  {
    BYTE1(a1) += 49;
    sub_40120B(a1, _ECX, v4);
    __debugbreak();
  }
  while ( v5 );
  JUMPOUT(0x4012A7);
}
// 401295: positive sp value 4 has been found
// 4012A5: control flows out of bounds to 4012A7
// 40129B: variable 'a1' is possibly undefined
// 40129E: variable '_ECX' is possibly undefined
// 4012A5: variable 'v5' is possibly undefined

//----- (00401303) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn start(int _EAX@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<edi>, int a6@<esi>)
{
  int v6; // edx
  int v7; // ebx
  int v8; // edi
  int v9; // edx
  int v10; // ebx
  int v11; // ecx
  int v12; // edi
  int v18; // ecx
  int v19; // ebx
  int v20; // edi
  int v21; // edx
  int v22; // edi
  int v23; // ecx
  int v24; // edx
  int v25; // ebx
  int v27; // ecx
  int v28; // edi
  int v29; // esi
  int v30; // ebx
  int v31; // esi
  int v32; // ebx
  int v33; // ecx
  int v34; // edx
  int v35; // [esp-4h] [ebp-4h] BYREF
  int savedregs; // [esp+0h] [ebp+0h]

  _EBP = &v35;
  v27 = a6 + a3;
  v28 = a2 + a5;
  v29 = v28 ^ a6;
  v30 = v28 + a4;
  v18 = ++v28 ^ (v27 - a2);
  v19 = v30 - a2;
  v20 = v18 + v28 + 1;
  v21 = a2 + 1;
  v31 = v18 + (_EAX ^ v29) + 1;
  v32 = v21 ^ v31 ^ v19;
  v33 = v18 + 1 - v20;
  v34 = v33 | v21;
  v10 = _EAX ^ (v33 | v32);
  v11 = _EAX | (_EAX + v33 - 1);
  v12 = v11 | (v20 - v34 - 1);
  while ( 1 )
  {
    BYTE1(v11) = -BYTE1(v11);
    BYTE1(v10) = v10 + BYTE1(v10) - 1 - ((BYTE1(v11) != 0) - 69) - 39;
    BYTE1(v11) = BYTE1(v11) - BYTE1(v10) + 1;
    LOBYTE(v11) = _EAX - v11;
    v22 = v11 | (_EAX + v12);
    LOBYTE(v10) = v10 - BYTE1(v10);
    sub_4013ED();
    *(_BYTE *)(v23 - 28) &= BYTE1(v23);
    __asm { into }
    --v23;
    v25 = v22 + (v22 ^ v10) - 1;
    v6 = v23 ^ v25 ^ (v24 + 1);
    v7 = v23 | (v25 - v23);
    v8 = v22 - v31 - v6;
    v9 = v7 | v6;
    v12 = v7 + v8;
    v10 = v7 + 1;
    ++v31;
    _EAX = ((__int64 (__fastcall *)(unsigned int, int, int))sub_40115E)(
             v10 ^ (unsigned int)(v23 - 1),
             v12 + v9,
             savedregs);
    __asm { rep btc ebp, eax }
  }
}
// 401120: positive sp value 4 has been found
// 401052: control flows out of bounds to 7B2FC3F
// 40112B: variable 'v11' is possibly undefined
// 4012D3: variable 'v23' is possibly undefined
// 4012DA: variable 'v24' is possibly undefined
// 40115E: using guessed type _DWORD __far sub_40115E();
// 4013ED: using guessed type _DWORD sub_4013ED();

//----- (00401368) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_401368()
{
  JUMPOUT(0x40139C);
}
// 40136C: positive sp value 4 has been found
// 40147B: control flows out of bounds to 40139C

//----- (004013ED) --------------------------------------------------------
#error "401402: cannot convert to microcode (funcsize=11)"

//----- (00401422) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_401422()
{
  void *v0; // [esp+28h] [ebp-4h]
  void *retaddr; // [esp+2Ch] [ebp+0h]

  *(&retaddr - 12) = v0;
  JUMPOUT(0x4010F1);
}
// 401426: positive sp value 4 has been found
// 401432: control flows out of bounds to 4010F1

//----- (004021DB) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_4021DB(
        int a1,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  JUMPOUT(0x40266C);
}
// 40263C: positive sp value 7BBA has been found
// 40271F: inconsistent fpu stack
// 402708: control flows out of bounds to 40266C
// 4021F6: conditional instruction was optimized away because ah.1>=0
// 402710: conditional instruction was optimized away because eax.4>=0
// 4021DB: too many input arguments, some ignored

//----- (004022BE) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4022BE()
{
  void *v0; // [esp+14h] [ebp-4h]
  void *retaddr; // [esp+18h] [ebp+0h]

  *(&retaddr - 7) = v0;
  MEMORY[0xE3E42284] = ((int (*)(void))loc_402B9D)();
  JUMPOUT(0x402475);
}
// 4022C2: positive sp value 4 has been found
// 402470: control flows out of bounds to 402475

//----- (004022DF) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4022DF(int a1@<edx>, int a2@<ecx>, int a3@<ebx>, int a4@<esi>)
{
  int v4; // ebx
  __int32 v5; // ecx
  char v7; // ch
  bool v8; // cc
  int v10; // [esp-7BB6h] [ebp-7BB6h]
  int v11; // [esp-7BB2h] [ebp-7BB2h]
  int v12; // [esp-7BAEh] [ebp-7BAEh]
  int v13; // [esp-7BAAh] [ebp-7BAAh]
  int v14; // [esp-7BA6h] [ebp-7BA6h]
  int v15; // [esp-7BA2h] [ebp-7BA2h]
  int v16; // [esp-7B9Eh] [ebp-7B9Eh]
  int v17; // [esp-7B9Ah] [ebp-7B9Ah]
  int v18; // [esp-7B96h] [ebp-7B96h]
  int v19; // [esp-7B92h] [ebp-7B92h]
  int v20; // [esp-7B8Eh] [ebp-7B8Eh]
  int v21; // [esp-7B8Ah] [ebp-7B8Ah]
  int v22; // [esp-7B86h] [ebp-7B86h]
  int v23; // [esp-7B82h] [ebp-7B82h]
  int v24; // [esp-7B7Eh] [ebp-7B7Eh]
  int v25; // [esp-7B7Ah] [ebp-7B7Ah]
  int v26; // [esp-7B76h] [ebp-7B76h]
  int v27; // [esp-7B72h] [ebp-7B72h]
  int v28; // [esp-7B6Eh] [ebp-7B6Eh]
  int v29; // [esp-7B6Ah] [ebp-7B6Ah]
  int v30; // [esp-7B66h] [ebp-7B66h]
  int v31; // [esp-7B62h] [ebp-7B62h]
  int v32; // [esp-7B5Eh] [ebp-7B5Eh]
  int v33; // [esp-7B5Ah] [ebp-7B5Ah]
  int v34; // [esp-7B56h] [ebp-7B56h]
  int v35; // [esp-7B52h] [ebp-7B52h]
  int v36; // [esp-7B4Eh] [ebp-7B4Eh]
  int v37; // [esp-7B4Ah] [ebp-7B4Ah]
  int v38; // [esp-7B46h] [ebp-7B46h]
  int v39; // [esp-7B42h] [ebp-7B42h]
  int v40; // [esp-7B3Eh] [ebp-7B3Eh]
  int v41; // [esp-7B3Ah] [ebp-7B3Ah]
  int v42; // [esp-7B36h] [ebp-7B36h]
  int v43; // [esp-7B32h] [ebp-7B32h]
  int v44; // [esp-7B2Eh] [ebp-7B2Eh]
  int v45; // [esp-7B2Ah] [ebp-7B2Ah]
  int v46; // [esp-7B26h] [ebp-7B26h]
  int v47; // [esp-7B22h] [ebp-7B22h]
  int v48; // [esp-7B1Eh] [ebp-7B1Eh]
  int v49; // [esp-7B1Ah] [ebp-7B1Ah]
  int v50; // [esp-7B16h] [ebp-7B16h]
  int v51; // [esp-7B12h] [ebp-7B12h]
  int v52; // [esp-7B0Eh] [ebp-7B0Eh]
  int v53; // [esp-7B0Ah] [ebp-7B0Ah]
  int v54; // [esp-7B06h] [ebp-7B06h]
  int v55; // [esp-7B02h] [ebp-7B02h]
  int v56; // [esp-7AFEh] [ebp-7AFEh]
  int v57; // [esp-7AFAh] [ebp-7AFAh]
  int v58; // [esp-7AF6h] [ebp-7AF6h]
  int v59; // [esp-7AF2h] [ebp-7AF2h]
  int v60; // [esp-7AEEh] [ebp-7AEEh]
  int v61; // [esp-7AEAh] [ebp-7AEAh]
  int v62; // [esp-7AE6h] [ebp-7AE6h]
  int v63; // [esp-7AE2h] [ebp-7AE2h]
  int v64; // [esp-7ADEh] [ebp-7ADEh]
  int v65; // [esp-7ADAh] [ebp-7ADAh]
  int v66; // [esp-7AD6h] [ebp-7AD6h]
  int v67; // [esp-7AD2h] [ebp-7AD2h]
  int v68; // [esp-7ACEh] [ebp-7ACEh]
  int v69; // [esp-7ACAh] [ebp-7ACAh]
  int v70; // [esp-7AC6h] [ebp-7AC6h]
  int v71; // [esp-7AC2h] [ebp-7AC2h]

  v4 = a4 + a3;
  v5 = a1 | a2;
  BYTE1(v5) += 60;
  sub_4029C5(
    v5,
    v10,
    v11,
    v12,
    v13,
    v14,
    v15,
    v16,
    v17,
    v18,
    v19,
    v20,
    v21,
    v22,
    v23,
    v24,
    v25,
    v26,
    v27,
    v28,
    v29,
    v30,
    v31,
    v32,
    v33,
    v34,
    v35,
    v36,
    v37,
    v38,
    v39,
    v40,
    v41,
    v42,
    v43,
    v44,
    v45,
    v46,
    v47,
    v48,
    v49,
    v50,
    v51,
    v52,
    v53,
    v54,
    v55,
    v56,
    v57,
    v58,
    v59,
    v60,
    v61,
    v62,
    v63,
    v64,
    v65,
    v66,
    v67,
    v68,
    v69,
    v70,
    v71);
  LOBYTE(v4) = v4 + 1;
  --BYTE1(v4);
  _EBX = v4 - 1;
  v8 = SBYTE1(_EBX) <= (unsigned __int8)(__CFADD__((_BYTE)_EAX, v7) - 74);
  BYTE1(_EBX) -= __CFADD__((_BYTE)_EAX, v7) - 74;
  if ( !v8 && v8 )
  {
    __asm
    {
      xlat
      daa
    }
    _InterlockedExchange((volatile __int32 *)(_EAX - 634730553), _EAX);
    sub_402AFA();
    JUMPOUT(0x402347);
  }
  JUMPOUT(0x402E51);
}
// 4022FC: positive sp value 7BB6 has been found
// 402342: control flows out of bounds to 402347
// 402318: control flows out of bounds to 402E51
// 4022F7: variable 'v10' is possibly undefined
// 4022F7: variable 'v11' is possibly undefined
// 4022F7: variable 'v12' is possibly undefined
// 4022F7: variable 'v13' is possibly undefined
// 4022F7: variable 'v14' is possibly undefined
// 4022F7: variable 'v15' is possibly undefined
// 4022F7: variable 'v16' is possibly undefined
// 4022F7: variable 'v17' is possibly undefined
// 4022F7: variable 'v18' is possibly undefined
// 4022F7: variable 'v19' is possibly undefined
// 4022F7: variable 'v20' is possibly undefined
// 4022F7: variable 'v21' is possibly undefined
// 4022F7: variable 'v22' is possibly undefined
// 4022F7: variable 'v23' is possibly undefined
// 4022F7: variable 'v24' is possibly undefined
// 4022F7: variable 'v25' is possibly undefined
// 4022F7: variable 'v26' is possibly undefined
// 4022F7: variable 'v27' is possibly undefined
// 4022F7: variable 'v28' is possibly undefined
// 4022F7: variable 'v29' is possibly undefined
// 4022F7: variable 'v30' is possibly undefined
// 4022F7: variable 'v31' is possibly undefined
// 4022F7: variable 'v32' is possibly undefined
// 4022F7: variable 'v33' is possibly undefined
// 4022F7: variable 'v34' is possibly undefined
// 4022F7: variable 'v35' is possibly undefined
// 4022F7: variable 'v36' is possibly undefined
// 4022F7: variable 'v37' is possibly undefined
// 4022F7: variable 'v38' is possibly undefined
// 4022F7: variable 'v39' is possibly undefined
// 4022F7: variable 'v40' is possibly undefined
// 4022F7: variable 'v41' is possibly undefined
// 4022F7: variable 'v42' is possibly undefined
// 4022F7: variable 'v43' is possibly undefined
// 4022F7: variable 'v44' is possibly undefined
// 4022F7: variable 'v45' is possibly undefined
// 4022F7: variable 'v46' is possibly undefined
// 4022F7: variable 'v47' is possibly undefined
// 4022F7: variable 'v48' is possibly undefined
// 4022F7: variable 'v49' is possibly undefined
// 4022F7: variable 'v50' is possibly undefined
// 4022F7: variable 'v51' is possibly undefined
// 4022F7: variable 'v52' is possibly undefined
// 4022F7: variable 'v53' is possibly undefined
// 4022F7: variable 'v54' is possibly undefined
// 4022F7: variable 'v55' is possibly undefined
// 4022F7: variable 'v56' is possibly undefined
// 4022F7: variable 'v57' is possibly undefined
// 4022F7: variable 'v58' is possibly undefined
// 4022F7: variable 'v59' is possibly undefined
// 4022F7: variable 'v60' is possibly undefined
// 4022F7: variable 'v61' is possibly undefined
// 4022F7: variable 'v62' is possibly undefined
// 4022F7: variable 'v63' is possibly undefined
// 4022F7: variable 'v64' is possibly undefined
// 4022F7: variable 'v65' is possibly undefined
// 4022F7: variable 'v66' is possibly undefined
// 4022F7: variable 'v67' is possibly undefined
// 4022F7: variable 'v68' is possibly undefined
// 4022F7: variable 'v69' is possibly undefined
// 4022F7: variable 'v70' is possibly undefined
// 4022F7: variable 'v71' is possibly undefined
// 40230F: variable '_EAX' is possibly undefined
// 40230F: variable 'v7' is possibly undefined

//----- (004023B4) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4023B4(char a1@<al>, unsigned __int8 a2@<ch>, int a3@<ebx>, int a4@<esi>)
{
  int v4; // eax
  char v5; // dl
  int v6; // ecx
  int v7; // ebx
  unsigned int v8; // kr00_4
  char v9; // cf
  char v10; // al
  int (*v11)(void); // eax
  char v12; // ch
  int v13; // ebx
  int v14; // ebx
  int v15; // edi
  int v16; // edx
  unsigned int v17; // [esp+4h] [ebp-4h]

  LOBYTE(a3) = a1 | a3;
  BYTE1(a3) = -64;
  v7 = (a4 + 1) | a3;
  BYTE1(v7) = (a2 ^ ((BYTE1(v7) < a2) + 32 - (BYTE1(v7) - a2) - (((BYTE1(v7) < a2) + 32 != BYTE1(v7) - a2) - 97))) - 80;
  sub_4025A4();
  v8 = __readeflags();
  v17 = v8;
  LOBYTE(v11) = v9 + v10 + 7;
  LOBYTE(v7) = v7 + 1 - (__CFADD__(v12, -19) + 93);
  v13 = v7 - 1;
  v4 = v11();
  BYTE1(v6) = BYTE1(v4);
  LOBYTE(v6) = v5;
  v14 = v13 - 1;
  if ( __SETP__(v14, 0) || !__SETP__(v14, 0) )
  {
    *(&v17 - 2) = v4;
    JUMPOUT(0x402687);
  }
  v15 = v6 | v4;
  ((void (*)(void))loc_402395)();
  *(_DWORD *)(v15 + 8 * v16) -= v15;
  sub_402D0E();
}
// 4023BA: positive sp value 4 has been found
// 40291E: control flows out of bounds to 40291F
// 40229A: control flows out of bounds to 402687
// 402912: conditional instruction was optimized away because dh.1!=0
// 402C94: variable 'v9' is possibly undefined
// 402C94: variable 'v10' is possibly undefined
// 402C9A: variable 'v12' is possibly undefined
// 4028FF: variable 'v11' is possibly undefined
// 402CCF: variable 'v5' is possibly undefined
// 402CF7: variable 'v6' is possibly undefined
// 402D07: variable 'v16' is possibly undefined

//----- (0040243B) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_40243B()
{
  _AL = ((int (*)(void))loc_40215D)();
  __asm
  {
    daa
    iret
  }
}
// 40243F: positive sp value 4 has been found
// 402457: control flows out of bounds to 402458

//----- (00402517) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __noreturn sub_402517()
{
  __asm { repne pop edi }
  JUMPOUT(0x402526);
}
// 40251C: positive sp value 4 has been found
// 402524: control flows out of bounds to 402526
// 402517: using guessed type void __noreturn sub_402517();

//----- (0040258A) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_40258A@<eax>(__int32 a1@<ecx>, char a2@<bh>)
{
  bool v2; // of
  __int32 v3; // ecx
  __int32 v5; // ecx
  __int32 v6; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v6, a1);
  v5 = v6;
  LOBYTE(v5) = v5 - BYTE1(v5);
  BYTE1(v5) = a2 + BYTE1(v6);
  v2 = __OFSUB__(v5, 1);
  v3 = v5 - 1;
  if ( !v2 && v2 )
    JUMPOUT(0x4021D7);
  return ((int (__thiscall *)(__int32))nullsub_1)(v3);
}
// 4021C0: positive sp value 4 has been found
// 4021D5: control flows out of bounds to 4021D7
// 4021A1: using guessed type _DWORD nullsub_1();

//----- (004025A4) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4025A4()
{
  int v0; // [esp+24h] [ebp-8h]
  int v1; // [esp+28h] [ebp-4h]

  *(&v1 - 12) = v0;
  JUMPOUT(0x402200);
}
// 402DEF: positive sp value 8 has been found
// 402DF5: control flows out of bounds to 402DF7
// 402748: control flows out of bounds to 402200
// 402750: conditional instruction was optimized away because ebx.4!=0

//----- (00402800) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __noreturn sub_402800()
{
  void *v0; // [esp+10h] [ebp-4h]
  void *retaddr; // [esp+14h] [ebp+0h]

  *(&retaddr - 6) = v0;
  JUMPOUT(0x402AAA);
}
// 40213C: positive sp value 4 has been found
// 402153: control flows out of bounds to 402AAA
// 402800: using guessed type void __noreturn sub_402800();

//----- (0040293E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40293E(
        unsigned int a1@<eax>,
        unsigned __int32 a2@<edx>,
        unsigned __int32 a3@<ecx>,
        __int16 a4@<si>)
{
  __int16 v4; // si
  char v5; // cc
  __int16 v6; // bx
  char v7; // bh
  bool v8; // of
  char v9; // bh
  __int16 v10; // bx

  LOBYTE(v6) = BYTE1(a1);
  v4 = a3 ^ ((a3 ^ (a1 | a3 | a4)) - a2);
  HIBYTE(v6) = __CFADD__(BYTE1(a1), a2 + HIWORD(a1)) - 57;
  v8 = __OFADD__(__CFADD__(__CFADD__(BYTE1(a1), a2 + HIWORD(a1)), -57), HIBYTE(v6));
  HIBYTE(v6) += __CFADD__(__CFADD__(BYTE1(a1), a2 + HIWORD(a1)), -57);
  v5 = ((char)(HIBYTE(v6) - 102) < 0) ^ (v8 | __OFADD__(-102, HIBYTE(v6))) | (HIBYTE(v6) == 102);
  HIBYTE(v6) -= 102;
  if ( !v5 && v5 )
    JUMPOUT(0x402283);
  HIBYTE(v10) = (a2 < a3) + ((unsigned __int16)(v4 | v6) >> 8) - a2 - 104;
  LOBYTE(v10) = 16;
  HIBYTE(v10) += 77;
  v7 = ((unsigned __int16)(v10 + 1) >> 8) + 1;
  v8 = __OFSUB__(v7, ((unsigned __int8)a2 != 0xE3) - 110);
  v9 = v7 - (((unsigned __int8)a2 != 0xE3) - 110);
  if ( v8 || !v8 )
    JUMPOUT(0x4028A3);
  sub_40258A(a3, v9);
}
// 40225C: positive sp value 4 has been found
// 40227D: control flows out of bounds to 402283
// 402C13: control flows out of bounds to 402C14
// 402E23: control flows out of bounds to 4028A3
// 402958: conditional instruction was optimized away because edi.4!=0

//----- (00402964) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402964(char a1@<dl>, __int16 a2@<cx>, _BYTE *a3@<ebx>)
{
  char v3; // ch
  bool v4; // cf
  char v5; // cc
  char v6; // ch

  BYTE1(a3) = HIBYTE(a2) | ~BYTE1(a3);
  LOBYTE(a2) = -23;
  LOBYTE(a3) = ((unsigned __int8)a3 < (unsigned __int8)(BYTE1(a3) ^ (a1 - 1))) + (_BYTE)a3 - (BYTE1(a3) ^ (a1 - 1)) - 78;
  v3 = BYTE1(a3) ^ ((unsigned __int16)(a2 - 1) >> 8) ^ 0xE8;
  v4 = __CFADD__((_BYTE)a3, v3);
  v5 = ((char)((_BYTE)a3 + v3) < 0) ^ __OFADD__((_BYTE)a3, v3) | ((_BYTE)a3 + v3 == 0);
  v6 = (_BYTE)a3 + v3;
  if ( !v5 && v5 )
  {
    *a3 += v6 + v4;
    __asm { icebp }
    JUMPOUT(0x402605);
  }
  JUMPOUT(0x402D9B);
}
// 4025DF: positive sp value 4 has been found
// 402604: control flows out of bounds to 402605
// 4025EF: control flows out of bounds to 402D9B

//----- (004029C5) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_4029C5(
        __int32 a1@<ecx>,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  __int32 v64; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v64, a1);
  JUMPOUT(0x402244);
}
// 4029CD: positive sp value 4 has been found
// 4029D6: control flows out of bounds to 402244
// 4029C5: too many input arguments, some ignored

//----- (00402A3E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_402A3E(
        int a1@<ecx>,
        int a2@<ebx>,
        int a3@<esi>,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  bool v64; // cf
  char v65; // cc
  unsigned int v66; // ecx
  int v67; // [esp+4h] [ebp-Ch]
  int v68; // [esp+8h] [ebp-8h]

  *(&v68 - 5) = v67;
  v66 = a1 - 1;
  LOBYTE(a2) = a2 ^ 0x4A;
  v64 = __CFSHR__(v66, 15);
  v66 >>= 15;
  BYTE1(a2) -= v64 + 46;
  v64 = (unsigned __int8)a2 < BYTE1(v66);
  LOBYTE(a2) = a2 - BYTE1(v66);
  v65 = ((char)(a2 + 1) < 0) ^ __OFADD__(1, (_BYTE)a2) | ((_BYTE)a2 == 0xFF);
  LOBYTE(a2) = a2 + 1;
  if ( !v65 && v65 )
  {
    *(_DWORD *)(a3 + 1015655028) += a2 + v64;
    JUMPOUT(0x40279C);
  }
  sub_40243B();
  JUMPOUT(0x402B25);
}
// 402404: positive sp value C has been found
// 402B20: control flows out of bounds to 402B25
// 40282B: control flows out of bounds to 40279C
// 402E7C: control flows out of bounds to 402222
// 4023EE: conditional instruction was optimized away because ebx.4!=0
// 402A3E: too many input arguments, some ignored

//----- (00402A75) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn sub_402A75(int a1@<eax>, int _EDX@<edx>, int a3@<esi>)
{
  __int16 v3; // [esp-6h] [ebp-6h]

  __asm { repne push dx }
  LOWORD(_EDX) = v3;
  ((void (__fastcall __noreturn *)(int, int, int))sub_402800)(a3, a1 | _EDX, a1);
}
// 402A7E: positive sp value 4 has been found
// 402A7B: variable 'v3' is possibly undefined
// 402800: using guessed type void __noreturn sub_402800();

//----- (00402AFA) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402AFA()
{
  ((void (*)(void))((char *)&loc_40236A + 2))();
  __asm { iret }
  JUMPOUT(0x4028F7);
}
// 4028DE: positive sp value 4 has been found
// 4028F6: control flows out of bounds to 4028F7

//----- (00402BC3) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402BC3(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>)
{
  bool v4; // cf
  int v5; // ebx
  int v6; // ebx
  int v7; // ebx
  void *v8; // [esp+20h] [ebp-4h]
  void *retaddr; // [esp+24h] [ebp+0h]

  *(&retaddr - 10) = v8;
  v6 = a3 | a4;
  LOBYTE(v6) = BYTE1(a1) | v6;
  v7 = a2 + v6;
  BYTE1(v7) -= a3;
  if ( !a1 )
  {
    v4 = __CFADD__((_BYTE)v7, -49);
    LOBYTE(v7) = v7 - 50;
    BYTE1(v7) = ~BYTE1(v7) - (v4 - 90) - BYTE1(a3);
    v5 = (a3 | v7) + 1;
    if ( !__SETP__(v5, 0) && __SETP__(v5, 0) )
    {
      v8 = (void *)(unsigned __int16)__ES__;
      __inbyte(a2);
      JUMPOUT(0x40219C);
    }
    sub_402517();
  }
  JUMPOUT(0x402A47);
}
// 40217B: positive sp value 4 has been found
// 40219B: control flows out of bounds to 40219C
// 402BD1: control flows out of bounds to 402A47
// 40278F: bad sp value at call
// 402517: using guessed type void __noreturn sub_402517();

//----- (00402C1A) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn sub_402C1A(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4@<esi>)
{
  int v4; // ecx
  int v5; // eax
  unsigned int v6; // edx
  unsigned int v7; // ecx
  bool v8; // cf
  int v9; // edx
  int v10; // esi
  int v11; // ebx
  _DWORD *v12; // edi
  int v13; // edx
  int v14; // esi
  unsigned __int32 v15; // eax
  char v16; // cl
  int v17; // ecx
  int v18; // edx
  int v19; // ebx
  int v20; // edx
  __int32 v21; // ecx
  int v22; // [esp+Ch] [ebp-8h]
  int v23; // [esp+10h] [ebp-4h]

  *(&v23 - 6) = v22;
  v21 = a1 + 1;
  ++BYTE1(v21);
  LOBYTE(v21) = -61;
  v5 = sub_40258A(v21, SBYTE1(a2));
  MEMORY[0x490A9194] = v5;
  BYTE1(v5) = ~BYTE1(v5);
  v8 = v6 < v7;
  v9 = v6 - v7;
  LOBYTE(v5) = v5 - (v8 + 95);
  v10 = v9 ^ (a4 + 1);
  BYTE1(v9) -= 96;
  LOBYTE(v9) = ~(_BYTE)v9;
  BYTE1(a2) = (BYTE1(v7) ^ (BYTE1(v7) | BYTE1(a2))) + 1 - (__CFADD__(v7, v10 + 1) - 121);
  v11 = a2 + 1;
  v12 = (_DWORD *)(a3 - v5);
  LOWORD(v11) = __PAIR16__(BYTE1(v11), v5) - 256;
  sub_402BC3(v5, v9, v7, v11);
  v14 = v23;
  v15 = __indword(v13);
  *v12 = v15;
  v15 -= 117256194;
  ++v14;
  LOBYTE(v17) = -v16;
  v18 = v14 ^ v13;
  LOBYTE(v11) = v11 + 96;
  v19 = v11 - v15;
  BYTE1(v18) = -BYTE1(v18);
  v20 = v17 + v18;
  LOBYTE(v20) = v20 - v19;
  BYTE1(v19) -= 39;
  v4 = v19;
  BYTE1(v20) += v20;
  LOBYTE(v20) = BYTE1(v19) ^ v20;
  LOBYTE(v19) = 86;
  ++BYTE1(v20);
  LOWORD(v4) = __PAIR16__(BYTE1(v4), BYTE1(v20)) + 4096;
  sub_402A75(v15 + 418, v20 - v19, v14 - v4);
}
// 402478: positive sp value 8 has been found
// 402895: variable 'v6' is possibly undefined
// 402895: variable 'v7' is possibly undefined
// 4028BB: variable 'v13' is possibly undefined
// 4028C3: variable 'v16' is possibly undefined
// 4028CE: variable 'v17' is possibly undefined

//----- (00402D0E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402D0E()
{
  JUMPOUT(0x402CEC);
}
// 402D12: positive sp value 4 has been found
// 402D1D: control flows out of bounds to 402CEC

//----- (00402D44) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402D44()
{
  void *v0; // [esp+28h] [ebp-4h]
  void *retaddr; // [esp+2Ch] [ebp+0h]

  *(&retaddr - 12) = v0;
  JUMPOUT(0x40275A);
}
// 402D48: positive sp value 4 has been found
// 402D58: control flows out of bounds to 40275A

//----- (00402D7C) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402D7C(int a1@<eax>, char a2@<dh>, char a3@<ch>, int a4@<ebx>, unsigned int a5@<edi>)
{
  int v5; // ebx
  int v7; // ebx
  int v8; // ebx
  char v9; // ch
  int v10; // ecx
  int v11; // edx
  char v12; // al

  v5 = a4 - 1;
  BYTE1(v5) -= a3;
  _ESI = v5;
  v7 = v5 + v5 - 1;
  LOBYTE(v7) = BYTE1(v7) + v7;
  v8 = a1 + (a5 | v7);
  BYTE1(v8) |= a2;
  ((void (*)(void))((char *)&loc_40285E + 4))();
  __asm { outsb }
  LOBYTE(v8) = v8 + 1;
  BYTE1(v10) = (++v8 ^ v9) - 22;
  v12 = ((int (__fastcall *)(int, int, _DWORD))((char *)&loc_402719 + 1))(v10, v11 - v8, 0);
  *(_DWORD *)(v8 + 1994064459) *= 2;
  *(_BYTE *)a5 = v12;
  ((void (*)(void))loc_402E2D)();
  JUMPOUT(0x4024B1);
}
// 402499: positive sp value 7BBA has been found
// 4024AC: control flows out of bounds to 4024B1
// 402DA9: bad sp value at call
// 402DA2: variable 'v9' is possibly undefined
// 402DA9: variable 'v10' is possibly undefined
// 402DA7: variable 'v11' is possibly undefined

// nfuncs=30 queued=29 decompiled=29 lumina nreq=0 worse=0 better=0
#error "There were 3 decompilation failure(s) on 29 function(s)"
