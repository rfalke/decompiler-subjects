// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

<anonymous> * __imp__RegQueryValueExW = &g_t13E6; // 00401000
<anonymous> * __imp__RegOpenKeyExA = &g_t13FA; // 00401004
<anonymous> * __imp__GetStockObject = &g_t13CA; // 0040100C
<anonymous> * __imp__CancelIo = &g_t1348; // 00401014
<anonymous> * __imp__GetModuleHandleA = &g_t1354; // 00401018
<anonymous> * __imp__BuildCommDCBA = &g_t1368; // 0040101C
<anonymous> * __imp__GetProcessWindowStation = &g_t1398; // 00401024
<anonymous> * __imp__PostQuitMessage = &g_t1386; // 00401028
<anonymous> * __imp__SetTimer = &g_t13B2; // 0040102C
// 00401040: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	struct Eq_3 * fp;
	Eq_4 dwLoc20;
	word32 dwLoc14;
	ptr32 edi_17;
	int32 edx_18 = fn00401150(out edi_17);
	fp->aFFFFA29F[edx_18 / 4] = edx_18;
	struct Eq_17 * eax_34 = 53090368 - (edx_18 << 11) & 0x02E90800 - (edx_18 << 11);
	Mem43[fp + 4294943403 + dwLoc20:word32] = (eax_34 + 4282752588)[edx_18 * 0x0200] - 0x28;
	ptr32 eax_47 = (char *) &((eax_34 + (&(eax_34->aFF459E4C)->dw0000 + (edx_18 << 0x09))[-1])->aFF459E4C + 0x00005D5F)->dw0000 + 0x011D - dwLoc20;
	fn00401250();
	fn004011A0(Mem67[fp + ~0x5D60 + dwLoc20:word32], edi_17);
	struct Eq_61 * esp_93;
	(*((word32) dwLoc20 + 4174767))();
	esp_93->dwFFFFFFFC = 0x00;
	<anonymous> * v18_103 = eax_47 + 23921 - dwLoc20;
	esp_93->dwFFFFFFF8 = (char *) v18_103 + 0x0BCA;
	struct Eq_77 * esp_112;
	v18_103();
	int3();
	int3();
	esp_112->ptrFFFFFFFC = fp - 4;
	int32 edx_123 = esp_112->dw000C;
	int32 ecx_125 = ((char *) (esp_112->aFFFE8B00 + 0x000045F1) + 3)[edx_123];
	ui32 * ebx_128 = esp_112->aFFFE8B00[edx_123];
	esp_112->dwFFFFFFF0 = 492702089;
	DWORD eax_133 = esp_112->dwFFFFFFF0 - (edx_123 << 0x02);
	esp_112->dwFFFFFFF0 = 254248472;
	esp_112->dwFFFFFFF8 = 0x01;
	esp_112->dwFFFFFFF4 = esp_112->dwFFFFFFF0;
	esp_112->dwFFFFFFF4 += edx_123 << 0x02;
	while (true)
	{
		*ebx_128 = *ebx_128 ^ eax_133;
		ecx_125 -= 0x04;
		if (ecx_125 <= 0x00)
			break;
		eax_133 = (word32) eax_133 + esp_112->dwFFFFFFF4 + esp_112->dwFFFFFFF8;
		ebx_128 = (char *) ebx_128 + 0x00005D45 - esp_112->dw000C;
		esp_112->dwFFFFFFF8 = -esp_112->dwFFFFFFF8;
	}
	return eax_133;
}

// 00401150: Register word32 fn00401150(Register out ptr32 ediOut)
// Called from:
//      Win32CrtStartup
word32 fn00401150(ptr32 & ediOut)
{
	struct Eq_169 * fs;
	struct Eq_170 * edx_10 = fs->ptr0018;
	CancelIo->bFFFFFFFF == 0x90;
	fn00001347(&edx_10->dw0BF4 + 4);
	ui32 edx_36 = edx_10->dw0BF4;
	ediOut = edx_10 - (edx_36 - 3221201607);
	return edx_36 - 3221201607;
}

// 004011A0: void fn004011A0(Register int32 ecx, Register ptr32 edi)
// Called from:
//      Win32CrtStartup
void fn004011A0(int32 ecx, ptr32 edi)
{
	<anonymous> * eax_7 = fn004011D0(fn004011B0(ecx, edi), ecx);
	eax_7();
}

// 004011B0: Register word32 fn004011B0(Register int32 ecx, Register ptr32 edi)
// Called from:
//      fn004011A0
word32 fn004011B0(int32 ecx, ptr32 edi)
{
	return *((word32) **((word32) *((word32) *((word32) (edi + 48) + ecx) + 0x0C) + 28) + 8);
}

// 004011D0: Register Eq_198 fn004011D0(Register Eq_198 eax, Register int32 ecx)
// Called from:
//      fn004011A0
Eq_198 fn004011D0(Eq_198 eax, int32 ecx)
{
	ptr32 fp;
	word32 dwLoc08;
	struct Eq_225 * esi_22 = (word32) eax + *((word32) ((word32) eax + *(((word32) eax + ((ecx << 0x01) + ~0x5D04)) - ecx)) + 0x0078);
	int32 esi_25[] = (word32) eax + esi_22->dw0020;
	ptr32 edi_28 = (word32) eax + esi_22->dw001C;
	*(fp + 0x5D39 - ecx) = 1442894244 - ecx;
	int32 dwLoc0C_65 = 0x00;
	while (dwLoc08 != (((word32) eax + esi_25[dwLoc0C_65 / 4]) + 4294943435)[ecx / 4])
		dwLoc0C_65 += 0x04;
	return (word32) eax + *((word32) edi_28 + dwLoc0C_65);
}

// 00401250: void fn00401250()
// Called from:
//      Win32CrtStartup
void fn00401250()
{
}

word32 g_dw401314 = 0x13E6; // 00401314
word32 g_dw401318 = 5114; // 00401318
word32 g_dw401320 = 5066; // 00401320
word32 g_dw401328 = 0x1348; // 00401328
word32 g_dw40132C = 4948; // 0040132C
word32 g_dw401330 = 0x1368; // 00401330
word32 g_dw401338 = 0x1398; // 00401338
word32 g_dw40133C = 4998; // 0040133C
word32 g_dw401340 = 0x13B2; // 00401340
