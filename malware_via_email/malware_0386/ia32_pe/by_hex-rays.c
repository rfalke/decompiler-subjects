/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall sub_403AFE(int a1@<eax>, unsigned int a2@<edx>, int a3@<ecx>, char a4@<bl>, char a5@<sil>);


//----- (00403AFE) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_403AFE(int a1@<eax>, unsigned int a2@<edx>, int a3@<ecx>, char a4@<bl>, char a5@<sil>)
{
  int v5; // eax
  __int64 v6; // rt2
  int v7; // esi
  unsigned int v8; // eax
  unsigned __int8 v9; // t0
  bool v10; // cf
  char v11; // [esp-8h] [ebp-8h]
  int savedregs; // [esp+0h] [ebp+0h] BYREF

  v6 = ((a3 - 1) << 10) * (__int64)(a1 & ~(1 << a5));
  v5 = ((a3 - 1) << 10) * (a1 & ~(1 << a5));
  v7 = savedregs;
  savedregs = (unsigned __int16)__CS__;
  *(_BYTE *)(v5 + 106) -= __CFADD__((_BYTE)a2, (HIDWORD(v6) != 0) + a4 - 52) + a2;
  LOBYTE(a2) = 92;
  *(_DWORD *)(a2 - 38) |= (unsigned int)&savedregs;
  v9 = v5;
  v8 = a2;
  v10 = *(_BYTE *)(a2 + 2) < v9;
  v11 = 92;
  __debugbreak();
  LOBYTE(v8) = v10 + v11 + 52;
  MEMORY[0xF32F5E50] = v8;
  __outdword(0x38u, v8);
  __asm { jmp     dword ptr [esi] }
}
// 403B13: positive sp value 4 has been found

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
