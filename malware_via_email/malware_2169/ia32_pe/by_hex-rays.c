/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// BOOL __userpurge UILanguageEnumProc@<eax>(int a1@<edi>, LPSTR a2, LONG_PTR a3);
void __noreturn start(); // weak
// HENHMETAFILE __stdcall CloseEnhMetaFile(HDC hdc);
// HMETAFILE __stdcall CloseMetaFile(HDC hdc);
// int __stdcall GetObjectA(HANDLE h, int c, LPVOID pv);
// HMODULE __stdcall GetModuleHandleA(LPCSTR lpModuleName);
// BOOL __stdcall EnumUILanguagesA(UILANGUAGE_ENUMPROCA lpUILanguageEnumProc, DWORD dwFlags, LONG_PTR lParam);
// void __stdcall __noreturn ExitProcess(UINT uExitCode);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_40113D; // weak


//----- (00401000) --------------------------------------------------------
BOOL __userpurge UILanguageEnumProc@<eax>(int a1@<edi>, LPSTR a2, LONG_PTR a3)
{
  int v3; // edi
  char v4; // bl
  _BYTE *v5; // esi
  unsigned int v6; // kr00_4
  unsigned int v7; // kr04_4

  do
    --a1;
  while ( a1 );
  v3 = 1090;
  v4 = 125;
  v5 = &loc_40113D;
  do
  {
    *v5 = *v5;
    *v5++ -= v4;
    v6 = __readeflags();
    __writeeflags(v6);
    v4 += 3;
    v7 = __readeflags();
    --v3;
  }
  while ( v3 );
  return 0;
}
// 401000: could not find valid save-restore pair for ebx

//----- (004010A0) --------------------------------------------------------
void __noreturn start()
{
  unsigned int v0; // kr00_4
  unsigned __int32 v1; // eax

  if ( !GetModuleHandleA(0) )
  {
    CloseMetaFile((HDC)0x3A);
    v0 = __readeflags();
    __writeeflags(v0);
    CloseEnhMetaFile((HDC)0xF4);
    GetObjectA((HANDLE)0x63, 146, (LPVOID)0x3D29C11D);
    ExitProcess(0);
  }
  EnumUILanguagesA((UILANGUAGE_ENUMPROCA)UILanguageEnumProc, 0, 430330393);
  v1 = __indword(0x5Bu);
  __asm { int     0ECh; used by BASIC while in interpreter }
  __halt();
}
// 4010A0: using guessed type void __noreturn start();

// nfuncs=2 queued=2 decompiled=2 lumina nreq=0 worse=0 better=0
// ALL OK, 2 function(s) have been successfully decompiled
