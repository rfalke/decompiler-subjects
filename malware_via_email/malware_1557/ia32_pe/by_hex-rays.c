/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// char __usercall start@<al>(int@<eax>, int@<edx>, int@<ecx>, unsigned int@<ebx>, __int16@<si>);


//----- (0040128A) --------------------------------------------------------
char __usercall start@<al>(int a1@<eax>, int a2@<edx>, int a3@<ecx>, unsigned int a4@<ebx>, __int16 a5@<si>)
{
  unsigned int v5; // edi
  bool v7; // zf
  unsigned int v8; // edi
  unsigned int v9; // ebx
  bool v12; // tt
  char v17; // ch
  bool v19; // tt
  bool v20; // cf
  char v21; // ch
  unsigned int v22; // kr00_4
  __int16 v23; // dx
  int v24; // eax
  bool v25; // cf
  char v26; // of
  __int16 v28; // dx
  unsigned int v29; // ecx
  __int16 v30; // si
  char vars0; // [esp+0h] [ebp+0h]
  char vars0a; // [esp+0h] [ebp+0h]

  v28 = __CFADD__(a4, a2 | 0xDD8D0A68) + a4 + (a2 | 0xA68) - 28768;
  v29 = (((a3 - a4) & 0xDCA1099F) - a1 - a1 + 1) | 0xF7DE77BE;
  v30 = (a5 | 0xF084) - 10462;
  v22 = a4 + (v29 | ((a1 | 0xC157CA10) + 132677866) | 0xFF446D1);
  _ECX = (__PAIR64__(v29 + 1, a4) + (v29 | ((a1 | 0xC157CA10) + 132677866) | 0xFF446D1 | 0x25E48D5600000000i64)) >> 32;
  v24 = a1 - 270958625;
  v23 = v30 + v28 - 1 + 1566;
  LOBYTE(v24) = HIBYTE(v23);
  BYTE1(v24) = __ROL1__(BYTE1(v24), 23);
  v25 = __CFSHL__(BYTE1(_ECX), _ECX);
  BYTE1(_ECX) <<= _ECX;
  if ( ((_ECX & 0x8000) != 0) != v26 || ((_ECX & 0x8000) != 0) == v26 )
  {
    LOBYTE(a4) = a4 - 1;
    v5 = v22 - (v25 + 1345590247);
    LOBYTE(v24) = (_BYTE)v24 << _ECX;
    _EAX = v24 + 1;
    _DL = -106;
    __asm { rcl     ch, cl }
    v7 = v5 == -1;
    v8 = v5 + 1;
    if ( v7 || !v7 )
    {
      __asm { fnclex }
      _ECX = 0;
      while ( 1 )
      {
        __asm { smsw    eax }
        if ( ++_ECX == 2 )
          break;
        if ( (_EAX & 8) == 0 )
        {
          do
            __asm { smsw    eax }
          while ( (_EAX & 2) == 0 );
          _AL = ~(_BYTE)_EAX;
          __asm { rcr     al, cl }
          LOBYTE(_ECX) = __ROR1__(_ECX, _ECX);
          __asm { rcl     ch, cl }
          JUMPOUT(0x401433);
        }
      }
    }
    else
    {
      LOBYTE(_EAX) = _EAX + 85;
      while ( 1 )
      {
        BYTE1(a4) |= 0xE2u;
        v20 = __CFADD__(a4, 1385979724);
        v9 = a4 + 1385979724;
        BYTE1(_EAX) = _DL;
        BYTE1(_ECX) += v20 + 69;
        LOBYTE(v9) = __ROL1__(v9, 28) - (__CFSHL__(v9, 28) + 107);
        _DL = __ROR1__(_DL, 28);
        BYTE1(v9) <<= _ECX;
        BYTE1(_EAX) = __ROR1__(BYTE1(_EAX), 3);
        LOBYTE(_EAX) = _EAX | 0xBA;
        BYTE1(_ECX) = __ROR1__(__ROL1__(BYTE1(_ECX) & 0xB1, _ECX), _ECX);
        LOBYTE(_ECX) = _ECX - v9;
        v12 = __CFSHR__(_ECX, 25);
        LOBYTE(_ECX) = __ROR1__(_ECX, 25);
        _ECX -= v12 - 535063104;
        BYTE1(v9) |= 0x7Eu;
        if ( __SETP__(BYTE1(v9), 0) || !__SETP__(BYTE1(v9), 0) )
          break;
        *(_BYTE *)_EAX |= _EAX;
        LOBYTE(_EAX) = _EAX + 32;
        v8 += _ECX;
        LOBYTE(v9) = __ROL1__(v9, 30);
        BYTE1(v9) = __ROL1__(BYTE1(v9), _ECX);
        ++BYTE1(_EAX);
        __asm { rcl     dl, cl }
        _EAX |= 0x6D69FE76u;
        a4 = v9 - 1;
      }
      v17 = __ROL1__(__ROR1__(BYTE1(_ECX), _ECX), _ECX);
      LOBYTE(_EAX) = _EAX + 1;
      BYTE1(_EAX) <<= _ECX;
      v19 = __CFSHR__(_EAX, 22);
      LOBYTE(_EAX) = __ROR1__(_EAX, 22);
      v20 = __CFADD__(v19, v17);
      v21 = v19 + v17;
      v20 |= __CFADD__(v21, -44);
      if ( !v20 && v21 != 44 && (v20 || v21 == 44) )
      {
        vars0a = _DL + vars0;
        *(_BYTE *)_EAX &= _ECX;
        JUMPOUT(0x40135C);
      }
    }
  }
  else
  {
    LOBYTE(_EAX) = HIBYTE(v23) + 16;
  }
  return _EAX;
}
// 40135A: control flows out of bounds to 40135C
// 40132D: control flows out of bounds to 401433
// 4011D5: control flows out of bounds to 40138D
// 401075: conditional instruction was optimized away because bl.1!=0
// 401357: variable 'vars0' is possibly undefined
// 40137D: variable 'v26' is possibly undefined

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
