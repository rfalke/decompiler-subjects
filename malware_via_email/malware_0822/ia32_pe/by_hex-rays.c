/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>);

//-------------------------------------------------------------------------
// Data declarations

int dword_41C000[512] =
{
  -3,
  -2116973824,
  1380665326,
  943897199,
  -360619440,
  5202294,
  33554665,
  55443622,
  -8436741,
  17416173,
  -2130660477,
  305417153,
  -263733119,
  -654067088,
  1325431571,
  -604536842,
  51444107,
  1270768810,
  5607469,
  1500332735,
  459258224,
  2147343116,
  -336591877,
  1925393579,
  -1955515070,
  55513152,
  18959063,
  -17419807,
  -637304977,
  1985069697,
  -1249462005,
  -276746481,
  2080397393,
  -40892654,
  119632074,
  1975386112,
  1173814783,
  -431273867,
  946628985,
  -1232037807,
  130026240,
  -71896573,
  -1270641226,
  1198412865,
  263357151,
  -28880141,
  838614795,
  1090532952,
  1224794126,
  1768769797,
  1634712064,
  -302138316,
  972535515,
  1105978873,
  1265711216,
  1266249931,
  -1081623691,
  1684258553,
  1461583989,
  -565038337,
  -1329725711,
  410060720,
  1431855413,
  268690505,
  1975338752,
  1109334015,
  1488961795,
  -347703984,
  1036520921,
  -1032232082,
  1472182029,
  4732721,
  1644670699,
  1875339879,
  -275295694,
  2033563611,
  1986292083,
  -1423265018,
  1220944495,
  -1141383699,
  -571400856,
  1113530293,
  1500021522,
  1129534325,
  -151061636,
  2020881718,
  1296253726,
  435915626,
  1933644454,
  -605139339,
  626539999,
  2017813321,
  -1846850987,
  851114641,
  1128236880,
  737785271,
  1790994362,
  1787998864,
  -18331639,
  -1878103812,
  -35096940,
  -478443018,
  -259264808,
  2003212427,
  1091404927,
  341273688,
  1639113562,
  1150389214,
  -919054006,
  -35947585,
  74748388,
  -366215424,
  -960936092,
  55694987,
  -305694504,
  1145617147,
  -488177550,
  -1948908758,
  1263563243,
  -268935297,
  -210386008,
  1220774680,
  1645725579,
  1499686963,
  -1035468730,
  -2118679285,
  1614217429,
  2018448309,
  1841259108,
  896394507,
  -95735284,
  -1179104712,
  498847503,
  -1958346821,
  834357747,
  1364551986,
  -2133066097,
  1371501184,
  1937163227,
  1298679707,
  -618509563,
  -293223628,
  1241563121,
  1152948056,
  352677495,
  1594577861,
  1274189795,
  -628405645,
  -1929331231,
  -92508224,
  1832217846,
  -2079380680,
  1748470987,
  1924875587,
  -516196782,
  -1039711091,
  -1586606224,
  239260469,
  -191897738,
  1836279372,
  -444909450,
  16253762,
  -1035995022,
  403128454,
  1308099408,
  1632472220,
  17617461,
  -2127152706,
  -1725368947,
  -1325918686,
  1445719081,
  -2124516104,
  2137028115,
  161588486,
  -1928040968,
  -915007732,
  1710784263,
  -1238876928,
  2019947028,
  -248383236,
  1719965990,
  1172141888,
  1814684770,
  -1592140512,
  641874680,
  354356144,
  226842404,
  2871777,
  846333210,
  167394913,
  555801032,
  863318813,
  -1643344747,
  -2046290636,
  -1108376543,
  1016548955,
  204031840,
  1610926053,
  1850467331,
  1677226358,
  -334518024,
  285261376,
  -972241865,
  415832261,
  292214307,
  2033781369,
  -1789033092,
  468947448,
  -1789394836,
  -119077468,
  -647943792,
  76555424,
  -1157532764,
  2046948289,
  -2071874875,
  695180291,
  1117460763,
  637548294,
  174263857,
  -1089428935,
  1082765413,
  694201422,
  699415298,
  1635616000,
  -1191045609,
  1102305105,
  582062726,
  -1327261900,
  1152410625,
  1026073635,
  -1481456099,
  208664586,
  -664933421,
  -1305965436,
  -645449981,
  169899540,
  304963084,
  1489601543,
  -160835944,
  234230775,
  1879068560,
  392503320,
  1309499702,
  -2146819239,
  -303000463,
  728627192,
  288489786,
  1620936818,
  1640382674,
  1919559999,
  -1672991900,
  656483664,
  -286259940,
  1686876921,
  1158693195,
  1080845852,
  1673760270,
  589302794,
  -726610789,
  656754867,
  -2047073268,
  -2144334151,
  -131957604,
  701710023,
  -1067216496,
  1798672188,
  -1800389878,
  1848046348,
  1535949932,
  -132600310,
  1291375922,
  25238676,
  -2055835111,
  1129143692,
  -666582724,
  2037487680,
  -2066131100,
  -1305457499,
  1679236829,
  -1388953257,
  -461272198,
  43852464,
  1590208121,
  -709489142,
  -1065067677,
  372863303,
  567924825,
  105453347,
  -1668252736,
  -1153819508,
  2088835327,
  -1392245451,
  -1296812956,
  -1217774633,
  209840385,
  1693982205,
  -1935048423,
  1012203848,
  248223421,
  471728160,
  -332743690,
  -1535019448,
  1749736225,
  1708373034,
  392446676,
  -543350751,
  386360580,
  5487360,
  -926393199,
  81292223,
  218628553,
  -1853764467,
  2127954993,
  930100405,
  1113258282,
  1153848859,
  -55272167,
  -1789034466,
  -1435005247,
  1279863321,
  -986727736,
  -1067129720,
  53370242,
  5784390,
  230214119,
  337005953,
  495926589,
  1837436232,
  -1706643841,
  423224360,
  1680495970,
  1552698944,
  478972956,
  -1061580517,
  317529369,
  62002377,
  -1236855281,
  -103874358,
  540164979,
  -1066137577,
  25457173,
  1110603836,
  1825165091,
  840433825,
  -1038863227,
  624340125,
  -1958723392,
  211552507,
  -724100060,
  147353293,
  -936799220,
  1985009178,
  1696576596,
  1258926302,
  718143489,
  730896528,
  -1067558578,
  253304936,
  828320905,
  771786113,
  -2055568059,
  119808284,
  -1698686922,
  2045507634,
  -1727410056,
  -1623156176,
  -917667475,
  -2084076671,
  415844216,
  -520594884,
  1629406387,
  241267207,
  1914311468,
  1831900278,
  -1776231384,
  959155240,
  392453166,
  1661470386,
  -401677613,
  692098178,
  1208347870,
  -1381453583,
  1512856574,
  -1704392927,
  -2109588735,
  616047233,
  -1845229502,
  1282634755,
  -1559853287,
  1566121443,
  562911689,
  -1238197224,
  114317452,
  776476803,
  -1810992261,
  68590705,
  1128075666,
  -1966565180,
  -2059406267,
  1731241874,
  1671886859,
  -1660419868,
  -1416887959,
  44482606,
  828646939,
  2025892196,
  1901060602,
  1261455440,
  1111095437,
  135565982,
  566328568,
  -1761373405,
  -1459592627,
  980701447,
  -1786998282,
  1275118144,
  136578572,
  -2069016448,
  227107148,
  1700431795,
  -845781292,
  -1624915388,
  1862329885,
  403751084,
  -2092487819,
  2089895617,
  -898563957,
  -2138003352,
  637644294,
  -1945289756,
  -2001646088,
  -1073079804,
  -1799257162,
  -1116622512,
  -981088786,
  -1145636571,
  -2067262712,
  -760549604,
  271845395,
  693504057,
  -308395133,
  -1871640087,
  -444290283,
  496341020,
  1397038209,
  -2117726094,
  1879881805,
  -2078435424,
  270008605,
  348721534,
  1292510322,
  56150473,
  143330066,
  82053228,
  350749568,
  1680736448,
  13629016,
  -1358048677,
  -1499201476,
  690431680,
  46873459,
  1694543236,
  1685192732,
  243893086,
  -833220380,
  -1725726206,
  1808682562,
  -1292919413,
  1579183267,
  -238349940,
  -1014294510,
  348133632,
  -196265208,
  13124274,
  -1154868873,
  226007296,
  -2121092831,
  -1172632980,
  1237848841,
  1659225236,
  348670997,
  815581224,
  -243432672,
  889508064,
  -74097520,
  2017869915,
  1192223577,
  59808042,
  757413889,
  -364378425,
  1038929293,
  -1995774814,
  45296863,
  2014122072,
  642554162,
  1823095326,
  1853698560,
  1102064236,
  -217084667,
  1677821968,
  -2078801775,
  -1649495547,
  -933611560,
  1144052168,
  -1725896253,
  -31875520,
  598751623,
  -1759799572,
  869196849,
  -1411830286,
  554331672,
  322670726
}; // weak


//----- (004219C0) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>)
{
  int *v4; // esi
  int *v5; // edi
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  unsigned int v11; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  bool v16; // zf
  int v17; // ebx
  int v18; // ett
  unsigned int v19; // eax
  unsigned int v20; // eax
  int v21; // eax
  bool v22; // cf
  int v23; // ebx
  int v24; // ebx
  int v25; // ett
  BOOL v26; // ecx
  bool v27; // cf
  int v28; // ebx
  int v29; // ett
  int v30; // ecx
  int v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ebx
  int v35; // ett
  bool v36; // zf
  int v37; // ebx
  int v38; // ett
  unsigned int v39; // ecx
  char *v40; // edx
  char v41; // al
  int v42; // eax
  bool v43; // cc
  int *v44; // esi
  int *v45; // edi
  int v46; // ecx
  char v47; // al
  unsigned __int8 v48; // al
  int v49; // eax
  int v50; // eax
  char v51; // t0
  unsigned __int8 v52; // bl
  char *v53; // edi
  int v54; // eax
  int *v55; // ebx
  int v56; // ebp
  char v57; // al
  char *v58; // ecx
  unsigned __int8 v59; // al
  int v60; // eax
  void (__cdecl *v61)(int *, int, int, int *); // ebp
  int *v62; // edi
  int v63[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v64; // [esp+2Ch] [ebp-80h] BYREF
  int v65; // [esp+30h] [ebp-7Ch] BYREF
  char *v66; // [esp+34h] [ebp-78h]
  int *v67; // [esp+38h] [ebp-74h]
  int v68; // [esp+3Ch] [ebp-70h]
  int v69; // [esp+40h] [ebp-6Ch]
  int v70; // [esp+44h] [ebp-68h]
  int v71; // [esp+48h] [ebp-64h]
  int *v72; // [esp+4Ch] [ebp-60h]
  int v73; // [esp+50h] [ebp-5Ch]
  int v74; // [esp+54h] [ebp-58h]
  int v75; // [esp+58h] [ebp-54h]
  int v76; // [esp+5Ch] [ebp-50h] BYREF

  v72 = &v76;
  v70 = a3;
  v69 = a2;
  v68 = a1;
  v4 = dword_41C000;
  v5 = &dword_41C000[-27648];
  v67 = &dword_41C000[-27648];
  while ( 1 )
  {
    v9 = *v4;
    v7 = (unsigned int)v4++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v4;
        v4 = (int *)((char *)v4 + 1);
        *(_BYTE *)v5 = v6;
        v5 = (int *)((char *)v5 + 1);
      }
      else
      {
        v11 = 1;
        while ( 1 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v11 += v12 + v11;
          v7 = __CFADD__(v13, v13);
          v16 = 2 * v13 == 0;
          v8 = 2 * v13;
          if ( v7 )
          {
            if ( !v16 )
              break;
            v17 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v18 = v7 + v17;
            v7 = __CFADD__(v7, v17) | __CFADD__(v17, v18);
            v8 = v17 + v18;
            if ( v7 )
              break;
          }
        }
        v7 = v11 < 3;
        v19 = v11 - 3;
        if ( !v7 )
        {
          v20 = v19 << 8;
          LOBYTE(v20) = *(_BYTE *)v4;
          v4 = (int *)((char *)v4 + 1);
          v21 = ~v20;
          if ( !v21 )
          {
            v44 = v67;
            v45 = v67;
            v46 = 79;
            while ( 1 )
            {
              v47 = *(_BYTE *)v45;
              v45 = (int *)((char *)v45 + 1);
              v48 = v47 + 24;
              while ( v48 <= 1u && !*(_BYTE *)v45 )
              {
                v49 = *v45;
                LOWORD(v49) = BYTE1(*v45);
                v50 = __ROL4__(v49, 16);
                v51 = v50;
                LOBYTE(v50) = BYTE1(v50);
                BYTE1(v50) = v51;
                v52 = *((_BYTE *)v45 + 4) + 24;
                *v45 = (int)v44 + v50 - (_DWORD)v45;
                v45 = (int *)((char *)v45 + 5);
                v48 = v52;
                if ( !--v46 )
                {
                  v53 = (char *)(v44 + 31744);
LABEL_38:
                  v54 = *(_DWORD *)v53;
                  if ( *(_DWORD *)v53 )
                  {
                    v55 = (int *)((char *)v44 + *((_DWORD *)v53 + 1));
                    v53 += 8;
                    v56 = ((int (__cdecl *)(int, int, int, int, int, int *, int, int, int))v44[35919])(
                            (int)v44 + v54 + 143536,
                            v68,
                            v69,
                            v70,
                            v71,
                            v72,
                            v73,
                            v74,
                            v75);
                    while ( 1 )
                    {
                      v57 = *v53++;
                      if ( !v57 )
                        goto LABEL_38;
                      v58 = v53;
                      v66 = v53;
                      v59 = v57 - 1;
                      do
                      {
                        if ( !v58 )
                          break;
                        v16 = *v53++ == (char)v59;
                        --v58;
                      }
                      while ( !v16 );
                      v60 = ((int (__cdecl *)(int, char *))v44[35920])(v56, v66);
                      if ( !v60 )
                        break;
                      *v55++ = v60;
                    }
                    v54 = ((int (*)(void))v44[35924])();
                  }
                  v61 = (void (__cdecl *)(int *, int, int, int *))v44[35921];
                  v62 = v44 - 1024;
                  v64 = v54;
                  v61(v44 - 1024, 4096, 4, &v64);
                  *((_BYTE *)v62 + 479) &= 0x7Fu;
                  *((_BYTE *)v62 + 519) &= 0x7Fu;
                  v61(v44 - 1024, 4096, v63[0], v63);
                  do
                    v64 = 0;
                  while ( &v64 != &v65 - 32 );
                  JUMPOUT(0x401209);
                }
              }
            }
          }
          a4 = v21;
        }
        v22 = __CFADD__(v8, v8);
        v23 = 2 * v8;
        if ( !v23 )
        {
          v24 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v25 = v7 + v24;
          v22 = __CFADD__(v7, v24) | __CFADD__(v24, v25);
          v23 = v24 + v25;
        }
        v26 = v22;
        v27 = __CFADD__(v23, v23);
        v8 = 2 * v23;
        if ( !v8 )
        {
          v28 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v29 = v7 + v28;
          v27 = __CFADD__(v7, v28) | __CFADD__(v28, v29);
          v8 = v28 + v29;
        }
        v30 = v26 + v27 + v26;
        if ( !v30 )
        {
          v31 = 1;
          while ( 1 )
          {
            v32 = __CFADD__(v8, v8);
            v33 = 2 * v8;
            if ( !v33 )
            {
              v34 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v35 = v7 + v34;
              v32 = __CFADD__(v7, v34) | __CFADD__(v34, v35);
              v33 = v34 + v35;
            }
            v31 += v32 + v31;
            v7 = __CFADD__(v33, v33);
            v36 = 2 * v33 == 0;
            v8 = 2 * v33;
            if ( v7 )
            {
              if ( !v36 )
                break;
              v37 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v38 = v7 + v37;
              v7 = __CFADD__(v7, v37) | __CFADD__(v37, v38);
              v8 = v37 + v38;
              if ( v7 )
                break;
            }
          }
          v30 = v31 + 2;
        }
        v39 = (a4 < 0xFFFFF300) + v30 + 1;
        v40 = (char *)v5 + a4;
        if ( a4 <= 0xFFFFFFFC )
        {
          do
          {
            v42 = *(_DWORD *)v40;
            v40 += 4;
            *v5++ = v42;
            v43 = v39 <= 4;
            v39 -= 4;
          }
          while ( !v43 );
          v5 = (int *)((char *)v5 + v39);
        }
        else
        {
          do
          {
            v41 = *v40++;
            *(_BYTE *)v5 = v41;
            v5 = (int *)((char *)v5 + 1);
            --v39;
          }
          while ( v39 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// 421B43: positive sp value 50 has been found
// 421B43: control flows out of bounds to 401209
// 41C000: using guessed type int dword_41C000[512];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
