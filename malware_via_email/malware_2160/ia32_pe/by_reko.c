// subject_idata.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 g_dw42A078 = 0x0002A0B1; // 0042A078
word32 g_dw42A07C = 172227; // 0042A07C
word32 g_dw42A080 = 0x0002A0CE; // 0042A080
word32 g_dw42A084 = 0x0002A0EC; // 0042A084
word32 g_dw42A088 = 0x0002A0FD; // 0042A088
word32 g_dw42A08C = 0x0002A110; // 0042A08C
word32 g_dw42A090 = 0x0002A122; // 0042A090
word32 g_dw42A098 = 172357; // 0042A098
word32 g_dw42A09C = 172372; // 0042A09C
// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	ui32 eax;
	ui32 ecx;
	ui32 edi;
	word32 esi;
	ui32 eax_11 = ecx - 0x01 & edi;
	fn0040105F((word16) (eax_11 + (edi + esi)) + (word16) esi * 0x02 + (word16) esi + (word16) esi, 13128104, eax_11);
	return fn0040105F(0x00, 0x00, eax);
}

// 0040105F: Register word32 fn0040105F(Stack word16 wArg00, Stack word32 dwArg14, Stack ui32 dwArg24)
// Called from:
//      Win32CrtStartup
word32 fn0040105F(word16 wArg00, word32 dwArg14, ui32 dwArg24)
{
	ptr32 fp;
	struct Eq_35 * fs;
	word32 dwArg00;
	word16 eax_16_16_43 = SLICE(dwArg00, word16, 16);
	while (true)
	{
		word16 * eax_44 = SEQ(eax_16_16_43, 0x00);
		if (*eax_44 == 23117)
			break;
		eax_16_16_43 = SLICE(eax_44 - 0x00010000, word16, 16);
	}
	word32 eax_117 = SEQ(eax_16_16_43, 0x00);
	struct Eq_53 * ebx_363 = fn00401324((word16) fp - 0x28);
	word32 eax_397 = fs->dw0018;
	struct Eq_65 * esp_465;
	struct Eq_53 * ecx_468;
	ebx_363->ptr0020();
	esp_465->ptrFFFFFFFC = fp - 40;
	esp_465->ptrFFFFFFF8 = eax_397 + 52;
	struct Eq_53 * esi_475 = esp_465->ptrFFFFFFF8;
	struct Eq_53 * eax_479 = esi_475->ptrFFFFFFFF;
	esp_465->ptrFFFFFFFC = esp_465->ptrFFFFFFFC;
	esp_465->ptrFFFFFFF8 = esi_475;
	struct Eq_53 * esi_484 = esp_465->ptrFFFFFFF8;
	struct Eq_53 * edi_486 = esp_465->ptrFFFFFFFC;
	esp_465->ptr0038 = eax_479;
	word16 ecx_16_16_861 = SLICE(ecx_468, word16, 16);
	esp_465->ptrFFFFFFFC = ebx_363;
	esp_465->ptrFFFFFFFC -= 0x04;
	esp_465->ptrFFFFFFF8 = edi_486;
	esp_465->ptrFFFFFFF4 = esi_484;
	struct Eq_53 * esi_498 = esp_465->ptrFFFFFFF4;
	esp_465->ptrFFFFFFF8 = esp_465->ptrFFFFFFFC;
	esp_465->ptrFFFFFFF4 = esi_498;
	struct Eq_53 * esi_507 = esp_465->ptrFFFFFFF4;
	esp_465->ptrFFFFFFF8 = esp_465->ptrFFFFFFF8->ptr0000;
	esp_465->ptrFFFFFFF4 = esi_507;
	struct Eq_53 * esi_516 = esp_465->ptrFFFFFFF4;
	esp_465->ptr003C = ebx_363;
	struct Eq_53 * edi_521 = esp_465->ptrFFFFFFFC;
	esp_465->ptrFFFFFFFC = eax_479;
	esp_465->ptrFFFFFFF8 = edi_521;
	esp_465->ptrFFFFFFF4 = esi_516;
	struct Eq_53 * esi_529 = esp_465->ptrFFFFFFF4;
	struct Eq_53 * edi_531 = esp_465->ptrFFFFFFF8;
	esp_465->ptrFFFFFFF8 = ecx_468;
	esp_465->ptrFFFFFFF4 = edi_531;
	esp_465->ptrFFFFFFF0 = esi_529;
	struct Eq_53 * esi_539 = esp_465->ptrFFFFFFF0;
	struct Eq_53 * edi_541 = esp_465->ptrFFFFFFF4;
	esp_465->ptrFFFFFFF4 = esp_465 - 8;
	esp_465->ptrFFFFFFF0 = (struct Eq_53 *) 0x40;
	esp_465->dwFFFFFFEC = esp_465->dw0020;
	esp_465->ptrFFFFFFE8 = edi_541;
	esp_465->ptrFFFFFFE4 = esi_539;
	struct Eq_53 * esi_555 = esp_465->ptrFFFFFFE4;
	struct Eq_53 * edi_557 = esp_465->ptrFFFFFFE8;
	esp_465->ptrFFFFFFE8 = esp_465->ptr0014;
	esp_465->ptrFFFFFFE4 = edi_557;
	esp_465->ptrFFFFFFE0 = esi_555;
	struct Eq_53 * esi_566 = esp_465->ptrFFFFFFE0;
	esp_465->ptrFFFFFFE4 = esp_465->ptrFFFFFFE4;
	esp_465->ptrFFFFFFE0 = esi_566;
	struct Eq_53 * esi_575 = esp_465->ptrFFFFFFE0;
	struct Eq_53 * edi_577 = esp_465->ptrFFFFFFE4;
	esp_465->dw0018 = 0x00;
	esp_465->ptrFFFFFFE4 = edi_577;
	esp_465->ptrFFFFFFE0 = esi_575;
	struct Eq_273 * esp_588;
	struct Eq_274 Eq_35::* eax_589;
	word32 ecx_591;
	esp_465->ptrFFFFFFE4->ptr000C();
	struct Eq_53 * esi_584 = esp_465->ptrFFFFFFE0;
	word16 ecx_16_16_863 = SLICE(ecx_591, word16, 16);
	esp_588->ptr0004 = esp_588->ptr0004;
	esp_588->ptr0000 = esi_584;
	struct Eq_53 * esi_602 = esp_588->ptr0000;
	esp_588->ptr0008 = esp_588->ptr0008;
	esp_588->ptr0004 = esi_602;
	struct Eq_53 * esi_612 = esp_588->ptr0004;
	esp_588->ptr000C = esp_588->ptr0008;
	esp_588->ptr0008 = esi_612;
	struct Eq_53 * esi_626 = esp_588->ptr0010;
	esp_588->ptr0010 = esp_588->ptr000C;
	esp_588->ptr000C = esi_626;
	struct Eq_53 * esi_632 = esp_588->ptr000C;
	esp_588->ptr0010 = esp_588->ptr0010;
	esp_588->ptr000C = esi_632;
	struct Eq_53 * esi_641 = esp_588->ptr000C;
	struct Eq_350 * eax_645 = (fs->*eax_589).ptr002F;
	esp_588->ptr0010 = esp_588->ptr0010;
	esp_588->ptr000C = esi_641;
	struct Eq_53 * esi_650 = esp_588->ptr000C;
	esp_588->ptr0010 = esp_588->ptr0010;
	esp_588->ptr000C = esi_650;
	struct Eq_53 * esi_659 = esp_588->ptr000C;
	word32 ecx_663 = eax_645->dw0004;
	esp_588->ptr0010 = esp_588->ptr0010;
	esp_588->ptr000C = esi_659;
	struct Eq_53 * esi_668 = esp_588->ptr000C;
	struct Eq_53 * edi_670 = esp_588->ptr0010;
	esp_588->dw003C = esp_588->dw003C ^ ecx_663;
	esp_588->ptr0010 = edi_670;
	esp_588->ptr000C = esi_668;
	struct Eq_53 * esi_679 = esp_588->ptr000C;
	esp_588->ptrFFFFFF08 = esp_588->ptr0010;
	esp_588->ptrFFFFFF04 = esi_679;
	struct Eq_53 * esi_689 = esp_588->ptrFFFFFF04;
	byte * eax_693 = esp_588->ptr001C;
	esp_588->ptrFFFFFF08 = esp_588->ptrFFFFFF08;
	esp_588->ptrFFFFFF04 = esi_689;
	int32 ecx_702 = esp_588->dw002C;
	return BeginNjsukaqfoi(eax_693, ecx_702, esp_588->ptr0018, esp_588->ptr0024, esp_588->dw0028, esp_588->dw0040, esp_588->ptr0044);
}

// 0040130E: Register (ptr32 byte) BeginNjsukaqfoi(Register (ptr32 byte) eax, Register int32 ecx, Stack (ptr32 byte) dwArg010C, Stack ptr32 dwArg0118, Stack up32 dwArg011C, Stack word32 dwArg0134, Stack (ptr32 Eq_453) dwArg0138)
// Called from:
//      fn0040105F
byte * BeginNjsukaqfoi(byte * eax, int32 ecx, byte * dwArg010C, ptr32 dwArg0118, up32 dwArg011C, word32 dwArg0134, struct Eq_453 * dwArg0138)
{
	struct Eq_470 * fp;
	Eq_471 eax_26 = 0x00;
	do
	{
		byte al_33 = (byte) eax_26;
		word32 ecx_32 = fp + 8 + eax_26;
		*ecx_32 = al_33;
		eax_26 = (word32) eax_26 + 1;
	} while (eax_26 < 0x0100);
	ptr32 ecx_115 = 0x00;
	int32 esi_129 = 0x00;
	Eq_490 ebp_133 = 0x00;
	do
	{
		byte ah_144 = Mem143[fp + 8 + ebp_133:byte];
		word32 edx_165 = (word32) *((word32) ecx_115 + ecx);
		word32 ebx_166 = (word32) ah_144;
		int32 edx_187 = (word32) (byte) (edx_165 + (ebx_166 + esi_129));
		++ecx_115;
		if (ecx_115 >= dwArg0118)
			ecx_115 = 0x00;
		byte al_232 = fp->a0008[edx_187];
		word32 esi_245 = fp + 8 + ebp_133;
		*esi_245 = al_232;
		(fp - 16)[edx_187 + 0x18] = ah_144;
		ebp_133 = (word32) ebp_133 + 1;
		esi_129 = edx_187;
	} while (ebp_133 < 0x0100);
	byte ch_353 = SLICE(dwArg0134, byte, 8);
	byte cl_701 = (byte) dwArg0134;
	word16 ecx_16_16_702 = SLICE(dwArg0134, word16, 16);
	word32 ecx_703 = SEQ(ecx_16_16_702, ch_353 + 0x88, cl_701);
	if (ch_353 == 0x78)
	{
		int32 eax_361 = 0x00;
		int32 esi_379 = 0x00;
		up32 ebp_383 = dwArg011C;
		byte * edi_384 = eax;
		if (dwArg011C > 0x00)
		{
			do
			{
				int32 eax_404 = (word32) ((byte) eax_361 + 0x01);
				byte cl_413 = fp->a0008[eax_404];
				byte dl_433 = cl_413 + (byte) esi_379;
				int32 edx_434 = (word32) dl_433;
				fp->a0008[eax_404] = fp->a0008[edx_434];
				fp->a0008[edx_434] = cl_413;
				ui8 ch_580 = *edi_384 ^ *((word32) (fp - 0x0C) + ((word32) ((fp->a0008)[eax_404] + cl_413) + 0x14));
				*edi_384 = ch_580;
				eax_361 = eax_404;
				esi_379 = edx_434;
				++edi_384;
				--ebp_383;
			} while (ebp_383 != 0x00);
		}
		return dwArg010C;
	}
	else
	{
		struct Eq_546 * esp_707;
		word32 eax_708;
		word32 ecx_709;
		dwArg0138->ptr0020();
		esp_707->ptrFFFFFFFC = dwArg0118;
		esp_707->dwFFFFFFF8 = edx_187;
		struct Eq_558 * esp_721;
		word32 eax_722;
		word32 ecx_723;
		dwArg0138->ptr0008();
		int32 esi_717 = esp_707->dwFFFFFFF8;
		esp_721->ptrFFFFFFFC = esp_707->ptrFFFFFFFC;
		esp_721->dwFFFFFFF8 = esi_717;
		struct Eq_577 * esp_735;
		word32 eax_736;
		word32 ecx_737;
		dwArg0138->ptr0014();
		int32 esi_731 = esp_721->dwFFFFFFF8;
		esp_735->ptrFFFFFFFC = esp_721->ptrFFFFFFFC;
		esp_735->dwFFFFFFF8 = esi_731;
		struct Eq_596 * esp_749;
		word32 eax_750;
		word32 ecx_751;
		dwArg0138->ptr001C();
		int32 esi_745 = esp_735->dwFFFFFFF8;
		esp_749->ptrFFFFFFFC = esp_735->ptrFFFFFFFC;
		esp_749->dwFFFFFFF8 = esi_745;
		struct Eq_615 * esp_763;
		word32 eax_764;
		word32 ecx_765;
		dwArg0138->ptrFFFFFFFC();
		int32 esi_759 = esp_749->dwFFFFFFF8;
		esp_763->ptrFFFFFFFC = esp_749->ptrFFFFFFFC;
		esp_763->dwFFFFFFF8 = esi_759;
		struct Eq_634 * esp_777;
		word32 eax_778;
		word32 ecx_779;
		dwArg0138->ptr0014();
		int32 esi_773 = esp_763->dwFFFFFFF8;
		esp_777->ptrFFFFFFFC = esp_763->ptrFFFFFFFC;
		esp_777->dwFFFFFFF8 = esi_773;
		byte * eax_792;
		dwArg0138->ptr0014();
		return eax_792;
	}
}

// 00401324: Register word32 fn00401324(Stack word16 wArg00)
// Called from:
//      fn0040105F
word32 fn00401324(word16 wArg00)
{
	word32 dwArg00;
	word16 eax_16_16_177 = SLICE(dwArg00, word16, 16);
	while (true)
	{
		word16 ax_44 = *SEQ(eax_16_16_177, 0x00);
		word32 eax_157 = SEQ(eax_16_16_177, ax_44 + 42421);
		if (ax_44 == 23117)
			break;
		eax_16_16_177 = SLICE(eax_157 - 0x00010000, word16, 16);
	}
	struct Eq_729 * eax_66 = SEQ(eax_16_16_177, 0x00);
	return eax_66 + Mem98[eax_66 + Mem89[(eax_66 + Mem61[eax_66 + 60:word32]) + 0x80:word32]:word32] + 0x04;
}

