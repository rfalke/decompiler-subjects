/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int@<eax>, char *@<edx>, int@<ecx>, unsigned int@<ebp>);

//-------------------------------------------------------------------------
// Data declarations

int dword_5DAC54; // weak
int dword_9D0000[512] =
{
  -67174407,
  18468,
  130876754,
  -1728014609,
  9437199,
  -365521664,
  -80091904,
  -730103810,
  -2111767181,
  1075037805,
  -1297426944,
  -164911864,
  -1018691584,
  -9465,
  961767679,
  -1891762128,
  1412488960,
  -1056946331,
  1284179146,
  -970389468,
  -2126622785,
  -9,
  -1073041217,
  -1679800339,
  -2129075775,
  1020358114,
  417972680,
  -964561367,
  458496,
  -318799002,
  1656815615,
  -931017215,
  1924497733,
  1076647563,
  -2117523126,
  -158488895,
  171521546,
  -537001993,
  -297669003,
  1725104082,
  -1442397503,
  -1996033855,
  1691888076,
  -520616561,
  -1686110226,
  -1781217379,
  -100572833,
  -1061036407,
  -604032763,
  2012995113,
  146358267,
  150025982,
  -621343922,
  -1557027597,
  935334889,
  973074520,
  -32561680,
  -1955020949,
  -785044887,
  -874600023,
  130744319,
  -299812471,
  1075839080,
  -138150912,
  -597261614,
  -1229642346,
  -1510205871,
  1057795593,
  692453411,
  -397267456,
  -537151665,
  -650276353,
  -1111839621,
  -226411530,
  1173150,
  691164350,
  -1140903373,
  -947781664,
  238172117,
  -537401601,
  603031112,
  -427710704,
  1205189589,
  -122997,
  -942599745,
  -1077718513,
  -4198452,
  -427173897,
  689343310,
  -27843136,
  134208511,
  -2047856131,
  -1980795456,
  1287815642,
  -1056797808,
  745669344,
  -161944439,
  -1025523361,
  -856679676,
  -1266417461,
  889240069,
  -678253134,
  1609990139,
  2080379755,
  -272883456,
  -402621929,
  -1090453503,
  479437568,
  2113306111,
  -1277610944,
  231265745,
  -789675695,
  1682506239,
  1006831243,
  -1197077505,
  202720036,
  -134135392,
  -1083775359,
  -2020923519,
  150123551,
  2114254785,
  2110161368,
  129448331,
  284735527,
  -772327541,
  -274266065,
  -511619671,
  -520094177,
  -266297339,
  1745878977,
  -1033707788,
  -705050175,
  700449106,
  -2118190981,
  -10765106,
  62971862,
  -1973374385,
  -906272893,
  1916823649,
  -1014421169,
  -268255748,
  -134217977,
  -1691842052,
  1749401905,
  -1459170396,
  -1742352511,
  827692883,
  -15112458,
  66838767,
  1498620948,
  99862327,
  -117479953,
  -1994524479,
  1013465393,
  -1829243141,
  735666696,
  1213584846,
  1234109258,
  -1722787757,
  -150586330,
  -1981873697,
  -1177094352,
  1264319522,
  1073447711,
  -1628386020,
  -1947729450,
  -2138522050,
  -7866604,
  18676799,
  834806270,
  1208872889,
  -2142253303,
  -88004042,
  482087707,
  -2113954820,
  -976067096,
  -1712594207,
  -1152267514,
  373277063,
  -715788314,
  726275789,
  2114530590,
  -1980702544,
  -174646047,
  -145649059,
  504337872,
  248085555,
  -1393527880,
  -335427115,
  -1159761921,
  871504911,
  835715338,
  -2127000599,
  -1841752630,
  -1178140298,
  535165007,
  806679023,
  96608761,
  -532282997,
  -246403100,
  1517750256,
  -1736113796,
  995606184,
  102490409,
  -1717764001,
  2126098915,
  -1441404194,
  1334466428,
  -1057181584,
  -1903596258,
  -1940448277,
  -65146399,
  -234765557,
  425574433,
  1588185755,
  -245482216,
  1826551780,
  -503379257,
  -17320507,
  -743726819,
  -327100811,
  1352468363,
  -2113023635,
  -634261509,
  1953884041,
  -954085294,
  758687921,
  -493372936,
  -493667837,
  -485990291,
  1127349903,
  1273814495,
  -1980222703,
  1597028567,
  921114108,
  19879152,
  176945602,
  -159299173,
  -600042692,
  32675335,
  474815946,
  2003275183,
  -16649996,
  -54305232,
  -1974862625,
  -2885872,
  -82801709,
  -829860270,
  612142069,
  -1957571312,
  -16839340,
  1481833456,
  387318672,
  1695154937,
  -129852660,
  -936217613,
  -1712326261,
  981532555,
  837580032,
  588674297,
  -652844036,
  -1948598439,
  1368408558,
  1275333203,
  75823193,
  -16711351,
  -805310984,
  1720767025,
  -1040902261,
  2360034,
  1524040185,
  -1872766565,
  -521615871,
  -1421736573,
  -1793164961,
  147079476,
  1317129176,
  -550901821,
  541393152,
  704651787,
  1409356176,
  1074897696,
  -28359161,
  -2142240795,
  5987072,
  1593854783,
  -150863701,
  194909351,
  2071854305,
  1608247039,
  61538532,
  -1408191751,
  1080164498,
  -1577045982,
  -1207934976,
  -529010725,
  -1605784344,
  533135434,
  1041184256,
  -888617837,
  -134759163,
  -131577482,
  185198592,
  776359537,
  1560823108,
  -18799521,
  1032193893,
  -1156176384,
  1579782400,
  2129591795,
  706528000,
  329515223,
  89733121,
  -537944297,
  226869975,
  -1959131630,
  537000448,
  -273723111,
  -1619052666,
  -1104017299,
  -2012188789,
  3938651,
  -1994888956,
  -131498392,
  -1996695705,
  11635712,
  -695287563,
  -889180160,
  1609752473,
  1401684212,
  1192142305,
  2655184,
  -12718096,
  -227434497,
  1023415490,
  -637533528,
  1925428920,
  316974710,
  -80232525,
  353828482,
  1426105088,
  -1929011759,
  -167716523,
  -111152585,
  -2013265688,
  9528715,
  -881393411,
  -3449597,
  2490343,
  14978784,
  1725474892,
  1728105660,
  1563051336,
  766231808,
  -521207968,
  697822615,
  -1594682998,
  956354304,
  1878060860,
  810567673,
  -1715141175,
  374145200,
  -16260607,
  -1877770245,
  -1392448022,
  672610304,
  -2030014946,
  286901155,
  -2105620993,
  1997942719,
  572934144,
  490539264,
  15057250,
  260236560,
  -1925508146,
  1480743237,
  1895829868,
  -620784033,
  -819555074,
  721428565,
  268121600,
  12502540,
  -1614873041,
  -1702677521,
  170885388,
  -1620370747,
  -16775353,
  -436207617,
  1988684661,
  -820828299,
  1587806823,
  346164803,
  1862803763,
  1960168076,
  668431869,
  -1008513403,
  1960511435,
  -1394225055,
  -1728004951,
  1674698240,
  -60925697,
  -1594425257,
  1507133024,
  2084507634,
  -243518070,
  572714506,
  378416113,
  2021092621,
  267422169,
  -1412092178,
  394181987,
  -1672024489,
  1888681727,
  633536743,
  -114562322,
  1144277248,
  1639825198,
  2013656643,
  586759699,
  -1209310976,
  -1252102193,
  701890799,
  -1361990144,
  118019198,
  2144190317,
  704247688,
  -773537419,
  975202743,
  1788739797,
  1215850443,
  393458,
  -2103724764,
  504237861,
  -2142475365,
  -527493217,
  -440050201,
  2046163931,
  -2118682368,
  53468186,
  -620363603,
  -53384753,
  -2086470369,
  558140338,
  -1760347610,
  -294007552,
  -305794048,
  303693559,
  155282432,
  14424865,
  82927265,
  -1747204716,
  -803801115,
  7062086,
  846915082,
  -551751033,
  -1642096900,
  -122339553,
  2125588929,
  2015432872,
  1542072383,
  1522679695,
  68055802,
  688807439,
  -1011300198,
  1732003827,
  -110215345,
  2143135551,
  15163904,
  -1179166785,
  -1056163341,
  687274550,
  226689189,
  -1885985440,
  110092966,
  -108520577,
  2075879395,
  -2092635411,
  -780552079,
  2035271851,
  922991670,
  901696841,
  -1633003587,
  -1738439525,
  -2022526372,
  1462856362,
  2015950959,
  -1627384627,
  -643529126,
  -70785464,
  1193439201,
  1827569030,
  206819384,
  1929890083,
  -521803710,
  816215423,
  234926927,
  -1008412416,
  -1283079123,
  -542384157,
  -1851326828,
  898858807,
  -864393207,
  -1224810276,
  1202045434,
  1113071667,
  3211460,
  1308978403,
  -828398012,
  530129050,
  -90919657,
  -11494896,
  1321591484
}; // weak


//----- (009D8490) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>)
{
  int *v4; // esi
  int *v5; // edi
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  int i; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  unsigned int v16; // eax
  bool v17; // zf
  int v18; // ebx
  int v19; // ebx
  int v20; // ett
  unsigned int v21; // eax
  bool v22; // cf
  int v23; // ebx
  int v24; // ett
  unsigned int v25; // eax
  unsigned int v26; // eax
  int v27; // eax
  bool v28; // cf
  int v29; // ebx
  int v30; // ett
  BOOL v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  int v35; // ecx
  int v36; // ecx
  bool v37; // cf
  int v38; // ebx
  int v39; // ebx
  int v40; // ett
  bool v41; // zf
  int v42; // ebx
  int v43; // ett
  unsigned int v44; // ecx
  char v45; // al
  int v46; // eax
  bool v47; // cc
  int *v48; // esi
  int *v49; // edi
  int v50; // ecx
  char v51; // al
  int *v52; // eax
  int v53; // eax
  int v54; // eax
  char v55; // t0
  char v56; // bl
  void (__cdecl *v57)(int *, int, int, int *); // ebp
  int *v58; // edi
  int v59[4]; // [esp+10h] [ebp-90h] BYREF
  int *v60; // [esp+20h] [ebp-80h] BYREF
  _DWORD v61[8]; // [esp+24h] [ebp-7Ch] BYREF
  int v62; // [esp+44h] [ebp-5Ch] BYREF

  v61[4] = &v62;
  v61[2] = a3;
  v61[1] = a2;
  v61[0] = a1;
  v4 = dword_9D0000;
  v5 = &dword_9D0000[-1522688];
  v60 = &dword_9D0000[-1522688];
  while ( 1 )
  {
    v9 = *v4;
    v7 = (unsigned int)v4++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v4;
        v4 = (int *)((char *)v4 + 1);
        *(_BYTE *)v5 = v6;
        v5 = (int *)((char *)v5 + 1);
      }
      else
      {
        for ( i = 1; ; i = v21 + v22 + v21 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v16 = i + v12 + i;
          v7 = __CFADD__(v13, v13);
          v17 = 2 * v13 == 0;
          v18 = 2 * v13;
          if ( v7 )
          {
            if ( !v17 )
              break;
            v19 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v20 = v7 + v19;
            v7 = __CFADD__(v7, v19) | __CFADD__(v19, v20);
            v18 = v19 + v20;
            if ( v7 )
              break;
          }
          v21 = v16 - 1;
          v22 = __CFADD__(v18, v18);
          v8 = 2 * v18;
          if ( !v8 )
          {
            v23 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v24 = v7 + v23;
            v22 = __CFADD__(v7, v23) | __CFADD__(v23, v24);
            v8 = v23 + v24;
          }
        }
        v7 = v16 < 3;
        v25 = v16 - 3;
        if ( v7 )
        {
          v28 = __CFADD__(v18, v18);
          v18 *= 2;
          if ( !v18 )
          {
            v29 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v30 = v7 + v29;
            v28 = __CFADD__(v7, v29) | __CFADD__(v29, v30);
            v18 = v29 + v30;
          }
        }
        else
        {
          v26 = v25 << 8;
          LOBYTE(v26) = *(_BYTE *)v4;
          v4 = (int *)((char *)v4 + 1);
          v27 = ~v26;
          if ( !v27 )
          {
            v48 = v60;
            v49 = v60;
            v50 = 6;
            while ( 1 )
            {
              v51 = *(_BYTE *)v49;
              v49 = (int *)((char *)v49 + 1);
              LOBYTE(v52) = v51 + 24;
              while ( (unsigned __int8)v52 <= 1u && *(_BYTE *)v49 == 1 )
              {
                v53 = *v49;
                LOWORD(v53) = BYTE1(*v49);
                v54 = __ROL4__(v53, 16);
                v55 = v54;
                LOBYTE(v54) = BYTE1(v54);
                BYTE1(v54) = v55;
                v56 = *((_BYTE *)v49 + 4) + 24;
                v52 = (int *)((char *)v48 + v54 - (_DWORD)v49);
                *v49 = (int)v52;
                v49 = (int *)((char *)v49 + 5);
                LOBYTE(v52) = v56;
                if ( !--v50 )
                {
                  v57 = *(void (__cdecl **)(int *, int, int, int *))((char *)&dword_5DAC54 + (_DWORD)v48);
                  v58 = v48 - 1024;
                  v60 = v52;
                  ((void (__fastcall *)(_DWORD, char *, int *, int, int, int **))v57)(0, a2, v48 - 1024, 4096, 4, &v60);
                  *((_BYTE *)v58 + 799) &= ~0x80u;
                  *((_BYTE *)v58 + 839) &= ~0x80u;
                  v57(v48 - 1024, 4096, v59[0], v59);
                  do
                    v60 = 0;
                  while ( &v60 != &v61[-32] );
                  JUMPOUT(0x40115E);
                }
              }
            }
          }
          v28 = v27 & 1;
          a4 = v27 >> 1;
        }
        v31 = v28;
        v32 = __CFADD__(v18, v18);
        v8 = 2 * v18;
        if ( !v8 )
        {
          v33 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v34 = v7 + v33;
          v32 = __CFADD__(v7, v33) | __CFADD__(v33, v34);
          v8 = v33 + v34;
        }
        v35 = v31 + v32 + v31;
        if ( !v35 )
        {
          v36 = 1;
          while ( 1 )
          {
            v37 = __CFADD__(v8, v8);
            v38 = 2 * v8;
            if ( !v38 )
            {
              v39 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v40 = v7 + v39;
              v37 = __CFADD__(v7, v39) | __CFADD__(v39, v40);
              v38 = v39 + v40;
            }
            v36 += v37 + v36;
            v7 = __CFADD__(v38, v38);
            v41 = 2 * v38 == 0;
            v8 = 2 * v38;
            if ( v7 )
            {
              if ( !v41 )
                break;
              v42 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v43 = v7 + v42;
              v7 = __CFADD__(v7, v42) | __CFADD__(v42, v43);
              v8 = v42 + v43;
              if ( v7 )
                break;
            }
          }
          v35 = v36 + 2;
        }
        v44 = (a4 < 0xFFFFFB00) + v35 + 1;
        a2 = (char *)v5 + a4;
        if ( a4 <= 0xFFFFFFFC )
        {
          do
          {
            v46 = *(_DWORD *)a2;
            a2 += 4;
            *v5++ = v46;
            v47 = v44 <= 4;
            v44 -= 4;
          }
          while ( !v47 );
          v5 = (int *)((char *)v5 + v44);
        }
        else
        {
          do
          {
            v45 = *a2++;
            *(_BYTE *)v5 = v45;
            v5 = (int *)((char *)v5 + 1);
            --v44;
          }
          while ( v44 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// 9D85DF: positive sp value 5C has been found
// 9D85DF: control flows out of bounds to 40115E
// 5DAC54: using guessed type int dword_5DAC54;
// 9D0000: using guessed type int dword_9D0000[512];
// 9D8490: using guessed type int anonymous_0[4];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
