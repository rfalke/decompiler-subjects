/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>);

//-------------------------------------------------------------------------
// Data declarations

int dword_518A50; // weak
int dword_910000[512] =
{
  -1,
  77472765,
  1908470263,
  466476374,
  15360900,
  956691116,
  -2130943904,
  1421996176,
  -1216467488,
  -1,
  -2057432923,
  -831047139,
  -774494564,
  1725933530,
  72754819,
  -1277801024,
  -1869072029,
  -1330883364,
  -1,
  -1910481107,
  1505388408,
  -1120689676,
  34695489,
  -1582442109,
  -1360345925,
  -1515913165,
  -2030419192,
  -1,
  1440289818,
  1434812152,
  -1510699383,
  356963708,
  1235051229,
  -1825571766,
  458724246,
  552344046,
  -1,
  -1825023799,
  1178887968,
  1399246300,
  -1506181535,
  -1234617194,
  -871754761,
  2102388598,
  636836404,
  -1,
  -2003142807,
  -103157499,
  -1761352511,
  -2103878950,
  705561991,
  106366436,
  1600492563,
  75427467,
  -1,
  -216800514,
  2090650703,
  1149042274,
  957072104,
  1731624798,
  795457219,
  1436800508,
  -303749956,
  -1,
  510340959,
  559320637,
  834070329,
  472151966,
  -1220242532,
  2080567005,
  -146240740,
  -663050074,
  -1,
  -836889288,
  2118430626,
  952767255,
  1148164385,
  -464630890,
  1750816783,
  -473613910,
  2105840185,
  -1,
  1431990535,
  1864011490,
  956601376,
  -1922256981,
  1092539510,
  -1390443579,
  -1178401227,
  1496995960,
  -1,
  -2096872416,
  301820664,
  400828365,
  -1785813874,
  -1624145094,
  1282400775,
  538754464,
  -1362504322,
  -1,
  -1347177559,
  -964138381,
  -1222628885,
  -1069693909,
  1471663281,
  -1965044374,
  -1092825055,
  -2108338825,
  -1,
  -1296889696,
  935827314,
  144677529,
  936494072,
  1167674755,
  -277315812,
  1128944194,
  -1628413276,
  -1,
  -368792365,
  1296031149,
  -192929203,
  -476203134,
  -932265432,
  1236473818,
  1591343841,
  -1885070245,
  -1,
  978924517,
  920850285,
  1913719501,
  1994464103,
  -981200403,
  -1501259782,
  -1003150029,
  -1485838589,
  -1,
  135876943,
  1679941776,
  2010594872,
  1641532249,
  -1512227596,
  1548609637,
  792580282,
  -79522535,
  -1,
  1013046617,
  -1881936760,
  9196283,
  -593032416,
  1378840883,
  65394068,
  1526964820,
  1711364142,
  402652223,
  1531379437,
  -558805330,
  -1794564741,
  1927574400,
  244858337,
  -1,
  -517048421,
  -890828084,
  1571193733,
  -2002643080,
  -1812526762,
  900306343,
  1448032588,
  588667414,
  -1,
  2043271470,
  -419561450,
  -1264339301,
  -1081400061,
  414455591,
  -1738625405,
  272325433,
  -1908137573,
  -1,
  -100757552,
  239011725,
  1186472711,
  2111400842,
  718513262,
  2093637175,
  -444885961,
  -1427206922,
  -1,
  -1745535188,
  76212501,
  -1638681990,
  -824089168,
  -1888765363,
  387625600,
  -1255477709,
  -1250550173,
  -117440513,
  691000924,
  -1594843709,
  -965756908,
  1520733464,
  1337123495,
  285379518,
  -52165,
  -846987265,
  -254554663,
  -483754875,
  358689169,
  -729022280,
  -1596696058,
  -945686787,
  -1472499558,
  -42484,
  -680132609,
  -284394169,
  -205913151,
  1782948099,
  -1746070572,
  -1676125380,
  1141749652,
  -1004064416,
  -52295,
  -690552833,
  -834035343,
  -1482801598,
  619737260,
  2125574754,
  1108096583,
  1347127430,
  612976432,
  -55457,
  -736755713,
  2069686504,
  -482477052,
  -1138959759,
  -1424461537,
  -181263303,
  -1403640784,
  2039300651,
  -35877,
  -1899692033,
  1442158786,
  -995926201,
  -1595656139,
  -158943348,
  -1829899608,
  1305121846,
  1824638329,
  -54830,
  -1787490305,
  -1875857529,
  -526942243,
  -298727179,
  -1360165953,
  2120649221,
  1180429116,
  -1,
  -1399384186,
  2125689647,
  -1454046430,
  1658791490,
  1388555925,
  -389169511,
  842216783,
  -1087136308,
  -1,
  -1819613870,
  471682109,
  -1669378201,
  -1470853461,
  -2120164437,
  2072708648,
  -1053819555,
  426077009,
  -1,
  2026432005,
  -1824438047,
  -1126180628,
  -1428269942,
  268763360,
  181293090,
  -586884789,
  -1984462555,
  -458753,
  231225491,
  -1956467075,
  -1692809513,
  -245327963,
  340861736,
  -876678475,
  -1073753949,
  -142671873,
  72098226,
  1187640412,
  -432966423,
  1125401891,
  -911226908,
  1918722079,
  -14399225,
  402653007,
  1959713830,
  980459470,
  -2008749395,
  -2123942877,
  965235008,
  297599199,
  -230,
  -823774977,
  215297753,
  585040248,
  1176177094,
  -918727058,
  382353352,
  1470763651,
  155244975,
  -15071,
  -1046899201,
  -94021592,
  -1380762605,
  78450696,
  2094869528,
  815785126,
  -942706561,
  -1,
  -670699700,
  1812738407,
  -1277087836,
  -1338224512,
  1881408988,
  167667533,
  522516580,
  -2462249,
  -1694498817,
  1811665525,
  1703770965,
  -1541242968,
  231324706,
  -1043098151,
  -1328810479,
  -1941023394,
  -4547835,
  -721420289,
  -942321780,
  1440245985,
  1938983053,
  1904583112,
  490224261,
  -518991963,
  981407750,
  -11201524,
  33554411,
  -1653591079,
  20319846,
  -209953006,
  886394482,
  231158130,
  610577496,
  -1835128,
  1406859775,
  -1187354312,
  224631982,
  -2018205533,
  1832689404,
  491368915,
  -14942871,
  469762047,
  -787250375,
  177432696,
  1436326633,
  -2016062944,
  1054030792,
  1700767275,
  79840968,
  -8751038,
  -957372417,
  621744125,
  1174163743,
  1739792136,
  -384747118,
  -792140687,
  -24769,
  1463353343,
  -522039122,
  1559703463,
  2124419512,
  1593704080,
  1677944981,
  -1819189780,
  -1634757267,
  1073692763,
  1272315902,
  473157615,
  1138313715,
  1291767563,
  -267417756,
  1590604273,
  1771312828,
  -1,
  1395986393,
  2106330055,
  -2049962572,
  1713244466,
  1687144444,
  -628869410,
  921719519,
  -1664541115,
  -2817,
  453069088,
  1636463452,
  1433026452,
  198024742,
  -308938697,
  -1188434009,
  -10640,
  110689343,
  -1211197987,
  -557319751,
  -1905542217,
  1770533145,
  183222,
  2027533038,
  -1,
  -2039692411,
  993295698,
  970285021,
  1417121328,
  -1315521141,
  -387860273,
  -1027468865,
  -2018788753,
  -1,
  138979197,
  -768954631,
  949305356,
  176015549,
  1389866880,
  1423532870,
  -1714956714,
  -413507791,
  -41943281,
  1476519447,
  241421094,
  -780078346,
  376278762,
  2046514923,
  -253953,
  -1402366654,
  1317949245,
  -1533976659,
  2107494830,
  -828614749,
  110045531,
  -12768,
  -1696464897,
  186131328,
  968191304,
  294267172,
  -837143832,
  1114457792,
  -287318889,
  -509491328,
  805253877,
  -1810628609,
  1295109159,
  -1330947392,
  -1804868404,
  -1050262605,
  406624340,
  -216007933,
  -158,
  -889798145,
  -1132358121,
  -1425915255,
  -361660456,
  270723737,
  -805878155,
  129076204,
  936936665,
  -922,
  677374975,
  2096911769,
  1657162170,
  -1481743075,
  -372610028,
  -1633776848,
  768167674,
  -3934256,
  893386751,
  1474011467,
  861797867,
  -335446813,
  785027589,
  1311078164,
  354318107,
  -7467468,
  -469762049,
  730032813,
  629039468,
  846322391,
  1351566778,
  -1941265436,
  1830627203,
  -1509584027,
  -4867914,
  -1509949441,
  -1191916836,
  -391547262,
  -829300996,
  -509872489,
  710727538,
  1026297340,
  -271780034,
  -5129615
}; // weak


//----- (00918E90) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>)
{
  int *v4; // esi
  int *v5; // edi
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  int i; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  unsigned int v16; // eax
  bool v17; // zf
  int v18; // ebx
  int v19; // ebx
  int v20; // ett
  unsigned int v21; // eax
  bool v22; // cf
  int v23; // ebx
  int v24; // ett
  unsigned int v25; // eax
  unsigned int v26; // eax
  int v27; // eax
  bool v28; // cf
  int v29; // ebx
  int v30; // ett
  BOOL v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  int v35; // ecx
  int v36; // ecx
  bool v37; // cf
  int v38; // ebx
  int v39; // ebx
  int v40; // ett
  bool v41; // zf
  int v42; // ebx
  int v43; // ett
  unsigned int v44; // ecx
  char v45; // al
  int v46; // eax
  bool v47; // cc
  int *v48; // esi
  int *v49; // edi
  int v50; // ecx
  char v51; // al
  int *v52; // eax
  int v53; // eax
  int v54; // eax
  char v55; // t0
  char v56; // bl
  void (__cdecl *v57)(int *, int, int, int *); // ebp
  int *v58; // edi
  int v59[4]; // [esp+10h] [ebp-90h] BYREF
  int *v60; // [esp+20h] [ebp-80h] BYREF
  _DWORD v61[8]; // [esp+24h] [ebp-7Ch] BYREF
  int v62; // [esp+44h] [ebp-5Ch] BYREF

  v61[4] = &v62;
  v61[2] = a3;
  v61[1] = a2;
  v61[0] = a1;
  v4 = dword_910000;
  v5 = &dword_910000[-1326080];
  v60 = &dword_910000[-1326080];
  while ( 1 )
  {
    v9 = *v4;
    v7 = (unsigned int)v4++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v4;
        v4 = (int *)((char *)v4 + 1);
        *(_BYTE *)v5 = v6;
        v5 = (int *)((char *)v5 + 1);
      }
      else
      {
        for ( i = 1; ; i = v21 + v22 + v21 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v16 = i + v12 + i;
          v7 = __CFADD__(v13, v13);
          v17 = 2 * v13 == 0;
          v18 = 2 * v13;
          if ( v7 )
          {
            if ( !v17 )
              break;
            v19 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v20 = v7 + v19;
            v7 = __CFADD__(v7, v19) | __CFADD__(v19, v20);
            v18 = v19 + v20;
            if ( v7 )
              break;
          }
          v21 = v16 - 1;
          v22 = __CFADD__(v18, v18);
          v8 = 2 * v18;
          if ( !v8 )
          {
            v23 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v24 = v7 + v23;
            v22 = __CFADD__(v7, v23) | __CFADD__(v23, v24);
            v8 = v23 + v24;
          }
        }
        v7 = v16 < 3;
        v25 = v16 - 3;
        if ( v7 )
        {
          v28 = __CFADD__(v18, v18);
          v18 *= 2;
          if ( !v18 )
          {
            v29 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v30 = v7 + v29;
            v28 = __CFADD__(v7, v29) | __CFADD__(v29, v30);
            v18 = v29 + v30;
          }
        }
        else
        {
          v26 = v25 << 8;
          LOBYTE(v26) = *(_BYTE *)v4;
          v4 = (int *)((char *)v4 + 1);
          v27 = ~v26;
          if ( !v27 )
          {
            v48 = v60;
            v49 = v60;
            v50 = 8;
            while ( 1 )
            {
              v51 = *(_BYTE *)v49;
              v49 = (int *)((char *)v49 + 1);
              LOBYTE(v52) = v51 + 24;
              while ( (unsigned __int8)v52 <= 1u && !*(_BYTE *)v49 )
              {
                v53 = *v49;
                LOWORD(v53) = BYTE1(*v49);
                v54 = __ROL4__(v53, 16);
                v55 = v54;
                LOBYTE(v54) = BYTE1(v54);
                BYTE1(v54) = v55;
                v56 = *((_BYTE *)v49 + 4) + 24;
                v52 = (int *)((char *)v48 + v54 - (_DWORD)v49);
                *v49 = (int)v52;
                v49 = (int *)((char *)v49 + 5);
                LOBYTE(v52) = v56;
                if ( !--v50 )
                {
                  v57 = *(void (__cdecl **)(int *, int, int, int *))((char *)&dword_518A50 + (_DWORD)v48);
                  v58 = v48 - 1024;
                  v60 = v52;
                  ((void (__fastcall *)(_DWORD, char *, int *, int, int, int **))v57)(0, a2, v48 - 1024, 4096, 4, &v60);
                  *((_BYTE *)v58 + 799) &= 0x7Fu;
                  *((_BYTE *)v58 + 839) &= 0x7Fu;
                  v57(v48 - 1024, 4096, v59[0], v59);
                  do
                    v60 = 0;
                  while ( &v60 != &v61[-32] );
                  JUMPOUT(0x40214B);
                }
              }
            }
          }
          v28 = v27 & 1;
          a4 = v27 >> 1;
        }
        v31 = v28;
        v32 = __CFADD__(v18, v18);
        v8 = 2 * v18;
        if ( !v8 )
        {
          v33 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v34 = v7 + v33;
          v32 = __CFADD__(v7, v33) | __CFADD__(v33, v34);
          v8 = v33 + v34;
        }
        v35 = v31 + v32 + v31;
        if ( !v35 )
        {
          v36 = 1;
          while ( 1 )
          {
            v37 = __CFADD__(v8, v8);
            v38 = 2 * v8;
            if ( !v38 )
            {
              v39 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v40 = v7 + v39;
              v37 = __CFADD__(v7, v39) | __CFADD__(v39, v40);
              v38 = v39 + v40;
            }
            v36 += v37 + v36;
            v7 = __CFADD__(v38, v38);
            v41 = 2 * v38 == 0;
            v8 = 2 * v38;
            if ( v7 )
            {
              if ( !v41 )
                break;
              v42 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v43 = v7 + v42;
              v7 = __CFADD__(v7, v42) | __CFADD__(v42, v43);
              v8 = v42 + v43;
              if ( v7 )
                break;
            }
          }
          v35 = v36 + 2;
        }
        v44 = (a4 < 0xFFFFFB00) + v35 + 1;
        a2 = (char *)v5 + a4;
        if ( a4 <= 0xFFFFFFFC )
        {
          do
          {
            v46 = *(_DWORD *)a2;
            a2 += 4;
            *v5++ = v46;
            v47 = v44 <= 4;
            v44 -= 4;
          }
          while ( !v47 );
          v5 = (int *)((char *)v5 + v44);
        }
        else
        {
          do
          {
            v45 = *a2++;
            *(_BYTE *)v5 = v45;
            v5 = (int *)((char *)v5 + 1);
            --v44;
          }
          while ( v44 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// 918FDF: positive sp value 5C has been found
// 918FDF: control flows out of bounds to 40214B
// 518A50: using guessed type int dword_518A50;
// 910000: using guessed type int dword_910000[512];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
