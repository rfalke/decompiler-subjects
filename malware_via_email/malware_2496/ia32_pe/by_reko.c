// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 004019C9: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_3 edi_3 = edi;
	Eq_5 ebp_34 = dwArg04;
	Eq_7 eax_12 = IsWindow(dwArg04);
	ptr32 esp_17 = fp;
	if ((eax_12 | 0x01) == 0x01)
	{
		eax_12 = fn00401A31((byte) GetProfileIntW(fp - 0x04, fp - 0x04, 0xF7), ecx, out ecx, out edx, out ebp_34, out esi, out edi_3);
		esp_17 = fp + 0x34;
	}
	word32 * esp_38 = esp_17 - 0x04;
	*esp_38 = ecx;
	*(esp_38 - 0x04) = (int32) eax_12;
	byte bl_43 = (byte) *(esp_38 - 0x04);
	*(esp_38 - 0x04) = (union Eq_3 *) edi_3;
	word32 ecx_47 = ecx - 266694;
	if (edi_3 != esi)
	{
		word32 ecx_58;
		word32 edx_59;
		word32 ebp_60;
		word32 esi_61;
		word32 edi_62;
		return fn00401A65(ecx_47 + 0x00042662, edx, bl_43, ebp_34, esi, edi_3, out ecx_58, out edx_59, out ebp_60, out esi_61, out edi_62);
	}
	else
		return esp_38 - 0x04;
}

// 00401A31: Register Eq_2 fn00401A31(Register byte bl, Stack word32 dwArg00, Register out ptr32 ecxOut, Register out ptr32 edxOut, Register out ptr32 ebpOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
Eq_2 fn00401A31(byte bl, word32 dwArg00, ptr32 & ecxOut, ptr32 & edxOut, ptr32 & ebpOut, ptr32 & esiOut, ptr32 & ediOut)
{
	Eq_3 eax_10 = VirtualAlloc(0x00, 0x00013AFD, 0x3000, 0x40);
	uint32 edx_30 = DPB(2731913931, bl + ~0x34, 0);
	word32 ecx_34;
	word32 edx_35;
	word32 ebp_36;
	word32 esi_37;
	word32 edi_38;
	return fn00401A65(0x01F6, edx_30, bl, null, dwArg00 + 0xC3, eax_10, out ecx_34, out edx_35, out ebp_36, out esi_37, out edi_38);
}

// 00401A65: Register word32 fn00401A65(Register word32 ecx, Register uint32 edx, Register byte bl, Register Eq_5 ebp, Register Eq_3 esi, Register Eq_3 edi, Register out ptr32 ecxOut, Register out ptr32 edxOut, Register out ptr32 ebpOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
word32 fn00401A65(word32 ecx, uint32 edx, byte bl, HWND ebp, Eq_3 esi, Eq_3 edi, ptr32 & ecxOut, ptr32 & edxOut, ptr32 & ebpOut, ptr32 & esiOut, ptr32 & ediOut)
{
	do
	{
		*(v3 - 0x04) = edx;
		*(v3 - 0x08) = ecx;
		*edi = (word32) *edi + (byte) ((word32) (*esi) + *(v3 - 0x04));
		uint32 edx_30 = *(v3 - 0x04);
		word32 ecx_27 = *(v3 - 0x08);
		esi = (word32) esi + 0x01;
		edi = (word32) edi + 0x01;
		ebp = (Eq_5) ((char *) &ebp->unused + 0x01);
		uint32 edx_41 = edx_30 >> 0x08;
		byte dl_42 = (byte) (edx_30 >> 0x08);
		if ((struct HWND__ *) 0x04 == ebp)
		{
			*(v3 - 0x04) = 2731913931;
			edx_41 = *(v3 - 0x04);
			dl_42 = (byte) edx_41;
			ebp = null;
		}
		edx = DPB(edx_41, dl_42 + bl, 0);
		ecx = ecx_27 - 0x01;
	} while (ecx_27 != 0x01);
	<anonymous> * edx_57 = *v3;
	word32 esp_60;
	byte SCZO_61;
	word32 edx_62;
	word32 ecx_63;
	word32 esi_64;
	word32 edi_65;
	byte cl_66;
	word32 eax_67;
	word32 ebp_68;
	byte Z_69;
	byte SZO_70;
	byte C_71;
	byte dl_72;
	byte bl_73;
	byte ah_74;
	edx_57();
	if (ecx_63 != eax_67)
		int3();
	else
		return eax_67;
}

