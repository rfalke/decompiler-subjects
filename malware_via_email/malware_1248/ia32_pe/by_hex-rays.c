/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>);

//-------------------------------------------------------------------------
// Data declarations

int dword_418000[512] =
{
  -138551305,
  1921974272,
  -788160761,
  -574291704,
  -1879020982,
  -37765361,
  654320126,
  3871311,
  1074852654,
  1144601358,
  -1018684371,
  7263267,
  -419495938,
  -1946337869,
  -1207425972,
  -150864128,
  417448400,
  -1172772415,
  -458497,
  436205293,
  -1949695534,
  -1185993606,
  -243186560,
  959842883,
  -352160753,
  -19398675,
  1652539357,
  -1889219447,
  1633669637,
  2042617481,
  -1177028859,
  2012660103,
  -2024343169,
  698675969,
  267813366,
  -1515012123,
  -13683025,
  1049229375,
  19034984,
  -1275064637,
  452996864,
  1527780502,
  -885129143,
  1167522815,
  -2097116006,
  -326895865,
  51203,
  -70818405,
  469725055,
  -1183697985,
  -1635956553,
  4020372,
  1446065051,
  -1161809469,
  -53284900,
  -763365627,
  -1018166733,
  -919476599,
  -923549311,
  -2118112818,
  -792,
  1797257179,
  948695041,
  791281289,
  27540721,
  -1995994161,
  -2116933135,
  -575668238,
  -786794305,
  25936129,
  1326387791,
  294324365,
  -1048317439,
  1879046404,
  202974583,
  23015935,
  -1840097289,
  270824587,
  -1957642191,
  -2180,
  66685309,
  117577018,
  1192872129,
  -333188991,
  1065368489,
  837776640,
  -1008865955,
  1946220799,
  1346394132,
  2114241153,
  -380776646,
  -536914260,
  1818146683,
  -1545158396,
  -144301577,
  1594024129,
  1489437015,
  2081888139,
  -1721858053,
  -118718113,
  -1176043265,
  -1436857100,
  1343970519,
  12712756,
  1376882993,
  545831363,
  201014819,
  -14205234,
  -283263006,
  -494284590,
  -558288245,
  115096117,
  -890832897,
  1255234822,
  -327825019,
  -555951735,
  -37224026,
  -585105951,
  1912793025,
  1491896609,
  1963925954,
  1393888386,
  -3205,
  11402589,
  746127432,
  -1847066380,
  -277413888,
  33577326,
  87228458,
  -273434746,
  -569135357,
  818333118,
  1049322506,
  -4432847,
  386700259,
  -686758977,
  176945665,
  138621323,
  536621187,
  -1033369922,
  1348751321,
  670650461,
  -246284529,
  -1335306497,
  -6264620,
  -2117891630,
  -1195655093,
  -1986691079,
  -1757059032,
  -397066297,
  928601016,
  232859669,
  1746009878,
  1763641036,
  2025982549,
  2073008979,
  -588310535,
  -1189639873,
  -1098358159,
  1056710635,
  500611192,
  276732606,
  1253768705,
  2025141888,
  -2117861516,
  -169709842,
  608308072,
  -1986413956,
  -1619265311,
  1369073085,
  -1286815745,
  200770900,
  263716884,
  1008696819,
  -1774980948,
  -2093511737,
  -249556807,
  -1107807228,
  965472767,
  616676951,
  200679271,
  1867907111,
  1533081511,
  -387125694,
  1700073099,
  726767489,
  1613398180,
  1431914497,
  5345424,
  10709525,
  -221574358,
  3244163,
  741977600,
  798459230,
  -489553896,
  -1364852607,
  967901359,
  1556086783,
  603247,
  -2147440669,
  3021312,
  11164,
  -987102986,
  427207168,
  -1009963015,
  -539875276,
  -184527115,
  2145044992,
  1971285965,
  -285206161,
  -532541235,
  -83867059,
  7800128,
  -550089691,
  13757677,
  1545816404,
  -2014279928,
  3433521,
  -1073768498,
  1281367263,
  -578486135,
  9514551,
  1459617991,
  12058822,
  -1354016034,
  393992228,
  1041040743,
  -1179706152,
  1023934219,
  1015579047,
  -50278656,
  -35807049,
  2147456566,
  1219542843,
  638714071,
  16245248,
  1476437114,
  -1822373120,
  173928550,
  -1519305320,
  -515667483,
  1769470734,
  -1166850142,
  -807755162,
  276808145,
  1584941415,
  805815035,
  -2044366038,
  -538605374,
  9816447,
  -540786921,
  1682741322,
  -153546882,
  -897891341,
  -922741477,
  -1372065401,
  -1021766500,
  1370521454,
  382700294,
  374156544,
  1142677853,
  117620254,
  644188816,
  1895390163,
  1820061040,
  1305996048,
  774042527,
  2113898470,
  -654267765,
  -1954627520,
  -1291837440,
  140220237,
  -3471490,
  -262415974,
  -1358891264,
  -1990529790,
  -1080046716,
  742133919,
  -436835729,
  -602940667,
  2115898788,
  -1858730120,
  629023679,
  -252300328,
  -108273211,
  1715908743,
  348424605,
  -1101981014,
  481023410,
  1820193779,
  1174980248,
  522240441,
  -1376131247,
  896091105,
  1221994094,
  5694294,
  -7615118,
  207986386,
  -49920595,
  1049532836,
  -1476371968,
  68531292,
  -467501033,
  1374033893,
  957923179,
  -1409237653,
  116859634,
  688382245,
  -1254303861,
  1850869380,
  -1524579393,
  -597715113,
  868191422,
  -564783585,
  -862907112,
  -699727738,
  -11536571,
  1117711872,
  262385,
  453038752,
  269553152,
  -1978753201,
  586550022,
  678374405,
  161997771,
  1258617726,
  834236173,
  -1897602715,
  -1679300105,
  -1616779248,
  -417889772,
  -1096841113,
  -915250865,
  1661260017,
  -1962836213,
  -1633848725,
  -366773846,
  -128638692,
  1610245489,
  -384783623,
  1459670321,
  1503274971,
  -308763118,
  804925910,
  13870260,
  771520742,
  -199394356,
  -1154659772,
  -1102751846,
  -1055863791,
  -739215230,
  -1341784139,
  1006672193,
  -1155000954,
  11076869,
  1568118496,
  527108478,
  316104828,
  16616784,
  -302468649,
  1292235969,
  138519728,
  392992862,
  -989720539,
  -128288729,
  -2065429696,
  168574217,
  2092980622,
  942504894,
  1966750967,
  1029790126,
  703922215,
  -1436915030,
  -402073340,
  -903481302,
  -751439489,
  -914338547,
  -1441918154,
  -272009996,
  1192677386,
  -1416372414,
  1932210207,
  -1344146063,
  -1351349072,
  293011811,
  2119491570,
  11466940,
  991338319,
  483526912,
  -168666659,
  -1979669140,
  1806304498,
  1547567472,
  -1335237265,
  226248169,
  459340151,
  -50306499,
  -1266347893,
  -1948913974,
  -345669201,
  -1427384813,
  -983527470,
  -903053339,
  721454363,
  1142543323,
  -1344943032,
  11924961,
  202003397,
  268852544,
  1576537992,
  1029075463,
  1557130659,
  -106934626,
  -726124189,
  -1577167609,
  -117400649,
  -1391659386,
  -765900117,
  -1895425536,
  368136378,
  1275654749,
  1208930483,
  -85369268,
  383238414,
  1206111192,
  -1093478832,
  1953834266,
  -1263561191,
  -1735433997,
  4428544,
  2098756670,
  -1269554059,
  2029347993,
  -9410536,
  -1474566657,
  12200192,
  371227960,
  286205399,
  589387856,
  -1189832514,
  -77553651,
  347764735,
  446107689,
  -1778149074,
  243241148,
  968388268,
  -1667547118,
  -1172765315,
  1581449429,
  404351904,
  1791271998,
  511566179,
  369451094,
  -1970871600,
  -1889109455,
  2136346973,
  2046858350,
  263943449,
  291618607,
  14263118,
  -1644154171,
  -939692277,
  601192882,
  -714569552,
  -368731966,
  -15793532,
  1763224037,
  -1336631503,
  1643073981,
  1860083218,
  42503313,
  -1475058377,
  1099497691,
  2133594038,
  -1375249569,
  687909351,
  352787716,
  -1227708566,
  691484678,
  -964045586,
  -904198321,
  211447871,
  1668590848,
  1593870862,
  -2105747234,
  -114664285,
  1888134159,
  1847188736,
  712719770,
  1863460122,
  1287458727,
  893136728,
  316288029,
  -2023600590,
  1483601180,
  -50871549,
  -199346448,
  -2081455611,
  -209773029,
  -1881947402,
  -1558684847,
  1620154233,
  944619039,
  940356621,
  -917750634,
  1066988651,
  2017799613,
  -436711368,
  -2020087948,
  -533519138,
  -652376878,
  1649726526
}; // weak


//----- (0041FB40) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>)
{
  int *v4; // esi
  int *v5; // edi
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  int i; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  unsigned int v16; // eax
  bool v17; // zf
  int v18; // ebx
  int v19; // ebx
  int v20; // ett
  unsigned int v21; // eax
  bool v22; // cf
  int v23; // ebx
  int v24; // ett
  unsigned int v25; // eax
  unsigned int v26; // eax
  int v27; // eax
  bool v28; // cf
  int v29; // ebx
  int v30; // ett
  BOOL v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  int v35; // ecx
  int v36; // ecx
  bool v37; // cf
  int v38; // ebx
  int v39; // ebx
  int v40; // ett
  bool v41; // zf
  int v42; // ebx
  int v43; // ett
  unsigned int v44; // ecx
  char v45; // al
  int v46; // eax
  bool v47; // cc
  int *v48; // esi
  int *v49; // edi
  int v50; // ecx
  char v51; // al
  int *v52; // eax
  int v53; // eax
  int v54; // eax
  char v55; // t0
  char v56; // bl
  void (__cdecl *v57)(int *, int, int, int *); // ebp
  int *v58; // edi
  int v59[4]; // [esp+10h] [ebp-90h] BYREF
  int *v60; // [esp+20h] [ebp-80h] BYREF
  _DWORD v61[8]; // [esp+24h] [ebp-7Ch] BYREF
  int v62; // [esp+44h] [ebp-5Ch] BYREF

  v61[4] = &v62;
  v61[2] = a3;
  v61[1] = a2;
  v61[0] = a1;
  v4 = dword_418000;
  v5 = &dword_418000[-23552];
  v60 = &dword_418000[-23552];
  while ( 1 )
  {
    v9 = *v4;
    v7 = (unsigned int)v4++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v4;
        v4 = (int *)((char *)v4 + 1);
        *(_BYTE *)v5 = v6;
        v5 = (int *)((char *)v5 + 1);
      }
      else
      {
        for ( i = 1; ; i = v21 + v22 + v21 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v16 = i + v12 + i;
          v7 = __CFADD__(v13, v13);
          v17 = 2 * v13 == 0;
          v18 = 2 * v13;
          if ( v7 )
          {
            if ( !v17 )
              break;
            v19 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v20 = v7 + v19;
            v7 = __CFADD__(v7, v19) | __CFADD__(v19, v20);
            v18 = v19 + v20;
            if ( v7 )
              break;
          }
          v21 = v16 - 1;
          v22 = __CFADD__(v18, v18);
          v8 = 2 * v18;
          if ( !v8 )
          {
            v23 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v24 = v7 + v23;
            v22 = __CFADD__(v7, v23) | __CFADD__(v23, v24);
            v8 = v23 + v24;
          }
        }
        v7 = v16 < 3;
        v25 = v16 - 3;
        if ( v7 )
        {
          v28 = __CFADD__(v18, v18);
          v18 *= 2;
          if ( !v18 )
          {
            v29 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v30 = v7 + v29;
            v28 = __CFADD__(v7, v29) | __CFADD__(v29, v30);
            v18 = v29 + v30;
          }
        }
        else
        {
          v26 = v25 << 8;
          LOBYTE(v26) = *(_BYTE *)v4;
          v4 = (int *)((char *)v4 + 1);
          v27 = ~v26;
          if ( !v27 )
          {
            v48 = v60;
            v49 = v60;
            v50 = 6;
            while ( 1 )
            {
              v51 = *(_BYTE *)v49;
              v49 = (int *)((char *)v49 + 1);
              LOBYTE(v52) = v51 + 24;
              while ( (unsigned __int8)v52 <= 1u && !*(_BYTE *)v49 )
              {
                v53 = *v49;
                LOWORD(v53) = BYTE1(*v49);
                v54 = __ROL4__(v53, 16);
                v55 = v54;
                LOBYTE(v54) = BYTE1(v54);
                BYTE1(v54) = v55;
                v56 = *((_BYTE *)v49 + 4) + 24;
                v52 = (int *)((char *)v48 + v54 - (_DWORD)v49);
                *v49 = (int)v52;
                v49 = (int *)((char *)v49 + 5);
                LOBYTE(v52) = v56;
                if ( !--v50 )
                {
                  v57 = (void (__cdecl *)(int *, int, int, int *))v48[34420];
                  v58 = v48 - 1024;
                  v60 = v52;
                  ((void (__fastcall *)(_DWORD, char *, int *, int, int, int **))v57)(0, a2, v48 - 1024, 4096, 4, &v60);
                  *((_BYTE *)v58 + 799) &= 0x7Fu;
                  *((_BYTE *)v58 + 839) &= 0x7Fu;
                  v57(v48 - 1024, 4096, v59[0], v59);
                  do
                    v60 = 0;
                  while ( &v60 != &v61[-32] );
                  JUMPOUT(0x4011CB);
                }
              }
            }
          }
          v28 = v27 & 1;
          a4 = v27 >> 1;
        }
        v31 = v28;
        v32 = __CFADD__(v18, v18);
        v8 = 2 * v18;
        if ( !v8 )
        {
          v33 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v34 = v7 + v33;
          v32 = __CFADD__(v7, v33) | __CFADD__(v33, v34);
          v8 = v33 + v34;
        }
        v35 = v31 + v32 + v31;
        if ( !v35 )
        {
          v36 = 1;
          while ( 1 )
          {
            v37 = __CFADD__(v8, v8);
            v38 = 2 * v8;
            if ( !v38 )
            {
              v39 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v40 = v7 + v39;
              v37 = __CFADD__(v7, v39) | __CFADD__(v39, v40);
              v38 = v39 + v40;
            }
            v36 += v37 + v36;
            v7 = __CFADD__(v38, v38);
            v41 = 2 * v38 == 0;
            v8 = 2 * v38;
            if ( v7 )
            {
              if ( !v41 )
                break;
              v42 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v43 = v7 + v42;
              v7 = __CFADD__(v7, v42) | __CFADD__(v42, v43);
              v8 = v42 + v43;
              if ( v7 )
                break;
            }
          }
          v35 = v36 + 2;
        }
        v44 = (a4 < 0xFFFFFB00) + v35 + 1;
        a2 = (char *)v5 + a4;
        if ( a4 <= 0xFFFFFFFC )
        {
          do
          {
            v46 = *(_DWORD *)a2;
            a2 += 4;
            *v5++ = v46;
            v47 = v44 <= 4;
            v44 -= 4;
          }
          while ( !v47 );
          v5 = (int *)((char *)v5 + v44);
        }
        else
        {
          do
          {
            v45 = *a2++;
            *(_BYTE *)v5 = v45;
            v5 = (int *)((char *)v5 + 1);
            --v44;
          }
          while ( v44 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// 41FC8F: positive sp value 5C has been found
// 41FC8F: control flows out of bounds to 4011CB
// 418000: using guessed type int dword_418000[512];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
