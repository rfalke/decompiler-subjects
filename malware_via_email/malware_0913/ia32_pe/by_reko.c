// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401005: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	word32 edx_39 = edx + esi + esi + (fp + 0x10) + (fp + 0x10);
	fn004010CE(edx_39 + 2069943438, ebx, ebp, edi, dwLoc2C, dwLoc16, esi);
	fn004010CE(edx_39 + 2069943438, ebx, ebp, edi, ebp, dwArg12, dwArg20);
	return edx_39 + 2069943438;
}

// 004010CE: void fn004010CE(Register word32 eax, Register (ptr Eq_17) ebx, Register word32 ebp, Register word32 edi, Stack word32 dwArg00, Stack word32 dwArg16, Stack word32 dwArg24)
void fn004010CE(word32 eax, Eq_17 * ebx, word32 ebp, word32 edi, word32 dwArg00, word32 dwArg16, word32 dwArg24)
{
	word32 eax_39 = DPB(dwArg00, 0x00, 0);
	fn00401695(dwLoc32, fp - 0x2A);
	*(fp - 0x1E) = fp - 0x2A;
	*(fp - 0x22) = eax_39 + 27772;
	*(fp - 0x26) = eax_39 + 27772;
	*(fp - 0x2A) = eax_39 + 27772;
	word32 esp_141;
	word32 eax_142;
	byte SZO_143;
	word32 ebp_144;
	word32 edx_145;
	byte C_146;
	word16 ax_147;
	word16 cx_148;
	word32 ecx_149;
	byte SCZO_150;
	word32 esi_151;
	struct Eq_86 * ebx_152;
	word32 edi_153;
	word16 si_154;
	struct Eq_89 * fs_155;
	byte al_156;
	byte Z_157;
	byte dh_158;
	byte dl_159;
	byte bh_160;
	word16 bx_161;
	ebx->ptr0018();
	ptr32 esp_163;
	word32 eax_164;
	byte SZO_165;
	word32 ebp_166;
	word32 edx_167;
	byte C_168;
	word16 ax_169;
	word16 cx_170;
	word32 ecx_171;
	byte SCZO_172;
	word32 esi_173;
	<anonymous> ** ebx_174;
	word32 edi_175;
	word16 si_176;
	struct Eq_113 * fs_177;
	byte al_178;
	byte Z_179;
	byte dh_180;
	byte dl_181;
	byte bh_182;
	word16 bx_183;
	ebx_152->ptr001C();
	*(esp_163 - 0x04) = eax_164 + 0x06;
	*(esp_163 - 0x08) = eax_164 + 0x06;
	struct Eq_136 * esp_201;
	word32 eax_202;
	byte SZO_203;
	word32 ebp_204;
	word32 edx_205;
	byte C_206;
	word16 ax_207;
	word16 cx_208;
	word32 ecx_209;
	byte SCZO_210;
	word32 esi_211;
	word32 ebx_212;
	word32 edi_213;
	word16 si_214;
	struct Eq_150 * fs_215;
	byte al_216;
	byte Z_217;
	byte dh_218;
	byte dl_219;
	byte bh_220;
	word16 bx_221;
	(*ebx_174)();
	esp_201->dw0038 = ebx_212;
	esp_201->dw003C = esi_211;
	*(esp_201 - 0x04) = ebx_212;
	*(esp_201 - 0x04) = *(esp_201 - 0x04) - 0x04;
	struct Eq_181 * edi_238 = *(esp_201 - 0x04);
	*(esp_201 - 0x04) = eax_202;
	*(esp_201 - 0x08) = ecx_209;
	*(esp_201 - 0x0C) = esp_201 - 0x08;
	*(esp_201 - 0x10) = 0x40;
	*(esp_201 - 0x14) = esp_201->dw0020;
	*(esp_201 - 0x18) = esp_201->dw0014;
	esp_201->dw0018 = 0x00;
	*(esp_201 - 0x1C) = ~0x00;
	struct Eq_234 * esp_269;
	struct Eq_235 Eq_247::* eax_270;
	byte SZO_271;
	word32 edx_273;
	byte C_274;
	word16 ax_275;
	word16 cx_276;
	word32 ecx_277;
	byte SCZO_278;
	word32 esi_279;
	word32 ebx_280;
	word32 edi_281;
	word16 si_282;
	struct Eq_247 * fs_283;
	byte al_284;
	byte Z_285;
	byte dh_286;
	byte dl_287;
	byte bh_288;
	word16 bx_289;
	byte * ebp_272;
	edi_238->ptr0010();
	struct Eq_258 * eax_291 = eax_270 + (fs_283->*eax_270).dw002F / 0x0033;
	esp_269->dw0030 = esp_269->dw0030 + eax_291->dw0003;
	*(esp_269 - 0x04) = (struct Eq_258 **) eax_291;
	esp_269->dw0000 = *(esp_269 - 0x04);
	esp_269->dw0004 = esp_269->dw0000;
	word32 edi_317 = esp_269->dw0008;
	esp_269->dw0008 = esp_269->dw0004;
	word32 ebx_326 = esp_269->dw000C;
	word32 eax_322 = esp_269->dw0008;
	word16 bx_328 = (word16) ebx_326;
	word32 * esi_330 = esp_269->ptr0010;
	esp_269->ptr0010 = eax_322 + 0x03;
	word32 * eax_340 = esp_269->ptr0010;
	word32 ecx_342 = *eax_340;
	esp_269->ptr0010 = eax_340;
	esp_269->dw003C = esp_269->dw003C ^ ecx_342;
	word32 * eax_352 = esp_269->ptr001C;
	word32 ecx_355 = esp_269->dw002C;
	esp_269->ptr0010 = eax_352;
	*(esp_269 - 0xF8) = esp_269->ptr0010;
	*(esp_269 - 244) = *(esp_269 - 0xF8);
	*(esp_269 - 0xF0) = ecx_355;
	*(esp_269 - 0xF8) = edi_317;
	int32 eax_373 = 0x00;
	do
	{
		*(esp_269 - 252) = eax_373;
		word32 eax_384 = *(esp_269 - 252);
		esp_269 - 0xEC + eax_373 = (byte *) (byte) eax_384;
		*(esp_269 - 252) = eax_384;
		*(esp_269 - 252) = *(esp_269 - 252) + 0x01;
		uint32 eax_398 = *(esp_269 - 252);
		*(esp_269 - 252) = eax_398;
		eax_373 = *(esp_269 - 252);
	} while (eax_398 < 0x0100);
	*(esp_269 - 252) = eax_373;
	word32 edi_414 = *(esp_269 - 0xF8);
	*(esp_269 - 0xF8) = *(esp_269 - 252);
	*(esp_269 - 0xF8) = &esp_269->dw003C + 0x02;
	byte * eax_425 = *(esp_269 - 0xF8);
	ptr32 esp_428 = esp_269 - 244;
	if (*eax_425 != 121)
	{
		struct Eq_496 * edi_654 = *(eax_425 - 0x04);
		do
		{
			ptr32 esp_655;
			word32 eax_656;
			byte SZO_657;
			word32 ebp_658;
			word32 edx_659;
			byte C_660;
			word16 ax_661;
			word16 cx_662;
			word32 ecx_663;
			byte SCZO_664;
			word32 esi_665;
			word32 ebx_666;
			struct Eq_514 * edi_667;
			word16 si_668;
			struct Eq_516 * fs_669;
			byte al_670;
			byte Z_671;
			byte dh_672;
			byte dl_673;
			byte bh_674;
			word16 bx_675;
			edi_654->ptr0018();
			*(esp_655 - 0x04) = eax_656;
			ptr32 esp_681;
			word32 eax_682;
			byte SZO_683;
			word32 ebp_684;
			word32 edx_685;
			byte C_686;
			word16 ax_687;
			word16 cx_688;
			word32 ecx_689;
			byte SCZO_690;
			word32 esi_691;
			word32 ebx_692;
			struct Eq_543 * edi_693;
			word16 si_694;
			struct Eq_545 * fs_695;
			byte al_696;
			byte Z_697;
			byte dh_698;
			byte dl_699;
			byte bh_700;
			word16 bx_701;
			edi_667->ptr0010();
			*(esp_681 - 0x04) = eax_682;
			ptr32 esp_707;
			word32 eax_708;
			byte SZO_709;
			word32 ebp_710;
			word32 edx_711;
			byte C_712;
			word16 ax_713;
			word16 cx_714;
			word32 ecx_715;
			byte SCZO_716;
			word32 esi_717;
			word32 ebx_718;
			struct Eq_572 * edi_719;
			word16 si_720;
			struct Eq_574 * fs_721;
			byte al_722;
			byte Z_723;
			byte dh_724;
			byte dl_725;
			byte bh_726;
			word16 bx_727;
			edi_693->ptr0018();
			*(esp_707 - 0x04) = eax_708;
			ptr32 esp_733;
			word32 eax_734;
			byte SZO_735;
			word32 ebp_736;
			word32 edx_737;
			byte C_738;
			word16 ax_739;
			word16 cx_740;
			word32 ecx_741;
			byte SCZO_742;
			word32 esi_743;
			word32 ebx_744;
			struct Eq_601 * edi_745;
			word16 si_746;
			struct Eq_603 * fs_747;
			byte al_748;
			byte Z_749;
			byte dh_750;
			byte dl_751;
			byte bh_752;
			word16 bx_753;
			edi_719->ptr0018();
			*(esp_733 - 0x04) = eax_734;
			ptr32 esp_759;
			word32 eax_760;
			byte SZO_761;
			word32 ebp_762;
			word32 edx_763;
			byte C_764;
			word16 ax_765;
			word16 cx_766;
			word32 ecx_767;
			byte SCZO_768;
			word32 esi_769;
			word32 ebx_770;
			struct Eq_630 * edi_771;
			word16 si_772;
			struct Eq_632 * fs_773;
			byte al_774;
			byte Z_775;
			byte dh_776;
			byte dl_777;
			byte bh_778;
			word16 bx_779;
			edi_745->ptr0018();
			*(esp_759 - 0x04) = eax_760;
			word32 esp_787;
			word32 eax_788;
			byte SZO_789;
			word32 ebp_790;
			word32 edx_791;
			byte C_792;
			word16 ax_793;
			word16 cx_794;
			word32 ecx_795;
			byte SCZO_796;
			word32 esi_797;
			word32 ebx_798;
			struct Eq_659 * edi_799;
			word16 si_800;
			struct Eq_661 * fs_801;
			byte al_802;
			byte Z_803;
			byte dh_804;
			byte dl_805;
			byte bh_806;
			word16 bx_807;
			edi_771->ptr0018();
			word32 esp_808;
			word32 eax_809;
			byte SZO_810;
			word32 ebp_811;
			word32 edx_812;
			byte C_813;
			word16 ax_814;
			word16 cx_815;
			word32 ecx_816;
			byte SCZO_817;
			word32 esi_818;
			word32 ebx_819;
			struct Eq_687 * edi_820;
			word16 si_821;
			struct Eq_689 * fs_822;
			byte al_823;
			byte Z_824;
			byte dh_825;
			byte dl_826;
			byte bh_827;
			word16 bx_828;
			edi_799->ptr0018();
			ptr32 esp_829;
			word32 eax_830;
			byte SZO_831;
			word32 edx_833;
			byte C_834;
			word16 ax_835;
			word16 cx_836;
			word32 ecx_837;
			byte SCZO_838;
			word16 si_842;
			struct Eq_709 * fs_843;
			byte al_844;
			byte Z_845;
			byte dh_846;
			byte dl_847;
			byte bh_848;
			edi_820->ptr0010();
			*(esp_829 - 0x04) = eax_830;
			word32 eax_853 = *(esp_829 - 0x04);
			*(esp_829 - 0x04) = eax_853 + 0x01;
			word32 eax_865 = *(esp_829 - 0x04);
			cu16 ax_868 = (word16) eax_865 - cx_836;
			*(esp_829 - 0x04) = DPB(eax_865, ax_868, 0);
			word32 eax_875 = *(esp_829 - 0x04);
		} while (ax_868 < 0x00);
		*(esp_829 - 0x04) = eax_875;
		eax_425 = (byte *) *(esp_829 - 0x04);
		esp_428 = esp_829;
	}
	struct Eq_458 * esp_454 = esp_428 - 0x04;
	esp_454->ptr0000 = eax_425;
	byte * eax_457 = esp_454->ptr0000;
	esp_454->ptr0000 = ebp_272;
	*(esp_454 - 0x04) = (byte **) eax_457;
	word32 eax_464 = *(esp_454 - 0x04);
	*(esp_454 - 0x04) = esi_330;
	*(esp_454 - 0x08) = eax_464;
	*(esp_454 - 0x08) = edi_414;
	uint32 edi_476 = esp_454->dw011C;
	*(esp_454 - 0x0C) = 0x00;
	int32 esi_482 = 0x00;
	word32 eax_487 = *(esp_454 - 0x0C);
	int32 ebp_491 = 0x00;
	*(esp_454 - 0x0C) = ebx_326;
	do
	{
		struct Eq_776 * esp_504 = esp_428 - 0x10;
		word32 ebx_507 = (word32) esp_504->a0018[ebp_491];
		*(esp_504 - 0x04) = eax_487;
		ptr32 edx_513 = esp_504->ptr0014;
		*(esp_504 - 0x04) = *(esp_504 - 0x04);
		int32 eax_517 = *(esp_504 - 0x04);
		word32 edx_519 = (word32) (edx_513 + eax_517);
		*(esp_504 - 0x04) = eax_517;
		word32 eax_525 = *(esp_504 - 0x04);
		word32 ecx_531 = ebx_507 + esi_482;
		word32 edx_534 = edx_519 + ecx_531;
		int32 edx_538 = DPB(edx_534, 0x00, 8);
		*(esp_504 - 0x04) = eax_525 + 0x01;
		*(esp_504 - 0x04) = *(esp_504 - 0x04);
		uint32 eax_552 = *(esp_504 - 0x04);
		*(esp_504 - 0x04) = eax_552;
		esi_482 = edx_538;
		word32 eax_559 = *(esp_504 - 0x04);
		if (eax_552 >= edi_476)
		{
			*(esp_504 - 0x04) = eax_559;
			*(esp_504 - 0x04) = 0x00;
			eax_559 = *(esp_504 - 0x04);
		}
		byte dl_566 = esp_504->a0018[edx_538];
		*(esp_504 - 0x04) = eax_559;
		word32 eax_570 = *(esp_504 - 0x04);
		esp_504->a0018[ebp_491] = dl_566;
		*(esp_504 - 0x04) = eax_570;
		int32 eax_576 = *(esp_504 - 0x04);
		ebp_491 = ebp_491 + 0x01;
		ptr32 edx_582 = esp_504->a0018 + edx_538;
		ptr32 edx_585 = edx_582 - eax_576;
		bx_328 = DPB(bx_328, eax_576 + 0x01 + edx_585, 8);
		*(esp_504 - 0x04) = eax_576;
		int32 eax_594 = *(esp_504 - 0x04);
		eax_594 + edx_585 = (word16 *) bx_328;
		*(esp_504 - 0x04) = eax_594;
		*(esp_504 - 0x04) = *(esp_504 - 0x04);
		*(esp_504 - 0x04) = *(esp_504 - 0x04);
		*(esp_504 - 0x04) = *(esp_504 - 0x04);
		eax_487 = *(esp_504 - 0x04);
	} while (SLICE(ebp_491, byte, 8) != 0x01);
	word32 ebx_633;
	word32 ebp_634;
	word32 edi_635;
	fn00401723(ebp, dwArg00, dwArg04, dwArg08, dwArg0C, dwArg0114, dwArg0118, dwArg0128, dwArg013C, dwArg0140, out ebx_633, out ebp_634, out edi_635);
}

// 00401695: void fn00401695(Stack word32 dwArg00, Stack ptr32 dwArg04)
void fn00401695(word32 dwArg00, ptr32 dwArg04)
{
	word32 eax_24 = dwArg00;
	while (true)
	{
		word16 ax_61 = DPB(eax_24, 0x00, 0) + 0x00;
		word32 eax_64 = DPB(eax_24, ax_61 + 42421, 0);
		if (ax_61 == 42419)
			break;
		eax_24 = eax_64 - 0x00010000;
	}
}

// 00401723: Register word32 fn00401723(Stack word32 dwArg00, Stack word32 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C, Stack ptr32 dwArg10, Stack word32 dwArg0118, Stack word32 dwArg011C, Stack word32 dwArg012C, Stack word32 dwArg0140, Stack word32 dwArg0144, Register out ptr32 ebxOut, Register out ptr32 ebpOut, Register out ptr32 ediOut)
word32 fn00401723(word32 dwArg00, word32 dwArg04, word32 dwArg08, word32 dwArg0C, ptr32 dwArg10, word32 dwArg0118, word32 dwArg011C, word32 dwArg012C, word32 dwArg0140, word32 dwArg0144, ptr32 & ebxOut, ptr32 & ebpOut, ptr32 & ediOut)
{
	int32 esi_130 = 0x00;
	word32 ebp_131 = dwArg012C;
	ptr32 edi_129 = dwArg10;
	word32 edx_225 = dwArg00;
	if (true)
	{
		int32 eax_120 = 0x00;
		do
		{
			int32 eax_141 = DPB(eax_120 + 0x01, 0x00, 8);
			byte cl_148 = fp->a0018[eax_141];
			word32 ebx_168 = (word32) cl_148;
			word32 ebx_169 = ebx_168 + esi_130;
			int32 ebx_173 = DPB(ebx_169, 0x00, 8);
			byte dh_182 = fp->a0004[ebx_173 + 0x14];
			fp->a0018[eax_141] = dh_182;
			fp->a0004[ebx_173 + 0x14] = cl_148;
			word32 edx_220 = (word32) dh_182;
			byte dl_221 = (byte) edx_220;
			int32 edx_223 = DPB(edx_220, dl_221 + cl_148, 0);
			edx_225 = edx_223 + 0x14;
			ui32 ecx_229 = fp->a0004[edx_223 + 0x14];
			*(edi_129 - 0x01) = *(edi_129 - 0x01) ^ (word16) (ecx_229 << 0x08);
			esi_130 = ebx_173;
			edi_129 = edi_129 + 0x01;
			ebp_131 = ebp_131 - 0x01;
			eax_120 = eax_141;
		} while (ebp_131 != 0x00);
	}
	word32 edi_70;
	*ediOut = dwArg04;
	word32 ebp_76;
	*ebpOut = dwArg0C;
	word32 ebx_104;
	*ebxOut = edx_225;
	return dwArg011C;
}

