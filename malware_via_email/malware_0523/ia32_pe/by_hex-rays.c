/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

int sub_4010D9(void); // weak
// void __usercall __noreturn start(int@<eax>, int@<edx>, _DWORD *@<ecx>, int@<ebx>);
void __fastcall sub_401F36(int, __int32);
// void __userpurge sub_401FB1(int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
// double __userpurge sub_401FDD@<st0>(__int16 *@<ebx>, double@<st0>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
// void __usercall sub_402029(int@<esi>);
_DWORD __far sub_402162(); // weak
// void __usercall sub_40217F(int (__fastcall *)(__int32, int)@<eax>, __int16@<dx>, char@<bh>, int@<ebp>, __int16@<di>, __int32@<esi>);
// unsigned int __userpurge sub_40238B@<eax>(int@<edx>, int@<ecx>, char@<bl>, int@<edi>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
void sub_402411();
// __int64 __usercall sub_4024A0@<edx:eax>(char@<dl>, char@<bl>, __int32@<esi>);
void __thiscall __noreturn sub_4024CD(void *this);
// void __usercall sub_402563(__int32@<esi>);
// void __userpurge sub_402607(int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
void sub_4026E1();
// void __usercall __noreturn sub_4027CB(int@<eax>);
// int __userpurge sub_4027ED@<eax>(int@<edx>, _DWORD *@<ebx>, int@<edi>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
void sub_402A2A();
// void __userpurge sub_402A86(int@<eax>, int@<edi>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
// void __usercall sub_402B9C(int (__fastcall *)(__int32, int)@<eax>, int@<edx>, __int16@<di>, __int32@<esi>);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_40117F; // weak
_UNKNOWN loc_401EC4; // weak
_UNKNOWN sub_4020E0; // weak
_UNKNOWN loc_40276E; // weak
_UNKNOWN sub_40280D; // weak
char byte_402A6D[3] = { '\x8D', 'd', '$' }; // weak
_UNKNOWN loc_402D80; // weak


//----- (004010D9) --------------------------------------------------------
#error "4010DC: cannot convert to microcode (funcsize=2)"

//----- (0040112E) --------------------------------------------------------
void __usercall __noreturn start(int a1@<eax>, int a2@<edx>, _DWORD *a3@<ecx>, int a4@<ebx>)
{
  int v4; // edx
  int v5; // ebx
  int v6; // esi
  _DWORD *v7; // edx
  _DWORD *v8; // edi
  _DWORD *v9; // esi
  int v10; // ebx
  int v11; // esi
  int v12; // edx
  int v13; // ebx
  _DWORD *i; // esi

  v12 = a2 - a1 - a4;
  v13 = v12 ^ a4;
  for ( i = a3; ; i = v9 + 1 )
  {
    v10 = v12 | (v13 + 1);
    v11 = (v12 | a1 | ((unsigned int)i + 1)) - 1;
    v4 = v11 | (v12 + 1);
    v5 = v4 + a1 + v10;
    v6 = v11 - 1 - (_DWORD)a3;
    v7 = (_DWORD *)(1 - (a1 ^ (v4 | a1)) - v6);
    v8 = v7;
    LOBYTE(v5) = BYTE1(a3) | v5;
    v9 = (_DWORD *)(v6 - (_DWORD)a3);
    v13 = v5 - 1;
    BYTE1(v7) = (_BYTE)a3;
    a1 = ((int (__fastcall *)(_DWORD *, _DWORD *))((char *)&loc_40117F + 4))(a3, v7);
    LOBYTE(v13) = BYTE1(v12) ^ v13;
    __asm { icebp }
    *v8 = *v9;
  }
}
// 4010B9: variable 'v12' is possibly undefined
// 40109D: variable 'a3' is possibly undefined
// 4010D9: using guessed type int sub_4010D9(void);

//----- (00401F36) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __fastcall sub_401F36(int a1, __int32 a2)
{
  unsigned int v2; // eax
  __int32 v3; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v3, a2);
  v2 = ((int (__fastcall *)(int, __int32))loc_40276E)(a1, v3);
  LOBYTE(v2) = v2 ^ 0x73;
  __outdword(0xE9u, v2);
  JUMPOUT(0x401F4F);
}
// 401F3C: positive sp value 4 has been found
// 401F4D: control flows out of bounds to 401F4F

//----- (00401FB1) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_401FB1(
        int a1,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  JUMPOUT(0x402B0B);
}
// 401FB5: positive sp value 4 has been found
// 401FC7: control flows out of bounds to 402B0B
// 401FD8: inconsistent fpu stack
// 401FB1: too many input arguments, some ignored

//----- (00401FDD) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
double __userpurge sub_401FDD@<st0>(
        __int16 *a1@<ebx>,
        double a2@<st0>,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  char v64; // sf
  char v65; // of
  int v67; // [esp-DDF6h] [ebp-DDF6h]
  int v68; // [esp-DDF2h] [ebp-DDF2h]
  int v69; // [esp-DDEEh] [ebp-DDEEh]
  int v70; // [esp-DDEAh] [ebp-DDEAh]
  int v71; // [esp-DDE6h] [ebp-DDE6h]
  int v72; // [esp-DDE2h] [ebp-DDE2h]
  int v73; // [esp-DDDEh] [ebp-DDDEh]
  int v74; // [esp-DDDAh] [ebp-DDDAh]
  int v75; // [esp-DDD6h] [ebp-DDD6h]
  int v76; // [esp-DDD2h] [ebp-DDD2h]
  int v77; // [esp-DDCEh] [ebp-DDCEh]
  int v78; // [esp-DDCAh] [ebp-DDCAh]
  int v79; // [esp-DDC6h] [ebp-DDC6h]
  int v80; // [esp-DDC2h] [ebp-DDC2h]
  int v81; // [esp-DDBEh] [ebp-DDBEh]
  int v82; // [esp-DDBAh] [ebp-DDBAh]
  int v83; // [esp-DDB6h] [ebp-DDB6h]
  int v84; // [esp-DDB2h] [ebp-DDB2h]
  int v85; // [esp-DDAEh] [ebp-DDAEh]
  int v86; // [esp-DDAAh] [ebp-DDAAh]
  int v87; // [esp-DDA6h] [ebp-DDA6h]
  int v88; // [esp-DDA2h] [ebp-DDA2h]
  int v89; // [esp-DD9Eh] [ebp-DD9Eh]
  int v90; // [esp-DD9Ah] [ebp-DD9Ah]
  int v91; // [esp-DD96h] [ebp-DD96h]
  int v92; // [esp-DD92h] [ebp-DD92h]
  int v93; // [esp-DD8Eh] [ebp-DD8Eh]
  int v94; // [esp-DD8Ah] [ebp-DD8Ah]
  int v95; // [esp-DD86h] [ebp-DD86h]
  int v96; // [esp-DD82h] [ebp-DD82h]
  int v97; // [esp-DD7Eh] [ebp-DD7Eh]
  int v98; // [esp-DD7Ah] [ebp-DD7Ah]
  int v99; // [esp-DD76h] [ebp-DD76h]
  int v100; // [esp-DD72h] [ebp-DD72h]
  int v101; // [esp-DD6Eh] [ebp-DD6Eh]
  int v102; // [esp-DD6Ah] [ebp-DD6Ah]
  int v103; // [esp-DD66h] [ebp-DD66h]
  int v104; // [esp-DD62h] [ebp-DD62h]
  int v105; // [esp-DD5Eh] [ebp-DD5Eh]
  int v106; // [esp-DD5Ah] [ebp-DD5Ah]
  int v107; // [esp-DD56h] [ebp-DD56h]
  int v108; // [esp-DD52h] [ebp-DD52h]
  int v109; // [esp-DD4Eh] [ebp-DD4Eh]
  int v110; // [esp-DD4Ah] [ebp-DD4Ah]
  int v111; // [esp-DD46h] [ebp-DD46h]
  int v112; // [esp-DD42h] [ebp-DD42h]
  int v113; // [esp-DD3Eh] [ebp-DD3Eh]
  int v114; // [esp-DD3Ah] [ebp-DD3Ah]
  int v115; // [esp-DD36h] [ebp-DD36h]
  int v116; // [esp-DD32h] [ebp-DD32h]
  int v117; // [esp-DD2Eh] [ebp-DD2Eh]
  int v118; // [esp-DD2Ah] [ebp-DD2Ah]
  int v119; // [esp-DD26h] [ebp-DD26h]
  int v120; // [esp-DD22h] [ebp-DD22h]
  int v121; // [esp-DD1Eh] [ebp-DD1Eh]
  int v122; // [esp-DD1Ah] [ebp-DD1Ah]
  int v123; // [esp-DD16h] [ebp-DD16h]
  int v124; // [esp-DD12h] [ebp-DD12h]
  int v125; // [esp-DD0Eh] [ebp-DD0Eh]
  int v126; // [esp-DD0Ah] [ebp-DD0Ah]
  int v127; // [esp-DD06h] [ebp-DD06h]
  int v128; // [esp-DD02h] [ebp-DD02h]
  int v129; // [esp-DCFEh] [ebp-DCFEh]

  sub_402607(
    v67,
    v68,
    v69,
    v70,
    v71,
    v72,
    v73,
    v74,
    v75,
    v76,
    v77,
    v78,
    v79,
    v80,
    v81,
    v82,
    v83,
    v84,
    v85,
    v86,
    v87,
    v88,
    v89,
    v90,
    v91,
    v92,
    v93,
    v94,
    v95,
    v96,
    v97,
    v98,
    v99,
    v100,
    v101,
    v102,
    v103,
    v104,
    v105,
    v106,
    v107,
    v108,
    v109,
    v110,
    v111,
    v112,
    v113,
    v114,
    v115,
    v116,
    v117,
    v118,
    v119,
    v120,
    v121,
    v122,
    v123,
    v124,
    v125,
    v126,
    v127,
    v128,
    v129);
  if ( v64 != v65 )
    JUMPOUT(0x401FAB);
  return (double)*a1 - a2;
}
// 401FF1: positive sp value DDFA has been found
// 401FF1: control flows out of bounds to 401FAB
// 401FEC: variable 'v67' is possibly undefined
// 401FEC: variable 'v68' is possibly undefined
// 401FEC: variable 'v69' is possibly undefined
// 401FEC: variable 'v70' is possibly undefined
// 401FEC: variable 'v71' is possibly undefined
// 401FEC: variable 'v72' is possibly undefined
// 401FEC: variable 'v73' is possibly undefined
// 401FEC: variable 'v74' is possibly undefined
// 401FEC: variable 'v75' is possibly undefined
// 401FEC: variable 'v76' is possibly undefined
// 401FEC: variable 'v77' is possibly undefined
// 401FEC: variable 'v78' is possibly undefined
// 401FEC: variable 'v79' is possibly undefined
// 401FEC: variable 'v80' is possibly undefined
// 401FEC: variable 'v81' is possibly undefined
// 401FEC: variable 'v82' is possibly undefined
// 401FEC: variable 'v83' is possibly undefined
// 401FEC: variable 'v84' is possibly undefined
// 401FEC: variable 'v85' is possibly undefined
// 401FEC: variable 'v86' is possibly undefined
// 401FEC: variable 'v87' is possibly undefined
// 401FEC: variable 'v88' is possibly undefined
// 401FEC: variable 'v89' is possibly undefined
// 401FEC: variable 'v90' is possibly undefined
// 401FEC: variable 'v91' is possibly undefined
// 401FEC: variable 'v92' is possibly undefined
// 401FEC: variable 'v93' is possibly undefined
// 401FEC: variable 'v94' is possibly undefined
// 401FEC: variable 'v95' is possibly undefined
// 401FEC: variable 'v96' is possibly undefined
// 401FEC: variable 'v97' is possibly undefined
// 401FEC: variable 'v98' is possibly undefined
// 401FEC: variable 'v99' is possibly undefined
// 401FEC: variable 'v100' is possibly undefined
// 401FEC: variable 'v101' is possibly undefined
// 401FEC: variable 'v102' is possibly undefined
// 401FEC: variable 'v103' is possibly undefined
// 401FEC: variable 'v104' is possibly undefined
// 401FEC: variable 'v105' is possibly undefined
// 401FEC: variable 'v106' is possibly undefined
// 401FEC: variable 'v107' is possibly undefined
// 401FEC: variable 'v108' is possibly undefined
// 401FEC: variable 'v109' is possibly undefined
// 401FEC: variable 'v110' is possibly undefined
// 401FEC: variable 'v111' is possibly undefined
// 401FEC: variable 'v112' is possibly undefined
// 401FEC: variable 'v113' is possibly undefined
// 401FEC: variable 'v114' is possibly undefined
// 401FEC: variable 'v115' is possibly undefined
// 401FEC: variable 'v116' is possibly undefined
// 401FEC: variable 'v117' is possibly undefined
// 401FEC: variable 'v118' is possibly undefined
// 401FEC: variable 'v119' is possibly undefined
// 401FEC: variable 'v120' is possibly undefined
// 401FEC: variable 'v121' is possibly undefined
// 401FEC: variable 'v122' is possibly undefined
// 401FEC: variable 'v123' is possibly undefined
// 401FEC: variable 'v124' is possibly undefined
// 401FEC: variable 'v125' is possibly undefined
// 401FEC: variable 'v126' is possibly undefined
// 401FEC: variable 'v127' is possibly undefined
// 401FEC: variable 'v128' is possibly undefined
// 401FEC: variable 'v129' is possibly undefined
// 401FF1: variable 'v64' is possibly undefined
// 401FF1: variable 'v65' is possibly undefined
// 401FDD: too many input arguments, some ignored

//----- (00402029) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402029(int a1@<esi>)
{
  unsigned __int8 v1; // al
  unsigned __int16 v2; // dx

  v1 = (*(int (**)(void))byte_402A6D)();
  _ESI = a1 + 4;
  __outbyte(v2, v1);
  __asm { outsb }
  JUMPOUT(0x402046);
}
// 40202D: positive sp value 4 has been found
// 402045: control flows out of bounds to 402046
// 402041: variable 'v2' is possibly undefined

//----- (004020E0) --------------------------------------------------------
#error "4020E0: function frame is wrong (funcsize=0)"

//----- (00402162) --------------------------------------------------------
#error "402162: function frame is wrong (funcsize=0)"

//----- (0040217F) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40217F(
        int (__fastcall *a1)(__int32, int)@<eax>,
        __int16 a2@<dx>,
        char a3@<bh>,
        int a4@<ebp>,
        __int16 a5@<di>,
        __int32 a6@<esi>)
{
  int v6; // esi
  char v8; // dh
  __int16 v9; // dx
  __int32 v10; // [esp-8h] [ebp-8h] BYREF
  char v11; // [esp-4h] [ebp-4h]
  char v12; // [esp-3h] [ebp-3h]

  _InterlockedExchange(&v10, a6);
  HIBYTE(a2) = BYTE1(a1);
  v6 = v10 + 1;
  sub_402B9C(a1, a2, a5, v10 + 1);
  _ESI = (a4 ^ v6) + 1;
  __asm { outsb }
  HIBYTE(v9) = v11 | v8;
  LOBYTE(v9) = -(HIBYTE(a5) | a3);
  if ( !__OFADD__((unsigned __int16)(v9 - 1) >> 8, v12) && __OFADD__((unsigned __int16)(v9 - 1) >> 8, v12) )
  {
    __inbyte(a5);
    JUMPOUT(0x402469);
  }
  JUMPOUT(0x4024E5);
}
// 40219E: positive sp value 8 has been found
// 40240C: control flows out of bounds to 40240E
// 402468: control flows out of bounds to 402469
// 4026A9: control flows out of bounds to 4026AD
// 402C50: control flows out of bounds to 402C51
// 40245E: control flows out of bounds to 4024E5
// 4021A6: variable 'v8' is possibly undefined

//----- (0040238B) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
unsigned int __userpurge sub_40238B@<eax>(
        int a1@<edx>,
        int a2@<ecx>,
        char a3@<bl>,
        int a4@<edi>,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  int v64; // edx
  unsigned int result; // eax
  unsigned __int16 v66; // dx
  void *v67; // [esp+Ch] [ebp-4h]
  void *retaddr; // [esp+10h] [ebp+0h]

  *(&retaddr - 5) = v67;
  BYTE1(a1) ^= a3;
  v64 = a4 | a1;
  BYTE1(v64) += 24;
  --v64;
  LOBYTE(v64) = BYTE1(a4) | v64;
  result = ((int (__fastcall *)(int, int))loc_402D80)(a2, v64);
  __outdword(v66, result);
  return result;
}
// 40238F: positive sp value 4 has been found
// 4023A1: variable 'v66' is possibly undefined
// 40238B: too many input arguments, some ignored

//----- (00402411) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402411()
{
  int v1; // [esp+24h] [ebp-8h]
  int v2; // [esp+28h] [ebp-4h]

  *(&v2 - 12) = v1;
  sub_402A2A();
  __inbyte(0x46u);
  __asm { lock mov bl, 51h ; 'Q' }
  JUMPOUT(0x4021C7);
}
// 401F62: positive sp value 8 has been found
// 401F89: control flows out of bounds to 401F8E
// 4022F4: control flows out of bounds to 4022F7
// 40231F: control flows out of bounds to 402321
// 402447: control flows out of bounds to 402448
// 402954: control flows out of bounds to 4021C7
// 4022E3: control flows out of bounds to 4020EB
// 401F81: conditional instruction was optimized away because bh.1!=0

//----- (004024A0) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
__int64 __usercall sub_4024A0@<edx:eax>(char a1@<dl>, char a2@<bl>, __int32 a3@<esi>)
{
  __int64 result; // rax
  __int32 v4; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v4, a3);
  BYTE4(result) = a2 | a1;
  return result;
}
// 4024AA: positive sp value 4 has been found

//----- (004024CD) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __thiscall __noreturn sub_4024CD(void *this)
{
  sub_4027CB((int)this);
}
// 4024FB: positive sp value D8F6 has been found

//----- (00402563) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402563(__int32 a1@<esi>)
{
  __int32 v2; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v2, a1);
  __asm { rep pop esi }
  JUMPOUT(0x40268F);
}
// 402569: positive sp value 4 has been found
// 402576: control flows out of bounds to 40268F

//----- (00402607) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_402607(
        int a1,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  __asm { repne pop ecx }
  JUMPOUT(0x402AD0);
}
// 40260E: positive sp value 4 has been found
// 40261B: control flows out of bounds to 402AD0
// 402607: too many input arguments, some ignored

//----- (004026E1) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4026E1()
{
  void *v0; // [esp+1Ch] [ebp-4h]
  void *retaddr; // [esp+20h] [ebp+0h]

  *(&retaddr - 9) = v0;
  sub_402411();
  JUMPOUT(0x402704);
}
// 4026E5: positive sp value 4 has been found
// 402703: control flows out of bounds to 402704

//----- (004027CB) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn sub_4027CB(int a1@<eax>)
{
  void *v1; // [esp+1Ch] [ebp-4h]
  void *retaddr; // [esp+20h] [ebp+0h]

  *(&retaddr - 9) = v1;
  sub_402029(*(_DWORD *)(a1 + 60) + a1);
  __halt();
}
// 4027CF: positive sp value 4 has been found

//----- (004027ED) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
int __userpurge sub_4027ED@<eax>(
        int a1@<edx>,
        _DWORD *a2@<ebx>,
        int a3@<edi>,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  int v64; // edi
  char v65; // dl
  int v67; // [esp-126Ch] [ebp-1290h]
  int v68; // [esp-1268h] [ebp-128Ch]

  *(&v68 - 10) = v67;
  v64 = a3 - 1 - a1;
  ((void (__thiscall *)(int))sub_4020E0)(a1);
  *(_BYTE *)(v64 + 814025255) &= v65;
  *a2 += a2;
  return ((int (*)(void))sub_40280D)();
}
// 402805: positive sp value 1290 has been found
// 402800: bad sp value at call
// 40280C: bad sp value at call
// 402805: variable 'v65' is possibly undefined
// 4027ED: too many input arguments, some ignored

//----- (0040280D) --------------------------------------------------------
#error "402545: cannot convert to microcode (funcsize=60)"

//----- (004028E3) --------------------------------------------------------
#error "4028E3: function frame is wrong (funcsize=0)"

//----- (00402A2A) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402A2A()
{
  JUMPOUT(0x402291);
}
// 402A2E: positive sp value 4 has been found
// 402D20: control flows out of bounds to 402291

//----- (00402A86) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_402A86(
        int a1@<eax>,
        int a2@<edi>,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  int v64; // edi
  int v67; // ebx
  int v70; // [esp-8h] [ebp-8h]

  _DX = (unsigned __int8)a1;
  v67 = a2 - 1;
  BYTE1(v67) = a1;
  LOBYTE(v67) = -127;
  if ( v67 + 1 < 0 == __OFADD__(1, v67) && v67 + 1 < 0 != __OFADD__(1, v67) )
  {
    __debugbreak();
    JUMPOUT(0x401FF7);
  }
  v64 = (a1 | a2) - a1 - 1 - BYTE1(a1);
  if ( BYTE1(a1) + v64 < 0 == __OFADD__(BYTE1(a1), v64) )
  {
    __asm { repne mov dx, dx }
    if ( BYTE1(a1) + v64 < 0 != __OFADD__(BYTE1(a1), v64) )
      __halt();
  }
  ((void (__stdcall *)(int))((char *)&loc_401EC4 + 3))(v70);
  __asm { aaa }
  JUMPOUT(0x402B3D);
}
// 402AE1: positive sp value C has been found
// 402B3C: control flows out of bounds to 402B3D
// 402AE1: control flows out of bounds to 402AE3
// 402B1B: control flows out of bounds to 401FF7
// 402B34: variable 'v70' is possibly undefined
// 402A86: too many input arguments, some ignored
// 402162: using guessed type _DWORD __far sub_402162();

//----- (00402B9C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402B9C(int (__fastcall *a1)(__int32, int)@<eax>, int a2@<edx>, __int16 a3@<di>, __int32 a4@<esi>)
{
  __int32 v4; // ecx
  void *v5; // eax
  __int16 v6; // dx
  char v7; // dl
  __int16 v8; // di
  __int32 v9; // [esp+0h] [ebp-4h] BYREF
  void *retaddr; // [esp+4h] [ebp+0h]

  _InterlockedExchange(&v9, a4);
  v8 = a2 | (a3 - 1);
  v4 = v9;
  LOBYTE(a2) = BYTE1(a2) + a2;
  BYTE1(v4) = -BYTE1(v9);
  v5 = (void *)a1(v4, a2);
  v7 = (v8 ^ v6) - ((unsigned __int16)(v8 ^ v6) >> 8);
  *(&retaddr - 2) = v5;
  if ( !__CFADD__((v7 - 1) | 0x5E, v7 - 1) && __CFADD__((v7 - 1) | 0x5E, v7 - 1) )
  {
    __asm { into }
    JUMPOUT(0x401E7C);
  }
  JUMPOUT(0x402487);
}
// 401E4F: positive sp value 4 has been found
// 401E7B: control flows out of bounds to 401E7C
// 402220: control flows out of bounds to 402226
// 401E62: control flows out of bounds to 402487
// 402220: conditional instruction was optimized away because esi.4!=0
// 402210: variable 'v6' is possibly undefined

// nfuncs=23 queued=23 decompiled=23 lumina nreq=0 worse=0 better=0
#error "There were 5 decompilation failure(s) on 23 function(s)"
