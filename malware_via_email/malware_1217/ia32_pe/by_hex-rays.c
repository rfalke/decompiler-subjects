/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

_DWORD __far nullsub_2(); // weak
// char __userpurge sub_408693@<al>(int _EAX@<eax>, unsigned int _EDX@<edx>, int _ECX@<ecx>, int a4@<ebx>, int a5@<ebp>, int a6@<edi>, int _ESI@<esi>, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_4080F2; // weak
_UNKNOWN loc_408172; // weak


//----- (00406F7B) --------------------------------------------------------
#error "406F7B: stack frame is too big (funcsize=0)"

//----- (00408693) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
char __userpurge sub_408693@<al>(int _EAX@<eax>, unsigned int _EDX@<edx>, int _ECX@<ecx>, int a4@<ebx>, int a5@<ebp>, int a6@<edi>, int _ESI@<esi>, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63)
{
  _DWORD *i; // eax
  int v69; // ecx
  bool v70; // cf
  bool v71; // zf
  unsigned int v73; // edi
  int v74; // esi
  int v75; // esi
  int v76; // ecx
  int v78; // ecx
  int v80; // edx
  char v81; // ch
  unsigned int v82; // edi
  int v83; // ebx
  int v84; // esi
  unsigned int v89; // edi
  char v91; // ch
  int v92; // esi
  int v93; // eax
  int v94; // edx
  int v95; // edi
  int v96; // edx
  int v97; // edx
  char v98; // bh
  char v99; // bh
  char v100; // ch
  unsigned int v102; // kr00_4
  bool v110; // tt
  unsigned int v111; // edx
  char v112; // bh
  int v114; // edi
  int v123; // edx
  char v126; // bh
  int v127; // esi
  _DWORD v129[3]; // [esp-A77Dh] [ebp-A77Dh] BYREF
  int v130; // [esp-A771h] [ebp-A771h] BYREF
  int v131; // [esp-10h] [ebp-10h]
  int v132; // [esp-Ch] [ebp-Ch]

  BYTE1(_ECX) &= 0xF4u;
  __asm { rcl     dx, cl }
  _EBX = a4 - 1576890822;
  v70 = __CFSHL__(a6, 14);
  v114 = a6 << 14;
  LOBYTE(_EBX) = _EBX - (v70 + BYTE1(_EAX));
  __asm
  {
    rcl     esi, cl
    rcl     cl, 1Ah
  }
  v89 = v114 << _ECX;
  if ( _ESI == -1414909863 )
    __halt();
  v130 = _ECX;
  _ECX = (unsigned int)&v130;
  if ( v89 == -2138279920 )
  {
    LOBYTE(_EAX) = __inbyte(_EDX);
    __asm
    {
      aam     7Ah ; 'z'
      fld     dword ptr [ecx]
    }
    goto LABEL_75;
  }
  while ( 1 )
  {
    v129[2] = _ECX;
    v129[1] = 64;
    v129[0] = 4227314;
    for ( i = (_DWORD *)&loc_4080F2; *i != 9460301; i = (_DWORD *)(((unsigned int)i - 1) & 0xFFFFF000) )
      ;
    _ECX = (unsigned int)i;
    _EAX = (unsigned __int32)i + i[15];
    v129[0] = *(_DWORD *)(_EAX + 80);
    if ( _EAX == -1535245695 )
    {
      __outdword(_EDX, 0xA47E0281);
      *(_DWORD *)_ECX += v129;
      goto LABEL_72;
    }
    v93 = (*(int (__cdecl **)(unsigned int))(_ECX
                                           + *(_DWORD *)(_ECX + *(_DWORD *)((char *)&loc_408172 + _EAX - 4227314) + 16)))(_ECX);
    HIWORD(v95) = HIWORD(v132);
    if ( _EBX == -894473203 )
    {
      while ( 1 )
        ;
    }
    v92 = v132 + _ESI;
    SBYTE1(v93) >>= v131;
    if ( v92 == 1801540398 )
    {
      *(_DWORD *)(2 * v93) += v93;
      JUMPOUT(0x408313);
    }
    LOBYTE(v94) = v94 + 18;
    --BYTE1(v94);
    v97 = v132 ^ v94;
    BYTE1(v93) = __ROL1__(BYTE1(v93), v131);
    v98 = BYTE1(_EBX) >> v131;
    v70 = __CFADD__(v98, -64);
    BYTE1(_EBX) = v98 - 64;
    _ECX = v70 + v131 - 1729606216;
    _EAX = v97 + v93 - 1;
    if ( v132 != -1430490945 )
      JUMPOUT(0x40837C);
    LOWORD(v92) = v92 + 4;
    LOWORD(v95) = 28867;
    LOBYTE(_EBX) = BYTE1(v97) | _EBX;
    v89 = v95 + 1;
    _ESI = v92 << 6;
    LOWORD(_ESI) = v97 & _ESI;
    LOBYTE(v97) = -(char)v97;
    v70 = __CFSHR__(__ROL1__(BYTE1(v97), _ECX), _ECX);
    BYTE1(v97) = _EBX;
    _EDX = v70 + v97 - 1219802002;
    LOBYTE(_EDX) = _EBX | _EDX;
    BYTE1(_EDX) <<= _ECX;
    LOWORD(_ESI) = (unsigned __int16)_ESI >> _ECX;
    if ( _EBX == -879019571 )
      break;
LABEL_72:
    v123 = _EDX >> _ECX;
    LOBYTE(v123) = -(char)v123;
    _ESI >>= _ECX;
    BYTE1(v123) <<= _ECX;
    _EDX = v123 >> 25;
    BYTE1(_EDX) |= 0xA7u;
    if ( _ECX != 997089863 )
    {
      LOBYTE(_EBX) = _EBX - ((_ECX < 0x3B6E6247) + 123);
      BYTE1(_ECX) = BYTE1(_EDX);
      __asm { rcr     dl, 19h }
      LOWORD(_ECX) = -(__int16)_ECX;
      if ( _ECX != -265107544 )
      {
        v99 = __ROL1__(BYTE1(_EBX), _ECX);
        BYTE1(_EBX) = __ROL1__(v99, 26) - (__CFSHL__(v99, 26) - 55);
        if ( _EAX == -740794999 )
          __asm { retf    0A76Dh }
        v100 = BYTE1(_ECX) + 99;
        BYTE1(_ECX) = v100 >> 7;
        v96 = -1467283986;
        if ( v89 != 2077596512 )
        {
          LOBYTE(_EBX) = -*(_BYTE *)v89;
          BYTE1(_ECX) = (BYTE1(_ECX) - ((v89 < 0x7BD59B60) + 5)) & 0x94;
          LOBYTE(_ECX) = -84;
          LOWORD(_ECX) = -(__int16)_ECX;
          v76 = ~(_ECX + 103493918);
          LOBYTE(v96) = __ROL1__(-18, v76);
          LOBYTE(v76) = (_BYTE)v76 << v76;
          v75 = (int)_ESI >> v76;
          v70 = __CFSHL__(v76, v76);
          LOBYTE(v76) = (_BYTE)v76 << v76;
          BYTE1(v76) -= v70 + 5;
          _EDX = v96 - 1;
          BYTE1(_EDX) += BYTE1(_EBX);
          if ( _EDX == 1588362284 )
          {
            LOBYTE(_EAX) = MEMORY[0xCF84AC4A];
            *(_BYTE *)v75 += BYTE1(_EAX);
            v71 = (*(_BYTE *)(_EAX - 880739371))++ == 0xFF;
            __asm
            {
              bound   eax, [eax-2C998C2Fh]
              fcomp5  st(2), st
            }
            v78 = v76 - 1;
            if ( v71 || !v78 )
            {
              MEMORY[0x7DAF18B1](v78);
              if ( v71 )
                v132 = (unsigned __int16)__SS__;
              __asm { rcl     bl, 19h }
              JUMPOUT(0x40844D);
            }
            v69 = v78 - 1;
            if ( !v69 )
            {
              MEMORY[0x5EAC7C2C] -= v89;
              v70 = __CFADD__(*(_BYTE *)(a5 + 832357249), BYTE1(_EAX));
              v71 = *(_BYTE *)(a5 + 832357249) + BYTE1(_EAX) == 0;
              _EAX = MEMORY[0x63E631F9];
              __DS__ = MEMORY[0x63E631FD];
              *(_BYTE *)v89 = *MK_FP(MEMORY[0x63E631FD], v75);
              v74 = v75 + 1;
              v73 = v89 + 1;
              if ( v71 )
                JUMPOUT(0x4081A5);
              LOBYTE(_EDX) = __ROL1__(BYTE1(_EAX) + v70 + 44, 8);
              v127 = _EAX + v74;
              LOWORD(v127) = _EDX | v127;
              v83 = __ROR4__(_EBX, v69);
              BYTE1(v83) = 58;
              v84 = v127 - 1531952269;
              BYTE1(_EDX) = 102;
              if ( v73 == -87897609 )
              {
                *(_BYTE *)(v84 - 83) -= v69;
                __asm
                {
                  insb
                  aad     0B8h ; '¸'
                }
                JUMPOUT(0x40897D);
              }
              _AL = _EAX ^ 0xFC;
              if ( v83 == 1267791731 )
              {
                v102 = __readeflags();
                v132 = v102;
                __asm { das }
                JUMPOUT(0x40847F);
              }
              JUMPOUT(0x4084AF);
            }
            JUMPOUT(0x408140);
          }
          BYTE1(_EDX) = _EDX;
          if ( _EDX == 1363820677 )
          {
            __asm { into }
            JUMPOUT(0x408691);
          }
          JUMPOUT(0x40879D);
        }
        __asm { repne nop }
        goto LABEL_83;
      }
      _InterlockedExchange((volatile __int32 *)_EBX, _EBX);
      MEMORY[0xF032C7E3] -= 265107544;
      return _EAX;
    }
    __asm { rcl     ah, 6 }
    BYTE1(_ECX) ^= 0x7Cu;
    v126 = _AH | BYTE1(_EBX);
    v112 = v126 | 5;
    LOBYTE(_ECX) = v112 ^ _ECX;
    _ECX = _ECX + 1447575770;
    BYTE1(_EBX) = v112 - 1;
    if ( _ESI != 261351205 )
    {
      v70 = __CFADD__(_ECX, -950054589);
      _CX = _ECX + 20803;
      _BH = HIBYTE(_CX) + v70 + BYTE1(_EBX);
      __asm { rcr     bh, cl }
      JUMPOUT(0x4082FE);
    }
  }
  *(_BYTE *)(_EAX - 830348368) &= BYTE1(_ECX);
  LOBYTE(_EBX) = 57;
  __asm { int     80h }
  _EAX = __indword(0x53u);
  --BYTE1(_EDX);
  if ( _ESI == -751808751 )
  {
    LOBYTE(_EAX) = __inbyte(0x4Bu);
    __asm { fidivr  word ptr [ebx+ebx*2] }
    v132 = (unsigned __int16)__ES__;
    v110 = __CFSHR__(_ECX, _ECX);
    LOBYTE(_ECX) = __ROR1__(_ECX, _ECX);
    _CX = _ECX - (v110 + (_WORD)_EAX);
    LOWORD(_EDX) = (unsigned __int16)_EDX >> _CX;
    v111 = __ROL4__(_EDX, _CX);
    if ( v111 == 655548538 )
      return _EAX;
    LOBYTE(_CX) = v111;
    __asm { rcl     cx, cl }
    _EDX = HIWORD(v111);
    LOBYTE(_EDX) = ~(_EDX ^ 0x9B);
    if ( _EDX == 1231476531 )
      __asm { retf }
LABEL_75:
    _DL = (_BYTE)_EDX << _ECX;
    _CL = v89 | _ECX;
    __asm { rcl     dl, cl }
LABEL_83:
    JUMPOUT(0x408336);
  }
  __asm { rcr     dl, cl }
  _ECX = _ECX - 1926861155;
  BYTE1(_EDX) >>= _ECX;
  __asm { rcl     ch, cl }
  if ( _EDX == 607441397 )
  {
    __asm { das }
    JUMPOUT(0x408138);
  }
  __asm { rcr     ch, 8 }
  *(_BYTE *)v89 = 57;
  v91 = BYTE1(_EAX) & (_CH - 113);
  if ( _EAX == 2046153728 )
    JUMPOUT(0x4082E9);
  LOBYTE(_EDX) = _EDX + 1;
  v80 = v89 ^ _EDX;
  LOBYTE(v80) = v80 + 1;
  v81 = __ROR1__(v91, 255);
  v82 = v89 + 1;
  BYTE1(v80) += v81;
  _EDX = v80 - 1;
  BYTE1(_ECX) = v81 >> 6;
  LOBYTE(_ECX) = -57;
  if ( _EAX == 1260086134 )
    JUMPOUT(0x4080EA);
  __asm { rcr     edx, 11h }
  v70 = _ESI < (unsigned int)(_EAX < 0x4B1B6376) - 1876030471;
  _ESI = _ESI - ((_EAX < 0x4B1B6376) - 1876030471);
  BYTE1(_ECX) += v70 + 87;
  _ECX = _ECX + 1390401182;
  LOWORD(_ECX) = -(__int16)_ECX;
  if ( _ECX == -291243734 )
  {
    __asm
    {
      fidiv   word ptr ds:809A4DA8h
      iret
    }
  }
  __asm { rcr     esi, cl }
  LOWORD(_EAX) = _EAX - 1;
  LOWORD(_ESI) = _EAX | _ESI;
  if ( v82 == 1894327488 )
  {
    __asm { repne xor al, 0FCh }
    JUMPOUT(0x408575);
  }
  if ( _ESI != -1774523032 )
    JUMPOUT(0x408506);
  return _EAX;
}
// 4089B9: positive sp value A76D has been found
// 4080E9: control flows out of bounds to 4080EA
// 408115: control flows out of bounds to 40811B
// 408137: control flows out of bounds to 408138
// 4081A3: control flows out of bounds to 4081A5
// 4082E3: control flows out of bounds to 4082E9
// 4082FD: control flows out of bounds to 4082FF
// 408311: control flows out of bounds to 408313
// 408379: control flows out of bounds to 40837C
// 40847D: control flows out of bounds to 40847F
// 408486: control flows out of bounds to 408488
// 408500: control flows out of bounds to 408506
// 408535: inconsistent fpu stack
// 408690: control flows out of bounds to 408691
// 4087A4: control flows out of bounds to 4087A5
// 4081EC: control flows out of bounds to 40844D
// 408359: control flows out of bounds to 408575
// 40844C: control flows out of bounds to C3E1FF22
// 408555: control flows out of bounds to 40897D
// 408634: control flows out of bounds to 40853A
// 408650: control flows out of bounds to 408184
// 408805: control flows out of bounds to 408336
// 4088C0: control flows out of bounds to 4082FE
// 408186: control flows out of bounds to 408140
// 4081A3: control flows out of bounds to 40813F
// 408471: control flows out of bounds to 4084AF
// 408685: control flows out of bounds to 40879D
// 408318: bad sp value at call
// 40833E: bad sp value at call
// 4089BA: bad sp value at call
// 408115: conditional instruction was optimized away because of 'ebx.4==CB9B3939'
// 40814A: conditional instruction was optimized away because of 'edi.4==70E924C0'
// 408330: conditional instruction was optimized away because of 'ebx.4==CAAF6C0D'
// 408791: conditional instruction was optimized away because of 'edi.4==70E924C0'
// 4081DB: variable 'v71' is possibly undefined
// 408758: variable 'v94' is possibly undefined
// 408693: too many input arguments, some ignored
// 40837E: using guessed type _DWORD __far nullsub_2();

// nfuncs=4 queued=2 decompiled=2 lumina nreq=0 worse=0 better=0
#error "There were 1 decompilation failure(s) on 2 function(s)"
