// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401020: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	fn00401270();
	Eq_6 eax_17 = (dwLoc20 << 0x0E) + 0x000BD020;
	Eq_438 ecx_20[] = (eax_17 & 0xFFFF0000) + ~0x000181B3;
	word32 * edx_26 = fp - 229 + dwLoc20;
	*edx_26 = ecx_20[dwLoc20].dw0000 - 0x28;
	ptr32 eax_31 = (eax_17 & 0xFFFF0000) + *(&(ecx_20 + (dwLoc20 << 0x09) / 0x0200)->dw0000 - 0x04) + 0xF9 - dwLoc20;
	*(fp - 0x5C) = fp - 0x08;
	*(fp - 0x60) = 0x04;
	*(fp - 100) = dwLoc14;
	*(fp - 0x68) = eax_31;
	<anonymous> ** eax_46 = 0x004010DD - dwLoc20;
	ptr32 esp_48;
	word32 ebp_49;
	byte SCZO_50;
	word32 eax_51;
	word32 ecx_52;
	word32 edx_53;
	byte SZO_54;
	byte C_55;
	word32 ebx_56;
	word32 esi_57;
	byte dl_58;
	byte Z_59;
	bcuiposr0 None_60;
	(*eax_46)();
	*(esp_48 - 0x04) = dwLoc20;
	*(esp_48 - 0x08) = dwLoc14;
	*(esp_48 - 0x0C) = eax_31;
	fn00401200(dwArg00, dwArg04, dwArg08);
	struct Eq_111 * ebx_79 = *(eax_31 + 0x010D - dwLoc20) + eax_31;
	byte dl_81 = ebx_79->b0006;
	*(esp_48 - 0x04) = (dwLoc20 << 0x05) + ~0x19DF;
	*(esp_48 - 0x08) = 0x3000;
	*(esp_48 - 0x0C) = *(&ebx_79->dw0034 + 0x034B - ((dwLoc20 << 0x05) >> 0x01));
	*(esp_48 - 0x10) = ebx_79->dw0034;
	Eq_160 eax_101 = VirtualAlloc(*(esp_48 - 0x10), *(esp_48 - 0x0C), *(esp_48 - 0x08), *(esp_48 - 0x04));
	*(esp_48 - 0x04) = (union Eq_160 *) eax_101;
	*(esp_48 - 0x08) = eax_31;
	*(esp_48 - 0x0C) = *((char *) &ebx_79->dw0034 + 0x00F1 - dwLoc20);
	fn00401250(dwArg00, dwArg04, dwArg08);
	word32 dwLoc1C_118 = (word32) dl_81;
	struct Eq_216 * esi_117 = &ebx_79->dw0034 + 0x0031;
	do
	{
		*(esp_48 - 0x04) = (word32) eax_101 + esi_117->t000C;
		*(esp_48 - 0x08) = eax_31 + esi_117->dw0014;
		*(esp_48 - 0x0C) = esi_117->dw0010;
		fn00401250(dwArg00, dwArg04, dwArg08);
		word32 v23_138 = dwLoc1C_118 - 0x01;
		esi_117 = esi_117 + 0x01;
		dwLoc1C_118 = v23_138;
	} while (v23_138 != 0x00);
	Mem148[fp + 0xD1 - dwLoc20 + 0x00:word32] = Mem133[ebx_79 - 0xA9 + dwLoc20:word32] + eax_101;
	*(esp_48 - 0x04) = fp - 0x0129 + dwLoc20;
	*(esp_48 - 0x08) = 1427582266 - dwLoc20 - 1423383235;
	*(esp_48 - 0x0C) = dwLoc20 + ~0x98;
	<anonymous> * eax_166 = (dwLoc20 << 0x06) + 4185616;
	ptr32 esp_168;
	word32 ebp_169;
	byte SCZO_170;
	word32 eax_171;
	word32 ecx_172;
	word32 edx_173;
	byte SZO_174;
	byte C_175;
	word32 ebx_176;
	word32 esi_177;
	byte dl_178;
	byte Z_179;
	bcuiposr0 None_180;
	eax_166();
	*(esp_168 - 0x04) = dwLoc20;
	*(esp_168 - 0x08) = 0x38;
	*(esp_168 - 0x0C) = fp - 88;
	fn00401200(dwArg00, dwArg04, dwArg08);
	Eq_160 eax_195 = eax_101;
	do
		eax_195 = eax_195 + 0x01;
	while (*eax_195 != dwLoc20 + 0xAABBCC0C);
	*(esp_168 - 0x04) = (union Eq_160 *) eax_195;
	*(esp_168 - 0x08) = fp - 0x0129 + dwLoc20;
	*(esp_168 - 0x0C) = 0x0109 - dwLoc20;
	return fn00401250(dwArg00, dwArg04, dwArg08);
}

// 00401200: void fn00401200(Stack word32 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C)
void fn00401200(word32 dwArg04, word32 dwArg08, word32 dwArg0C)
{
	ui32 * ebx_26 = dwArg04;
	int32 ecx_10 = dwArg08;
	word32 eax_16 = dwArg0C + 939144012;
	word32 dwLoc08_22 = 0x01;
	while (true)
	{
		*ebx_26 = *ebx_26 ^ eax_16;
		ecx_10 = ecx_10 - 0x04;
		if (ecx_10 <= 0x00)
			break;
		eax_16 = eax_16 + 0x0BA9F4A6 + dwLoc08_22;
		ebx_26 = (char *) ebx_26 + 0x00D5 - dwArg0C;
		dwLoc08_22 = -*(fp - 0x08);
	}
	return;
}

// 00401250: Register word32 fn00401250(Stack word32 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C)
word32 fn00401250(word32 dwArg04, word32 dwArg08, word32 dwArg0C)
{
	byte * edi_13 = dwArg0C;
	byte * esi_15 = dwArg08;
	word32 ecx_17 = dwArg04;
	do
	{
		byte al_24 = *esi_15;
		*edi_13 = al_24;
		eax = DPB(eax, al_24, 0);
		esi_15 = esi_15 + 0x01;
		edi_13 = edi_13 + 0x01;
		ecx_17 = ecx_17 - 0x01;
	} while (ecx_17 != 0x00);
	return eax;
}

// 00401270: void fn00401270()
void fn00401270()
{
	struct Eq_414 * esp_7;
	uint32 eax_8;
	byte SZO_9;
	word32 edx_10;
	byte SCZO_11;
	byte C_12;
	word32 ecx_13;
	((<anonymous> **) 0x7FFE0300)();
	*esp_7->ptr0004 = (eax_8 & 0x0F) + ((eax_8 >> 0x18) + 0x10) - 0x01;
	return;
}

