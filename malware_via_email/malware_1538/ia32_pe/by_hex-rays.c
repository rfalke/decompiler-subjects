/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ecx>);

//-------------------------------------------------------------------------
// Data declarations

int dword_46D000[512] =
{
  -1845297592,
  -945993728,
  1744502884,
  629744123,
  172378862,
  1079030333,
  464268681,
  -1277498131,
  676718621,
  -332064367,
  -1345350324,
  356884265,
  614141155,
  1747413079,
  -302064169,
  138569872,
  605434,
  -1335618049,
  1188340510,
  1396743771,
  1759344505,
  154877743,
  1040898887,
  -1685046168,
  -1197216069,
  1685932093,
  50337038,
  1322427727,
  -12120201,
  544219332,
  1575828298,
  -831987443,
  1466572937,
  115764436,
  222860693,
  -149593384,
  1872039718,
  613803033,
  1876401722,
  141478522,
  700047742,
  766853909,
  -1838231572,
  1305365478,
  624258439,
  1767094986,
  890306527,
  -678886063,
  -1805084310,
  -1233491396,
  -161045668,
  404010617,
  1282076845,
  -538074563,
  -1352624860,
  256873488,
  16759685,
  1065312419,
  -1958305860,
  -1230068843,
  -22429567,
  1654761258,
  400743511,
  437912040,
  679067866,
  495705592,
  -456949423,
  -1071508691,
  1700845793,
  975051664,
  643446759,
  207377493,
  -691858495,
  409049049,
  1764149443,
  -720524114,
  1209581339,
  -1413891769,
  -1893386772,
  -1102400177,
  1399266817,
  106321065,
  1469722026,
  -2087381662,
  1413388892,
  1374045700,
  936044178,
  -257173680,
  -411413713,
  811783835,
  995486439,
  -845366537,
  1650570767,
  -338408725,
  1024262567,
  -1227071,
  1745030719,
  949148349,
  1203591648,
  1274784714,
  -33308116,
  -806361119,
  17611939,
  1135977467,
  -1035659893,
  -1408434612,
  1861279836,
  2064598438,
  654817077,
  2072817257,
  1185689363,
  1461720486,
  1000510762,
  893987912,
  -552829732,
  664106417,
  1360674968,
  557580708,
  1188725663,
  728086045,
  529568045,
  -304018301,
  1444718930,
  -222358076,
  1552399942,
  -323372794,
  -470662993,
  2025098257,
  792668766,
  367704637,
  593709735,
  -753227653,
  31798287,
  460041722,
  -1555942499,
  -1371894965,
  -16892964,
  1341570028,
  -1078897093,
  -761687424,
  -182337376,
  -423728221,
  -945710661,
  744910208,
  -41581937,
  -412507209,
  -1561418077,
  -1484517606,
  -705698870,
  -1983422893,
  -912353259,
  1166665471,
  -898914626,
  -371235951,
  -1305529586,
  -2097722071,
  -149957067,
  -1138380095,
  -1388346654,
  -2085011925,
  2067924163,
  1992193045,
  1212644035,
  -1004155636,
  -743170324,
  -1822673856,
  492161657,
  -642044195,
  1397211835,
  -650298394,
  1945677217,
  -1449391111,
  103439593,
  -1101516101,
  1974632623,
  262757859,
  1642308762,
  1127921047,
  115091246,
  1966937291,
  802636249,
  -158174556,
  914305896,
  1190935382,
  -58255720,
  -1956004712,
  -1303516841,
  2120147995,
  1029785911,
  -118594667,
  -1503044040,
  742040651,
  365746698,
  1102378177,
  -274947729,
  488345889,
  -2117679182,
  -2120965075,
  -232560968,
  1173496291,
  -525851264,
  263224896,
  90783715,
  -990770137,
  1905560565,
  -618504790,
  508866158,
  1447606343,
  780876171,
  -2090582499,
  770246977,
  60243938,
  24251538,
  971583536,
  2030499960,
  -565357670,
  -998287546,
  1676527673,
  1247058439,
  850976894,
  553272929,
  -1992439853,
  -57663525,
  1400154481,
  882213224,
  1921950561,
  -558363529,
  1985556299,
  1849708287,
  -1719333391,
  -927425605,
  -263751881,
  -752650262,
  1031098319,
  873545355,
  1938235584,
  -2089382500,
  1441591388,
  -98612204,
  494777637,
  -1453554726,
  1534026324,
  539434025,
  1199818831,
  -1431169652,
  227677019,
  -503851682,
  630171661,
  -468140827,
  -637181577,
  1327774780,
  125621755,
  -139263118,
  -799981940,
  -1871727965,
  1722876455,
  1930112069,
  -1975642780,
  -1544790575,
  1290037295,
  -520654007,
  -1280553132,
  1462097778,
  849913487,
  393974045,
  -467155299,
  -956095295,
  2081156811,
  261122544,
  -941770470,
  -524686051,
  -1101570487,
  302744344,
  1580117720,
  1493629772,
  -1749182885,
  -1953244093,
  -1078654736,
  1008357085,
  1680314382,
  763593099,
  372913126,
  1871330926,
  -2051047525,
  -2111975795,
  -1862598521,
  1174356431,
  -2111454915,
  1042103835,
  -338595315,
  -1236015806,
  -1045243339,
  1286130980,
  358056047,
  -626791003,
  1025595469,
  -436257359,
  -1929538029,
  801651380,
  1028023567,
  331912170,
  1802954961,
  1847242736,
  1513603359,
  -1544449039,
  2123908111,
  150472148,
  -645381698,
  1137897963,
  -1820080862,
  175069253,
  -1483214390,
  -1180395183,
  1327772983,
  -504306984,
  -19173824,
  -1691674340,
  -2092243730,
  1203283283,
  42503421,
  -123569911,
  -1832787698,
  199055857,
  101621063,
  1635336562,
  586834283,
  -573600136,
  -750196911,
  -1794867945,
  -690248127,
  519441267,
  -1568983539,
  -1825234824,
  957978829,
  -1204346663,
  -1483068148,
  -1610567901,
  1618142363,
  -1898589552,
  -1503915717,
  -1849272889,
  -1330157751,
  -1994526645,
  227662583,
  234208163,
  1385121266,
  -1717107992,
  1088541137,
  1930156526,
  -1628621794,
  797973482,
  1389178136,
  1137928645,
  1066285366,
  170567791,
  1361014282,
  -832329085,
  1278745735,
  1151068988,
  1102970276,
  -1036026569,
  1655838749,
  -1666472589,
  1973765883,
  684516975,
  1913407297,
  -1189231759,
  -1057506267,
  940820535,
  2132944722,
  2091794656,
  -1876581386,
  -915096523,
  455839766,
  490320992,
  947869358,
  1012697025,
  -726382778,
  67480380,
  1913403991,
  507187115,
  -1009735891,
  2009419328,
  -1113097440,
  -515396269,
  -1792203579,
  -1858771286,
  1372226110,
  -541469837,
  1111004313,
  -1843687323,
  -1627069082,
  1081196181,
  210220670,
  440806712,
  1265227192,
  264845182,
  -378714264,
  -601654332,
  1088542796,
  226816543,
  -1427696234,
  1887052626,
  739839154,
  -1244248104,
  -421258071,
  -1088606926,
  1203701615,
  -467993158,
  1094131465,
  -286954700,
  -1256484158,
  1426144809,
  -937545279,
  -569315027,
  373684550,
  1678749899,
  -177560547,
  1126279970,
  -628768271,
  957460629,
  724550129,
  -399168721,
  -1557289195,
  1012613437,
  472485944,
  854715911,
  980834194,
  394599568,
  356423197,
  -1896780235,
  -1509036251,
  565183467,
  1088775321,
  2144419266,
  1755814789,
  986144253,
  -466736132,
  190642435,
  -911330044,
  1849701811,
  368632305,
  -1244665406,
  -244432864,
  -764563221,
  348576745,
  -470773974,
  1876631423,
  -1190743070,
  -450935840,
  764806728,
  999987239,
  -881894843,
  2099232071,
  -1990034285,
  -184478452,
  -382261317,
  1020127057,
  598949008,
  -1438748938,
  -373753529,
  -986576116,
  72305729,
  -1751039593,
  881566699,
  119854367,
  -1280022402,
  -953529606,
  2121154955,
  441111708,
  1375835247,
  1544800313,
  1194328132,
  -437123182,
  -1949286926,
  -783976713,
  397056345,
  1059694997,
  1536221757,
  -1731778980,
  598232281,
  977097930,
  -1545007866,
  1643136157,
  266284489,
  1040764826,
  223867404,
  -1366356456,
  -1190766897,
  366358009,
  223203655,
  365610773,
  -155172232,
  -952517834,
  -1382703549,
  264037693,
  -974640952,
  82962960,
  -1635043267,
  -595470876,
  208537305,
  449301787,
  691985539,
  -1753991503,
  1677408276,
  936498727,
  2029453748,
  1903555184,
  -519486005,
  104850801,
  -1628364167,
  18041000
}; // weak


//----- (004788B0) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ecx>)
{
  int *v3; // esi
  int *v4; // edi
  unsigned int v5; // ebp
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  int i; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  unsigned int v16; // eax
  bool v17; // zf
  int v18; // ebx
  int v19; // ett
  unsigned int v20; // eax
  bool v21; // cf
  int v22; // ebx
  int v23; // ett
  bool v24; // cf
  int v25; // ebx
  int v26; // ett
  int v27; // ecx
  int v28; // ecx
  unsigned int v29; // eax
  unsigned int v30; // eax
  int v31; // eax
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  bool v35; // cf
  int v36; // ebx
  int v37; // ett
  bool v38; // cf
  int v39; // ebx
  int v40; // ebx
  int v41; // ett
  bool v42; // zf
  int v43; // ebx
  int v44; // ett
  unsigned int v45; // ecx
  char *v46; // edx
  char v47; // al
  int v48; // eax
  bool v49; // cc
  int *v50; // esi
  int *v51; // edi
  int v52; // ecx
  char v53; // al
  unsigned __int8 v54; // al
  int v55; // eax
  int v56; // eax
  char v57; // t0
  unsigned __int8 v58; // bl
  char *v59; // edi
  int v60; // eax
  int *v61; // ebx
  int v62; // ebp
  char v63; // al
  char *v64; // ecx
  unsigned __int8 v65; // al
  int v66; // eax
  void (__cdecl *v67)(int *, int, int, int *); // ebp
  int *v68; // edi
  int v69[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v70; // [esp+2Ch] [ebp-80h] BYREF
  int v71; // [esp+30h] [ebp-7Ch] BYREF
  char *v72; // [esp+34h] [ebp-78h]
  int *v73; // [esp+38h] [ebp-74h]
  int v74; // [esp+3Ch] [ebp-70h]
  int v75; // [esp+40h] [ebp-6Ch]
  int v76; // [esp+44h] [ebp-68h]
  int v77; // [esp+48h] [ebp-64h]
  int *v78; // [esp+4Ch] [ebp-60h]
  int v79; // [esp+50h] [ebp-5Ch]
  int v80; // [esp+54h] [ebp-58h]
  int v81; // [esp+58h] [ebp-54h]
  int v82; // [esp+5Ch] [ebp-50h] BYREF

  v78 = &v82;
  v76 = a3;
  v75 = a2;
  v74 = a1;
  v3 = dword_46D000;
  v4 = &dword_46D000[-110592];
  v73 = &dword_46D000[-110592];
  v5 = -1;
  while ( 1 )
  {
    v9 = *v3;
    v7 = (unsigned int)v3++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v3;
        v3 = (int *)((char *)v3 + 1);
        *(_BYTE *)v4 = v6;
        v4 = (int *)((char *)v4 + 1);
      }
      else
      {
        for ( i = 1; ; i = v20 + v21 + v20 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v3;
            v7 = (unsigned int)v3++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v16 = i + v12 + i;
          v7 = __CFADD__(v13, v13);
          v17 = 2 * v13 == 0;
          v8 = 2 * v13;
          if ( v7 )
          {
            if ( !v17 )
              break;
            v18 = *v3;
            v7 = (unsigned int)v3++ < 0xFFFFFFFC;
            v19 = v7 + v18;
            v7 = __CFADD__(v7, v18) | __CFADD__(v18, v19);
            v8 = v18 + v19;
            if ( v7 )
              break;
          }
          v20 = v16 - 1;
          v21 = __CFADD__(v8, v8);
          v8 *= 2;
          if ( !v8 )
          {
            v22 = *v3;
            v7 = (unsigned int)v3++ < 0xFFFFFFFC;
            v23 = v7 + v22;
            v21 = __CFADD__(v7, v22) | __CFADD__(v22, v23);
            v8 = v22 + v23;
          }
        }
        v28 = 0;
        v7 = v16 < 3;
        v29 = v16 - 3;
        if ( v7 )
        {
          v32 = __CFADD__(v8, v8);
          v8 *= 2;
          if ( !v8 )
          {
            v33 = *v3;
            v7 = (unsigned int)v3++ < 0xFFFFFFFC;
            v34 = v7 + v33;
            v32 = __CFADD__(v7, v33) | __CFADD__(v33, v34);
            v8 = v33 + v34;
          }
        }
        else
        {
          v30 = v29 << 8;
          LOBYTE(v30) = *(_BYTE *)v3;
          v3 = (int *)((char *)v3 + 1);
          v31 = ~v30;
          if ( !v31 )
          {
            v50 = v73;
            v51 = v73;
            v52 = 4;
            while ( 1 )
            {
              v53 = *(_BYTE *)v51;
              v51 = (int *)((char *)v51 + 1);
              v54 = v53 + 24;
              while ( v54 <= 1u && *(_BYTE *)v51 == 1 )
              {
                v55 = *v51;
                LOWORD(v55) = BYTE1(*v51);
                v56 = __ROL4__(v55, 16);
                v57 = v56;
                LOBYTE(v56) = BYTE1(v56);
                BYTE1(v56) = v57;
                v58 = *((_BYTE *)v51 + 4) + 24;
                *v51 = (int)v50 + v56 - (_DWORD)v51;
                v51 = (int *)((char *)v51 + 5);
                v54 = v58;
                if ( !--v52 )
                {
                  v59 = (char *)(v50 + 119808);
LABEL_44:
                  v60 = *(_DWORD *)v59;
                  if ( *(_DWORD *)v59 )
                  {
                    v61 = (int *)((char *)v50 + *((_DWORD *)v59 + 1));
                    v59 += 8;
                    v62 = ((int (__cdecl *)(int, int, int, int, int, int *, int, int, int))v50[125547])(
                            (int)v50 + v60 + 502108,
                            v74,
                            v75,
                            v76,
                            v77,
                            v78,
                            v79,
                            v80,
                            v81);
                    while ( 1 )
                    {
                      v63 = *v59++;
                      if ( !v63 )
                        goto LABEL_44;
                      v64 = v59;
                      v72 = v59;
                      v65 = v63 - 1;
                      do
                      {
                        if ( !v64 )
                          break;
                        v17 = *v59++ == (char)v65;
                        --v64;
                      }
                      while ( !v17 );
                      v66 = ((int (__cdecl *)(int, char *))v50[125548])(v62, v72);
                      if ( !v66 )
                        break;
                      *v61++ = v66;
                    }
                    v60 = ((int (*)(void))v50[125552])();
                  }
                  v67 = (void (__cdecl *)(int *, int, int, int *))v50[125549];
                  v68 = v50 - 1024;
                  v70 = v60;
                  v67(v50 - 1024, 4096, 4, &v70);
                  *((_BYTE *)v68 + 543) &= 0x7Fu;
                  *((_BYTE *)v68 + 583) &= 0x7Fu;
                  v67(v50 - 1024, 4096, v69[0], v69);
                  do
                    v70 = 0;
                  while ( &v70 != &v71 - 32 );
                  JUMPOUT(0x4010D5);
                }
              }
            }
          }
          v32 = v31 & 1;
          v5 = v31 >> 1;
        }
        if ( v32 )
          goto LABEL_15;
        v28 = 1;
        v35 = __CFADD__(v8, v8);
        v8 *= 2;
        if ( !v8 )
        {
          v36 = *v3;
          v7 = (unsigned int)v3++ < 0xFFFFFFFC;
          v37 = v7 + v36;
          v35 = __CFADD__(v7, v36) | __CFADD__(v36, v37);
          v8 = v36 + v37;
        }
        if ( v35 )
        {
LABEL_15:
          v24 = __CFADD__(v8, v8);
          v8 *= 2;
          if ( !v8 )
          {
            v25 = *v3;
            v7 = (unsigned int)v3++ < 0xFFFFFFFC;
            v26 = v7 + v25;
            v24 = __CFADD__(v7, v25) | __CFADD__(v25, v26);
            v8 = v25 + v26;
          }
          v27 = v28 + v24 + v28;
        }
        else
        {
          while ( 1 )
          {
            v38 = __CFADD__(v8, v8);
            v39 = 2 * v8;
            if ( !v39 )
            {
              v40 = *v3;
              v7 = (unsigned int)v3++ < 0xFFFFFFFC;
              v41 = v7 + v40;
              v38 = __CFADD__(v7, v40) | __CFADD__(v40, v41);
              v39 = v40 + v41;
            }
            v28 += v38 + v28;
            v7 = __CFADD__(v39, v39);
            v42 = 2 * v39 == 0;
            v8 = 2 * v39;
            if ( v7 )
            {
              if ( !v42 )
                break;
              v43 = *v3;
              v7 = (unsigned int)v3++ < 0xFFFFFFFC;
              v44 = v7 + v43;
              v7 = __CFADD__(v7, v43) | __CFADD__(v43, v44);
              v8 = v43 + v44;
              if ( v7 )
                break;
            }
          }
          v27 = v28 + 2;
        }
        v45 = (v5 < 0xFFFFFB00) + v27 + 2;
        v46 = (char *)v4 + v5;
        if ( v5 <= 0xFFFFFFFC )
        {
          do
          {
            v48 = *(_DWORD *)v46;
            v46 += 4;
            *v4++ = v48;
            v49 = v45 <= 4;
            v45 -= 4;
          }
          while ( !v49 );
          v4 = (int *)((char *)v4 + v45);
        }
        else
        {
          do
          {
            v47 = *v46++;
            *(_BYTE *)v4 = v47;
            v4 = (int *)((char *)v4 + 1);
            --v45;
          }
          while ( v45 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// 478A5B: positive sp value 50 has been found
// 478A5B: control flows out of bounds to 4010D5
// 46D000: using guessed type int dword_46D000[512];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
