/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// unsigned int __usercall start@<eax>(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<edi>, int a6@<esi>);
// __int16 __usercall sub_401F17@<ax>(__int16@<dx>, __int16@<bx>, __int16@<di>);


//----- (0040103D) --------------------------------------------------------
unsigned int __usercall start@<eax>(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<edi>, int a6@<esi>)
{
  bool v6; // cf
  unsigned int result; // eax
  __int16 v8; // dx
  __int16 v9; // cx
  int v10; // ecx
  int v11; // edi
  int v12; // esi
  int v13; // ebx
  int v14; // edx
  int v15; // ebx
  int v16; // edi
  int v17; // ecx
  int v18; // edx
  int v19; // ecx
  __int16 v20; // di
  __int16 v21; // dx
  char v22; // bl
  __int16 v23; // bx
  __int16 v24; // dx
  int v25; // esi
  int v26; // esi
  __int16 v27; // di
  char v28; // ch
  int v29; // ebx
  unsigned int v30; // esi
  int v31; // ebx
  int v32; // edi
  int v33; // esi
  int v34; // ebx
  int v35; // edx
  int v36; // ecx
  unsigned __int8 v37; // al
  unsigned int v40; // [esp+0h] [ebp-4h]

  v10 = a2 ^ a3;
  v11 = v10 ^ a5;
  v12 = a1 | a6;
  v13 = v10 | (v12 + a4);
  v14 = v10 ^ (v13 | a2);
  v15 = (v12 - v11) ^ v13;
  v16 = v14 + v11;
  v34 = v15 - a1;
  v35 = v14 - v10;
  v36 = v34 + a1 + v10 - 1;
  v31 = (v34 + v16) ^ (v34 - v36);
  v32 = v35;
  v33 = v35;
  v31 -= 2;
  BYTE1(v35) ^= BYTE1(v36);
  LOBYTE(v35) = BYTE1(v36);
  v18 = v36 | v35;
  HIWORD(v36) = HIWORD(v33);
  BYTE1(v36) = ~BYTE1(v33);
  LOBYTE(v36) = ~BYTE1(v33) ^ v33;
  v19 = v36 - v32;
  BYTE1(v18) = -30;
  LOBYTE(v31) = v31 + 90;
  v25 = v31 | v33;
  BYTE1(v19) -= BYTE1(a1);
  BYTE1(v31) = -BYTE1(v31) - 1;
  LOBYTE(v19) = v19 + 120 - v18;
  v26 = v19 ^ v25;
  LOBYTE(v31) = BYTE1(v31) | v31;
  BYTE1(v19) = -47;
  LOBYTE(v19) = -(char)v19;
  LOWORD(v32) = a1 | v18 | v32;
  BYTE1(v18) = -107;
  v17 = (v31 | v18) + v19;
  v29 = a1 | v17;
  LOBYTE(v17) = 61;
  __asm { fnclex }
  LOWORD(v17) = v29 ^ v17;
  LOWORD(v32) = v29 + v32 - 1;
  v30 = v29 ^ v26;
  BYTE1(v17) = (a1 | BYTE1(v17)) - 127;
  HIWORD(v40) = HIWORD(a1);
  LOWORD(v17) = v17 - 1;
  BYTE1(v17) = -BYTE1(v17);
  __asm { smsw    [esp+4+var_4] }
  v6 = __CFADD__((_BYTE)v17, 106);
  LOBYTE(v17) = v17 + 106;
  LOBYTE(v29) = BYTE1(v17) - (v6 + 48);
  BYTE1(v18) = 38;
  LOBYTE(v18) = -(char)v30;
  BYTE1(v29) = -74;
  BYTE1(v17) += (v30 < v40) + 57;
  v8 = v29 ^ (v32 | v18);
  result = ~v40;
  LOBYTE(v8) = (v17 | ~(_BYTE)v8) - 4;
  v9 = v29 | v17;
  if ( (~(_BYTE)v40 & 8) != 0 )
  {
    v27 = v9;
    v28 = HIBYTE(v8);
    v20 = v27 - v8 + 1;
    v21 = v8 - 1;
    v22 = v21 - v28;
    HIBYTE(v23) = v28 + HIBYTE(v21);
    v24 = v20 | v21;
    LOBYTE(v24) = -(char)v24;
    LOBYTE(v23) = ~v22;
    v37 = sub_401F17(v24, v23, v20);
    __asm { bound   ecx, [edx-36h] }
    __outbyte(0xE8u, v37);
    __outbyte(_EDX, v37);
    JUMPOUT(0x4C6C5B64);
  }
  return result;
}
// 4011A0: control flows out of bounds to 4C6C5B64
// 401199: variable '_EDX' is possibly undefined

//----- (00401F17) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
__int16 __usercall sub_401F17@<ax>(__int16 a1@<dx>, __int16 a2@<bx>, __int16 a3@<di>)
{
  __int16 v3; // cx
  __int16 v4; // cx
  bool v5; // cf
  __int16 v6; // ax
  __int16 v7; // bx
  __int16 v8; // cx
  __int16 v9; // di
  char v10; // dl
  __int16 result; // ax
  __int16 v12; // dx
  __int16 v13; // di
  __int16 v14; // cx
  _BYTE *v15; // esi
  __int16 v16; // di
  __int16 v17; // dx
  __int16 v18; // di
  __int16 v19; // di
  __int16 v20; // cx
  int v21; // ebx
  char v22; // dh
  char v23; // cl
  __int16 v24; // ax
  __int16 v25; // di
  _BYTE *v26; // [esp-4h] [ebp-4h]

  HIBYTE(a1) = ~HIBYTE(a1);
  HIBYTE(a2) += a2;
  HIBYTE(v4) = HIBYTE(a3) | 0x7E;
  LOBYTE(a2) = a3 | 0x88 | a2;
  v5 = HIBYTE(a1) < 0x6Bu;
  HIBYTE(a1) -= 107;
  LOBYTE(v4) = (a3 | 0x88) - (v5 + 2);
  LOBYTE(a1) = a2 + a1;
  HIBYTE(v6) = HIBYTE(a3);
  v7 = a3 | a2;
  HIBYTE(v7) = -HIBYTE(v7);
  v3 = a1 + v4;
  v5 = HIBYTE(v7) < (unsigned __int8)(((unsigned __int8)a3 < HIBYTE(a3)) + 22);
  HIBYTE(v7) -= ((unsigned __int8)a3 < HIBYTE(a3)) + 22;
  LOBYTE(v7) = v5 + v7 - 35 - ((__CFADD__(v5, (_BYTE)v7) | __CFADD__(v5 + v7, -35)) + 0x80);
  LOBYTE(v3) = v3 + 1;
  HIBYTE(v3) = ~HIBYTE(v3);
  LOBYTE(v6) = a3 - HIBYTE(a3);
  v13 = v6 ^ a3;
  v14 = v7 + v3;
  HIBYTE(v14) += HIBYTE(v6);
  v15 = v26;
  LOBYTE(v6) = -51;
  ++v6;
  HIBYTE(v14) = (v14 - 1) ^ ((unsigned __int16)(v14 - 1) >> 8);
  LOBYTE(v6) = -52;
  v21 = 2955;
  v22 = (HIBYTE(v14) - 113) | HIBYTE(a1);
  v23 = HIBYTE(v14) - 113 + 17;
  v24 = v13 + 23498 + v6;
  do
  {
    LOBYTE(v8) = ~(*v15 ^ (v24 - 14 + v21 + v22 + v23));
    HIBYTE(v8) = -(char)v8;
    --v8;
    LOBYTE(v24) = 68 - *v15;
    HIBYTE(v12) = (HIBYTE(v24) | (HIBYTE(v8) + BYTE1(v15))) + 29;
    LOBYTE(v12) = (v24 ^ (unsigned __int8)v15) - BYTE1(v21);
    v25 = (_WORD)v15 - v12;
    LOBYTE(v12) = (HIBYTE(v24) | ((v21 ^ HIBYTE(v12))
                                + ((unsigned __int8)v8 < (unsigned __int8)((*v15 != 68) - 11))
                                + v8
                                - ((*v15 != 68)
                                 - 11)
                                - 21
                                + 2)) ^ v12;
    LOBYTE(v24) = (__ROR1__(v24, 13) + 45) ^ 4;
    LOBYTE(v8) = v21 - (_BYTE)v15;
    LOBYTE(v12) = v12 - HIBYTE(v24) - 41 + 66;
    HIBYTE(v12) = 52;
    HIBYTE(v24) = v24;
    v19 = v25 - v21;
    HIBYTE(v8) = v21 ^ ((unsigned __int16)(v21 - (_WORD)v15) >> 8);
    v20 = v8 - v19;
    LOBYTE(v12) = (__CFADD__((_BYTE)v20, 70) + v20 + 70 - 99) ^ (v12 + 1);
    *v15 = v24;
    v5 = HIBYTE(v20) < 0x27u;
    HIBYTE(v20) -= 39;
    LOBYTE(v20) = v5 + 5;
    LOBYTE(v12) = v12 - 1;
    v17 = v20 | v12;
    ++v15;
    v18 = v17 | ((v21 ^ v19) + 1);
    HIBYTE(v20) += 121;
    HIBYTE(v17) |= v24;
    --v21;
    LOBYTE(v17) = ((unsigned __int8)(((unsigned __int16)(v20 ^ v17) >> 8) - 94) < (unsigned __int8)(((unsigned __int8)((unsigned __int16)(v20 ^ v17) >> 8) < 0x5Eu)
                                                                                                  - 52))
                + ((v5 + 5) ^ v17)
                - 61
                - BYTE1(v21);
    HIBYTE(v17) = -111;
    LOBYTE(v17) = v17 - 64;
    v23 = v21 - 58;
    v9 = v18 - v17;
    v22 = 0;
    v16 = (v21 + 4294) | v9;
  }
  while ( v21 );
  v10 = v24 ^ 0x10;
  result = v16 | v24;
  HIBYTE(result) = (__CFADD__(v10, -16) != -59) + HIBYTE(result) - 57;
  return result;
}
// 401D22: positive sp value 4 has been found
// 401E7C: variable 'v26' is possibly undefined

// nfuncs=2 queued=2 decompiled=2 lumina nreq=0 worse=0 better=0
// ALL OK, 2 function(s) have been successfully decompiled
