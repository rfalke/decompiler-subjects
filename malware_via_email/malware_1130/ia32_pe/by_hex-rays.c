/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int@<eax>, int@<edx>, int@<ecx>, unsigned int@<ebp>);

//-------------------------------------------------------------------------
// Data declarations

int dword_40A000[512] =
{
  -9544519,
  4198404,
  -613810177,
  -1194253821,
  -1752883787,
  1567813067,
  400400796,
  13696264,
  -1183699944,
  -1706348964,
  1451631476,
  777814622,
  1299048119,
  1676608331,
  -935828900,
  -1183645697,
  398331634,
  1090569980,
  -1177550005,
  10922,
  -11485055,
  1912593407,
  -394179006,
  -683474943,
  372901097,
  1179500288,
  -947824572,
  1815179097,
  -545658239,
  1409145726,
  -561315728,
  -180676282,
  1280165419,
  1192126582,
  -109515135,
  2025323967,
  -704426182,
  1258296811,
  913195591,
  -1185983487,
  5403233,
  -1078460561,
  -1174399926,
  759514722,
  1331917038,
  1019249491,
  1426782347,
  -134387912,
  -352260753,
  1648505509,
  50357109,
  -1775744056,
  83609345,
  -75497473,
  1300235011,
  1730688,
  -556190191,
  542318339,
  206797318,
  16897795,
  -75561469,
  17235967,
  824360559,
  1649626769,
  755401728,
  2178410,
  358905919,
  1080034176,
  -302045233,
  1051000695,
  740795,
  120096036,
  126078797,
  -1758193536,
  1521364778,
  -1074069367,
  237960381,
  102105304,
  50839815,
  882081920,
  460587954,
  -1234893251,
  8371197,
  1990594463,
  103875840,
  -1905000441,
  242029262,
  -1073798954,
  957331453,
  113181714,
  796943107,
  611401353,
  -426310852,
  -2013258627,
  -692586790,
  1820337262,
  170008129,
  -1647509261,
  -38976926,
  53542911,
  -1990435307,
  -837835183,
  197429,
  -1943268351,
  -1084252991,
  -1207959601,
  -605027329,
  1422655544,
  127841792,
  1249421328,
  1795351091,
  -1815559968,
  -368382750,
  -537174724,
  1208349402,
  -1712808306,
  1585462850,
  2113994802,
  -9455850,
  -533576211,
  478150917,
  -1325342019,
  1996591167,
  327890,
  -734,
  -216737043,
  -701825013,
  478031518,
  2131388569,
  -452559746,
  -769399123,
  1607535979,
  -490738328,
  707097779,
  -965309781,
  -1341783917,
  -700920831,
  95944630,
  892240039,
  272564619,
  -519626991,
  1564608079,
  -589897,
  2114002293,
  740822528,
  865453100,
  -419389937,
  1995309989,
  -630650217,
  246938459,
  -1002517475,
  962022215,
  -735351490,
  -1149766604,
  1455878143,
  -2133915906,
  1621108054,
  -1741598718,
  1578903360,
  -553583098,
  -486613008,
  -1561183616,
  1158755584,
  -1523939030,
  151049882,
  -1050292730,
  -1678932655,
  -1073461023,
  -1988740799,
  -1305907065,
  -14950045,
  -1003153041,
  -2130790890,
  -1012770075,
  1742845220,
  -1106117130,
  107069437,
  -1435028845,
  1600301022,
  2099693741,
  3568346,
  1876630187,
  1625085695,
  1997102096,
  572063848,
  682899457,
  -49922797,
  -472195073,
  -2071310585,
  1513652537,
  1074154204,
  1368810008,
  456413643,
  -7966942,
  1430463662,
  -2039186628,
  -2126624550,
  1501659428,
  197559626,
  1336377478,
  1169634864,
  1937464129,
  594242701,
  -1997835519,
  -1082745066,
  -1459617863,
  4736694,
  -1873544075,
  -471812292,
  619541158,
  238771682,
  -278844956,
  931531774,
  955764342,
  1592008593,
  -264077151,
  -539572786,
  -1023906946,
  -1486021423,
  -318767027,
  578828900,
  1490163556,
  -3481817,
  -1694249253,
  1870688394,
  -1356514661,
  -1559769580,
  90873102,
  1801182683,
  170592610,
  542328406,
  65201442,
  -2368549,
  -187879955,
  -1864254511,
  59066440,
  -1073488275,
  -329742716,
  -4727845,
  11348596,
  -918879959,
  1466593554,
  -1518819277,
  762980383,
  -311894601,
  1222949830,
  906442554,
  -1212874437,
  1417674742,
  -1275003078,
  249709183,
  1125977694,
  -2062139596,
  -634714527,
  2071962508,
  1948254147,
  302463894,
  11017990,
  -1505591136,
  -1786739875,
  1090959963,
  -7451589,
  -636495163,
  -1461464192,
  -1643464939,
  -2030087375,
  -1361575937,
  1788229843,
  1486386735,
  -1929851324,
  -596717044,
  2002751745,
  -1844137422,
  -627349274,
  71266677,
  1581786056,
  -285282552,
  640691967,
  1006126687,
  -1983028224,
  786905601,
  1241634049,
  559686250,
  -613424804,
  169884640,
  387225238,
  1242933810,
  -474080746,
  -1533336425,
  -377470856,
  -439931983,
  990643674,
  1943068634,
  -1069931906,
  -628171095,
  1722281116,
  -621990249,
  -719337293,
  429874560,
  684483357,
  -4604357,
  -1805313587,
  444507097,
  1763078178,
  -247711374,
  -1140916107,
  -1201743301,
  1283397126,
  1340157208,
  612661435,
  1137558448,
  -4581395,
  860128768,
  -1805589497,
  653879047,
  -1524999266,
  -558299,
  1392967566,
  136574488,
  -732701050,
  2084408327,
  992529922,
  130219649,
  2009247174,
  -667132548,
  486673027,
  -833628636,
  -9747138,
  742715871,
  587494023,
  1006660350,
  -966427897,
  957309551,
  201093753,
  910589933,
  108527653,
  -880048924,
  712735709,
  1576460484,
  2008541567,
  856623066,
  949948535,
  637543116,
  -1139802570,
  -29652259,
  1013513787,
  986622779,
  652566893,
  -1656957098,
  -1086162240,
  1875348736,
  1208475935,
  654403453,
  1530011050,
  -1538231904,
  -109051990,
  1476463877,
  108477333,
  -1211326420,
  1045682728,
  243441665,
  1555559796,
  -1489084165,
  -1721174528,
  -191453003,
  1862684718,
  2128376936,
  -636927833,
  1132162822,
  -1090149008,
  -2097300363,
  1578979386,
  1745036311,
  1520001806,
  1080594176,
  -302105721,
  113879725,
  356039211,
  -1347983626,
  28378167,
  -544307451,
  -1640508746,
  -1507195098,
  1302201243,
  -2920930,
  916670839,
  -670719094,
  -749577906,
  1094270464,
  -1456744852,
  1148706813,
  -733167616,
  -1514075435,
  491595207,
  -590764562,
  1824516571,
  865784374,
  1852943226,
  -824731230,
  -1211955486,
  1695997951,
  886666497,
  159739434,
  474198218,
  31659862,
  -1143234558,
  -852229797,
  1341456870,
  99621389,
  -1079675102,
  112418795,
  1211853260,
  -301398453,
  -1962591880,
  -576382005,
  -1133619957,
  -1621052259,
  1870062096,
  1224733151,
  -1025223923,
  28058272,
  18970144,
  1680736877,
  2102821545,
  -46677248,
  59225518,
  -1607270382,
  1316664398,
  1193446892,
  2111790079,
  1606008725,
  1543929874,
  1716575909,
  1848939152,
  -720105202,
  1569062887,
  1071173355,
  1059348988,
  -391160021,
  -923617307,
  1841466702,
  -831989805,
  114342915,
  -315602589,
  2113926950,
  -1347157640,
  1005046300,
  1510208042,
  214319857,
  -1077411940,
  281609980,
  -1593334221,
  -190616518,
  1323449284,
  -757965267,
  484382357,
  2033642863,
  672042789,
  -1971164119,
  1629963005,
  -4867345,
  1366714122,
  854636298,
  -1575986974,
  260066371,
  1859534986,
  -2094534433,
  678396104,
  -901369690,
  375063505,
  168754826,
  -971880449,
  -1305272098,
  1971553114,
  1107377371,
  -32506,
  -58772721,
  -75055229,
  -1228608512,
  -1135445440,
  653307702,
  -2089074211,
  -1071318802,
  -1884319405,
  -85195864,
  -1051471666,
  1912851532,
  -1862033412,
  -838878201,
  -1239463051,
  7331760,
  -1066685690,
  -1462173389,
  -4144712,
  492483739,
  6412901,
  -642811538,
  -679275765,
  1360743451,
  939434750,
  -1912599255,
  -65291405,
  99960837,
  688101131,
  1237188724,
  2147463552,
  1311888129,
  2068084350,
  822095413,
  491709764,
  -1540435708,
  -169871989
}; // weak


//----- (00410640) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>)
{
  int *v4; // esi
  int *v5; // edi
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  unsigned int v11; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  bool v16; // zf
  int v17; // ebx
  int v18; // ett
  unsigned int v19; // eax
  unsigned int v20; // eax
  int v21; // eax
  bool v22; // cf
  int v23; // ebx
  int v24; // ebx
  int v25; // ett
  BOOL v26; // ecx
  bool v27; // cf
  int v28; // ebx
  int v29; // ett
  int v30; // ecx
  int v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ebx
  int v35; // ett
  bool v36; // zf
  int v37; // ebx
  int v38; // ett
  unsigned int v39; // ecx
  char *v40; // edx
  char v41; // al
  int v42; // eax
  bool v43; // cc
  int *v44; // esi
  int *v45; // edi
  int v46; // ecx
  char v47; // al
  unsigned __int8 v48; // al
  int v49; // eax
  int v50; // eax
  char v51; // t0
  unsigned __int8 v52; // bl
  char *v53; // edi
  int v54; // eax
  int *v55; // ebx
  int v56; // ebp
  char v57; // al
  char *v58; // ecx
  unsigned __int8 v59; // al
  int v60; // eax
  void (__cdecl *v61)(int *, int, int, int *); // ebp
  int *v62; // edi
  int v63[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v64; // [esp+2Ch] [ebp-80h] BYREF
  int v65; // [esp+30h] [ebp-7Ch] BYREF
  char *v66; // [esp+34h] [ebp-78h]
  int *v67; // [esp+38h] [ebp-74h]
  int v68; // [esp+3Ch] [ebp-70h]
  int v69; // [esp+40h] [ebp-6Ch]
  int v70; // [esp+44h] [ebp-68h]
  int v71; // [esp+48h] [ebp-64h]
  int *v72; // [esp+4Ch] [ebp-60h]
  int v73; // [esp+50h] [ebp-5Ch]
  int v74; // [esp+54h] [ebp-58h]
  int v75; // [esp+58h] [ebp-54h]
  int v76; // [esp+5Ch] [ebp-50h] BYREF

  v72 = &v76;
  v70 = a3;
  v69 = a2;
  v68 = a1;
  v4 = dword_40A000;
  v5 = &dword_40A000[-9216];
  v67 = &dword_40A000[-9216];
  while ( 1 )
  {
    v9 = *v4;
    v7 = (unsigned int)v4++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v4;
        v4 = (int *)((char *)v4 + 1);
        *(_BYTE *)v5 = v6;
        v5 = (int *)((char *)v5 + 1);
      }
      else
      {
        v11 = 1;
        while ( 1 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v11 += v12 + v11;
          v7 = __CFADD__(v13, v13);
          v16 = 2 * v13 == 0;
          v8 = 2 * v13;
          if ( v7 )
          {
            if ( !v16 )
              break;
            v17 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v18 = v7 + v17;
            v7 = __CFADD__(v7, v17) | __CFADD__(v17, v18);
            v8 = v17 + v18;
            if ( v7 )
              break;
          }
        }
        v7 = v11 < 3;
        v19 = v11 - 3;
        if ( !v7 )
        {
          v20 = v19 << 8;
          LOBYTE(v20) = *(_BYTE *)v4;
          v4 = (int *)((char *)v4 + 1);
          v21 = ~v20;
          if ( !v21 )
          {
            v44 = v67;
            v45 = v67;
            v46 = 105;
            while ( 1 )
            {
              v47 = *(_BYTE *)v45;
              v45 = (int *)((char *)v45 + 1);
              v48 = v47 + 24;
              while ( v48 <= 1u && *(_BYTE *)v45 == 1 )
              {
                v49 = *v45;
                LOWORD(v49) = BYTE1(*v45);
                v50 = __ROL4__(v49, 16);
                v51 = v50;
                LOBYTE(v50) = BYTE1(v50);
                BYTE1(v50) = v51;
                v52 = *((_BYTE *)v45 + 4) + 24;
                *v45 = (int)v44 + v50 - (_DWORD)v45;
                v45 = (int *)((char *)v45 + 5);
                v48 = v52;
                if ( !--v46 )
                {
                  v53 = (char *)(v44 + 14336);
LABEL_38:
                  v54 = *(_DWORD *)v53;
                  if ( *(_DWORD *)v53 )
                  {
                    v55 = (int *)((char *)v44 + *((_DWORD *)v53 + 1));
                    v53 += 8;
                    v56 = ((int (__cdecl *)(int, int, int, int, int, int *, int, int, int))v44[19348])(
                            (int)v44 + v54 + 77252,
                            v68,
                            v69,
                            v70,
                            v71,
                            v72,
                            v73,
                            v74,
                            v75);
                    while ( 1 )
                    {
                      v57 = *v53++;
                      if ( !v57 )
                        goto LABEL_38;
                      v58 = v53;
                      v66 = v53;
                      v59 = v57 - 1;
                      do
                      {
                        if ( !v58 )
                          break;
                        v16 = *v53++ == (char)v59;
                        --v58;
                      }
                      while ( !v16 );
                      v60 = ((int (__cdecl *)(int, char *))v44[19349])(v56, v66);
                      if ( !v60 )
                        break;
                      *v55++ = v60;
                    }
                    v54 = ((int (*)(void))v44[19353])();
                  }
                  v61 = (void (__cdecl *)(int *, int, int, int *))v44[19350];
                  v62 = v44 - 1024;
                  v64 = v54;
                  v61(v44 - 1024, 4096, 4, &v64);
                  *((_BYTE *)v62 + 495) &= ~0x80u;
                  *((_BYTE *)v62 + 535) &= ~0x80u;
                  v61(v44 - 1024, 4096, v63[0], v63);
                  do
                    v64 = 0;
                  while ( &v64 != &v65 - 32 );
                  JUMPOUT(0x405A5C);
                }
              }
            }
          }
          a4 = v21;
        }
        v22 = __CFADD__(v8, v8);
        v23 = 2 * v8;
        if ( !v23 )
        {
          v24 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v25 = v7 + v24;
          v22 = __CFADD__(v7, v24) | __CFADD__(v24, v25);
          v23 = v24 + v25;
        }
        v26 = v22;
        v27 = __CFADD__(v23, v23);
        v8 = 2 * v23;
        if ( !v8 )
        {
          v28 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v29 = v7 + v28;
          v27 = __CFADD__(v7, v28) | __CFADD__(v28, v29);
          v8 = v28 + v29;
        }
        v30 = v26 + v27 + v26;
        if ( !v30 )
        {
          v31 = 1;
          while ( 1 )
          {
            v32 = __CFADD__(v8, v8);
            v33 = 2 * v8;
            if ( !v33 )
            {
              v34 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v35 = v7 + v34;
              v32 = __CFADD__(v7, v34) | __CFADD__(v34, v35);
              v33 = v34 + v35;
            }
            v31 += v32 + v31;
            v7 = __CFADD__(v33, v33);
            v36 = 2 * v33 == 0;
            v8 = 2 * v33;
            if ( v7 )
            {
              if ( !v36 )
                break;
              v37 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v38 = v7 + v37;
              v7 = __CFADD__(v7, v37) | __CFADD__(v37, v38);
              v8 = v37 + v38;
              if ( v7 )
                break;
            }
          }
          v30 = v31 + 2;
        }
        v39 = (a4 < 0xFFFFF300) + v30 + 1;
        v40 = (char *)v5 + a4;
        if ( a4 <= 0xFFFFFFFC )
        {
          do
          {
            v42 = *(_DWORD *)v40;
            v40 += 4;
            *v5++ = v42;
            v43 = v39 <= 4;
            v39 -= 4;
          }
          while ( !v43 );
          v5 = (int *)((char *)v5 + v39);
        }
        else
        {
          do
          {
            v41 = *v40++;
            *(_BYTE *)v5 = v41;
            v5 = (int *)((char *)v5 + 1);
            --v39;
          }
          while ( v39 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// 4107C3: positive sp value 50 has been found
// 4107C3: control flows out of bounds to 405A5C
// 40A000: using guessed type int dword_40A000[512];
// 410640: using guessed type int anonymous_0[4];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
