/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

_DWORD sub_467004(); // weak
// void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>);

//-------------------------------------------------------------------------
// Data declarations

int dword_467000 = -613; // weak


//----- (00467004) --------------------------------------------------------
#error "46701F: cannot convert to microcode (funcsize=13)"

//----- (00475120) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>)
{
  int *v4; // esi
  int *v5; // edi
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  int i; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  unsigned int v16; // eax
  bool v17; // zf
  int v18; // ebx
  int v19; // ett
  unsigned int v20; // eax
  bool v21; // cf
  int v22; // ebx
  int v23; // ett
  bool v24; // cf
  int v25; // ebx
  int v26; // ett
  int v27; // ecx
  int v28; // ecx
  unsigned int v29; // eax
  unsigned int v30; // eax
  int v31; // eax
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  bool v35; // cf
  int v36; // ebx
  int v37; // ett
  bool v38; // cf
  int v39; // ebx
  int v40; // ebx
  int v41; // ett
  bool v42; // zf
  int v43; // ebx
  int v44; // ett
  unsigned int v45; // ecx
  char *v46; // edx
  char v47; // al
  int v48; // eax
  bool v49; // cc
  int v50; // esi
  int *v51; // edi
  int v52; // ecx
  char v53; // al
  unsigned __int8 v54; // al
  int v55; // eax
  int v56; // eax
  char v57; // t0
  unsigned __int8 v58; // bl
  char *v59; // edi
  int v60; // eax
  int *v61; // ebx
  int v62; // ebp
  char v63; // al
  char *v64; // ecx
  unsigned __int8 v65; // al
  int v66; // eax
  void (__cdecl *v67)(int, int, int, int *); // ebp
  int v68; // edi
  int v69[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v70; // [esp+2Ch] [ebp-80h] BYREF
  int v71; // [esp+30h] [ebp-7Ch] BYREF
  char *v72; // [esp+34h] [ebp-78h]
  int *v73; // [esp+38h] [ebp-74h]
  int v74; // [esp+3Ch] [ebp-70h]
  int v75; // [esp+40h] [ebp-6Ch]
  int v76; // [esp+44h] [ebp-68h]
  int v77; // [esp+48h] [ebp-64h]
  int *v78; // [esp+4Ch] [ebp-60h]
  int v79; // [esp+50h] [ebp-5Ch]
  int v80; // [esp+54h] [ebp-58h]
  int v81; // [esp+58h] [ebp-54h]
  int v82; // [esp+5Ch] [ebp-50h] BYREF

  v78 = &v82;
  v76 = a3;
  v75 = a2;
  v74 = a1;
  v4 = &dword_467000;
  v5 = &dword_467000 - 104448;
  v73 = &dword_467000 - 104448;
  while ( 1 )
  {
    v9 = *v4;
    v7 = (unsigned int)v4++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v4;
        v4 = (int *)((char *)v4 + 1);
        *(_BYTE *)v5 = v6;
        v5 = (int *)((char *)v5 + 1);
      }
      else
      {
        for ( i = 1; ; i = v20 + v21 + v20 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v16 = i + v12 + i;
          v7 = __CFADD__(v13, v13);
          v17 = 2 * v13 == 0;
          v8 = 2 * v13;
          if ( v7 )
          {
            if ( !v17 )
              break;
            v18 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v19 = v7 + v18;
            v7 = __CFADD__(v7, v18) | __CFADD__(v18, v19);
            v8 = v18 + v19;
            if ( v7 )
              break;
          }
          v20 = v16 - 1;
          v21 = __CFADD__(v8, v8);
          v8 *= 2;
          if ( !v8 )
          {
            v22 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v23 = v7 + v22;
            v21 = __CFADD__(v7, v22) | __CFADD__(v22, v23);
            v8 = v22 + v23;
          }
        }
        v28 = 0;
        v7 = v16 < 3;
        v29 = v16 - 3;
        if ( v7 )
        {
          v32 = __CFADD__(v8, v8);
          v8 *= 2;
          if ( !v8 )
          {
            v33 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v34 = v7 + v33;
            v32 = __CFADD__(v7, v33) | __CFADD__(v33, v34);
            v8 = v33 + v34;
          }
        }
        else
        {
          v30 = v29 << 8;
          LOBYTE(v30) = *(_BYTE *)v4;
          v4 = (int *)((char *)v4 + 1);
          v31 = ~v30;
          if ( !v31 )
          {
            v50 = (int)v73;
            v51 = v73;
            v52 = 840;
            while ( 1 )
            {
              v53 = *(_BYTE *)v51;
              v51 = (int *)((char *)v51 + 1);
              v54 = v53 + 24;
              while ( v54 <= 1u && *(_BYTE *)v51 == 1 )
              {
                v55 = *v51;
                LOWORD(v55) = BYTE1(*v51);
                v56 = __ROL4__(v55, 16);
                v57 = v56;
                LOBYTE(v56) = BYTE1(v56);
                BYTE1(v56) = v57;
                v58 = *((_BYTE *)v51 + 4) + 24;
                *v51 = v50 + v56 - (_DWORD)v51;
                v51 = (int *)((char *)v51 + 5);
                v54 = v58;
                if ( !--v52 )
                {
                  v59 = (char *)(v50 + 471040);
LABEL_44:
                  v60 = *(_DWORD *)v59;
                  if ( *(_DWORD *)v59 )
                  {
                    v61 = (int *)(v50 + *((_DWORD *)v59 + 1));
                    v59 += 8;
                    v62 = (*(int (__cdecl **)(int, int, int, int, int, int *, int, int, int))(v50 + 489252))(
                            v60 + v50 + 489132,
                            v74,
                            v75,
                            v76,
                            v77,
                            v78,
                            v79,
                            v80,
                            v81);
                    while ( 1 )
                    {
                      v63 = *v59++;
                      if ( !v63 )
                        goto LABEL_44;
                      v64 = v59;
                      v72 = v59;
                      v65 = v63 - 1;
                      do
                      {
                        if ( !v64 )
                          break;
                        v17 = *v59++ == (char)v65;
                        --v64;
                      }
                      while ( !v17 );
                      v66 = (*(int (__cdecl **)(int, char *))(v50 + 489256))(v62, v72);
                      if ( !v66 )
                        break;
                      *v61++ = v66;
                    }
                    v60 = (*(int (**)(void))(v50 + 489272))();
                  }
                  v67 = *(void (__cdecl **)(int, int, int, int *))(v50 + 489260);
                  v68 = v50 - 4096;
                  v70 = v60;
                  v67(v50 - 4096, 4096, 4, &v70);
                  *(_BYTE *)(v68 + 527) &= 0x7Fu;
                  *(_BYTE *)(v68 + 567) &= 0x7Fu;
                  v67(v50 - 4096, 4096, v69[0], v69);
                  do
                    v70 = 0;
                  while ( &v70 != &v71 - 32 );
                  JUMPOUT(0x42875F);
                }
              }
            }
          }
          v32 = v31 & 1;
          a4 = v31 >> 1;
        }
        if ( v32 )
          goto LABEL_15;
        v28 = 1;
        v35 = __CFADD__(v8, v8);
        v8 *= 2;
        if ( !v8 )
        {
          v36 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v37 = v7 + v36;
          v35 = __CFADD__(v7, v36) | __CFADD__(v36, v37);
          v8 = v36 + v37;
        }
        if ( v35 )
        {
LABEL_15:
          v24 = __CFADD__(v8, v8);
          v8 *= 2;
          if ( !v8 )
          {
            v25 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v26 = v7 + v25;
            v24 = __CFADD__(v7, v25) | __CFADD__(v25, v26);
            v8 = v25 + v26;
          }
          v27 = v28 + v24 + v28;
        }
        else
        {
          while ( 1 )
          {
            v38 = __CFADD__(v8, v8);
            v39 = 2 * v8;
            if ( !v39 )
            {
              v40 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v41 = v7 + v40;
              v38 = __CFADD__(v7, v40) | __CFADD__(v40, v41);
              v39 = v40 + v41;
            }
            v28 += v38 + v28;
            v7 = __CFADD__(v39, v39);
            v42 = 2 * v39 == 0;
            v8 = 2 * v39;
            if ( v7 )
            {
              if ( !v42 )
                break;
              v43 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v44 = v7 + v43;
              v7 = __CFADD__(v7, v43) | __CFADD__(v43, v44);
              v8 = v43 + v44;
              if ( v7 )
                break;
            }
          }
          v27 = v28 + 2;
        }
        v45 = (a4 < 0xFFFFFB00) + v27 + 2;
        v46 = (char *)v5 + a4;
        if ( a4 <= 0xFFFFFFFC )
        {
          do
          {
            v48 = *(_DWORD *)v46;
            v46 += 4;
            *v5++ = v48;
            v49 = v45 <= 4;
            v45 -= 4;
          }
          while ( !v49 );
          v5 = (int *)((char *)v5 + v45);
        }
        else
        {
          do
          {
            v47 = *v46++;
            *(_BYTE *)v5 = v47;
            v5 = (int *)((char *)v5 + 1);
            --v45;
          }
          while ( v45 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// 4752C3: positive sp value 50 has been found
// 4752C3: control flows out of bounds to 42875F
// 467000: using guessed type int dword_467000;

// nfuncs=2 queued=2 decompiled=2 lumina nreq=0 worse=0 better=0
#error "There were 1 decompilation failure(s) on 2 function(s)"
