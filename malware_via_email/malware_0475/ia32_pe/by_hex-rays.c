/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<ebp>, int a6@<edi>, int a7@<esi>);

//-------------------------------------------------------------------------
// Data declarations

int dword_413000[512] =
{
  -1876295519,
  88416000,
  1162548068,
  -174,
  1279610623,
  1143878195,
  822103116,
  452998195,
  1752144858,
  -502047909,
  705310478,
  -502360624,
  -9584865,
  1533808869,
  337848606,
  420656090,
  -803988981,
  1838865079,
  -145,
  425406760,
  232885336,
  -799315667,
  -1354505324,
  -1973902172,
  862873825,
  745511212,
  1878453291,
  1485951040,
  463034555,
  13310234,
  -163490,
  -699158515,
  1518125293,
  -1336299429,
  -1341323859,
  -1883926212,
  1471363528,
  -935552177,
  1243292086,
  1017443023,
  -1884155924,
  508796888,
  -709437226,
  -326673178,
  308184778,
  2145269003,
  -1304564601,
  1536987823,
  1239922944,
  1874249821,
  -874603246,
  1091316902,
  -853161450,
  -921553771,
  1230819861,
  -821507981,
  882231307,
  -854274473,
  389322189,
  1975719884,
  628312412,
  -1782505534,
  164779828,
  503057856,
  1539820809,
  -1278424235,
  939019774,
  859058139,
  1587643175,
  -1412400118,
  -1666765148,
  1055883103,
  157185600,
  1140473739,
  1864093703,
  656432344,
  794665980,
  -1885826471,
  97001242,
  437092722,
  1153963808,
  119564306,
  392780928,
  1552174703,
  -1571926505,
  1929354141,
  -1277988415,
  -556608654,
  468646763,
  -584748115,
  1041635844,
  1557288729,
  169360457,
  -1782048993,
  506354548,
  -1780669155,
  472454772,
  1557275296,
  219378505,
  -1782040046,
  923883316,
  543019536,
  370546455,
  879065374,
  1478694231,
  -2145276652,
  -1391787408,
  508134560,
  -1542719362,
  -726429202,
  -1183343544,
  529542720,
  193997106,
  943588068,
  775993602,
  -1296485329,
  573170699,
  -1335291141,
  -49009902,
  980868147,
  870039304,
  -1194818094,
  -179656697,
  -1036443875,
  -1792776242,
  -564880560,
  -1244036494,
  1667321951,
  538064815,
  889571351,
  -2123233987,
  1544500316,
  851973913,
  -1524890325,
  1669362435,
  -1110615682,
  -907054115,
  330264326,
  261034971,
  -81131219,
  600744979,
  1874821466,
  -615371014,
  791358694,
  608769117,
  64979454,
  -801174515,
  769010542,
  6238571,
  776529682,
  186872589,
  -666767109,
  777224166,
  1207244302,
  -1305215214,
  -1283603164,
  858412219,
  -1364906415,
  -1155299072,
  407596395,
  537619410,
  2041607703,
  -80621533,
  -1542731493,
  735494283,
  554625039,
  1437338247,
  318133270,
  -700233597,
  -924164325,
  189210693,
  -1843342505,
  -749389497,
  -969796338,
  1080280245,
  479266646,
  1445654722,
  558949554,
  736998079,
  1817671263,
  -668874480,
  -2076579753,
  1344219836,
  -1795796799,
  2069236228,
  1877016923,
  661060895,
  -1269093285,
  -350824956,
  1516450570,
  927363818,
  -1762928972,
  -933678838,
  -938008523,
  88026885,
  928809330,
  1551987255,
  -849644071,
  -937998644,
  -2084388091,
  367684454,
  -1815981622,
  -1532097735,
  167875259,
  1242115094,
  770255770,
  -1540487158,
  266769081,
  -1708585410,
  229533995,
  -2046292958,
  55239691,
  49070082,
  19436217,
  -1532059648,
  1913064363,
  -1061681610,
  855982264,
  731531780,
  993858409,
  196095540,
  -1992738076,
  730869304,
  1060824553,
  730869310,
  1026722281,
  -1195361988,
  1244909248,
  237358347,
  1035143933,
  -1424426157,
  -1145104730,
  -689700887,
  -1704942582,
  -1721737425,
  516974382,
  323693743,
  -1705725030,
  385839067,
  1407997092,
  18264794,
  781340718,
  -803548489,
  -3099905,
  -1822922989,
  1294640189,
  -1588472771,
  -497050664,
  -7733937,
  436060123,
  -1950836006,
  458909001,
  782701410,
  782435489,
  1888211118,
  -841306354,
  -1580867731,
  1479069531,
  1035513883,
  -47162433,
  1408368754,
  -370077982,
  -2026448709,
  2098058067,
  1401095099,
  509118264,
  -1800157309,
  -285538724,
  -1132247333,
  146735751,
  -758628429,
  106479366,
  1825430030,
  297473181,
  1518546185,
  -1375881680,
  1194290404,
  1931202663,
  -1219782056,
  862876702,
  -734030883,
  205557516,
  -1686602279,
  38636429,
  407876491,
  -1183999186,
  219213467,
  -417420286,
  -430014203,
  1321062046,
  -2024230753,
  558587664,
  -1217160958,
  800296951,
  1336940162,
  -1237711072,
  415168177,
  -2123781741,
  1039079791,
  -1880739107,
  1152060171,
  -873193909,
  -1423199501,
  109032367,
  14051072,
  1533779011,
  -731705413,
  -565770974,
  2098924822,
  1493891375,
  -1351524969,
  185489066,
  -764699725,
  -1791405286,
  925929966,
  412620760,
  1461399885,
  -10343762,
  342138863,
  -636546864,
  1331405720,
  1752133199,
  870541929,
  -327622937,
  153630258,
  58740736,
  -1089961264,
  444445235,
  -1958322482,
  1941637907,
  -38550714,
  177821875,
  -1917378805,
  587705353,
  -1457494311,
  1424127181,
  2091740758,
  -1357483849,
  1488128429,
  -805326012,
  1879750602,
  1588779155,
  -760063587,
  -259106287,
  1645982701,
  -1332781808,
  1268451947,
  -431023920,
  -339797282,
  1460195471,
  157879640,
  381934515,
  -642290465,
  2142376019,
  38081034,
  309565656,
  487276272,
  -1821468779,
  -605397318,
  -1215459845,
  -1578169715,
  118118557,
  2138554413,
  1815295495,
  -1276446904,
  -734809284,
  2023037554,
  1387741043,
  -1483339120,
  12244432,
  2073219218,
  -1650532424,
  458961739,
  243107105,
  -639695733,
  728446619,
  202635931,
  867959414,
  1222702679,
  427497950,
  1553961060,
  808966906,
  306700871,
  -365717473,
  -771604895,
  13207318,
  6899830,
  1820533862,
  2081367075,
  -1691270718,
  -1835458269,
  1532116615,
  1569780383,
  -1824302135,
  1574655815,
  1394882859,
  -1026989081,
  -470352122,
  -139448398,
  -1211101544,
  279420888,
  -960369396,
  1804044994,
  -1911192529,
  1376629136,
  -230191733,
  -656686890,
  795109728,
  565319416,
  -1335212224,
  -290081971,
  1392438363,
  105689950,
  -1377147432,
  156957875,
  -619281019,
  -1089841376,
  -1650856884,
  1681277762,
  -1654104763,
  81469798,
  776204867,
  -2071547031,
  1394526478,
  2047826203,
  -1025031615,
  906915398,
  1587999781,
  1503245223,
  1134517355,
  -1673321418,
  -1793536104,
  1471317293,
  1700790954,
  -326757858,
  1749460766,
  1143909814,
  -931774282,
  -833935327,
  563224606,
  643319931,
  472780883,
  -1743103199,
  1192316892,
  868331583,
  646500420,
  -71292585,
  746053979,
  1396752205,
  375397449,
  -132567209,
  -345285878,
  1650404460,
  -2084591578,
  215669631,
  39673208,
  -1126548061,
  -767732572,
  2114842331,
  -661935017,
  1482452899,
  1281000288,
  -1312925407,
  1495887221,
  1599046212,
  743661337,
  180469912,
  644731460,
  768400215,
  -2142870093,
  1474844416,
  -303196532,
  500188863,
  782000199,
  -726293425,
  1258636061,
  2146198599,
  -1334096039,
  1617809501,
  1149513385,
  -538920629,
  -2099823330,
  -717374718,
  1322286491,
  -591412133,
  -795211330,
  1459776265,
  -796798762,
  1755015241,
  -1149386753,
  1462667390,
  1999230563,
  768628139,
  -1330476449,
  1553766976,
  -128911811,
  984379247,
  553931561,
  -1143449556,
  1486674564,
  -1157779346,
  -173844467,
  784294074,
  558045587,
  -1880571639,
  237096423,
  -1589539795,
  592192774,
  49764383,
  274971519,
  1484503363,
  -166022999
}; // weak


//----- (00417240) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<ebp>, int a6@<edi>, int a7@<esi>)
{
  int *v7; // esi
  int *v8; // edi
  unsigned int v9; // ebp
  char v10; // al
  bool v11; // cf
  int v12; // ebx
  int v13; // ebx
  int v14; // ett
  unsigned int v15; // eax
  bool v16; // cf
  int v17; // ebx
  int v18; // ebx
  int v19; // ett
  bool v20; // zf
  int v21; // ebx
  int v22; // ett
  int v23; // ecx
  unsigned int v24; // eax
  unsigned int v25; // eax
  int v26; // eax
  bool v27; // cf
  int v28; // ebx
  int v29; // ebx
  int v30; // ett
  BOOL v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  int v35; // ecx
  int v36; // ecx
  bool v37; // cf
  int v38; // ebx
  int v39; // ebx
  int v40; // ett
  bool v41; // zf
  int v42; // ebx
  int v43; // ett
  unsigned int v44; // ecx
  char v45; // al
  int v46; // eax
  bool v47; // cc
  int *v48; // esi
  char *v49; // edi
  int v50; // eax
  int *v51; // ebx
  int v52; // ebp
  char v53; // al
  char *v54; // ecx
  unsigned __int8 v55; // al
  int v56; // eax
  void (__fastcall *v57)(int, char *, int *, int, int, int *); // ebp
  int *v58; // edi
  int v59[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v60; // [esp+2Ch] [ebp-80h] BYREF
  int v61; // [esp+30h] [ebp-7Ch] BYREF
  char *v62; // [esp+34h] [ebp-78h]
  int *v63; // [esp+38h] [ebp-74h]
  int v64; // [esp+3Ch] [ebp-70h]
  char *v65; // [esp+40h] [ebp-6Ch]
  int v66; // [esp+44h] [ebp-68h]
  int v67; // [esp+48h] [ebp-64h]
  int *v68; // [esp+4Ch] [ebp-60h]
  int v69; // [esp+50h] [ebp-5Ch]
  int v70; // [esp+54h] [ebp-58h]
  int v71; // [esp+58h] [ebp-54h]
  int v72; // [esp+5Ch] [ebp-50h] BYREF

  v71 = a7;
  v70 = a6;
  v69 = a5;
  v68 = &v72;
  v67 = a4;
  v66 = a3;
  v65 = a2;
  v64 = a1;
  v7 = dword_413000;
  v8 = &dword_413000[-18432];
  v63 = &dword_413000[-18432];
  v9 = -1;
  while ( 1 )
  {
    v13 = *v7;
    v11 = (unsigned int)v7++ < 0xFFFFFFFC;
    v14 = v11 + v13;
    v11 = __CFADD__(v11, v13) | __CFADD__(v13, v14);
    v12 = v13 + v14;
    do
    {
      if ( v11 )
      {
        v10 = *(_BYTE *)v7;
        v7 = (int *)((char *)v7 + 1);
        *(_BYTE *)v8 = v10;
        v8 = (int *)((char *)v8 + 1);
      }
      else
      {
        v15 = 1;
        while ( 1 )
        {
          v16 = __CFADD__(v12, v12);
          v17 = 2 * v12;
          if ( !v17 )
          {
            v18 = *v7;
            v11 = (unsigned int)v7++ < 0xFFFFFFFC;
            v19 = v11 + v18;
            v16 = __CFADD__(v11, v18) | __CFADD__(v18, v19);
            v17 = v18 + v19;
          }
          v15 += v16 + v15;
          v11 = __CFADD__(v17, v17);
          v20 = 2 * v17 == 0;
          v12 = 2 * v17;
          if ( v11 )
          {
            if ( !v20 )
              break;
            v21 = *v7;
            v11 = (unsigned int)v7++ < 0xFFFFFFFC;
            v22 = v11 + v21;
            v11 = __CFADD__(v11, v21) | __CFADD__(v21, v22);
            v12 = v21 + v22;
            if ( v11 )
              break;
          }
        }
        v23 = 0;
        v11 = v15 < 3;
        v24 = v15 - 3;
        if ( !v11 )
        {
          v25 = v24 << 8;
          LOBYTE(v25) = *(_BYTE *)v7;
          v7 = (int *)((char *)v7 + 1);
          v26 = ~v25;
          if ( !v26 )
          {
            v48 = v63;
            v49 = (char *)(v63 + 21504);
LABEL_33:
            v50 = *(_DWORD *)v49;
            if ( *(_DWORD *)v49 )
            {
              v51 = (int *)((char *)v48 + *((_DWORD *)v49 + 1));
              v49 += 8;
              v52 = ((int (__fastcall *)(int, char *, int, int, char *, int, int, int *, int, int, int))v48[25629])(
                      v23,
                      a2,
                      (int)v48 + v50 + 102316,
                      v64,
                      v65,
                      v66,
                      v67,
                      v68,
                      v69,
                      v70,
                      v71);
              while ( 1 )
              {
                v53 = *v49++;
                if ( !v53 )
                  goto LABEL_33;
                v54 = v49;
                v62 = v49;
                v55 = v53 - 1;
                do
                {
                  if ( !v54 )
                    break;
                  v20 = *v49++ == (char)v55;
                  --v54;
                }
                while ( !v20 );
                v56 = ((int (__cdecl *)(int, char *))v48[25630])(v52, v62);
                if ( !v56 )
                  break;
                *v51++ = v56;
              }
              v50 = ((int (*)(void))v48[25634])();
            }
            v57 = (void (__fastcall *)(int, char *, int *, int, int, int *))v48[25631];
            v58 = v48 - 1024;
            v60 = v50;
            v57(v23, a2, v48 - 1024, 4096, 4, &v60);
            *((_BYTE *)v58 + 495) &= 0x7Fu;
            *((_BYTE *)v58 + 535) &= 0x7Fu;
            ((void (__cdecl *)(int *, int, int, int *))v57)(v48 - 1024, 4096, v59[0], v59);
            do
              v60 = 0;
            while ( &v60 != &v61 - 32 );
            JUMPOUT(0x40FE72);
          }
          v9 = v26;
        }
        v27 = __CFADD__(v12, v12);
        v28 = 2 * v12;
        if ( !v28 )
        {
          v29 = *v7;
          v11 = (unsigned int)v7++ < 0xFFFFFFFC;
          v30 = v11 + v29;
          v27 = __CFADD__(v11, v29) | __CFADD__(v29, v30);
          v28 = v29 + v30;
        }
        v31 = v27;
        v32 = __CFADD__(v28, v28);
        v12 = 2 * v28;
        if ( !v12 )
        {
          v33 = *v7;
          v11 = (unsigned int)v7++ < 0xFFFFFFFC;
          v34 = v11 + v33;
          v32 = __CFADD__(v11, v33) | __CFADD__(v33, v34);
          v12 = v33 + v34;
        }
        v35 = v31 + v32 + v31;
        if ( !v35 )
        {
          v36 = 1;
          while ( 1 )
          {
            v37 = __CFADD__(v12, v12);
            v38 = 2 * v12;
            if ( !v38 )
            {
              v39 = *v7;
              v11 = (unsigned int)v7++ < 0xFFFFFFFC;
              v40 = v11 + v39;
              v37 = __CFADD__(v11, v39) | __CFADD__(v39, v40);
              v38 = v39 + v40;
            }
            v36 += v37 + v36;
            v11 = __CFADD__(v38, v38);
            v41 = 2 * v38 == 0;
            v12 = 2 * v38;
            if ( v11 )
            {
              if ( !v41 )
                break;
              v42 = *v7;
              v11 = (unsigned int)v7++ < 0xFFFFFFFC;
              v43 = v11 + v42;
              v11 = __CFADD__(v11, v42) | __CFADD__(v42, v43);
              v12 = v42 + v43;
              if ( v11 )
                break;
            }
          }
          v35 = v36 + 2;
        }
        v44 = (v9 < 0xFFFFF300) + v35 + 1;
        a2 = (char *)v8 + v9;
        if ( v9 <= 0xFFFFFFFC )
        {
          do
          {
            v46 = *(_DWORD *)a2;
            a2 += 4;
            *v8++ = v46;
            v47 = v44 <= 4;
            v44 -= 4;
          }
          while ( !v47 );
          v8 = (int *)((char *)v8 + v44);
        }
        else
        {
          do
          {
            v45 = *a2++;
            *(_BYTE *)v8 = v45;
            v8 = (int *)((char *)v8 + 1);
            --v44;
          }
          while ( v44 );
        }
      }
      v11 = __CFADD__(v12, v12);
      v12 *= 2;
    }
    while ( v12 );
  }
}
// 417398: positive sp value 50 has been found
// 417398: control flows out of bounds to 40FE72
// 41732F: variable 'v23' is possibly undefined
// 41732F: variable 'a2' is possibly undefined
// 413000: using guessed type int dword_413000[512];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
