// subject_data.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

<anonymous> * g_a402000[] = // 00402000
	{
	};
<anonymous> * g_ptr402004 = null; // 00402004
<anonymous> * g_ptr402008 = null; // 00402008
<anonymous> * g_ptr40200C = null; // 0040200C
<anonymous> * g_ptr402010 = null; // 00402010
<anonymous> * g_ptr402014 = null; // 00402014
<anonymous> * g_ptr402018 = null; // 00402018
<anonymous> * g_ptr40201C = null; // 0040201C
<anonymous> * g_ptr402020 = null; // 00402020
<anonymous> * g_ptr402024 = null; // 00402024
<anonymous> * g_ptr402028 = null; // 00402028
<anonymous> * g_ptr40202C = null; // 0040202C
Eq_11 g_t402030 = // 00402030
	{
		0x00,
		0x00,
	};
byte g_b402080 = 0x00; // 00402080
byte g_b402081 = 0x00; // 00402081
word32 g_dw402170 = 0x00; // 00402170
struct Eq_45 * g_ptr402174 = null; // 00402174
struct Eq_11 * g_ptr402178 = null; // 00402178
word32 g_dw40217C = 0x00; // 0040217C
word32 g_dw402180 = 0x00; // 00402180
word32 g_dw402184 = 0x00; // 00402184
word32 g_dw40218C = 0x00; // 0040218C
struct Eq_11 * g_ptr402190 = null; // 00402190
word32 g_dw402194 = 0x00; // 00402194
uint32 g_dw402198 = 0x00; // 00402198
ui32 g_dw40219C = 0x00; // 0040219C
struct Eq_102 * g_ptr4021A0 = null; // 004021A0
Eq_104 g_t4021A4 = // 004021A4
	{
		0
	};
int32 g_dw4021A8 = 0; // 004021A8
byte g_b4021AC = 0x00; // 004021AC
// subject_rsrc.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

uint32 g_dw405074 = 17966; // 00405074
Eq_11 g_t405088 = // 00405088
	{
		0x66,
		3388196356,
	};
// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

<anonymous> * __imp__Sleep = &g_t16EE; // 00401000
<anonymous> * __imp__ExitProcess = &g_t16E0; // 00401004
// 00401010: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	word32 edx;
	word32 ebp_7 = fn004013FE(edx);
	struct Eq_9 * esp_13 = (struct Eq_9 *) <invalid>;
	esp_13->ptrFFFFFFFC = &g_t40101F;
	fn004012F8(ebp_7);
	fn004015EC();
	word32 edx_41 = fn00401109();
	esp_13->ptrFFFFFFFC = g_ptr402178;
	word32 ecx_52;
	esp_13->ptrFFFFFFFC = fn004011F4(esp_13->ptrFFFFFFFC, out ecx_52);
	esp_13->ptrFFFFFFF8 = g_ptr402174;
	word32 ebx_67 = fn00401393(ecx_52, edx_41, esp_13->ptrFFFFFFF8);
	fn00401690();
	fn004010BA(ebx_67);
	struct Eq_9 * esp_80 = (struct Eq_9 *) <invalid>;
	fn00401293(esp_80->t0000.u0);
	esp_80->t0000.u0 = 100;
	Sleep(esp_80->t0000.u0);
	esp_80->t0000.u0 = 0x00;
	ExitProcess(esp_80->t0000.u0);
}

Eq_11 g_t40101F = // 0040101F
	{
		232,
		0x00401004,
	};
// 00401060: void fn00401060()
// Called from:
//      fn00401109
void fn00401060()
{
	uint32 ecx_23 = (word32) g_b402080;
	byte * ebx_20 = g_ptr4021A0 + g_t4021A4.u0;
	*ebx_20 = (byte) ecx_23;
	memcpy(ebx_20 + 1, &g_b402081, ecx_23);
	g_t4021A4.u0 = (int32) (g_t4021A4.u0 + 0x01);
	fn00401097();
}

// 00401097: void fn00401097()
// Called from:
//      fn00401060
void fn00401097()
{
	if (g_t4021A4.u0 == 0x0200)
	{
		g_t4021A4.u0 = 0x0100;
		g_dw4021A8 = 0x09;
	}
}

// 004010BA: void fn004010BA(Register word32 ebx)
// Called from:
//      Win32CrtStartup
void fn004010BA(word32 ebx)
{
	struct Eq_136 * fs;
	struct Eq_137 * ecx_13 = fs->ptr0018;
	struct Eq_141 * ecx_14 = ecx_13->ptr0030;
	struct Eq_45 * ebx_15 = g_ptr402174;
	ecx_14->ptr0008 = ebx_15;
}

// 004010D5: void fn004010D5()
// Called from:
//      fn004010BA
//      fn00401109
void fn004010D5()
{
	struct Eq_102 * ebx_14 = g_ptr4021A0;
	byte cl_16 = 0x00;
	do
	{
		ebx_14->b0000 = 0x01;
		ebx_14->b0001 = cl_16;
		++cl_16;
		++ebx_14;
		Eq_104 ecx_27 = SEQ(0x00, 0x01, cl_16);
	} while (cl_16 != 0x00);
	g_t4021A4.u0 = (int32) ecx_27;
}

// 004010F8: void fn004010F8()
// Called from:
//      fn00401109
void fn004010F8()
{
	g_b4021AC = g_b402081;
}

// 00401109: Register int32 fn00401109()
// Called from:
//      Win32CrtStartup
int32 fn00401109()
{
	struct Eq_177 * esp_22;
	word32 eax_23;
	g_ptr402004();
	g_dw402184 = eax_23;
	esp_22->dwFFFFFFFC = 60000;
	esp_22->dwFFFFFFF8 = 0x08;
	esp_22->dwFFFFFFF4 = eax_23;
	struct Eq_194 * esp_34;
	struct Eq_11 * eax_35;
	g_a402000[0]();
	g_ptr402178 = eax_35;
	esp_34->dwFFFFFFFC = 0x00;
	esp_34->dwFFFFFFF8 = 0x00;
	esp_34->dwFFFFFFF4 = 0x01;
	struct Eq_211 * esp_46;
	word32 eax_47;
	g_ptr402004();
	g_dw40218C = eax_47;
	g_ptr4021A0 = fn004011DA(eax_47);
	fn004010D5();
	g_dw4021A8 = 0x09;
	Eq_226 eax_63 = fn0040157F();
	esp_46->tFFFFFFFC.u0 = (int32) eax_63;
	fn004012BA(esp_46->tFFFFFFFC.u0);
	fn00401262();
	fn004010F8();
	Eq_226 dwLoc0C_184 = eax_63;
	while (true)
	{
		int32 edx_91 = g_dw40219C - g_dw402170;
		if (edx_91 < g_dw4021A8)
			break;
		Eq_226 eax_100 = fn0040157F();
		if (eax_100 > g_t4021A4.u0 - 0x01)
		{
			esp_46->tFFFFFFFC.u0 = (int32) dwLoc0C_184;
			fn004012BA(esp_46->tFFFFFFFC.u0);
			fn004012E2();
		}
		else
		{
			esp_46->tFFFFFFFC.u0 = (int32) eax_100;
			fn004012BA(esp_46->tFFFFFFFC.u0);
		}
		fn00401262();
		fn004010F8();
		esp_46->tFFFFFFFC.u0 = (int32) dwLoc0C_184;
		fn004012BA(esp_46->tFFFFFFFC.u0);
		fn004012E2();
		fn00401060();
		dwLoc0C_184 = eax_100;
	}
	return edx_91;
}

// 004011DA: Register word32 fn004011DA(Register word32 eax)
// Called from:
//      fn00401109
word32 fn004011DA(word32 eax)
{
	word32 eax_15;
	g_a402000[0]();
	return eax_15;
}

// 004011F4: Register word32 fn004011F4(Stack (ptr32 Eq_11) dwArg04, Register out ptr32 ecxOut)
// Called from:
//      Win32CrtStartup
word32 fn004011F4(struct Eq_11 * dwArg04, ptr32 & ecxOut)
{
	word32 ebx_19 = dwArg04 + Mem17[dwArg04 + 60:word32];
	g_ptr402174 = ebx_19->ptr0034;
	word32 eax_23 = (word32) ebx_19->b0006;
	struct Eq_315 * esp_35;
	struct Eq_11 * eax_36;
	g_ptr402014();
	esp_35->dwFFFFFFFC = ebx_19->dw0054;
	esp_35->ptrFFFFFFF8 = dwArg04;
	esp_35->ptrFFFFFFF4 = eax_36;
	fn0040137D(esp_35->ptrFFFFFFF4, esp_35->ptrFFFFFFF8, esp_35->dwFFFFFFFC);
	word32 dwLoc08_100 = eax_23;
	struct Eq_347 * edi_51 = &ebx_19->dw0054 + 41;
	do
	{
		struct Eq_11 * eax_56 = dwArg04 + edi_51->dw0014;
		struct Eq_11 * ecx_59 = eax_36 + edi_51->dw000C;
		esp_35->dwFFFFFFFC = edi_51->dw0010;
		esp_35->ptrFFFFFFF8 = eax_56;
		esp_35->ptrFFFFFFF4 = ecx_59;
		word32 v16_73 = dwLoc08_100 - 0x01;
		ptr32 ecx_69 = fn0040137D(esp_35->ptrFFFFFFF4, esp_35->ptrFFFFFFF8, esp_35->dwFFFFFFFC);
		++edi_51;
		dwLoc08_100 = v16_73;
	} while (v16_73 != 0x00);
	word32 eax_79 = eax_36 + ebx_19->dw0028;
	ecxOut = ecx_69;
	return eax_79;
}

// 00401262: void fn00401262()
// Called from:
//      fn00401109
void fn00401262()
{
	uint32 ecx_34 = (word32) g_b402080;
	<unknown>* edi_32 = g_ptr402178 + g_dw40217C;
	g_dw40217C += ecx_34;
	memcpy(edi_32, &g_b402081, ecx_34);
}

// 00401293: void fn00401293(Stack Eq_2 dwArg04)
// Called from:
//      Win32CrtStartup
void fn00401293(Eq_2 dwArg04)
{
	g_ptr402008();
	struct Eq_417 * esp_24;
	word32 eax_25;
	g_ptr402018();
	esp_24->dwFFFFFFFC = eax_25;
	g_ptr40200C();
}

// 004012BA: void fn004012BA(Stack Eq_226 dwArg04)
// Called from:
//      fn00401109
void fn004012BA(Eq_226 dwArg04)
{
	byte * ebx_37 = g_ptr4021A0 + dwArg04;
	memcpy(&g_b402080, ebx_37, (word32) *ebx_37 + 0x01);
}

// 004012E2: void fn004012E2()
// Called from:
//      fn00401109
void fn004012E2()
{
	++g_b402080;
	(&g_b402080)[(word32) g_b402080] = g_b4021AC;
}

// 004012F8: void fn004012F8(Register word32 ebp)
// Called from:
//      Win32CrtStartup
void fn004012F8(word32 ebp)
{
	Eq_457 tLoc04;
	tLoc04.dw0000 = ebp;
	fn00401316(&tLoc04);
	fn00401340(&tLoc04);
	fn0040136A(&tLoc04);
}

// 00401316: void fn00401316(Register (ptr32 Eq_464) ebp)
// Called from:
//      fn004012F8
void fn00401316(struct Eq_464 * ebp)
{
	struct Eq_477 * esp_5;
	word32 eax_6;
	g_ptr402018();
	ebp->dwFFFFFFF8 = eax_6;
	word32 edx_16 = ebp->dw0008;
	esp_5->dwFFFFFFFC = 0x00;
	esp_5->dwFFFFFFF8 = 0x04;
	esp_5->dwFFFFFFF4 = 0x00;
	esp_5->dwFFFFFFF0 = edx_16 + 0x01;
	esp_5->dwFFFFFFEC = 0x00;
	esp_5->dwFFFFFFE8 = 0x00;
	word32 eax_32;
	g_ptr402008();
	ebp->dwFFFFFFFC = eax_32;
}

// 00401340: void fn00401340(Register (ptr32 Eq_469) ebp)
// Called from:
//      fn004012F8
void fn00401340(struct Eq_469 * ebp)
{
	ebp->dwFFFFFD2C = 0x00010002;
	struct Eq_521 * esp_12;
	g_ptr40201C();
	word32 eax_15 = ebp->dw0008;
	ebp->dwFFFFFDDC = eax_15;
	esp_12->ptrFFFFFFFC = ebp - 0x02D4;
	esp_12->dwFFFFFFF8 = ebp->dwFFFFFFFC;
	g_ptr402020();
}

// 0040136A: void fn0040136A(Register (ptr32 Eq_474) ebp)
// Called from:
//      fn004012F8
void fn0040136A(struct Eq_474 * ebp)
{
	struct Eq_544 * esp_9;
	g_ptr402024();
	esp_9->dwFFFFFFFC = ebp->dwFFFFFFF8;
	g_ptr40200C();
}

// 0040137D: Register word32 fn0040137D(Stack (ptr32 Eq_11) dwArg04, Stack (ptr32 Eq_11) dwArg08, Stack uint32 dwArg0C)
// Called from:
//      fn004011F4
//      fn00401447
//      fn004015EC
word32 fn0040137D(struct Eq_11 * dwArg04, struct Eq_11 * dwArg08, uint32 dwArg0C)
{
	memcpy(dwArg04, dwArg08, dwArg0C);
	return 0x00;
}

// 00401393: Register word32 fn00401393(Register word32 ecx, Register word32 edx, Stack (ptr32 Eq_45) dwArg04)
// Called from:
//      Win32CrtStartup
word32 fn00401393(word32 ecx, word32 edx, struct Eq_45 * dwArg04)
{
	ptr32 fp;
	struct Eq_564 * esp_29 = fp - 0x28;
	struct Eq_567 * ebx_39 = dwArg04 + (&(dwArg04 + dwArg04->ptr003C / 64)->ptr003C)[0x0011] / 64;
	do
	{
		word32 eax_45 = Mem42[ebx_39 + 0x0C:word32] + dwArg04;
		esp_29->dwFFFFFFFC = eax_45;
		word32 eax_56;
		g_ptr40202C();
		word32 * esi_63 = dwArg04 + ebx_39->dw0000 / 64;
		word32 edi_65 = Mem61[ebx_39 + 16:word32] + dwArg04;
		eax_82 = eax_56;
		do
		{
			word32 eax_82;
			word32 ecx_71 = dwArg04 + *esi_63 / 64;
			struct Eq_583 * esp_77 = esp_29 - 4;
			esp_77->dw0000 = ecx_71 + 0x02;
			esp_77->dwFFFFFFFC = eax_56;
			g_ptr402028();
			*edi_65 = eax_82;
			++esi_63;
			++edi_65;
		} while (*esi_63 != 0x00);
		struct Eq_610 * ebx_98 = ebx_39 - 0x02;
		ebx_39 = (struct Eq_567 *) ((char *) ebx_98 + 22);
	} while (ebx_98->dw0022 != 0x00);
	return esp_29->dw0010;
}

// 004013FE: Register word32 fn004013FE(Register word32 edx)
// Called from:
//      Win32CrtStartup
word32 fn004013FE(word32 edx)
{
	Eq_642 tLoc0C;
	struct Eq_643 * eax_15 = fn0040142A();
	fn0040148B(0x41636F72, &tLoc0C, eax_15);
	return *fn00401447(edx, eax_15, tLoc0C);
}

// 0040142A: Register (ptr32 Eq_668) fn0040142A()
// Called from:
//      fn004013FE
struct Eq_668 * fn0040142A()
{
	struct Eq_669 * fs;
	struct Eq_668 * eax_13 = fs->ptr0000->dw0004 & 0xFFFF0000;
	do
		eax_13 -= 0x00010000;
	while (eax_13->w0000 != 23117);
	return eax_13;
}

// 00401447: Register word32 fn00401447(Register word32 edx, Stack (ptr32 Eq_643) dwArg04, Stack (ptr32 code) dwArg08)
// Called from:
//      fn004013FE
word32 fn00401447(word32 edx, struct Eq_643 * dwArg04, <anonymous> * dwArg08)
{
	ptr32 fp;
	word32 eax_33 = 0xA5;
	ptr32 ecx_41 = fn0040137D(&g_t402030, &g_t4014D3, 0xA5);
	struct Eq_696 * esp_42 = fp - 0x24;
	struct Eq_699 * esi_44 = &g_t4014D3;
	word32 * ebx_45 = g_a402000;
	do
	{
		struct Eq_716 * esp_47 = esp_42 - 4;
		esp_47->ptr0000 = esi_44;
		esp_47->ptrFFFFFFFC = dwArg04;
		dwArg08();
		*ebx_45 = eax_33;
		++ebx_45;
		do
			++esi_44;
		while (esi_44->b0000 != 0x00);
		++esi_44;
	} while (esi_44[1] != 0x00);
	return *esp_42->ptr0008;
}

// 0040148B: void fn0040148B(Stack word32 dwArg04, Stack (ptr32 word32) dwArg08, Stack (ptr32 Eq_643) dwArg0C)
// Called from:
//      fn004013FE
void fn0040148B(word32 dwArg04, word32 * dwArg08, struct Eq_643 * dwArg0C)
{
	word32 edi_38 = Mem30[Mem30[dwArg0C + 0x3C:word32] + 0x78 + dwArg0C:word32] + dwArg0C;
	ui32 ecx_39 = 0x00;
	int32 * ebx_41 = dwArg0C + edi_38->dw0020 / 64;
	while (dwArg04 != *((char *) (dwArg0C + *ebx_41 / 64) + 4))
	{
		++ecx_39;
		++ebx_41;
	}
	Mem63[dwArg08 + 0x00:word32] = (Mem30[edi_38 + 28:word32] + dwArg0C)[ecx_39 * 0x04] + dwArg0C;
}

Eq_11 g_t4014D3 = // 004014D3
	{
		0x48,
		1953655126,
	};
// 00401579: FlagGroup bool fn00401579(Register uint32 esi, Register out Eq_777 esiOut)
// Called from:
//      fn0040157F
bool fn00401579(uint32 esi, union Eq_777 & esiOut)
{
	esiOut = esi >> 0x1F;
	return SLICE(cond(esi >> 0x1F), bool, 2);
}

// 0040157F: Register word32 fn0040157F()
// Called from:
//      fn00401109
word32 fn0040157F()
{
	uint64 edx_eax_25 = (uint64) g_dw402170;
	int32 v18_32 = g_dw4021A8;
	uint32 edx_150 = (uint32) (edx_eax_25 % 0x20);
	word32 * ebx_109 = g_ptr402190 + ((uint32) (edx_eax_25 /u 0x20) << 0x02);
	int32 edi_35 = v18_32;
	word32 eax_115 = 0x00;
	do
	{
		byte dl_47 = (byte) edx_150;
		--edi_35;
		ui32 esi_54;
		if (!fn00401579(fn004015E7(dl_47, __bswap<word32>(*ebx_109)), out esi_54))
			eax_115 += fn004015E2(esi_54, (byte) edi_35);
		uint32 edx_152 = SEQ(SLICE(edx_150 + 0x01, word24, 8), dl_47 + 0x01);
		if (edx_150 == 0x1F)
		{
			++ebx_109;
			edx_152 = 0x00;
		}
		edx_150 = edx_152;
	} while (edi_35 != 0x00);
	g_dw402170 += v18_32;
	return eax_115;
}

// 004015E2: Register ui32 fn004015E2(Register ui32 esi, Register byte dil)
// Called from:
//      fn0040157F
ui32 fn004015E2(ui32 esi, byte dil)
{
	word32 edi;
	return esi << (byte) edi;
}

// 004015E7: Register ui32 fn004015E7(Register byte dl, Register ui32 esi)
// Called from:
//      fn0040157F
ui32 fn004015E7(byte dl, ui32 esi)
{
	return esi << dl;
}

// 004015EC: void fn004015EC()
// Called from:
//      Win32CrtStartup
void fn004015EC()
{
	uint32 ecx_18 = g_dw405074;
	g_dw402198 = ecx_18;
	g_dw40219C = ecx_18 << 0x03;
	struct Eq_862 * esp_32;
	word32 eax_33;
	g_ptr402004();
	g_dw402180 = eax_33;
	esp_32->dwFFFFFFFC = g_dw402198;
	esp_32->dwFFFFFFF8 = 0x08;
	esp_32->dwFFFFFFF4 = eax_33;
	struct Eq_878 * esp_45;
	struct Eq_11 * eax_46;
	g_a402000[0]();
	g_ptr402190 = eax_46;
	g_dw402194 = eax_46 + g_dw402198;
	esp_45->dwFFFFFFFC = g_dw402198;
	esp_45->ptrFFFFFFF8 = &g_t405088;
	esp_45->ptrFFFFFFF4 = g_ptr402190;
	fn0040137D(esp_45->ptrFFFFFFF4, esp_45->ptrFFFFFFF8, esp_45->dwFFFFFFFC);
	esp_45->dwFFFFFFFC = g_dw402198;
	esp_45->ptrFFFFFFF8 = g_ptr402190;
	fn00401672(esp_45->ptrFFFFFFF8, esp_45->dwFFFFFFFC);
}

// 00401672: void fn00401672(Stack (ptr32 Eq_11) dwArg04, Stack uint32 dwArg08)
// Called from:
//      fn004015EC
void fn00401672(struct Eq_11 * dwArg04, uint32 dwArg08)
{
	struct Eq_11 * edx_10 = dwArg04;
	uint32 ecx_16 = dwArg08;
	do
	{
		edx_10->b0000 += 0x40;
		++edx_10;
		--ecx_16;
	} while (ecx_16 != 0x00);
	g_ptr402190 += 4;
}

// 00401690: void fn00401690()
// Called from:
//      Win32CrtStartup
void fn00401690()
{
	struct Eq_948 * esp_8;
	g_ptr402010();
	esp_8->dwFFFFFFFC = g_dw40218C;
	g_ptr402010();
}

word32 g_dw4016D4 = 0x16EE; // 004016D4
word32 g_dw4016D8 = 5856; // 004016D8
