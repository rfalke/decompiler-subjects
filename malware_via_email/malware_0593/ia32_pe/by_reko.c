// subject_data.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 g_dw402000 = 0x00; // 00402000
struct Eq_17 * g_ptr402008 = null; // 00402008
word32 g_dw40200C = 0x00; // 0040200C
struct Eq_17 * g_ptr402100 = null; // 00402100
struct Eq_169 * g_ptr402120 = null; // 00402120
// subject_rsrc.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 g_dw407074 = 0x6403; // 00407074
Eq_17 g_t407088 = // 00407088
	{
		115,
		1551072812,
	};
// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

<anonymous> * __imp__AllocateUserPhysicalPages = &g_t17B8; // 00401000
<anonymous> * __imp__ExitProcess = &g_t17D4; // 00401004
<anonymous> * __imp__GetLastError = &g_t17E2; // 00401008
<anonymous> * __imp__GetProcAddress = &g_t17F2; // 0040100C
<anonymous> * __imp__HeapAlloc = &g_t1804; // 00401010
<anonymous> * __imp__HeapCreate = &g_t1810; // 00401014
<anonymous> * __imp__LoadLibraryA = &g_t181E; // 00401018
<anonymous> * __imp__VirtualAlloc = &g_t182E; // 0040101C
// 00401030: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	fn00401068();
	fn00401469();
	return fn0040144C();
}

// 00401068: void fn00401068()
// Called from:
//      Win32CrtStartup
void fn00401068()
{
	ptr32 fp;
	g_dw402000 = g_dw407074;
	struct Eq_17 * eax_48 = fn00001804(esp_29 + 0x25B6, 4248328, 0x00402D52, esp_29 + ~0x5B55, fn00001810(fp + 4294922466, fp + 0x6EE2, fp + 0x0F4E, 0xFFFF0000, 0x01, 0x00, 0x00), 0x08, g_dw402000);
	g_ptr402008 = eax_48;
	g_dw40200C = eax_48 + g_dw402000;
	esp_47->dwFFFFFFFC = g_dw402000;
	esp_47->ptrFFFFFFF8 = &g_t407088;
	esp_47->ptrFFFFFFF4 = g_ptr402008;
	fn004016A5(esp_47->ptrFFFFFFF4, esp_47->ptrFFFFFFF8, esp_47->dwFFFFFFFC);
	esp_47->dwFFFFFFFC = g_dw402000;
	esp_47->ptrFFFFFFF8 = g_ptr402008;
	fn004011A2(esp_47->ptrFFFFFFF8, esp_47->dwFFFFFFFC);
}

// 004011A2: void fn004011A2(Stack (ptr32 Eq_17) dwArg04, Stack word32 dwArg08)
// Called from:
//      fn00401068
void fn004011A2(struct Eq_17 * dwArg04, word32 dwArg08)
{
	ptr32 fp;
	word32 ecx_22 = dwArg04 + 60100;
	word32 edx_24 = dwArg08;
	do
	{
		struct Eq_107 * ebx_26 = ecx_22 + 0x00;
		ebx_26->bFFFF153C += 228;
		++ecx_22;
		--edx_24;
	} while (edx_24 != 0x00);
	g_ptr402008 += 3;
	fn00401643();
	byte * esi_105 = fp + ~0x13;
	struct Eq_17 * ecx_55 = g_ptr402008;
	word32 edx_57 = dwArg08;
	do
	{
		ecx_55->b0000 = ecx_55->b0000 ^ *esi_105;
		esi_105 -= ~0x00;
		if (*esi_105 == 0x00)
			esi_105 = fp + ~0x13;
		++ecx_55;
		edx_57 += ~0x00;
	} while (edx_57 != 0x00);
	g_ptr402100 = g_ptr402008;
}

// 004012D9: void fn004012D9()
// Called from:
//      fn0040144C
void fn004012D9()
{
	ptr32 fp;
	struct Eq_169 * esi_13 = g_ptr402120;
	struct Eq_172 * esp_11 = fp - 0x08;
	struct Eq_175 * ebx_26 = esi_13 + (&(esi_13 + esi_13->ptr003C / 64)->ptr003C)[0x0011] / 64;
	do
	{
		esp_11->dwFFFFFFFC = g_ptr402120 + ebx_26->dw000C / 64;
		word32 eax_45 = fn0000181E(4160454, 0x0040A988);
		word32 * esi_53 = g_ptr402120 + ebx_26->dw0000 / 64;
		word32 * edi_57 = g_ptr402120 + ebx_26->dw0010 / 64;
		esp_67 = esp_42;
		do
		{
			struct Eq_172 * esp_67;
			word32 ecx_64 = g_ptr402120 + *esi_53 / 64;
			esp_67->dwFFFFFFFC = ecx_64 + 0x02;
			*edi_57 = fn000017F2(ecx_64 + 0x02, 4174844, 0x02, fp + 0x3942, 0x003F3B04, eax_45);
			++edi_57;
			++esi_53;
			esp_67 = esp_79;
		} while (*esi_53 != 0x00);
		++ebx_26;
		esp_11 = esp_79;
	} while (ebx_26->dw000C != 0x00);
}

// 0040141A: Register word32 fn0040141A()
// Called from:
//      fn0040144C
word32 fn0040141A()
{
	struct Eq_257 * fs;
	fs->ptr0018->ptr0030->ptr0008 = g_ptr402120;
	return 0x0040E4E0;
}

// 0040144C: Register word32 fn0040144C()
// Called from:
//      Win32CrtStartup
word32 fn0040144C()
{
	fn004012D9();
	return fn0040141A();
}

// 00401469: void fn00401469()
// Called from:
//      Win32CrtStartup
void fn00401469()
{
	ptr32 fp;
	struct Eq_17 * ebx_24 = g_ptr402100;
	word32 ebx_26 = ebx_24 + Mem21[ebx_24 + 0x3C:word32];
	g_ptr402120 = ebx_26->ptr0034;
	uint32 dwLoc08_153 = (uint32) ebx_26->b0006;
	esp_54->ptrFFFFFFFC = fn0000182E(fp + ~0xA4B3, (char *) ebx_26 - 11256, fp + 0x7ADA, fp + 4294964942, fp + ~0x8577, (char *) ebx_26 - 42446, 0x003F81F4, (char *) &ebx_26->dw0054 + 5926, fp + 4294946404, (char *) &ebx_26->dw0054 + 51202, 0x00400930, ebx_26->ptr0034, ebx_26->dw0050, 0x3000, 0x40, fp + ~0x9BE7);
	esp_54->dwFFFFFFF8 = ebx_26->dw0054;
	esp_54->ptrFFFFFFF4 = g_ptr402100;
	struct Eq_17 * esi_71 = esp_54->ptrFFFFFFFC;
	esp_54->ptrFFFFFFF0 = esi_71;
	fn004016A5(esp_54->ptrFFFFFFF0, esp_54->ptrFFFFFFF4, esp_54->dwFFFFFFF8);
	struct Eq_362 * edi_126 = &ebx_26->dw0054 + 41;
	do
	{
		struct Eq_17 * eax_95 = g_ptr402100 + edi_126->dw0014;
		struct Eq_17 * ecx_101 = esi_71 + edi_126->dw000C;
		esp_54->dwFFFFFFF8 = edi_126->dw0010;
		esp_54->ptrFFFFFFF4 = eax_95;
		esp_54->ptrFFFFFFF0 = ecx_101;
		fn004016A5(esp_54->ptrFFFFFFF0, esp_54->ptrFFFFFFF4, esp_54->dwFFFFFFF8);
		uint32 v22_128 = dwLoc08_153 - 0x01;
		++edi_126;
		dwLoc08_153 = v22_128;
	} while (v22_128 != 0x00);
}

// 00401643: void fn00401643()
// Called from:
//      fn004011A2
void fn00401643()
{
	ptr32 fp;
	fn000017B8(0x00401472, fp + ~0x543F);
	fn000017E2(4186688);
}

// 004016A5: void fn004016A5(Stack (ptr32 Eq_17) dwArg04, Stack (ptr32 Eq_17) dwArg08, Stack word32 dwArg0C)
// Called from:
//      fn00401068
//      fn00401469
void fn004016A5(struct Eq_17 * dwArg04, struct Eq_17 * dwArg08, word32 dwArg0C)
{
	struct Eq_17 * eax_24 = dwArg08;
	struct Eq_17 * edx_26 = dwArg04;
	word32 ecx_28 = dwArg0C;
	if (dwArg0C != 0x00)
	{
		do
		{
			edx_26->b0000 = eax_24->b0000;
			eax_24 -= ~0x00;
			edx_26 -= ~0x00;
			--ecx_28;
		} while (ecx_28 != 0x00);
	}
}

word32 g_dw401794 = 0x17B8; // 00401794
word32 g_dw401798 = 6100; // 00401798
word32 g_dw40179C = 6114; // 0040179C
word32 g_dw4017A0 = 0x17F2; // 004017A0
word32 g_dw4017A4 = 0x1804; // 004017A4
word32 g_dw4017A8 = 0x1810; // 004017A8
word32 g_dw4017AC = 0x181E; // 004017AC
word32 g_dw4017B0 = 0x182E; // 004017B0
