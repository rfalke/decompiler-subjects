/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

void sub_401060();
// int __usercall sub_40107F@<eax>(int result@<eax>);
// void __usercall sub_40109F(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<edi>, int a6@<esi>);
// void __usercall sub_401142(int a1@<eax>, char a2@<bh>, __int16 a3@<di>);
// void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ebx>);
// void __usercall sub_4012B3(__int16 a1@<ax>, __int16 a2@<dx>, int a3@<ebx>, int a4@<ebp>, int a5@<esi>);
// void __usercall sub_40132D(int a1@<edx>, int _ECX@<ecx>, int a3@<ebx>);
// int __userpurge sub_4020D8@<eax>(unsigned int a1@<edx>, int a2@<ecx>, unsigned int a3@<ebx>, unsigned int a4@<edi>, unsigned int a5@<esi>, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63);
// void __usercall sub_4021E0(int a1@<esi>);
_DWORD sub_40222A(); // weak
// void __usercall __noreturn sub_402262(char a1@<ah>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>);
// void __usercall sub_40229A(int a1@<eax>, char a2@<dl>, __int32 *a3@<ecx>, __int32 a4@<ebx>);
_DWORD __far sub_402384(); // weak
void sub_4023FD();
_DWORD sub_402431(); // weak
void sub_40246B();
void sub_4025CA();
void sub_4025EE();
void sub_4026BE();
// void __usercall sub_40276C(__int32 a1@<ecx>, unsigned int a2@<edi>);
// void __usercall sub_40281D(__int32 a1@<edi>);
// void __usercall sub_40287E(__int16 a1@<ax>, __int16 a2@<cx>, __int16 a3@<bx>, __int16 a4@<di>);
void sub_402899();
void sub_4029A0();
// void __usercall sub_4029B8(__int32 a1@<eax>);
// int __userpurge sub_402B92@<eax>(int a1@<edx>, int a2@<ebx>, unsigned int a3@<edi>, unsigned int a4@<esi>, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63);
// void __usercall sub_402BC5(int ebx0@<ebx>, unsigned int a2@<edi>, int a1);
// void __usercall sub_402BE4(bool a1@<cf>, int a2@<eax>, unsigned int a3@<edx>, int a4@<ecx>, int a5@<ebx>, unsigned int a6@<edi>, int a7);
_DWORD sub_402D19(); // weak
// void __usercall sub_402D9F(int a1@<esi>);
void __fastcall sub_402DCA(int a1, __int32 a2);
// void __usercall sub_402EA6(__int32 a1@<esi>);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_4011BD; // weak
_UNKNOWN loc_401348; // weak
_UNKNOWN loc_401382; // weak
_UNKNOWN loc_40215E; // weak
_UNKNOWN loc_402189; // weak
_UNKNOWN loc_402367; // weak
_UNKNOWN loc_4024B6; // weak
_UNKNOWN loc_4024DE; // weak
_UNKNOWN sub_4027D8; // weak
_UNKNOWN loc_4028B4; // weak
_UNKNOWN loc_4028E2; // weak
_UNKNOWN loc_402A20; // weak
_UNKNOWN loc_402C05; // weak


//----- (00401060) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_401060()
{
  JUMPOUT(0x401177);
}
// 401046: positive sp value 4 has been found
// 401055: control flows out of bounds to 401177

//----- (0040107F) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_40107F@<eax>(int result@<eax>)
{
  if ( !result )
    JUMPOUT(0x40115F);
  return result;
}
// 401083: positive sp value 4 has been found
// 40108B: control flows out of bounds to 40115F

//----- (0040109F) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40109F(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<edi>, int a6@<esi>)
{
  int v6; // eax
  int v7; // ebx
  int v8; // eax
  int v9; // ebx
  int v10; // ecx
  int v11; // esi
  int v12; // ebx
  int v13; // eax
  int v14; // esi
  void *v15; // [esp+Ch] [ebp-4h]
  void *retaddr; // [esp+10h] [ebp+0h]

  *(&retaddr - 5) = v15;
  v6 = a1 + 286331154;
  v7 = (((a5 ^ a2) + 1) ^ (a5 + a3)) + v6 + a4;
  sub_401142(v6, SBYTE1(v7), a5);
  v8 |= 0x70EE0BF3u;
  v9 = v8 + v7;
  v11 = (v9 ^ a6) + 1;
  v12 = (v10 - v8) | v9;
  v13 = *(_DWORD *)(v8 + 144);
  v14 = v13 ^ (v12 | v11);
  if ( __SETP__(v14, 0) || !__SETP__(v14, 0) )
    JUMPOUT(0x40121A);
  start(v13, v12, v12);
}
// 4010A3: positive sp value 4 has been found
// 401287: control flows out of bounds to 40121A
// 4010B8: variable 'v8' is possibly undefined
// 4010C4: variable 'v10' is possibly undefined

//----- (00401142) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_401142(int a1@<eax>, char a2@<bh>, __int16 a3@<di>)
{
  int v3; // eax

  v3 = sub_40107F(a1);
  *(_BYTE *)(v3 + 1686995551) -= HIBYTE(a3) ^ a2;
  ((void (*)(void))loc_401382)();
  JUMPOUT(0x40111E);
}
// 401148: positive sp value 4 has been found
// 401189: control flows out of bounds to 40111E

//----- (00401297) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ebx>)
{
  _BYTE *v3; // edx
  unsigned int v4; // [esp-4h] [ebp-4h]

  ((void (__fastcall *)(int, int))loc_4011BD)(a1 + 1, a1 | (a3 + 1 + a2 + 1));
  *v3 -= 56;
  __writeeflags(v4);
  MEMORY[0xEC64568A]();
  JUMPOUT(0x4012DA);
}
// 40121B: control flows out of bounds to 40121C
// 401204: control flows out of bounds to 4012DA
// 4011EA: bad sp value at call
// 4011F0: variable 'v3' is possibly undefined
// 4011F5: variable 'v4' is possibly undefined

//----- (004012B3) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4012B3(__int16 a1@<ax>, __int16 a2@<dx>, int a3@<ebx>, int a4@<ebp>, int a5@<esi>)
{
  unsigned int v6; // esi
  int v7; // eax
  int v8; // edx
  bool v9; // cf
  int v10; // edx
  _BYTE *v11; // edi
  bool v12; // zf
  bool v13; // pf
  bool v16; // zf
  bool v17; // sf
  unsigned int v18; // kr00_4
  _DWORD *v19; // edi
  unsigned int v21; // kr04_4
  unsigned int v22; // kr08_4
  int v24; // [esp+0h] [ebp-20h]
  unsigned int v25; // [esp+4h] [ebp-1Ch]
  unsigned int v26; // [esp+8h] [ebp-18h]
  int v27; // [esp+Ch] [ebp-14h]
  unsigned int v28; // [esp+10h] [ebp-10h]
  _DWORD v29[3]; // [esp+14h] [ebp-Ch]
  void *retaddr; // [esp+20h] [ebp+0h]

  v29[-6] = v28;
  v6 = a3 ^ a5;
  _EBX = v6 ^ a3;
  sub_40287E(v6, a1 + (a2 | a1) - 1, _EBX, v6);
  __debugbreak();
  v9 = __CFSHR__(v8, -46);
  v10 = v8 >> 18;
  v11 = (_BYTE *)((v6 >> 1) | (v9 << 31));
  if ( !v10 )
  {
    v29[0] = 4199338;
    *(&retaddr - 10) = (void *)v29[2];
    ((void (__fastcall *)(unsigned int, unsigned int))((char *)&loc_401348 + 4))(
      (v6 ^ 0x3BB3C4A3) + 1,
      ~(v6 ^ 0x3BB3C4A3) - ((v6 ^ 0x3BB3C4A3) + 1));
    JUMPOUT(0x4011BC);
  }
  *(_DWORD *)v6 = v7;
  __asm { int     0BDh; used by BASIC while in interpreter }
  MEMORY[0x3BB3C4A3] = a4;
  v12 = *v11 == (unsigned __int8)v7;
  v13 = __SETP__(*v11, v7);
  _EDI = v11 + 1;
  __asm { rsldt   byte ptr [ebx-7] }
  if ( v13 )
  {
    v12 = (_BYTE)_EBX + MEMORY[0x3BB3C4A2] + 1 == 0;
    MEMORY[0x3BB3C4A2] += _EBX + 1;
    __asm { int     0DFh; used by BASIC while in interpreter }
    if ( !v12 )
    {
      v29[0] = (unsigned __int16)__SS__;
      JUMPOUT(0x4013DC);
    }
    JUMPOUT(0x4013BB);
  }
  __asm { arpl    di, bx }
  if ( !v12 )
    JUMPOUT(0xE1E003AC);
  __debugbreak();
  *_EDI = *(_DWORD *)v6;
  _ESI = v6 + 4;
  v19 = _EDI + 1;
  v29[0] = v10;
  v21 = __readeflags();
  v28 = v21;
  v27 = _ESI;
  v22 = __readeflags();
  v26 = v22;
  _EAX = (char *)v19 + v7;
  if ( BYTE1(_EAX) != 0xA1 )
    JUMPOUT(0x401425);
  __asm { int     8Ch; used by BASIC while in interpreter }
  v16 = ((unsigned __int8)v10 & *(_BYTE *)(v10 - 100)) == 0;
  v17 = (v10 & *(_BYTE *)(v10 - 100) & 0x80u) != 0;
  *(_BYTE *)(v10 - 100) &= v10;
  if ( v17 )
  {
    *v19 = _EAX;
    if ( !v16 )
    {
      v26 = v10;
      v18 = __readeflags();
      v25 = v18;
      JUMPOUT(0x401413);
    }
  }
  else
  {
    v26 = _ESI;
  }
  v25 = _ESI;
  v24 = _ESI;
  __asm
  {
    outsb
    aad     0F8h ; 'ø'
  }
  JUMPOUT(0x4013F8);
}
// 4011AD: positive sp value 10 has been found
// 4012FE: control flows out of bounds to 401303
// 4011B9: control flows out of bounds to 4011BC
// 4013AB: control flows out of bounds to 4013AC
// 4013DB: control flows out of bounds to 4013DC
// 4013F6: control flows out of bounds to 4013F8
// 401412: control flows out of bounds to 401413
// 401423: control flows out of bounds to 401425
// 401433: control flows out of bounds to E1E003AC
// 4013D8: control flows out of bounds to 4013BB
// 4013C9: conditional instruction was optimized away because of 'edx.4!=0'
// 4013B9: variable 'v8' is possibly undefined
// 4013C1: variable 'v7' is possibly undefined

//----- (0040132D) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40132D(int a1@<edx>, int _ECX@<ecx>, int a3@<ebx>)
{
  int v4; // edx

  _ESI = _ECX;
  v4 = (a3 - _ECX) ^ a1;
  if ( !__SETP__(v4, 0) && __SETP__(v4, 0) )
  {
    __asm { repne imul esi, [ecx-2Dh], 424648Dh }
    JUMPOUT(0x401350);
  }
  JUMPOUT(0x4010BD);
}
// 401333: positive sp value 4 has been found
// 401348: control flows out of bounds to 401350
// 40133A: control flows out of bounds to 4010BD

//----- (004020D8) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
int __userpurge sub_4020D8@<eax>(unsigned int a1@<edx>, int a2@<ecx>, unsigned int a3@<ebx>, unsigned int a4@<edi>, unsigned int a5@<esi>, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63)
{
  bool v64; // cf
  unsigned int v65; // ebx
  int v66; // esi
  int v67; // ebx
  bool v68; // tt
  char v69; // ch
  void *retaddr[2]; // [esp+0h] [ebp+0h]

  BYTE1(a3) = -BYTE1(a3);
  LOBYTE(a3) = (BYTE1(a3) != 0) + a3 - 29;
  LOBYTE(a2) = ~(_BYTE)a2;
  v64 = BYTE1(a2) < (unsigned __int8)((a4 < a3) + 101);
  BYTE1(a2) -= (a4 < a3) + 101;
  v65 = a1;
  LOBYTE(a1) = ~(_BYTE)a1;
  LOBYTE(v65) = v64 + v65 - 71;
  BYTE1(a1) = BYTE1(a2) | a1 ^ BYTE1(a1);
  v64 = a5 < a1;
  v66 = a2 + a5 - a1;
  LOBYTE(a2) = a2 - (v64 + a1 - 7 + 1);
  v64 = __CFADD__(v66, v65);
  v67 = v66 + v65;
  v68 = v64;
  v64 = __CFADD__(v64, (_BYTE)v67);
  LOBYTE(v67) = v68 + v67;
  v64 |= __CFADD__((_BYTE)v67, -89);
  LOBYTE(v67) = v67 - 89;
  BYTE1(v67) -= v64 - 57;
  ((void (__thiscall *)(int))loc_4024DE)(a2 - 1);
  *(_BYTE *)(v67 + 2 * v66) = v69;
  return MK_FP(retaddr[0], retaddr[0])();
}
// 4020DC: positive sp value 4 has been found
// 402919: bad sp value at call
// 402916: variable 'v69' is possibly undefined
// 4020D8: too many input arguments, some ignored

//----- (004021E0) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4021E0(int a1@<esi>)
{
  char v1; // cl
  int v2; // eax
  int v3; // [esp+24h] [ebp-8h]
  int v4; // [esp+28h] [ebp-4h]

  *(&v4 - 12) = v3;
  sub_4025CA();
  *(_DWORD *)(a1 - 14) <<= v1 - 1;
  *(_BYTE *)(v2 - 1037403689) = __ROL1__(*(_BYTE *)(v2 - 1037403689), 1);
  JUMPOUT(0x402C44);
}
// 402213: positive sp value 8 has been found
// 402213: control flows out of bounds to 402C44
// 402222: control flows out of bounds to 402217
// 40221C: conditional instruction was optimized away because of 'edi.4>=0'
// 4021FB: variable 'v1' is possibly undefined
// 4021FF: variable 'v2' is possibly undefined
// 40222A: using guessed type _DWORD sub_40222A();

//----- (0040222A) --------------------------------------------------------
#error "40217F: cannot convert to microcode (funcsize=34)"

//----- (00402262) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn sub_402262(char a1@<ah>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>)
{
  LOBYTE(a4) = a1;
  BYTE1(a4) = -BYTE1(a4);
  ((void (__fastcall *)(int, int))((char *)&loc_40215E + 3))(a3, a2 - a4);
  JUMPOUT(0x4BDEBBC7);
}
// 402266: positive sp value 4 has been found
// 402275: control flows out of bounds to 4BDEBBC7

//----- (0040229A) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40229A(int a1@<eax>, char a2@<dl>, __int32 *a3@<ecx>, __int32 a4@<ebx>)
{
  __int32 v4; // ebx
  int v5; // ebx
  __int32 v6; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v6, a4);
  v4 = v6;
  LOBYTE(a1) = (_BYTE)a3 + (v6 ^ a1) + 97;
  BYTE1(a1) = -((a2 + 1) ^ BYTE1(a1));
  v6 = *a3;
  BYTE1(v4) = BYTE1(a1) ^ -BYTE1(v4);
  v5 = a1 | v4;
  if ( !__SETP__(v5, 0) && __SETP__(v5, 0) )
    JUMPOUT(0x402AD0);
  JUMPOUT(0x402200);
}
// 4022A2: positive sp value 4 has been found
// 402ACB: control flows out of bounds to 402AD0
// 402ABC: control flows out of bounds to 402200

//----- (00402384) --------------------------------------------------------
#error "4023A2: cannot convert to microcode (funcsize=12)"

//----- (004023FD) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4023FD()
{
  JUMPOUT(0x402A03);
}
// 402401: positive sp value 4 has been found
// 402858: control flows out of bounds to 40285E
// 402846: control flows out of bounds to 402A03

//----- (00402431) --------------------------------------------------------
#error "402991: cannot convert to microcode (funcsize=21)"

//----- (0040246B) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_40246B()
{
  __asm { repne pop ebx }
  JUMPOUT(0x402682);
}
// 402470: positive sp value 4 has been found
// 40247D: control flows out of bounds to 402682

//----- (004025CA) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4025CA()
{
  sub_402D19();
  sub_4025EE();
}
// 4025CE: positive sp value 4 has been found
// 402D19: using guessed type _DWORD sub_402D19();

//----- (004025EE) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4025EE()
{
  JUMPOUT(0x402E37);
}
// 4025F2: positive sp value 4 has been found
// 402601: control flows out of bounds to 402E37

//----- (004026BE) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4026BE()
{
  JUMPOUT(0x4023C7);
}
// 40227D: positive sp value 4 has been found
// 402A83: control flows out of bounds to 402A84
// 40228E: control flows out of bounds to 4023C7

//----- (0040276C) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40276C(__int32 a1@<ecx>, unsigned int a2@<edi>)
{
  char v2; // bh
  int v3; // eax
  int v4; // ecx
  bool v5; // cf
  char v6; // bh
  char v7; // zf
  char v8; // bl
  int v9; // edi
  char v10; // al
  int v11; // ecx
  bool v12; // cc
  int v13; // edx
  int v14; // ecx
  char v15; // dl
  char v16; // al
  char v17; // cl
  __int32 v18; // [esp-F80Eh] [ebp-F80Eh] BYREF

  _InterlockedExchange(&v18, a1);
  v2 = BYTE1(v18);
  v3 = ((int (*)(void))((char *)&loc_402367 + 4))();
  v5 = __CFSHR__(*(_BYTE *)a2, 46);
  *(_BYTE *)a2 = 0;
  v18 = (unsigned __int16)__ES__;
  _enable();
  v6 = __CFADD__((_BYTE)v3, v5 + v2 - 95) + v3 + v5 + v2 - 95 - 113 + 84;
  if ( !__SETP__(v6, 0) && __SETP__(v6, 0) )
  {
    sub_402DCA(v4, v3 >> 31);
    if ( v7 )
    {
      _disable();
      ((void (*)(void))sub_4027D8)();
      JUMPOUT(0x40293C);
    }
    JUMPOUT(0x402946);
  }
  v8 = 97;
  v9 = v3 | a2;
  v10 = sub_40222A();
  v12 = (char)v13 <= v10;
  LOBYTE(v13) = v13 - v10;
  if ( v12 )
  {
    LOBYTE(v13) = v13 - 40;
    v14 = v11 + 1;
    LOBYTE(v14) = -(char)v14;
    ((void (__fastcall *)(int, int))((char *)&loc_402189 + 1))(v14, v13 - 1);
    v8 = MEMORY[0x4B4E692D] - v15 + v9;
  }
  sub_4026BE();
  --*(_BYTE *)(v9 + 1255941188);
  if ( !__OFADD__(1, v17 - v8 + v16) && __OFADD__(1, v17 - v8 + v16) )
    __asm { retf }
  JUMPOUT(0x402F07);
}
// 402939: positive sp value F80E has been found
// 40293A: control flows out of bounds to 40293C
// 4028DE: control flows out of bounds to 402946
// 402A2E: control flows out of bounds to 402F07
// 402930: bad sp value at call
// 4028D9: variable 'v4' is possibly undefined
// 4028DE: variable 'v7' is possibly undefined
// 4029E8: variable 'v13' is possibly undefined
// 4029F2: variable 'v11' is possibly undefined
// 402A04: variable 'v15' is possibly undefined
// 402A26: variable 'v17' is possibly undefined
// 402A28: variable 'v16' is possibly undefined
// 40222A: using guessed type _DWORD sub_40222A();

//----- (004027D8) --------------------------------------------------------
#error "4026B1: cannot convert to microcode (funcsize=39)"

//----- (0040281D) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40281D(__int32 a1@<edi>)
{
  __int32 v2; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v2, a1);
  __asm { rep pop edi }
  JUMPOUT(0x4021AF);
}
// 402822: positive sp value 4 has been found
// 40282B: control flows out of bounds to 4021AF

//----- (0040287E) --------------------------------------------------------
void __usercall sub_40287E(__int16 a1@<ax>, __int16 a2@<cx>, __int16 a3@<bx>, __int16 a4@<di>)
{
  __int16 v6; // bx

  HIBYTE(a1) -= 87;
  LOBYTE(a2) = HIBYTE(a3) | (a2 + 1);
  LOBYTE(a1) = HIBYTE(a1) ^ a1;
  v6 = a2 ^ a4 ^ a3;
  HIBYTE(v6) -= 16;
  _DL = a4 + 1;
  if ( (unsigned __int16)((v6 | (a1 - 1)) - 1) >> 8 != (_BYTE)a4 + (_BYTE)a2 )
    __asm { repne mov dl, dl }
  JUMPOUT(0x402EE1);
}
// 40237A: control flows out of bounds to 4027B4
// 402969: control flows out of bounds to 402EE1
// 40235F: conditional instruction was optimized away because of 'ah.1!=0'

//----- (00402899) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402899()
{
  JUMPOUT(0x402B12);
}
// 40206A: positive sp value 4 has been found
// 402B10: control flows out of bounds to 402B12

//----- (004029A0) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4029A0()
{
  JUMPOUT(0x402E5A);
}
// 4029A4: positive sp value 4 has been found
// 4029AD: control flows out of bounds to 402E5A

//----- (004029B8) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4029B8(__int32 a1@<eax>)
{
  __int32 v1; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v1, a1);
  JUMPOUT(0x4022E5);
}
// 4029BE: positive sp value 4 has been found
// 4029CA: control flows out of bounds to 4022E5

//----- (00402B92) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __userpurge sub_402B92@<eax>(int a1@<edx>, int a2@<ebx>, unsigned int a3@<edi>, unsigned int a4@<esi>, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63)
{
  bool v64; // cf
  unsigned int v65; // ebx
  unsigned int v66; // edx
  int v67; // ecx
  int v69; // ebx
  void *v70; // [esp+8h] [ebp-4h]
  void *retaddr; // [esp+Ch] [ebp+0h]

  *(&retaddr - 4) = v70;
  v69 = a3 ^ a2;
  BYTE1(v69) = -17;
  v64 = __CFADD__(a1, v69);
  v65 = a1 + v69 - 1;
  LOBYTE(v65) = v64 + v65 + 89;
  ((void (*)(void))loc_4028B4)();
  return sub_4020D8(
           v66,
           v67,
           v65,
           a3,
           a4,
           a5,
           a6,
           a7,
           a8,
           a9,
           a10,
           a11,
           a12,
           a13,
           a14,
           a15,
           a16,
           a17,
           a18,
           a19,
           a20,
           a21,
           a22,
           a23,
           a24,
           a25,
           a26,
           a27,
           a28,
           a29,
           a30,
           a31,
           a32,
           a33,
           a34,
           a35,
           a36,
           a37,
           a38,
           a39,
           a40,
           a41,
           a42,
           a43,
           a44,
           a45,
           a46,
           a47,
           a48,
           a49,
           a50,
           a51,
           a52,
           a53,
           a54,
           a55,
           a56,
           a57,
           a58,
           a59,
           a60,
           a61,
           a62);
}
// 4020C0: positive sp value 4 has been found
// 4020D4: variable 'v66' is possibly undefined
// 4020D4: variable 'v67' is possibly undefined
// 402B92: too many input arguments, some ignored

//----- (00402BC5) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402BC5(int ebx0@<ebx>, unsigned int a2@<edi>, int a1)
{
  bool v3; // cf
  __int64 v4; // rax
  int v5; // ecx

  v3 = __CFADD__((_BYTE)ebx0, -115);
  LOBYTE(ebx0) = ebx0 - 115;
  LOBYTE(ebx0) = ((unsigned __int8)(v3 + ebx0 + 91) < (unsigned __int8)((__CFADD__(v3, (_BYTE)ebx0) | __CFADD__(v3 + ebx0, 91))
                                                                      + 85))
               + v3
               + ebx0
               + 91
               - ((__CFADD__(v3, (_BYTE)ebx0) | __CFADD__(v3 + ebx0, 91))
                + 85)
               - 102;
  v4 = ((__int64 (*)(void))loc_402C05)();
  sub_402BE4((unsigned int)v4 < 0xE3B927FF, v4, HIDWORD(v4), v5, ebx0, a2, a1);
}
// 402BC9: positive sp value 4 has been found
// 402BE0: variable 'v5' is possibly undefined

//----- (00402BE4) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402BE4(bool a1@<cf>, int a2@<eax>, unsigned int a3@<edx>, int a4@<ecx>, int a5@<ebx>, unsigned int a6@<edi>, int a7)
{
  unsigned int v7; // edx
  char v8; // cf
  char v9; // sf
  char v10; // of
  char v11; // [esp-1h] [ebp-5h]
  void *retaddr; // [esp+4h] [ebp+0h]

  BYTE1(a5) = v11 - (a1 - 13);
  LOBYTE(a5) = -88;
  if ( a2 == -2089759852 )
  {
    a1 = a3 < a6;
    v7 = a3 - a6;
    BYTE1(a4) -= a1 + 73;
    BYTE1(v7) += v7;
    ((void (__thiscall *)(unsigned int))loc_4024B6)(a4 - v7);
    if ( v9 == v10 )
    {
      *(void **)((char *)&retaddr + 2 * a5) = *(char **)((char *)&retaddr + 2 * a5) - v8 + 1947253903;
      JUMPOUT(0x40258E);
    }
    JUMPOUT(0x4023E8);
  }
  JUMPOUT(0x4023C9);
}
// 402488: positive sp value 4 has been found
// 4024B4: control flows out of bounds to 4024B5
// 402587: control flows out of bounds to 40258E
// 40249D: control flows out of bounds to 4023E8
// 40256F: control flows out of bounds to 4023C9
// 4024A8: conditional instruction was optimized away because of 'al.1!=0'
// 402BEE: variable 'v11' is possibly undefined
// 402585: variable 'v9' is possibly undefined
// 402585: variable 'v10' is possibly undefined
// 402587: variable 'v8' is possibly undefined

//----- (00402D19) --------------------------------------------------------
#error "402D2C: call analysis failed (funcsize=12)"

//----- (00402D9F) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402D9F(int a1@<esi>)
{
  ((void (__cdecl *)(int))((char *)&loc_402A20 + 1))(a1);
  JUMPOUT(0x40233F);
}
// 40264A: positive sp value 4 has been found
// 40233A: control flows out of bounds to 40233F
// 402DC5: control flows out of bounds to 402D7A
// 402DBF: conditional instruction was optimized away because of 'eax.4>=1'

//----- (00402DCA) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __fastcall sub_402DCA(int a1, __int32 a2)
{
  __int32 v2; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v2, a2);
  ((void (__fastcall *)(int, __int32))loc_4028E2)(a1, v2);
  JUMPOUT(0x402DE8);
}
// 402DD3: positive sp value 4 has been found
// 402DE2: control flows out of bounds to 402DE8

//----- (00402EA6) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402EA6(__int32 a1@<esi>)
{
  __int32 v1; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v1, a1);
  JUMPOUT(0x40274E);
}
// 402EAE: positive sp value 4 has been found
// 402EB6: control flows out of bounds to 40274E

// nfuncs=33 queued=33 decompiled=33 lumina nreq=0 worse=0 better=0
#error "There were 5 decompilation failure(s) on 33 function(s)"
