/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>);

//-------------------------------------------------------------------------
// Data declarations

int dword_7E3000[512] =
{
  -1,
  772722043,
  585050389,
  -1380927726,
  672012595,
  138408985,
  1380910316,
  114471347,
  -815892332,
  -1,
  -1833148270,
  -1790225043,
  1527463076,
  1901130215,
  -886923942,
  1722553459,
  1348540281,
  1452851405,
  -1,
  -371234430,
  88198395,
  439239840,
  1658408892,
  238147632,
  683332756,
  789133777,
  -946837137,
  -1,
  -267875316,
  -1466009916,
  -138735745,
  -1257674919,
  -1828658515,
  960046468,
  2100212039,
  189358355,
  -1,
  -229891565,
  243772330,
  442176096,
  -33333300,
  -1280791286,
  -1859364261,
  674975755,
  -628782918,
  -1,
  -750308191,
  341851000,
  -1263012861,
  -1565699192,
  1522851742,
  2061319187,
  781916142,
  -942623543,
  -1,
  135627747,
  -288069927,
  343971022,
  -659271324,
  125161962,
  -1848113270,
  -1514128276,
  880324105,
  -1,
  -1722186965,
  684974945,
  -1771568436,
  -1316463207,
  -849440368,
  -873502330,
  -1222562914,
  1468806051,
  -1,
  658136298,
  -1685136253,
  -1373208150,
  207318726,
  1453908056,
  1815447981,
  -1607237051,
  1055191595,
  -1,
  -513808452,
  2038231193,
  -462123846,
  -1658490899,
  -587385556,
  268631433,
  -1317727293,
  -988244845,
  -1048577,
  -1862748579,
  1163342304,
  -216805903,
  451977792,
  -1942908745,
  564392659,
  877619685,
  -254033,
  -1398569473,
  2055976973,
  -371646940,
  640074791,
  1415729586,
  1102451270,
  -16028953,
  872413183,
  -758517358,
  -525312690,
  -1720991277,
  1353572448,
  1972187555,
  -1133300957,
  102117733,
  -15361,
  2053951482,
  1484616744,
  98537807,
  -1132618317,
  562280540,
  957779238,
  -31951,
  -934477825,
  1052171815,
  -1867632285,
  -1471404360,
  2039048347,
  -1612368419,
  -1994091019,
  2113954299,
  -36629,
  50266111,
  1940111845,
  -524395938,
  1821848959,
  -1172009665,
  1402748637,
  -603052604,
  -1631475187,
  -6105,
  -1013317633,
  767561043,
  -498994950,
  1902905363,
  -1239869421,
  -214735566,
  739720175,
  481165847,
  -45880,
  1449459711,
  1363117621,
  1926116378,
  1690234405,
  1060471501,
  1380050516,
  -1625755414,
  1289679166,
  -19749,
  -1792212993,
  446260535,
  -2147248321,
  -1018548023,
  -1195115187,
  -1851820383,
  1911591627,
  1479407878,
  1610605198,
  -264241156,
  378230503,
  310427536,
  -477428616,
  1511954449,
  1244359992,
  1525711776,
  -1966081,
  893204621,
  -1167297955,
  -1993861512,
  -1760673557,
  1723853250,
  -945423096,
  -5619,
  -792330241,
  311001272,
  1380306021,
  1611112221,
  43026045,
  214579180,
  924898294,
  864712941,
  268431654,
  172031999,
  -481978502,
  -1504072741,
  386447132,
  845789770,
  -243838408,
  -1495457681,
  -2,
  -1577322683,
  -1217765710,
  -2058181953,
  -806080172,
  1209523570,
  1799169954,
  1071689111,
  -15773857,
  1502609407,
  -139585347,
  -1721613974,
  320053022,
  639273646,
  1921536650,
  -1102109923,
  -47288,
  489880671,
  -1935855004,
  1373355539,
  -1797950700,
  -670370045,
  -189307799,
  -1565565141,
  -973078529,
  -1677880072,
  1630991070,
  1728993324,
  -1700343671,
  -1471660572,
  1188638315,
  -23141,
  2062155775,
  -748997531,
  -1042256647,
  1858142239,
  -877718481,
  -1029859318,
  -1361073739,
  -1962850199,
  -723,
  -1961361409,
  -124768394,
  -1800722369,
  -618055791,
  -489334122,
  -1424863619,
  677710824,
  1455486639,
  -39409,
  537985023,
  -500489549,
  -565242071,
  -525442922,
  -389588520,
  -1434428314,
  474374789,
  2041555651,
  -60232,
  1783496703,
  1102963586,
  1663763842,
  1774000211,
  -1968320016,
  1208714379,
  -2041133162,
  2022222059,
  -10970,
  338231295,
  -176578936,
  -704261097,
  367053745,
  -359326885,
  1098373622,
  1439327786,
  -1926558924,
  -63017,
  971046911,
  389599413,
  -519865929,
  952811360,
  -1620042213,
  -2043689481,
  1815968597,
  -1483162004,
  -11557937,
  1754988543,
  -260813513,
  598932281,
  -665973810,
  -1307354698,
  994050849,
  666589996,
  -1,
  -1738082172,
  -2069472213,
  1962954553,
  858325882,
  934569368,
  1201813469,
  -860267357,
  -1144881812,
  -1,
  1008834033,
  1399591613,
  1240959503,
  -2021963227,
  708389929,
  -2040432303,
  1401804812,
  1200386346,
  -22020097,
  1273027953,
  1302628874,
  1100267406,
  1317572927,
  -291337502,
  -230861732,
  -34897,
  585433087,
  1067889333,
  1406755429,
  162574455,
  641560936,
  1907939581,
  -2110357009,
  1695372867,
  -37762,
  -140050433,
  1837096151,
  1920997857,
  -1006345102,
  1110137797,
  -883117304,
  1895671770,
  -992168840,
  -4090745,
  1657077759,
  -533093175,
  -765843410,
  -1688008715,
  374145530,
  1836938560,
  -1399242928,
  -179,
  -1329277185,
  -500404660,
  1213398426,
  1618282347,
  28171094,
  -281636329,
  557574504,
  1723869497,
  -1,
  -2106824186,
  -617294555,
  1414577473,
  -185881746,
  1919663488,
  -1052053366,
  1122579144,
  634147902,
  -486539389,
  521816280,
  282291505,
  1956133676,
  719085807,
  -1450271586,
  -47105,
  -1396193518,
  1135266567,
  1774665599,
  -1115784068,
  1237348857,
  -1929481345,
  -37855,
  1515585535,
  1541420346,
  -277705868,
  581275130,
  -1727633551,
  -1564990229,
  -2085174228,
  -1031269481,
  -11855,
  335609855,
  225461756,
  -648008543,
  -1951553231,
  -929186979,
  -412797804,
  -972137028,
  -473779820,
  -42143,
  -1946353665,
  521495298,
  -904284534,
  722434033,
  -1242480505,
  -250854094,
  -997621075,
  1784897868,
  -360985,
  -688717825,
  -1630109927,
  -1627247409,
  50733798,
  1644880217,
  401874215,
  61894161,
  396879544,
  1476391167,
  -1235105760,
  1974256571,
  -1982134669,
  830187343,
  -917505,
  1908046370,
  -816751678,
  1321073114,
  -408183281,
  2112646640,
  -2117360925,
  -48703,
  1143865343,
  -1661765105,
  1943227603,
  2046119528,
  -1331949229,
  2114767114,
  1516642693,
  1800169958,
  -28242,
  -1788477499,
  -819490248,
  -1150142078,
  702543331,
  -486057277,
  -762667292,
  -1348515436,
  -1,
  -638895449,
  -1779547276,
  1997266440,
  641902616,
  149121251,
  -2050764181,
  -591045976,
  -792808775,
  -1,
  -1627009246,
  104108698,
  1223849742,
  2126697909,
  -1657886842,
  -69675695,
  1262517826,
  1144832951,
  -1,
  -2105013869,
  1239459431,
  796888393,
  -368288493,
  -1120021416,
  1019787379,
  1784318031,
  1689363177,
  -1,
  622831782,
  84039154,
  184354261,
  939566180,
  1583468606,
  514544002,
  701186021,
  -221612579,
  -32552966,
  1380136190,
  -2026178552,
  390663428,
  1159043477,
  2147483584,
  771558845,
  463382927,
  340290390,
  -196807889,
  -306352602,
  1151530380,
  -1946157057,
  -1432056901,
  -1263512420,
  1116900765,
  1249456405,
  -1035009867,
  -2128656906,
  -42984,
  786038783,
  764675975,
  -1034688704,
  -1123817465,
  1950916755,
  -484559599,
  898751111,
  33832461,
  -39205,
  297533439,
  1857475755,
  335869151,
  -2095439754,
  132370119,
  -2121682317,
  -148188133,
  1123940812,
  -75483
}; // weak


//----- (007EAFF0) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>)
{
  int *v4; // esi
  int *v5; // edi
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  int i; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  unsigned int v16; // eax
  bool v17; // zf
  int v18; // ebx
  int v19; // ebx
  int v20; // ett
  unsigned int v21; // eax
  bool v22; // cf
  int v23; // ebx
  int v24; // ett
  unsigned int v25; // eax
  unsigned int v26; // eax
  int v27; // eax
  bool v28; // cf
  int v29; // ebx
  int v30; // ett
  BOOL v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  int v35; // ecx
  int v36; // ecx
  bool v37; // cf
  int v38; // ebx
  int v39; // ebx
  int v40; // ett
  bool v41; // zf
  int v42; // ebx
  int v43; // ett
  unsigned int v44; // ecx
  char v45; // al
  int v46; // eax
  bool v47; // cc
  int *v48; // esi
  int *v49; // edi
  int v50; // ecx
  char v51; // al
  int *v52; // eax
  int v53; // eax
  int v54; // eax
  char v55; // t0
  char v56; // bl
  void (__cdecl *v57)(int *, int, int, int *); // ebp
  int *v58; // edi
  int v59[4]; // [esp+10h] [ebp-90h] BYREF
  int *v60; // [esp+20h] [ebp-80h] BYREF
  _DWORD v61[8]; // [esp+24h] [ebp-7Ch] BYREF
  int v62; // [esp+44h] [ebp-5Ch] BYREF

  v61[4] = &v62;
  v61[2] = a3;
  v61[1] = a2;
  v61[0] = a1;
  v4 = dword_7E3000;
  v5 = &dword_7E3000[-1017856];
  v60 = &dword_7E3000[-1017856];
  while ( 1 )
  {
    v9 = *v4;
    v7 = (unsigned int)v4++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v4;
        v4 = (int *)((char *)v4 + 1);
        *(_BYTE *)v5 = v6;
        v5 = (int *)((char *)v5 + 1);
      }
      else
      {
        for ( i = 1; ; i = v21 + v22 + v21 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v16 = i + v12 + i;
          v7 = __CFADD__(v13, v13);
          v17 = 2 * v13 == 0;
          v18 = 2 * v13;
          if ( v7 )
          {
            if ( !v17 )
              break;
            v19 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v20 = v7 + v19;
            v7 = __CFADD__(v7, v19) | __CFADD__(v19, v20);
            v18 = v19 + v20;
            if ( v7 )
              break;
          }
          v21 = v16 - 1;
          v22 = __CFADD__(v18, v18);
          v8 = 2 * v18;
          if ( !v8 )
          {
            v23 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v24 = v7 + v23;
            v22 = __CFADD__(v7, v23) | __CFADD__(v23, v24);
            v8 = v23 + v24;
          }
        }
        v7 = v16 < 3;
        v25 = v16 - 3;
        if ( v7 )
        {
          v28 = __CFADD__(v18, v18);
          v18 *= 2;
          if ( !v18 )
          {
            v29 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v30 = v7 + v29;
            v28 = __CFADD__(v7, v29) | __CFADD__(v29, v30);
            v18 = v29 + v30;
          }
        }
        else
        {
          v26 = v25 << 8;
          LOBYTE(v26) = *(_BYTE *)v4;
          v4 = (int *)((char *)v4 + 1);
          v27 = ~v26;
          if ( !v27 )
          {
            v48 = v60;
            v49 = v60;
            v50 = 6;
            while ( 1 )
            {
              v51 = *(_BYTE *)v49;
              v49 = (int *)((char *)v49 + 1);
              LOBYTE(v52) = v51 + 24;
              while ( (unsigned __int8)v52 <= 1u && !*(_BYTE *)v49 )
              {
                v53 = *v49;
                LOWORD(v53) = BYTE1(*v49);
                v54 = __ROL4__(v53, 16);
                v55 = v54;
                LOBYTE(v54) = BYTE1(v54);
                BYTE1(v54) = v55;
                v56 = *((_BYTE *)v49 + 4) + 24;
                v52 = (int *)((char *)v48 + v54 - (_DWORD)v49);
                *v49 = (int)v52;
                v49 = (int *)((char *)v49 + 5);
                LOBYTE(v52) = v56;
                if ( !--v50 )
                {
                  v57 = (void (__cdecl *)(int *, int, int, int *))v48[1027460];
                  v58 = v48 - 1024;
                  v60 = v52;
                  ((void (__fastcall *)(_DWORD, char *, int *, int, int, int **))v57)(0, a2, v48 - 1024, 4096, 4, &v60);
                  *((_BYTE *)v58 + 799) &= 0x7Fu;
                  *((_BYTE *)v58 + 839) &= 0x7Fu;
                  v57(v48 - 1024, 4096, v59[0], v59);
                  do
                    v60 = 0;
                  while ( &v60 != &v61[-32] );
                  JUMPOUT(0x40216B);
                }
              }
            }
          }
          v28 = v27 & 1;
          a4 = v27 >> 1;
        }
        v31 = v28;
        v32 = __CFADD__(v18, v18);
        v8 = 2 * v18;
        if ( !v8 )
        {
          v33 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v34 = v7 + v33;
          v32 = __CFADD__(v7, v33) | __CFADD__(v33, v34);
          v8 = v33 + v34;
        }
        v35 = v31 + v32 + v31;
        if ( !v35 )
        {
          v36 = 1;
          while ( 1 )
          {
            v37 = __CFADD__(v8, v8);
            v38 = 2 * v8;
            if ( !v38 )
            {
              v39 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v40 = v7 + v39;
              v37 = __CFADD__(v7, v39) | __CFADD__(v39, v40);
              v38 = v39 + v40;
            }
            v36 += v37 + v36;
            v7 = __CFADD__(v38, v38);
            v41 = 2 * v38 == 0;
            v8 = 2 * v38;
            if ( v7 )
            {
              if ( !v41 )
                break;
              v42 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v43 = v7 + v42;
              v7 = __CFADD__(v7, v42) | __CFADD__(v42, v43);
              v8 = v42 + v43;
              if ( v7 )
                break;
            }
          }
          v35 = v36 + 2;
        }
        v44 = (a4 < 0xFFFFFB00) + v35 + 1;
        a2 = (char *)v5 + a4;
        if ( a4 <= 0xFFFFFFFC )
        {
          do
          {
            v46 = *(_DWORD *)a2;
            a2 += 4;
            *v5++ = v46;
            v47 = v44 <= 4;
            v44 -= 4;
          }
          while ( !v47 );
          v5 = (int *)((char *)v5 + v44);
        }
        else
        {
          do
          {
            v45 = *a2++;
            *(_BYTE *)v5 = v45;
            v5 = (int *)((char *)v5 + 1);
            --v44;
          }
          while ( v44 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// 7EB13F: positive sp value 5C has been found
// 7EB13F: control flows out of bounds to 40216B
// 7E3000: using guessed type int dword_7E3000[512];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
