/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<ebp>, int a6@<edi>, int a7@<esi>);

//-------------------------------------------------------------------------
// Data declarations

int dword_416000[512] =
{
  -1876295519,
  88416000,
  808517988,
  -199,
  113508607,
  1116657756,
  1292649734,
  -1913733151,
  -993173242,
  2039821773,
  -63475086,
  210626303,
  1609978212,
  -538906882,
  -1908013315,
  -389139091,
  500022472,
  -40704,
  -592681409,
  67143014,
  -1896904805,
  2070318950,
  -1628936748,
  538086797,
  543983323,
  544377153,
  -151027781,
  504187150,
  1899209603,
  -553300212,
  -1129773056,
  -1228763830,
  1694531439,
  1258594097,
  275782920,
  1256601050,
  369159834,
  -1373649892,
  -1013794396,
  1243209246,
  -580310118,
  -1706376680,
  438035467,
  -1833327423,
  346232294,
  1764465353,
  383719342,
  -426635045,
  1720521034,
  680494587,
  -1691851299,
  1441916212,
  -1442150281,
  -15808505,
  -126714618,
  -1450620303,
  -379778736,
  -570456860,
  101160236,
  1963899341,
  1150286219,
  1087147854,
  -921989074,
  144245467,
  12897465,
  -1092351088,
  194021823,
  1891746276,
  -1731330628,
  1296790680,
  -1717279447,
  -1123548151,
  -2127083041,
  2077093468,
  887625420,
  -816000425,
  1927073514,
  -912925403,
  2009659483,
  -888808155,
  -1597309162,
  1230819927,
  -992229900,
  882232613,
  400672748,
  -965605944,
  -853950271,
  -938052459,
  542700995,
  -1034010468,
  -1602495109,
  142483335,
  947051908,
  -1644010095,
  1678479516,
  -456547950,
  775993602,
  -1875973889,
  -101784565,
  -1190990622,
  -67829952,
  -1370819059,
  -41031740,
  -519614747,
  -452076489,
  1847481092,
  -174293497,
  -640137437,
  1126478109,
  -645762426,
  142757373,
  1636666505,
  -1002997323,
  96999200,
  1912990691,
  -639476607,
  -938010276,
  -905576988,
  -2139606635,
  -1888453707,
  -814475059,
  -1190737425,
  -1881305980,
  705244431,
  410129403,
  -1082041821,
  -2064057745,
  -47435763,
  1226083321,
  -545128766,
  -371533053,
  2865158,
  -1981301253,
  -1897523612,
  -1519133716,
  526455609,
  250982942,
  -128734928,
  1224611544,
  1692762082,
  1705710578,
  -445283731,
  2020866183,
  -1218157716,
  412990315,
  6990290,
  1722245490,
  -1090116689,
  833666193,
  12606834,
  -1468919555,
  2062080432,
  -2010042493,
  1132642532,
  1552534784,
  -362515964,
  571310557,
  -2081454983,
  1013129552,
  -1245420589,
  -333330160,
  -51347306,
  -233501056,
  -312187781,
  -2120185347,
  1109168390,
  -935100146,
  -907492693,
  -75622522,
  -2138664416,
  -1342075475,
  -1912959503,
  -1879079186,
  13882036,
  -438551104,
  15371445,
  1917874237,
  -405693311,
  -102512497,
  96999200,
  1985470953,
  -1545511807,
  -2123228325,
  354033756,
  97621138,
  -1287027948,
  -2028178123,
  -583449150,
  -766020393,
  -99165091,
  1943809503,
  -560607963,
  -765994504,
  -655865508,
  -853156865,
  -621529963,
  96684510,
  -1059793550,
  -2122971650,
  -1596532900,
  -707635424,
  -790596911,
  1549818932,
  332542931,
  -853183765,
  -320672363,
  98047860,
  -437351953,
  -937986836,
  -1981224555,
  -937991964,
  -823465067,
  1549802499,
  -1679996187,
  -197617865,
  -75109531,
  -1066369768,
  -285474763,
  1927085990,
  -1980150602,
  1744326582,
  746178566,
  1699530141,
  -1083224958,
  -2103157763,
  1678542138,
  -2043750464,
  73529412,
  -1312487910,
  -12399617,
  1928021390,
  48995324,
  1292793681,
  731460745,
  -133378209,
  1291844479,
  -1918935698,
  -1261597594,
  2012770757,
  2029548804,
  -660185850,
  -1921577863,
  -1142048322,
  -846266673,
  1765633638,
  881143899,
  1605838808,
  1832861710,
  -2058231794,
  1753568515,
  946839994,
  1439206993,
  -1975360057,
  -546089722,
  1371331453,
  1709074690,
  -804992791,
  248548969,
  -1715774444,
  -552505939,
  814503213,
  -1078535316,
  -1320734827,
  -1901736698,
  509692748,
  -829341883,
  201500269,
  252461145,
  -1284567107,
  1560431965,
  -132605595,
  766971981,
  -737291401,
  87148666,
  1229883521,
  -740499866,
  277319353,
  35757449,
  939091289,
  -2097746317,
  546924054,
  -602392057,
  1172231734,
  -1182701143,
  -1232127719,
  197548967,
  -1656455715,
  -1753404472,
  2036234622,
  -690968219,
  -1781137231,
  -1627212529,
  577465715,
  383684869,
  1938754061,
  1093005219,
  -1434881653,
  1640152448,
  -872122783,
  949303685,
  -435382127,
  -1680934138,
  2019020263,
  -37592534,
  110362111,
  1309465030,
  -1722839691,
  -1078019656,
  -454740548,
  -587596064,
  -704016613,
  100882054,
  868212308,
  1337352072,
  -983742781,
  1705360349,
  -992194674,
  -575244184,
  156983583,
  611256186,
  -844559141,
  1632952994,
  -891699034,
  -1384540755,
  1150182665,
  -629919,
  1168509529,
  1267229710,
  -956013425,
  392334988,
  -965313090,
  -1117352053,
  110992348,
  1508612558,
  1541200646,
  -1904091421,
  1709140237,
  -2062105843,
  -308798704,
  -592858570,
  1321374482,
  -951922756,
  1100334245,
  -2006170258,
  1669265130,
  173782819,
  -1907646151,
  -571472118,
  922468831,
  564050661,
  -1276484292,
  -861666587,
  -807608765,
  172380717,
  -720997994,
  105174714,
  938352356,
  -442676322,
  -2061382259,
  2009145981,
  911019702,
  -95605827,
  -285172349,
  545383699,
  419973174,
  -468121939,
  204245543,
  -1986926879,
  1313326225,
  1056506341,
  607846463,
  1766965361,
  287608554,
  1432651666,
  1285191125,
  834028489,
  -2065161395,
  -1362605683,
  -1785884444,
  -1843640507,
  226588969,
  532361611,
  -1778679824,
  1717068853,
  114839287,
  1900613217,
  215669726,
  -306833866,
  -110419323,
  1925741489,
  380702084,
  -1873179379,
  237225669,
  800221622,
  -653558657,
  1718241174,
  1382245787,
  1838835080,
  108408311,
  2078978830,
  160180837,
  -1307934218,
  1770734274,
  -1655706548,
  564207941,
  1265142555,
  1838212198,
  -129817470,
  -2050444353,
  -2025700511,
  -1408266291,
  -1591684282,
  1578023027,
  2048039713,
  -1890622095,
  -643855765,
  1251089185,
  -2117152946,
  -1765083478,
  1706426946,
  1682338248,
  -1102903025,
  -1829209162,
  542843937,
  -828506565,
  -921831906,
  -259113584,
  1324880005,
  764448281,
  1192335836,
  -669014460,
  643696352,
  756427137,
  -252330099,
  -2053728709,
  -1061762487,
  -120587903,
  -1383764550,
  1653157045,
  213876262,
  -1077821522,
  42687853,
  1779231605,
  -756317582,
  241007233,
  -143804811,
  -1903530234,
  -1702067274,
  -1893101791,
  -1160192222,
  -1991289788,
  -91911911,
  1625315662,
  -261238267,
  -544184959,
  -2137594259,
  -2115468842,
  -888762228,
  -886262127,
  -129304842,
  45445785,
  -1660578357,
  839883153,
  1722662902,
  -1229257077,
  1146288255,
  1409411997,
  1878023391,
  65760514,
  -1744393395,
  105646427,
  -497173025,
  -2130547105,
  106366464,
  -1102201185,
  -1208459650,
  1472126975,
  -1577123659,
  -83459157,
  1717853321,
  -1974842218,
  -324263701,
  -14962689,
  -150698569,
  1829670650,
  -750121902,
  1972290011,
  116296949,
  -1078563621,
  -1781558280,
  348991887,
  554734106,
  -1222258674,
  1276691163,
  1670258677,
  -1380346426,
  796881806,
  -865697808,
  115063840,
  -2123992707,
  -1219337951,
  219061103,
  1406362143,
  -1500055423,
  190085676,
  -1307845636,
  -1955098967,
  1816969857,
  -993620337,
  1810720905,
  1714980791,
  913979270
}; // weak


//----- (0041AD30) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<ebp>, int a6@<edi>, int a7@<esi>)
{
  int *v7; // esi
  int *v8; // edi
  unsigned int v9; // ebp
  char v10; // al
  bool v11; // cf
  int v12; // ebx
  int v13; // ebx
  int v14; // ett
  unsigned int v15; // eax
  bool v16; // cf
  int v17; // ebx
  int v18; // ebx
  int v19; // ett
  bool v20; // zf
  int v21; // ebx
  int v22; // ett
  int v23; // ecx
  unsigned int v24; // eax
  unsigned int v25; // eax
  int v26; // eax
  bool v27; // cf
  int v28; // ebx
  int v29; // ebx
  int v30; // ett
  BOOL v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  int v35; // ecx
  int v36; // ecx
  bool v37; // cf
  int v38; // ebx
  int v39; // ebx
  int v40; // ett
  bool v41; // zf
  int v42; // ebx
  int v43; // ett
  unsigned int v44; // ecx
  char v45; // al
  int v46; // eax
  bool v47; // cc
  int *v48; // esi
  char *v49; // edi
  int v50; // eax
  int *v51; // ebx
  int v52; // ebp
  char v53; // al
  char *v54; // ecx
  unsigned __int8 v55; // al
  int v56; // eax
  void (__fastcall *v57)(int, char *, int *, int, int, int *); // ebp
  int *v58; // edi
  int v59[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v60; // [esp+2Ch] [ebp-80h] BYREF
  int v61; // [esp+30h] [ebp-7Ch] BYREF
  char *v62; // [esp+34h] [ebp-78h]
  int *v63; // [esp+38h] [ebp-74h]
  int v64; // [esp+3Ch] [ebp-70h]
  char *v65; // [esp+40h] [ebp-6Ch]
  int v66; // [esp+44h] [ebp-68h]
  int v67; // [esp+48h] [ebp-64h]
  int *v68; // [esp+4Ch] [ebp-60h]
  int v69; // [esp+50h] [ebp-5Ch]
  int v70; // [esp+54h] [ebp-58h]
  int v71; // [esp+58h] [ebp-54h]
  int v72; // [esp+5Ch] [ebp-50h] BYREF

  v71 = a7;
  v70 = a6;
  v69 = a5;
  v68 = &v72;
  v67 = a4;
  v66 = a3;
  v65 = a2;
  v64 = a1;
  v7 = dword_416000;
  v8 = &dword_416000[-21504];
  v63 = &dword_416000[-21504];
  v9 = -1;
  while ( 1 )
  {
    v13 = *v7;
    v11 = (unsigned int)v7++ < 0xFFFFFFFC;
    v14 = v11 + v13;
    v11 = __CFADD__(v11, v13) | __CFADD__(v13, v14);
    v12 = v13 + v14;
    do
    {
      if ( v11 )
      {
        v10 = *(_BYTE *)v7;
        v7 = (int *)((char *)v7 + 1);
        *(_BYTE *)v8 = v10;
        v8 = (int *)((char *)v8 + 1);
      }
      else
      {
        v15 = 1;
        while ( 1 )
        {
          v16 = __CFADD__(v12, v12);
          v17 = 2 * v12;
          if ( !v17 )
          {
            v18 = *v7;
            v11 = (unsigned int)v7++ < 0xFFFFFFFC;
            v19 = v11 + v18;
            v16 = __CFADD__(v11, v18) | __CFADD__(v18, v19);
            v17 = v18 + v19;
          }
          v15 += v16 + v15;
          v11 = __CFADD__(v17, v17);
          v20 = 2 * v17 == 0;
          v12 = 2 * v17;
          if ( v11 )
          {
            if ( !v20 )
              break;
            v21 = *v7;
            v11 = (unsigned int)v7++ < 0xFFFFFFFC;
            v22 = v11 + v21;
            v11 = __CFADD__(v11, v21) | __CFADD__(v21, v22);
            v12 = v21 + v22;
            if ( v11 )
              break;
          }
        }
        v23 = 0;
        v11 = v15 < 3;
        v24 = v15 - 3;
        if ( !v11 )
        {
          v25 = v24 << 8;
          LOBYTE(v25) = *(_BYTE *)v7;
          v7 = (int *)((char *)v7 + 1);
          v26 = ~v25;
          if ( !v26 )
          {
            v48 = v63;
            v49 = (char *)(v63 + 24576);
LABEL_33:
            v50 = *(_DWORD *)v49;
            if ( *(_DWORD *)v49 )
            {
              v51 = (int *)((char *)v48 + *((_DWORD *)v49 + 1));
              v49 += 8;
              v52 = ((int (__fastcall *)(int, char *, int, int, char *, int, int, int *, int, int, int))v48[29300])(
                      v23,
                      a2,
                      (int)v48 + v50 + 117000,
                      v64,
                      v65,
                      v66,
                      v67,
                      v68,
                      v69,
                      v70,
                      v71);
              while ( 1 )
              {
                v53 = *v49++;
                if ( !v53 )
                  goto LABEL_33;
                v54 = v49;
                v62 = v49;
                v55 = v53 - 1;
                do
                {
                  if ( !v54 )
                    break;
                  v20 = *v49++ == (char)v55;
                  --v54;
                }
                while ( !v20 );
                v56 = ((int (__cdecl *)(int, char *))v48[29301])(v52, v62);
                if ( !v56 )
                  break;
                *v51++ = v56;
              }
              v50 = ((int (*)(void))v48[29305])();
            }
            v57 = (void (__fastcall *)(int, char *, int *, int, int, int *))v48[29302];
            v58 = v48 - 1024;
            v60 = v50;
            v57(v23, a2, v48 - 1024, 4096, 4, &v60);
            *((_BYTE *)v58 + 479) &= 0x7Fu;
            *((_BYTE *)v58 + 519) &= 0x7Fu;
            ((void (__cdecl *)(int *, int, int, int *))v57)(v48 - 1024, 4096, v59[0], v59);
            do
              v60 = 0;
            while ( &v60 != &v61 - 32 );
            JUMPOUT(0x408105);
          }
          v9 = v26;
        }
        v27 = __CFADD__(v12, v12);
        v28 = 2 * v12;
        if ( !v28 )
        {
          v29 = *v7;
          v11 = (unsigned int)v7++ < 0xFFFFFFFC;
          v30 = v11 + v29;
          v27 = __CFADD__(v11, v29) | __CFADD__(v29, v30);
          v28 = v29 + v30;
        }
        v31 = v27;
        v32 = __CFADD__(v28, v28);
        v12 = 2 * v28;
        if ( !v12 )
        {
          v33 = *v7;
          v11 = (unsigned int)v7++ < 0xFFFFFFFC;
          v34 = v11 + v33;
          v32 = __CFADD__(v11, v33) | __CFADD__(v33, v34);
          v12 = v33 + v34;
        }
        v35 = v31 + v32 + v31;
        if ( !v35 )
        {
          v36 = 1;
          while ( 1 )
          {
            v37 = __CFADD__(v12, v12);
            v38 = 2 * v12;
            if ( !v38 )
            {
              v39 = *v7;
              v11 = (unsigned int)v7++ < 0xFFFFFFFC;
              v40 = v11 + v39;
              v37 = __CFADD__(v11, v39) | __CFADD__(v39, v40);
              v38 = v39 + v40;
            }
            v36 += v37 + v36;
            v11 = __CFADD__(v38, v38);
            v41 = 2 * v38 == 0;
            v12 = 2 * v38;
            if ( v11 )
            {
              if ( !v41 )
                break;
              v42 = *v7;
              v11 = (unsigned int)v7++ < 0xFFFFFFFC;
              v43 = v11 + v42;
              v11 = __CFADD__(v11, v42) | __CFADD__(v42, v43);
              v12 = v42 + v43;
              if ( v11 )
                break;
            }
          }
          v35 = v36 + 2;
        }
        v44 = (v9 < 0xFFFFF300) + v35 + 1;
        a2 = (char *)v8 + v9;
        if ( v9 <= 0xFFFFFFFC )
        {
          do
          {
            v46 = *(_DWORD *)a2;
            a2 += 4;
            *v8++ = v46;
            v47 = v44 <= 4;
            v44 -= 4;
          }
          while ( !v47 );
          v8 = (int *)((char *)v8 + v44);
        }
        else
        {
          do
          {
            v45 = *a2++;
            *(_BYTE *)v8 = v45;
            v8 = (int *)((char *)v8 + 1);
            --v44;
          }
          while ( v44 );
        }
      }
      v11 = __CFADD__(v12, v12);
      v12 *= 2;
    }
    while ( v12 );
  }
}
// 41AE88: positive sp value 50 has been found
// 41AE88: control flows out of bounds to 408105
// 41AE1F: variable 'v23' is possibly undefined
// 41AE1F: variable 'a2' is possibly undefined
// 416000: using guessed type int dword_416000[512];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
