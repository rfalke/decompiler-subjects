/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int@<eax>, char *@<edx>, int@<ecx>, unsigned int@<ebp>);

//-------------------------------------------------------------------------
// Data declarations

int dword_416000[512] =
{
  -8388611,
  -939459584,
  -2147483506,
  812187653,
  -1107258880,
  7340065,
  15041472,
  -12578575,
  770113245,
  3866777,
  -1018691533,
  -1177126128,
  6186761,
  2136247045,
  619699199,
  -2127251448,
  -1056243776,
  -356443934,
  -658719208,
  -1124720380,
  -1113561,
  16842719,
  676236246,
  -12797375,
  919795457,
  41161017,
  -771755541,
  -1989456757,
  -134252563,
  93283532,
  -1990107278,
  -2113984034,
  -1182460945,
  -783265793,
  -34604161,
  79668467,
  -142252834,
  -1174395893,
  2024777138,
  -920053879,
  -620695167,
  545511899,
  -471728361,
  84310528,
  205525757,
  -33750862,
  845245,
  -754625308,
  -167742414,
  -926983400,
  252017195,
  -779700165,
  258816571,
  435192169,
  2082417050,
  871825255,
  -1983687120,
  -366626074,
  570402049,
  65616291,
  132512635,
  -381816469,
  25948421,
  -1036269943,
  519768636,
  -805208679,
  499058827,
  -939394873,
  1911128353,
  -54401,
  -251586815,
  982192525,
  -1031538943,
  202017540,
  22557439,
  -1621667600,
  1375698913,
  337933451,
  264843615,
  -1995430844,
  1678181314,
  117965429,
  1088815087,
  -873346623,
  -2141933820,
  -277544904,
  1643734321,
  921631508,
  1363237359,
  126551223,
  1655990745,
  -427855266,
  -1056670785,
  563806694,
  -1056404634,
  -936443167,
  255363929,
  1593798535,
  -2124884223,
  16775404,
  -270090528,
  1053901247,
  -65569769,
  666494975,
  1049001915,
  294600619,
  -1957772718,
  -131723498,
  -24594177,
  -265224186,
  -227164027,
  -1687725741,
  1810416059,
  536279023,
  -601456113,
  -1034359671,
  -1862267381,
  -1826822135,
  -1564267251,
  -1471686916,
  -1611718063,
  -62979574,
  -1746799905,
  690881000,
  -301955076,
  1574527232,
  -654301959,
  -213647361,
  1600651460,
  -1579371687,
  -184496128,
  14435281,
  1225269,
  -1577118442,
  79402492,
  -1679753118,
  7864880,
  -870094518,
  1509818311,
  -246261831,
  723780851,
  1959363848,
  1862360848,
  -1540421648,
  -343437168,
  -769046294,
  803875781,
  -1865736450,
  1778419600,
  1173174202,
  478278181,
  -40372097,
  1683370635,
  290862987,
  -1989877623,
  471859055,
  -7717494,
  735480251,
  -1947760378,
  183175287,
  -295905,
  1975729792,
  -882428,
  -185907486,
  3031218,
  1258294652,
  2098278903,
  -772803837,
  -630372096,
  1651179762,
  463342027,
  -152989243,
  1189214483,
  -1329868078,
  1581499427,
  1513618652,
  1683952063,
  1479554559,
  -152565570,
  744430596,
  -1036062600,
  -1959640036,
  -3433714,
  -1724109281,
  1449671051,
  1471558067,
  32003933,
  -1881022261,
  -233805606,
  -671142296,
  -1350450295,
  -545006768,
  680117247,
  810181992,
  -599763517,
  -338601389,
  1748641871,
  -81599809,
  1183820116,
  -415895723,
  -13530226,
  -354776618,
  1031345904,
  1794191831,
  -1171227499,
  -872866334,
  -1725990650,
  -1079820161,
  835108863,
  1681293522,
  1761272390,
  809473661,
  -1983905358,
  1884029410,
  1385552315,
  1619114231,
  -2095989040,
  519699501,
  -1168570212,
  217194520,
  1342344138,
  1440616140,
  1662370054,
  -944088751,
  -1166343726,
  -293486817,
  1158905959,
  729809152,
  169678160,
  -1979546428,
  192948442,
  -2110783541,
  -1013372686,
  26368,
  1157682106,
  279904192,
  318772478,
  268444565,
  -1543414586,
  47881,
  -77914379,
  -1203857411,
  482096837,
  50366617,
  948120403,
  -1072557565,
  -67843,
  -1312030634,
  1865089245,
  -900661202,
  -1988910530,
  -1616038694,
  -1711808476,
  -530448915,
  1819000079,
  1855243264,
  -519169790,
  -639502345,
  1746247680,
  197793554,
  -1916059887,
  1073608687,
  -704589248,
  -325882349,
  363298560,
  7413689,
  -553626782,
  -67321921,
  4752384,
  1090164804,
  -1891810535,
  2171904,
  1891503075,
  -82872590,
  2054532096,
  15168874,
  532693376,
  -149159936,
  280493950,
  1208001478,
  895090772,
  1052864026,
  157614109,
  -8126964,
  100728703,
  -666426880,
  -1810804658,
  -69402546,
  -1375141733,
  -496773576,
  1620137283,
  -716437321,
  -101157120,
  -469749762,
  1890910674,
  -63714995,
  -117419625,
  -417372161,
  587791553,
  397157094,
  675414016,
  687913984,
  -212861852,
  -309786129,
  -1509944159,
  2592890,
  -1189937045,
  -227043358,
  -569812243,
  -738150837,
  1064289547,
  148281340,
  1744813880,
  -880777994,
  685244606,
  -1318926549,
  -1865381272,
  392151350,
  366878667,
  16066207,
  -1662553188,
  -110358786,
  -2064206401,
  -631468344,
  1916606007,
  922767872,
  -439824143,
  33423359,
  935509381,
  -1291814882,
  4205029,
  500682767,
  5243012,
  -982665206,
  1743737267,
  -665388830,
  933237786,
  772167431,
  6899007,
  -1327198871,
  1727631472,
  6218468,
  -874247495,
  1660955355,
  -1715995586,
  -998419482,
  -606273434,
  285218074,
  -825032795,
  939122619,
  -1641020374,
  -1300758302,
  -1551686400,
  504916987,
  1629134120,
  794768126,
  -1237322621,
  1824374255,
  -1700054717,
  -1151303927,
  -732112264,
  2009857934,
  301006203,
  1630321730,
  480341425,
  365217077,
  -1032150161,
  -1966,
  -448424386,
  964861459,
  569841591,
  180337830,
  -1714856102,
  1688403864,
  -1812266592,
  1146221615,
  -321,
  -1125007361,
  77135901,
  -1649903711,
  1886322098,
  1361887080,
  -809431420,
  -245998472,
  178216815,
  1109924987,
  241239932,
  -110890001,
  1357185208,
  1017939765,
  -1039534281,
  -1122091195,
  -69783546,
  -1594162778,
  486162510,
  -155245635,
  1224745841,
  1091006412,
  -440402429,
  -256984065,
  15328657,
  -1423807743,
  -688383193,
  1658875088,
  910815179,
  -239185806,
  -1506932380,
  1323160812,
  651062751,
  -1959327342,
  -2042930848,
  -1166018937,
  250830598,
  3835769,
  -577069162,
  -1862090575,
  -887043853,
  -1917904401,
  -4818385,
  -774911185,
  977677022,
  1939297617,
  -1383708844,
  -5572377,
  -1795274239,
  -884033878,
  -611177525,
  -1572349095,
  -53109,
  641662943,
  -744854205,
  -528510605,
  1100352033,
  237639704,
  -1188634271,
  1224617547,
  1616773313,
  1501152240,
  9342892,
  -52625977,
  -1880130819,
  -809505507,
  -2024013776,
  -442595072,
  1450621311,
  -1439563540,
  -1737400395,
  1072243210,
  492894073,
  -387878855,
  12617740,
  1746861909,
  247136396,
  1255602507,
  -1119894461,
  14602483,
  100963415,
  -1055042699,
  2135412162,
  -1696623233,
  -1523758793,
  1727608964,
  -6122615,
  15911935,
  -1050542066,
  505675993,
  1925972004,
  -286238214,
  -376700828,
  2042572792,
  -1047813134,
  -120727801,
  11993202,
  -838846223,
  805299242,
  1739978321,
  -51842320,
  -124208512,
  -61394,
  -2116669441,
  -877709744,
  -1749137311,
  1653755489,
  -1208086468,
  -1949588854,
  878010588,
  -259,
  -111976534,
  -1565497943,
  -529450912,
  -2087692275,
  -1103165407,
  1753851276,
  2144928490,
  178447008,
  681255316,
  -1772078166,
  -252525902,
  -1382356795,
  1169608915,
  -61305267,
  1797579891,
  318784702,
  793582033,
  -579290018,
  -1023347626,
  -2036947002,
  -389710876,
  -1719461944,
  1386873036,
  1079156213,
  240371064
}; // weak


//----- (0041D760) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>)
{
  int *v4; // esi
  int *v5; // edi
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  int i; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  unsigned int v16; // eax
  bool v17; // zf
  int v18; // ebx
  int v19; // ebx
  int v20; // ett
  unsigned int v21; // eax
  bool v22; // cf
  int v23; // ebx
  int v24; // ett
  unsigned int v25; // eax
  unsigned int v26; // eax
  int v27; // eax
  bool v28; // cf
  int v29; // ebx
  int v30; // ett
  BOOL v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  int v35; // ecx
  int v36; // ecx
  bool v37; // cf
  int v38; // ebx
  int v39; // ebx
  int v40; // ett
  bool v41; // zf
  int v42; // ebx
  int v43; // ett
  unsigned int v44; // ecx
  char v45; // al
  int v46; // eax
  bool v47; // cc
  int *v48; // esi
  int *v49; // edi
  int v50; // ecx
  char v51; // al
  int *v52; // eax
  int v53; // eax
  int v54; // eax
  char v55; // t0
  char v56; // bl
  void (__cdecl *v57)(int *, int, int, int *); // ebp
  int *v58; // edi
  int v59[4]; // [esp+10h] [ebp-90h] BYREF
  int *v60; // [esp+20h] [ebp-80h] BYREF
  _DWORD v61[8]; // [esp+24h] [ebp-7Ch] BYREF
  int v62; // [esp+44h] [ebp-5Ch] BYREF

  v61[4] = &v62;
  v61[2] = a3;
  v61[1] = a2;
  v61[0] = a1;
  v4 = dword_416000;
  v5 = &dword_416000[-21504];
  v60 = &dword_416000[-21504];
  while ( 1 )
  {
    v9 = *v4;
    v7 = (unsigned int)v4++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v4;
        v4 = (int *)((char *)v4 + 1);
        *(_BYTE *)v5 = v6;
        v5 = (int *)((char *)v5 + 1);
      }
      else
      {
        for ( i = 1; ; i = v21 + v22 + v21 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v16 = i + v12 + i;
          v7 = __CFADD__(v13, v13);
          v17 = 2 * v13 == 0;
          v18 = 2 * v13;
          if ( v7 )
          {
            if ( !v17 )
              break;
            v19 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v20 = v7 + v19;
            v7 = __CFADD__(v7, v19) | __CFADD__(v19, v20);
            v18 = v19 + v20;
            if ( v7 )
              break;
          }
          v21 = v16 - 1;
          v22 = __CFADD__(v18, v18);
          v8 = 2 * v18;
          if ( !v8 )
          {
            v23 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v24 = v7 + v23;
            v22 = __CFADD__(v7, v23) | __CFADD__(v23, v24);
            v8 = v23 + v24;
          }
        }
        v7 = v16 < 3;
        v25 = v16 - 3;
        if ( v7 )
        {
          v28 = __CFADD__(v18, v18);
          v18 *= 2;
          if ( !v18 )
          {
            v29 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v30 = v7 + v29;
            v28 = __CFADD__(v7, v29) | __CFADD__(v29, v30);
            v18 = v29 + v30;
          }
        }
        else
        {
          v26 = v25 << 8;
          LOBYTE(v26) = *(_BYTE *)v4;
          v4 = (int *)((char *)v4 + 1);
          v27 = ~v26;
          if ( !v27 )
          {
            v48 = v60;
            v49 = v60;
            v50 = 7;
            while ( 1 )
            {
              v51 = *(_BYTE *)v49;
              v49 = (int *)((char *)v49 + 1);
              LOBYTE(v52) = v51 + 24;
              while ( (unsigned __int8)v52 <= 1u && *(_BYTE *)v49 == 1 )
              {
                v53 = *v49;
                LOWORD(v53) = BYTE1(*v49);
                v54 = __ROL4__(v53, 16);
                v55 = v54;
                LOBYTE(v54) = BYTE1(v54);
                BYTE1(v54) = v55;
                v56 = *((_BYTE *)v49 + 4) + 24;
                v52 = (int *)((char *)v48 + v54 - (_DWORD)v49);
                *v49 = (int)v52;
                v49 = (int *)((char *)v49 + 5);
                LOBYTE(v52) = v56;
                if ( !--v50 )
                {
                  v57 = (void (__cdecl *)(int *, int, int, int *))v48[32551];
                  v58 = v48 - 1024;
                  v60 = v52;
                  ((void (__fastcall *)(_DWORD, char *, int *, int, int, int **))v57)(0, a2, v48 - 1024, 4096, 4, &v60);
                  *((_BYTE *)v58 + 799) &= ~0x80u;
                  *((_BYTE *)v58 + 839) &= ~0x80u;
                  v57(v48 - 1024, 4096, v59[0], v59);
                  do
                    v60 = 0;
                  while ( &v60 != &v61[-32] );
                  JUMPOUT(0x4011D3);
                }
              }
            }
          }
          v28 = v27 & 1;
          a4 = v27 >> 1;
        }
        v31 = v28;
        v32 = __CFADD__(v18, v18);
        v8 = 2 * v18;
        if ( !v8 )
        {
          v33 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v34 = v7 + v33;
          v32 = __CFADD__(v7, v33) | __CFADD__(v33, v34);
          v8 = v33 + v34;
        }
        v35 = v31 + v32 + v31;
        if ( !v35 )
        {
          v36 = 1;
          while ( 1 )
          {
            v37 = __CFADD__(v8, v8);
            v38 = 2 * v8;
            if ( !v38 )
            {
              v39 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v40 = v7 + v39;
              v37 = __CFADD__(v7, v39) | __CFADD__(v39, v40);
              v38 = v39 + v40;
            }
            v36 += v37 + v36;
            v7 = __CFADD__(v38, v38);
            v41 = 2 * v38 == 0;
            v8 = 2 * v38;
            if ( v7 )
            {
              if ( !v41 )
                break;
              v42 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v43 = v7 + v42;
              v7 = __CFADD__(v7, v42) | __CFADD__(v42, v43);
              v8 = v42 + v43;
              if ( v7 )
                break;
            }
          }
          v35 = v36 + 2;
        }
        v44 = (a4 < 0xFFFFFB00) + v35 + 1;
        a2 = (char *)v5 + a4;
        if ( a4 <= 0xFFFFFFFC )
        {
          do
          {
            v46 = *(_DWORD *)a2;
            a2 += 4;
            *v5++ = v46;
            v47 = v44 <= 4;
            v44 -= 4;
          }
          while ( !v47 );
          v5 = (int *)((char *)v5 + v44);
        }
        else
        {
          do
          {
            v45 = *a2++;
            *(_BYTE *)v5 = v45;
            v5 = (int *)((char *)v5 + 1);
            --v44;
          }
          while ( v44 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// 41D8AF: positive sp value 5C has been found
// 41D8AF: control flows out of bounds to 4011D3
// 416000: using guessed type int dword_416000[512];
// 41D760: using guessed type int anonymous_0[4];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
