// subject_rsrc.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 g_dw418440 = 0x0001848C; // 00418440
word32 g_dw418444 = 99484; // 00418444
word32 g_dw418448 = 99504; // 00418448
word32 g_dw41844C = 99520; // 0041844C
// subject_text_0000.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401158: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	ptr32 fp;
	struct Eq_4 * fs;
	struct Eq_5 * ecx;
	struct Eq_6 * ebp;
	struct Eq_7 * ebx;
	struct Eq_7 * esi;
	bool P;
	struct Eq_10 * ds;
	struct Eq_11 * es;
	struct Eq_5 ** edi;
	byte * edx;
	ptr32 esp_143 = fp;
l00401158:
	word32 eax_156 = 0x00418F84;
	do
	{
		struct Eq_101 * esp_6 = esp_143 - 4;
		esp_6->dw0000 = eax_156;
		esp_6->ptrFFFFFFFC = fs->ptr0000;
		word32 * esp_109 = esp_6 - 4;
l00401165:
		fs->ptr0000 = esp_109;
		struct Eq_5 ** eax_154 = null;
		do
		{
			*eax_154 = (struct Eq_5 **) ecx;
			esp_109 -= 4;
			*esp_109 = eax_154;
			word24 eax_24_8_153 = SLICE(eax_154, word24, 8);
			int8 al_31 = (byte) eax_154 ^ *eax_154;
			byte cl_144 = (byte) ecx;
			++ebp;
			ebx = (struct Eq_7 *) ((char *) &ebx->ptrC01677D2 + 0x3FE9882F);
			eax_154 = SEQ(eax_24_8_153, al_31);
		} while (al_31 > 0x00);
		__syscall<byte>(0x94);
		esi -= ebp[26];
		if (esi == null)
		{
			ui32 eax_190 = SEQ(eax_24_8_153, 0x14);
			while (true)
			{
				ui32 eax_43 = eax_190 & 0xD0533475;
				byte al_45 = (byte) eax_43;
				word24 eax_24_8_70 = SLICE(eax_43, word24, 8);
				word24 edx_24_8_75 = SLICE(edx, word24, 8);
				byte ah_60 = SLICE(eax_43, byte, 8);
				bool Z_62 = SLICE(cond(al_45 - 0x77), bool, 2);
				struct Eq_176 * eax_121 = SEQ(eax_24_8_70, al_45 - 0x77);
				if (!P)
					break;
				struct Eq_137 * esp_50 = esp_109 - 2;
				esp_50->ptr0000 = ds;
				ds = esp_50->ptr0000;
				esp_50->ptrFFFFFFFE = ebx;
				*(byte *) 3460625243 = al_45 - 0x77;
				int32 eax_71 = SEQ(eax_24_8_70, al_45 - 0x77);
				struct Eq_7 * edx_76 = SEQ(edx_24_8_75, 100);
				if (__aas(al_45 - 0x77, ah_60, &(al_45 - 0x77), &ah_60) | Z_62)
				{
					*(ui32 *) 0xF045A161 = *(ui32 *) 0xF045A161 ^ ebp;
					esi = esp_50->ptrFFFFFFFE;
					esp_50->ptrFFFFFFFE = edx_76;
					(esp_50 - 2)[edx_76].b0000 = (int8) (eax_71 >= 1775908976);
					ecx->wB5224AA7 = es;
					word16 dx_86;
					fn0040127C(ebp, edi, out ecx, out dx_86, out ebp, out edi, out es);
					esp_109 = esp_50 - 2;
					P = <invalid>;
					bool C_93 = <invalid>;
					edx = SEQ(SLICE((char *) &edx_76->ptrC01677D2 + 0x3FE9882F, word16, 16), dx_86);
					if (C_93)
						goto l00401165;
				}
				Eq_238 ds_esp_107 = ebp[93];
				struct Eq_242 * esp_108 = (word32) ds_esp_107;
				esp_108->ptrFFFFFFFC = edi;
				ds = SLICE(ds_esp_107, selector, 32);
				esp_109 = esp_108 - 4;
				P = PARITY_EVEN(edi & 0x7D110E44);
				eax_190 = SEQ(edx_24_8_75, 0x20);
				edx = SEQ(eax_24_8_70, al_45 - 0x77);
			}
			eax_121->dw0046 >>= ~0x43;
			Eq_185 es_esp_125 = esi->ptrC01677D2;
			__sti();
			esp_143 = (word32) es_esp_125;
			es = SLICE(es_esp_125, selector, 32);
			goto l00401158;
		}
		Mem140[ebx + ebp:byte] = Mem25[ebx + ebp:byte] & 228;
		ebx = *esp_109;
		ebp[1346308630] = (struct Eq_6) __rol<word32,byte>(ebp[1346308630], cl_144);
		ci8 v24_149 = -esi->b4334A1F6;
		esi->b4334A1F6 = v24_149;
		--edx;
		word32 edi_132 = (char *) edi + 4;
		++esi;
		byte dh_161 = SLICE(edx, byte, 8);
		esp_143 = esp_109 + 1;
		edi = eax_154;
		eax_156 = edi_132;
		cu8 al_158 = (byte) edi_132;
	} while (v24_149 >= 0x00);
	*edx = *edx - dh_161 - (byte) (al_158 < 0x89);
	ebp[53] = (struct Eq_6) __ror<byte,byte>(ebp[53], cl_144);
}

// 0040127C: FlagGroup byte fn0040127C(Register (ptr32 Eq_6) ebp, Register (ptr32 (ptr32 Eq_5)) edi, Register out (ptr32 Eq_220) ecxOut, Register out Eq_221 dxOut, Register out (ptr32 Eq_222) ebpOut, Register out (ptr32 (ptr32 Eq_5)) ediOut, Register out Eq_224 esOut)
// Called from:
//      Win32CrtStartup
byte fn0040127C(struct Eq_6 * ebp, struct Eq_5 ** edi, struct Eq_220 & ecxOut, union Eq_221 & dxOut, struct Eq_222 & ebpOut, struct Eq_5 & ediOut, union Eq_224 & esOut)
{
	__lock();
	fnA1F1_EE8C();
	Eq_224 es_16 = esp_10->u1;
	__in<word32>(dx_12);
	struct Eq_222 * ebp_21 = ebp->ptr0000;
	ebp->ptr0000 = (struct Eq_222 *) 0x0A;
	ebp->ptrFFFFFFFC = ebp_21;
	__sti();
	ecx_13->b14FF912E &= (byte) ecx_13;
	fn3012D7B3();
	ecxOut = ecx_38;
	dxOut = dx_37;
	ebpOut = ebp_21;
	ediOut = (struct Eq_5 **) ((char *) edi + 5);
	esOut = es_16;
	return <invalid>;
}

