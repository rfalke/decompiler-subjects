// subject_code.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: void fn00401000(Stack (ptr32 Eq_2) dwArg04, Stack (arr word32) dwArg08, Stack Eq_4 dwArg0C)
// Called from:
//      fn004012F3
void fn00401000(struct Eq_2 * dwArg04, word32 dwArg08[], Eq_4 dwArg0C)
{
	__emms();
	word64 mm2_32 = (word64) dwArg0C;
	Eq_10 esi_189 = dwArg04->a0000[0].u0;
	if (dwArg0C <= 0x01)
	{
		if (dwArg0C < ~0x00)
		{
			uint32 ecx_150 = -(word32) mm2_32;
			word64 mm4_153 = (word64) (ecx_150 - 0x01);
			uint32 eax_163 = ((uint32) (0x34 /u ecx_150) + 0x06) * ~0x61C88646;
			if (eax_163 != 0x00)
			{
				do
				{
					word64 mm7_169 = (word64) eax_163;
					word64 mm1_172 = (word64) (eax_163 >> 0x02 & 0x03);
					int32 ecx_174 = (word32) mm4_153;
					if (ecx_174 <= 0x00)
						return;
					do
					{
						word64 mm3_181 = (word64) ecx_174;
						Eq_10 edi_186 = dwArg04[ecx_174 - 0x01];
						int32 ecx_212 = (word32) mm3_181;
						Eq_10 eax_215 = dwArg04[ecx_212] - ((edi_186 >> 0x05 ^ esi_189 << 0x02) + (esi_189 >> 0x03 ^ edi_186 << 0x04) ^ ((word32) mm7_169 ^ esi_189) + (dwArg08[(word32) mm3_181 & 0x03 ^ (word32) mm1_172] ^ edi_186));
						dwArg04[ecx_212] = (struct Eq_2) eax_215;
						esi_189 = eax_215;
						ecx_174 = ecx_212 - 0x01;
					} while (ecx_212 > 0x01);
					Eq_10 edi_224 = dwArg04[(word32) mm4_153];
					Eq_10 eax_249 = dwArg04->a0000[0].u0 - ((edi_224 >> 0x05 ^ eax_215 << 0x02) + (eax_215 >> 0x03 ^ edi_224 << 0x04) ^ ((word32) mm7_169 ^ eax_215) + (dwArg08[ecx_212 - 0x01 & 0x03 ^ (word32) mm1_172] ^ edi_224));
					dwArg04->a0000[0].u0 = (uint32) eax_249;
					word32 eax_252 = (word32) mm7_169;
					esi_189 = eax_249;
					eax_163 = eax_252 - ~0x61C88646;
				} while (eax_252 != ~0x61C88646);
			}
		}
	}
	else
	{
		word64 mm7_38 = 0x00;
		word64 mm4_40 = (word64) (dwArg0C - 0x01);
		Eq_10 edi_105 = dwArg04[dwArg0C - 0x01];
		uint32 eax_142 = (uint32) (0x34 /u dwArg0C) + 0x06;
		do
		{
			word32 ebx_56 = (word32) mm7_38;
			word64 mm0_54 = (word64) (eax_142 - 0x01);
			mm7_38 = (word64) (ebx_56 + ~0x61C88646);
			word64 mm1_62 = (word64) (ebx_56 + ~0x61C88646 >> 0x02 & 0x03);
			ui32 eax_109 = 0x00;
			word64 mm3_110 = 0x00;
			do
			{
				uint32 esi_74 = dwArg04->a0004[eax_109];
				ui32 eax_102 = (word32) mm3_110;
				Eq_10 ebx_104 = dwArg04[eax_102].a0000 + ((edi_105 >> 0x05 ^ esi_74 << 0x02) + (esi_74 >> 0x03 ^ edi_105 << 0x04) ^ ((word32) mm7_38 ^ esi_74) + (dwArg08[(word32) mm3_110 & 0x03 ^ (word32) mm1_62] ^ edi_105)) / 4;
				dwArg04[eax_102] = (struct Eq_2) ebx_104;
				edi_105 = ebx_104;
				eax_109 = eax_102 + 0x01;
				mm3_110 = (word64) (eax_102 + 0x01);
			} while (eax_102 + 0x01 != (word32) mm4_40);
			Eq_102 esi_113 = dwArg04->a0000[0].u0;
			ui32 ecx_136 = (word32) mm4_40;
			Eq_10 ebx_138 = dwArg04[ecx_136].a0000 + ((ebx_104 >> 0x05 ^ esi_113 << 0x02) + (esi_113 >> 0x03 ^ ebx_104 << 0x04) ^ ((word32) mm7_38 ^ esi_113) + (dwArg08[(word32) mm3_110 & 0x03 ^ (word32) mm1_62] ^ ebx_104)) / 4;
			dwArg04[ecx_136] = (struct Eq_2) ebx_138;
			edi_105 = ebx_138;
			eax_142 = (word32) mm0_54;
		} while (eax_142 != 0x00);
	}
}

// 00401200: Register (ptr32 Eq_259) fn00401200(Register cui16 ax, Register word16 eax_16_16, Register word32 ebp)
// Called from:
//      fn004012F3
struct Eq_259 * fn00401200(cui16 ax, word16 eax_16_16, word32 ebp)
{
	ptr32 fp;
	struct Eq_264 * fs;
	ptr32 v11_15 = fs->ptr0000;
	fs->ptr0000 = fp - 8;
	struct Eq_259 * edi_11 = SEQ(eax_16_16, ax & 0x1000);
	while (true)
	{
		g_ptr403748 = fp - 8;
		g_dw40374C = ebp;
		g_ptr403750 = edi_11;
		if (edi_11->w0000 == 23117)
		{
			edi_11 += edi_11->dw003C / 0x00001000;
			if (edi_11->w0000 == 0x4550)
			{
				fs->ptr0000 = v11_15;
				return edi_11;
			}
		}
		edi_11 -= 0x1000;
	}
}

// 0040126E: Register word32 fn0040126E(Register (ptr32 byte) esi, Register (ptr32 byte) edi)
// Called from:
//      fn00401286
word32 fn0040126E(byte * esi, byte * edi)
{
	word32 edx_37 = 0x00;
	while (true)
	{
		byte * esi_11 = esi;
		do
		{
			if (*esi_55 == 0x00)
				return edx_37;
			esi_11 = esi_55 + 1;
			edi = edi_56 + 1;
			esi_55 = esi_11;
			edi_56 = edi;
		} while (*esi_55 == *edi_56);
		do
		{
			edi = edi_57 + 1;
			edi_57 = edi;
		} while (*edi_57 != 0x00);
		++edx_37;
	}
}

// 00401286: void fn00401286(Register Eq_4 ebx)
// Called from:
//      fn004012F3
void fn00401286(Eq_4 ebx)
{
	word32 eax_8;
	g_t4081C6();
	if (eax_8 == ~0x01)
		&ebx.u0->unused = g_t4020F5.u0;
	word32 ebp_26 = Mem20[ebx + Mem20[ebx + 60:word32] + 0x0078:word32] + ebx;
	word32 eax_47 = Mem35[ebp_26 + 36:word32] + ebx + 2 + fn0040126E(&g_t4020F5, Mem20[Mem20[ebp_26 + 32:word32] + ebx:word32] + ebx) * 0x02 - Mem35[ebp_26 + 16:word32] * 0x02;
	Mem59[0x004020F5:word32] = (Mem35[ebp_26 + 28:word32] + ebx)[(SEQ(SLICE(eax_47, word16, 16), Mem35[eax_47 + 0x00:word16]) & 0xFFFF) * 0x04] + ebx;
}

// 004012E6: Register Eq_398 Win32CrtStartup()
Eq_398 Win32CrtStartup()
{
	fn004012EC();
}

// 004012EC: void fn004012EC()
// Called from:
//      Win32CrtStartup
void fn004012EC()
{
	fn004012F3();
}

// 004012F3: void fn004012F3()
// Called from:
//      fn004012EC
void fn004012F3()
{
}

// 004012F4: void fn004012F4(Register (ptr32 word32) ecx, Register word32 edx, Register Eq_4 ebx, Register word32 ebp)
// Called from:
//      fn004012EC
void fn004012F4(word32 * ecx, word32 edx, Eq_4 ebx, word32 ebp)
{
	*ecx += edx;
	fn004012F6(ebx, ebp);
}

// 004012F6: void fn004012F6(Register Eq_4 ebx, Register word32 ebp)
// Called from:
//      fn004012F3
//      fn004012F4
void fn004012F6(Eq_4 ebx, word32 ebp)
{
	g_t4020F5.u0 = (HMODULE) LoadLibraryA(0x00402072);
	g_t4081C6 = GetProcAddress(g_t4020F5.u0, 0x00402048);
	Eq_341 eax_17 = g_t4081C6;
	g_t4020F5.u0 = (HMODULE) fn00401200((word16) eax_17, SLICE(eax_17, word16, 16), ebp);
	struct Eq_443 * esp_30;
	word32 eax_32;
	g_t4081C6();
	do
		;
	while (eax_32 != ~0x01);
	fn00401286(ebx);
	esp_30->dwFFFFFFFC = ~0x04100080;
	esp_30->dwFFFFFFF8 = 0x04104141;
	esp_30->dwFFFFFFF4 = ~0x2AAA9555;
	esp_30->dwFFFFFFF0 = 0x6EDDBBB7;
	word32 ecx_60;
	for (ecx_60 = 15781545; ecx_60 != 0x00; --ecx_60)
	{
		__wait();
		__fninit();
	}
	esp_30->tFFFFFFEC.u0 = 0x004020A5;
	esp_30->tFFFFFFE8.u0 = g_t4020F5.u0;
	ExitProcess = GetProcAddress(esp_30->tFFFFFFE8.u0, esp_30->tFFFFFFEC);
	esp_30->tFFFFFFEC.u0 = 0x00402072;
	g_t4020F5.u0 = (HMODULE) LoadLibraryA(esp_30->tFFFFFFEC);
	esp_30->tFFFFFFEC.u0 = g_t4020F5.u0;
	esp_30->tFFFFFFE8.u0 = ~0x08BF;
	esp_30->ptrFFFFFFE4 = g_a407EB8;
	esp_30->ptrFFFFFFE0 = &g_t405BB7;
	fn00401000(esp_30->ptrFFFFFFE0, esp_30->ptrFFFFFFE4, esp_30->tFFFFFFE8.u0);
	g_t405BB9.u0 = esp_30->tFFFFFFEC.u0;
	esp_30->tFFFFFFEC.u0 = 0x00402048;
	esp_30->tFFFFFFE8.u0 = g_t4020F5.u0;
	g_t4081C6 = GetProcAddress(esp_30->tFFFFFFE8.u0, esp_30->tFFFFFFEC);
	g_b40205A = 0x4C;
	esp_30->tFFFFFFEC.u0 = 0x0040207F;
	esp_30->tFFFFFFE8.u0 = g_t4020F5.u0;
	g_t4020F9 = GetProcAddress(esp_30->tFFFFFFE8.u0, esp_30->tFFFFFFEC);
	esp_30->tFFFFFFEC.u0 = 4202555;
	esp_30->tFFFFFFE8.u0 = g_t4020F5.u0;
	g_t4020FD = GetProcAddress(esp_30->tFFFFFFE8.u0, esp_30->tFFFFFFEC);
	esp_30->tFFFFFFEC.u0 = 0x00402067;
	Eq_4 eax_136 = LoadLibraryA(esp_30->tFFFFFFEC);
	if (eax_136 == 0x00)
	{
		g_dw405BBD = 0x01;
		&eax_136.u0->unused = 0x01;
	}
	esp_30->tFFFFFFEC.u0 = 0x00402023;
	esp_30->tFFFFFFE8.u0 = (HMODULE) eax_136;
	Eq_341 eax_153 = GetProcAddress(esp_30->tFFFFFFE8.u0, esp_30->tFFFFFFEC);
	if (eax_153 == null)
	{
		g_dw405BBD = 0x01;
		eax_153 = (int32 (*)()) 0x01;
	}
	g_t403EB6 = eax_153;
	esp_30->tFFFFFFEC.u0 = 0x00;
	struct Eq_652 * esp_182;
	word32 eax_184;
	g_t4020F9();
	g_dw4020C1 = eax_184;
	esp_182->tFFFFFFFC.u0 = 0x0040209A;
	fn00401502(LoadLibraryA(esp_182->tFFFFFFFC), &g_ptr402187, 0x00402105);
	esp_182->tFFFFFFFC.u0 = 0x7F00;
	esp_182->dwFFFFFFF8 = 0x00;
	struct Eq_684 * esp_208;
	word32 eax_210;
	g_ptr40218B();
	g_dw4020C5 = eax_210;
	esp_208->dwFFFFFFFC = 0x7F00;
	esp_208->dwFFFFFFF8 = 0x00;
	struct Eq_698 * esp_219;
	word32 eax_221;
	g_ptr40218F();
	g_dw4020C9 = eax_221;
	esp_219->dwFFFFFFFC = 0x004020B1;
	struct Eq_708 * esp_228;
	g_ptr402193();
	esp_228->dwFFFFFFFC = 0x00;
	esp_228->dwFFFFFFF8 = g_dw4020C1;
	esp_228->dwFFFFFFF4 = 0x00;
	esp_228->dwFFFFFFF0 = 0x00;
	esp_228->dwFFFFFFEC = 0xC0;
	esp_228->dwFFFFFFE8 = 0x0100;
	esp_228->dwFFFFFFE4 = ~0x03E7;
	esp_228->dwFFFFFFE0 = ~0x03E7;
	esp_228->dwFFFFFFDC = 0x00480000;
	esp_228->dwFFFFFFD8 = 0x00402005;
	esp_228->dwFFFFFFD4 = 0x00402015;
	esp_228->dwFFFFFFD0 = 0x00;
	struct Eq_759 * esp_259;
	word32 eax_261;
	g_ptr402187();
	esp_259->dwFFFFFFFC = 0x80;
	esp_259->dwFFFFFFF8 = ~0x13;
	esp_259->dwFFFFFFF4 = eax_261;
	word32 esp_271;
	g_ptr4021A7();
	while (true)
	{
		struct Eq_777 * esp_278 = esp_271 - 4;
		esp_278->dw0000 = 0x00;
		esp_278->dwFFFFFFFC = 0x00;
		esp_278->dwFFFFFFF8 = 0x00;
		esp_278->dwFFFFFFF4 = 0x004020D9;
		struct Eq_796 * esp_290;
		g_ptr402197();
		esp_290->dwFFFFFFFC = 0x004020D9;
		g_ptr40219F();
	}
}

// 00401502: void fn00401502(Register Eq_4 ebx, Register (ptr32 word32) esi, Register Eq_4 edi)
// Called from:
//      fn004012F3
void fn00401502(Eq_4 ebx, word32 * esi, Eq_4 edi)
{
	do
	{
		*esi = (word32) GetProcAddress(ebx, edi);
		&edi.u0->unused = edi.u0 + ((word32) strlen(edi) + 1) / 4;
		++esi;
	} while (*edi.u1 != 0x00);
}

// subject_data.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

byte g_b40205A = 0x31; // 0040205A
word32 g_dw4020C1 = 0x00; // 004020C1
word32 g_dw4020C5 = 0x00; // 004020C5
word32 g_dw4020C9 = 0x00; // 004020C9
Eq_4 g_t4020F5 = // 004020F5
	{
		null
	};
Eq_341 g_t4020F9 = null; // 004020F9
Eq_341 g_t4020FD = null; // 004020FD
<anonymous> * g_ptr402187 = null; // 00402187
<anonymous> * g_ptr40218B = null; // 0040218B
<anonymous> * g_ptr40218F = null; // 0040218F
<anonymous> * g_ptr402193 = null; // 00402193
<anonymous> * g_ptr402197 = null; // 00402197
<anonymous> * g_ptr40219F = null; // 0040219F
<anonymous> * g_ptr4021A7 = null; // 004021A7
ptr32 g_ptr403748 = 0xCCCCCCCC; // 00403748
word32 g_dw40374C = 0xCCCCCCCC; // 0040374C
struct Eq_259 * g_ptr403750 = &g_tCCCCCCCC; // 00403750
Eq_341 g_t403EB6 = &g_tCCCCCCCC; // 00403EB6
Eq_2 g_t405BB7 = // 00405BB7
	{
		
		{
		},
		
		{
		},
	};
Eq_4 g_t405BB9 = // 00405BB9
	{
		&g_tE6B7A298
	};
word32 g_dw405BBD = 3567056376; // 00405BBD
word32 g_a407EB8[] = // 00407EB8
	{
	};
// subject_idata.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

word32 g_dw408056 = 0x80B6; // 00408056
word32 g_dw40805A = 0x80CA; // 0040805A
word32 g_dw40805E = 0x80DC; // 0040805E
word32 g_dw408062 = 33000; // 00408062
word32 g_dw408066 = 0x80F6; // 00408066
word32 g_dw40806A = 33032; // 0040806A
word32 g_dw40806E = 0x8116; // 0040806E
word32 g_dw408072 = 33066; // 00408072
word32 g_dw408076 = 33086; // 00408076
word32 g_dw40807A = 0x8150; // 0040807A
word32 g_dw40807E = 33124; // 0040807E
<anonymous> * __imp__GetSystemMetrics = &g_t80B6; // 00408086
<anonymous> * __imp__CreateWindowExA = &g_t80CA; // 0040808A
<anonymous> * __imp__LoadIconA = &g_t80DC; // 0040808E
<anonymous> * __imp__LoadCursorA = &g_t80E8; // 00408092
<anonymous> * __imp__RegisterClassA = &g_t80F6; // 00408096
<anonymous> * __imp__GetMessageA = &g_t8108; // 0040809A
<anonymous> * __imp__TranslateMessage = &g_t8116; // 0040809E
<anonymous> * __imp__DispatchMessageA = &g_t812A; // 004080A2
<anonymous> * __imp__DefWindowProcA = &g_t813E; // 004080A6
<anonymous> * __imp__EnumChildWindows = &g_t8150; // 004080AA
<anonymous> * __imp__SetWindowLongA = &g_t8164; // 004080AE
word32 g_dw408176 = 33174; // 00408176
word32 g_dw40817A = 33190; // 0040817A
word32 g_dw40817E = 0x81B8; // 0040817E
<anonymous> * __imp__LoadLibraryA = &g_t8196; // 00408186
<anonymous> * __imp__GetProcAddress = &g_t81A6; // 0040818A
<anonymous> * __imp__ExitProcess = &g_t81B8; // 0040818E
Eq_341 g_t4081C6 = null; // 004081C6
