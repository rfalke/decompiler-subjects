/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// double __usercall start@<st0>(int@<eax>, int@<edx>, unsigned int _ECX@<ecx>, int@<ebx>, int@<ebp>, int@<edi>, int@<esi>, double result@<st0>, char@<efl>);


//----- (004068F0) --------------------------------------------------------
double __usercall start@<st0>(
        int a1@<eax>,
        int a2@<edx>,
        unsigned int _ECX@<ecx>,
        int a4@<ebx>,
        int a5@<ebp>,
        int a6@<edi>,
        int a7@<esi>,
        double result@<st0>,
        char a9@<efl>)
{
  int v9; // ebx
  int v10; // edi
  int v12; // esi
  int v13; // ebx
  int v14; // ebx
  int v15; // eax
  unsigned int v17; // ebx
  bool v18; // cf
  bool v19; // zf
  bool v20; // sf
  bool v21; // of
  bool v22; // pf
  __int64 v23; // rax
  int v28; // esi
  int v29; // ecx
  int v31; // edx
  int v36; // ebx
  unsigned int v43; // edx
  unsigned int v45; // eax
  unsigned int v46; // edx
  unsigned int v47; // eax
  int v56; // eax
  char v57; // dh
  int v58; // edi
  char v59; // dl
  bool v61; // cf
  int v67; // esi
  unsigned int v69; // esi
  int v70; // ebx
  int v74; // ecx
  char v75; // dl
  int v80; // ecx
  int v81; // edx
  int v82; // edi
  int v83; // edi
  int v84; // edx
  int v85; // eax
  unsigned __int16 v87; // si
  unsigned int v89; // ebx
  unsigned int v91; // ecx
  unsigned int v93; // ebx
  int v94; // edi
  bool v95; // tt
  unsigned int v98; // [esp-4h] [ebp-4h] BYREF
  void *retaddr[2]; // [esp+0h] [ebp+0h]

  LOBYTE(a1) = a1 - 1;
  BYTE1(a2) &= a2;
  v81 = a6 + a2;
  v82 = a6 - a4;
  v81 &= 0xB5204245;
  BYTE1(v81) += 124;
  LOWORD(v82) = a1 | v82;
  v83 = 8 * v82;
  v84 = v81 | 0x6022FFDB;
  v85 = __ROL4__(a1, 2);
  _ESI = __ROL4__(a7, _ECX);
  LOBYTE(a4) = -(char)a4;
  BYTE1(v85) = 0;
  LOWORD(a4) = (_WORD)a4 << _ECX;
  v56 = v85 + 1;
  v57 = a4;
  v58 = v83 << 27;
  BYTE1(a4) &= v56;
  v15 = v56 + 283004167;
  v59 = -((char)v84 >> 7);
  LOWORD(v15) = v15 + 1;
  if ( v15 == 1766200465 )
    JUMPOUT(0x4066FA);
  _EDI = v58 & 0x1D9DA52B;
  v13 = a4 << 21;
  LOBYTE(v13) = (_BYTE)v13 << _ECX;
  LOWORD(v15) = (unsigned __int8)v15 + 1;
  v14 = __ROL4__(v13, 30);
  LOBYTE(v14) = -(char)v14;
  LOBYTE(v15) = BYTE1(v14) & v15;
  v17 = v14 | 0xFA666AB1;
  LOWORD(v17) = __PAIR16__(BYTE1(v17), __ROR1__(v17, 1)) ^ 0x9D00;
  LOWORD(_EDI) = _ESI | _EDI;
  v18 = _ECX < 0x88E84233;
  v21 = __OFSUB__(_ECX, -1998044621);
  v19 = _ECX == -1998044621;
  v22 = __SETP__(_ECX + 1998044621, 0);
  v20 = (int)(_ECX + 1998044621) < 0;
  if ( _ECX != -1998044621 )
  {
    _ESI = _ESI << 29;
    v45 = v15 - 1;
    BYTE1(v45) <<= _ECX;
    LOWORD(v84) = (unsigned __int8)(v57 + (_ECX < 0x88E84233) + v59);
    LOBYTE(v45) = (unsigned __int8)((char)v45 >> _ECX) >> _ECX;
    if ( _ECX == -911307720 )
    {
      __asm { outsd }
      (*(void (**)(void))(_ECX + 2))();
      return result;
    }
    LOBYTE(v84) = v84 & 0x12;
    v46 = v84 - 1;
    LOWORD(v45) = __ROR2__(v45, _ECX);
    v47 = v45 >> 30;
    BYTE1(v47) |= 0x65u;
    LOBYTE(v47) = __ROL1__(v47, _ECX);
    if ( ~_ESI << _ECX == 2028123102 )
    {
      result = result * (double)MEMORY[0x78E2B372];
      MK_FP(retaddr[0], retaddr[0])();
      return result;
    }
    v95 = __CFSHL__(BYTE1(v47), 15);
    BYTE1(v47) = __ROL1__(BYTE1(v47), 15);
    BYTE1(v46) = _ECX & (_ECX - (v95 + BYTE1(_ECX)));
    LOBYTE(v47) = _ECX + v47;
    LOBYTE(v46) = -18;
    _EDX = v46 >> 28;
    _EBX = 710049537;
    BYTE1(_EDX) -= v47;
    _EAX = -v47;
    BYTE1(_EAX) -= 22;
    HIWORD(v69) = 22211;
    _EDX ^= 0x4B89C572u;
    LOWORD(v69) = _ECX ^ 0xCE67;
    _EAX >>= 28;
    __asm { rcr     bx, cl }
    LOWORD(v69) = _ECX | ((_ECX ^ 0xCE67)
                        - (__CFSHR__(_EDX, 5)
                         - 22748)
                        - ((v69 < (unsigned int)__CFSHR__(_EDX, 5) - 590305500)
                         + 3074));
    __asm { rcl     dh, 6 }
    LOBYTE(_EBX) = v69;
    LOWORD(v69) = v69 & 0xFFBA;
    LOWORD(_EDX) = _EAX;
    __asm { rcr     al, cl }
    _EAX = _EAX - _EDX;
    v43 = _EDX >> _ECX;
    _EDI = 433830141;
    LOBYTE(_EBX) = __ROL1__(__ROR1__(_EBX, _ECX), 9);
    LOBYTE(v43) = v43 | 0x99;
    LOBYTE(_EAX) = _EAX & 0xC8;
    BYTE1(v43) = _ECX ^ (BYTE1(_EAX) + BYTE1(v43));
    _EDX = v43 >> 27;
    __asm
    {
      rcr     al, 0Eh
      rcr     eax, cl
    }
LABEL_36:
    LOWORD(_EDI) = __ROR2__(_EDI, _ECX);
    _DH = BYTE1(_EDX) - 24;
    BYTE1(_EBX) = (char)_EBX >> _ECX;
    __asm { rcr     dh, 0Ah }
    _SI = (_WORD)v69 << 15;
    __asm
    {
      rcr     edi, 1Dh
      rcl     si, cl
    }
    LOBYTE(_EBX) = -70;
LABEL_22:
    SBYTE1(_EBX) >>= 7;
    LOBYTE(_EBX) = ((char)_EBX >> _ECX) | 0xE2;
    __asm { rcl     ebx, cl }
    if ( _ECX == 1163798187 )
      JUMPOUT(0x4066C0);
    JUMPOUT(0x406954);
  }
  BYTE1(v15) = a9;
  v98 = -2132290714;
  v23 = *(int *)v15 * (__int64)v15;
  BYTE1(_ECX) = 66 - BYTE1(v23);
  if ( HIDWORD(v23) == 30002977 )
  {
    _BL = v17 - 10;
    __asm { rcr     bl, 1Eh }
    return result;
  }
  _CL = 0;
  __asm { rcr     esi, cl }
  LOBYTE(v17) = BYTE1(v23);
  LOBYTE(_ECX) = 0;
  _EBX = v17 - _ECX;
  BYTE1(_EBX) = BYTE1(v23) ^ BYTE5(v23) & (BYTE1(_EBX) - 1);
  LOWORD(_ECX) = _ECX - WORD2(v23);
  v61 = v23 & 1;
  if ( !(v23 & 1) )
  {
    _CL = 8 * _ECX;
    __asm { rcl     bh, cl }
    LOWORD(_EBX) = -3102 - (__CFADD__(_ESI, 1807513557) + 19409) + _EBX + 1;
    LOBYTE(_EBX) = -(char)_EBX;
    if ( _EBX == -925073318 )
      JUMPOUT(0xB71E8BD);
    JUMPOUT(0x406586);
  }
  while ( 1 )
  {
    LOBYTE(_ECX) = v61 + _ECX + 61;
    __asm { rcl     di, cl }
    v87 = _ESI - _EDI;
    _EBX = -1880900595;
    SBYTE1(_ECX) >>= 7;
    _EDI = ~_EDI;
    BYTE1(_EBX) = __ROL1__(-68, 12);
    LOWORD(_ESI) = v87 >> _ECX;
    if ( HIDWORD(v23) != -1219494919 )
      break;
    BYTE1(_ECX) |= 0xFBu;
    MEMORY[0xDD370792](_ECX, result);
    v89 = 16 * _EBX;
    _EDX ^= 0x3F5127A1u;
    __asm { rcl     edx, 0Eh }
    _EAX = 0;
    _ECX = v91 >> v91;
    v18 = __CFSHR__(v89, _ECX);
    v93 = v89 >> _ECX;
    v94 = _EDI - (v18 + v93);
    BYTE1(v93) = ~BYTE1(v93);
    v9 = v93 & 0x18920C22;
    v10 = v94 + 1643964404;
    __asm { rcl     ecx, 5 }
    LOWORD(_EDX) = 0;
    v12 = (_ESI | 0x5CC18D2F) + 1304439526;
    BYTE1(_ECX) = BYTE1(v9);
    LOWORD(_ECX) = v9 & (unsigned __int16)_ECX;
    v67 = v12 << 24;
    v70 = v9 << 30;
    LOWORD(v70) = __PAIR16__(BYTE1(v70), __ROL1__(v70, (char)_ECX)) & 0x45FF;
    _EDI = __ROL4__(v10, (char)_ECX);
    LOWORD(_ECX) = _EDI & (unsigned __int16)_ECX;
    v18 = __CFADD__((_WORD)v70, (_WORD)v67);
    LOWORD(v67) = v70 + v67;
    __asm { rcr     edi, 2 }
    v69 = v67 - (v18 - 1216026132);
    BYTE1(v70) = 0;
    __asm { int     2Eh; DOS 2+ internal - EXECUTE COMMAND }
    LOWORD(_EDI) = 0;
    if ( v69 == 758104188 )
    {
      _ECX = *(int *)((char *)_ECX - 6);
      _EBX = v70 - 1;
      goto LABEL_36;
    }
    _EDI = _EDI + 321742170;
    BYTE1(_ECX) = 6;
    v28 = __ROR4__(v69, (char)_ECX);
    LOBYTE(_ECX) = (unsigned __int8)_ECX | 0xCD;
    LOBYTE(_EAX) = MEMORY[0xFFFFFFFF];
    if ( _EAX != -1073741778 )
    {
      BYTE1(_ECX) = -125;
      _AX = v28 ^ ((_WORD)_EAX << (char)_ECX);
      __asm { rcr     edi, 1Bh }
      if ( _EDI == -1261219713 )
      {
        v18 = __CFSHR__(*_ECX, (_BYTE)_ECX);
        *_ECX >>= (char)_ECX;
        *MK_FP(a5, a5 - 124) = *MK_FP(a5, a5 - 124) - (v18 + v28);
      }
      else
      {
        __asm
        {
          rcl     ax, cl
          rcr     dl, 3
        }
      }
      return result;
    }
    _ECX = (_DWORD)_ECX << (char)_ECX;
    __asm { rcl     edi, 2 }
    BYTE1(_ECX) = 97;
    __asm
    {
      rcl     al, cl
      rcl     ch, cl
    }
    _EBX = -917408151;
    while ( 1 )
    {
      v31 = -341352289;
      __asm { rcl     bh, cl }
      v29 = __ROL4__(_ECX, 20);
      LOBYTE(v29) = v29 - 45;
      v18 = __CFSHR__(v29, 30);
      _ECX = v29 >> 30;
      LOBYTE(v31) = v18 - 97 + 92;
      if ( v28 == -1760931110 )
      {
        __outbyte(v31, 2u);
        JUMPOUT(0x406455);
      }
      _EDX = __ROL4__(v31, 8);
      LOBYTE(_ECX) = 0;
      __asm { rcl     dl, cl }
      _ESI = -1671499599;
      __asm { rcr     esi, 0Fh }
      LOBYTE(_EBX) = _EBX - (__CFSHL__(BYTE1(_ECX), 5) + __ROL1__(BYTE1(_ECX), 5));
      LOWORD(_EDI) = _EDI | 3;
      if ( _EDX == -641742039 )
      {
        __writeeflags(v98);
        JUMPOUT(0x40667E);
      }
      __asm { rcr     dh, cl }
      v28 = __ROL4__(_ESI, 2);
      HIDWORD(v23) = 0;
      _EBX -= _EDI;
      if ( _EBX != 2020190995 )
        break;
      _ECX = 3;
      __asm { int     0CEh; used by BASIC while in interpreter }
    }
    _ESI = 1284244848;
    BYTE1(_ECX) = 0;
    __asm { rcl     ecx, 7 }
    __GS__ = 3;
    LOWORD(_ECX) = _ECX + 1392;
    v80 = __ROR4__(_ECX, 27) + 1545951473;
    LOBYTE(v80) = ((char)v80 >> 7) + 1;
    _EDI = v80 ^ _EDI;
    v61 = __CFSHL__(v80, 29);
    _ECX = v80 << 29;
  }
  BYTE1(_ECX) -= (HIDWORD(v23) < 0xB74FFBF9) + 39;
  BYTE1(_EBX) = -21;
  _ECX &= 0xD1EA1632;
  LOBYTE(_ECX) = __ROR1__(_ECX, _ECX);
  _BX = -(__int16)_EBX;
  BYTE1(_EBX) = (unsigned __int8)(BYTE4(v23) ^ HIBYTE(_BX)) >> 6;
  __asm { rcr     bl, 1Eh }
  if ( HIDWORD(v23) == 1719728248 )
  {
    __asm { bound   esp, [edi-4BC578B0h] }
    goto LABEL_22;
  }
  v36 = ~_EBX;
  _CX = ~(_WORD)_ECX;
  LODWORD(v23) = __GS__;
  LOBYTE(v36) = __ROL1__(v36, _CX);
  BYTE1(v36) = v36;
  --_CX;
  HIBYTE(_CX) += BYTE5(v23) + __CFSHL__(v36, 28);
  LOBYTE(_CX) = _CX - 60;
  __asm { rcl     ch, cl }
  v74 = 514588722;
  v75 = BYTE4(v23) + 1;
  BYTE1(v74) = v75 + __CFSHR__(35, 50);
  if ( v74 != -1645645814 )
  {
    _BH = ~((unsigned __int16)(__CFADD__(v75, __CFSHR__(35, 50)) - 19574 + 3688) >> 8);
    __asm { rcl     bh, 2 }
    JUMPOUT(0x40635B);
  }
  __asm { aad     87h ; '‡' }
  return result;
}
// 40631D: control flows out of bounds to 40631F
// 406454: control flows out of bounds to 406455
// 40667D: control flows out of bounds to 40667E
// 4066F4: control flows out of bounds to 4066FA
// 4065C1: control flows out of bounds to 406954
// 406649: control flows out of bounds to 4066C0
// 4067A2: control flows out of bounds to 40635B
// 406A09: control flows out of bounds to B71E8BD
// 4069FF: control flows out of bounds to 406586
// 40645A: conditional instruction was optimized away because edx.4==0
// 406959: variable '_EDX' is possibly undefined
// 406971: variable 'v91' is possibly undefined

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
