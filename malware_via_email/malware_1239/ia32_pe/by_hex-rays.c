/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>);

//-------------------------------------------------------------------------
// Data declarations

int dword_418000[512] =
{
  -521,
  -641785015,
  6407890,
  503355140,
  3270931,
  -436207476,
  1678162,
  2134836608,
  8519679,
  4198667,
  -637530203,
  130810084,
  2097217788,
  -2113879224,
  -302012672,
  1067450358,
  1772798976,
  136606859,
  -2128414279,
  -1056307471,
  -289335066,
  181123096,
  -1087375393,
  -873455354,
  -1947205131,
  -1102959536,
  1995866470,
  2146908470,
  1966276351,
  -1949106193,
  -863408308,
  839225188,
  -292986529,
  -142475479,
  -109085933,
  -440804482,
  -2031773642,
  -769022733,
  824767105,
  -8896968,
  1348095359,
  -1187346176,
  -4202497,
  -503328265,
  891205165,
  166718695,
  -1357646978,
  1887431601,
  -667342870,
  -553050373,
  -67125751,
  4980808,
  1029439484,
  -351584630,
  -762852864,
  -2048980040,
  515960800,
  271819024,
  472499026,
  -1189727281,
  562036704,
  -165027191,
  126593,
  -232652801,
  -2072608839,
  58096625,
  -775963711,
  -1031208565,
  -248659010,
  1601150678,
  -696010757,
  24803358,
  -1949433346,
  317292814,
  831343913,
  -17825793,
  -687784309,
  621069955,
  -51477735,
  -805239157,
  -813213872,
  270816395,
  -134231759,
  -1957564433,
  1582304580,
  34932483,
  415875336,
  1435044793,
  947929315,
  -38277632,
  -785309937,
  -947841932,
  126591492,
  1363237315,
  2114975303,
  1500555003,
  -507444122,
  2076705025,
  -1055880346,
  220201698,
  796491757,
  22624464,
  -327067401,
  -536805384,
  -1052786100,
  -1953757216,
  887619386,
  120832165,
  520602448,
  700117118,
  -225616431,
  1998438662,
  -1203941658,
  -491225096,
  839144301,
  520268923,
  1975551472,
  -1176991252,
  260830834,
  -1673626714,
  2100399041,
  646057759,
  -553648360,
  1508674039,
  1663044546,
  -300178681,
  2883740,
  1526726811,
  -779997643,
  -27295782,
  2113983488,
  -775090176,
  199799836,
  2004767234,
  -1117646080,
  -750024765,
  -1205929722,
  1691376335,
  236553049,
  -1139950865,
  965848050,
  -284688437,
  -1961419617,
  1157085442,
  814462417,
  -696605848,
  -816781,
  1454890509,
  1759838360,
  1745596608,
  -671134335,
  -394148471,
  -872543673,
  411652092,
  -1199741592,
  -221228086,
  -247398646,
  1439821631,
  954611544,
  -1462024856,
  -2019732596,
  -1947995785,
  -376848106,
  960290349,
  -1764810857,
  55032583,
  -386973249,
  529236463,
  932111630,
  2130036700,
  931156363,
  -1203769256,
  -499115535,
  760637685,
  240384280,
  -652686335,
  -2095317244,
  290623426,
  -619937239,
  132367705,
  -1172141071,
  619506333,
  -284769791,
  1361119088,
  1346940815,
  104559725,
  415665211,
  -2129972210,
  88347869,
  738286156,
  9577121,
  -2125462264,
  1219103394,
  1583331079,
  -234825986,
  -1625004800,
  -104228150,
  -2079408513,
  -1610678226,
  -1120875137,
  2430843,
  3687701,
  -1744794228,
  4587530,
  -54550980,
  2078884223,
  1472332023,
  -1583349696,
  2140597003,
  -75148544,
  150142675,
  -411608072,
  544181674,
  436266518,
  2115112483,
  -1990467585,
  1048262869,
  3080704,
  -2111983695,
  -230687780,
  1109098111,
  267898277,
  -2113909406,
  1675807232,
  -868024261,
  16498614,
  234896736,
  11815883,
  -1272398052,
  100022107,
  253243327,
  -83883244,
  18612761,
  275526791,
  1859877854,
  1089719570,
  136844298,
  -673972103,
  -469420744,
  201190902,
  1327462744,
  13303839,
  42996996,
  12784384,
  -265120356,
  -1740407041,
  270669976,
  9764929,
  -1603665877,
  -797329571,
  -1338124242,
  934159613,
  838729784,
  922744581,
  -1570459385,
  115869687,
  -1748715264,
  -1261283437,
  52608603,
  1163089890,
  -64145650,
  1425566119,
  -864923857,
  -2113858757,
  -1835073381,
  -1101431278,
  1715404831,
  -1209014924,
  -42496,
  1654259488,
  -887553847,
  6897920,
  -672202575,
  -1251278765,
  -234556160,
  1656422399,
  -143597098,
  -1101007910,
  993471239,
  1376011579,
  -14593808,
  1686568959,
  2042961097,
  -329040653,
  -954514959,
  -1897236843,
  -2138342666,
  1041220428,
  1505901633,
  221510500,
  -936033577,
  -1496452609,
  -791830937,
  -51081755,
  22784,
  -3814835,
  -1342175749,
  -1316006771,
  224085220,
  2131050259,
  1505753577,
  -1861432834,
  -1067715328,
  -294387480,
  -1696771584,
  -908102672,
  983721471,
  -352279317,
  -1090461952,
  1452372303,
  2144009761,
  -1739481300,
  1082196187,
  -2059604440,
  -243376333,
  922797375,
  2087210924,
  -922708697,
  637556374,
  -186456816,
  454133293,
  -2019622684,
  -1764163681,
  -1720129664,
  13775839,
  -1006624935,
  -34078927,
  -218046737,
  -1804722601,
  -1631235748,
  -520039123,
  1878390574,
  2108556305,
  -3,
  -1792890194,
  1001235605,
  -772143205,
  -1600652918,
  -1562691509,
  -977526332,
  1415424033,
  1886389758,
  -351797392,
  -1327571381,
  1775597864,
  652268300,
  855335160,
  -907423975,
  -612186852,
  -1642726121,
  -725981529,
  -1023364444,
  4662995,
  132484406,
  1017540607,
  -1207923968,
  13703168,
  15711073,
  -1048663699,
  -1693875294,
  201718486,
  1989335,
  1038544335,
  881204217,
  1215758523,
  172874437,
  266921452,
  801608268,
  777156950,
  -1278109860,
  645312639,
  719426823,
  1576758035,
  -744505387,
  1202166709,
  -1199987694,
  -1312853634,
  -218971679,
  1823211554,
  327352373,
  1886187311,
  2099413491,
  1060860067,
  1144966148,
  -1082820507,
  -853185225,
  379455939,
  -6829591,
  1432966195,
  2132499200,
  -1957035853,
  -311838767,
  -1952687617,
  315621512,
  617158747,
  -769718638,
  2015884009,
  106739639,
  2044117548,
  1868965266,
  696349986,
  -105119226,
  1592703,
  -602928161,
  -826579200,
  809409864,
  -316449233,
  1150681281,
  690846063,
  179931607,
  1951673182,
  438355461,
  -950672910,
  -465615904,
  1343987212,
  113131229,
  -1856973081,
  554955267,
  1594060727,
  1169168955,
  1829113472,
  2147418283,
  1299694929,
  1151997226,
  -1364758721,
  2025830483,
  1551973816,
  626934834,
  -1151401985,
  -229254850,
  -1442473127,
  1298295105,
  -612543217,
  -237582457,
  -204945398,
  -474993738,
  264597181,
  841113527,
  2041996800,
  8314163,
  -252166798,
  -2044937341,
  -1971394408,
  -2114581262,
  1643175691,
  -993464584,
  594221648,
  1841775214,
  2062677918,
  299762835,
  -960394483,
  -2089517365,
  132241223,
  -1310785400,
  -986644328,
  -410109215,
  501886490,
  1725643343,
  -1901596679,
  1869026659,
  2122080448,
  -653611083,
  -219832598,
  681477,
  2089025611,
  -1002866412,
  222821595,
  136584411,
  -984823049,
  1336679847,
  1074120980,
  952508491,
  -3534,
  1493368831,
  -58822573,
  -1072522780,
  1112869179,
  -44963022,
  -461616423,
  443599724,
  -1114916011,
  -1726011852,
  -1187184757,
  -222346962,
  -378172426,
  -470632562,
  -340799206,
  1233904271,
  -1708196293,
  -187801208,
  1005124638,
  1825895802,
  1269885670,
  363297231,
  2137631645,
  -306986773,
  -512758545,
  -360617293,
  -27531079,
  -1314219030,
  -1100989873,
  707184588,
  -336491421,
  -1593262022,
  299895837,
  -710917430,
  100490243,
  1174007809,
  592853344,
  1516863073,
  64254,
  -1137038422
}; // weak


//----- (0041F860) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>)
{
  int *v4; // esi
  int *v5; // edi
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  int i; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  unsigned int v16; // eax
  bool v17; // zf
  int v18; // ebx
  int v19; // ebx
  int v20; // ett
  unsigned int v21; // eax
  bool v22; // cf
  int v23; // ebx
  int v24; // ett
  unsigned int v25; // eax
  unsigned int v26; // eax
  int v27; // eax
  bool v28; // cf
  int v29; // ebx
  int v30; // ett
  BOOL v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  int v35; // ecx
  int v36; // ecx
  bool v37; // cf
  int v38; // ebx
  int v39; // ebx
  int v40; // ett
  bool v41; // zf
  int v42; // ebx
  int v43; // ett
  unsigned int v44; // ecx
  char v45; // al
  int v46; // eax
  bool v47; // cc
  int *v48; // esi
  int *v49; // edi
  int v50; // ecx
  char v51; // al
  int *v52; // eax
  int v53; // eax
  int v54; // eax
  char v55; // t0
  char v56; // bl
  void (__cdecl *v57)(int *, int, int, int *); // ebp
  int *v58; // edi
  int v59[4]; // [esp+10h] [ebp-90h] BYREF
  int *v60; // [esp+20h] [ebp-80h] BYREF
  _DWORD v61[8]; // [esp+24h] [ebp-7Ch] BYREF
  int v62; // [esp+44h] [ebp-5Ch] BYREF

  v61[4] = &v62;
  v61[2] = a3;
  v61[1] = a2;
  v61[0] = a1;
  v4 = dword_418000;
  v5 = &dword_418000[-23552];
  v60 = &dword_418000[-23552];
  while ( 1 )
  {
    v9 = *v4;
    v7 = (unsigned int)v4++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v4;
        v4 = (int *)((char *)v4 + 1);
        *(_BYTE *)v5 = v6;
        v5 = (int *)((char *)v5 + 1);
      }
      else
      {
        for ( i = 1; ; i = v21 + v22 + v21 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v16 = i + v12 + i;
          v7 = __CFADD__(v13, v13);
          v17 = 2 * v13 == 0;
          v18 = 2 * v13;
          if ( v7 )
          {
            if ( !v17 )
              break;
            v19 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v20 = v7 + v19;
            v7 = __CFADD__(v7, v19) | __CFADD__(v19, v20);
            v18 = v19 + v20;
            if ( v7 )
              break;
          }
          v21 = v16 - 1;
          v22 = __CFADD__(v18, v18);
          v8 = 2 * v18;
          if ( !v8 )
          {
            v23 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v24 = v7 + v23;
            v22 = __CFADD__(v7, v23) | __CFADD__(v23, v24);
            v8 = v23 + v24;
          }
        }
        v7 = v16 < 3;
        v25 = v16 - 3;
        if ( v7 )
        {
          v28 = __CFADD__(v18, v18);
          v18 *= 2;
          if ( !v18 )
          {
            v29 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v30 = v7 + v29;
            v28 = __CFADD__(v7, v29) | __CFADD__(v29, v30);
            v18 = v29 + v30;
          }
        }
        else
        {
          v26 = v25 << 8;
          LOBYTE(v26) = *(_BYTE *)v4;
          v4 = (int *)((char *)v4 + 1);
          v27 = ~v26;
          if ( !v27 )
          {
            v48 = v60;
            v49 = v60;
            v50 = 5;
            while ( 1 )
            {
              v51 = *(_BYTE *)v49;
              v49 = (int *)((char *)v49 + 1);
              LOBYTE(v52) = v51 + 24;
              while ( (unsigned __int8)v52 <= 1u && !*(_BYTE *)v49 )
              {
                v53 = *v49;
                LOWORD(v53) = BYTE1(*v49);
                v54 = __ROL4__(v53, 16);
                v55 = v54;
                LOBYTE(v54) = BYTE1(v54);
                BYTE1(v54) = v55;
                v56 = *((_BYTE *)v49 + 4) + 24;
                v52 = (int *)((char *)v48 + v54 - (_DWORD)v49);
                *v49 = (int)v52;
                v49 = (int *)((char *)v49 + 5);
                LOBYTE(v52) = v56;
                if ( !--v50 )
                {
                  v57 = (void (__cdecl *)(int *, int, int, int *))v48[34581];
                  v58 = v48 - 1024;
                  v60 = v52;
                  ((void (__fastcall *)(_DWORD, char *, int *, int, int, int **))v57)(0, a2, v48 - 1024, 4096, 4, &v60);
                  *((_BYTE *)v58 + 799) &= 0x7Fu;
                  *((_BYTE *)v58 + 839) &= 0x7Fu;
                  v57(v48 - 1024, 4096, v59[0], v59);
                  do
                    v60 = 0;
                  while ( &v60 != &v61[-32] );
                  JUMPOUT(0x4011DE);
                }
              }
            }
          }
          v28 = v27 & 1;
          a4 = v27 >> 1;
        }
        v31 = v28;
        v32 = __CFADD__(v18, v18);
        v8 = 2 * v18;
        if ( !v8 )
        {
          v33 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v34 = v7 + v33;
          v32 = __CFADD__(v7, v33) | __CFADD__(v33, v34);
          v8 = v33 + v34;
        }
        v35 = v31 + v32 + v31;
        if ( !v35 )
        {
          v36 = 1;
          while ( 1 )
          {
            v37 = __CFADD__(v8, v8);
            v38 = 2 * v8;
            if ( !v38 )
            {
              v39 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v40 = v7 + v39;
              v37 = __CFADD__(v7, v39) | __CFADD__(v39, v40);
              v38 = v39 + v40;
            }
            v36 += v37 + v36;
            v7 = __CFADD__(v38, v38);
            v41 = 2 * v38 == 0;
            v8 = 2 * v38;
            if ( v7 )
            {
              if ( !v41 )
                break;
              v42 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v43 = v7 + v42;
              v7 = __CFADD__(v7, v42) | __CFADD__(v42, v43);
              v8 = v42 + v43;
              if ( v7 )
                break;
            }
          }
          v35 = v36 + 2;
        }
        v44 = (a4 < 0xFFFFFB00) + v35 + 1;
        a2 = (char *)v5 + a4;
        if ( a4 <= 0xFFFFFFFC )
        {
          do
          {
            v46 = *(_DWORD *)a2;
            a2 += 4;
            *v5++ = v46;
            v47 = v44 <= 4;
            v44 -= 4;
          }
          while ( !v47 );
          v5 = (int *)((char *)v5 + v44);
        }
        else
        {
          do
          {
            v45 = *a2++;
            *(_BYTE *)v5 = v45;
            v5 = (int *)((char *)v5 + 1);
            --v44;
          }
          while ( v44 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// 41F9AF: positive sp value 5C has been found
// 41F9AF: control flows out of bounds to 4011DE
// 418000: using guessed type int dword_418000[512];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
