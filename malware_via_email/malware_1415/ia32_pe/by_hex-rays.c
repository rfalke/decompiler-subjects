/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

void sub_404400();
// int __usercall sub_404449@<eax>(__int16 a1@<ax>, void *_ECX@<ecx>, int _EBX@<ebx>);
// void __usercall sub_4044FD(int a1@<edx>, int a2@<ecx>, char a3@<bl>, int a4@<esi>);
void __thiscall sub_40452E(void *this);
void sub_4045A2();
_DWORD __far sub_404710(); // weak
// char __usercall sub_404738@<al>(int _EAX@<eax>, __int16 a2@<dx>, int a3@<ecx>, int a4@<ebx>, int a5@<edi>, int a6@<esi>);
// char __usercall sub_40475E@<al>(char a1@<al>, __int16 a2@<dx>, int a3@<ecx>, int a4@<ebx>, int a5@<edi>, __int16 a6@<si>);
_DWORD sub_4047DA(); // weak
// int __userpurge sub_4049C4@<eax>(int a1@<eax>, int a2@<edx>, int a3@<ebx>, int a4@<edi>, int a5@<esi>, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63);
// void __usercall sub_404AD3(__int16 a1@<ax>, int _EDX@<edx>, int _ECX@<ecx>, int _EBX@<ebx>, int a5@<ebp>, _BYTE *a6@<edi>, int a7@<esi>);
// void __usercall sub_404B5C(int a1@<edx>, int a2@<ecx>, int a3@<edi>, __int16 a4@<ax>, int a5@<ebx>, __int16 a6@<si>);
// void __usercall start(__int16 _AX@<ax>, int a2@<edx>, char a3@<cl>, int _EBX@<ebx>, int a5@<ebp>, int a6@<edi>, unsigned __int16 a7@<si>);
// void __usercall sub_405D9E(char a1@<cl>, int _EBX@<ebx>);
void sub_405E6D();
void __fastcall __noreturn sub_405EE8(int a1);
void sub_40603A();
// char __usercall sub_4060B0@<al>(int a1@<eax>, int _EDX@<edx>, char _CL@<cl>, int a4@<ebx>);
// void __userpurge __noreturn sub_40631D(int a1@<ecx>, char _BL@<bl>, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63);
// void __usercall sub_4063B8(int _EAX@<eax>, char a2@<bl>, int a3@<esi>);
// void __usercall sub_4063DC(int a1@<eax>, __int16 _DX@<dx>, __int16 a3@<cx>, int _EBX@<ebx>, __int16 a5@<si>, double a6@<st0>);
void __noreturn sub_4064B6(); // weak

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_404490; // weak
_UNKNOWN loc_404668; // weak
_UNKNOWN loc_40474A; // weak
_UNKNOWN loc_40491A; // weak
_UNKNOWN loc_404937; // weak
_UNKNOWN loc_404B29; // weak
_UNKNOWN loc_405D67; // weak
_UNKNOWN loc_40621F; // weak
_UNKNOWN loc_406273; // weak
_UNKNOWN loc_406476; // weak


//----- (00404400) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_404400()
{
  JUMPOUT(0x404848);
}
// 404404: positive sp value 4 has been found
// 40440D: control flows out of bounds to 404848

//----- (00404449) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_404449@<eax>(__int16 a1@<ax>, void *_ECX@<ecx>, int _EBX@<ebx>)
{
  __asm { rcr     cl, cl }
  LOBYTE(_EBX) = __ROR1__(_EBX, (char)_ECX);
  LOWORD(_ECX) = (_WORD)_ECX - a1;
  sub_40452E(_ECX);
  __asm { rcr     byte ptr [ebx-7F3E2DF6h], 0E1h }
  return MEMORY[0x8178C7F6];
}
// 40444D: positive sp value 4 has been found

//----- (004044FD) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4044FD(int a1@<edx>, int a2@<ecx>, char a3@<bl>, int a4@<esi>)
{
  LOWORD(a4) = a4 + 1;
  _EDX = a1 & 0x5BC55908;
  LOWORD(a2) = a2 - a4;
  BYTE1(_EDX) = 0;
  __asm { rcr     dl, 13h }
  LOBYTE(a2) = (unsigned __int8)a2 >> a2;
  LOBYTE(_EDX) = __CFSHL__(a3, a2) + _EDX;
  ((void (__fastcall *)(int, int))((char *)&loc_404B29 + 1))(a2 << 25, _EDX);
  *(_DWORD *)(a4 - 494818155) >>= 25;
  __asm { insb }
  JUMPOUT(0x404A7A);
}
// 404501: positive sp value 4 has been found
// 404A78: control flows out of bounds to 404A7A

//----- (0040452E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __thiscall sub_40452E(void *this)
{
  if ( this == (void *)1005798905 )
    JUMPOUT(0x404545);
  if ( this == (void *)-1968535785 )
    JUMPOUT(0x404809);
  JUMPOUT(0x404461);
}
// 404532: positive sp value 4 has been found
// 404544: control flows out of bounds to 404545
// 404A49: control flows out of bounds to 404809
// 404A35: control flows out of bounds to 404461

//----- (004045A2) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4045A2()
{
  JUMPOUT(0x4045AA);
}
// 4045A6: positive sp value 4 has been found
// 4045A8: control flows out of bounds to 4045AA

//----- (00404710) --------------------------------------------------------
#error "404580: cannot convert to microcode (funcsize=16)"

//----- (00404738) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
char __usercall sub_404738@<al>(int _EAX@<eax>, __int16 a2@<dx>, int a3@<ecx>, int a4@<ebx>, int a5@<edi>, int a6@<esi>)
{
  int v6; // esi
  char v8; // al
  char v9; // cl

  LOBYTE(a2) = _EAX | a2;
  v6 = __ROR4__(a6, 6);
  LOBYTE(a4) = a4 + 1;
  if ( v6 == -445711262 )
  {
    __asm { aas }
    LOBYTE(a3) = a3 - 1;
    BYTE1(a4) -= 39;
    ((void (__fastcall *)(int, int))sub_4047DA)(a3, _EAX >> 31);
    *(_BYTE *)(a4 + 36) &= a4;
    JUMPOUT(0x4045B7);
  }
  HIBYTE(a2) += __CFADD__(BYTE1(a4) - (__CFSHL__(BYTE1(_EAX), 8) - 49), (_BYTE)a4);
  v8 = ((int (__fastcall *)(int, _WORD))((char *)&loc_40491A + 2))(a5 | a3, a5 & a2);
  return (unsigned __int8)(v8 & 4) >> v9;
}
// 40447E: positive sp value 8 has been found
// 4045B4: control flows out of bounds to 4045B7
// 4045EA: control flows out of bounds to 4045F9
// 4045F6: control flows out of bounds to 40477B
// 4045EA: conditional instruction was optimized away because of 'esi.4==E56EFC62'
// 4045E8: conditional instruction was optimized away because of 'esi.4==E56EFC62'
// 404BEB: variable 'v9' is possibly undefined
// 4047DA: using guessed type _DWORD sub_4047DA();

//----- (0040475E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
char __usercall sub_40475E@<al>(char a1@<al>, __int16 a2@<dx>, int a3@<ecx>, int a4@<ebx>, int a5@<edi>, __int16 a6@<si>)
{
  __int16 v6; // si
  char result; // al
  int v8; // edi
  __int16 v9; // si
  char v10; // pf
  char v11; // sf
  bool v12; // cf

  v6 = 2 * a6;
  BYTE1(a3) = (BYTE1(a3) | 6) << a3;
  if ( a3 != -26141595 )
    JUMPOUT(0x404879);
  LOBYTE(a2) = -25;
  result = a1 + 67;
  v8 = a4 ^ __ROR4__(a5, 101);
  v9 = v6 | 0x164F;
  if ( v8 == 1921197559 )
  {
    MEMORY[0xD710E3F1] |= 0x65u;
    JUMPOUT(0x40472A);
  }
  BYTE1(a3) = __ROR1__(28, 101);
  LOWORD(v8) = a2 ^ v8;
  if ( v8 == -1433049276 )
  {
    LOBYTE(a3) = *(_BYTE *)(a4 - 105);
    result = ((int (__thiscall *)(int))sub_404710)(a3);
  }
  else
  {
    v12 = HIBYTE(a2) < 0x8Cu;
    HIBYTE(a2) += 116;
    LOWORD(a3) = ~(_WORD)a3;
    _DX = a2 - (v12 + v9 + 1);
    if ( a4 != -271893124 )
    {
      __asm { rcl     dh, 14h }
      ((void (__fastcall *)(int, __int16))loc_404668)(a3, _DX);
      if ( v11 )
      {
        if ( v10 )
          JUMPOUT(0x404C18);
        JUMPOUT(0x404943);
      }
      JUMPOUT(0x404867);
    }
  }
  return result;
}
// 404762: positive sp value 4 has been found
// 4047BA: control flows out of bounds to 4047C1
// 4048E2: control flows out of bounds to 404C18
// 404770: control flows out of bounds to 404879
// 4047B1: control flows out of bounds to 40472A
// 4048D7: control flows out of bounds to 404867
// 4048DB: control flows out of bounds to 404943
// 4048D7: variable 'v11' is possibly undefined
// 4048DB: variable 'v10' is possibly undefined
// 404710: using guessed type _DWORD __far sub_404710();

//----- (004047DA) --------------------------------------------------------
#error "404C71: cannot convert to microcode (funcsize=27)"

//----- (004049C4) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
int __userpurge sub_4049C4@<eax>(int a1@<eax>, int a2@<edx>, int a3@<ebx>, int a4@<edi>, int a5@<esi>, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63)
{
  int v64; // edx
  int v65; // edx
  int v66; // ecx
  int v68; // ecx
  int v69; // edx
  char v70; // cl
  unsigned int v71; // edx
  int v72; // ecx
  __int16 v73; // cx
  int *v75; // eax
  int v76; // edx
  int v78; // ecx
  unsigned __int32 v79; // eax
  void *retaddr[2]; // [esp+0h] [ebp+0h]

  v73 = a5;
  _ESI = a2 + a5;
  LOBYTE(v75) = sub_404738(a1, a2, v73, a3, a4, _ESI);
  __asm
  {
    outsd
    rcl     dword ptr [esi], cl
    into
  }
  v78 = _ECX - v76;
  LOWORD(v78) = v76 ^ v78;
  BYTE1(a3) += v76;
  BYTE1(v78) ^= v78;
  if ( _ESI == -766661978 )
  {
    __outdword(6u, (unsigned int)v75);
    v79 = __indword(0x8Du);
    JUMPOUT(0x4049F4);
  }
  v64 = v76 - (_DWORD)v75;
  LOBYTE(v78) = v78 & 0x7F;
  BYTE1(a3) -= 106;
  if ( a3 != -1391419847 )
  {
    if ( v64 == -233174089 )
      JUMPOUT(0x404BB6);
    JUMPOUT(0x404B95);
  }
  *v75 >>= 11;
  LOBYTE(a3) = -75;
  v65 = v64 - a3;
  v66 = v78 & 0x51F88E96;
  if ( _ESI != -1409136722 )
  {
    LOWORD(v65) = _ESI + v65;
    v68 = v66 << 29;
    LOBYTE(v65) = v68;
    ((void (__fastcall *)(int, int))loc_404937)(v68, v65);
    __asm { into }
    v71 = (unsigned int)(v69 + 1) >> 7;
    --BYTE1(v72);
    SBYTE1(v71) >>= 7;
    v70 >>= 5;
    LOBYTE(v71) = v70 ^ v71;
    LOBYTE(v72) = v70 << v70;
    ((void (__fastcall *)(int, unsigned int))loc_404490)(v72, v71);
    JUMPOUT(0x40455F);
  }
  return MK_FP(retaddr[0], retaddr[0])(v66, v65);
}
// 404416: positive sp value 8 has been found
// 4049F2: control flows out of bounds to 4049F4
// 40455A: control flows out of bounds to 40455F
// 404BB4: control flows out of bounds to 404BB6
// 404BB2: control flows out of bounds to 404B95
// 404444: bad sp value at call
// 4049D9: variable '_ECX' is possibly undefined
// 4049D9: variable 'v76' is possibly undefined
// 4049F0: variable 'v75' is possibly undefined
// 4044E9: variable 'v69' is possibly undefined
// 4048BE: variable 'v72' is possibly undefined
// 40454B: variable 'v70' is possibly undefined
// 4049C4: too many input arguments, some ignored

//----- (00404AD3) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_404AD3(__int16 a1@<ax>, int _EDX@<edx>, int _ECX@<ecx>, int _EBX@<ebx>, int a5@<ebp>, _BYTE *a6@<edi>, int a7@<esi>)
{
  char v9; // al
  bool v11; // sf
  _BYTE *v12; // edi

  v9 = BYTE1(_EBX) + __CFSHL__(a1, 26) + __ROL1__(a1, 26);
  _ESI = ~a7;
  if ( _EBX == 740569243 )
  {
    v11 = (char)(*a6 - v9) < 0;
    v12 = a6 + 1;
    if ( v11 )
    {
      HIWORD(_EDX) ^= 0x2C24u;
      __asm { icebp }
      LOBYTE(_EDX) = v9 - 1;
      LOBYTE(_ECX) = _ECX + 3 - (((unsigned __int8)_ECX < 0xFDu) - 92);
      if ( v12 == (_BYTE *)55318048 )
      {
        *(_DWORD *)(_ESI - 117) <<= 19;
        __asm { rcl     dl, 18h }
        if ( _ESI == -1076177660 )
        {
          __asm { into }
          *(_BYTE *)(a5 + 33825892) = __ROR1__(*(_BYTE *)(a5 + 33825892), 1);
          JUMPOUT(0x404B2F);
        }
        JUMPOUT(0x4045FF);
      }
      __asm { rcl     si, cl }
      BYTE1(_EDX) = HIBYTE(a1) >> _ECX;
      __asm { rcl     bh, cl }
      ((void (__fastcall *)(int, int))loc_40474A)(_ECX << 12, _EDX);
      JUMPOUT(0x4049BF);
    }
    JUMPOUT(0x404AD5);
  }
  JUMPOUT(0x40463E);
}
// 4049AA: positive sp value 4 has been found
// 404B29: control flows out of bounds to 404B2F
// 4049BA: control flows out of bounds to 4049BF
// 404AE4: control flows out of bounds to 40463E
// 404AEA: control flows out of bounds to 404B5D
// 404AED: control flows out of bounds to 404AD5
// 404B1F: control flows out of bounds to 4045FF

//----- (00404B5C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_404B5C(int a1@<edx>, int a2@<ecx>, int a3@<edi>, __int16 a4@<ax>, int a5@<ebx>, __int16 a6@<si>)
{
  int v6; // edx
  int retaddr; // [esp+0h] [ebp+0h]

  v6 = a1 >> 5;
  if ( a3 != -2080683872 )
    JUMPOUT(0x4048DC);
  start(a4, v6, a2, a5, retaddr, -2080683872, a6 + 1);
}
// 404586: positive sp value 4 has been found
// 404596: control flows out of bounds to 4048DC
// 404B5C: could not find valid save-restore pair for ebp

//----- (00404B72) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(__int16 _AX@<ax>, int a2@<edx>, char a3@<cl>, int _EBX@<ebx>, int a5@<ebp>, int a6@<edi>, unsigned __int16 a7@<si>)
{
  int v7; // edx
  __int16 v11; // si
  int v12; // [esp-E6B1h] [ebp-E6B1h]
  int v13; // [esp-E6ADh] [ebp-E6ADh]
  int v14; // [esp-E6A9h] [ebp-E6A9h]
  int v15; // [esp-E6A5h] [ebp-E6A5h]
  int v16; // [esp-E6A1h] [ebp-E6A1h]
  int v17; // [esp-E69Dh] [ebp-E69Dh]
  int v18; // [esp-E699h] [ebp-E699h]
  int v19; // [esp-E695h] [ebp-E695h]
  int v20; // [esp-E691h] [ebp-E691h]
  int v21; // [esp-E68Dh] [ebp-E68Dh]
  int v22; // [esp-E689h] [ebp-E689h]
  int v23; // [esp-E685h] [ebp-E685h]
  int v24; // [esp-E681h] [ebp-E681h]
  int v25; // [esp-E67Dh] [ebp-E67Dh]
  int v26; // [esp-E679h] [ebp-E679h]
  int v27; // [esp-E675h] [ebp-E675h]
  int v28; // [esp-E671h] [ebp-E671h]
  int v29; // [esp-E66Dh] [ebp-E66Dh]
  int v30; // [esp-E669h] [ebp-E669h]
  int v31; // [esp-E665h] [ebp-E665h]
  int v32; // [esp-E661h] [ebp-E661h]
  int v33; // [esp-E65Dh] [ebp-E65Dh]
  int v34; // [esp-E659h] [ebp-E659h]
  int v35; // [esp-E655h] [ebp-E655h]
  int v36; // [esp-E651h] [ebp-E651h]
  int v37; // [esp-E64Dh] [ebp-E64Dh]
  int v38; // [esp-E649h] [ebp-E649h]
  int v39; // [esp-E645h] [ebp-E645h]
  int v40; // [esp-E641h] [ebp-E641h]
  int v41; // [esp-E63Dh] [ebp-E63Dh]
  int v42; // [esp-E639h] [ebp-E639h]
  int v43; // [esp-E635h] [ebp-E635h]
  int v44; // [esp-E631h] [ebp-E631h]
  int v45; // [esp-E62Dh] [ebp-E62Dh]
  int v46; // [esp-E629h] [ebp-E629h]
  int v47; // [esp-E625h] [ebp-E625h]
  int v48; // [esp-E621h] [ebp-E621h]
  int v49; // [esp-E61Dh] [ebp-E61Dh]
  int v50; // [esp-E619h] [ebp-E619h]
  int v51; // [esp-E615h] [ebp-E615h]
  int v52; // [esp-E611h] [ebp-E611h]
  int v53; // [esp-E60Dh] [ebp-E60Dh]
  int v54; // [esp-E609h] [ebp-E609h]
  int v55; // [esp-E605h] [ebp-E605h]
  int v56; // [esp-E601h] [ebp-E601h]
  int v57; // [esp-E5FDh] [ebp-E5FDh]
  int v58; // [esp-E5F9h] [ebp-E5F9h]
  int v59; // [esp-E5F5h] [ebp-E5F5h]
  int v60; // [esp-E5F1h] [ebp-E5F1h]
  int v61; // [esp-E5EDh] [ebp-E5EDh]
  int v62; // [esp-E5E9h] [ebp-E5E9h]
  int v63; // [esp-E5E5h] [ebp-E5E5h]
  int v64; // [esp-E5E1h] [ebp-E5E1h]
  int v65; // [esp-E5DDh] [ebp-E5DDh]
  int v66; // [esp-E5D9h] [ebp-E5D9h]
  int v67; // [esp-E5D5h] [ebp-E5D5h]
  int v68; // [esp-E5D1h] [ebp-E5D1h]
  int v69; // [esp-E5CDh] [ebp-E5CDh]

  _CL = BYTE1(a2) & (a3 - 52);
  HIBYTE(_AX) += 24;
  __asm
  {
    rcl     al, cl
    rcr     ebx, cl
  }
  v11 = a7 >> _CL;
  if ( a2 == 1589504077 )
  {
    *(_BYTE *)(a5 - 705236452) -= 77;
    ((void (*)(void))sub_404710)();
    JUMPOUT(0x404A96);
  }
  BYTE1(a2) = __ROR1__(BYTE1(a2), _CL);
  sub_4049C4(
    _AX,
    a2,
    _EBX,
    a6,
    v11,
    v12,
    v13,
    v14,
    v15,
    v16,
    v17,
    v18,
    v19,
    v20,
    v21,
    v22,
    v23,
    v24,
    v25,
    v26,
    v27,
    v28,
    v29,
    v30,
    v31,
    v32,
    v33,
    v34,
    v35,
    v36,
    v37,
    v38,
    v39,
    v40,
    v41,
    v42,
    v43,
    v44,
    v45,
    v46,
    v47,
    v48,
    v49,
    v50,
    v51,
    v52,
    v53,
    v54,
    v55,
    v56,
    v57,
    v58,
    v59,
    v60,
    v61,
    v62,
    v63,
    v64,
    v65,
    v66,
    v67,
    v68,
    v69);
  _disable();
  *(_DWORD *)(_EBX - 111) += v7;
  sub_404400();
}
// 4043FA: positive sp value E6B1 has been found
// 404A91: control flows out of bounds to 404A96
// 4043F5: variable 'v12' is possibly undefined
// 4043F5: variable 'v13' is possibly undefined
// 4043F5: variable 'v14' is possibly undefined
// 4043F5: variable 'v15' is possibly undefined
// 4043F5: variable 'v16' is possibly undefined
// 4043F5: variable 'v17' is possibly undefined
// 4043F5: variable 'v18' is possibly undefined
// 4043F5: variable 'v19' is possibly undefined
// 4043F5: variable 'v20' is possibly undefined
// 4043F5: variable 'v21' is possibly undefined
// 4043F5: variable 'v22' is possibly undefined
// 4043F5: variable 'v23' is possibly undefined
// 4043F5: variable 'v24' is possibly undefined
// 4043F5: variable 'v25' is possibly undefined
// 4043F5: variable 'v26' is possibly undefined
// 4043F5: variable 'v27' is possibly undefined
// 4043F5: variable 'v28' is possibly undefined
// 4043F5: variable 'v29' is possibly undefined
// 4043F5: variable 'v30' is possibly undefined
// 4043F5: variable 'v31' is possibly undefined
// 4043F5: variable 'v32' is possibly undefined
// 4043F5: variable 'v33' is possibly undefined
// 4043F5: variable 'v34' is possibly undefined
// 4043F5: variable 'v35' is possibly undefined
// 4043F5: variable 'v36' is possibly undefined
// 4043F5: variable 'v37' is possibly undefined
// 4043F5: variable 'v38' is possibly undefined
// 4043F5: variable 'v39' is possibly undefined
// 4043F5: variable 'v40' is possibly undefined
// 4043F5: variable 'v41' is possibly undefined
// 4043F5: variable 'v42' is possibly undefined
// 4043F5: variable 'v43' is possibly undefined
// 4043F5: variable 'v44' is possibly undefined
// 4043F5: variable 'v45' is possibly undefined
// 4043F5: variable 'v46' is possibly undefined
// 4043F5: variable 'v47' is possibly undefined
// 4043F5: variable 'v48' is possibly undefined
// 4043F5: variable 'v49' is possibly undefined
// 4043F5: variable 'v50' is possibly undefined
// 4043F5: variable 'v51' is possibly undefined
// 4043F5: variable 'v52' is possibly undefined
// 4043F5: variable 'v53' is possibly undefined
// 4043F5: variable 'v54' is possibly undefined
// 4043F5: variable 'v55' is possibly undefined
// 4043F5: variable 'v56' is possibly undefined
// 4043F5: variable 'v57' is possibly undefined
// 4043F5: variable 'v58' is possibly undefined
// 4043F5: variable 'v59' is possibly undefined
// 4043F5: variable 'v60' is possibly undefined
// 4043F5: variable 'v61' is possibly undefined
// 4043F5: variable 'v62' is possibly undefined
// 4043F5: variable 'v63' is possibly undefined
// 4043F5: variable 'v64' is possibly undefined
// 4043F5: variable 'v65' is possibly undefined
// 4043F5: variable 'v66' is possibly undefined
// 4043F5: variable 'v67' is possibly undefined
// 4043F5: variable 'v68' is possibly undefined
// 4043F5: variable 'v69' is possibly undefined
// 4043FB: variable 'v7' is possibly undefined
// 404710: using guessed type _DWORD __far sub_404710();

//----- (00405D9E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_405D9E(char a1@<cl>, int _EBX@<ebx>)
{
  unsigned __int16 v2; // dx

  BYTE1(_EBX) >>= a1;
  ((void (*)(void))loc_40621F)();
  _AL = __inbyte(v2);
  __asm { xlat }
  ((void (*)(void))loc_406273)();
  JUMPOUT(0x405DCE);
}
// 405DC7: positive sp value 8 has been found
// 405DC7: control flows out of bounds to 405DCE
// 405DAB: variable 'v2' is possibly undefined

//----- (00405E6D) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_405E6D()
{
  __asm { rcr     dx, cl }
  JUMPOUT(0x405D87);
}
// 405E71: positive sp value 4 has been found
// 405FAA: control flows out of bounds to 405D87

//----- (00405EE8) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __fastcall __noreturn sub_405EE8(int a1)
{
  LOBYTE(a1) = ~(_BYTE)a1;
  ((void (__thiscall *)(int))loc_405D67)(1110724768 - a1);
  __halt();
}
// 405EEC: positive sp value 4 has been found

//----- (0040603A) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_40603A()
{
  JUMPOUT(0x405D4D);
}
// 40603E: positive sp value 4 has been found
// 40614E: control flows out of bounds to 405D4D

//----- (004060B0) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
char __usercall sub_4060B0@<al>(int a1@<eax>, int _EDX@<edx>, char _CL@<cl>, int a4@<ebx>)
{
  unsigned __int16 v4; // dx
  int v5; // ebx
  unsigned __int8 v6; // al
  char result; // al
  bool v9; // cf
  int v11; // ebx
  void *retaddr[2]; // [esp+0h] [ebp+0h]

  __asm { rcl     dx, cl }
  v9 = __CFADD__(_EDX, -1213546891);
  _EDX = _EDX - 1213546891;
  __asm { rcl     edx, cl }
  BYTE1(a4) -= v9 + a1;
  v5 = a4 << _CL;
  HIBYTE(v4) = BYTE1(_EDX) ^ 0xD;
  LOBYTE(v4) = BYTE1(v5) + (BYTE1(v5) ^ (32 * _EDX));
  LOBYTE(v5) = -(char)(a1 | v5) << _CL;
  if ( a1 == 1280554972 )
  {
    v6 = __inbyte(v4);
    result = _CL - 67;
  }
  else
  {
    v11 = v5 & 0x3C74E7EC;
    --BYTE1(v11);
    sub_405D9E(_CL, v11);
    result = MK_FP(retaddr[0], retaddr[0])();
  }
  return result;
}
// 405C0E: positive sp value 4 has been found

//----- (0040631D) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge __noreturn sub_40631D(int a1@<ecx>, char _BL@<bl>, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63)
{
  __asm { rcr     bl, 11h }
  sub_405EE8(a1);
}
// 406321: positive sp value 4 has been found
// 40631D: too many input arguments, some ignored

//----- (004063B8) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4063B8(int _EAX@<eax>, char a2@<bl>, int a3@<esi>)
{
  LOBYTE(_EAX) = BYTE1(_EAX) + (a2 != 0) + _EAX;
  if ( a3 == 1499083135 )
  {
    __asm { aas }
    MEMORY[0x8DB66976] = _EAX;
    JUMPOUT(0x4062BF);
  }
  JUMPOUT(0x405D16);
}
// 4063BC: positive sp value 4 has been found
// 406480: control flows out of bounds to 4062BF
// 40646F: control flows out of bounds to 405D16

//----- (004063DC) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4063DC(int a1@<eax>, __int16 _DX@<dx>, __int16 a3@<cx>, int _EBX@<ebx>, __int16 a5@<si>, double a6@<st0>)
{
  double v9; // st7
  unsigned int v10; // eax
  int v11; // ecx
  char v12; // pf
  int v15; // ecx
  __int16 v17; // dx
  int v18; // ebx
  int v19; // edx

  LOBYTE(a1) = -82;
  HIBYTE(_DX) = (HIBYTE(_DX) ^ 0x27) & 0xAF;
  _CX = a5 | a3;
  LOBYTE(_EBX) = _EBX ^ 0x71;
  __asm { rcl     dx, cl }
  if ( _EBX == 470887849 )
    __asm { retf }
  v17 = _DX ^ 0x198E;
  LOBYTE(_CX) = _CX - v17;
  LOWORD(a1) = a1 - 1;
  _BX = a1 ^ _EBX;
  BYTE1(a1) = ~BYTE1(a1);
  __asm { rcl     bh, cl }
  LOBYTE(_EBX) = HIBYTE(_CX) | _BX;
  if ( a1 == -523021729 )
  {
    _DH = HIBYTE(v17) ^ 0x4D;
    __asm { rcr     dh, cl }
    BYTE1(_EBX) += _EBX;
    if ( _EBX == -405019576 )
      JUMPOUT(0x405C9F);
    LOBYTE(_EBX) = 122;
    v10 = ((int (*)(void))((char *)&loc_406476 + 4))();
    if ( !v12 )
    {
      __outdword(v19, v10);
      JUMPOUT(0x405E36);
    }
    LOBYTE(v10) = v10 + 27;
    v9 = a6 + *(float *)(v10 - 385197347);
    v18 = _EBX + 58271310;
    BYTE1(v19) &= 0xBu;
    LOBYTE(v19) = BYTE1(v10);
    _EDX = v19 & 0x3D45E538;
    LOWORD(_EDX) = -(__int16)_EDX;
    v15 = v18 + ((_WORD)_EDX != 0) + v11;
    if ( v15 == -1453883274 )
      sub_405EE8(-1453883274);
    _ECX = v15 + 558167096;
    __asm { rcl     edx, cl }
    ((void (__usercall *)(int@<ecx>, int@<edx>, double@<st0>))sub_4064B6)(_ECX, _EDX ^ 0x4C305109, v9);
  }
  JUMPOUT(0x40642C);
}
// 405C99: positive sp value 8 has been found
// 405C9E: control flows out of bounds to 405C9F
// 405E35: control flows out of bounds to 405E36
// 405C6F: control flows out of bounds to 40642C
// 4062F5: variable 'v19' is possibly undefined
// 405E32: variable 'v12' is possibly undefined
// 405ED7: variable 'v11' is possibly undefined
// 4064B6: using guessed type void __noreturn sub_4064B6();

//----- (004064B6) --------------------------------------------------------
#error "4064C6: call analysis failed (funcsize=5)"

// nfuncs=22 queued=22 decompiled=22 lumina nreq=0 worse=0 better=0
#error "There were 3 decompilation failure(s) on 22 function(s)"
