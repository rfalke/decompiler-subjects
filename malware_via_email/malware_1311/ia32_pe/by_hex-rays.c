/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int@<eax>, int@<edx>, int@<ecx>, unsigned int@<ebp>);

//-------------------------------------------------------------------------
// Data declarations

int dword_40F000[512] =
{
  -590113,
  4198404,
  1322320640,
  910739073,
  115953416,
  263405568,
  1304658379,
  -275286017,
  222847812,
  139124429,
  1308684087,
  1458274641,
  2119001702,
  225930967,
  570472511,
  942754869,
  1668167505,
  -3322286,
  -1524432906,
  1322814208,
  377520267,
  -2125511168,
  1852065002,
  -645988352,
  15466389,
  1207143242,
  1365591739,
  -1948307142,
  1357808121,
  -1133057,
  1247236929,
  912846721,
  390660205,
  1947553089,
  1342206514,
  -302612769,
  727081406,
  1195567489,
  -9770703,
  64429251,
  -1376285712,
  -338563139,
  1456160127,
  827604143,
  -612748694,
  989708215,
  1221985120,
  -1074330845,
  390222670,
  1165249728,
  -604251856,
  -913080321,
  -1065137408,
  1272351548,
  -1125395709,
  -2126325216,
  1447376071,
  497938394,
  203037496,
  1195915075,
  -41921931,
  -419448850,
  1191211264,
  1338213891,
  1325420369,
  1249949891,
  -1291964827,
  882228987,
  1719103542,
  1767044804,
  851050635,
  -1216909463,
  -234430543,
  1463184830,
  1360069092,
  1992733772,
  -1209010073,
  1094826799,
  1421937240,
  -645633101,
  1689845880,
  -1074347438,
  1237739116,
  1868065844,
  1955317899,
  1321733668,
  -277473417,
  588674934,
  -1152746439,
  1895798857,
  -1308756472,
  -1144291217,
  1101231446,
  -1880143325,
  66352,
  5242879,
  1671256632,
  1443504896,
  297298133,
  1902969359,
  -15020153,
  -1962934273,
  -487721792,
  884429312,
  -457785706,
  1459487186,
  116733947,
  -1927244871,
  2081380219,
  -1570780,
  1912602614,
  1331584786,
  1173164384,
  1494815868,
  -387203610,
  1179501955,
  1728198736,
  -16317438,
  268435455,
  270335751,
  21553592,
  -518332352,
  469873418,
  1096198,
  28581646,
  -1199758899,
  -16102297,
  -1862270977,
  1768444944,
  1881147251,
  862416754,
  667381089,
  -747321483,
  -3709598,
  102002191,
  -3676316,
  -738197505,
  869296471,
  169610546,
  19478308,
  1162896215,
  21760014,
  1578696966,
  341322306,
  -7387424,
  134213119,
  33622913,
  453641753,
  880614482,
  -1844442344,
  509878281,
  691604565,
  -1214041084,
  150993967,
  25176376,
  889732941,
  -2113362368,
  -612288972,
  1883525410,
  -207,
  -1358870785,
  1146045189,
  -762499771,
  -982971867,
  -351272695,
  1916879968,
  -1995592620,
  236066308,
  -76,
  -544724737,
  1399931584,
  1074912679,
  -126409526,
  1776299712,
  1416913252,
  -196031960,
  1344939237,
  -1999103,
  1701981951,
  476278636,
  643272288,
  475056168,
  694391411,
  675431653,
  -15647564,
  -2135461889,
  136992617,
  -5504646,
  1346118932,
  -1064625672,
  1478253584,
  -11253874,
  2147468031,
  592183694,
  -901476280,
  -2091137816,
  -919534101,
  1899586686,
  209099056,
  469761798,
  1860443391,
  2139027464,
  1325510944,
  -1980533480,
  -1023024981,
  78875974,
  -1569526,
  234881023,
  537398018,
  -2001993710,
  -1946711614,
  1233719522,
  -1427098895,
  1794772706,
  806185024,
  -12265956,
  -1996488705,
  -1818672647,
  -1989964276,
  218696835,
  -1601341247,
  2095595572,
  1267433770,
  2123367700,
  -1079589239,
  905969652,
  -1488549080,
  -1271658290,
  -1064992458,
  423760757,
  -1189858800,
  -1420754672,
  -956485825,
  -984315573,
  1157683710,
  -460843126,
  1105348362,
  -121438368,
  936941451,
  877564762,
  -65535,
  -213057537,
  -1728496644,
  1091626494,
  91456828,
  1543524740,
  1680771669,
  669554825,
  2141602967,
  -3736,
  1053056603,
  217958428,
  1355170249,
  -1385775055,
  65251666,
  -1759179916,
  12582730,
  -671019492,
  271186048,
  84011746,
  862187476,
  -7995477,
  -1027411201,
  1384843393,
  -470749912,
  479457759,
  -139189751,
  185798177,
  -11990178,
  -939524097,
  -602397628,
  316705677,
  -1287368319,
  -538517744,
  -1166524214,
  340299322,
  1947756299,
  -14696593,
  552648703,
  -1509100705,
  -2001686054,
  2933160,
  779417221,
  1048829441,
  -148382239,
  1879047937,
  77467647,
  -787945149,
  476580255,
  1884280239,
  -678408470,
  1200336206,
  -944463603,
  -1073741856,
  913657584,
  105125835,
  -1148383116,
  24042260,
  182590990,
  1684721919,
  -266322544,
  100546559,
  -1007228132,
  -1989110542,
  -1028785082,
  1455682457,
  1011172680,
  -536870966,
  512717498,
  159872815,
  162354926,
  -1051588775,
  -1875769325,
  -533168064,
  -139,
  1962245631,
  1491865297,
  -288700887,
  254048003,
  776255233,
  48284158,
  1781549037,
  1378377732,
  -622854306,
  109757437,
  671492068,
  149324814,
  67429492,
  -320125114,
  -3982975,
  1627389951,
  516933156,
  -1065307396,
  45327579,
  -439980568,
  -223545741,
  470393089,
  1537753276,
  -14458615,
  922746879,
  -250564543,
  1058650959,
  1979122880,
  1535617599,
  1042107878,
  258267433,
  686506306,
  -18558548,
  1959198719,
  -1932945075,
  -263679716,
  754318600,
  406662556,
  -2146796163,
  -2096759750,
  939431935,
  2004875387,
  -1794798479,
  178055305,
  27852492,
  -346118925,
  -114,
  1976746239,
  378144007,
  -1015672762,
  -402584086,
  -1157431314,
  266842246,
  1925444210,
  -365121439,
  -115,
  2011863295,
  1374431317,
  -334997765,
  -62027325,
  1494361715,
  -1274232227,
  159596944,
  1448342724,
  -171966705,
  148930559,
  1166655539,
  1621206680,
  -1739443261,
  1017708782,
  604242841,
  -1616877,
  -671088641,
  527385164,
  1416001648,
  18368009,
  1078817358,
  871648391,
  -2000169729,
  544428066,
  -13184292,
  150994943,
  1347649574,
  -41064472,
  1963770171,
  609786146,
  -757999819,
  -546913576,
  475434818,
  -16395519,
  1476389759,
  -801960000,
  1569266240,
  1191767032,
  1978945023,
  -932397639,
  677067760,
  1879048165,
  139628029,
  989941164,
  1428417397,
  284503061,
  -929978687,
  1732487313,
  -667929500,
  1124036602,
  -1828394877,
  671513776,
  1856021185,
  141245792,
  -31992,
  -399679489,
  1190262861,
  1359947393,
  -2080183871,
  1724068147,
  1932227376,
  -817268797,
  -14744583,
  -285212673,
  65096793,
  303854611,
  -946676087,
  537189910,
  -729544824,
  1643256646,
  -1433367957,
  -16705984,
  -1148321793,
  207928882,
  1116037131,
  -2110205674,
  -2072839682,
  1963015296,
  760318214,
  -1912602840,
  881746678,
  1751195879,
  -1137685176,
  -1727639413,
  -1543618404,
  -14188041,
  1761597183,
  490883179,
  294261314,
  725586724,
  2015478368,
  1451304976,
  139420785,
  -1225882,
  742556927,
  370815758,
  1146390544,
  1696801072,
  1107848389,
  -616921070,
  486539263,
  59466557,
  940650498,
  1045953545,
  505493058,
  2055289872,
  139217240,
  -29352436,
  83886007,
  1298471950,
  302119457,
  -1809116860,
  1897032626,
  553928723,
  577726066,
  1878987222,
  1562501119,
  572157712,
  -246496120,
  573074641,
  -817540027,
  -911197100,
  -10968684,
  -1912602625,
  -1255015299,
  -798430332,
  366514695,
  1749332370,
  2092493833,
  -933544941,
  -970257392,
  -1390745570,
  -1542258689,
  -72873343,
  1794673949,
  537015726,
  -1922678780,
  -1804,
  526064639,
  -132760039,
  -1975977692
}; // weak


//----- (00416760) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>)
{
  int *v4; // esi
  int *v5; // edi
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  unsigned int v11; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  bool v16; // zf
  int v17; // ebx
  int v18; // ett
  unsigned int v19; // eax
  unsigned int v20; // eax
  int v21; // eax
  bool v22; // cf
  int v23; // ebx
  int v24; // ebx
  int v25; // ett
  BOOL v26; // ecx
  bool v27; // cf
  int v28; // ebx
  int v29; // ett
  int v30; // ecx
  int v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ebx
  int v35; // ett
  bool v36; // zf
  int v37; // ebx
  int v38; // ett
  unsigned int v39; // ecx
  char *v40; // edx
  char v41; // al
  int v42; // eax
  bool v43; // cc
  int *v44; // esi
  int *v45; // edi
  int v46; // ecx
  char v47; // al
  unsigned __int8 v48; // al
  int v49; // eax
  int v50; // eax
  char v51; // t0
  unsigned __int8 v52; // bl
  char *v53; // edi
  int v54; // eax
  int *v55; // ebx
  int v56; // ebp
  char v57; // al
  char *v58; // ecx
  unsigned __int8 v59; // al
  int v60; // eax
  void (__cdecl *v61)(int *, int, int, int *); // ebp
  int *v62; // edi
  int v63[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v64; // [esp+2Ch] [ebp-80h] BYREF
  int v65; // [esp+30h] [ebp-7Ch] BYREF
  char *v66; // [esp+34h] [ebp-78h]
  int *v67; // [esp+38h] [ebp-74h]
  int v68; // [esp+3Ch] [ebp-70h]
  int v69; // [esp+40h] [ebp-6Ch]
  int v70; // [esp+44h] [ebp-68h]
  int v71; // [esp+48h] [ebp-64h]
  int *v72; // [esp+4Ch] [ebp-60h]
  int v73; // [esp+50h] [ebp-5Ch]
  int v74; // [esp+54h] [ebp-58h]
  int v75; // [esp+58h] [ebp-54h]
  int v76; // [esp+5Ch] [ebp-50h] BYREF

  v72 = &v76;
  v70 = a3;
  v69 = a2;
  v68 = a1;
  v4 = dword_40F000;
  v5 = &dword_40F000[-14336];
  v67 = &dword_40F000[-14336];
  while ( 1 )
  {
    v9 = *v4;
    v7 = (unsigned int)v4++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v4;
        v4 = (int *)((char *)v4 + 1);
        *(_BYTE *)v5 = v6;
        v5 = (int *)((char *)v5 + 1);
      }
      else
      {
        v11 = 1;
        while ( 1 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v11 += v12 + v11;
          v7 = __CFADD__(v13, v13);
          v16 = 2 * v13 == 0;
          v8 = 2 * v13;
          if ( v7 )
          {
            if ( !v16 )
              break;
            v17 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v18 = v7 + v17;
            v7 = __CFADD__(v7, v17) | __CFADD__(v17, v18);
            v8 = v17 + v18;
            if ( v7 )
              break;
          }
        }
        v7 = v11 < 3;
        v19 = v11 - 3;
        if ( !v7 )
        {
          v20 = v19 << 8;
          LOBYTE(v20) = *(_BYTE *)v4;
          v4 = (int *)((char *)v4 + 1);
          v21 = ~v20;
          if ( !v21 )
          {
            v44 = v67;
            v45 = v67;
            v46 = 76;
            while ( 1 )
            {
              v47 = *(_BYTE *)v45;
              v45 = (int *)((char *)v45 + 1);
              v48 = v47 + 24;
              while ( v48 <= 1u && *(_BYTE *)v45 == 6 )
              {
                v49 = *v45;
                LOWORD(v49) = BYTE1(*v45);
                v50 = __ROL4__(v49, 16);
                v51 = v50;
                LOBYTE(v50) = BYTE1(v50);
                BYTE1(v50) = v51;
                v52 = *((_BYTE *)v45 + 4) + 24;
                *v45 = (int)v44 + v50 - (_DWORD)v45;
                v45 = (int *)((char *)v45 + 5);
                v48 = v52;
                if ( !--v46 )
                {
                  v53 = (char *)(v44 + 20480);
LABEL_38:
                  v54 = *(_DWORD *)v53;
                  if ( *(_DWORD *)v53 )
                  {
                    v55 = (int *)((char *)v44 + *((_DWORD *)v53 + 1));
                    v53 += 8;
                    v56 = ((int (__cdecl *)(int, int, int, int, int, int *, int, int, int))v44[25743])(
                            (int)v44 + v54 + 102852,
                            v68,
                            v69,
                            v70,
                            v71,
                            v72,
                            v73,
                            v74,
                            v75);
                    while ( 1 )
                    {
                      v57 = *v53++;
                      if ( !v57 )
                        goto LABEL_38;
                      v58 = v53;
                      v66 = v53;
                      v59 = v57 - 1;
                      do
                      {
                        if ( !v58 )
                          break;
                        v16 = *v53++ == (char)v59;
                        --v58;
                      }
                      while ( !v16 );
                      v60 = ((int (__cdecl *)(int, char *))v44[25744])(v56, v66);
                      if ( !v60 )
                        break;
                      *v55++ = v60;
                    }
                    v54 = ((int (*)(void))v44[25748])();
                  }
                  v61 = (void (__cdecl *)(int *, int, int, int *))v44[25745];
                  v62 = v44 - 1024;
                  v64 = v54;
                  v61(v44 - 1024, 4096, 4, &v64);
                  *((_BYTE *)v62 + 495) &= ~0x80u;
                  *((_BYTE *)v62 + 535) &= ~0x80u;
                  v61(v44 - 1024, 4096, v63[0], v63);
                  do
                    v64 = 0;
                  while ( &v64 != &v65 - 32 );
                  JUMPOUT(0x4050E3);
                }
              }
            }
          }
          a4 = v21;
        }
        v22 = __CFADD__(v8, v8);
        v23 = 2 * v8;
        if ( !v23 )
        {
          v24 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v25 = v7 + v24;
          v22 = __CFADD__(v7, v24) | __CFADD__(v24, v25);
          v23 = v24 + v25;
        }
        v26 = v22;
        v27 = __CFADD__(v23, v23);
        v8 = 2 * v23;
        if ( !v8 )
        {
          v28 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v29 = v7 + v28;
          v27 = __CFADD__(v7, v28) | __CFADD__(v28, v29);
          v8 = v28 + v29;
        }
        v30 = v26 + v27 + v26;
        if ( !v30 )
        {
          v31 = 1;
          while ( 1 )
          {
            v32 = __CFADD__(v8, v8);
            v33 = 2 * v8;
            if ( !v33 )
            {
              v34 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v35 = v7 + v34;
              v32 = __CFADD__(v7, v34) | __CFADD__(v34, v35);
              v33 = v34 + v35;
            }
            v31 += v32 + v31;
            v7 = __CFADD__(v33, v33);
            v36 = 2 * v33 == 0;
            v8 = 2 * v33;
            if ( v7 )
            {
              if ( !v36 )
                break;
              v37 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v38 = v7 + v37;
              v7 = __CFADD__(v7, v37) | __CFADD__(v37, v38);
              v8 = v37 + v38;
              if ( v7 )
                break;
            }
          }
          v30 = v31 + 2;
        }
        v39 = (a4 < 0xFFFFF300) + v30 + 1;
        v40 = (char *)v5 + a4;
        if ( a4 <= 0xFFFFFFFC )
        {
          do
          {
            v42 = *(_DWORD *)v40;
            v40 += 4;
            *v5++ = v42;
            v43 = v39 <= 4;
            v39 -= 4;
          }
          while ( !v43 );
          v5 = (int *)((char *)v5 + v39);
        }
        else
        {
          do
          {
            v41 = *v40++;
            *(_BYTE *)v5 = v41;
            v5 = (int *)((char *)v5 + 1);
            --v39;
          }
          while ( v39 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// 4168E3: positive sp value 50 has been found
// 4168E3: control flows out of bounds to 4050E3
// 40F000: using guessed type int dword_40F000[512];
// 416760: using guessed type int anonymous_0[4];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
