/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

_DWORD __cdecl __far start(_DWORD, char); // weak
// unsigned int __usercall sub_407EDE@<eax>(int a1@<eax>, int a2@<edx>, int _ECX@<ecx>, char a4@<bl>, int a5@<ebp>, int a6@<edi>, int _ESI@<esi>);


//----- (00406963) --------------------------------------------------------
#error "40718D: cannot convert to microcode (funcsize=1814)"

//----- (00407EDE) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
unsigned int __usercall sub_407EDE@<eax>(int a1@<eax>, int a2@<edx>, int _ECX@<ecx>, char a4@<bl>, int a5@<ebp>, int a6@<edi>, int _ESI@<esi>)
{
  unsigned int v7; // eax
  __int16 v8; // bx
  char v13; // tt
  unsigned int v15; // ecx
  unsigned int i; // eax
  int v17; // edi
  char v18; // dl
  unsigned int v20; // esi
  unsigned int v22; // edi
  bool v24; // cf
  bool v26; // tt
  unsigned int v28; // edi
  bool v29; // zf
  int v30; // edx
  int v34; // edx
  unsigned int v35; // edi
  unsigned int result; // eax
  unsigned int v39; // eax
  unsigned int v40; // eax
  unsigned int v41; // edi
  int v42; // esi
  char v47; // cl
  int v49; // edi
  char v50; // sf
  unsigned __int64 v51; // rax
  int v52; // esi
  int v53; // ecx
  int v54; // edx
  int v55; // eax
  _BYTE *v58; // ebx
  int v59; // edi
  unsigned int v60; // esi
  bool v61; // cf
  bool v62; // tt
  unsigned int v63; // edi
  int v66; // esi
  unsigned int v69; // [esp-20h] [ebp-20h] BYREF
  int v70; // [esp-1Ch] [ebp-1Ch]
  int *v71; // [esp-18h] [ebp-18h]
  int v72; // [esp-14h] [ebp-14h] BYREF

  __asm { rcl     si, cl }
  LOBYTE(a1) = a1 + 1;
  v52 = 8 * _ESI;
  v53 = _ECX << 8;
  BYTE1(a2) = 1 - (a4 ^ BYTE1(a2));
  v24 = BYTE1(a2) != 0;
  v54 = a2 - 1;
  v55 = a6 + v24 + a1;
  LOBYTE(v53) = (char)v53 >> v53;
  SBYTE1(v53) >>= v53;
  v72 = v53 << 15;
  v71 = &v72;
  v70 = 64;
  if ( v55 == 186873717 )
  {
    if ( !__SETP__(186873717, 186873717) )
      __asm { retf }
    JUMPOUT(0x407E6E);
  }
  v69 = 4226086;
  v15 = 4226086;
  for ( i = 1; i; i = ~((BYTE1(v69) + (unsigned __int8)v69 + HIWORD(v69)) ^ 0xFFFFFEC8) )
  {
    v15 = (v15 - 1) >> 15 << 15;
    v69 = *(_DWORD *)v15;
    v54 = (unsigned __int8)v69;
  }
  v39 = *(_DWORD *)(v15 + 60) + v15;
  v69 = *(_DWORD *)(v39 + 80);
  v40 = v15 + *(_DWORD *)(v39 + 128);
  if ( v40 != 2020881433 )
    JUMPOUT(0x407DA7);
  v42 = v52 + 4;
  v41 = a6 + 4;
  LOBYTE(v40) = 9;
  result = v40 + 1;
  *(_BYTE *)(a5 + 285147396) += v15;
  _EBX = v69;
  LOWORD(v15) = -(__int16)v15;
  LOWORD(v54) = (unsigned __int8)result;
  _ECX = __ROR4__(__ROL4__(v15, 10), 13);
  if ( result != 1261083514 )
  {
    LOWORD(result) = (__int16)result >> _ECX;
    v34 = v54 << 21;
    SBYTE1(v34) >>= 7;
    v24 = v41 < 0x9C35BF0D;
    v35 = v41 + 1674199283;
    __asm { rcr     cl, 0Bh }
    LOBYTE(result) = BYTE1(_ECX) + v24 + result;
    LOWORD(_ECX) = v69 | (_ECX - v34);
    if ( result == -884378840 )
    {
      __asm { lock xchg eax, ebx }
      JUMPOUT(0x407D75);
    }
    v30 = _ECX & v34;
    LOWORD(result) = v35 + result;
    __asm { rcl     ecx, 5 }
    LOWORD(_ECX) = _ECX + 1;
    __asm { rcr     ecx, 12h }
    _EDX = v30 << _ECX;
    __asm { rcl     dl, cl }
    _ESI = v69 + 2779 + v42;
    LOWORD(_EDX) = _ESI + _EDX;
    BYTE1(_EDX) = BYTE1(_ECX) + (BYTE1(_EDX) << _ECX);
    v63 = v35 - (v69 + 2779);
    v69 += 2779;
    LOBYTE(_ECX) = 0;
    __asm { rcr     ecx, cl }
    v24 = (unsigned __int8)result < BYTE1(v69);
    LOBYTE(result) = result - BYTE1(v69);
    _EDX = v24 + _EDX + 1937080966;
    LOBYTE(_EDX) = BYTE1(_ECX) & _EDX;
    _ESI |= 0x6BA3CE05u;
    v7 = result << 25;
    __asm { rcl     dl, cl }
    v8 = v69 - 2779;
    __asm { rcr     esi, cl }
    BYTE1(_ECX) |= (unsigned __int16)(v69 - 2779) >> 8;
    LOBYTE(_EDX) = ((unsigned __int8)v7 ^ (unsigned __int8)_EDX) << _ECX;
    LOWORD(_ESI) = _ESI - v7;
    v20 = _ESI - v7;
    _AH = BYTE1(v7) | 0x4D;
    __asm { rcl     ah, 5 }
    LOWORD(_EDX) = v20 | (unsigned __int8)_EDX;
    _EAX = -865260775;
    LOWORD(_ECX) = __ROR2__(_ECX, _ECX);
    v24 = __CFADD__(_ECX, 1782913884);
    _ECX = _ECX + 1782913884;
    LOBYTE(_ECX) = v24 + _ECX + 103;
    LOBYTE(_EDX) = _EDX + 1;
    v22 = ~v63;
    v24 = v22 < 0x6C70B15B;
    if ( v22 == 1819324763 )
    {
      v58 = (_BYTE *)(v69 - 2780);
      __asm { rcr     dword ptr [eax-2Eh], 1 }
      LOBYTE(_EAX) = 0;
      v59 = _ECX + 1819324763;
      BYTE1(_EDX) = __ROL1__(__ROL1__(BYTE1(_EDX), 27), 27);
      v24 = v20 < 0x5625911A;
      v60 = v20 - 1445302554;
      LOBYTE(_EDX) = BYTE1(_ECX);
      BYTE1(_ECX) += (_BYTE)v58 + v24;
      v62 = __CFSHL__(_ECX, 8);
      _ECX = __ROL4__(_ECX, 8);
      v61 = v62;
      __asm { rcr     cl, cl }
      v47 = _CL - (v61 + BYTE1(_EDX));
      v24 = __CFADD__(v47, 70);
      LOBYTE(_ECX) = v47 + 70;
      v49 = v59 - (v24 + 748448687);
      *v58 = _EDX;
      if ( -v60 == -1948507465 )
      {
        v51 = *(unsigned int *)_EDX * (unsigned __int64)(unsigned int)_EAX;
        if ( v50 != (HIDWORD(v51) != 0) )
        {
          MEMORY[0xCF89E290] += BYTE1(v58) + (HIDWORD(v51) != 0);
          __asm { into }
          _ESI = v51;
          _CL = BYTE1(v51);
          __asm { rcl     esi, 7 }
          v66 = _ESI - 203940748;
          LOWORD(v66) = v66 + 1;
          _CH = 0;
          __asm { rcr     ch, cl }
          if ( v58 == (_BYTE *)-595773190 )
          {
            __asm
            {
              fstp1   st(2)
              int     0; - internal hardware - DIVIDE ERROR
            }
            JUMPOUT(0x407FF2);
          }
          _ESI = v66 << 18;
          __asm { rcl     esi, 0Ch }
          LOWORD(_ESI) = _ESI & 0xF5C0;
          __asm { rcl     esi, 1 }
          JUMPOUT(0x407E65);
        }
        JUMPOUT(0x407E8A);
      }
      _EDI = v49 >> _ECX;
      LOWORD(_ECX) = (unsigned __int8)__ROL1__(__ROL1__(((_ECX ^ 0xB1) - 36) & 0x56, 25), 7);
      _ECX = _ECX >> _ECX;
      LOBYTE(_ECX) = _ECX - 1;
      LOWORD(_EDI) = _EAX + _EDI;
      BYTE1(_ECX) = (_BYTE)v58 + 1;
      LOWORD(_ECX) = _ECX + 1;
      LOBYTE(_ECX) = __ROR4__(_ECX, 8) + 1;
      __asm { rcr     di, cl }
      LOWORD(_ECX) = (unsigned __int8)_ECX - 1;
      LOBYTE(_ECX) = _ECX - 43;
      BYTE1(_ECX) = __ROL1__(BYTE1(_ECX), _ECX);
      __asm
      {
        rcr     cl, cl
        rcr     ch, cl
        rcr     ch, 0Bh
      }
      JUMPOUT(0x407EC3);
    }
    while ( 1 )
    {
      _EDX -= v24 + _EAX;
      _CX = _ECX - v8;
      _EAX ^= 0xCC6D205A;
      v26 = __CFSHR__(BYTE1(_EDX), _CX);
      BYTE1(_EDX) = __ROR1__(BYTE1(_EDX), _CX);
      LOBYTE(_EDX) = v8 & (__ROL1__(_EDX, 19) - 1);
      __asm { rcl     cl, cl }
      BYTE1(_EDX) = _CX | (v26 + BYTE1(_EDX) + 42);
      v28 = v22 << 11;
      LOWORD(v28) = v28 + 1;
      if ( v20 == 982131223 )
      {
        v29 = (unsigned int *)((char *)&v69 + *(_DWORD *)(_EDX + 1316285623)) == 0;
        *(_DWORD *)(_EDX + 1316285623) += &v69;
        if ( v29 )
          break;
      }
      v20 = (v20 >> _CX) + 1564527062;
      LOBYTE(_EDX) = (char)_EDX >> (v8 & _CX);
      LOBYTE(_CX) = 0;
      LOWORD(v20) = -(__int16)v20;
      _CX = _CX - 25467;
      BYTE1(_ECX) = __ROR1__(HIBYTE(_CX), _CX);
      v22 = v28 << _CX;
      __asm { rcr     cl, 16h }
      if ( v20 != 695812251 )
      {
        v17 = (v20 < 0x2979409B) + v22 - 468165150;
        __asm { rcl     dh, 3 }
        BYTE1(_EDX) -= _EAX;
        v18 = __ROL4__(_EDX, 16) - 38;
        if ( _EAX == -1137547282 )
          JUMPOUT(0x407C6D);
        _EDI = v17 ^ 0x8D84B675;
        v13 = __CFSHL__(v18, _ECX);
        LOBYTE(_DX) = __ROL1__(v18, _ECX);
        HIBYTE(_DX) = __ROR1__(-v13, 28);
        __asm
        {
          rcl     dx, cl
          rcl     edi, 1Ch
        }
        JUMPOUT(0x407F78);
      }
      v24 = 0;
    }
    JUMPOUT(0x407E14);
  }
  return result;
}
// 407C69: positive sp value 10 has been found
// 407C6B: control flows out of bounds to 407C6D
// 407D21: control flows out of bounds to 407D22
// 407D72: control flows out of bounds to 407D75
// 407E62: control flows out of bounds to 407E65
// 407E6C: control flows out of bounds to 407E6E
// 407FF0: control flows out of bounds to 407FF2
// 407B6B: control flows out of bounds to 407EC3
// 407BF2: control flows out of bounds to 407F78
// 407D1B: control flows out of bounds to 407E14
// 407DA2: control flows out of bounds to 407DA7
// 407EBE: control flows out of bounds to 407E8A
// 407EBE: variable 'v50' is possibly undefined

// nfuncs=2 queued=2 decompiled=2 lumina nreq=0 worse=0 better=0
#error "There were 1 decompilation failure(s) on 2 function(s)"
