/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall sub_4038D5(int a1@<ebx>, int _EDI@<edi>);


//----- (004038D5) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4038D5(int a1@<ebx>, int _EDI@<edi>)
{
  int v6; // eax
  _DWORD *v7; // edi
  int savedregs; // [esp+0h] [ebp+0h]
  int savedregsa; // [esp+0h] [ebp+0h]

  __asm
  {
    fcomp   st(5)
    fcomp   st(7)
    fsubr   st(1), st
    rep sub dword ptr [edi], 6209C296h
  }
  v6 = __ROL4__(__ROL4__(128242946, 242), 190);
  v7 = (_DWORD *)(_EDI + 4);
  __asm
  {
    fmul    st(2), st
    fmul    st(4), st
    fmul    st(5), st
    fmul    st(7), st
  }
  _ESI = ~(savedregs ^ (1 << savedregs));
  __asm
  {
    fsubr   st(7), st
    fsub    st(1), st
    fsub    st(3), st
    fsub    st(4), st
    repne not esi
  }
  if ( (int)v7 >= a1 )
  {
    savedregsa = v6;
    __asm
    {
      fcom    st(6)
      fcom    st(7)
      fcomp   st(1)
    }
    __halt();
  }
  *v7 = sub_4038D5();
  JUMPOUT(0x4038D4);
}
// 4038C7: positive sp value 4 has been found
// 4038DD: inconsistent fpu stack
// 4038D3: control flows out of bounds to 4038D4
// 4038DA: variable 'savedregs' is possibly undefined

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
