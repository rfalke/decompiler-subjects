/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

// int __usercall sub_401028@<eax>(int a1@<edx>, int a2@<ebx>, int a3@<ecx>);
// int __usercall sub_40105B@<eax>(int a1@<ecx>, __int32 a2@<esi>);
void sub_4010AC();
// int __usercall sub_4010D1@<eax>(char a1@<ah>, char a2@<dl>);
_DWORD sub_4010F8(); // weak
// void __usercall sub_401174(int a1@<eax>, int a2@<ecx>, int a3@<edi>);
void sub_4011BB();
// void __usercall start(__int32 a1@<eax>, char a2@<dl>, int a3@<esi>);
// void __usercall sub_40122E(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4@<esi>);
// void __usercall sub_40125E(int a1@<ebx>, int a2@<esi>);
void sub_401319();
void sub_40133E();
// int __usercall sub_401373@<eax>(char a1@<ah>, char a2@<cl>, char a3@<bl>);
// int __usercall sub_4013B7@<eax>(int a1@<eax>, int a2@<ecx>, int a3@<ebx>);
// void __usercall sub_40140A(__int32 a1@<eax>, char a2@<dl>);
int __thiscall sub_401485(void *this);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_401083; // weak
_UNKNOWN loc_401119; // weak
_UNKNOWN loc_40114A; // weak
_UNKNOWN loc_401196; // weak
_UNKNOWN loc_4013DC; // weak
_UNKNOWN loc_40142F; // weak
_UNKNOWN loc_4014AB; // weak
_UNKNOWN loc_4014D3; // weak


//----- (00401028) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_401028@<eax>(int a1@<edx>, int a2@<ebx>, int a3@<ecx>)
{
  __int32 v3; // esi
  int v4; // ecx

  if ( a1 != -1122385612 )
  {
    sub_401028(a1 - 937990514, a2);
    JUMPOUT(0x4011E2);
  }
  v3 = ((a3 + 1) | 0xBD19C134) + 1;
  ((void (*)(void))((char *)&loc_40142F + 4))();
  MEMORY[0x26288480]();
  return sub_40105B(v4, v3);
}
// 40102C: positive sp value 4 has been found
// 4011DD: control flows out of bounds to 4011E2
// 401057: variable 'v4' is possibly undefined

//----- (0040105B) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_40105B@<eax>(int a1@<ecx>, __int32 a2@<esi>)
{
  __int32 v3; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v3, a2);
  sub_401485((void *)(a1 + 286331154));
  return MEMORY[0x8F74E825]();
}
// 401061: positive sp value 4 has been found

//----- (004010AC) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4010AC()
{
  void *v0; // [esp+18h] [ebp-4h]
  void *retaddr; // [esp+1Ch] [ebp+0h]

  *(&retaddr - 8) = v0;
}
// 4010B0: positive sp value 4 has been found

//----- (004010D1) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_4010D1@<eax>(char a1@<ah>, char a2@<dl>)
{
  sub_401373(a1, a2, a2 - 1);
  return sub_4010F8();
}
// 4010D5: positive sp value 4 has been found
// 4010F8: using guessed type _DWORD sub_4010F8();

//----- (004010F8) --------------------------------------------------------
#error "4010FB: cannot convert to microcode (funcsize=2)"

//----- (00401174) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_401174(int a1@<eax>, int a2@<ecx>, int a3@<edi>)
{
  int v3; // edi
  int v5; // eax
  int v6; // edx
  int v7; // ecx
  char v8; // zf
  int v9; // edx
  int v10; // esi
  int v11; // ecx

  v3 = a1 | a3;
  sub_40125E(a1, a2 - 1);
  if ( v8 )
  {
    v9 = ((v6 - 3) | (v6 - 1)) + 1;
    v10 = v9 - 1;
    ((void (__fastcall *)(_DWORD, int))sub_4010F8)(*(_DWORD *)(v5 + v7), (v9 - 1) | v9);
    sub_40122E(v11, a1 + 1, v3, v10);
  }
  else
  {
    MEMORY[0xF3243489]();
  }
}
// 401178: positive sp value 4 has been found
// 401194: variable 'v8' is possibly undefined
// 40121B: variable 'v6' is possibly undefined
// 40120F: variable 'v5' is possibly undefined
// 40120F: variable 'v7' is possibly undefined
// 40122B: variable 'v11' is possibly undefined
// 4010F8: using guessed type _DWORD sub_4010F8();

//----- (004011BB) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4011BB()
{
  void *v0; // [esp+1Ch] [ebp-4h]
  void *retaddr; // [esp+20h] [ebp+0h]

  *(&retaddr - 9) = v0;
  JUMPOUT(0x4011D2);
}
// 4011BF: positive sp value 4 has been found
// 4011D0: control flows out of bounds to 4011D2

//----- (004011E7) --------------------------------------------------------
void __usercall start(__int32 a1@<eax>, char a2@<dl>, int a3@<esi>)
{
  __int32 v3; // ebx
  __int32 v4; // ebx
  char v5; // zf

  v3 = a1;
  do
  {
    v4 = v3 + 2;
    a3 = v4 | (a3 - 1);
    v3 = v4 + 1;
    sub_40140A(a1, a2);
  }
  while ( v5 );
  JUMPOUT(0x40120A);
}
// 401205: control flows out of bounds to 40120A
// 4011FE: variable 'a1' is possibly undefined
// 4011FE: variable 'a2' is possibly undefined
// 401203: variable 'v5' is possibly undefined

//----- (0040122E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40122E(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4@<esi>)
{
  int v4; // edi
  int v5; // esi
  int v6; // ecx
  __int32 v7; // esi
  int v8; // ebx
  int v9; // ecx
  char v10; // zf
  int v11; // ecx
  char v12; // dh

  v4 = (a4 | ((a1 | a3) - 1)) - 1;
  v5 = a2 | a1 | a4;
  v6 = a1 & 0xEEEEEEEE;
  v7 = v4 | ((v6 | v5) + 1);
  v8 = (v4 | v6) - 1;
  sub_40105B(v6, v7);
  if ( v10 )
  {
    ((void (__fastcall *)(int, int))((char *)&loc_401119 + 1))(v9 | ((v4 | v8) - 1) | v9, (v4 | v8) - 2);
    MEMORY[0x1CC7FB20]();
    BYTE1(v11) = v12 + (v11 | 0x89);
    ((void (__thiscall *)(int))loc_4014D3)(v11);
    if ( !v10 )
      JUMPOUT(0x401316);
    JUMPOUT(0x401315);
  }
  MEMORY[0x753FFB46]();
  sub_40125E(v8, v7);
}
// 4012FE: positive sp value 8 has been found
// 401314: control flows out of bounds to 401316
// 401314: control flows out of bounds to 401315
// 401257: variable 'v10' is possibly undefined
// 4012E1: variable 'v9' is possibly undefined
// 401308: variable 'v12' is possibly undefined
// 401304: variable 'v11' is possibly undefined

//----- (0040125E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40125E(int a1@<ebx>, int a2@<esi>)
{
  int v2; // [esp-4h] [ebp-4h]

  sub_40122E(v2, a1 - 2, a1 - 1, a2 + 1);
  JUMPOUT(0x401283);
}
// 401270: positive sp value 8 has been found
// 40127F: control flows out of bounds to 401283
// 401275: variable 'v2' is possibly undefined

//----- (00401319) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_401319()
{
  void *v0; // [esp+2Ch] [ebp-4h]
  void *retaddr; // [esp+30h] [ebp+0h]

  *(&retaddr - 13) = v0;
  ((void (*)(void))((char *)&loc_4014AB + 4))();
  sub_40133E();
}
// 40131D: positive sp value 4 has been found

//----- (0040133E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_40133E()
{
  void *v0; // [esp+2Ch] [ebp-4h]
  void *retaddr; // [esp+30h] [ebp+0h]

  *(&retaddr - 13) = v0;
  ((void (*)(void))((char *)&loc_401083 + 5))();
  JUMPOUT(0x401526);
}
// 401342: positive sp value 4 has been found
// 40136E: control flows out of bounds to 401526

//----- (00401373) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_401373@<eax>(char a1@<ah>, char a2@<cl>, char a3@<bl>)
{
  __int16 v3; // cx
  int v5; // ebx
  int v6; // eax
  int v7; // ecx
  int v9; // [esp+4h] [ebp-Ch]
  int v10; // [esp+8h] [ebp-8h]

  *(&v10 - 5) = v9;
  LOBYTE(v3) = a1 + a2 - (a3 + 1);
  HIBYTE(v3) = 44;
  if ( (((int (__thiscall *)(__int16))loc_40114A)(v3) & 0x74FFE8E8) == 0 )
    JUMPOUT(0x401322);
  __asm { repne pop eax }
  v5 = _EAX;
  ((void (*)(void))loc_4013DC)();
  v6 = MEMORY[0x2912DC]();
  return sub_4013B7(v6, v7, v5);
}
// 4013A8: positive sp value C has been found
// 401397: control flows out of bounds to 401322
// 4013B3: variable 'v7' is possibly undefined

//----- (004013B7) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_4013B7@<eax>(int a1@<eax>, int a2@<ecx>, int a3@<ebx>)
{
  sub_401174(a1, a2, a1 | a3);
  return MEMORY[0xFF74FF25]();
}
// 4013BB: positive sp value 4 has been found

//----- (0040140A) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40140A(__int32 a1@<eax>, char a2@<dl>)
{
  __int32 v2; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v2, a1);
  sub_4010D1(SBYTE1(v2), a2);
  JUMPOUT(0x401434);
}
// 401415: positive sp value 4 has been found
// 40142F: control flows out of bounds to 401434

//----- (00401485) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __thiscall sub_401485(void *this)
{
  int v1; // eax
  char v2; // dl

  if ( this )
  {
    sub_4010AC();
    JUMPOUT(0x4014B0);
  }
  v1 = ((int (*)(void))((char *)&loc_401196 + 2))();
  return sub_4010D1(BYTE1(v1) & 0xE8, v2);
}
// 4010B1: positive sp value 4 has been found
// 4014AB: control flows out of bounds to 4014B0
// 4010CD: variable 'v2' is possibly undefined

// nfuncs=16 queued=16 decompiled=16 lumina nreq=0 worse=0 better=0
#error "There were 1 decompilation failure(s) on 16 function(s)"
