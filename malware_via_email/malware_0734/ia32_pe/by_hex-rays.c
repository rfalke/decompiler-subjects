/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int@<eax>, char *@<edx>, int@<ecx>, int@<ebx>, int@<ebp>, int@<edi>, int@<esi>);

//-------------------------------------------------------------------------
// Data declarations

int dword_415000[512] =
{
  -1876295519,
  88416000,
  892405092,
  -53452,
  1162543359,
  1279610450,
  1143878195,
  -1660924852,
  656367186,
  1901520550,
  1650839151,
  -289,
  -467378605,
  1179832230,
  -1401805017,
  1263509239,
  -877899447,
  777222045,
  -1503271644,
  -4609,
  1313884391,
  -1612307417,
  -656878785,
  1897063846,
  342717254,
  1248346853,
  -953913993,
  -75792929,
  1413652327,
  1776632680,
  2141076343,
  307504993,
  -1220456095,
  1619001341,
  1980156928,
  -1364578356,
  608513329,
  -775150132,
  876793726,
  -1406299941,
  -350219737,
  -541730711,
  -1541381090,
  699665891,
  2027657481,
  -17957442,
  -1565887227,
  669031427,
  899403520,
  -1214062332,
  196766170,
  896536795,
  1857427114,
  731532006,
  -1363908171,
  1955772836,
  783447987,
  1751722896,
  -1706381135,
  -1083479765,
  -1833327607,
  -1117536538,
  1764465269,
  -1150174034,
  1111365415,
  -814274488,
  1328820610,
  -1677968549,
  584974317,
  -676593654,
  -522497320,
  156238627,
  538933246,
  1065763831,
  325561351,
  1394728868,
  1088744997,
  -1894543314,
  -467508378,
  1718728962,
  1678479406,
  773133422,
  1799357328,
  657978987,
  -567135678,
  -813439007,
  67711758,
  -1359888014,
  -287369310,
  1934217575,
  375840037,
  1950377282,
  1683804759,
  1381720950,
  -1782048908,
  1427530082,
  -1780669069,
  1868472416,
  1230819927,
  1833332337,
  882231319,
  1466657867,
  1780506066,
  40460822,
  1597269369,
  -120493992,
  2003861537,
  2005180625,
  1234211544,
  -812548578,
  194786472,
  1085866595,
  777342510,
  1122241424,
  48517956,
  1430798521,
  196262187,
  -2073101474,
  1306014943,
  -598737625,
  -106016857,
  1627899060,
  -736281753,
  454948150,
  -1879611868,
  -416487140,
  639869480,
  -752918233,
  164108064,
  88698423,
  1096581490,
  387996744,
  1464759240,
  1701970400,
  -786472955,
  -967361072,
  -907074192,
  615781126,
  646210356,
  -17094025,
  322846142,
  -98323752,
  -1700319662,
  559109932,
  90930695,
  1896040724,
  313279344,
  196229931,
  391228155,
  1902388045,
  2017005427,
  328751816,
  60466421,
  2105933705,
  376590931,
  -1185362353,
  684183297,
  -86142603,
  1378701091,
  292279001,
  -1652221897,
  64130482,
  587582570,
  -939343118,
  -136826452,
  1191101089,
  1935125184,
  1133650152,
  1781125320,
  -1114519512,
  1739211716,
  -461903325,
  722563601,
  -242472635,
  -908883916,
  -1333321788,
  708609347,
  -936749328,
  -836484625,
  592965070,
  1413023858,
  732179210,
  1142622895,
  -2094242840,
  -1121907128,
  -96469460,
  654781165,
  660281857,
  2025072464,
  -1754617223,
  639586166,
  465258098,
  -627594518,
  -937079472,
  -938008503,
  88298245,
  1264353650,
  1551987275,
  -1319433767,
  -937998416,
  -2084651259,
  -1875946661,
  -272486986,
  -584747207,
  1987916949,
  1557286934,
  762672969,
  -850234250,
  1935094933,
  1549103682,
  1898279753,
  542928990,
  2138362455,
  -1782048898,
  2102706228,
  1566385532,
  1920704608,
  96863562,
  863599218,
  -1018602286,
  1195447160,
  542998856,
  -1991948713,
  2001296513,
  1128719684,
  2001296513,
  1095665986,
  1980089857,
  1246744128,
  -1069595767,
  1104124791,
  1847130927,
  -680296454,
  -1432392998,
  -434317194,
  -451140781,
  1655465810,
  -977282093,
  1865886959,
  -433532954,
  797976740,
  2104151718,
  -198431698,
  1391392511,
  -1407537461,
  -282846353,
  827775041,
  -581851071,
  -1073741897,
  -1641814108,
  1710588211,
  -138090842,
  650913589,
  -613474713,
  -553329326,
  -1950426286,
  -139668737,
  -1496092148,
  1422862301,
  -993237212,
  -446971075,
  815522816,
  -1921868241,
  1996102549,
  1252313083,
  -16568325,
  620443695,
  -808976542,
  -1917329944,
  -16375642,
  -1023214660,
  -935080076,
  987339694,
  616790775,
  -954986886,
  -13798127,
  -1245094917,
  795619366,
  1739332423,
  1273373711,
  1840932572,
  1072635595,
  1089670312,
  -384092432,
  1308075276,
  869267202,
  -69388430,
  283595288,
  1657830925,
  -1656945253,
  578935675,
  617407310,
  925044871,
  -839946521,
  -806157791,
  -870940077,
  1661411379,
  976453101,
  1772744472,
  1706693505,
  -1827050036,
  -680064113,
  -409520316,
  727874405,
  63951831,
  -686064518,
  -1427540298,
  521092988,
  990192296,
  1593448158,
  168638962,
  1898048293,
  929437395,
  388672055,
  959407790,
  -1334930795,
  -1735320529,
  1733112164,
  -550841769,
  1650510143,
  1936501864,
  668984486,
  -239258801,
  320012248,
  -1625942764,
  1414155855,
  -64193527,
  1962847235,
  -811846405,
  1176646591,
  -1149800457,
  1710974854,
  -450572529,
  -887130250,
  -843970063,
  131107904,
  -502739543,
  1190746844,
  1779223380,
  -821449261,
  -1784676572,
  181093549,
  -828051700,
  -836378334,
  -618238546,
  -1905903769,
  -1893634974,
  -1686759476,
  2117451063,
  862235873,
  1957491691,
  1762468907,
  -643313803,
  -1009929362,
  -1307562218,
  957511171,
  -2118355924,
  1846535362,
  -277943403,
  -71158217,
  -1209392442,
  -1584198927,
  -278127107,
  118105313,
  273626705,
  -812217548,
  48037184,
  -1471171617,
  1391027726,
  -610923796,
  -478223956,
  2092619213,
  -509694738,
  1730629431,
  1265073185,
  243107310,
  722941671,
  787483111,
  1326709266,
  1218218539,
  -667779519,
  537336226,
  -1538546042,
  1284531320,
  -1404050373,
  1267278185,
  -76922996,
  52706409,
  608396248,
  915642367,
  -1869762018,
  1109649201,
  -2027608274,
  669207140,
  1137265727,
  726134646,
  -610590297,
  294708399,
  -221339723,
  -1310394420,
  1929348528,
  -475739220,
  1886483675,
  -1776144403,
  1806722083,
  -1324502701,
  1138302518,
  1495771068,
  409541796,
  747030619,
  1783053359,
  -72257588,
  -909168157,
  818881106,
  -367418362,
  377540561,
  649817178,
  170613769,
  -437498685,
  361814285,
  1747010973,
  202599649,
  1133405705,
  313726290,
  1653023802,
  254109487,
  453745929,
  236078598,
  110874772,
  -439362722,
  -1864799451,
  -1625237236,
  -1227889440,
  1678690836,
  469936683,
  -1307031451,
  1188782679,
  -654133740,
  1389460257,
  928260408,
  569149134,
  610016985,
  1376792410,
  1214868612,
  288611556,
  1892615872,
  -190036921,
  -1310774490,
  -1138098892,
  1019160455,
  476072239,
  1817389930,
  1703390637,
  590090488,
  -19650974,
  -1087673491,
  559744012,
  -1505632510,
  1093195968,
  234371003,
  -137352238,
  544202660,
  646126628,
  -1244215760,
  690299245,
  1342063653,
  721885475,
  790886672,
  1842537552,
  -1221383334,
  979698380,
  -399803264,
  1862252470,
  -1405449173,
  -535020703,
  -1244122286,
  88039848,
  1711255863,
  120798041,
  296493516,
  -128789220,
  2071953988,
  -1421789296,
  1103561470,
  -1409161303,
  -76349646,
  -435594266,
  35091884,
  -39015893,
  -418105940,
  -302579948,
  1391754770,
  1437212503,
  -1406555381,
  -822729903,
  -1111492404,
  -521782019,
  -1400225504,
  70210886,
  -1541124003,
  -525928249,
  -667455111,
  616684926,
  482801119,
  1704153791,
  1619300415,
  -845443212,
  -1597630943,
  628756176,
  606035788,
  -574652037,
  -1187025821
}; // weak


//----- (00419810) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(
        int a1@<eax>,
        char *a2@<edx>,
        int a3@<ecx>,
        int a4@<ebx>,
        int a5@<ebp>,
        int a6@<edi>,
        int a7@<esi>)
{
  int *v7; // esi
  int *v8; // edi
  unsigned int v9; // ebp
  char v10; // al
  bool v11; // cf
  int v12; // ebx
  int v13; // ebx
  int v14; // ett
  unsigned int v15; // eax
  bool v16; // cf
  int v17; // ebx
  int v18; // ebx
  int v19; // ett
  bool v20; // zf
  int v21; // ebx
  int v22; // ett
  int v23; // ecx
  unsigned int v24; // eax
  unsigned int v25; // eax
  int v26; // eax
  bool v27; // cf
  int v28; // ebx
  int v29; // ebx
  int v30; // ett
  BOOL v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  int v35; // ecx
  int v36; // ecx
  bool v37; // cf
  int v38; // ebx
  int v39; // ebx
  int v40; // ett
  bool v41; // zf
  int v42; // ebx
  int v43; // ett
  unsigned int v44; // ecx
  char v45; // al
  int v46; // eax
  bool v47; // cc
  int *v48; // esi
  char *v49; // edi
  int v50; // eax
  int *v51; // ebx
  int v52; // ebp
  char v53; // al
  char *v54; // ecx
  unsigned __int8 v55; // al
  int v56; // eax
  void (__fastcall *v57)(int, char *, int *, int, int, int *); // ebp
  int *v58; // edi
  int v59[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v60; // [esp+2Ch] [ebp-80h] BYREF
  int v61; // [esp+30h] [ebp-7Ch] BYREF
  char *v62; // [esp+34h] [ebp-78h]
  int *v63; // [esp+38h] [ebp-74h]
  int v64; // [esp+3Ch] [ebp-70h]
  char *v65; // [esp+40h] [ebp-6Ch]
  int v66; // [esp+44h] [ebp-68h]
  int v67; // [esp+48h] [ebp-64h]
  int *v68; // [esp+4Ch] [ebp-60h]
  int v69; // [esp+50h] [ebp-5Ch]
  int v70; // [esp+54h] [ebp-58h]
  int v71; // [esp+58h] [ebp-54h]
  int v72; // [esp+5Ch] [ebp-50h] BYREF

  v71 = a7;
  v70 = a6;
  v69 = a5;
  v68 = &v72;
  v67 = a4;
  v66 = a3;
  v65 = a2;
  v64 = a1;
  v7 = dword_415000;
  v8 = &dword_415000[-20480];
  v63 = &dword_415000[-20480];
  v9 = -1;
  while ( 1 )
  {
    v13 = *v7;
    v11 = (unsigned int)v7++ < 0xFFFFFFFC;
    v14 = v11 + v13;
    v11 = __CFADD__(v11, v13) | __CFADD__(v13, v14);
    v12 = v13 + v14;
    do
    {
      if ( v11 )
      {
        v10 = *(_BYTE *)v7;
        v7 = (int *)((char *)v7 + 1);
        *(_BYTE *)v8 = v10;
        v8 = (int *)((char *)v8 + 1);
      }
      else
      {
        v15 = 1;
        while ( 1 )
        {
          v16 = __CFADD__(v12, v12);
          v17 = 2 * v12;
          if ( !v17 )
          {
            v18 = *v7;
            v11 = (unsigned int)v7++ < 0xFFFFFFFC;
            v19 = v11 + v18;
            v16 = __CFADD__(v11, v18) | __CFADD__(v18, v19);
            v17 = v18 + v19;
          }
          v15 += v16 + v15;
          v11 = __CFADD__(v17, v17);
          v20 = 2 * v17 == 0;
          v12 = 2 * v17;
          if ( v11 )
          {
            if ( !v20 )
              break;
            v21 = *v7;
            v11 = (unsigned int)v7++ < 0xFFFFFFFC;
            v22 = v11 + v21;
            v11 = __CFADD__(v11, v21) | __CFADD__(v21, v22);
            v12 = v21 + v22;
            if ( v11 )
              break;
          }
        }
        v23 = 0;
        v11 = v15 < 3;
        v24 = v15 - 3;
        if ( !v11 )
        {
          v25 = v24 << 8;
          LOBYTE(v25) = *(_BYTE *)v7;
          v7 = (int *)((char *)v7 + 1);
          v26 = ~v25;
          if ( !v26 )
          {
            v48 = v63;
            v49 = (char *)(v63 + 23552);
LABEL_33:
            v50 = *(_DWORD *)v49;
            if ( *(_DWORD *)v49 )
            {
              v51 = (int *)((char *)v48 + *((_DWORD *)v49 + 1));
              v49 += 8;
              v52 = ((int (__fastcall *)(int, char *, int, int, char *, int, int, int *, int, int, int))v48[28258])(
                      v23,
                      a2,
                      (int)v48 + v50 + 112832,
                      v64,
                      v65,
                      v66,
                      v67,
                      v68,
                      v69,
                      v70,
                      v71);
              while ( 1 )
              {
                v53 = *v49++;
                if ( !v53 )
                  goto LABEL_33;
                v54 = v49;
                v62 = v49;
                v55 = v53 - 1;
                do
                {
                  if ( !v54 )
                    break;
                  v20 = *v49++ == (char)v55;
                  --v54;
                }
                while ( !v20 );
                v56 = ((int (__cdecl *)(int, char *))v48[28259])(v52, v62);
                if ( !v56 )
                  break;
                *v51++ = v56;
              }
              v50 = ((int (*)(void))v48[28263])();
            }
            v57 = (void (__fastcall *)(int, char *, int *, int, int, int *))v48[28260];
            v58 = v48 - 1024;
            v60 = v50;
            v57(v23, a2, v48 - 1024, 4096, 4, &v60);
            *((_BYTE *)v58 + 479) &= ~0x80u;
            *((_BYTE *)v58 + 519) &= ~0x80u;
            ((void (__cdecl *)(int *, int, int, int *))v57)(v48 - 1024, 4096, v59[0], v59);
            do
              v60 = 0;
            while ( &v60 != &v61 - 32 );
            JUMPOUT(0x40FAF1);
          }
          v9 = v26;
        }
        v27 = __CFADD__(v12, v12);
        v28 = 2 * v12;
        if ( !v28 )
        {
          v29 = *v7;
          v11 = (unsigned int)v7++ < 0xFFFFFFFC;
          v30 = v11 + v29;
          v27 = __CFADD__(v11, v29) | __CFADD__(v29, v30);
          v28 = v29 + v30;
        }
        v31 = v27;
        v32 = __CFADD__(v28, v28);
        v12 = 2 * v28;
        if ( !v12 )
        {
          v33 = *v7;
          v11 = (unsigned int)v7++ < 0xFFFFFFFC;
          v34 = v11 + v33;
          v32 = __CFADD__(v11, v33) | __CFADD__(v33, v34);
          v12 = v33 + v34;
        }
        v35 = v31 + v32 + v31;
        if ( !v35 )
        {
          v36 = 1;
          while ( 1 )
          {
            v37 = __CFADD__(v12, v12);
            v38 = 2 * v12;
            if ( !v38 )
            {
              v39 = *v7;
              v11 = (unsigned int)v7++ < 0xFFFFFFFC;
              v40 = v11 + v39;
              v37 = __CFADD__(v11, v39) | __CFADD__(v39, v40);
              v38 = v39 + v40;
            }
            v36 += v37 + v36;
            v11 = __CFADD__(v38, v38);
            v41 = 2 * v38 == 0;
            v12 = 2 * v38;
            if ( v11 )
            {
              if ( !v41 )
                break;
              v42 = *v7;
              v11 = (unsigned int)v7++ < 0xFFFFFFFC;
              v43 = v11 + v42;
              v11 = __CFADD__(v11, v42) | __CFADD__(v42, v43);
              v12 = v42 + v43;
              if ( v11 )
                break;
            }
          }
          v35 = v36 + 2;
        }
        v44 = (v9 < 0xFFFFF300) + v35 + 1;
        a2 = (char *)v8 + v9;
        if ( v9 <= 0xFFFFFFFC )
        {
          do
          {
            v46 = *(_DWORD *)a2;
            a2 += 4;
            *v8++ = v46;
            v47 = v44 <= 4;
            v44 -= 4;
          }
          while ( !v47 );
          v8 = (int *)((char *)v8 + v44);
        }
        else
        {
          do
          {
            v45 = *a2++;
            *(_BYTE *)v8 = v45;
            v8 = (int *)((char *)v8 + 1);
            --v44;
          }
          while ( v44 );
        }
      }
      v11 = __CFADD__(v12, v12);
      v12 *= 2;
    }
    while ( v12 );
  }
}
// 419968: positive sp value 50 has been found
// 419968: control flows out of bounds to 40FAF1
// 4198FF: variable 'v23' is possibly undefined
// 4198FF: variable 'a2' is possibly undefined
// 415000: using guessed type int dword_415000[512];
// 419810: using guessed type int anonymous_0[4];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
