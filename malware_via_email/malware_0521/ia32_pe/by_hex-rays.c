/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall sub_40102B(_BYTE *@<eax>, int@<edx>, int@<ecx>, int@<edi>);
// void __usercall sub_401046(_BYTE *@<eax>, int@<ecx>, int@<edi>, int@<esi>);
// void __usercall sub_4010AC(_BYTE *@<eax>, __int16@<dx>, int@<ecx>, int@<ebx>, int@<edi>, int@<esi>);
// void __usercall sub_401128(_BYTE *@<eax>, __int16@<dx>, int@<ecx>, char@<bl>, int@<edi>, int@<esi>);
// void __usercall sub_401144(int@<eax>, int@<edx>, int@<ebx>, int@<edi>);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_40118B; // weak


//----- (0040102B) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40102B(_BYTE *a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<edi>)
{
  int v5; // edi
  char v6; // cf
  char v7; // al
  _BYTE *v8; // eax
  int v9; // ecx

  v5 = a4 - 2;
  sub_401046(a1, a3, v5, a2);
  LOBYTE(v8) = v6 + v7 + 11;
  sub_401046(v8, v9, v5, a2);
}
// 40102F: positive sp value 4 has been found
// 401042: variable 'v6' is possibly undefined
// 401042: variable 'v7' is possibly undefined
// 401045: variable 'v8' is possibly undefined
// 401045: variable 'v9' is possibly undefined

//----- (00401046) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_401046(_BYTE *a1@<eax>, int a2@<ecx>, int a3@<edi>, int a4@<esi>)
{
  int v4; // edx
  void *v5; // [esp+10h] [ebp-4h]
  void *retaddr; // [esp+14h] [ebp+0h]

  *(&retaddr - 6) = v5;
  v4 = a3 + 1;
  BYTE1(v4) = ((unsigned __int16)(a3 + 1) >> 8) - (_BYTE)a1;
  LOBYTE(v4) = a2 | (a3 + 1);
  sub_401128(a1, a2, a2, -14 - (a3 + 1) - (_BYTE)a1 - 1, v4 ^ (a2 + a3), a4 - 1);
  JUMPOUT(0x40110B);
}
// 40104A: positive sp value 4 has been found
// 401106: control flows out of bounds to 40110B

//----- (004010AC) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4010AC(_BYTE *a1@<eax>, __int16 a2@<dx>, int a3@<ecx>, int a4@<ebx>, int a5@<edi>, int a6@<esi>)
{
  int v6; // edi
  unsigned int v7; // ebx
  char v9; // cc
  int v10; // edi
  bool v11; // cf
  int v13; // edi
  __int16 v14; // dx
  __int16 v15; // si
  int v16; // [esp+1Ch] [ebp-8h]
  int v17; // [esp+20h] [ebp-4h]

  *(&v17 - 10) = v16;
  v13 = a6 | (a5 + 1);
  v14 = a6 | (a2 - 1);
  v15 = a6 - 1;
  v6 = v13 - 1;
  v7 = a3 ^ (unsigned int)&a1[a4];
  _DX = v7 + v15 + v14;
  v9 = (v6 + 1 < 0) ^ __OFADD__(1, v6);
  v10 = v6 + 1;
  if ( !v9 && v9 )
  {
    v11 = __CFADD__((_BYTE)a1, -53);
    LOBYTE(a1) = (_BYTE)a1 - 53;
    *a1 -= v11 - 21;
    __asm { insb }
    JUMPOUT(0x4010A5);
  }
  ((void (__fastcall *)(unsigned int, _BYTE *))loc_40118B)(((v7 - 1) | a3) + 1, &a1[(v10 + 1) | (v7 - (_DWORD)a1)]);
  JUMPOUT(0x401124);
}
// 40100C: positive sp value 8 has been found
// 4010C2: control flows out of bounds to 4010C4
// 4010A3: control flows out of bounds to 4010A5
// 40111F: control flows out of bounds to 401124
// 401028: control flows out of bounds to 401029
// 4010BC: conditional instruction was optimized away because esi.4>=0
// 401020: conditional instruction was optimized away because edx.4>=0

//----- (00401128) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_401128(_BYTE *a1@<eax>, __int16 a2@<dx>, int a3@<ecx>, char a4@<bl>, int a5@<edi>, int a6@<esi>)
{
  int v6; // ebx
  int v7; // eax
  int v8; // edx

  HIBYTE(a2) = a4;
  v6 = a5 + 1;
  sub_4010AC(a1, a2, a3, v6, v6, (int)&a1[a6 + (_DWORD)a1]);
  sub_401144(v7, v8, v6, v6);
}
// 40112C: positive sp value 4 has been found
// 40113F: variable 'v7' is possibly undefined
// 40113F: variable 'v8' is possibly undefined

//----- (00401144) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_401144(int a1@<eax>, int a2@<edx>, int a3@<ebx>, int a4@<edi>)
{
  int v4; // edi

  v4 = a2 + a4;
  if ( !__OFADD__(a3, a2 - a1) && __OFADD__(a3, a2 - a1) )
  {
    *(_BYTE *)(v4 + 1150273675) += 36;
    JUMPOUT(0x40116D);
  }
  JUMPOUT(0x40116A);
}
// 401164: positive sp value 8 has been found
// 401166: control flows out of bounds to 40116D
// 40107A: control flows out of bounds to 40107D
// 401075: control flows out of bounds to 40116A

// nfuncs=5 queued=5 decompiled=5 lumina nreq=0 worse=0 better=0
// ALL OK, 5 function(s) have been successfully decompiled
