/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

// char __usercall start@<al>(int a1@<eax>, int a2@<edx>, unsigned int a3@<ecx>, unsigned int a4@<ebx>, int a5@<edi>, int a6@<esi>, double a7@<st2>, char a8@<efl>, int _EBP@<ebp>);
int __thiscall nullsub_1(_DWORD); // weak

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_40D4C1; // weak


//----- (0040C111) --------------------------------------------------------
char __usercall start@<al>(
        int a1@<eax>,
        int a2@<edx>,
        unsigned int a3@<ecx>,
        unsigned int a4@<ebx>,
        int a5@<edi>,
        int a6@<esi>,
        double a7@<st2>,
        char a8@<efl>,
        int _EBP@<ebp>)
{
  unsigned int v10; // edi
  char v14; // dh
  char v15; // of
  int v18; // esi
  int v19; // edi
  bool v21; // sf
  int v25; // esi
  int v30; // edi
  int v32; // edi
  unsigned int v37; // edx
  signed int v38; // ebx
  unsigned int v39; // ecx
  unsigned int v41; // edx
  char v43; // cl
  unsigned __int8 v48; // dh
  int v49; // esi
  int v50; // eax
  bool v51; // cc
  unsigned int v56; // edx
  int v62; // ebx
  bool v63; // cc
  bool v65; // tt
  unsigned int v67; // ecx
  int v68; // ebx
  int v72; // ecx
  int v73; // ebx
  char v74; // tt
  bool v75; // zf
  bool v76; // sf
  bool v77; // of
  bool v78; // cc
  int v79; // eax
  int v80; // ebx
  int v81; // ecx
  bool v82; // cc
  unsigned int v83; // ecx
  int v85; // edi
  int v86; // ebx
  int v87; // edi
  unsigned int v88; // esi
  bool v89; // cf
  int v90; // eax
  int v91; // ebx
  bool v95; // of
  __int16 v96; // bx
  int v100; // esi
  bool v101; // cf
  int v102; // esi
  int v109; // edi
  int v110; // edi
  bool v111; // cf
  bool v112; // tt
  bool v114; // cf
  bool v115; // cc
  int v118; // esi
  unsigned int v120; // eax
  unsigned int v121; // eax
  unsigned int v123; // esi
  unsigned int v127; // edi
  int v129; // esi
  __int64 v134; // rax

  v39 = a3 >> a3;
  BYTE1(a2) ^= BYTE1(a4);
  LOBYTE(a1) = (_BYTE)a1 << v39;
  LOBYTE(v39) = v39 - 73;
  _ECX = v39 << v39;
  v41 = a2 << _ECX;
  __asm { rcl     ecx, cl }
  v37 = v41 >> _ECX;
  LOBYTE(a1) = (char)a1 >> _ECX;
  LOBYTE(a4) = __ROR1__(a4, _ECX);
  v38 = a4 >> _ECX;
  _EAX = __ROL4__(a1, _ECX);
  if ( !__SETP__(v38, 0) && __SETP__(v38, 0) )
    JUMPOUT(0x40C10E);
  _ECX = 2095516308;
  BYTE1(_EAX) = (_EAX ^ BYTE1(_EAX)) - BYTE1(v37);
  LOBYTE(v37) = 106;
  _EDX = v37 - 1;
  BYTE1(_EDX) -= __CFSHL__(a5, -108) + 117;
  LOBYTE(_EAX) = _EAX - 1;
  v30 = __ROL4__(a5, 148) << 20;
  BYTE1(v38) = v38 + 1;
  LOBYTE(v38) = __ROR1__(v38, 148);
  _EBX = v38 >> 20;
  BYTE1(_EBX) &= 0x78u;
  while ( 1 )
  {
    v51 = __CFADD__(_EBX, v30) || _EBX + v30 == 0;
    _EDI = _EBX + v30;
    if ( v51 || !v51 )
    {
      BYTE1(_EBX) += BYTE1(_ECX);
      LOBYTE(_EAX) = _EAX - _ECX;
      LOBYTE(_EBX) = (_EBX - 1 - (__CFSHL__(BYTE1(_EAX), _ECX) + _EDX)) | 0x64;
      BYTE1(_EAX) = _EBX ^ (BYTE1(_EAX) << _ECX);
      __asm { rcr     ebx, cl }
      v129 = _EDX | (a6 - _EDI);
      LOBYTE(_EBX) = __ROR1__(_EBX - 4, _ECX);
      _EBX = _EAX & _EBX;
      LOBYTE(_EAX) = _EAX - 40;
      LOBYTE(_EBX) = (_BYTE)_EBX << _ECX;
      __asm { rcr     edi, cl }
      _EDX = _EDX >> _ECX;
      LOBYTE(_EDX) = BYTE1(_EBX) | _EDX;
      __asm { rcl     bh, cl }
      _EBX = _ECX & _EBX;
      v89 = __CFSHR__(BYTE1(_EBX), _ECX);
      BYTE1(_EBX) >>= _ECX;
      LOBYTE(_EBX) = BYTE1(_EAX) - (v89 + _EAX);
      __asm { rcl     bl, cl }
      LOBYTE(_EBX) = (unsigned __int8)(BYTE1(_EBX) & _EBX) >> _ECX;
      v118 = _EBX + v129;
      __asm { rcr     eax, cl }
      v120 = _EDI & _EAX;
      BYTE1(_EDX) = __ROL1__(_EDX + BYTE1(_EDX) + 33, _ECX) + 1;
      v127 = _EDX ^ _EDI;
      SBYTE1(v120) >>= _ECX;
      BYTE1(_EDX) -= _ECX;
      LOBYTE(v120) = BYTE1(_ECX);
      HIWORD(_EBX) = HIWORD(v120);
      LOBYTE(_EBX) = BYTE1(_EDX);
      BYTE1(_EBX) = BYTE1(v120) - 94;
      v89 = v120 < v127;
      v121 = v120 - v127;
      _EBX = _EBX >> _ECX;
      v123 = __ROL4__(v127 & v118, _ECX);
      __asm { rcr     bh, cl }
      BYTE1(v121) += v121;
      LOBYTE(_EDX) = __ROR1__((char)(v89 + _EDX - 104) >> _ECX, _ECX) | 0xB4;
      BYTE1(_EDX) += BYTE1(_EBX);
      BYTE1(_EBX) = v127 ^ BYTE1(v127);
      __asm { rcr     edx, cl }
      v50 = __ROL4__(v121, _ECX);
      v89 = v123 < _ECX;
      v49 = v123 - _ECX;
      BYTE1(v50) -= v89 + 74;
      LOBYTE(_EDX) = _EDX | 0x5C;
      __asm { rcl     bh, cl }
      BYTE1(_EDX) = ((char)(BYTE1(_EDX) - 71) >> _ECX) - v50;
      LOBYTE(v96) = __ROL1__(v127 - _EDX - 1, _ECX);
      _EAX = __ROR4__(v127, _ECX) + v50;
      HIBYTE(v96) = -39;
      __asm { rcl     al, cl }
      LOBYTE(_EDX) = _EDX | 9;
      _BH = ((unsigned __int16)(v96 - _EDX) >> 8) - 60;
      v100 = __ROR4__((unsigned int)(v49 >> _ECX) >> _ECX, _ECX);
      v101 = __CFSHR__(v100, _ECX);
      v102 = v100 >> _ECX;
      if ( !v101 && v102 != 0 && (v101 || v102 == 0) )
        __halt();
      __asm { rcl     dh, cl }
      BYTE1(_EDX) -= v101 + _EDX;
      _EDX = __ROR4__(_EDX, _ECX);
      BYTE1(_EDX) >>= _ECX;
      LOBYTE(_EDX) = (_BYTE)_EDX << _ECX;
      __asm
      {
        rcl     dh, cl
        rcl     bh, cl
      }
      BYTE1(_EDX) ^= 0xCFu;
      __asm { rcl     edx, cl }
      JUMPOUT(0x40C417);
    }
    LOBYTE(_EAX) = 38;
    BYTE1(_EAX) = a8;
    __asm { aam     43h ; 'C' }
    _ECX = a6 & _ECX;
    _EDI = _EDI << _ECX;
    v56 = _EBX + _EDX;
    LOBYTE(_ECX) = BYTE1(_ECX);
    __asm { rcl     ecx, cl }
    BYTE1(_EBX) = __ROL1__(BYTE1(_EBX), _ECX);
    _ECX = _EAX + _ECX;
    LOBYTE(v56) = ((_BYTE)v56 + 65) << _ECX;
    LOBYTE(_EBX) = _EBX + 59;
    _ESI = a6 - v56;
    __asm
    {
      rcr     edi, cl
      rcr     esi, cl
    }
    _EBX = _EBX << _ECX;
    _EDX = 0;
    LOBYTE(_ECX) = (BYTE1(_EAX) | _ECX) - 120;
    BYTE1(_ECX) += 11;
    v87 = _EBX;
    v88 = _ESI << _ECX;
    v89 = __CFSHL__(_ECX, _ECX);
    LOBYTE(_ECX) = (_BYTE)_ECX << _ECX;
    if ( v89 || !v89 )
      break;
    LOBYTE(_EAX) = *(_BYTE *)v88;
    v90 = v89 + _EAX - 215824802;
    LOBYTE(_EBX) = __ROR1__(_EBX, _ECX);
    LOBYTE(v90) = -123;
    v91 = _EBX + 1;
    BYTE1(v91) = -84;
    LOBYTE(_EDX) = ~(_BYTE)v91;
    _EBX = v90 & v91;
    a6 = v88 + 1 - v90;
    LOBYTE(v90) = _EDX ^ 0x85;
    _EAX = v90 << _ECX;
    __asm
    {
      rcl     dl, cl
      rcl     bl, cl
    }
    LOBYTE(_EDX) = _EDX + 1;
    _EDX = __ROR4__(_EDX, _ECX);
    LOBYTE(_EAX) = _EDX | _EAX;
    BYTE1(_EAX) += 80;
    __asm
    {
      rcl     dh, cl
      rcr     edx, cl
    }
    _EDI = _EDX + __ROL4__(v87 << _ECX, _ECX);
    BYTE1(_EBX) &= 0x5Au;
    v95 = __OFADD__(51, (_BYTE)_EAX);
    LOBYTE(_EAX) = _EAX + 51;
    if ( !v95 && v95 )
    {
      __asm { int     0DFh; used by BASIC while in interpreter }
      JUMPOUT(0x40C8D4);
    }
    LOBYTE(_EBX) = BYTE1(_EDX);
    __asm { rcr     edi, cl }
    _EDI = _EDI >> _ECX;
    BYTE1(_EAX) <<= _ECX;
    __asm { rcr     ah, cl }
    _DH = BYTE1(_EDX) >> _ECX;
    BYTE1(_EAX) -= BYTE1(_EBX);
    LOBYTE(_EBX) = _EBX & 0xB8;
    __asm { rcl     dh, cl }
    v89 = __CFSHL__(_EAX, _ECX);
    _EAX = _EAX << _ECX;
    BYTE1(_EBX) = v89 + (BYTE1(_EBX) & 0x83) + 62;
    BYTE1(_EAX) += _EBX;
    __asm { rcl     edi, cl }
    LOBYTE(_EBX) = _EBX & 0x76;
    __asm { rcl     bl, cl }
    BYTE1(_EDX) = _DH >> _ECX;
    __asm { rcl     ah, cl }
    BYTE1(_EAX) <<= _ECX;
    v89 = __CFSHR__(_EBX, _ECX);
    _EBX = _EBX >> _ECX;
    _EAX = _EBX + v89 + _EAX;
    _ECX = _ECX - 1163517606;
    BYTE1(_EAX) -= BYTE1(_EBX);
    HIWORD(_EBX) = HIWORD(_EAX);
    LOBYTE(_EAX) = _EAX - 45;
    BYTE1(_EBX) = 56;
    if ( (char)((BYTE1(_EAX) << _ECX) + 1) < 0 == __OFADD__(1, BYTE1(_EAX) << _ECX)
      && (char)((BYTE1(_EAX) << _ECX) + 1) < 0 != __OFADD__(1, BYTE1(_EAX) << _ECX) )
    {
      *_EDI = _EAX;
      goto LABEL_40;
    }
    LOBYTE(_EBX) = 45;
    __asm { rcl     eax, cl }
    v30 = __ROL4__(_EDI, _ECX);
    LOBYTE(_EDX) = BYTE1(_EDX) & 0x75;
    if ( _ECX == 1535456256 )
    {
      v32 = _EDX | v30;
      LOBYTE(_EBX) = 22;
      goto LABEL_53;
    }
  }
  LOBYTE(_ECX) = _ECX - (v89 + BYTE1(_EBX));
  _ECX = __ROL4__(_ECX, _ECX);
  v25 = _EBX | v88;
  ++BYTE1(_EBX);
  ++BYTE1(_ECX);
  v18 = _EBX & v25;
  v19 = v87 - _EBX;
  LOBYTE(_EBX) = (char)_EBX >> _ECX;
  __asm { rcl     ebx, cl }
  v21 = (char)(_ECX - 46) < 0;
  LOBYTE(_ECX) = _ECX - 46;
  __asm { rcl     ecx, cl }
  if ( !v21 && v21 )
    JUMPOUT(0x40C01C);
  _ECX = _ECX << _ECX;
  LOBYTE(_ECX) = BYTE1(_EBX) - 1 + 114;
  __asm { rcr     ecx, cl }
  BYTE1(_EBX) = 52;
  LOBYTE(_ECX) = __ROL1__(_ECX, _ECX);
  __asm { rcr     ebx, cl }
  BYTE1(_ECX) <<= _ECX;
  _EBX = _EAX ^ _EBX;
  LOBYTE(_ECX) = _EAX ^ 0x88;
  __asm { rcr     bh, cl }
  v86 = _EAX ^ (v19 + _EBX);
  a6 = __ROR4__(v18, _EAX ^ 0x88);
  BYTE1(v86) ^= _EAX;
  v85 = _EAX + v19;
  BYTE1(_ECX) ^= 0x9Du;
  LOBYTE(v86) = BYTE1(v86) + (v86 | 0x3A);
  LOBYTE(_ECX) = (unsigned __int8)_ECX >> _ECX << ((unsigned __int8)_ECX >> _ECX);
  --BYTE1(v86);
  LOBYTE(v86) = _EAX & v86;
  LOBYTE(_ECX) = (_ECX + 26) & 0x1E;
  BYTE1(v86) >>= _ECX;
  v109 = v86 ^ v85;
  v89 = __CFADD__(__CFSHL__(BYTE1(_ECX), _ECX), (_BYTE)_ECX);
  LOBYTE(_ECX) = __CFSHL__(BYTE1(_ECX), _ECX) + _ECX;
  _EBX = a6 + v89 + v86;
  BYTE1(_ECX) = BYTE1(_EAX) << _ECX;
  v110 = _ECX | v109;
  LOBYTE(_EBX) = (unsigned __int8)_EBX >> _ECX;
  v111 = __CFSHL__(v110, _ECX);
  v32 = v110 << _ECX;
  if ( v111 || !v111 )
  {
    ++BYTE1(_ECX);
    __asm { rcr     bh, cl }
    LOBYTE(_ECX) = _ECX + 1;
    v67 = _ECX << _ECX;
    v68 = _EBX + 1;
    _CX = __ROR4__(v67, v67);
    v75 = BYTE1(_EAX) + BYTE1(v68) == 0;
    BYTE1(v68) += BYTE1(_EAX);
    __asm { rcl     cl, cl }
    v62 = __ROL4__(v68, _CL);
    __asm { rcr     ch, cl }
    v65 = __CFSHR__(v62, _CL);
    _EBX = __ROR4__(v62, _CL);
    v63 = v65 || v75;
    if ( !v65 && !v75 && v63 )
    {
      __asm { rcl     ebx, cl }
      JUMPOUT(0x40C356);
    }
    JUMPOUT(0x40C367);
  }
  __asm { int     1Bh; CTRL-BREAK KEY }
LABEL_53:
  v112 = __CFSHL__(_ECX, _ECX);
  LOWORD(_ECX) = __PAIR16__(BYTE1(_ECX), __ROL1__(_ECX, _ECX)) | 0xED00;
  v89 = __CFADD__(v112, (_BYTE)_EDX);
  LOBYTE(_EDX) = v112 + _EDX;
  BYTE1(_EBX) += (v89 | __CFADD__((_BYTE)_EDX, -117)) + 67;
  LOBYTE(_EDX) = _EDX - 117 + 1;
  _EDX = _EDX << _ECX;
  LOBYTE(_EDX) = __ROL1__(_EDX, _ECX);
  HIWORD(_EAX) = 16049;
  BYTE1(_EBX) += 70;
  LOBYTE(_EBX) = ((unsigned __int8)_EBX >> _ECX) | 0xA5;
  v73 = _EBX + 1;
  BYTE1(_EDX) = BYTE1(v73);
  v10 = v32 - 1;
  do
  {
    LOBYTE(v73) = BYTE1(_ECX) & v73;
    v72 = v10 & _ECX;
    a6 >>= v72;
    v89 = __CFSHL__(_EDX, v72);
    _EDX <<= v72;
    v74 = v89 + _EDX;
    v89 = BYTE1(v73) < (unsigned __int8)(v89 + _EDX);
    BYTE1(v73) -= v74;
    v77 = __OFSUB__(v72, 1);
    v75 = v72 == 1;
    v78 = v89 || v72 == 1;
    v76 = v72 - 1 < 0;
    _ECX = v72 - 1;
    if ( v78 || !v78 )
    {
      v43 = _ECX ^ 0x86;
      BYTE1(_EDX) <<= v43;
      _CL = v43 >> v43;
      LOBYTE(_EAX) = 5 - _EDX;
      __asm { rcr     dh, cl }
      _BH = __ROL1__(BYTE1(v73), _CL);
      v48 = _DH - 7;
      _ECX = _mm_cvtsi64_si32(_mm_cvtsi32_si64(0x3EB10605u));
      v14 = v48 >> _ECX;
      BYTE1(_EAX) = __ROR1__(-126, _ECX);
      __asm { rcr     eax, cl }
      if ( v15 || !v15 )
      {
        v89 = __CFADD__(__CFSHL__(v10 >> _ECX, _ECX), _EAX);
        _EAX = __CFSHL__(v10 >> _ECX, _ECX) + _EAX;
        v89 |= __CFADD__(_ECX, _EAX);
        _EAX += _ECX;
        BYTE1(_EDX) = v14 - (v89 - 55);
        __asm { rcr     bh, cl }
        v114 = _ECX < 0x3EB10605;
        v115 = (int)_ECX <= 1051788805;
        if ( _ECX != 1051788805 )
        {
          __asm { rcl     edx, cl }
          BYTE1(_EAX) = __ROR1__(BYTE1(_ECX) & BYTE1(_EAX), _ECX) + 1;
          __asm
          {
            rcr     al, cl
            rcr     cl, cl
          }
          LOBYTE(_EAX) = (_BYTE)_EAX << _CL;
          if ( !__CFSHR__(_EAX, _CL) && (_BYTE)_EAX != 0 && (__CFSHR__(_EAX, _CL) || (_BYTE)_EAX == 0) )
            JUMPOUT(0x40C0E9);
          JUMPOUT(0x40C857);
        }
        __asm { rcl     cl, cl }
        if ( !v115 && v115 )
        {
          *(_BYTE *)_EDX -= ((unsigned __int8)(v114 + _EAX) > 6u) + (BYTE1(_EAX) & _EDX);
          JUMPOUT(0xE9E06E83);
        }
        JUMPOUT(0x40C09F);
      }
      __asm
      {
        int     0D2h; used by BASIC while in interpreter
        aad     0D3h ; 'Ó'
      }
      _disable();
      LOBYTE(_EAX) = -64;
      __asm { rcl     al, cl }
LABEL_40:
      _ECX = _ECX << _ECX;
      __asm { rcl     ch, cl }
      JUMPOUT(0x40C1FD);
    }
  }
  while ( !v77 );
  if ( !(v76 ^ v77 | v75) )
    return nullsub_1(_ECX);
  v80 = ~v73;
  v79 = MEMORY[0xE1CB9640](_ECX);
  LOBYTE(v80) = v79 | v80;
  v82 = v81 < 1;
  v83 = v81 - 1;
  if ( !v82 && v82 )
  {
    _EDX = -(*(_DWORD *)(v10 - 54) < v83);
    __asm { fist    dword ptr [edx] }
    __outbyte(_EDX, v79);
    LOBYTE(v83) = (unsigned __int8)v83 >> v83;
    LOBYTE(v80) = v80 ^ 2;
    v134 = ((__int64 (__fastcall *)(unsigned int, int))loc_40D4C1)(v83, _EDX);
    BYTE1(v80) = -108;
    __asm { fidivr  word ptr [ebp+57h] }
    *(_DWORD *)(v80 + 14) = __ROL4__(*(_DWORD *)(v80 + 14), 1);
    *(_DWORD *)(HIDWORD(v134) + 67) += v134;
    __asm { iret }
    JUMPOUT(0x40C982);
  }
  return __ROR4__(v79, v83);
}
// 40BF21: control flows out of bounds to 40BF27
// 40BFFA: control flows out of bounds to 40BFFB
// 40C01B: control flows out of bounds to 40C01C
// 40C0E3: control flows out of bounds to 40C0E9
// 40C10C: control flows out of bounds to 40C10E
// 40C357: inconsistent fpu stack
// 40C71F: control flows out of bounds to 40C725
// 40C773: control flows out of bounds to 40C779
// 40C7A7: control flows out of bounds to 40C7AD
// 40C8A1: control flows out of bounds to 40C8A2
// 40C981: control flows out of bounds to 40C982
// 40C250: control flows out of bounds to 40C356
// 40C448: control flows out of bounds to 40C58E
// 40C55D: control flows out of bounds to 40C1FD
// 40C59E: control flows out of bounds to 40C8D4
// 40C67D: control flows out of bounds to 40C94B
// 40C858: control flows out of bounds to E9E06E83
// 40BF8C: control flows out of bounds to 40BF69
// 40C0D9: control flows out of bounds to 40C857
// 40C22C: control flows out of bounds to 40C367
// 40C844: control flows out of bounds to 40C09F
// 40C937: control flows out of bounds to 40C417
// 40BF21: conditional instruction was optimized away because edi.4!=0
// 40BF8C: conditional instruction was optimized away because of.1==0
// 40BFB0: conditional instruction was optimized away because edi.4>=0
// 40C3DF: conditional instruction was optimized away because dh.1>=0
// 40C60F: conditional instruction was optimized away because al.1!=0
// 40C7A7: conditional instruction was optimized away because eax.4>=0
// 40C8C7: conditional instruction was optimized away because dl.1!=0
// 40C941: conditional instruction was optimized away because al.1>=0
// 40BF7C: variable 'v15' is possibly undefined
// 40C341: variable 'v81' is possibly undefined
// 40C368: using guessed type int __thiscall nullsub_1(_DWORD);

// nfuncs=2 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
