/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

// char __usercall start@<al>(int a1@<eax>, int a2@<edx>, unsigned int a3@<ecx>, unsigned int a4@<ebx>, int a5@<edi>, int a6@<esi>, double a7@<st2>, char a8@<efl>);
int __thiscall nullsub_1(_DWORD); // weak

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_40D4C1; // weak


//----- (0040C111) --------------------------------------------------------
char __usercall start@<al>(int a1@<eax>, int a2@<edx>, unsigned int a3@<ecx>, unsigned int a4@<ebx>, int a5@<edi>, int a6@<esi>, double a7@<st2>, char a8@<efl>)
{
  unsigned int v9; // edi
  char v13; // dh
  char v14; // of
  int v17; // esi
  int v18; // edi
  bool v20; // sf
  int v24; // esi
  int v29; // edi
  int v31; // edi
  unsigned int v36; // edx
  int v37; // ebx
  unsigned int v38; // ecx
  unsigned int v40; // edx
  char v42; // cl
  unsigned __int8 v47; // dh
  int v48; // esi
  int v49; // eax
  bool v50; // cf
  bool v51; // zf
  bool v52; // sf
  bool v53; // of
  bool v54; // pf
  bool v55; // cc
  unsigned int v60; // edx
  int v66; // ebx
  bool v67; // cc
  bool v69; // tt
  unsigned int v71; // ecx
  int v72; // ebx
  int v76; // ecx
  int v77; // ebx
  char v78; // tt
  bool v79; // zf
  bool v80; // sf
  bool v81; // of
  bool v82; // cc
  int v83; // eax
  int v84; // ebx
  int v85; // ecx
  bool v86; // cc
  unsigned int v87; // ecx
  int v88; // edx
  int v89; // edi
  int v90; // ebx
  int v91; // edi
  unsigned int v92; // esi
  bool v93; // cf
  int v94; // eax
  int v95; // ebx
  bool v99; // of
  __int16 v100; // bx
  int v104; // esi
  bool v105; // cf
  int v106; // esi
  int v113; // edi
  int v114; // edi
  bool v115; // cf
  bool v116; // tt
  bool v118; // cf
  bool v119; // cc
  int v122; // esi
  unsigned int v124; // eax
  unsigned int v125; // eax
  unsigned int v127; // esi
  unsigned int v131; // edi
  int v133; // esi
  __int64 v138; // rax

  v38 = a3 >> a3;
  BYTE1(a2) ^= BYTE1(a4);
  LOBYTE(a1) = (_BYTE)a1 << v38;
  LOBYTE(v38) = v38 - 73;
  _ECX = v38 << v38;
  v40 = a2 << _ECX;
  __asm { rcl     ecx, cl }
  v36 = v40 >> _ECX;
  LOBYTE(a1) = (char)a1 >> _ECX;
  LOBYTE(a4) = __ROR1__(a4, _ECX);
  v37 = a4 >> _ECX;
  _EAX = __ROL4__(a1, _ECX);
  if ( !__SETP__(v37, 0) && __SETP__(v37, 0) )
    JUMPOUT(0x40C10E);
  _ECX = 2095516308;
  BYTE1(_EAX) = (_EAX ^ BYTE1(_EAX)) - BYTE1(v36);
  LOBYTE(v36) = 106;
  _EDX = v36 - 1;
  BYTE1(_EDX) -= __CFSHL__(a5, -108) + 117;
  LOBYTE(_EAX) = _EAX - 1;
  v29 = __ROL4__(a5, 148) << 20;
  BYTE1(v37) = v37 + 1;
  LOBYTE(v37) = __ROR1__(v37, 148);
  _EBX = v37 >> 20;
  BYTE1(_EBX) &= 0x78u;
  while ( 1 )
  {
    v50 = __CFADD__(_EBX, v29);
    v53 = __OFADD__(_EBX, v29);
    v51 = _EBX + v29 == 0;
    v55 = __CFADD__(_EBX, v29) || v51;
    v54 = __SETP__(_EBX + v29, 0);
    v52 = _EBX + v29 < 0;
    _EDI = _EBX + v29;
    if ( v55 || !v55 )
    {
      BYTE1(_EBX) += BYTE1(_ECX);
      LOBYTE(_EAX) = _EAX - _ECX;
      LOBYTE(_EBX) = (_EBX - 1 - (__CFSHL__(BYTE1(_EAX), _ECX) + _EDX)) | 0x64;
      BYTE1(_EAX) = _EBX ^ (BYTE1(_EAX) << _ECX);
      __asm { rcr     ebx, cl }
      v133 = _EDX | (a6 - _EDI);
      LOBYTE(_EBX) = __ROR1__(_EBX - 4, _ECX);
      _EBX = _EAX & _EBX;
      LOBYTE(_EAX) = _EAX - 40;
      LOBYTE(_EBX) = (_BYTE)_EBX << _ECX;
      __asm { rcr     edi, cl }
      _EDX = _EDX >> _ECX;
      LOBYTE(_EDX) = BYTE1(_EBX) | _EDX;
      __asm { rcl     bh, cl }
      _EBX = _ECX & _EBX;
      v50 = __CFSHR__(BYTE1(_EBX), _ECX);
      BYTE1(_EBX) >>= _ECX;
      LOBYTE(_EBX) = BYTE1(_EAX) - (v50 + _EAX);
      __asm { rcl     bl, cl }
      LOBYTE(_EBX) = (unsigned __int8)(BYTE1(_EBX) & _EBX) >> _ECX;
      v122 = _EBX + v133;
      __asm { rcr     eax, cl }
      v124 = _EDI & _EAX;
      BYTE1(_EDX) = __ROL1__(_EDX + BYTE1(_EDX) + 33, _ECX) + 1;
      v131 = _EDX ^ _EDI;
      SBYTE1(v124) >>= _ECX;
      BYTE1(_EDX) -= _ECX;
      LOBYTE(v124) = BYTE1(_ECX);
      HIWORD(_EBX) = HIWORD(v124);
      LOBYTE(_EBX) = BYTE1(_EDX);
      BYTE1(_EBX) = BYTE1(v124) - 94;
      v50 = v124 < v131;
      v125 = v124 - v131;
      _EBX = _EBX >> _ECX;
      v127 = __ROL4__(v131 & v122, _ECX);
      __asm { rcr     bh, cl }
      BYTE1(v125) += v125;
      LOBYTE(_EDX) = __ROR1__((char)(v50 + _EDX - 104) >> _ECX, _ECX) | 0xB4;
      BYTE1(_EDX) += BYTE1(_EBX);
      BYTE1(_EBX) = v131 ^ BYTE1(v131);
      __asm { rcr     edx, cl }
      v49 = __ROL4__(v125, _ECX);
      v50 = v127 < _ECX;
      v48 = v127 - _ECX;
      BYTE1(v49) -= v50 + 74;
      LOBYTE(_EDX) = _EDX | 0x5C;
      __asm { rcl     bh, cl }
      BYTE1(_EDX) = ((char)(BYTE1(_EDX) - 71) >> _ECX) - v49;
      LOBYTE(v100) = __ROL1__(v131 - _EDX - 1, _ECX);
      _EAX = __ROR4__(v131, _ECX) + v49;
      HIBYTE(v100) = -39;
      __asm { rcl     al, cl }
      LOBYTE(_EDX) = _EDX | 9;
      _BH = ((unsigned __int16)(v100 - _EDX) >> 8) - 60;
      v104 = __ROR4__((unsigned int)(v48 >> _ECX) >> _ECX, _ECX);
      v105 = __CFSHR__(v104, _ECX);
      v106 = v104 >> _ECX;
      if ( !v105 && v106 != 0 && (v105 || v106 == 0) )
        __halt();
      __asm { rcl     dh, cl }
      BYTE1(_EDX) -= v105 + _EDX;
      _EDX = __ROR4__(_EDX, _ECX);
      BYTE1(_EDX) >>= _ECX;
      LOBYTE(_EDX) = (_BYTE)_EDX << _ECX;
      __asm
      {
        rcl     dh, cl
        rcl     bh, cl
      }
      BYTE1(_EDX) ^= 0xCFu;
      __asm { rcl     edx, cl }
      JUMPOUT(0x40C417);
    }
    LOBYTE(_EAX) = 38;
    BYTE1(_EAX) = a8;
    __asm { aam     43h ; 'C' }
    _ECX = a6 & _ECX;
    _EDI = _EDI << _ECX;
    v60 = _EBX + _EDX;
    LOBYTE(_ECX) = BYTE1(_ECX);
    __asm { rcl     ecx, cl }
    BYTE1(_EBX) = __ROL1__(BYTE1(_EBX), _ECX);
    _ECX = _EAX + _ECX;
    LOBYTE(v60) = ((_BYTE)v60 + 65) << _ECX;
    LOBYTE(_EBX) = _EBX + 59;
    _ESI = a6 - v60;
    __asm
    {
      rcr     edi, cl
      rcr     esi, cl
    }
    _EBX = _EBX << _ECX;
    _EDX = 0;
    LOBYTE(_ECX) = (BYTE1(_EAX) | _ECX) - 120;
    BYTE1(_ECX) += 11;
    v91 = _EBX;
    v92 = _ESI << _ECX;
    v93 = __CFSHL__(_ECX, _ECX);
    LOBYTE(_ECX) = (_BYTE)_ECX << _ECX;
    if ( v93 || !v93 )
      break;
    LOBYTE(_EAX) = *(_BYTE *)v92;
    v94 = v93 + _EAX - 215824802;
    LOBYTE(_EBX) = __ROR1__(_EBX, _ECX);
    LOBYTE(v94) = -123;
    v95 = _EBX + 1;
    BYTE1(v95) = -84;
    LOBYTE(_EDX) = ~(_BYTE)v95;
    _EBX = v94 & v95;
    a6 = v92 + 1 - v94;
    LOBYTE(v94) = _EDX ^ 0x85;
    _EAX = v94 << _ECX;
    __asm
    {
      rcl     dl, cl
      rcl     bl, cl
    }
    LOBYTE(_EDX) = _EDX + 1;
    _EDX = __ROR4__(_EDX, _ECX);
    LOBYTE(_EAX) = _EDX | _EAX;
    BYTE1(_EAX) += 80;
    __asm
    {
      rcl     dh, cl
      rcr     edx, cl
    }
    _EDI = _EDX + __ROL4__(v91 << _ECX, _ECX);
    BYTE1(_EBX) &= 0x5Au;
    v99 = __OFADD__(51, (_BYTE)_EAX);
    LOBYTE(_EAX) = _EAX + 51;
    if ( !v99 && v99 )
    {
      __asm { int     0DFh; used by BASIC while in interpreter }
      JUMPOUT(0x40C8D4);
    }
    LOBYTE(_EBX) = BYTE1(_EDX);
    __asm { rcr     edi, cl }
    _EDI = _EDI >> _ECX;
    BYTE1(_EAX) <<= _ECX;
    __asm { rcr     ah, cl }
    _DH = BYTE1(_EDX) >> _ECX;
    BYTE1(_EAX) -= BYTE1(_EBX);
    LOBYTE(_EBX) = _EBX & 0xB8;
    __asm { rcl     dh, cl }
    v50 = __CFSHL__(_EAX, _ECX);
    _EAX = _EAX << _ECX;
    BYTE1(_EBX) = v50 + (BYTE1(_EBX) & 0x83) + 62;
    BYTE1(_EAX) += _EBX;
    __asm { rcl     edi, cl }
    LOBYTE(_EBX) = _EBX & 0x76;
    __asm { rcl     bl, cl }
    BYTE1(_EDX) = _DH >> _ECX;
    __asm { rcl     ah, cl }
    BYTE1(_EAX) <<= _ECX;
    v50 = __CFSHR__(_EBX, _ECX);
    _EBX = _EBX >> _ECX;
    _EAX = _EBX + v50 + _EAX;
    _ECX = _ECX - 1163517606;
    BYTE1(_EAX) -= BYTE1(_EBX);
    HIWORD(_EBX) = HIWORD(_EAX);
    LOBYTE(_EAX) = _EAX - 45;
    BYTE1(_EBX) = 56;
    if ( (char)((BYTE1(_EAX) << _ECX) + 1) < 0 == __OFADD__(1, BYTE1(_EAX) << _ECX)
      && (char)((BYTE1(_EAX) << _ECX) + 1) < 0 != __OFADD__(1, BYTE1(_EAX) << _ECX) )
    {
      *_EDI = _EAX;
      goto LABEL_41;
    }
    LOBYTE(_EBX) = 45;
    __asm { rcl     eax, cl }
    v29 = __ROL4__(_EDI, _ECX);
    LOBYTE(_EDX) = BYTE1(_EDX) & 0x75;
    if ( _ECX == 1535456256 )
    {
      v31 = _EDX | v29;
      LOBYTE(_EBX) = 22;
      goto LABEL_54;
    }
  }
  LOBYTE(_ECX) = _ECX - (v93 + BYTE1(_EBX));
  _ECX = __ROL4__(_ECX, _ECX);
  v24 = _EBX | v92;
  ++BYTE1(_EBX);
  ++BYTE1(_ECX);
  v17 = _EBX & v24;
  v18 = v91 - _EBX;
  LOBYTE(_EBX) = (char)_EBX >> _ECX;
  __asm { rcl     ebx, cl }
  v20 = (char)(_ECX - 46) < 0;
  LOBYTE(_ECX) = _ECX - 46;
  __asm { rcl     ecx, cl }
  if ( !v20 && v20 )
    JUMPOUT(0x40C01C);
  _ECX = _ECX << _ECX;
  LOBYTE(_ECX) = BYTE1(_EBX) - 1 + 114;
  __asm { rcr     ecx, cl }
  BYTE1(_EBX) = 52;
  LOBYTE(_ECX) = __ROL1__(_ECX, _ECX);
  __asm { rcr     ebx, cl }
  BYTE1(_ECX) <<= _ECX;
  _EBX = _EAX ^ _EBX;
  LOBYTE(_ECX) = _EAX ^ 0x88;
  __asm { rcr     bh, cl }
  v90 = _EAX ^ (v18 + _EBX);
  a6 = __ROR4__(v17, _EAX ^ 0x88);
  BYTE1(v90) ^= _EAX;
  v89 = _EAX + v18;
  BYTE1(_ECX) ^= 0x9Du;
  LOBYTE(v90) = BYTE1(v90) + (v90 | 0x3A);
  LOBYTE(_ECX) = (unsigned __int8)_ECX >> _ECX << ((unsigned __int8)_ECX >> _ECX);
  --BYTE1(v90);
  LOBYTE(v90) = _EAX & v90;
  LOBYTE(_ECX) = (_ECX + 26) & 0x1E;
  BYTE1(v90) >>= _ECX;
  v113 = v90 ^ v89;
  v50 = __CFADD__(__CFSHL__(BYTE1(_ECX), _ECX), (_BYTE)_ECX);
  LOBYTE(_ECX) = __CFSHL__(BYTE1(_ECX), _ECX) + _ECX;
  _EBX = a6 + v50 + v90;
  BYTE1(_ECX) = BYTE1(_EAX) << _ECX;
  v114 = _ECX | v113;
  LOBYTE(_EBX) = (unsigned __int8)_EBX >> _ECX;
  v115 = __CFSHL__(v114, _ECX);
  v31 = v114 << _ECX;
  if ( v115 || !v115 )
  {
    ++BYTE1(_ECX);
    __asm { rcr     bh, cl }
    LOBYTE(_ECX) = _ECX + 1;
    v71 = _ECX << _ECX;
    v72 = _EBX + 1;
    _CX = __ROR4__(v71, v71);
    v51 = BYTE1(_EAX) + BYTE1(v72) == 0;
    BYTE1(v72) += BYTE1(_EAX);
    __asm { rcl     cl, cl }
    v66 = __ROL4__(v72, _CL);
    __asm { rcr     ch, cl }
    v69 = __CFSHR__(v66, _CL);
    _EBX = __ROR4__(v66, _CL);
    v67 = v69 || v51;
    if ( !v69 && !v51 && v67 )
    {
      __asm { rcl     ebx, cl }
      JUMPOUT(0x40C356);
    }
    JUMPOUT(0x40C367);
  }
  __asm { int     1Bh; CTRL-BREAK KEY }
LABEL_54:
  v116 = __CFSHL__(_ECX, _ECX);
  LOWORD(_ECX) = __PAIR16__(BYTE1(_ECX), __ROL1__(_ECX, _ECX)) | 0xED00;
  v50 = __CFADD__(v116, (_BYTE)_EDX);
  LOBYTE(_EDX) = v116 + _EDX;
  BYTE1(_EBX) += (v50 | __CFADD__((_BYTE)_EDX, -117)) + 67;
  LOBYTE(_EDX) = _EDX - 117 + 1;
  _EDX = _EDX << _ECX;
  LOBYTE(_EDX) = __ROL1__(_EDX, _ECX);
  HIWORD(_EAX) = 16049;
  BYTE1(_EBX) += 70;
  LOBYTE(_EBX) = ((unsigned __int8)_EBX >> _ECX) | 0xA5;
  v77 = _EBX + 1;
  BYTE1(_EDX) = BYTE1(v77);
  v9 = v31 - 1;
  do
  {
    LOBYTE(v77) = BYTE1(_ECX) & v77;
    v76 = v9 & _ECX;
    a6 >>= v76;
    v50 = __CFSHL__(_EDX, v76);
    _EDX <<= v76;
    v78 = v50 + _EDX;
    v50 = BYTE1(v77) < (unsigned __int8)(v50 + _EDX);
    BYTE1(v77) -= v78;
    v81 = __OFSUB__(v76, 1);
    v79 = v76 == 1;
    v82 = v50 || v76 == 1;
    v80 = v76 - 1 < 0;
    _ECX = v76 - 1;
    if ( v82 || !v82 )
    {
      v42 = _ECX ^ 0x86;
      BYTE1(_EDX) <<= v42;
      _CL = v42 >> v42;
      LOBYTE(_EAX) = 5 - _EDX;
      __asm { rcr     dh, cl }
      _BH = __ROL1__(BYTE1(v77), _CL);
      v47 = _DH - 7;
      _ECX = _mm_cvtsi64_si32(_mm_cvtsi32_si64(0x3EB10605u));
      v13 = v47 >> _ECX;
      BYTE1(_EAX) = __ROR1__(-126, _ECX);
      __asm { rcr     eax, cl }
      if ( v14 || !v14 )
      {
        v50 = __CFADD__(__CFSHL__(v9 >> _ECX, _ECX), _EAX);
        _EAX = __CFSHL__(v9 >> _ECX, _ECX) + _EAX;
        v50 |= __CFADD__(_ECX, _EAX);
        _EAX += _ECX;
        BYTE1(_EDX) = v13 - (v50 - 55);
        __asm { rcr     bh, cl }
        v118 = _ECX < 0x3EB10605;
        v119 = (int)_ECX <= 1051788805;
        if ( _ECX != 1051788805 )
        {
          __asm { rcl     edx, cl }
          BYTE1(_EAX) = __ROR1__(BYTE1(_ECX) & BYTE1(_EAX), _ECX) + 1;
          __asm
          {
            rcr     al, cl
            rcr     cl, cl
          }
          LOBYTE(_EAX) = (_BYTE)_EAX << _CL;
          if ( !__CFSHR__(_EAX, _CL) && (_BYTE)_EAX != 0 && (__CFSHR__(_EAX, _CL) || (_BYTE)_EAX == 0) )
            JUMPOUT(0x40C0E9);
          JUMPOUT(0x40C857);
        }
        __asm { rcl     cl, cl }
        if ( !v119 && v119 )
        {
          *(_BYTE *)_EDX -= ((unsigned __int8)(v118 + _EAX) > 6u) + (BYTE1(_EAX) & _EDX);
          JUMPOUT(0xE9E06E83);
        }
        JUMPOUT(0x40C09F);
      }
      if ( v14 )
        JUMPOUT(0x40BF69);
      __asm
      {
        int     0D2h; used by BASIC while in interpreter
        aad     0D3h ; 'Ó'
      }
      _disable();
      LOBYTE(_EAX) = -64;
      __asm { rcl     al, cl }
LABEL_41:
      _ECX = _ECX << _ECX;
      __asm { rcl     ch, cl }
      JUMPOUT(0x40C1FD);
    }
  }
  while ( !v81 );
  if ( !(v80 ^ v81 | v79) )
    return nullsub_1(_ECX);
  v84 = ~v77;
  v83 = MEMORY[0xE1CB9640](_ECX);
  LOBYTE(v84) = v83 | v84;
  v86 = v85 < 1;
  v87 = v85 - 1;
  if ( !v86 && v86 )
  {
    v88 = -(*(_DWORD *)(v9 - 54) < v87);
    *(_DWORD *)v88 = (int)a7;
    __outbyte(v88, v83);
    LOBYTE(v87) = (unsigned __int8)v87 >> v87;
    LOBYTE(v84) = v84 ^ 2;
    v138 = ((__int64 (__fastcall *)(unsigned int, int))loc_40D4C1)(v87, v88);
    BYTE1(v84) = -108;
    *(_DWORD *)(v84 + 14) = __ROL4__(*(_DWORD *)(v84 + 14), 1);
    *(_DWORD *)(HIDWORD(v138) + 67) += v138;
    __asm { iret }
    JUMPOUT(0x40C982);
  }
  return __ROR4__(v83, v87);
}
// 40BF21: control flows out of bounds to 40BF27
// 40BFFA: control flows out of bounds to 40BFFB
// 40C01B: control flows out of bounds to 40C01C
// 40C0E3: control flows out of bounds to 40C0E9
// 40C10C: control flows out of bounds to 40C10E
// 40C71F: control flows out of bounds to 40C725
// 40C773: control flows out of bounds to 40C779
// 40C7A7: control flows out of bounds to 40C7AD
// 40C8A1: control flows out of bounds to 40C8A2
// 40C981: control flows out of bounds to 40C982
// 40C250: control flows out of bounds to 40C356
// 40C448: control flows out of bounds to 40C58E
// 40C55D: control flows out of bounds to 40C1FD
// 40C59E: control flows out of bounds to 40C8D4
// 40C67D: control flows out of bounds to 40C94B
// 40C858: control flows out of bounds to E9E06E83
// 40BF8C: control flows out of bounds to 40BF69
// 40C0D9: control flows out of bounds to 40C857
// 40C22C: control flows out of bounds to 40C367
// 40C844: control flows out of bounds to 40C09F
// 40C937: control flows out of bounds to 40C417
// 40BF21: conditional instruction was optimized away because of 'edi.4!=0'
// 40BFB0: conditional instruction was optimized away because of 'edi.4>=0'
// 40C3DF: conditional instruction was optimized away because of 'dh.1>=0'
// 40C60F: conditional instruction was optimized away because of 'al.1!=0'
// 40C7A7: conditional instruction was optimized away because of 'eax.4>=0'
// 40C8C7: conditional instruction was optimized away because of 'dl.1!=0'
// 40C941: conditional instruction was optimized away because of 'al.1>=0'
// 40BF7C: variable 'v14' is possibly undefined
// 40C341: variable 'v85' is possibly undefined
// 40C368: using guessed type int __thiscall nullsub_1(_DWORD);

// nfuncs=2 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
