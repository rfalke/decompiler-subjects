/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int@<eax>, int@<edx>, int@<ecx>, unsigned int@<ebp>);

//-------------------------------------------------------------------------
// Data declarations

int dword_40F000[512] =
{
  -19,
  4198404,
  -1958523136,
  1458209246,
  1265977207,
  48879107,
  7871232,
  393626042,
  1877867999,
  -2129556715,
  155536321,
  1146048697,
  1075462400,
  -1065287653,
  -278530,
  1682863430,
  1231351681,
  -217907121,
  -1891888061,
  -243186944,
  1007722951,
  2104324543,
  752858999,
  -338033854,
  -2017907393,
  -805093360,
  -19424,
  -1019887618,
  1817594191,
  -1936930375,
  871957305,
  -972881900,
  -251405941,
  1496434561,
  1040044799,
  9664721,
  -1958869426,
  1474855362,
  -67161017,
  58191323,
  1900255483,
  1153597727,
  458846311,
  1320878163,
  -35959965,
  58260911,
  1447279602,
  6304792,
  1024492815,
  74332068,
  2147203966,
  1213810267,
  55005022,
  884337619,
  1719219051,
  1685438401,
  1844637542,
  88091131,
  -2125864895,
  1174425024,
  -1216872688,
  107611135,
  188428648,
  1057745151,
  1304651079,
  1191212870,
  55460688,
  -542001410,
  -1761665,
  51564601,
  184549441,
  2121764358,
  219311097,
  707985557,
  214432256,
  -40968704,
  6881789,
  -368519054,
  -535808809,
  16321374,
  -537432828,
  -626767802,
  503320576,
  220463333,
  -150740851,
  -289966666,
  195273149,
  99548206,
  648413332,
  -38348767,
  882799651,
  42468869,
  -1341434570,
  912093039,
  16385271,
  1543552280,
  -82332928,
  -1520339410,
  164429939,
  16118773,
  185315282,
  -1610891850,
  -1706292036,
  2098323968,
  1819420935,
  -1369049253,
  -901768586,
  1974826299,
  -13889771,
  -1460217869,
  -477906475,
  234923008,
  -1119171072,
  247322587,
  1301668030,
  -368755946,
  -1220721408,
  -1829643411,
  -930816,
  5411259,
  -1074544112,
  -1315546213,
  11198208,
  -352318550,
  -69657104,
  -1883841539,
  205938693,
  -469761758,
  92391175,
  -101786729,
  -246059264,
  1210843220,
  8582133,
  -509776025,
  21587511,
  -1140712448,
  -1001075712,
  -2046069055,
  -11919432,
  1760821251,
  2090644290,
  438111494,
  834620752,
  -1273579534,
  253668352,
  -1238015312,
  5830770,
  -159419233,
  -1879007519,
  412142207,
  171416827,
  -1291837266,
  -1749915979,
  -736789429,
  2109174364,
  2817179,
  -2083192794,
  -342556301,
  1980600328,
  -2047900211,
  -1995569812,
  200021376,
  -275280523,
  -1157375225,
  1223919939,
  -912264412,
  -379061177,
  1712230618,
  -1314191609,
  1215880045,
  -569982646,
  -2062585854,
  1258019631,
  973143714,
  679871091,
  113277849,
  -379486794,
  1146945745,
  -1198151322,
  2122367744,
  -1773213882,
  -1073733825,
  110231784,
  -580878316,
  1464070833,
  -1459582603,
  -1591898075,
  1643164178,
  -654637043,
  1931888817,
  -557351385,
  1876788109,
  1027118148,
  -944943395,
  -1496014478,
  -905926385,
  -1888717974,
  449142744,
  922923113,
  -251313781,
  16277449,
  13631224,
  1610653748,
  1991393249,
  -1831247594,
  1734854713,
  879846656,
  186607132,
  -789276406,
  -1552023764,
  140668500,
  333550119,
  -1678068968,
  1547022797,
  -1118426364,
  10165048,
  -907037000,
  -784806744,
  930410189,
  -1401126012,
  -503002573,
  -352278948,
  -1075222870,
  -493193437,
  1363412736,
  -699862511,
  -1105558528,
  707909519,
  1542588778,
  -846787026,
  1628265085,
  -385030886,
  440250906,
  1325932177,
  -1234470295,
  -7935635,
  387360374,
  190554896,
  1353600563,
  -2096322333,
  -293135141,
  1565919860,
  1489730333,
  1741659866,
  1640366197,
  -228496420,
  1768715404,
  -828332549,
  -1240291925,
  -810711537,
  4104132,
  -1033555242,
  576266747,
  683836192,
  -576374970,
  407237350,
  615877632,
  440665311,
  880053662,
  -1997125413,
  1995858029,
  1043565833,
  -2076642965,
  1666580899,
  106621677,
  -1065429289,
  1680167171,
  1590631677,
  -1476250567,
  1507094564,
  -2036203439,
  83092927,
  -25952174,
  5540871,
  -1930461814,
  -56228442,
  756368562,
  684024646,
  1055293872,
  -1300178098,
  40732167,
  840609998,
  -231179330,
  1624183407,
  -670462975,
  188580803,
  442218013,
  25883565,
  757739264,
  -2083793336,
  1761630471,
  -1922518888,
  -525325433,
  1814795907,
  -1808619519,
  1157579703,
  1103009467,
  -272713125,
  9129541,
  -455867298,
  1033812708,
  13762678,
  905185403,
  -593828940,
  -1173698882,
  -857208623,
  783576776,
  -54305316,
  1559621713,
  -787477357,
  7748166,
  -1569658668,
  -252691470,
  -2131728711,
  -1712478474,
  -484039314,
  -1108626212,
  3885648,
  657187297,
  1976826140,
  1930657973,
  1220419077,
  481564142,
  1734725892,
  1977701935,
  6056056,
  1947856365,
  906119555,
  -1075705990,
  -1367028572,
  1966906191,
  -611007031,
  238047862,
  -130272441,
  -1121715450,
  637858712,
  1461577652,
  445497913,
  257671678,
  1949837795,
  -1137766455,
  -957110878,
  1472092922,
  -153005659,
  504395291,
  -1715651711,
  -811721565,
  -1909134743,
  -1738314514,
  -284516408,
  737142531,
  -588554469,
  906923593,
  1800627046,
  -323143734,
  721907576,
  167778731,
  -2050288834,
  1241964295,
  -1896942602,
  -264276130,
  1341108166,
  1884151818,
  685800139,
  -1995790629,
  -1832143293,
  1034955963,
  1802270863,
  -725720070,
  -1857523146,
  412326916,
  -951469201,
  1250356767,
  -2132835228,
  2075157450,
  -437844998,
  1613310699,
  -779089702,
  -1895974820,
  -693949367,
  101833825,
  -1752171934,
  -774847597,
  -1408660332,
  -1218469808,
  1068890259,
  626815529,
  21325606,
  1729010693,
  -1929952037,
  1235312544,
  230902723,
  723004941,
  785440858,
  -1448520232,
  -1693230711,
  -55252531,
  -1687644403,
  175399102,
  -820941935,
  -1180999397,
  -1012960121,
  -713765729,
  -437932789,
  1712753521,
  682964862,
  -454857712,
  624725240,
  -2117014682,
  1659629031,
  -16005805,
  887965041,
  1801881242,
  469568021,
  -1928422685,
  1999765261,
  -1887222712,
  -1022067697,
  -1429655879,
  -1377995901,
  -1919627055,
  -998667539,
  1553374562,
  -1040055945,
  51194343,
  1849503788,
  984890461,
  572636274,
  1634878461,
  1691538857,
  1405554414,
  -1157799965,
  -1040774107,
  -1620312322,
  -372892425,
  2103893119,
  -1636568930,
  -748878753,
  543349789,
  -1612545766,
  1055568578,
  1066594407,
  -1829877951,
  -2139630179,
  1341605004,
  -96150768,
  -1088032790,
  -1334929088,
  2135227121,
  807159078,
  56159311,
  57293791,
  1637037588,
  589343396,
  -996216386,
  297827356,
  -1114748882,
  -1828294730,
  -867953362,
  -1683592538,
  931773349,
  -1328936408,
  1027315711,
  -154412391,
  1684948028,
  -225380335,
  -1295897158,
  45994736,
  666914056,
  -453675047,
  -153340519,
  -601257210,
  416791812,
  -264958202,
  -983573751,
  53692961,
  -2051554450,
  -1878208381,
  -1344160256,
  -1406628093,
  -321688060,
  -1093235437,
  82418367,
  785268315,
  -1903374517,
  1567886231,
  12340999,
  -214015738,
  -168676947,
  -1582302192,
  -1377917003,
  459860764,
  -1653338259,
  1544963819,
  243347212,
  -287771785,
  187584071,
  996111454,
  2134526326,
  714441008,
  1866879754,
  1999534045,
  -1729099735,
  -399271165,
  -1931215016,
  -2049450469,
  -1250758711,
  -857916132,
  1759956150,
  1928685074,
  -1202688228,
  -1970841155
}; // weak


//----- (00416E80) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>)
{
  int *v4; // esi
  int *v5; // edi
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  unsigned int v11; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  bool v16; // zf
  int v17; // ebx
  int v18; // ett
  unsigned int v19; // eax
  unsigned int v20; // eax
  int v21; // eax
  bool v22; // cf
  int v23; // ebx
  int v24; // ebx
  int v25; // ett
  BOOL v26; // ecx
  bool v27; // cf
  int v28; // ebx
  int v29; // ett
  int v30; // ecx
  int v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ebx
  int v35; // ett
  bool v36; // zf
  int v37; // ebx
  int v38; // ett
  unsigned int v39; // ecx
  char *v40; // edx
  char v41; // al
  int v42; // eax
  bool v43; // cc
  int *v44; // esi
  int *v45; // edi
  int v46; // ecx
  char v47; // al
  unsigned __int8 v48; // al
  int v49; // eax
  int v50; // eax
  char v51; // t0
  unsigned __int8 v52; // bl
  char *v53; // edi
  int v54; // eax
  int *v55; // ebx
  int v56; // ebp
  char v57; // al
  char *v58; // ecx
  unsigned __int8 v59; // al
  int v60; // eax
  void (__cdecl *v61)(int *, int, int, int *); // ebp
  int *v62; // edi
  int v63[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v64; // [esp+2Ch] [ebp-80h] BYREF
  int v65; // [esp+30h] [ebp-7Ch] BYREF
  char *v66; // [esp+34h] [ebp-78h]
  int *v67; // [esp+38h] [ebp-74h]
  int v68; // [esp+3Ch] [ebp-70h]
  int v69; // [esp+40h] [ebp-6Ch]
  int v70; // [esp+44h] [ebp-68h]
  int v71; // [esp+48h] [ebp-64h]
  int *v72; // [esp+4Ch] [ebp-60h]
  int v73; // [esp+50h] [ebp-5Ch]
  int v74; // [esp+54h] [ebp-58h]
  int v75; // [esp+58h] [ebp-54h]
  int v76; // [esp+5Ch] [ebp-50h] BYREF

  v72 = &v76;
  v70 = a3;
  v69 = a2;
  v68 = a1;
  v4 = dword_40F000;
  v5 = &dword_40F000[-14336];
  v67 = &dword_40F000[-14336];
  while ( 1 )
  {
    v9 = *v4;
    v7 = (unsigned int)v4++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v4;
        v4 = (int *)((char *)v4 + 1);
        *(_BYTE *)v5 = v6;
        v5 = (int *)((char *)v5 + 1);
      }
      else
      {
        v11 = 1;
        while ( 1 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v11 += v12 + v11;
          v7 = __CFADD__(v13, v13);
          v16 = 2 * v13 == 0;
          v8 = 2 * v13;
          if ( v7 )
          {
            if ( !v16 )
              break;
            v17 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v18 = v7 + v17;
            v7 = __CFADD__(v7, v17) | __CFADD__(v17, v18);
            v8 = v17 + v18;
            if ( v7 )
              break;
          }
        }
        v7 = v11 < 3;
        v19 = v11 - 3;
        if ( !v7 )
        {
          v20 = v19 << 8;
          LOBYTE(v20) = *(_BYTE *)v4;
          v4 = (int *)((char *)v4 + 1);
          v21 = ~v20;
          if ( !v21 )
          {
            v44 = v67;
            v45 = v67;
            v46 = 93;
            while ( 1 )
            {
              v47 = *(_BYTE *)v45;
              v45 = (int *)((char *)v45 + 1);
              v48 = v47 + 24;
              while ( v48 <= 1u && *(_BYTE *)v45 == 2 )
              {
                v49 = *v45;
                LOWORD(v49) = BYTE1(*v45);
                v50 = __ROL4__(v49, 16);
                v51 = v50;
                LOBYTE(v50) = BYTE1(v50);
                BYTE1(v50) = v51;
                v52 = *((_BYTE *)v45 + 4) + 24;
                *v45 = (int)v44 + v50 - (_DWORD)v45;
                v45 = (int *)((char *)v45 + 5);
                v48 = v52;
                if ( !--v46 )
                {
                  v53 = (char *)(v44 + 20480);
LABEL_38:
                  v54 = *(_DWORD *)v53;
                  if ( *(_DWORD *)v53 )
                  {
                    v55 = (int *)((char *)v44 + *((_DWORD *)v53 + 1));
                    v53 += 8;
                    v56 = ((int (__cdecl *)(int, int, int, int, int, int *, int, int, int))v44[26624])(
                            (int)v44 + v54 + 106416,
                            v68,
                            v69,
                            v70,
                            v71,
                            v72,
                            v73,
                            v74,
                            v75);
                    while ( 1 )
                    {
                      v57 = *v53++;
                      if ( !v57 )
                        goto LABEL_38;
                      v58 = v53;
                      v66 = v53;
                      v59 = v57 - 1;
                      do
                      {
                        if ( !v58 )
                          break;
                        v16 = *v53++ == (char)v59;
                        --v58;
                      }
                      while ( !v16 );
                      v60 = ((int (__cdecl *)(int, char *))v44[26625])(v56, v66);
                      if ( !v60 )
                        break;
                      *v55++ = v60;
                    }
                    v54 = ((int (*)(void))v44[26629])();
                  }
                  v61 = (void (__cdecl *)(int *, int, int, int *))v44[26626];
                  v62 = v44 - 1024;
                  v64 = v54;
                  v61(v44 - 1024, 4096, 4, &v64);
                  *((_BYTE *)v62 + 479) &= ~0x80u;
                  *((_BYTE *)v62 + 519) &= ~0x80u;
                  v61(v44 - 1024, 4096, v63[0], v63);
                  do
                    v64 = 0;
                  while ( &v64 != &v65 - 32 );
                  JUMPOUT(0x401100);
                }
              }
            }
          }
          a4 = v21;
        }
        v22 = __CFADD__(v8, v8);
        v23 = 2 * v8;
        if ( !v23 )
        {
          v24 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v25 = v7 + v24;
          v22 = __CFADD__(v7, v24) | __CFADD__(v24, v25);
          v23 = v24 + v25;
        }
        v26 = v22;
        v27 = __CFADD__(v23, v23);
        v8 = 2 * v23;
        if ( !v8 )
        {
          v28 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v29 = v7 + v28;
          v27 = __CFADD__(v7, v28) | __CFADD__(v28, v29);
          v8 = v28 + v29;
        }
        v30 = v26 + v27 + v26;
        if ( !v30 )
        {
          v31 = 1;
          while ( 1 )
          {
            v32 = __CFADD__(v8, v8);
            v33 = 2 * v8;
            if ( !v33 )
            {
              v34 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v35 = v7 + v34;
              v32 = __CFADD__(v7, v34) | __CFADD__(v34, v35);
              v33 = v34 + v35;
            }
            v31 += v32 + v31;
            v7 = __CFADD__(v33, v33);
            v36 = 2 * v33 == 0;
            v8 = 2 * v33;
            if ( v7 )
            {
              if ( !v36 )
                break;
              v37 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v38 = v7 + v37;
              v7 = __CFADD__(v7, v37) | __CFADD__(v37, v38);
              v8 = v37 + v38;
              if ( v7 )
                break;
            }
          }
          v30 = v31 + 2;
        }
        v39 = (a4 < 0xFFFFF300) + v30 + 1;
        v40 = (char *)v5 + a4;
        if ( a4 <= 0xFFFFFFFC )
        {
          do
          {
            v42 = *(_DWORD *)v40;
            v40 += 4;
            *v5++ = v42;
            v43 = v39 <= 4;
            v39 -= 4;
          }
          while ( !v43 );
          v5 = (int *)((char *)v5 + v39);
        }
        else
        {
          do
          {
            v41 = *v40++;
            *(_BYTE *)v5 = v41;
            v5 = (int *)((char *)v5 + 1);
            --v39;
          }
          while ( v39 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// 417003: positive sp value 50 has been found
// 417003: control flows out of bounds to 401100
// 40F000: using guessed type int dword_40F000[512];
// 416E80: using guessed type int anonymous_0[4];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
