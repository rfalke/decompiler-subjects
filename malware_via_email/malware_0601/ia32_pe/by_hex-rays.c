/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

// void __usercall sub_4010C1(int a1@<eax>, int a2@<ecx>, char a3@<bh>);
void __thiscall sub_401119(void *this);
void __thiscall sub_401120(void *this);
// void __usercall sub_40118F(__int32 a1@<eax>, int a2@<edx>, int *a3@<ecx>, int a4@<edi>, int a5@<esi>, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, __int16 a14);
// void __usercall sub_4011B7(int a1@<edx>, int a2@<ebx>, int a3@<edi>);
// void __usercall sub_4011FB(int a1@<ecx>, int a2@<ebx>);
_DWORD sub_40124E(); // weak
// void __usercall sub_4012CE(int a1@<eax>, int a2@<ecx>, int a3@<ebx>);
void sub_40133F();
int sub_40139B();
// int __usercall sub_4013C4@<eax>(char a1@<al>, int a2@<ecx>, int a3@<ebx>, int a4@<esi>);
// void __usercall sub_401433(int a1@<ecx>, int a2@<ebx>);
// int __usercall sub_401491@<eax>(int a1@<ecx>, int a2@<esi>);
// int __usercall sub_4014BA@<eax>(__int32 a1@<eax>, int a2@<ecx>);
// void __usercall sub_4014E7(int a1@<edx>, int a2@<ecx>, int a3@<ebx>, __int32 a4@<esi>);
_DWORD sub_402084(); // weak
// void __usercall sub_4020A5(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<esi>);
void sub_402122();
void sub_402146();
// void __usercall sub_402174(int _EAX@<eax>, int a2@<ecx>);
// void __usercall sub_402226(int a1@<eax>, int a2@<ecx>, int a3@<edi>);
// void __usercall sub_40227C(int a1@<eax>, int a2@<ecx>, int a3@<ebp>);
void __fastcall sub_402357(int a1, int a2);
int sub_4023AC();
void sub_4023DE();
// void __usercall sub_40243E(int a1@<edx>, unsigned int a2@<ecx>, int a3@<ebx>, int a4@<ebp>, int a5@<esi>);
// void __usercall sub_402506(__int32 a1@<edx>, unsigned int a2@<ecx>, int a3@<ebp>, int a4@<edi>, int a5@<esi>);
// void __usercall sub_4025A5(int (__fastcall *a1)(__int16, int)@<eax>, int a2@<edx>, __int16 a3@<cx>, __int16 a4@<bx>, int a5@<edi>);
void __fastcall sub_4025D1(int a1);
// void __usercall sub_40262C(int a1@<eax>, int a2@<edx>, int a3@<ebx>);
// void __usercall sub_402655(int a1@<edx>, int a2@<ecx>, int a3@<esi>);
void sub_402726();
// void __usercall sub_402753(__int32 a1@<eax>, char a2@<dl>, char a3@<bl>, int a4@<esi>);
// void __usercall sub_4027AB(int a1@<edi>);
// void __usercall sub_4027FD(int a1@<eax>, char a2@<dh>, int a3@<ecx>);
// void __usercall sub_4029CD(int a1@<eax>, int a2@<edx>, char a3@<bh>, int a4@<esi>);
// void __usercall sub_402A31(int a1@<edi>);
// void __usercall sub_402A84(int a1@<ecx>, int a2@<edi>);
// __int16 __usercall sub_402AD9@<ax>(char a1@<ah>, __int16 a2@<dx>, __int16 a3@<si>);
// void __usercall sub_402B05(unsigned __int8 a1@<ah>);
// void __usercall sub_402B38(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>);
void sub_402B65();

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_401008; // weak
_UNKNOWN loc_40107A; // weak
_UNKNOWN loc_4010E3; // weak
_UNKNOWN loc_401141; // weak
_UNKNOWN loc_401277; // weak
_UNKNOWN loc_40129D; // weak
_UNKNOWN loc_401319; // weak
_UNKNOWN loc_401446; // weak
_UNKNOWN loc_402011; // weak
_UNKNOWN loc_40205F; // weak
_UNKNOWN loc_4020D6; // weak
_UNKNOWN loc_4020FF; // weak
_UNKNOWN loc_4021F5; // weak
_UNKNOWN loc_402256; // weak
_UNKNOWN loc_4022A5; // weak
_UNKNOWN loc_4022CA; // weak
_UNKNOWN loc_40237B; // weak
_UNKNOWN loc_40257C; // weak
_UNKNOWN loc_4025F7; // weak
_UNKNOWN loc_4026A4; // weak
_UNKNOWN loc_4026CD; // weak
_UNKNOWN loc_40277F; // weak
_UNKNOWN loc_40284B; // weak
_UNKNOWN loc_402920; // weak
_UNKNOWN loc_402AAE; // weak


//----- (004010C1) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4010C1(int a1@<eax>, int a2@<ecx>, char a3@<bh>)
{
  int v3; // ecx

  BYTE1(a2) ^= a3;
  v3 = a1 | (a2 + 1);
  BYTE1(v3) += v3;
  LOBYTE(v3) = 77;
  ((void (__thiscall *)(int))loc_401446)(v3);
  JUMPOUT(0x4010E8);
}
// 4010C5: positive sp value 4 has been found
// 4010E3: control flows out of bounds to 4010E8

//----- (00401119) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __thiscall sub_401119(void *this)
{
  void *v1; // [esp+14h] [ebp-4h]
  void *retaddr; // [esp+18h] [ebp+0h]

  *(&retaddr - 7) = v1;
  sub_401120(this);
}
// 40111D: positive sp value 4 has been found

//----- (00401120) --------------------------------------------------------
void __thiscall sub_401120(void *this)
{
  if ( !this )
    JUMPOUT(0x4011E2);
}
// 401130: control flows out of bounds to 4011E2

//----- (0040118F) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40118F(__int32 a1@<eax>, int a2@<edx>, int *a3@<ecx>, int a4@<edi>, int a5@<esi>, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, __int16 a14)
{
  int v14; // ebx
  int v15; // edi
  __int32 v16; // esi
  int v17; // ebx
  int v18; // ecx
  char v19; // zf
  int v20; // edx
  int v21; // [esp+0h] [ebp-8h]
  int v22; // [esp+4h] [ebp-4h]

  *(&v22 - 3) = v21;
  v14 = a5 + 1;
  v15 = (a5 - 1) | a1 | a5 | a2 | a4;
  v16 = a1 + 1;
  v17 = (a1 + 1) | v14;
  sub_4014BA(a1, *a3);
  if ( v19 )
  {
    *(_BYTE *)(v18 + 71) += v17;
    ((void (__fastcall *)(int, int))loc_401141)(v22, v22);
    v22 = *(_DWORD *)((char *)&a14 + 2 * v16 + 3);
    if ( v19 )
      JUMPOUT(0x401271);
    sub_40124E();
  }
  else
  {
    MEMORY[0xE8B5119F]();
    sub_4011B7(v20, v17, v15);
  }
}
// 401236: positive sp value 8 has been found
// 40124A: control flows out of bounds to 401271
// 4011B0: variable 'v19' is possibly undefined
// 4011B3: variable 'v20' is possibly undefined
// 401226: variable 'v18' is possibly undefined
// 40124E: using guessed type _DWORD sub_40124E();

//----- (004011B7) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4011B7(int a1@<edx>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // edi
  int v6; // edx
  void *v7; // ecx
  int v8; // ecx
  int v9; // [esp-4h] [ebp-4h]

  v3 = a3 + 1;
  _ESI = a2 + 1;
  ((void (__fastcall *)(int, int))((char *)&loc_4010E3 + 4))((a2 + 1) | v3, a1);
  __asm { repne mov esi, esi }
  ((void (__thiscall *)(int))loc_401319)(v6 | v3);
  sub_401120(v7);
  sub_4011FB(v8, _ESI | v9);
}
// 4011E2: positive sp value 8 has been found
// 4011E5: variable 'v6' is possibly undefined
// 4011F6: variable 'v7' is possibly undefined
// 4011F7: variable 'v8' is possibly undefined
// 4011EF: variable 'v9' is possibly undefined

//----- (004011FB) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4011FB(int a1@<ecx>, int a2@<ebx>)
{
  void *retaddr; // [esp+0h] [ebp+0h] BYREF

  sub_4012CE((int)&retaddr, (a2 + 1) | ((a2 | a1) - 1), a2 + 1);
  JUMPOUT(0x401223);
}
// 4011FF: positive sp value 4 has been found
// 40121E: control flows out of bounds to 401223

//----- (0040124E) --------------------------------------------------------
#error "40126D: call analysis failed (funcsize=21)"

//----- (004012CE) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4012CE(int a1@<eax>, int a2@<ecx>, int a3@<ebx>)
{
  char v3; // zf

  sub_4013C4(~(_BYTE)a1, ~a1 | a2, a3, a2 + 2);
  if ( !v3 )
  {
    MEMORY[0x24549CF4]();
    JUMPOUT(0x4012F5);
  }
  JUMPOUT(0x4012EF);
}
// 4012D2: positive sp value 4 has been found
// 4012F0: control flows out of bounds to 4012F5
// 4012EE: control flows out of bounds to 4012EF
// 4012EE: variable 'v3' is possibly undefined

//----- (0040133F) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_40133F()
{
  JUMPOUT(0x401367);
}
// 401343: positive sp value 4 has been found
// 401365: control flows out of bounds to 40136A
// 40135B: control flows out of bounds to 401367

//----- (0040139B) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int sub_40139B()
{
  void *v1; // [esp+18h] [ebp-4h]
  void *retaddr; // [esp+1Ch] [ebp+0h]

  *(&retaddr - 8) = v1;
  ((void (*)(void))loc_401008)();
  return MEMORY[0x74742525]();
}
// 40139F: positive sp value 4 has been found

//----- (004013C4) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_4013C4@<eax>(char a1@<al>, int a2@<ecx>, int a3@<ebx>, int a4@<esi>)
{
  int v5; // edx
  int v6; // ecx
  char v7; // zf
  int v9; // [esp+24h] [ebp-8h]
  void *v10; // [esp+28h] [ebp-4h]
  void *retaddr; // [esp+2Ch] [ebp+0h]

  v9 = a2;
  __asm { rep pop ecx }
  ((void (__fastcall *)(int, int))loc_40129D)((a3 - 1) | (_ECX - 1), a1 & 3 | (a4 + 1));
  MEMORY[0x28395F]();
  *(&retaddr - 13) = v10;
  ((void (__fastcall *)(unsigned int, int))loc_40107A)(v6 & 0xEEEEEEEE, v6 | (a4 + 1) | (v5 - 1));
  if ( v7 )
  {
    ((void (*)(void))loc_401277)();
    MEMORY[0xE928FD8D]();
    JUMPOUT(0x40148E);
  }
  return MEMORY[0x8F74E874]();
}
// 4013EF: positive sp value 8 has been found
// 401489: control flows out of bounds to 40148E
// 4013F9: variable 'v6' is possibly undefined
// 4013F1: variable 'v5' is possibly undefined
// 40140B: variable 'v7' is possibly undefined

//----- (00401433) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_401433(int a1@<ecx>, int a2@<ebx>)
{
  __asm { repne pop edx }
  ((void (__fastcall *)(int, int))sub_402084)(a2 | a1, a1);
  JUMPOUT(0x401524);
}
// 40143A: positive sp value 4 has been found
// 40151D: control flows out of bounds to 401524
// 402084: using guessed type _DWORD sub_402084();

//----- (00401491) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_401491@<eax>(int a1@<ecx>, int a2@<esi>)
{
  sub_4014E7(a2 + 2, a1, a2, a2);
  return MEMORY[0x25E82574]();
}
// 401497: positive sp value 4 has been found

//----- (004014BA) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_4014BA@<eax>(__int32 a1@<eax>, int a2@<ecx>)
{
  __int32 v3; // [esp+0h] [ebp-4h] BYREF

  _InterlockedExchange(&v3, a1);
  v3 = *(_DWORD *)(a2 + 8);
  sub_40139B();
  return MEMORY[0x25E87425]();
}
// 4014C2: positive sp value 4 has been found

//----- (004014E7) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4014E7(int a1@<edx>, int a2@<ecx>, int a3@<ebx>, __int32 a4@<esi>)
{
  __int32 v5; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v5, a4);
  __asm { repne pop esi }
  ((void (__fastcall *)(int, int))sub_40124E)(a2, (a1 | a3) + 2);
  JUMPOUT(0x401510);
}
// 4014EC: positive sp value 4 has been found
// 40150B: control flows out of bounds to 401510
// 40124E: using guessed type _DWORD sub_40124E();

//----- (00402084) --------------------------------------------------------
#error "4020A1: positive sp value has been found (funcsize=16)"

//----- (004020A5) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4020A5(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<esi>)
{
  int v5; // ebx
  int v6; // edx
  int v7; // ecx
  char v8; // zf

  LOBYTE(a3) = a3 - BYTE1(a2);
  BYTE1(a4) |= a2;
  LOBYTE(a4) = BYTE1(a2) ^ a4;
  v5 = (a5 | a4) + 1;
  LOBYTE(v5) = BYTE1(v5) ^ v5;
  BYTE1(a3) = BYTE1(a3) - BYTE1(a2) - BYTE1(a1);
  v6 = a2 - 1487820901;
  v7 = v6 | a3 | v5;
  LOBYTE(v7) = v7 - BYTE1(a1);
  sub_4027FD(a1, SBYTE1(v6), v7);
  if ( !v8 )
  {
    MEMORY[0x8DB5204F]();
    JUMPOUT(0x4020DB);
  }
  JUMPOUT(0x4020BE);
}
// 4020A9: positive sp value 4 has been found
// 4020D6: control flows out of bounds to 4020DB
// 4020D4: control flows out of bounds to 4020BE
// 4020D4: variable 'v8' is possibly undefined

//----- (00402122) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402122()
{
  sub_4023DE();
  MEMORY[0x74B44745]();
  sub_402146();
}
// 402126: positive sp value 4 has been found

//----- (00402146) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402146()
{
  int v0; // eax
  int v1; // ecx
  void *v2; // [esp+1Ch] [ebp-4h]
  void *retaddr; // [esp+20h] [ebp+0h]

  *(&retaddr - 9) = v2;
  ((void (*)(void))((char *)&loc_4025F7 + 3))();
  v0 = MEMORY[0xFF662173]();
  sub_402174(v0, v1);
}
// 40214A: positive sp value 4 has been found
// 402170: variable 'v1' is possibly undefined

//----- (00402174) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402174(int _EAX@<eax>, int a2@<ecx>)
{
  __asm { repne lea eax, [eax] }
  LOBYTE(a2) = ~(_BYTE)a2;
  sub_4025D1(a2);
  MEMORY[0xFFB495C9]();
  JUMPOUT(0x4021A4);
}
// 40217B: positive sp value 4 has been found
// 40219F: control flows out of bounds to 4021A4

//----- (00402226) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402226(int a1@<eax>, int a2@<ecx>, int a3@<edi>)
{
  int v3; // edi
  char v4; // zf
  int v5; // [esp+0h] [ebp-8h]
  void *v6; // [esp+4h] [ebp-4h]
  void *retaddr; // [esp+8h] [ebp+0h]

  *(&retaddr - 3) = v6;
  LOBYTE(a2) = BYTE1(a1) + a2;
  v3 = a2 | a3;
  v5 = a1;
  LOBYTE(a2) = BYTE1(a2) | a2;
  BYTE1(a2) = a1 ^ (a1 + BYTE1(a2));
  ((void (__fastcall *)(int, int))((char *)&loc_4026CD + 1))(a2, v3);
  if ( !v4 )
  {
    MEMORY[0x8B642EE2](*(_DWORD *)(9 * v3 - 1));
    JUMPOUT(0x40225B);
  }
  JUMPOUT(0x402277);
}
// 40222A: positive sp value 4 has been found
// 402256: control flows out of bounds to 40225B
// 402250: control flows out of bounds to 402277
// 402250: variable 'v4' is possibly undefined

//----- (0040227C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40227C(int a1@<eax>, int a2@<ecx>, int a3@<ebp>)
{
  sub_402357(a2, a1 + 248);
  MEMORY[0xE865488D]();
  --*(_DWORD *)(a3 + 1208231012);
  JUMPOUT(0x4022AB);
}
// 402280: positive sp value 4 has been found
// 4022A5: control flows out of bounds to 4022AB

//----- (00402357) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __fastcall sub_402357(int a1, int a2)
{
  ((void (__cdecl *)(_DWORD))loc_40205F)(*(_DWORD *)(a2 + 8));
  JUMPOUT(0x402380);
}
// 40235E: positive sp value 4 has been found
// 40237B: control flows out of bounds to 402380

//----- (004023AC) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int sub_4023AC()
{
  ((void (*)(void))loc_40257C)();
  return MEMORY[0x7425FFFF]();
}
// 4023B0: positive sp value 4 has been found

//----- (004023DE) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4023DE()
{
  char v0; // zf
  unsigned __int8 v1; // [esp-3h] [ebp-3h]

  sub_402B05(v1);
  if ( !v0 )
    JUMPOUT(0x402413);
  JUMPOUT(0x402408);
}
// 4023EA: positive sp value 8 has been found
// 40240E: control flows out of bounds to 402413
// 402407: control flows out of bounds to 402408
// 402402: variable 'v1' is possibly undefined
// 402407: variable 'v0' is possibly undefined

//----- (0040243E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40243E(int a1@<edx>, unsigned int a2@<ecx>, int a3@<ebx>, int a4@<ebp>, int a5@<esi>)
{
  int v5; // ecx
  int v6; // edx
  int v7; // edx
  int v8; // eax
  void *v9; // [esp+10h] [ebp-4h]
  void *retaddr; // [esp+14h] [ebp+0h]

  *(&retaddr - 6) = v9;
  LOBYTE(a1) = a3 | a1;
  v5 = a2 >> 15;
  v6 = v5 | a1;
  BYTE1(a3) = BYTE1(v6);
  v7 = a3 | v6;
  BYTE1(a3) = -8;
  BYTE1(v7) |= 0xF8u;
  sub_402655(v7 + 1, v5, a3 | a5);
  v9 = *(void **)(v8 + 8 * a4 + 116);
  JUMPOUT(0x40246A);
}
// 402442: positive sp value 4 has been found
// 402465: control flows out of bounds to 40246A
// 402461: variable 'v8' is possibly undefined

//----- (00402506) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402506(__int32 a1@<edx>, unsigned int a2@<ecx>, int a3@<ebp>, int a4@<edi>, int a5@<esi>)
{
  int v5; // ebx
  __int32 v6; // edx
  int v7; // edx
  __int16 v8; // [esp-2h] [ebp-6h]
  __int32 v9; // [esp+0h] [ebp-4h] BYREF

  _InterlockedExchange(&v9, a1);
  HIWORD(v5) = v8;
  v6 = v9;
  LOWORD(v5) = -13782;
  BYTE1(v6) = a2 | BYTE1(a2);
  v7 = a4 | v6;
  LOBYTE(v7) = BYTE1(a2) | v7;
  sub_40243E(v7, a2, v5, a3, a5);
  MEMORY[0x25B50D4D]();
  JUMPOUT(0x40252D);
}
// 40250C: positive sp value 4 has been found
// 402528: control flows out of bounds to 40252D
// 40250A: variable 'v8' is possibly undefined

//----- (004025A5) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4025A5(int (__fastcall *a1)(__int16, int)@<eax>, int a2@<edx>, __int16 a3@<cx>, __int16 a4@<bx>, int a5@<edi>)
{
  int v5; // eax
  char v6; // cl
  int v7; // ecx
  int v8; // ecx

  LOBYTE(a4) = -117;
  LOBYTE(a3) = (unsigned __int16)(a4 + 1) >> 8;
  LOBYTE(a2) = a3 | BYTE1(a1) | a2;
  v5 = a1(a3, a2);
  LOBYTE(v7) = v6 - v5;
  BYTE1(v7) = v5 | 0x7D;
  sub_402226(v5, v7, a5);
  sub_4025D1(v8);
}
// 4025AA: positive sp value 4 has been found
// 4025BB: variable 'v6' is possibly undefined
// 4025C7: variable 'v7' is possibly undefined
// 4025CD: variable 'v8' is possibly undefined

//----- (004025D1) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __fastcall sub_4025D1(int a1)
{
  __asm { rep pop ebx }
  LOBYTE(a1) = a1 - 104;
  ((void (__thiscall *)(int))loc_402920)(a1);
  JUMPOUT(0x4025FC);
}
// 4025D6: positive sp value 4 has been found
// 4025F7: control flows out of bounds to 4025FC

//----- (0040262C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40262C(int a1@<eax>, int a2@<edx>, int a3@<ebx>)
{
  int v3; // ebx
  int v5; // edx
  int v6; // ecx
  char v7; // zf
  void *v8; // [esp+8h] [ebp-4h]
  void *retaddr; // [esp+Ch] [ebp+0h]

  *(&retaddr - 4) = v8;
  BYTE1(a3) |= a3;
  v3 = a3 + 1;
  BYTE1(v3) = BYTE1(a2);
  sub_4020A5(a1, a2, a2, v3, a1);
  if ( v7 )
    JUMPOUT(0x4026C5);
  sub_402655(v5, v6, a1);
}
// 402630: positive sp value 4 has been found
// 40264F: control flows out of bounds to 4026C5
// 402651: control flows out of bounds to 402678
// 402653: control flows out of bounds to 40267A
// 40264F: variable 'v7' is possibly undefined
// 402654: variable 'v5' is possibly undefined
// 402654: variable 'v6' is possibly undefined

//----- (00402655) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402655(int a1@<edx>, int a2@<ecx>, int a3@<esi>)
{
  int v3; // edx
  int v4; // [esp+62h] [ebp-Ch]
  int v5; // [esp+6Ah] [ebp-4h]
  void *retaddr; // [esp+6Eh] [ebp+0h] BYREF

  v4 = v5;
  v3 = a3 | a1;
  BYTE1(v3) = 40;
  ((void (__fastcall *)(int, int))((char *)&loc_4026A4 + 1))(a2 << 15, v3);
  v5 = *(int *)((char *)&retaddr + 2 * a3 - 115);
  JUMPOUT(0x402680);
}
// 402659: positive sp value 4 has been found
// 40267C: control flows out of bounds to 402680

//----- (00402726) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402726()
{
  __int32 v0; // eax
  char v1; // dl
  char v2; // zf

  v0 = ((int (*)(void))loc_4021F5)();
  if ( v2 )
    JUMPOUT(0x40273B);
  sub_402753(v0, v1, 40, -1382289405);
}
// 402730: positive sp value 4 has been found
// 402751: control flows out of bounds to 40273B
// 402751: variable 'v2' is possibly undefined
// 402752: variable 'v1' is possibly undefined

//----- (00402753) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402753(__int32 a1@<eax>, char a2@<dl>, char a3@<bl>, int a4@<esi>)
{
  int v4; // ecx
  __int32 v5; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v5, a1);
  v4 = a4 - 2;
  LOBYTE(v4) = a3 + a4 - 2 - a2;
  ((void (__thiscall *)(int))loc_4022CA)(v4);
  v5 = 4204415;
  JUMPOUT(0x40277E);
}
// 40275E: positive sp value 4 has been found
// 40277A: control flows out of bounds to 40277F
// 40277A: control flows out of bounds to 40277E

//----- (004027AB) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4027AB(int a1@<edi>)
{
  int v1; // edx
  char v2; // zf
  int v3; // eax
  char v4; // dh
  int v5; // ecx
  int v6; // [esp+20h] [ebp-Ch]
  char v7; // [esp+24h] [ebp-8h]
  int v8; // [esp+28h] [ebp-4h]

  *((_DWORD *)&v7 - 12) = v6;
  sub_402A31(a1);
  if ( v2 )
    JUMPOUT(0x402848);
  LOBYTE(v1) = v8;
  v3 = ((int (__fastcall *)(int, int))((char *)&loc_40237B + 4))(v8, v1);
  sub_4027FD(v3 & 0xE8E82574, v4, v5);
}
// 4027EA: positive sp value C has been found
// 4027D2: control flows out of bounds to 402848
// 4027D2: variable 'v2' is possibly undefined
// 4027F3: variable 'v1' is possibly undefined
// 4027F9: variable 'v4' is possibly undefined
// 4027F9: variable 'v5' is possibly undefined

//----- (004027FD) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4027FD(int a1@<eax>, char a2@<dh>, int a3@<ecx>)
{
  int v3; // ecx
  char v4; // zf
  void *v5; // [esp+Ch] [ebp-4h]
  void *retaddr; // [esp+10h] [ebp+0h]

  *(&retaddr - 5) = v5;
  BYTE1(a3) = BYTE1(a1) | a1;
  v3 = a1 | a3;
  LOBYTE(v3) = BYTE1(v3);
  BYTE1(v3) += a2 + BYTE1(v3);
  ((void (__thiscall *)(int))((char *)&loc_4020D6 + 4))(v3);
  if ( !v4 )
  {
    MEMORY[0x8D66274F]();
    JUMPOUT(0x40282A);
  }
  JUMPOUT(0x40284A);
}
// 402801: positive sp value 4 has been found
// 402825: control flows out of bounds to 40282A
// 402823: control flows out of bounds to 40284A
// 402823: variable 'v4' is possibly undefined

//----- (004029CD) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4029CD(int a1@<eax>, int a2@<edx>, char a3@<bh>, int a4@<esi>)
{
  int v4; // ecx
  int v5; // eax
  char v6; // zf
  void *v7; // [esp+14h] [ebp-4h]
  void *retaddr; // [esp+18h] [ebp+0h]

  *(&retaddr - 7) = v7;
  v5 = a1 + 1179043921;
  if ( v5 == 1179043921 )
  {
    BYTE1(a2) |= a3;
    ((void (__fastcall *)(int, int))((char *)&loc_40277F + 1))(a4 - 1, a2);
    if ( !v6 )
    {
      MEMORY[0x75291304]();
      JUMPOUT(0x402A05);
    }
    JUMPOUT(0x4029FF);
  }
  v4 = a4;
  LOBYTE(v4) = a4 - v5;
  ((void (__thiscall *)(int))((char *)&loc_402AAE + 1))(v4 + 1);
  JUMPOUT(0x402439);
}
// 402427: positive sp value 4 has been found
// 402A00: control flows out of bounds to 402A05
// 402434: control flows out of bounds to 402439
// 4029FE: control flows out of bounds to 4029FF
// 4029FE: variable 'v6' is possibly undefined

//----- (00402A31) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402A31(int a1@<edi>)
{
  ((int (*)(void))((char *)&loc_40284B + 3))();
  --*(_DWORD *)(a1 + 718545988);
  JUMPOUT(0x402A64);
}
// 402A35: positive sp value 4 has been found
// 402A5E: control flows out of bounds to 402A64

//----- (00402A84) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402A84(int a1@<ecx>, int a2@<edi>)
{
  int v2; // edi
  void *v3; // [esp+2Ch] [ebp-4h]
  void *retaddr; // [esp+30h] [ebp+0h]

  *(&retaddr - 13) = v3;
  v2 = (a1 | a2) + 1;
  ((void (*)(void))loc_4020FF)();
  MEMORY[0x25659F96]();
  ++*(_DWORD *)(v2 + 1515332636);
  JUMPOUT(0x402AB4);
}
// 402A88: positive sp value 4 has been found
// 402AAE: control flows out of bounds to 402AB4

//----- (00402AD9) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
__int16 __usercall sub_402AD9@<ax>(char a1@<ah>, __int16 a2@<dx>, __int16 a3@<si>)
{
  __int16 v3; // ax
  __int16 result; // ax

  LOBYTE(v3) = 54;
  HIBYTE(v3) = HIBYTE(a2) + (HIBYTE(a2) | a1);
  result = a2 | a3 | v3;
  HIBYTE(result) += 117;
  return result;
}
// 402ADD: positive sp value 4 has been found

//----- (00402B05) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402B05(unsigned __int8 a1@<ah>)
{
  int v1; // ebx
  int v2; // eax
  int v3; // edx
  int v4; // ecx
  void *v5; // [esp+24h] [ebp-4h]
  void *retaddr; // [esp+28h] [ebp+0h]

  *(&retaddr - 11) = v5;
  v1 = a1;
  v2 = ((int (*)(void))((char *)&loc_402256 + 1))() & 0x25E8FFE8;
  if ( !v2 )
    JUMPOUT(0x402B5D);
  sub_402B38(v2, v3, v4, v1);
}
// 402B09: positive sp value 4 has been found
// 402B36: control flows out of bounds to 402B5D
// 402B37: variable 'v3' is possibly undefined
// 402B37: variable 'v4' is possibly undefined

//----- (00402B38) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402B38(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>)
{
  int v4; // eax
  void *v5; // [esp+10h] [ebp-4h]
  void *retaddr; // [esp+14h] [ebp+0h]

  *(&retaddr - 6) = v5;
  v4 = a4 | a1;
  BYTE1(a3) = BYTE1(a2) ^ 0xD0;
  LOBYTE(v4) = -114;
  BYTE1(v4) -= BYTE1(a2);
  ((void (__fastcall *)(int, int))loc_402011)(v4 | a3, a2 - 1826);
  sub_402B65();
}
// 402B3C: positive sp value 4 has been found

//----- (00402B65) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402B65()
{
  ((void (*)(void))((char *)&loc_4022A5 + 1))();
  MEMORY[0x244CB306]();
  JUMPOUT(0x402B92);
}
// 402B69: positive sp value 4 has been found
// 402B8D: control flows out of bounds to 402B92

// nfuncs=42 queued=42 decompiled=42 lumina nreq=0 worse=0 better=0
#error "There were 2 decompilation failure(s) on 42 function(s)"
