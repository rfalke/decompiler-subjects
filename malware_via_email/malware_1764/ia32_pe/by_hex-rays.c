/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// int __userpurge start@<eax>(unsigned int@<eax>, int _EDX@<edx>, int _ECX@<ecx>, int@<ebx>, int@<edi>, int@<esi>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);


//----- (0040C2DB) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __userpurge start@<eax>(
        unsigned int a1@<eax>,
        int _EDX@<edx>,
        int _ECX@<ecx>,
        int a4@<ebx>,
        int a5@<edi>,
        int a6@<esi>,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  char v66; // bh
  bool v67; // cf
  int result; // eax
  unsigned __int8 v69; // bl
  int v73; // edx
  char v74; // ch
  int v75; // esi
  int v77; // edx
  bool v78; // cc
  unsigned int v81; // ebx
  int v83; // esi
  int v85; // edi
  unsigned int v86; // eax
  char v88; // dh
  int v89; // eax
  int v90; // edx
  char v91; // tt
  bool v92; // pf
  unsigned int v93; // ebx
  int v95; // esi
  bool v97; // cf
  bool v98; // of
  char v99; // cc
  _BYTE *v101; // eax
  int v102; // edi
  unsigned int v104; // esi
  unsigned int v108; // ebx
  unsigned int v109; // edi
  unsigned int v110; // edi
  bool v111; // of
  int v114; // ecx
  char v115; // bh
  int v119; // edi
  char v120; // dh
  bool v121; // tt
  char v122; // of
  _BYTE v129[4]; // [esp-4h] [ebp-4h] BYREF

  LOWORD(a4) = __PAIR16__(BYTE1(a4), __ROL1__(a4, _ECX)) & 0x63FF;
  __asm { rcl     ecx, cl }
  BYTE1(_ECX) += 52;
  v86 = a1 >> _ECX;
  v85 = a5 >> _ECX;
  BYTE1(v86) -= _EDX;
  BYTE1(v86) ^= BYTE1(_ECX);
  LOBYTE(v86) = BYTE1(_ECX) & (v86 + 1);
  v97 = __CFSHL__(v85, _ECX);
  v119 = v85 << _ECX;
  _ECX = -1882577562;
  v121 = v97;
  v97 = __CFADD__(v97, BYTE1(_EDX));
  v120 = v121 + BYTE1(_EDX);
  v97 |= __CFADD__(BYTE1(a4), v120);
  BYTE1(_EDX) = BYTE1(a4) + v120;
  v98 = __OFADD__(v97, a4);
  _EBX = v97 + a4;
  v122 = v98 | __OFADD__(a6, _EBX);
  _EBX += a6;
  if ( !((_EBX < 0) ^ v122 | (_EBX == 0)) && (_EBX < 0) ^ v122 | (_EBX == 0) )
  {
    __asm { into }
    *(_BYTE *)(_EBX - 947849261) |= v86;
    __outdword(_EDX, v86);
    goto LABEL_30;
  }
  BYTE1(v86) += 125;
  v97 = __CFADD__(__CFSHR__(v86, 102), (_BYTE)_EBX);
  LOBYTE(_EBX) = __CFSHR__(v86, 102) + _EBX;
  v97 |= __CFADD__((_BYTE)_EDX, (_BYTE)_EBX);
  LOBYTE(_EBX) = _EDX + _EBX;
  __asm
  {
    rcr     dl, cl
    rcr     bh, cl
  }
  v90 = _EDX - (v97 - 1882577562);
  __asm { rcl     bl, cl }
  LOBYTE(v86) = v90 | __ROR1__(v86, 102);
  _EAX = v86 - v119;
  LOBYTE(_EAX) = ((unsigned __int8)_EBX & (unsigned __int8)_EAX) << 6;
  LOBYTE(v90) = v90 - BYTE1(_EAX) + 48;
  BYTE1(_EAX) |= 0xB1u;
  _EAX -= 1882577562;
  v83 = (a6 >> 6) - 1;
  __asm { rcl     al, cl }
  LOBYTE(_EBX) = (_EBX & 4 | 0xBB) - 56;
  BYTE1(v90) = BYTE1(_EAX) >> 6;
  LOBYTE(v90) = (v90 | 9) ^ 0x66;
  BYTE1(_EAX) = (BYTE1(_EAX) >> 6) - 1;
  LOBYTE(_EAX) = _EAX + 2;
  BYTE1(_EBX) >>= 6;
  v81 = (unsigned int)_EBX >> 6;
  v89 = __ROR4__(_EAX, 102);
  ++BYTE1(v81);
  v88 = BYTE1(v90) + 1;
  BYTE1(v89) <<= 6;
  LOBYTE(v81) = BYTE1(v89);
  v97 = __CFSHL__(v88, 102);
  BYTE1(v90) = v88 << 6;
  v91 = v97 + BYTE1(v89);
  v97 = BYTE1(v81) < (unsigned __int8)(v97 + BYTE1(v89));
  BYTE1(v81) -= v91;
  v92 = __SETP__(v83 + v97 + v81, 0);
  v93 = v83;
  if ( !v92 && v92 )
    JUMPOUT(0x40C38D);
  BYTE1(v90) += BYTE1(v83);
  v95 = v83 - (((unsigned __int8)v90 < (unsigned __int8)v83) - 1882577562);
  LOBYTE(v89) = __ROL1__(v89, 102);
  _EDI = v89 + v119;
  LOBYTE(v90) = ((_BYTE)v90 - (_BYTE)v93) << 6;
  v97 = __CFSHL__(BYTE1(v93), 102);
  BYTE1(v93) <<= 6;
  v99 = ((v93 & 0x8000) != 0) ^ v98;
  if ( !(v99 | (BYTE1(v93) == 0)) && ((v93 & 0x8000) != 0) ^ v98 | (BYTE1(v93) == 0) )
  {
    __asm { fisttp  qword ptr [ecx] }
    if ( v97 )
    {
      BYTE1(v90) ^= 0xAAu;
      v95 += v89;
      LOBYTE(v93) = v93 & 0x51;
      BYTE1(v93) <<= 6;
      LOBYTE(v89) = v89 - v93 + 26;
      _EDI = __ROR4__((v90 | _EDI) << 6, 102);
      v90 = (v90 << 6) - 1;
      BYTE1(v90) &= BYTE1(v93);
      v99 = 0;
      LOBYTE(_ECX) = 67;
    }
    if ( !v99 )
    {
      v69 = BYTE1(v89) ^ v93;
      _CL = _ECX + 1;
      _EAX = 0;
      __asm { rcl     edi, cl }
      v73 = v90 - v95;
      v74 = 37 >> _CL;
      v75 = _EDI | v95;
      _CL = _CL << _CL;
      v77 = v75 & v73;
      v78 = v69 <= 0x87u;
      LOBYTE(v93) = v69 + 121;
      if ( !v78 && v78 )
      {
        *(_WORD *)_EDI = 0;
        _EDX = *(_DWORD *)(_EDI + 2 + 8 * v75) + v77;
        --BYTE1(_EDX);
        LOBYTE(_EDX) = -1;
        __asm
        {
          rcl     edx, cl
          rcl     dl, cl
        }
        _CL = _CL - 74;
        __asm { rcr     ah, cl }
        JUMPOUT(0x40BF12);
      }
      LOBYTE(v77) = v77 + 125;
      LOBYTE(_EAX) = -8;
      _EAX = v77 + _EAX;
      v108 = v93 >> _CL;
      v109 = _EDI << _CL;
      LOBYTE(_ECX) = _EAX;
      BYTE1(_ECX) = BYTE1(v108) + v74;
      v110 = v109 << _EAX;
      v111 = __OFSUB__((_BYTE)_EAX, BYTE1(v108));
      LOBYTE(_EAX) = _EAX - BYTE1(v108);
      __asm { rcr     ah, cl }
      if ( !v111 && v111 )
      {
        _ECX = _ECX >> _ECX;
        __asm { rcr     al, cl }
        v114 = _ECX - _EAX;
        LOBYTE(v114) = v114 + 1;
        v115 = v114 | BYTE1(v108);
        BYTE1(_EAX) = 103;
        _ECX = _EAX ^ v114;
        v66 = v115 << _ECX;
        LOBYTE(_ECX) = _ECX - BYTE1(_ECX) + 1;
        __asm { rcr     ecx, cl }
        _DL = -v66;
        LOBYTE(_ECX) = -v66 & _ECX;
        __asm { rcr     dl, cl }
        JUMPOUT(0x40C323);
      }
      LOBYTE(_ECX) = _ECX + 1;
      _EDI = _ECX | v110;
      __asm
      {
        int     2Eh; DOS 2+ internal - EXECUTE COMMAND
        rcl     edi, cl
      }
      JUMPOUT(0x40C363);
    }
    v101 = &v129[v89];
    BYTE1(_ECX) = 38;
    __asm { rcr     cl, cl }
    v102 = _ECX + _EDI;
    LOBYTE(v93) = BYTE1(v101) | v93;
    _CL = _ECX + 1;
    v104 = v93 + v95;
    _EDI = v90 & v102;
    if ( !((unsigned __int8)v101 & 1) )
    {
      __asm { rcl     edi, cl }
      _ESI = v104 << _CL;
      __asm
      {
        rcr     esi, cl
        rcl     esi, cl
      }
      JUMPOUT(0x40BFAC);
    }
LABEL_30:
    JUMPOUT(0x40C586);
  }
  LOBYTE(v89) = __CFSHR__(v93, 102) + v89 - 88;
  BYTE1(v93) ^= (unsigned __int8)v90 >> 6;
  v67 = __CFADD__(BYTE1(v89), (_BYTE)v89);
  LOBYTE(v89) = BYTE1(v89) + v89;
  result = v89 << 6;
  if ( __CFSHR__(_EDI, 102) || result == 0 || !__CFSHR__(_EDI, 102) && result != 0 )
  {
    LOBYTE(v93) = 3 - (v67 - 5);
    _EBX = v93 + 1;
    __asm { rcl     ebx, cl }
    JUMPOUT(0x40C3CD);
  }
  return result;
}
// 40BF2F: positive sp value 4 has been found
// 40C361: control flows out of bounds to 40C363
// 40C387: control flows out of bounds to 40C38D
// 40C492: control flows out of bounds to 40C493
// 40C52B: inconsistent fpu stack
// 40C74C: control flows out of bounds to 40C74D
// 40BF78: control flows out of bounds to 40BF79
// 40C7D5: control flows out of bounds to 40C7DB
// 40C692: control flows out of bounds to 40C693
// 40C4EE: control flows out of bounds to 40C586
// 40C5EB: control flows out of bounds to 40C3CD
// 40C6D2: control flows out of bounds to 40C55F
// 40C711: control flows out of bounds to 40C323
// 40C045: control flows out of bounds to 40C0F2
// 40C07D: control flows out of bounds to 80CB3B65
// 40C2B8: control flows out of bounds to 40C1CB
// 40C7FD: control flows out of bounds to 40BF12
// 40C49A: control flows out of bounds to 40C138
// 40C74A: control flows out of bounds to 40C72A
// 40C162: control flows out of bounds to 40C19E
// 40C7CB: control flows out of bounds to 40BFAC
// 40C57B: conditional instruction was optimized away because edi.4>=0
// 40C68A: conditional instruction was optimized away because bh.1>=0
// 40C744: conditional instruction was optimized away because ebx.4!=0
// 40BF76: conditional instruction was optimized away because edx.4>=0
// 40C12F: conditional instruction was optimized away because ah.1>=0
// 40C1A4: conditional instruction was optimized away because bh.1>=1
// 40C1BD: conditional instruction was optimized away because dl.1>=9u
// 40C1C3: conditional instruction was optimized away because dl.1>=9u
// 40C7D5: conditional instruction was optimized away because cl.1>=1
// 40C519: variable 'v98' is possibly undefined
// 40C2DB: too many input arguments, some ignored

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
