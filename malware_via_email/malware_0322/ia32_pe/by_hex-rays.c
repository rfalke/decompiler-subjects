/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<ebp>, int a6@<edi>, int a7@<esi>);

//-------------------------------------------------------------------------
// Data declarations

int dword_412000[512] =
{
  -1876295519,
  88416000,
  -1688788124,
  -43,
  590462719,
  82582624,
  1465122840,
  1731063170,
  -721333235,
  505297597,
  -2082531756,
  -1696614177,
  802937813,
  654753023,
  1461008679,
  -1415558009,
  86972075,
  -1272301050,
  -604633729,
  740728407,
  -1000206278,
  1556021760,
  735699673,
  1943011248,
  1455379541,
  218800831,
  456733631,
  -1139671663,
  1414807640,
  -930133444,
  -54517322,
  -1864942421,
  -1307579258,
  -673636772,
  1558829753,
  -326651311,
  889459402,
  -1834979119,
  1038911343,
  -1191160685,
  -1844295960,
  1563739345,
  749319880,
  -988397309,
  -853183715,
  -954546539,
  1230819927,
  -1056653305,
  882231319,
  633586203,
  406099405,
  1557297868,
  281899849,
  -1781725490,
  47142708,
  -64006968,
  -1001060067,
  1123138764,
  -1943520204,
  -617088906,
  1930056110,
  564896991,
  1884328872,
  -268695202,
  813973566,
  -553169675,
  -1395171308,
  -1655300014,
  542933399,
  269848359,
  1912981572,
  542905602,
  1730005015,
  119561318,
  -753395584,
  1099189871,
  -1802326719,
  -746734352,
  1908503044,
  -77278755,
  1235358958,
  366814579,
  857092374,
  1557288820,
  1527776535,
  -937987039,
  370282901,
  -584748250,
  765465493,
  1557288732,
  891093577,
  -1782048994,
  404699188,
  543019607,
  437327385,
  879065346,
  -1575266260,
  1887445496,
  -2069847548,
  -1864258812,
  -1854005687,
  -1673012292,
  -1191047048,
  641543744,
  -469004242,
  -467650767,
  994097410,
  -1296487642,
  503000331,
  -667623548,
  1023235134,
  -583215908,
  129484682,
  490432353,
  502613415,
  -622058392,
  1603935375,
  1355897748,
  -1603509936,
  -1053228316,
  1077550391,
  839618606,
  48499515,
  960299193,
  613199424,
  -294907131,
  2122437305,
  113897302,
  -555318122,
  -619470752,
  -537187821,
  327665591,
  -98319957,
  -371958495,
  1874863148,
  1377878189,
  33769748,
  1642016771,
  -15591644,
  1680005419,
  33574974,
  1938366712,
  -371776644,
  -2046850704,
  18961277,
  733821974,
  -1262718262,
  -577688997,
  1580999674,
  1805756961,
  186139746,
  -574324677,
  594984811,
  -1878686236,
  -2069155361,
  -1912765117,
  2415040,
  608281576,
  425365639,
  2065928283,
  349782921,
  -922424752,
  1478681635,
  -484877770,
  -1160572823,
  1628335300,
  1498352263,
  -1873205776,
  -1119321121,
  1344597437,
  -1468919580,
  1490507897,
  -2009721506,
  123670760,
  -834528111,
  2109692255,
  1416944628,
  1411934465,
  196367395,
  98834902,
  -585536452,
  -363493680,
  93775065,
  1556633150,
  986191648,
  97005600,
  943227250,
  392524293,
  1573018490,
  -1010297056,
  -1448227380,
  -981264297,
  966574686,
  -1706365294,
  369430020,
  -1532073693,
  86836923,
  1256595719,
  822094746,
  -1180389887,
  755115666,
  730869251,
  218892137,
  441115659,
  -1844566080,
  263204526,
  963774624,
  -1190993150,
  1764952585,
  199337134,
  993276435,
  730869440,
  1082734133,
  935044270,
  1076901349,
  834380974,
  3292553,
  867893987,
  -1756742450,
  82310200,
  1546828805,
  -1448863493,
  939501294,
  98167833,
  546664363,
  563507024,
  -1609441433,
  1543356204,
  -1793309444,
  -1533715524,
  -715332773,
  772676029,
  -1205756577,
  -12399651,
  484383343,
  849106792,
  843195819,
  -676441637,
  -589969,
  1089294484,
  -719943950,
  1183102869,
  1830049125,
  -1373525988,
  -1591628796,
  -15237705,
  25134303,
  1420744096,
  341256143,
  -1338132545,
  -939406501,
  -312725449,
  -1259930111,
  -152177609,
  1552431575,
  945589251,
  -1945020536,
  1402715335,
  1293643707,
  -2000909306,
  -1140346878,
  165529648,
  -294276297,
  235493296,
  101823508,
  -162165715,
  812356279,
  1749495660,
  1467749599,
  -843494507,
  515431284,
  215695260,
  1843478656,
  -703802826,
  -2080223868,
  -451395396,
  569883246,
  218960020,
  99094947,
  -1225311621,
  -1873915519,
  277305279,
  -836680624,
  43769565,
  -2111783808,
  541114134,
  -69548537,
  -1676133786,
  1619093929,
  -610743436,
  193978393,
  1145349124,
  -154415313,
  -1599853807,
  252276924,
  1840175464,
  1276105453,
  584805391,
  383666181,
  1944370676,
  -1739191795,
  748712274,
  -1435603252,
  366830681,
  -510314148,
  945774812,
  1108842641,
  -1588128706,
  -1837121750,
  -551853375,
  -1747648481,
  1078940844,
  -1310491807,
  1718051071,
  1027402853,
  252258105,
  -553414817,
  -155252851,
  866072681,
  478430801,
  -821183740,
  -1132672010,
  67475031,
  159561759,
  -2120522589,
  -844560616,
  -1246109061,
  -1202418190,
  -1382016641,
  -27804663,
  1146825535,
  -1669395784,
  -1840136745,
  517848406,
  1859106645,
  526552780,
  1690275666,
  -549151995,
  -1023644805,
  -2132066281,
  1465386975,
  -1140430579,
  -575421484,
  1544985446,
  91271696,
  754666002,
  -686982028,
  -1793229673,
  -1248039272,
  938469969,
  -2101886410,
  -1834885110,
  -35714473,
  570911773,
  1197685814,
  868017656,
  2111519923,
  -36857323,
  -1622015268,
  -542599670,
  -504448299,
  -1659903106,
  1150459615,
  554980412,
  2081586565,
  -1811002521,
  -1809095626,
  -267790086,
  1480332078,
  -783749127,
  2118225945,
  -179080142,
  524237013,
  1214544969,
  1335245975,
  433917246,
  -1994270717,
  136604040,
  -1869771740,
  627450940,
  1248080201,
  596947486,
  -1873519311,
  -2027588029,
  1201425492,
  1284564056,
  -397224759,
  -65288596,
  -1108561957,
  -1745371360,
  -675750143,
  51423376,
  170593051,
  543918061,
  105003094,
  911347121,
  -653014754,
  1876415695,
  -933532823,
  1328491654,
  1874815559,
  1122237361,
  1364376252,
  -687455300,
  -1130173846,
  1817843443,
  789140923,
  1286605400,
  -653420820,
  1167922576,
  1821534290,
  1711868947,
  1713456125,
  607785651,
  341578119,
  -1660350634,
  1182079755,
  -795603359,
  -1470232933,
  1800836796,
  -653487911,
  -1751933101,
  -904612145,
  -1437067506,
  1214607106,
  290959896,
  -1234745688,
  2065815810,
  558571938,
  -2033302489,
  517546476,
  1546213167,
  1820598544,
  -594065303,
  113250624,
  1145532623,
  1478920159,
  -46878241,
  1425329961,
  1230786495,
  1478061843,
  -1381143520,
  1677203079,
  643977260,
  1802370727,
  1997324075,
  -1409133987,
  -1414277838,
  935015003,
  1490161144,
  -1395161949,
  1867993967,
  -968665725,
  560838102,
  1146497366,
  424693645,
  -116380921,
  -1759290288,
  1479110098,
  46970675,
  260065637,
  -1212749736,
  -1940361473,
  1209196361,
  1075942255,
  316388779,
  -1320942260,
  1213818367,
  1388278848,
  -1502649633,
  -2109437151,
  1150319487,
  42850354,
  -1797639500,
  -12460174,
  1541864306,
  115315977,
  -648543644,
  1189056223,
  -9989017,
  2115169782,
  1817649543,
  -1418189095,
  1344462682,
  -507527803,
  1342029247,
  844338069,
  641051897,
  590218332,
  -1951082665,
  -1051159595,
  222489590,
  -1242190761,
  606191471,
  -1816419580,
  -393262058,
  103817677,
  151946885,
  187452453,
  532082172,
  1277125463,
  -1504217927,
  -1124526657,
  -591157758,
  1906630623,
  1643665599,
  -165686190,
  -1143214654,
  559436554,
  -1557364913,
  1467003533,
  -304444498
}; // weak


//----- (004157E0) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<ebp>, int a6@<edi>, int a7@<esi>)
{
  int *v7; // esi
  int *v8; // edi
  unsigned int v9; // ebp
  char v10; // al
  bool v11; // cf
  int v12; // ebx
  int v13; // ebx
  int v14; // ett
  unsigned int v15; // eax
  bool v16; // cf
  int v17; // ebx
  int v18; // ebx
  int v19; // ett
  bool v20; // zf
  int v21; // ebx
  int v22; // ett
  int v23; // ecx
  unsigned int v24; // eax
  unsigned int v25; // eax
  int v26; // eax
  bool v27; // cf
  int v28; // ebx
  int v29; // ebx
  int v30; // ett
  BOOL v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  int v35; // ecx
  int v36; // ecx
  bool v37; // cf
  int v38; // ebx
  int v39; // ebx
  int v40; // ett
  bool v41; // zf
  int v42; // ebx
  int v43; // ett
  unsigned int v44; // ecx
  char v45; // al
  int v46; // eax
  bool v47; // cc
  int *v48; // esi
  char *v49; // edi
  int v50; // eax
  int *v51; // ebx
  int v52; // ebp
  char v53; // al
  char *v54; // ecx
  unsigned __int8 v55; // al
  int v56; // eax
  void (__fastcall *v57)(int, char *, int *, int, int, int *); // ebp
  int *v58; // edi
  int v59[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v60; // [esp+2Ch] [ebp-80h] BYREF
  int v61; // [esp+30h] [ebp-7Ch] BYREF
  char *v62; // [esp+34h] [ebp-78h]
  int *v63; // [esp+38h] [ebp-74h]
  int v64; // [esp+3Ch] [ebp-70h]
  char *v65; // [esp+40h] [ebp-6Ch]
  int v66; // [esp+44h] [ebp-68h]
  int v67; // [esp+48h] [ebp-64h]
  int *v68; // [esp+4Ch] [ebp-60h]
  int v69; // [esp+50h] [ebp-5Ch]
  int v70; // [esp+54h] [ebp-58h]
  int v71; // [esp+58h] [ebp-54h]
  int v72; // [esp+5Ch] [ebp-50h] BYREF

  v71 = a7;
  v70 = a6;
  v69 = a5;
  v68 = &v72;
  v67 = a4;
  v66 = a3;
  v65 = a2;
  v64 = a1;
  v7 = dword_412000;
  v8 = &dword_412000[-17408];
  v63 = &dword_412000[-17408];
  v9 = -1;
  while ( 1 )
  {
    v13 = *v7;
    v11 = (unsigned int)v7++ < 0xFFFFFFFC;
    v14 = v11 + v13;
    v11 = __CFADD__(v11, v13) | __CFADD__(v13, v14);
    v12 = v13 + v14;
    do
    {
      if ( v11 )
      {
        v10 = *(_BYTE *)v7;
        v7 = (int *)((char *)v7 + 1);
        *(_BYTE *)v8 = v10;
        v8 = (int *)((char *)v8 + 1);
      }
      else
      {
        v15 = 1;
        while ( 1 )
        {
          v16 = __CFADD__(v12, v12);
          v17 = 2 * v12;
          if ( !v17 )
          {
            v18 = *v7;
            v11 = (unsigned int)v7++ < 0xFFFFFFFC;
            v19 = v11 + v18;
            v16 = __CFADD__(v11, v18) | __CFADD__(v18, v19);
            v17 = v18 + v19;
          }
          v15 += v16 + v15;
          v11 = __CFADD__(v17, v17);
          v20 = 2 * v17 == 0;
          v12 = 2 * v17;
          if ( v11 )
          {
            if ( !v20 )
              break;
            v21 = *v7;
            v11 = (unsigned int)v7++ < 0xFFFFFFFC;
            v22 = v11 + v21;
            v11 = __CFADD__(v11, v21) | __CFADD__(v21, v22);
            v12 = v21 + v22;
            if ( v11 )
              break;
          }
        }
        v23 = 0;
        v11 = v15 < 3;
        v24 = v15 - 3;
        if ( !v11 )
        {
          v25 = v24 << 8;
          LOBYTE(v25) = *(_BYTE *)v7;
          v7 = (int *)((char *)v7 + 1);
          v26 = ~v25;
          if ( !v26 )
          {
            v48 = v63;
            v49 = (char *)(v63 + 19456);
LABEL_33:
            v50 = *(_DWORD *)v49;
            if ( *(_DWORD *)v49 )
            {
              v51 = (int *)((char *)v48 + *((_DWORD *)v49 + 1));
              v49 += 8;
              v52 = ((int (__fastcall *)(int, char *, int, int, char *, int, int, int *, int, int, int))v48[23312])(
                      v23,
                      a2,
                      (int)v48 + v50 + 93048,
                      v64,
                      v65,
                      v66,
                      v67,
                      v68,
                      v69,
                      v70,
                      v71);
              while ( 1 )
              {
                v53 = *v49++;
                if ( !v53 )
                  goto LABEL_33;
                v54 = v49;
                v62 = v49;
                v55 = v53 - 1;
                do
                {
                  if ( !v54 )
                    break;
                  v20 = *v49++ == (char)v55;
                  --v54;
                }
                while ( !v20 );
                v56 = ((int (__cdecl *)(int, char *))v48[23313])(v52, v62);
                if ( !v56 )
                  break;
                *v51++ = v56;
              }
              v50 = ((int (*)(void))v48[23317])();
            }
            v57 = (void (__fastcall *)(int, char *, int *, int, int, int *))v48[23314];
            v58 = v48 - 1024;
            v60 = v50;
            v57(v23, a2, v48 - 1024, 4096, 4, &v60);
            *((_BYTE *)v58 + 495) &= 0x7Fu;
            *((_BYTE *)v58 + 535) &= 0x7Fu;
            ((void (__cdecl *)(int *, int, int, int *))v57)(v48 - 1024, 4096, v59[0], v59);
            do
              v60 = 0;
            while ( &v60 != &v61 - 32 );
            JUMPOUT(0x40845A);
          }
          v9 = v26;
        }
        v27 = __CFADD__(v12, v12);
        v28 = 2 * v12;
        if ( !v28 )
        {
          v29 = *v7;
          v11 = (unsigned int)v7++ < 0xFFFFFFFC;
          v30 = v11 + v29;
          v27 = __CFADD__(v11, v29) | __CFADD__(v29, v30);
          v28 = v29 + v30;
        }
        v31 = v27;
        v32 = __CFADD__(v28, v28);
        v12 = 2 * v28;
        if ( !v12 )
        {
          v33 = *v7;
          v11 = (unsigned int)v7++ < 0xFFFFFFFC;
          v34 = v11 + v33;
          v32 = __CFADD__(v11, v33) | __CFADD__(v33, v34);
          v12 = v33 + v34;
        }
        v35 = v31 + v32 + v31;
        if ( !v35 )
        {
          v36 = 1;
          while ( 1 )
          {
            v37 = __CFADD__(v12, v12);
            v38 = 2 * v12;
            if ( !v38 )
            {
              v39 = *v7;
              v11 = (unsigned int)v7++ < 0xFFFFFFFC;
              v40 = v11 + v39;
              v37 = __CFADD__(v11, v39) | __CFADD__(v39, v40);
              v38 = v39 + v40;
            }
            v36 += v37 + v36;
            v11 = __CFADD__(v38, v38);
            v41 = 2 * v38 == 0;
            v12 = 2 * v38;
            if ( v11 )
            {
              if ( !v41 )
                break;
              v42 = *v7;
              v11 = (unsigned int)v7++ < 0xFFFFFFFC;
              v43 = v11 + v42;
              v11 = __CFADD__(v11, v42) | __CFADD__(v42, v43);
              v12 = v42 + v43;
              if ( v11 )
                break;
            }
          }
          v35 = v36 + 2;
        }
        v44 = (v9 < 0xFFFFF300) + v35 + 1;
        a2 = (char *)v8 + v9;
        if ( v9 <= 0xFFFFFFFC )
        {
          do
          {
            v46 = *(_DWORD *)a2;
            a2 += 4;
            *v8++ = v46;
            v47 = v44 <= 4;
            v44 -= 4;
          }
          while ( !v47 );
          v8 = (int *)((char *)v8 + v44);
        }
        else
        {
          do
          {
            v45 = *a2++;
            *(_BYTE *)v8 = v45;
            v8 = (int *)((char *)v8 + 1);
            --v44;
          }
          while ( v44 );
        }
      }
      v11 = __CFADD__(v12, v12);
      v12 *= 2;
    }
    while ( v12 );
  }
}
// 415938: positive sp value 50 has been found
// 415938: control flows out of bounds to 40845A
// 4158CF: variable 'v23' is possibly undefined
// 4158CF: variable 'a2' is possibly undefined
// 412000: using guessed type int dword_412000[512];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
