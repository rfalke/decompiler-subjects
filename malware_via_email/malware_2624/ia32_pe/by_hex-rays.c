/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall sub_401028(char@<zf>, char@<sf>, char@<of>, __int32@<eax>, __int32@<edx>, int _EBX@<ebx>, __int16 _BP@<bp>, __int32 *@<edi>);
_DWORD *__stdcall sub_41250B(_DWORD *, unsigned int, int);


//----- (00401028) --------------------------------------------------------
void __usercall sub_401028(
        char a1@<zf>,
        char a2@<sf>,
        char a3@<of>,
        __int32 a4@<eax>,
        __int32 a5@<edx>,
        int _EBX@<ebx>,
        __int16 _BP@<bp>,
        __int32 *a8@<edi>)
{
  __int32 *v8; // edi
  __int32 v9; // eax

  if ( a2 ^ a3 | a1 )
  {
    *a8 = a4;
    v8 = a8 + 1;
    v9 = _InterlockedExchange((volatile __int32 *)(a5 + 2055711613), a4);
    __asm { arpl    [ebx-5CE5ED79h], bp }
    _InterlockedExchange((volatile __int32 *)(a5 + 93), a5);
    LOBYTE(v9) = *(_BYTE *)v8 < (unsigned __int8)v9;
    __outbyte(0x7Bu, v9);
    MEMORY[0x61612442] = v9;
    *(__int32 *)((char *)v8 + 1) |= v9;
    __asm { iret }
  }
  JUMPOUT(0x400FAC);
}
// 401054: control flows out of bounds to 401055
// 401028: control flows out of bounds to 400FAC

//----- (0041250B) --------------------------------------------------------
_DWORD *__stdcall sub_41250B(_DWORD *a1, unsigned int a2, int a3)
{
  _DWORD *result; // eax
  unsigned int v4; // ecx

  result = a1;
  v4 = a2 >> 2;
  do
  {
    *result += a3;
    *result = __ROR4__(*result, 220);
    *result ^= 0xEC100F1u;
    *result -= a3;
    *result ^= a3;
    *result = __ROL4__(*result, 9);
    *result++ -= 844131953;
    --v4;
  }
  while ( v4 );
  return result;
}

// nfuncs=18 queued=2 decompiled=2 lumina nreq=0 worse=0 better=0
// ALL OK, 2 function(s) have been successfully decompiled
