/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>);

//-------------------------------------------------------------------------
// Data declarations

int dword_7AE000[512] =
{
  -4260877,
  45922,
  11175280,
  -1196487315,
  16809991,
  -620703402,
  -595742817,
  880770816,
  924968974,
  283115534,
  1220610624,
  -1745891329,
  611617731,
  -2128168696,
  417791985,
  -1088885055,
  -16619559,
  562036731,
  77126135,
  -1946746624,
  692070471,
  1039041014,
  959840767,
  -352160720,
  -67125264,
  -1949237257,
  -863408820,
  1946521444,
  -561421985,
  -947781847,
  822099987,
  -109365249,
  12681673,
  -1096485968,
  -1171720533,
  -5265998,
  2122961655,
  385314763,
  455242600,
  1717363434,
  -503494656,
  -33511425,
  -69476353,
  823322448,
  -726135251,
  -799686673,
  137611561,
  -1070996993,
  -34750791,
  869342567,
  -1983688703,
  -12731673,
  802627980,
  130019457,
  104140303,
  193722425,
  -2123449649,
  -1703996942,
  1527345279,
  -1996387375,
  25702906,
  2076312050,
  -1946427393,
  32014594,
  -1923744207,
  1580400400,
  -360448511,
  492310524,
  -8001,
  -1962622333,
  1375273226,
  -1949922986,
  823141500,
  279335104,
  235100753,
  -268451912,
  1090585151,
  -855392063,
  1096511315,
  1962948992,
  -127716881,
  1575973888,
  1477770691,
  -964603840,
  -653365001,
  28830057,
  -4692465,
  1149984586,
  -406780892,
  1720953089,
  417448233,
  50069466,
  -939437992,
  23015473,
  -327067434,
  -536805384,
  -1619589341,
  1945774945,
  186713651,
  -10951,
  834668031,
  -13093889,
  -1159296537,
  1816285852,
  242537093,
  1950231374,
  -7423241,
  -1074918674,
  -336441082,
  -1185393682,
  -1546522041,
  -62915423,
  1912750895,
  1508673823,
  956369090,
  1665466556,
  -1468892159,
  471786174,
  -302206529,
  30589589,
  -1692335616,
  2063851407,
  -346356145,
  14617487,
  -488948262,
  -1167859265,
  -1017983408,
  -629800720,
  -911806306,
  234927104,
  -171314722,
  -1030870528,
  -1528998076,
  260002222,
  -1000855554,
  -1172042547,
  1880215460,
  1093538091,
  -272278342,
  -1866300156,
  -320107775,
  -981155354,
  -1927778193,
  -14446101,
  2028835157,
  -108542468,
  -765050438,
  1683438219,
  -276069791,
  -494328985,
  269846884,
  -900738519,
  2021653674,
  735152625,
  -276717767,
  -348681426,
  -1019314167,
  -141163659,
  557714414,
  -1978209458,
  -675217090,
  1682983693,
  -555860706,
  -720910691,
  618766,
  -1949865537,
  1056169812,
  -841682374,
  1577428312,
  -1892665911,
  138905327,
  -817368135,
  572112801,
  -820637850,
  1375602167,
  553697083,
  -918008,
  1745905521,
  272283582,
  844289417,
  -1313838897,
  -184561281,
  -14653429,
  -2117891626,
  -1988490816,
  893478952,
  -872534105,
  1079359363,
  1599319809,
  -1991250863,
  1846110263,
  -816485961,
  -1715327525,
  -546908788,
  925484929,
  1307769849,
  55689615,
  1869871806,
  1676998215,
  -1139759057,
  -971096472,
  373324294,
  -6295328,
  808074717,
  -810212602,
  493418210,
  11718560,
  410778306,
  -2082371076,
  307324905,
  -1072960946,
  -121390849,
  -1943216379,
  20631799,
  -1041516073,
  1376881657,
  -522475645,
  1473758750,
  336467709,
  -1545904088,
  -2047153872,
  16836142,
  2916352,
  1178642434,
  -1918326622,
  -6818025,
  1474257023,
  131158,
  2063597633,
  5772800,
  687912395,
  -14846439,
  1371686399,
  1547652230,
  13562368,
  -788494579,
  -1240793066,
  620769968,
  -1476395009,
  1283260416,
  1765146727,
  -469434276,
  1752957639,
  477552384,
  -2012749249,
  1682241794,
  -458353335,
  -2080522657,
  1559470997,
  498448281,
  -855599216,
  -1526686049,
  1937754173,
  -279718849,
  10919147,
  1947467812,
  -17230868,
  1711929711,
  88603597,
  -469705973,
  1744887808,
  -538431945,
  951562471,
  236914512,
  -1838331530,
  -48315591,
  15711725,
  9393541,
  -1174647815,
  954676263,
  -1188036385,
  1059960576,
  -2108221794,
  1811980697,
  -574896719,
  1208018612,
  1409703734,
  676782321,
  192261261,
  -557597282,
  823133597,
  -1559628609,
  453042783,
  -647955232,
  -425459492,
  31039,
  -444353678,
  533939890,
  1966160044,
  1164257701,
  769588460,
  261294516,
  23652335,
  267411591,
  -1263927109,
  2072903725,
  1056965571,
  -285349960,
  12864910,
  -786883184,
  972281096,
  -5537536,
  158390,
  1903237,
  3988444,
  -1790830214,
  263510283,
  -1336060511,
  -155480740,
  -1011627069,
  -1191121397,
  -1871839035,
  1043454900,
  -885747777,
  323631653,
  22745459,
  1162133518,
  -1950007401,
  -995001919,
  225051950,
  1711872,
  -7608897,
  2029453526,
  8178051,
  -1628169260,
  23056599,
  2025455769,
  -2002215413,
  -104176333,
  -136603799,
  1586854399,
  -1950744500,
  1646341855,
  12660414,
  -553628160,
  1272694783,
  -1588174182,
  1936939408,
  924894350,
  -100619233,
  85820449,
  732897144,
  165224165,
  922751689,
  -1493180480,
  1855857329,
  52843591,
  -542237768,
  257384139,
  -54821152,
  3774107,
  9239655,
  1291902413,
  777520405,
  -1880491041,
  454952213,
  -2113872377,
  -608962645,
  1842278143,
  73635758,
  -720172364,
  -382951680,
  543915520,
  -552613105,
  1879646325,
  -1724618762,
  723798140,
  -1008670467,
  1617422550,
  1198605957,
  1789463558,
  -469993495,
  552915709,
  2122554974,
  201385380,
  -612378112,
  1813686262,
  671110922,
  -972138484,
  -1534597721,
  1315633841,
  -1193280457,
  2144608703,
  989876846,
  1362119149,
  -1811349376,
  -1600436737,
  414630721,
  -684916625,
  -1169571899,
  -1128414876,
  853546300,
  -1823579136,
  1659345089,
  670072537,
  -797294048,
  216203319,
  -2140184225,
  1677264653,
  -33750858,
  -281090415,
  1310613187,
  -906919453,
  738214117,
  -1698549846,
  1509383398,
  2022988277,
  -1118522401,
  -1743318403,
  1962946568,
  2143174699,
  2025639367,
  145995600,
  25836811,
  -122328305,
  -2031228254,
  1491930052,
  1298004091,
  771539957,
  -205676704,
  25035113,
  -564372622,
  -1900214868,
  -523860013,
  -939724800,
  -1337540345,
  -1879941343,
  222225508,
  -797409558,
  -581408591,
  -1853290029,
  -1339087213,
  -2046163241,
  -1790638650,
  299720321,
  534296054,
  1299832851,
  -1892437160,
  1532297891,
  1012997232,
  -279408578,
  -133809161,
  -276766142,
  505806882,
  239440491,
  -981467319,
  -315031327,
  -738991910,
  -1604415959,
  1703810022,
  829848305,
  -6904,
  -277388289,
  -1577023554,
  1502264821,
  51967990,
  -1778557727,
  -1968921032,
  -193446598,
  254533362,
  73958649,
  907122440,
  -551670001,
  2083394685,
  -1990446445,
  -1157411241,
  -516063335,
  1545321728,
  1620115476,
  1018428686,
  1216994920,
  859400221,
  -2031838277,
  444357167,
  -1355698301,
  -445021692,
  1156186258,
  501499815,
  -735664478,
  -1905930987,
  1303583986,
  -1322902979,
  397131398,
  -1726152481,
  -1248892737,
  -218886141,
  369156204,
  -1239488195,
  -1478509206,
  -1709413665,
  14428819,
  324216649,
  1877853354,
  -1233227441,
  1326347083,
  -672528224,
  807423806,
  -1239698619,
  551028890,
  19046495,
  1610374158,
  -627452827,
  1569123210,
  647689665,
  -357369888,
  -1773495024,
  -1612070374,
  1199444769,
  -954339439,
  1161831518,
  1834277473,
  900432640
}; // weak


//----- (007B5A30) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>)
{
  int *v4; // esi
  int *v5; // edi
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  int i; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  unsigned int v16; // eax
  bool v17; // zf
  int v18; // ebx
  int v19; // ebx
  int v20; // ett
  unsigned int v21; // eax
  bool v22; // cf
  int v23; // ebx
  int v24; // ett
  unsigned int v25; // eax
  unsigned int v26; // eax
  int v27; // eax
  bool v28; // cf
  int v29; // ebx
  int v30; // ett
  BOOL v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  int v35; // ecx
  int v36; // ecx
  bool v37; // cf
  int v38; // ebx
  int v39; // ebx
  int v40; // ett
  bool v41; // zf
  int v42; // ebx
  int v43; // ett
  unsigned int v44; // ecx
  char *v45; // edx
  char v46; // al
  int v47; // eax
  bool v48; // cc
  int *v49; // esi
  int *v50; // edi
  int v51; // ecx
  char v52; // al
  unsigned __int8 v53; // al
  int v54; // eax
  int v55; // eax
  char v56; // t0
  unsigned __int8 v57; // bl
  char *v58; // edi
  int v59; // eax
  int *v60; // ebx
  int v61; // ebp
  char v62; // al
  char *v63; // ecx
  unsigned __int8 v64; // al
  int v65; // eax
  void (__cdecl *v66)(int *, int, int, int *); // ebp
  int *v67; // edi
  int v68[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v69; // [esp+2Ch] [ebp-80h] BYREF
  int v70; // [esp+30h] [ebp-7Ch] BYREF
  char *v71; // [esp+34h] [ebp-78h]
  int *v72; // [esp+38h] [ebp-74h]
  int v73; // [esp+3Ch] [ebp-70h]
  int v74; // [esp+40h] [ebp-6Ch]
  int v75; // [esp+44h] [ebp-68h]
  int v76; // [esp+48h] [ebp-64h]
  int *v77; // [esp+4Ch] [ebp-60h]
  int v78; // [esp+50h] [ebp-5Ch]
  int v79; // [esp+54h] [ebp-58h]
  int v80; // [esp+58h] [ebp-54h]
  int v81; // [esp+5Ch] [ebp-50h] BYREF

  v77 = &v81;
  v75 = a3;
  v74 = a2;
  v73 = a1;
  v4 = dword_7AE000;
  v5 = &dword_7AE000[-963584];
  v72 = &dword_7AE000[-963584];
  while ( 1 )
  {
    v9 = *v4;
    v7 = (unsigned int)v4++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v4;
        v4 = (int *)((char *)v4 + 1);
        *(_BYTE *)v5 = v6;
        v5 = (int *)((char *)v5 + 1);
      }
      else
      {
        for ( i = 1; ; i = v21 + v22 + v21 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v16 = i + v12 + i;
          v7 = __CFADD__(v13, v13);
          v17 = 2 * v13 == 0;
          v18 = 2 * v13;
          if ( v7 )
          {
            if ( !v17 )
              break;
            v19 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v20 = v7 + v19;
            v7 = __CFADD__(v7, v19) | __CFADD__(v19, v20);
            v18 = v19 + v20;
            if ( v7 )
              break;
          }
          v21 = v16 - 1;
          v22 = __CFADD__(v18, v18);
          v8 = 2 * v18;
          if ( !v8 )
          {
            v23 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v24 = v7 + v23;
            v22 = __CFADD__(v7, v23) | __CFADD__(v23, v24);
            v8 = v23 + v24;
          }
        }
        v7 = v16 < 3;
        v25 = v16 - 3;
        if ( v7 )
        {
          v28 = __CFADD__(v18, v18);
          v18 *= 2;
          if ( !v18 )
          {
            v29 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v30 = v7 + v29;
            v28 = __CFADD__(v7, v29) | __CFADD__(v29, v30);
            v18 = v29 + v30;
          }
        }
        else
        {
          v26 = v25 << 8;
          LOBYTE(v26) = *(_BYTE *)v4;
          v4 = (int *)((char *)v4 + 1);
          v27 = ~v26;
          if ( !v27 )
          {
            v49 = v72;
            v50 = v72;
            v51 = 6;
            while ( 1 )
            {
              v52 = *(_BYTE *)v50;
              v50 = (int *)((char *)v50 + 1);
              v53 = v52 + 24;
              while ( v53 <= 1u && *(_BYTE *)v50 == 1 )
              {
                v54 = *v50;
                LOWORD(v54) = BYTE1(*v50);
                v55 = __ROL4__(v54, 16);
                v56 = v55;
                LOBYTE(v55) = BYTE1(v55);
                BYTE1(v55) = v56;
                v57 = *((_BYTE *)v50 + 4) + 24;
                *v50 = (int)v49 + v55 - (_DWORD)v50;
                v50 = (int *)((char *)v50 + 5);
                v53 = v57;
                if ( !--v51 )
                {
                  v58 = (char *)(v49 + 969728);
LABEL_41:
                  v59 = *(_DWORD *)v58;
                  if ( *(_DWORD *)v58 )
                  {
                    v60 = (int *)((char *)v49 + *((_DWORD *)v58 + 1));
                    v58 += 8;
                    v61 = ((int (__cdecl *)(int, int, int, int, int, int *, int, int, int))v49[973201])(
                            (int)v49 + v59 + 3892684,
                            v73,
                            v74,
                            v75,
                            v76,
                            v77,
                            v78,
                            v79,
                            v80);
                    while ( 1 )
                    {
                      v62 = *v58++;
                      if ( !v62 )
                        goto LABEL_41;
                      v63 = v58;
                      v71 = v58;
                      v64 = v62 - 1;
                      do
                      {
                        if ( !v63 )
                          break;
                        v17 = *v58++ == (char)v64;
                        --v63;
                      }
                      while ( !v17 );
                      v65 = ((int (__cdecl *)(int, char *))v49[973202])(v61, v71);
                      if ( !v65 )
                        break;
                      *v60++ = v65;
                    }
                    v59 = ((int (*)(void))v49[973206])();
                  }
                  v66 = (void (__cdecl *)(int *, int, int, int *))v49[973203];
                  v67 = v49 - 1024;
                  v69 = v59;
                  v66(v49 - 1024, 4096, 4, &v69);
                  *((_BYTE *)v67 + 799) &= 0x7Fu;
                  *((_BYTE *)v67 + 839) &= 0x7Fu;
                  v66(v49 - 1024, 4096, v68[0], v68);
                  do
                    v69 = 0;
                  while ( &v69 != &v70 - 32 );
                  JUMPOUT(0x4011C1);
                }
              }
            }
          }
          v28 = v27 & 1;
          a4 = v27 >> 1;
        }
        v31 = v28;
        v32 = __CFADD__(v18, v18);
        v8 = 2 * v18;
        if ( !v8 )
        {
          v33 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v34 = v7 + v33;
          v32 = __CFADD__(v7, v33) | __CFADD__(v33, v34);
          v8 = v33 + v34;
        }
        v35 = v31 + v32 + v31;
        if ( !v35 )
        {
          v36 = 1;
          while ( 1 )
          {
            v37 = __CFADD__(v8, v8);
            v38 = 2 * v8;
            if ( !v38 )
            {
              v39 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v40 = v7 + v39;
              v37 = __CFADD__(v7, v39) | __CFADD__(v39, v40);
              v38 = v39 + v40;
            }
            v36 += v37 + v36;
            v7 = __CFADD__(v38, v38);
            v41 = 2 * v38 == 0;
            v8 = 2 * v38;
            if ( v7 )
            {
              if ( !v41 )
                break;
              v42 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v43 = v7 + v42;
              v7 = __CFADD__(v7, v42) | __CFADD__(v42, v43);
              v8 = v42 + v43;
              if ( v7 )
                break;
            }
          }
          v35 = v36 + 2;
        }
        v44 = (a4 < 0xFFFFFB00) + v35 + 1;
        v45 = (char *)v5 + a4;
        if ( a4 <= 0xFFFFFFFC )
        {
          do
          {
            v47 = *(_DWORD *)v45;
            v45 += 4;
            *v5++ = v47;
            v48 = v44 <= 4;
            v44 -= 4;
          }
          while ( !v48 );
          v5 = (int *)((char *)v5 + v44);
        }
        else
        {
          do
          {
            v46 = *v45++;
            *(_BYTE *)v5 = v46;
            v5 = (int *)((char *)v5 + 1);
            --v44;
          }
          while ( v44 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// 7B5BC7: positive sp value 50 has been found
// 7B5BC7: control flows out of bounds to 4011C1
// 7AE000: using guessed type int dword_7AE000[512];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
