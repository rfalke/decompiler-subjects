/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall Sdnielsad(char@<cf>, char@<zf>, int@<eax>, int@<ecx>, _DWORD *@<ebx>, int@<edi>, int@<esi>);
// int __usercall SetJuhwagao@<eax>(int@<eax>, int@<edx>, char@<cl>, int@<ebp>, int@<edi>, int@<esi>, int, int, int, int);
// HPEN __usercall sub_4016FE@<eax>(unsigned __int16@<cx>, int@<ebx>, int@<ebp>, int@<edi>, int@<esi>);
// void __usercall BeginMgmitql(int _EAX@<eax>, int@<edx>, _BYTE *_EBX@<ebx>);
// void __usercall start(__int16@<ax>, int@<edx>, int@<ebx>, int@<ebp>, int@<edi>, int@<esi>, int, int, int, int, int);
// void __usercall sub_401EDA(int@<edx>, int@<ecx>, int@<ebx>, int@<edi>, int@<esi>);
// HPEN __usercall sub_401FD2@<eax>(unsigned __int16@<cx>, int@<ebx>, int@<ebp>, int@<edi>, int@<esi>);
// HPEN __usercall sub_401FF7@<eax>(unsigned __int16@<cx>, int@<ebx>);
// HPEN __usercall sub_402006@<eax>(unsigned __int16@<cx>, int@<ebx>);

//-------------------------------------------------------------------------
// Data declarations

// extern HPEN (__stdcall *ExtCreatePen)(DWORD iPenStyle, DWORD cWidth, const LOGBRUSH *plbrush, DWORD cStyle, const DWORD *pstyle);
_UNKNOWN loc_401328; // weak
_UNKNOWN sub_4016F9; // weak
_UNKNOWN loc_4018AD; // weak
char byte_401941[3] = { '\0', '\0', '\0' }; // weak
int dword_408041 = -1010580541; // weak
int dword_408063 = -1010580541; // weak
int dword_4081A1 = -1010580541; // weak
int dword_408401 = -1010580541; // weak
int dword_408453 = -1010580541; // weak
int dword_408556 = -1010580541; // weak
int dword_408596 = -1010580541; // weak
int dword_408624 = -1010580541; // weak
int dword_408689 = -1010580541; // weak
int dword_4086BF = -1010580541; // weak
int dword_4087EC = -1010580541; // weak
int dword_408939 = -1010580541; // weak
int dword_408BBA = -1010580541; // weak
int dword_408C4C = -1010580541; // weak
int dword_408D10 = -1010580541; // weak
int dword_408D95 = -1010580541; // weak
int dword_408EF5 = -1010580541; // weak
int dword_408F46 = -1010580541; // weak
int dword_409108 = -1010580541; // weak
int dword_40913E = -1010580541; // weak
int dword_409168 = -1010580541; // weak
int dword_4091BB = -1010580541; // weak
int dword_409207 = -1010580541; // weak
int dword_409289 = -1010580541; // weak
int dword_40945A = -1010580541; // weak
int dword_40947B = -1010580541; // weak
int dword_4094D8 = -1010580541; // weak
int dword_4094FA = -1010580541; // weak
int dword_40955B = -1010580541; // weak
int dword_409635 = -1010580541; // weak
int dword_4096DC = -1010580541; // weak
int dword_409A8E = -1010580541; // weak
int dword_409AC2 = -1010580541; // weak
int dword_409B91 = -1010580541; // weak
int dword_409BE8 = -1010580541; // weak
int dword_409C85 = -1010580541; // weak
int dword_409CAA = -1010580541; // weak
int dword_409D63 = -1010580541; // weak
int dword_409FA1 = -1010580541; // weak
int dword_40A072 = -1010580541; // weak
int dword_40A11A = -1010580541; // weak
int dword_40A2F6 = -1010580541; // weak
int dword_40A357 = -1010580541; // weak
int dword_40A438 = -1010580541; // weak
int dword_40A44A = -1010580541; // weak
int dword_40A512 = -1010580541; // weak
int dword_40A5A5 = -1010580541; // weak
int dword_40A6C9 = -1010580541; // weak
int dword_40A6E2 = -1010580541; // weak
int dword_40A777 = -1010580541; // weak
int dword_40A81F = -1010580541; // weak
int dword_40A88A = -1010580541; // weak
int dword_40A9B8 = -1010580541; // weak
int dword_40AA5B = -1010580541; // weak
int dword_40AA90 = -1010580541; // weak
int dword_40AAB4 = -1010580541; // weak
int dword_40AC84 = -1010580541; // weak
int dword_40ACC4 = -1010580541; // weak
int dword_40AD2C = -1010580541; // weak
int dword_40AD5C = -1010580541; // weak
int dword_40AD71 = -1010580541; // weak
int dword_40ADFA = -1010580541; // weak
int dword_40AE19 = -1010580541; // weak
int dword_40AEC4 = -1010580541; // weak
int dword_40AEDA = -1010580541; // weak
int dword_40AEF7 = -1010580541; // weak
int dword_40B14C = -1010580541; // weak
int dword_40B1C2 = -1010580541; // weak
int dword_40B242 = -1010580541; // weak
int dword_40B26A = -1010580541; // weak
int dword_40B2B3 = -1010580541; // weak
int dword_40B2D3 = -1010580541; // weak
int dword_40B3CF = -1010580541; // weak
int dword_40B437 = -1010580541; // weak
int dword_40B536 = -1010580541; // weak
int dword_40B59C = -1010580541; // weak
int dword_40B5CF = -1010580541; // weak
int dword_40B600 = -1010580541; // weak
int dword_40B66E = -1010580541; // weak
int dword_40B6D2 = -1010580541; // weak
int dword_40B6EA = -1010580541; // weak
int dword_40B705 = -1010580541; // weak
int dword_40B8C9 = -1010580541; // weak
int dword_40BAE8 = -1010580541; // weak
int dword_40BB88 = -1010580541; // weak
int dword_40BC04 = -1010580541; // weak
int dword_40BC55 = -1010580541; // weak
int dword_40BD62 = -1010580541; // weak
int dword_40BD99 = -1010580541; // weak
int dword_40BEC2 = -1010580541; // weak
int dword_40BF69 = -1010580541; // weak
int dword_40C09E = -1010580541; // weak
int dword_40C122 = -1010580541; // weak
int dword_40C163 = -1010580541; // weak
int dword_40C1C9 = -1010580541; // weak
int dword_40C218 = -1010580541; // weak
int dword_40C258 = -1010580541; // weak
int dword_40C348 = -1010580541; // weak
int dword_40C368 = -1010580541; // weak
int dword_40C3DF = -1010580541; // weak
int dword_40C45A = -1010580541; // weak
int dword_40C4A8 = -1010580541; // weak
_UNKNOWN unk_40C505; // weak
int dword_40C68D = -1010580541; // weak
int dword_40C6B7 = -1010580541; // weak
int dword_40C7B6 = -1010580541; // weak


//----- (00401304) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall Sdnielsad(
        char a1@<cf>,
        char a2@<zf>,
        int _EAX@<eax>,
        int a4@<ecx>,
        _DWORD *a5@<ebx>,
        int a6@<edi>,
        int a7@<esi>)
{
  char *v7; // eax
  unsigned int *v8; // ecx
  char *v9; // edi
  int v10; // edx
  char *v11; // esi
  unsigned int v12; // ecx
  int v13; // ebx
  int v14; // ebx
  int v15; // ebx
  int v16; // esi
  unsigned int *v17; // [esp-10h] [ebp-10h]

  if ( !a2 )
  {
    BYTE1(a4) -= *(_BYTE *)(a6 - 998047680);
    *a5 = __ROL4__(*a5, 200);
    dword_408F46 += a4 + 1;
    return;
  }
  __asm { ficom   dword ptr [eax+2Bh] }
  v7 = (char *)(_EAX - ((_DWORD)&unk_40C505 + a1));
  if ( byte_401941 != (char *)-1 )
  {
    dword_40BD62 = (int)a5;
    v8 = (unsigned int *)byte_401941;
    v9 = v7;
    v10 = (int)&v7[dword_40BEC2 - a7];
    v11 = v7;
    dword_40A072 += v10;
    while ( 1 )
    {
      if ( v7 != v9 )
      {
        v17 = v8;
        v12 = *v8;
        v13 = dword_409635 + dword_40C68D - (_DWORD)v11 - dword_408D95;
        dword_40BC04 += v13;
        if ( !v12 )
        {
          v15 = v10 + 1;
          v16 = v11 - v9;
          do
          {
            dword_40AC84 += v15;
            *v9++ = 0;
            v15 += dword_4091BB;
            --v16;
          }
          while ( v16 );
          return;
        }
        v14 = v13 - (_DWORD)v7;
        v10 = dword_40947B + MEMORY[0x4104A7] - v14;
        dword_40AC84 -= v14;
        qmemcpy(v9, v11, v12);
        v11 += v12;
        v9 += v12;
        dword_40B437 += v10;
        v8 = v17;
      }
      v11 += 16;
      ++v8;
      dword_40A438 -= dword_40B2D3 + 91 * (_DWORD)v9;
      v7 = &v11[*v8];
    }
  }
}
// 401423: positive sp value C has been found
// 40132A: inconsistent fpu stack
// 401304: could not find valid save-restore pair for ebp
// 408D95: using guessed type int dword_408D95;
// 408F46: using guessed type int dword_408F46;
// 4091BB: using guessed type int dword_4091BB;
// 40947B: using guessed type int dword_40947B;
// 409635: using guessed type int dword_409635;
// 40A072: using guessed type int dword_40A072;
// 40A438: using guessed type int dword_40A438;
// 40AC84: using guessed type int dword_40AC84;
// 40B2D3: using guessed type int dword_40B2D3;
// 40B437: using guessed type int dword_40B437;
// 40BC04: using guessed type int dword_40BC04;
// 40BD62: using guessed type int dword_40BD62;
// 40BEC2: using guessed type int dword_40BEC2;
// 40C68D: using guessed type int dword_40C68D;

//----- (0040153D) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall SetJuhwagao@<eax>(
        int a1@<eax>,
        int a2@<edx>,
        char a3@<cl>,
        int a4@<ebp>,
        int a5@<edi>,
        int a6@<esi>,
        int a7,
        int a8,
        int a9,
        int a10)
{
  int v10; // esi
  int result; // eax
  int v12; // eax
  char v13; // dl
  int v14; // ebx
  int v15; // esi
  char v16; // dl
  int v17; // ebx
  int v18; // [esp-11Ch] [ebp-11Ch]
  _BYTE v19[260]; // [esp-104h] [ebp-104h]

  *(_BYTE *)(a1 + 51905620) += a3;
  result = a1 ^ 0x410703;
  v19[a5] = a3;
  dword_40BF69 -= a6;
  if ( a4 != 1 )
  {
    v10 = dword_40AD5C + result - dword_4087EC - a2;
    dword_408453 += v10;
    dword_408063 += v10 - a2;
    dword_409BE8 = dword_40B242 + dword_408596 + v18;
    JUMPOUT(0x401538);
  }
  dword_40B14C += dword_40A6C9 + v18;
  dword_40C258 += dword_40A6C9 + v18 - dword_408EF5;
  dword_40A777 -= MEMORY[0x40FB0E] + dword_40A357 - 1 - dword_40AEC4;
  if ( a10 )
  {
    dword_409BE8 = dword_408BBA + a2 + 2;
    dword_40A11A += dword_40B8C9 + dword_408F46 - a2 - dword_4086BF;
    dword_40B242 = dword_40C163 + dword_40A5A5 - a5 - dword_40C1C9;
    v12 = (unsigned __int8)(result + 1);
    v13 = v19[v12];
    v14 = (unsigned __int8)v12 - MEMORY[0x4102A3];
    dword_409D63 += v14;
    LOBYTE(v14) = 78;
    v15 = (unsigned __int8)(a5 + v13);
    v16 = v19[v15];
    dword_40BC04 = v14 - dword_40C258 - MEMORY[0x410535] - v15;
    v19[v12] = v16;
    JUMPOUT(0x40164C);
  }
  v17 = dword_40B6EA + a2 - 1;
  dword_408D10 = v17;
  LOBYTE(v17) = 94;
  dword_40AE19 = dword_4091BB + v17 - dword_40A072 - dword_40AEF7;
  dword_40B705 = MEMORY[0x410217] + dword_408596 + 103;
  return result;
}
// 4016F8: positive sp value 11C has been found
// 401646: control flows out of bounds to 40164C
// 401532: control flows out of bounds to 401538
// 40155F: variable 'v18' is possibly undefined
// 408063: using guessed type int dword_408063;
// 408453: using guessed type int dword_408453;
// 408596: using guessed type int dword_408596;
// 4086BF: using guessed type int dword_4086BF;
// 4087EC: using guessed type int dword_4087EC;
// 408BBA: using guessed type int dword_408BBA;
// 408D10: using guessed type int dword_408D10;
// 408EF5: using guessed type int dword_408EF5;
// 408F46: using guessed type int dword_408F46;
// 4091BB: using guessed type int dword_4091BB;
// 409BE8: using guessed type int dword_409BE8;
// 409D63: using guessed type int dword_409D63;
// 40A072: using guessed type int dword_40A072;
// 40A11A: using guessed type int dword_40A11A;
// 40A357: using guessed type int dword_40A357;
// 40A5A5: using guessed type int dword_40A5A5;
// 40A6C9: using guessed type int dword_40A6C9;
// 40A777: using guessed type int dword_40A777;
// 40AD5C: using guessed type int dword_40AD5C;
// 40AE19: using guessed type int dword_40AE19;
// 40AEC4: using guessed type int dword_40AEC4;
// 40AEF7: using guessed type int dword_40AEF7;
// 40B14C: using guessed type int dword_40B14C;
// 40B242: using guessed type int dword_40B242;
// 40B6EA: using guessed type int dword_40B6EA;
// 40B705: using guessed type int dword_40B705;
// 40B8C9: using guessed type int dword_40B8C9;
// 40BC04: using guessed type int dword_40BC04;
// 40BF69: using guessed type int dword_40BF69;
// 40C163: using guessed type int dword_40C163;
// 40C1C9: using guessed type int dword_40C1C9;
// 40C258: using guessed type int dword_40C258;

//----- (004016FE) --------------------------------------------------------
HPEN __usercall sub_4016FE@<eax>(unsigned __int16 a1@<cx>, int a2@<ebx>, int a3@<ebp>, int a4@<edi>, int a5@<esi>)
{
  int v5; // edx
  int v6; // ecx
  unsigned int v7; // eax
  unsigned int v8; // eax
  int v9; // ebx
  HPEN result; // eax
  int v11; // ebx
  int v12; // ebx
  int v13; // ebx

  sub_401FF7(a1, a2);
  dword_40C163 -= a2 - dword_40BB88;
  v7 = __readfsdword(0x18u) + 24;
  v8 = *(_DWORD *)(v7 + 28) + v7;
  dword_40C7B6 -= (char)v5;
  v8 -= 9;
  dword_40A512 += v5 + v6 - dword_409207 - MEMORY[0x41078D];
  dword_409108 = MEMORY[0x410190] + a4 - 1 - dword_40B5CF;
  v9 = dword_40C45A + MEMORY[0x40FDDD] + v5 - dword_40B26A;
  dword_408041 = v9;
  LOBYTE(v9) = 8;
  dword_409A8E += a3 + v9;
  dword_40A6C9 += v6 + dword_40C368 + v8 - dword_40AA5B;
  result = (HPEN)(v8 - 102);
  dword_40C3DF = MEMORY[0x4101A2] + dword_40B600 + (char)v6;
  if ( (_BYTE)result )
  {
    v11 = dword_40AD2C + (unsigned __int8)v6;
    result = sub_402006(v6, v11);
    dword_40C09E += v11;
    dword_40B66E -= 73 * a3;
    dword_408624 = v5 + dword_40B14C + v5 + v6 + 1;
    v12 = (__int16)v5;
    dword_409289 -= (__int16)v5;
    BYTE1(v12) = 85;
    dword_40C68D -= a3 + dword_408D10 + v12 + 1;
  }
  dword_40A357 += dword_408596 + a3 - 1 - (_DWORD)result;
  dword_40B26A += (unsigned __int16)v6 + dword_40B26A;
  dword_4094FA = dword_409FA1 + dword_408EF5;
  v13 = MEMORY[0x4104E6] + a5 - a4 - dword_409FA1;
  dword_40A777 -= v13;
  BYTE1(v13) = 19;
  dword_408689 -= v6 + dword_40AEDA + v13 + 1;
  dword_40AAB4 += -dword_4091BB - (_DWORD)result;
  dword_40A11A -= (__int16)v5;
  return result;
}
// 40171F: variable 'v5' is possibly undefined
// 40172D: variable 'v6' is possibly undefined
// 408041: using guessed type int dword_408041;
// 408596: using guessed type int dword_408596;
// 408624: using guessed type int dword_408624;
// 408689: using guessed type int dword_408689;
// 408D10: using guessed type int dword_408D10;
// 408EF5: using guessed type int dword_408EF5;
// 409108: using guessed type int dword_409108;
// 4091BB: using guessed type int dword_4091BB;
// 409207: using guessed type int dword_409207;
// 409289: using guessed type int dword_409289;
// 4094FA: using guessed type int dword_4094FA;
// 409A8E: using guessed type int dword_409A8E;
// 409FA1: using guessed type int dword_409FA1;
// 40A11A: using guessed type int dword_40A11A;
// 40A357: using guessed type int dword_40A357;
// 40A512: using guessed type int dword_40A512;
// 40A6C9: using guessed type int dword_40A6C9;
// 40A777: using guessed type int dword_40A777;
// 40AA5B: using guessed type int dword_40AA5B;
// 40AAB4: using guessed type int dword_40AAB4;
// 40AD2C: using guessed type int dword_40AD2C;
// 40AEDA: using guessed type int dword_40AEDA;
// 40B14C: using guessed type int dword_40B14C;
// 40B26A: using guessed type int dword_40B26A;
// 40B5CF: using guessed type int dword_40B5CF;
// 40B600: using guessed type int dword_40B600;
// 40B66E: using guessed type int dword_40B66E;
// 40B8C9: using guessed type int dword_40B8C9;
// 40BB88: using guessed type int dword_40BB88;
// 40C09E: using guessed type int dword_40C09E;
// 40C163: using guessed type int dword_40C163;
// 40C368: using guessed type int dword_40C368;
// 40C3DF: using guessed type int dword_40C3DF;
// 40C45A: using guessed type int dword_40C45A;
// 40C68D: using guessed type int dword_40C68D;
// 40C7B6: using guessed type int dword_40C7B6;

//----- (00401911) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall BeginMgmitql(int _EAX@<eax>, int a2@<edx>, _BYTE *_EBX@<ebx>)
{
  char *v3; // edi
  unsigned int v4; // edx
  char *v5; // [esp-8h] [ebp-8h]

  *_EBX += _EAX;
  __asm { xlat }
  dword_40B59C -= a2;
  v3 = v5;
  dword_40C218 = dword_40AD71 - dword_40BD99 - _EAX - _EAX;
  while ( 1 )
  {
    v4 = *(_DWORD *)(_EAX + 4);
    if ( !v4 )
      break;
    qmemcpy(v3, *(const void **)_EAX, v4);
    v3 += v4;
    _EAX += 8;
  }
  JUMPOUT(0x402031);
}
// 401FF2: positive sp value 8 has been found
// 401FF2: control flows out of bounds to 402031
// 401928: variable 'v5' is possibly undefined
// 40AD71: using guessed type int dword_40AD71;
// 40B59C: using guessed type int dword_40B59C;
// 40BD99: using guessed type int dword_40BD99;
// 40C218: using guessed type int dword_40C218;

//----- (00401D8D) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(
        __int16 a1@<ax>,
        int a2@<edx>,
        int a3@<ebx>,
        int a4@<ebp>,
        int a5@<edi>,
        int a6@<esi>,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11)
{
  int v11; // eax
  int v12; // edx
  int v13; // edi
  int v14; // ebx
  int v15; // ecx
  int v16; // esi
  unsigned __int16 v17; // cx
  int v18; // edx
  int v19; // eax
  int v20; // ecx
  int v21; // edi
  int v22; // esi
  int v23; // ebx
  int v24; // ecx
  int v25; // ecx
  int v26; // edx
  int v27; // [esp-18h] [ebp-18h]
  _DWORD _FFFFFFEC[6]; // [esp-14h] [ebp-14h] BYREF

  dword_409AC2 = dword_40C4A8;
  _FFFFFFEC[0] = a4;
  dword_40BF69 += (__int16)(dword_408939 + dword_40A81F + a1 - dword_40C4A8);
  sub_401EDA(a2, dword_40AEC4 - a6, a3, a5, a6);
  dword_40B536 = v11 - v12;
  v13 = (char)(v11 - v12);
  v14 = 58 * v13 - dword_40BC55;
  dword_409168 += v14;
  dword_40ADFA -= dword_40BC55;
  v15 = dword_40BC55 - a6;
  v16 = a6 - dword_408C4C;
  dword_40B6D2 = (unsigned __int64)((__int64 (__fastcall *)(int, _DWORD))loc_4018AD)(v15, (char)dword_40BC55) >> 32;
  sub_401FD2(v17, v14--, (int)_FFFFFFEC, v13, v16);
  v19 = ((int (__thiscall *)(int))loc_401328)(v18 + 60);
  dword_40B2B3 -= v14;
  v27 = v19;
  dword_40AA90 = v20 - (_DWORD)_FFFFFFEC - dword_40A44A;
  ((void (__thiscall *)(int))sub_4016F9)(dword_40B2B3);
  dword_40AD71 += v14;
  v21 = _FFFFFFEC[0];
  v22 = _FFFFFFEC[1];
  dword_40B3CF += v14 - (v27 + 2453);
  v23 = _FFFFFFEC[2];
  dword_40945A -= dword_40A88A + dword_40955B + dword_409B91;
  dword_409168 += dword_40C3DF + dword_409108 + MEMORY[0x40FF7A] + dword_40A9B8;
  v24 = _FFFFFFEC[5];
  BYTE1(v24) = 71;
  ((void (__fastcall *)(int, _DWORD))_FFFFFFEC[4])(v24, _FFFFFFEC[3]);
  sub_401EDA(v26, dword_40913E + dword_4096DC + v25 - dword_40B8C9, v23, v21, v22);
}
// 401EC3: positive sp value 14 has been found
// 401D8D: could not find valid save-restore pair for ebp
// 401DD1: variable 'v11' is possibly undefined
// 401DD1: variable 'v12' is possibly undefined
// 401E14: variable 'v17' is possibly undefined
// 401E19: variable 'v18' is possibly undefined
// 401E2D: variable 'v20' is possibly undefined
// 401ED5: variable 'v26' is possibly undefined
// 401EC8: variable 'v25' is possibly undefined
// 408939: using guessed type int dword_408939;
// 408C4C: using guessed type int dword_408C4C;
// 408EF5: using guessed type int dword_408EF5;
// 409108: using guessed type int dword_409108;
// 40913E: using guessed type int dword_40913E;
// 409168: using guessed type int dword_409168;
// 40945A: using guessed type int dword_40945A;
// 40955B: using guessed type int dword_40955B;
// 4096DC: using guessed type int dword_4096DC;
// 409AC2: using guessed type int dword_409AC2;
// 409B91: using guessed type int dword_409B91;
// 40A44A: using guessed type int dword_40A44A;
// 40A81F: using guessed type int dword_40A81F;
// 40A88A: using guessed type int dword_40A88A;
// 40A9B8: using guessed type int dword_40A9B8;
// 40AA90: using guessed type int dword_40AA90;
// 40AD71: using guessed type int dword_40AD71;
// 40ADFA: using guessed type int dword_40ADFA;
// 40AEC4: using guessed type int dword_40AEC4;
// 40B2B3: using guessed type int dword_40B2B3;
// 40B3CF: using guessed type int dword_40B3CF;
// 40B536: using guessed type int dword_40B536;
// 40B6D2: using guessed type int dword_40B6D2;
// 40B8C9: using guessed type int dword_40B8C9;
// 40BC55: using guessed type int dword_40BC55;
// 40BEC2: using guessed type int dword_40BEC2;
// 40BF69: using guessed type int dword_40BF69;
// 40C3DF: using guessed type int dword_40C3DF;
// 40C4A8: using guessed type int dword_40C4A8;

//----- (00401EDA) --------------------------------------------------------
void __usercall sub_401EDA(int a1@<edx>, int a2@<ecx>, int a3@<ebx>, int a4@<edi>, int a5@<esi>)
{
  int v5; // ecx
  char *v6; // ebx
  int v7; // ebp
  char *v8; // ebx
  int v9; // ebp
  char *retaddr; // [esp+4h] [ebp+0h]

  dword_40BAE8 = a2;
  v5 = a5 + a4 + a2;
  dword_409CAA = a3;
  dword_40C4A8 = dword_409C85 + a4 + a3;
  dword_4081A1 += v5 + a1 - a5 - dword_40C6B7;
  v6 = &retaddr[4 * a1 + v5 + dword_40A11A];
  dword_40C122 += (int)v6;
  dword_40ACC4 -= (int)&retaddr[a4 + 79];
  v7 = (int)&v6[-dword_408BBA + 1];
  dword_4094D8 += v7 - dword_408556;
  dword_40BF69 -= dword_40C348 + dword_40A072 + dword_40B1C2 + v7 - dword_408BBA - dword_40A2F6;
  v8 = &retaddr[4 * a1 + dword_40A6E2];
  dword_40AEC4 -= 30 * a1;
  LOBYTE(v8) = 35;
  v9 = 30 * a1 - dword_409108 - MEMORY[0x4102A3];
  --v8;
  dword_408D10 += v9;
  LOBYTE(v8) = 110;
  dword_4096DC -= v9 - (_DWORD)&v8[dword_408939 - dword_409108];
  __asm { jmp     ecx }
}
// 401FD0: unbalanced stack, ignored a potential tail call
// 4081A1: using guessed type int dword_4081A1;
// 408556: using guessed type int dword_408556;
// 408939: using guessed type int dword_408939;
// 408BBA: using guessed type int dword_408BBA;
// 408D10: using guessed type int dword_408D10;
// 409108: using guessed type int dword_409108;
// 4094D8: using guessed type int dword_4094D8;
// 4096DC: using guessed type int dword_4096DC;
// 409C85: using guessed type int dword_409C85;
// 409CAA: using guessed type int dword_409CAA;
// 409D63: using guessed type int dword_409D63;
// 40A072: using guessed type int dword_40A072;
// 40A11A: using guessed type int dword_40A11A;
// 40A2F6: using guessed type int dword_40A2F6;
// 40A6E2: using guessed type int dword_40A6E2;
// 40ACC4: using guessed type int dword_40ACC4;
// 40AD5C: using guessed type int dword_40AD5C;
// 40AEC4: using guessed type int dword_40AEC4;
// 40B1C2: using guessed type int dword_40B1C2;
// 40BAE8: using guessed type int dword_40BAE8;
// 40BF69: using guessed type int dword_40BF69;
// 40C122: using guessed type int dword_40C122;
// 40C348: using guessed type int dword_40C348;
// 40C4A8: using guessed type int dword_40C4A8;
// 40C6B7: using guessed type int dword_40C6B7;

//----- (00401FF7) --------------------------------------------------------
HPEN __usercall sub_401FF7@<eax>(unsigned __int16 a1@<cx>, int a2@<ebx>)
{
  return sub_402006(a1, a2);
}
// 409635: using guessed type int dword_409635;

//----- (00402006) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
HPEN __usercall sub_402006@<eax>(unsigned __int16 a1@<cx>, int a2@<ebx>)
{
  int v3; // [esp-14h] [ebp-14h] BYREF
  int v4; // [esp-10h] [ebp-10h] BYREF
  LOGBRUSH v5; // [esp-Ch] [ebp-Ch] BYREF

  dword_408401 += a2;
  dword_40AAB4 += 114 * (a2 - a1);
  return ExtCreatePen((DWORD)&v3, (DWORD)&v4, &v5, (DWORD)&v5.lbColor, &v5.lbHatch);
}
// 402031: positive sp value 4 has been found
// 408401: using guessed type int dword_408401;
// 40A2F6: using guessed type int dword_40A2F6;
// 40AAB4: using guessed type int dword_40AAB4;

// nfuncs=10 queued=8 decompiled=8 lumina nreq=0 worse=0 better=0
// ALL OK, 8 function(s) have been successfully decompiled
