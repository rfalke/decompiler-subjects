/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

int __cdecl start(int a1, int a2, int a3);
void __fastcall sub_4010DA(int a1, int a2);
// HMODULE __stdcall GetModuleHandleA(LPCSTR lpModuleName);
_DWORD sub_40416E(); // weak
// int __userpurge sub_4041C7@<eax>(int a1@<edx>, double a2@<st7>, double a3@<st5>, double a4@<st3>, double a5@<st2>, double a6@<st1>, double a7@<st0>, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63);

//-------------------------------------------------------------------------
// Data declarations

int dword_401000 = -237010603; // weak


//----- (00401089) --------------------------------------------------------
int __cdecl start(int a1, int a2, int a3)
{
  HMODULE v3; // eax
  int v4; // edx
  int v5; // edx

  GetModuleHandleA(0);
  GetModuleHandleA(0);
  GetModuleHandleA(0);
  GetModuleHandleA(0);
  v3 = GetModuleHandleA(0);
  sub_4010DA((int)v3, v4);
  v5 = *(_DWORD *)(a3 + 176) - 1;
  if ( *(_DWORD *)(a3 + 176) == 1 )
    *(_DWORD *)(a3 + 184) += 10;
  *(_DWORD *)(a3 + 176) = v5;
  return 0;
}
// 4010B8: variable 'v4' is possibly undefined

//----- (004010DA) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
void __fastcall sub_4010DA(int a1, int a2)
{
  int v2; // [esp-4h] [ebp-4h] BYREF

  __writefsdword(0, (unsigned int)&v2);
  dword_401000 = a2;
}
// 4010E2: write access to const memory at 401000 has been detected
// 401000: using guessed type int dword_401000;

//----- (0040416E) --------------------------------------------------------
#error "404180: cannot convert to microcode (funcsize=12)"

//----- (004041C7) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __userpurge sub_4041C7@<eax>(int a1@<edx>, double a2@<st7>, double a3@<st5>, double a4@<st3>, double a5@<st2>, double a6@<st1>, double a7@<st0>, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35, int a36, int a37, int a38, int a39, int a40, int a41, int a42, int a43, int a44, int a45, int a46, int a47, int a48, int a49, int a50, int a51, int a52, int a53, int a54, int a55, int a56, int a57, int a58, int a59, int a60, int a61, int a62, int a63)
{
  double v64; // st6
  char v65; // zf
  double v66; // st5
  int v68; // esi
  int result; // eax
  int v70; // edx
  int v74; // [esp-4h] [ebp-4h]
  void *retaddr; // [esp+0h] [ebp+0h] BYREF

  v64 = a2 - a6;
  if ( v65 )
    a4 = a2 - a4;
  v66 = a5 * a2;
  _EDI = v74 + 398;
  v68 = 1422917628;
  result = 1422917628;
  v70 = -(__ROR4__(-a1, 38) | 0x10000000);
  if ( v70 )
    v70 = (int)&retaddr;
  do
  {
    __asm { repne xor dword ptr [edi], 0E429DC9Ch }
    v64 = v64 + a2;
    a2 = a2 * a2;
    __asm { rep not eax }
    result = __ROL4__(__ROL4__(-1842328852, 231), 179);
    _EDI += 4;
    a3 = a2 - a3 * a2;
    a4 = a2 - a4;
    v66 = a2 - v66;
    v70 = ~(v70 * v70 * v70 * v70);
    _ESI = ~v68;
    a7 = (a2 - a7) * a2;
    __asm { repne not esi }
    v68 = -984685871;
  }
  while ( _EDI < v74 + 1363 );
  return result;
}
// 404210: positive sp value 4 has been found
// 4041E1: variable 'v65' is possibly undefined
// 40421D: variable 'v74' is possibly undefined
// 4041C7: too many input arguments, some ignored

// nfuncs=4 queued=4 decompiled=4 lumina nreq=0 worse=0 better=0
#error "There were 1 decompilation failure(s) on 4 function(s)"
