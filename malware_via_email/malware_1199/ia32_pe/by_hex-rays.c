/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

void __stdcall sub_401024(int a1);
_DWORD nullsub_1(); // weak
// int __userpurge start@<eax>(unsigned __int16 a1@<bx>, int a2, int a3, int a4);
// int __usercall sub_4010FF@<eax>(unsigned __int16 a1@<bx>);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_4010C5; // weak


//----- (00401024) --------------------------------------------------------
void __stdcall sub_401024(int a1)
{
  ;
}

//----- (004010DB) --------------------------------------------------------
// attributes: thunk
int __userpurge start@<eax>(unsigned __int16 a1@<bx>, int a2, int a3, int a4)
{
  return sub_4010FF(a1);
}

//----- (004010FF) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_4010FF@<eax>(unsigned __int16 a1@<bx>)
{
  int v1; // edi
  int v2; // eax
  int result; // eax
  _DWORD **v4; // edx
  _DWORD *v5; // edi
  int v6; // esi
  int *v7; // edx
  _DWORD (*v8)(); // esi
  int v9; // edi
  int v10; // [esp-4h] [ebp-4h]
  int *retaddr; // [esp+0h] [ebp+0h] BYREF

  v1 = 63036;
  do
    --v1;
  while ( a1 != v1 );
  sub_401024(v10);
  result = -v2;
  if ( *((_BYTE *)retaddr + 7) == 0x90 )
  {
    HIWORD(v4) = 18;
    LOWORD(v4) = (unsigned __int16)&retaddr;
    v5 = *v4;
    v6 = (int)&loc_4010C5 + 2;
    do
    {
      v5 = (_DWORD *)((char *)v5 + 1);
      v6 = -(v6 + 1179318437);
    }
    while ( *v5 != *((_DWORD *)&loc_4010C5 + 4) );
    v7 = retaddr;
    v8 = nullsub_1;
    do
    {
      v9 = *v7;
      v7 = (int *)((char *)v7 + 1);
      v8 = (_DWORD (*)())__ROL4__(v8, 3);
    }
    while ( *(_DWORD *)nullsub_1 != v9 );
    __asm { retn }
  }
  return result;
}
// 401129: positive sp value 4 has been found
// 401123: variable 'v10' is possibly undefined
// 401136: variable 'v2' is possibly undefined
// 40102E: using guessed type _DWORD nullsub_1();

// nfuncs=4 queued=3 decompiled=3 lumina nreq=0 worse=0 better=0
// ALL OK, 3 function(s) have been successfully decompiled
