// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 004010DB: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	return fn004010FF(edx, ebx, si, edi, dwLoc04);
}

// 004010FF: Register (ptr (ptr Eq_66)) fn004010FF(Register word32 edx, Register word32 ebx, Register word16 si, Register word32 edi, Stack word32 dwArg00)
Eq_66 * * fn004010FF(word32 edx, word32 ebx, word16 si, word32 edi, word32 dwArg00)
{
	word16 si_11 = __rol(si, 11);
	word32 eax_17 = (word32) (word16) ebx;
	word32 edi_22 = 63036;
	do
		edi_22 = edi_22 - 0x01;
	while (eax_17 != edi_22);
	struct Eq_66 ** esp_36;
	word32 edx_37;
	byte SCZO_38;
	word32 ecx_39;
	word32 ebx_40;
	word16 si_41;
	byte C_42;
	word32 eax_43;
	byte SZO_44;
	struct Eq_66 ** esi_45;
	word16 ax_46;
	word16 cx_47;
	word32 edi_48;
	byte Z_49;
	byte cl_50;
	word16 di_51;
	word16 dx_52;
	word32 ebp_53;
	struct Eq_50 * fs_54;
	globals->ptr401053();
	struct Eq_66 ** esi_56 = __rol(esi_45, 22);
	cui16 si_57 = (word16) esi_56;
	struct Eq_66 ** eax_62 = -eax_43;
	if (*((char *) *esp_36 + 0x07) == 0x90)
	{
		__rol(eax_62, 0x0C);
		struct Eq_75 * edi_101 = DPB(1193460, (word16) esp_36, 0) + 0x00;
		__rol(DPB(esi_56, si_57 | 0x6B | 0x1E, 0) + eax_62, 0x19);
		int32 eax_109 = globals->dw4010D5;
		__rol(esp_36, 0x01);
		struct Eq_66 ** esi_105 = &globals->ptr4010C7;
		do
		{
			edi_101 = edi_101 + 0x01;
			word32 edx_124 = edi_101->dw0000 - eax_109;
			esi_105 = -((char *) esi_105 + 1179318437);
			word16 dx_125 = (word16) edx_124;
		} while (edx_124 != 0x00);
		__rol(esi_105, 0x14);
		__ror(dx_125, 0x01);
		int32 eax_140 = DPB(eax_109 >> 0x1C, *(edi_101 - 0x02), 0);
		*(esp_36 - 0x04) = (struct Eq_66 ***) esp_36;
		union Eq_136 * edx_155 = **(esp_36 - 0x04);
		struct Eq_66 ** esi_157 = &globals->dw40102E;
		word32 eax_160 = globals->dw40102E;
		do
		{
			word32 edi_167 = *edx_155;
			edx_155 = (union Eq_136 *) ((char *) edx_155 + 0x01);
			esi_157 = __rol(esi_157, 0x03);
		} while ((edi_167 ^ eax_160) != 0x00);
		*(esp_36 - 0x04) = (eax_140 << 0x10 >> 0x10) + 4177013;
		*(esp_36 - 0x08) = fs_54->dw0000;
		*(esp_36 - 0x0C) = esp_36 - 0x08;
		word32 eax_214 = *(esp_36 - 0x0C);
		fs_54->dw0000 = eax_214;
		*(esp_36 - 0x0C) = 0x00;
		struct Eq_66 ** eax_224 = DPB(eax_214, __rol((word16) eax_214, 0x0A), 0);
		*(esp_36 - 0x10) = (union Eq_136 **) edx_155;
		return eax_224;
	}
	else
		return eax_62;
}

