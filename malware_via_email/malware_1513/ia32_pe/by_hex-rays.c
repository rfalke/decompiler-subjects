/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// __int64 __usercall sub_4013E9@<edx:eax>(char a1@<dl>, char *a2@<esi>);
// __int64 __usercall sub_4013FD@<edx:eax>(__int64 a1@<edx:eax>, char *a2@<esi>);
// __int64 __usercall sub_401402@<edx:eax>(__int64 result@<edx:eax>, char *a2@<esi>);
void __stdcall __spoils<ecx> sub_40143B(int a1, int a2);
// void __usercall __spoils<ecx> sub_40151B(int a1@<ebx>);


//----- (004013E9) --------------------------------------------------------
__int64 __usercall sub_4013E9@<edx:eax>(char a1@<dl>, char *a2@<esi>)
{
  unsigned int v2; // kr00_4
  __int64 result; // rax
  char v4; // dl
  unsigned int v5; // kr04_4
  char v6; // cf

  v2 = __getcallerseflags();
  __writeeflags(v2);
  BYTE4(result) = 2 * a1;
  if ( !BYTE4(result) )
  {
    v4 = *a2;
    v5 = __readeflags();
    __writeeflags(v5);
    BYTE4(result) = v4 + v6 + v4;
  }
  return result;
}
// 4013FA: variable 'v6' is possibly undefined

//----- (004013FD) --------------------------------------------------------
__int64 __usercall sub_4013FD@<edx:eax>(__int64 a1@<edx:eax>, char *a2@<esi>)
{
  unsigned int v2; // kr00_4

  v2 = __readeflags();
  __writeeflags(v2);
  return sub_401402(a1, a2);
}

//----- (00401402) --------------------------------------------------------
__int64 __usercall sub_401402@<edx:eax>(__int64 result@<edx:eax>, char *a2@<esi>)
{
  unsigned int v2; // kr00_4
  __int64 v3; // rax
  char v4; // cf

  v2 = __getcallerseflags();
  __writeeflags(v2);
  do
  {
    v3 = sub_4013E9(SBYTE4(result), a2);
    result = sub_4013E9(SBYTE4(v3), a2);
  }
  while ( v4 );
  return result;
}
// 401412: variable 'v4' is possibly undefined

//----- (0040143B) --------------------------------------------------------
void __stdcall __spoils<ecx> sub_40143B(int a1, int a2)
{
  _DWORD *v2; // edi
  _BYTE *v3; // eax
  int i; // ecx
  int v5; // [esp-4h] [ebp-1Ch]

  v2 = (_DWORD *)(a1 + *(_DWORD *)(a1 + *(_DWORD *)(*(_DWORD *)(a1 + 60) + a1 + 120) + 28 + 4));
  v5 = 0;
  v3 = (_BYTE *)(*v2 + a1);
  for ( i = 0; ; i = 0 )
  {
    do
    {
      LOBYTE(i) = *v3 + i;
      i = __ROR4__(i, 23) ^ 0x4788D197;
      ++v3;
    }
    while ( *v3 );
    if ( a2 == i )
      break;
    ++v5;
    v3 = (_BYTE *)(a1 + *++v2);
  }
}

//----- (0040151B) --------------------------------------------------------
void __usercall __spoils<ecx> sub_40151B(int a1@<ebx>)
{
  int *v1; // esi
  int v2; // eax
  int v3; // edi
  int v4; // edx
  int v5; // eax
  int v6; // eax

  v1 = (int *)(a1 + 78640);
  *(_DWORD *)(a1 + 151609) = a1;
  while ( 1 )
  {
    v2 = v1[3];
    if ( !v2 )
      break;
    *(_DWORD *)(a1 + 151640) = v1[4];
    v3 = *v1;
    *(_DWORD *)(a1 + 151620) = *v1;
    if ( !v3 )
      v3 = v1[4];
    v4 = *(_DWORD *)(a1 + 151609);
    *(_DWORD *)(a1 + 151657) = v4 + v3;
    *(_DWORD *)(a1 + 151673) = (*(int (__stdcall **)(int))(a1 + 151574))(v4 + v2);
    while ( 1 )
    {
      v5 = **(_DWORD **)(a1 + 151657);
      if ( !v5 )
        break;
      if ( v5 >= 0 && (v5 += 2) != 0 )
        v6 = *(_DWORD *)(a1 + 151609) + v5;
      else
        v6 = v5 & 0x7FFFFFFF;
      *(_DWORD *)(*(_DWORD *)(a1 + 151609) + *(_DWORD *)(a1 + 151640)) = (*(int (__stdcall **)(_DWORD, int))(a1 + 151590))(
                                                                           *(_DWORD *)(a1 + 151673),
                                                                           v6);
      *(_DWORD *)(a1 + 151640) += 4;
      *(_DWORD *)(a1 + 151657) += 4;
    }
    v1 += 5;
  }
}

// nfuncs=5 queued=5 decompiled=5 lumina nreq=0 worse=0 better=0
// ALL OK, 5 function(s) have been successfully decompiled
