/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>);

//-------------------------------------------------------------------------
// Data declarations

int dword_477000[512] =
{
  -1,
  1229378039,
  -1949108395,
  1120373740,
  -997990517,
  1090388952,
  -117189641,
  -570173449,
  1206946632,
  -603982234,
  -150414857,
  -908459050,
  1073745090,
  -1957312885,
  1616405198,
  1878982590,
  -146095022,
  -386364454,
  -533856255,
  1196772921,
  -896606581,
  -301994165,
  -789083393,
  -242492425,
  1229255563,
  -909931709,
  1438813123,
  977423938,
  2146951107,
  1088041595,
  1323300800,
  -11339125,
  -2108622731,
  -79505619,
  -606470315,
  -947172634,
  -1942292733,
  -254213297,
  -1922225104,
  -212667307,
  107868059,
  -531344656,
  1132152146,
  1271986005,
  899288897,
  1446043585,
  1092374708,
  -319306220,
  -557753411,
  1044860490,
  -24389385,
  -891417515,
  -800198801,
  1242710860,
  1341129636,
  1214699088,
  -17759421,
  1236757914,
  -779401716,
  575356998,
  -681294268,
  123067019,
  -1999182153,
  -671655207,
  -148330418,
  11841629,
  -1694230099,
  1342179427,
  953588770,
  1747370306,
  1020341775,
  64411312,
  899676358,
  874001345,
  -609162018,
  215059260,
  1434632551,
  -1974743436,
  -126727610,
  -2063598069,
  1147704086,
  1752068663,
  6836311,
  1750261904,
  1901347636,
  2090913039,
  -1863711126,
  -936586320,
  1802731515,
  -1268628610,
  -2013016181,
  1848862845,
  1301099333,
  760107516,
  1357874040,
  1451894008,
  1121125135,
  -24408491,
  -304482358,
  -933695138,
  1088477187,
  1335501901,
  -1052671523,
  -656522877,
  -1881689003,
  -638071398,
  1334317067,
  -74613060,
  73611590,
  808205293,
  1547916606,
  1086522178,
  1414901152,
  -262667340,
  -635766608,
  50876242,
  -977182494,
  -540786189,
  -1161165928,
  -1249836088,
  -594663803,
  -1563543853,
  215691366,
  1112019110,
  545797310,
  -555815146,
  -657833906,
  1262635604,
  1229997141,
  1795561143,
  -970539856,
  -1397208838,
  502259226,
  -805053581,
  1239146054,
  -1912391615,
  -36912,
  726931471,
  1908426113,
  1751725903,
  5598547,
  4740200,
  1484023048,
  -1783058087,
  1209355783,
  2057718343,
  -400000454,
  -804612065,
  -753612574,
  611714524,
  -1329505700,
  1430701920,
  457111724,
  374299157,
  1300362458,
  -1321187462,
  -1460544071,
  1373654372,
  495911828,
  -78053360,
  1884971500,
  -963946792,
  -635923364,
  -1400831249,
  1228981322,
  -225768821,
  -163013045,
  288262686,
  -1200959144,
  2089599252,
  -58539674,
  909657378,
  665868644,
  487467194,
  -817589958,
  1641156168,
  -967603441,
  1082717434,
  -1898197628,
  -2120002193,
  37875829,
  -1928528009,
  -330174387,
  130706310,
  1309605896,
  -1027849538,
  -1558306921,
  82516222,
  1004019484,
  -1404171150,
  -643563512,
  816782394,
  441101377,
  54974216,
  262347969,
  -1956771001,
  -1874241289,
  1206277593,
  1317501787,
  1453908194,
  1245802206,
  -1470572958,
  1246148254,
  -545373874,
  -389376370,
  -2022791964,
  133818234,
  -671046781,
  1746933988,
  1734689655,
  -136435156,
  569271941,
  1725930697,
  929354318,
  -966239560,
  1256187718,
  864744527,
  -427504580,
  -995969006,
  -1431126821,
  776513750,
  1103945443,
  -1268838782,
  -868252959,
  1430015988,
  1987013224,
  1041869615,
  -1530395169,
  1238482978,
  -1622239540,
  -1680995928,
  -1671267214,
  123549796,
  -63930485,
  1755598335,
  579631159,
  1683442280,
  1624820291,
  722717288,
  -429897556,
  1624981583,
  -743098723,
  47969603,
  -1638936750,
  895320553,
  -673921526,
  1224253508,
  -664948826,
  -91744532,
  729601712,
  106862614,
  1659149251,
  -731629747,
  -905556532,
  -1663101305,
  -1959056674,
  344854518,
  1185428713,
  -129630392,
  1871675474,
  186774667,
  1733494951,
  -1283259595,
  1430663243,
  -1647745205,
  1647582748,
  1205072089,
  -1365735707,
  -1947246820,
  -861905717,
  1740746232,
  -827804144,
  682442879,
  1193230404,
  1229213454,
  -1196423109,
  -1041931577,
  -334346110,
  -1643266990,
  1887095555,
  -555052224,
  1085549129,
  2064084047,
  1994027642,
  314346750,
  -30914856,
  398334650,
  -1039955798,
  1004357272,
  1206403124,
  3303480,
  1586060939,
  -1899768507,
  61887257,
  -963315442,
  -534935674,
  1757581910,
  2017141760,
  -1731152582,
  1205271114,
  793068514,
  1201924289,
  2093807880,
  -1041899453,
  1319974119,
  -1889916346,
  235227632,
  -430957914,
  -1395114914,
  -564200462,
  272255904,
  1208015955,
  732842034,
  11014392,
  -1001855840,
  796956234,
  -703416877,
  -205243748,
  -143329432,
  58283462,
  1868251641,
  1203425296,
  933556887,
  -162156432,
  1069802932,
  450782709,
  -465203888,
  -1087248304,
  1621872899,
  -102497463,
  395991084,
  -1025911188,
  -561536448,
  1356875980,
  4352752,
  1776934336,
  -311626736,
  -1556055037,
  -2096987808,
  1310615744,
  -725053052,
  -790673836,
  182213168,
  -640051276,
  874935956,
  578483791,
  108532888,
  -1903475698,
  1630904794,
  1288770634,
  -1029421488,
  2068939624,
  -1672088327,
  1443093620,
  1091439626,
  1491613208,
  479737116,
  -2010509744,
  -1059900193,
  -3129118,
  1109589634,
  355731222,
  1254808394,
  1802430500,
  -21362018,
  1010880554,
  -816754800,
  2122058567,
  180118078,
  622740480,
  -1764432960,
  651678210,
  -299166023,
  503866585,
  -76909321,
  1891851842,
  1320697590,
  951515600,
  2140120936,
  1330385557,
  1281901651,
  -1925102492,
  1141652554,
  -421832297,
  -1694412179,
  1287393308,
  -1639384572,
  -157249081,
  -114133437,
  1089708697,
  -418282111,
  -63347616,
  -2066728283,
  -1682747447,
  370407464,
  -2108561166,
  -2035,
  1275478300,
  182066385,
  -1974577847,
  -743704026,
  -1957738280,
  -163457285,
  1734887298,
  -1203747921,
  651298476,
  -75686968,
  1756396621,
  1463890545,
  1483269258,
  -1976475066,
  249016239,
  -645116374,
  -628961666,
  -194048114,
  -562907977,
  1424780673,
  1182924905,
  -826340045,
  1121566832,
  1188302176,
  1097421094,
  -600424969,
  1494627408,
  488227745,
  -1743315448,
  -1047814506,
  -1948063157,
  -2045458277,
  162173640,
  -263717811,
  -1929347335,
  1649167206,
  -644818591,
  -1943085032,
  -1244085601,
  419267106,
  -1465633219,
  776665926,
  538457176,
  1093178418,
  -1719746070,
  -1134513132,
  708068000,
  1822475203,
  -1536427823,
  505532736,
  -965459016,
  -1064177172,
  1622642307,
  215102157,
  1273763023,
  -142429385,
  -1025811878,
  2126658778,
  -486326072,
  -963683684,
  -649965677,
  -1607213049,
  1108199586,
  -1997001658,
  -1137658451,
  1189876352,
  284929142,
  -163394419,
  -569744382,
  1980860356,
  1184154306,
  -2066692376,
  1078575544,
  -768311562,
  -537903682,
  1114166304,
  1744859509,
  1524723308,
  -31520739,
  514357300,
  -790079289,
  1863380015,
  -319582540,
  -700947750,
  -1160936629,
  1103295493,
  1150438307,
  -2078191621,
  -1895044672,
  -665108265,
  1617653263,
  955473706,
  142297587,
  -249577906,
  565947230,
  480893005,
  -1474426654,
  738322401,
  64954449,
  -1110965425,
  -1439500176,
  472663986,
  477163750,
  -263007384,
  1830806619,
  -1875215692,
  1331324004,
  942199250,
  134220418,
  189484241,
  -843834840,
  -388433960,
  1959966716,
  -285998144,
  642972874
}; // weak


//----- (00487190) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>)
{
  int *v4; // esi
  int *v5; // edi
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  int i; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  unsigned int v16; // eax
  bool v17; // zf
  int v18; // ebx
  int v19; // ett
  unsigned int v20; // eax
  bool v21; // cf
  int v22; // ebx
  int v23; // ett
  bool v24; // cf
  int v25; // ebx
  int v26; // ett
  int v27; // ecx
  int v28; // ecx
  unsigned int v29; // eax
  unsigned int v30; // eax
  int v31; // eax
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  bool v35; // cf
  int v36; // ebx
  int v37; // ett
  bool v38; // cf
  int v39; // ebx
  int v40; // ebx
  int v41; // ett
  bool v42; // zf
  int v43; // ebx
  int v44; // ett
  unsigned int v45; // ecx
  char *v46; // edx
  char v47; // al
  int v48; // eax
  bool v49; // cc
  int *v50; // esi
  int *v51; // edi
  int v52; // ecx
  char v53; // al
  unsigned __int8 v54; // al
  int v55; // eax
  int v56; // eax
  char v57; // t0
  unsigned __int8 v58; // bl
  char *v59; // edi
  int v60; // eax
  int *v61; // ebx
  int v62; // ebp
  char v63; // al
  char *v64; // ecx
  unsigned __int8 v65; // al
  int v66; // eax
  void (__cdecl *v67)(int *, int, int, int *); // ebp
  int *v68; // edi
  int v69[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v70; // [esp+2Ch] [ebp-80h] BYREF
  int v71; // [esp+30h] [ebp-7Ch] BYREF
  char *v72; // [esp+34h] [ebp-78h]
  int *v73; // [esp+38h] [ebp-74h]
  int v74; // [esp+3Ch] [ebp-70h]
  int v75; // [esp+40h] [ebp-6Ch]
  int v76; // [esp+44h] [ebp-68h]
  int v77; // [esp+48h] [ebp-64h]
  int *v78; // [esp+4Ch] [ebp-60h]
  int v79; // [esp+50h] [ebp-5Ch]
  int v80; // [esp+54h] [ebp-58h]
  int v81; // [esp+58h] [ebp-54h]
  int v82; // [esp+5Ch] [ebp-50h] BYREF

  v78 = &v82;
  v76 = a3;
  v75 = a2;
  v74 = a1;
  v4 = dword_477000;
  v5 = &dword_477000[-120832];
  v73 = &dword_477000[-120832];
  while ( 1 )
  {
    v9 = *v4;
    v7 = (unsigned int)v4++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v4;
        v4 = (int *)((char *)v4 + 1);
        *(_BYTE *)v5 = v6;
        v5 = (int *)((char *)v5 + 1);
      }
      else
      {
        for ( i = 1; ; i = v20 + v21 + v20 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v16 = i + v12 + i;
          v7 = __CFADD__(v13, v13);
          v17 = 2 * v13 == 0;
          v8 = 2 * v13;
          if ( v7 )
          {
            if ( !v17 )
              break;
            v18 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v19 = v7 + v18;
            v7 = __CFADD__(v7, v18) | __CFADD__(v18, v19);
            v8 = v18 + v19;
            if ( v7 )
              break;
          }
          v20 = v16 - 1;
          v21 = __CFADD__(v8, v8);
          v8 *= 2;
          if ( !v8 )
          {
            v22 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v23 = v7 + v22;
            v21 = __CFADD__(v7, v22) | __CFADD__(v22, v23);
            v8 = v22 + v23;
          }
        }
        v28 = 0;
        v7 = v16 < 3;
        v29 = v16 - 3;
        if ( v7 )
        {
          v32 = __CFADD__(v8, v8);
          v8 *= 2;
          if ( !v8 )
          {
            v33 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v34 = v7 + v33;
            v32 = __CFADD__(v7, v33) | __CFADD__(v33, v34);
            v8 = v33 + v34;
          }
        }
        else
        {
          v30 = v29 << 8;
          LOBYTE(v30) = *(_BYTE *)v4;
          v4 = (int *)((char *)v4 + 1);
          v31 = ~v30;
          if ( !v31 )
          {
            v50 = v73;
            v51 = v73;
            v52 = 887;
            while ( 1 )
            {
              v53 = *(_BYTE *)v51;
              v51 = (int *)((char *)v51 + 1);
              v54 = v53 + 24;
              while ( v54 <= 1u && *(_BYTE *)v51 == 1 )
              {
                v55 = *v51;
                LOWORD(v55) = BYTE1(*v51);
                v56 = __ROL4__(v55, 16);
                v57 = v56;
                LOBYTE(v56) = BYTE1(v56);
                BYTE1(v56) = v57;
                v58 = *((_BYTE *)v51 + 4) + 24;
                *v51 = (int)v50 + v56 - (_DWORD)v51;
                v51 = (int *)((char *)v51 + 5);
                v54 = v58;
                if ( !--v52 )
                {
                  v59 = (char *)(v50 + 136192);
LABEL_44:
                  v60 = *(_DWORD *)v59;
                  if ( *(_DWORD *)v59 )
                  {
                    v61 = (int *)((char *)v50 + *((_DWORD *)v59 + 1));
                    v59 += 8;
                    v62 = ((int (__cdecl *)(int, int, int, int, int, int *, int, int, int))v50[140750])(
                            (int)v50 + v60 + 562860,
                            v74,
                            v75,
                            v76,
                            v77,
                            v78,
                            v79,
                            v80,
                            v81);
                    while ( 1 )
                    {
                      v63 = *v59++;
                      if ( !v63 )
                        goto LABEL_44;
                      v64 = v59;
                      v72 = v59;
                      v65 = v63 - 1;
                      do
                      {
                        if ( !v64 )
                          break;
                        v17 = *v59++ == (char)v65;
                        --v64;
                      }
                      while ( !v17 );
                      v66 = ((int (__cdecl *)(int, char *))v50[140751])(v62, v72);
                      if ( !v66 )
                        break;
                      *v61++ = v66;
                    }
                    v60 = ((int (*)(void))v50[140755])();
                  }
                  v67 = (void (__cdecl *)(int *, int, int, int *))v50[140752];
                  v68 = v50 - 1024;
                  v70 = v60;
                  v67(v50 - 1024, 4096, 4, &v70);
                  *((_BYTE *)v68 + 511) &= 0x7Fu;
                  *((_BYTE *)v68 + 551) &= 0x7Fu;
                  v67(v50 - 1024, 4096, v69[0], v69);
                  do
                    v70 = 0;
                  while ( &v70 != &v71 - 32 );
                  JUMPOUT(0x438BF9);
                }
              }
            }
          }
          v32 = v31 & 1;
          a4 = v31 >> 1;
        }
        if ( v32 )
          goto LABEL_15;
        v28 = 1;
        v35 = __CFADD__(v8, v8);
        v8 *= 2;
        if ( !v8 )
        {
          v36 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v37 = v7 + v36;
          v35 = __CFADD__(v7, v36) | __CFADD__(v36, v37);
          v8 = v36 + v37;
        }
        if ( v35 )
        {
LABEL_15:
          v24 = __CFADD__(v8, v8);
          v8 *= 2;
          if ( !v8 )
          {
            v25 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v26 = v7 + v25;
            v24 = __CFADD__(v7, v25) | __CFADD__(v25, v26);
            v8 = v25 + v26;
          }
          v27 = v28 + v24 + v28;
        }
        else
        {
          while ( 1 )
          {
            v38 = __CFADD__(v8, v8);
            v39 = 2 * v8;
            if ( !v39 )
            {
              v40 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v41 = v7 + v40;
              v38 = __CFADD__(v7, v40) | __CFADD__(v40, v41);
              v39 = v40 + v41;
            }
            v28 += v38 + v28;
            v7 = __CFADD__(v39, v39);
            v42 = 2 * v39 == 0;
            v8 = 2 * v39;
            if ( v7 )
            {
              if ( !v42 )
                break;
              v43 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v44 = v7 + v43;
              v7 = __CFADD__(v7, v43) | __CFADD__(v43, v44);
              v8 = v43 + v44;
              if ( v7 )
                break;
            }
          }
          v27 = v28 + 2;
        }
        v45 = (a4 < 0xFFFFFB00) + v27 + 2;
        v46 = (char *)v5 + a4;
        if ( a4 <= 0xFFFFFFFC )
        {
          do
          {
            v48 = *(_DWORD *)v46;
            v46 += 4;
            *v5++ = v48;
            v49 = v45 <= 4;
            v45 -= 4;
          }
          while ( !v49 );
          v5 = (int *)((char *)v5 + v45);
        }
        else
        {
          do
          {
            v47 = *v46++;
            *(_BYTE *)v5 = v47;
            v5 = (int *)((char *)v5 + 1);
            --v45;
          }
          while ( v45 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// 487333: positive sp value 50 has been found
// 487333: control flows out of bounds to 438BF9
// 477000: using guessed type int dword_477000[512];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
