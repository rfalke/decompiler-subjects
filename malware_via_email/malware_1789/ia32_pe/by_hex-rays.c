/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

void sub_401020();
// void __usercall sub_40104C(int@<eax>, int@<edx>, int@<ecx>, int@<edi>, int@<esi>, double@<st0>);
// int __userpurge sub_4010DD@<eax>(_WORD *@<ebx>, int@<esi>, double@<st0>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
// int __usercall start@<eax>(int@<eax>, int@<edi>, int@<esi>);
// int __usercall sub_401188@<eax>(int result@<eax>);
void sub_4011A7();
void sub_4012B5();
void sub_401307();
void sub_4021F0();
void sub_40220D();
// void __usercall sub_402224(int@<eax>, __int16@<cx>, __int16@<bx>, int _ESI@<esi>);
_DWORD sub_402287(); // weak
// __int16 __usercall sub_4022AA@<ax>(char@<al>, __int32@<edx>, __int16@<cx>, __int16@<si>);
// void __usercall sub_40230E(_BYTE *@<eax>, char@<cl>, _BYTE *@<ebx>, int@<ebp>, _BYTE *@<edi>);
// void __usercall sub_40235F(__int16@<ax>, int@<ebx>, int@<esi>);
int __fastcall sub_402377(int, int);
_DWORD sub_4023B2(); // weak
// void __usercall sub_402408(_BYTE *@<eax>, int@<edx>, char@<cl>, _BYTE *_EBX@<ebx>, int@<ebp>, _BYTE *@<edi>);
void sub_4025C9();
// void __usercall sub_4025E7(int@<ecx>, int@<edx>, int@<ebx>, int@<edi>);
// void __usercall sub_402600(int@<edx>, int@<ecx>, int@<ebx>, int@<edi>, int@<esi>);
// int __usercall sub_402687@<eax>(bool@<cf>, int@<eax>, __int16@<dx>, int@<ecx>, int@<ebx>, int@<esi>, int@<edi>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
// void __usercall sub_4026E6(_BYTE *@<eax>, char@<cl>, int@<ebx>, _BYTE *@<edi>, _BYTE *@<esi>);
// void __usercall sub_402788(int@<eax>, _DWORD *@<edi>);
// void __userpurge sub_40282B(__int32@<esi>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
// int __usercall sub_402878@<eax>(int@<eax>, int@<edi>);
// void __usercall sub_4028AA(__int32@<esi>, int@<ebx>, int@<edi>);
// void __usercall sub_4028E9(int@<edx>, int@<ecx>, char@<bl>, int@<edi>, int@<esi>);
// int __userpurge sub_402A2C@<eax>(__int32@<eax>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
void sub_402AD2();
// void __usercall sub_402B0A(char@<ah>, int@<edx>, __int32@<ecx>, int@<ebx>, int@<edi>, __int16 _SI@<si>);
void sub_402B46();
// void __usercall sub_402C28(int _EAX@<eax>, int@<edx>, __int16@<cx>, int _EBX@<ebx>, int@<esi>);
void sub_402C87();
// int __usercall sub_402CC8@<eax>(int@<edx>, int@<ecx>, __int16@<bx>, __int16@<bp>, int@<edi>, __int32@<esi>);
// void __userpurge sub_402D1D(int@<edx>, __int32@<ecx>, int@<ebx>, int@<edi>, int@<esi>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
// int __userpurge sub_402DCC@<eax>(int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_40106B; // weak
_UNKNOWN loc_4023DD; // weak
_UNKNOWN sub_40244F; // weak
_UNKNOWN sub_402590; // weak
_UNKNOWN loc_402767; // weak
_UNKNOWN loc_4027FD; // weak
_UNKNOWN loc_4029E5; // weak
_UNKNOWN loc_402A0F; // weak
_UNKNOWN loc_402A81; // weak


//----- (00401020) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_401020()
{
  void *v0; // [esp+1Ch] [ebp-4h]
  void *retaddr; // [esp+20h] [ebp+0h]

  *(&retaddr - 9) = v0;
  sub_401307();
  JUMPOUT(0x40101F);
}
// 401008: positive sp value 4 has been found
// 40101E: control flows out of bounds to 40101F

//----- (0040104C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40104C(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<edi>, int a5@<esi>, double a6@<st0>)
{
  int v6; // edx
  int v8; // edx
  int v9; // ecx
  unsigned int v10; // eax
  unsigned int v11; // ecx
  bool v13; // cf
  bool v14; // of
  int v17; // [esp+14h] [ebp-8h]
  int v18; // [esp+18h] [ebp-4h]

  *(&v18 - 8) = v17;
  v6 = a5 | a2;
  _ESI = a5 + 1;
  v8 = v6 - a4;
  v9 = v8 | a3;
  if ( !__SETP__(v9, 0) )
  {
    __asm { rep push esi }
    _ESI = v18;
    if ( __SETP__(v9, 0) )
    {
      LOBYTE(a1) = __inbyte(v8);
      *(_WORD *)(v18 + 721691748) = (__int16)(a6 * *MK_FP(__GS__, a1));
      JUMPOUT(0x401071);
    }
  }
  v10 = v8 | _ESI | a1;
  v11 = v8 ^ v9;
  _EBX = (v10 ^ a4) - 1;
  v13 = v10 < v11;
  v14 = __OFSUB__(v10, v11);
  _EAX = v10 - v11;
  if ( !v13 && v13 )
  {
    if ( !((_EAX < 0) ^ v14 | (_EAX == 0)) )
    {
      __asm
      {
        fnstenv byte ptr [ebx]
        xlat
      }
      JUMPOUT(0x401245);
    }
    JUMPOUT(0x401223);
  }
  JUMPOUT(0x401138);
}
// 401037: positive sp value 8 has been found
// 40106B: control flows out of bounds to 401071
// 401041: control flows out of bounds to 401138
// 4012AC: control flows out of bounds to 401245
// 401295: control flows out of bounds to 401223

//----- (004010DD) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __userpurge sub_4010DD@<eax>(
        _WORD *a1@<ebx>,
        int a2@<esi>,
        double a3@<st0>,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  char v64; // cf
  char v65; // dh
  int v66; // edx
  unsigned int v67; // ebx
  int v68; // esi
  int v69; // eax
  int v70; // ecx
  int v71; // edx
  int v72; // eax
  int v73; // edi
  int v74; // edx
  int v76; // ecx
  int v77; // ecx
  char v79; // cc
  int v82; // edi
  char v83; // zf
  int v84; // ecx
  int result; // eax

  sub_4012B5();
  BYTE1(v66) = (_BYTE)a1 + v64 + v65;
  *a1 = (__int16)a3;
  _enable();
  v67 = (unsigned int)a1 + 1;
  v68 = a2 - 1;
  sub_40104C(v69, v66 + 1, v70, -1, v68, a3);
  LOBYTE(v71) = 124;
  LOBYTE(v72) = v64;
  __asm { int     0D7h; used by BASIC while in interpreter }
  v73 = ~v67;
  v74 = v72 ^ (v67 + v71);
  _EAX = *(_DWORD *)(v72 + 8);
  v67 -= 2;
  v77 = v76 - 1;
  _EDX = v74 - 1;
  v79 = ((int)(_EAX + v67) < 0) ^ __OFADD__(_EAX, v67);
  _EBX = (char *)(_EAX + v67);
  if ( v79 || !v79 )
  {
    v82 = (v73 + _EDX) | v73;
    ((void (*)(void))((char *)&loc_40106B + 1))();
    if ( !(v64 | v83) )
      JUMPOUT(0x401205);
    sub_4011A7();
    *(int *)(v84 - 107) >>= 1;
    MEMORY[0xDE33D78B] |= v82 - 2;
    JUMPOUT(0x4010FC);
  }
  __asm
  {
    bound   edx, [ebx-8]
    das
  }
  *(_BYTE *)(v68 - 645146229) &= (unsigned __int8)_EBX;
  sub_4028AA(v68, v77 | v68, v73);
  __asm { aas }
  return result;
}
// 4010E1: positive sp value 4 has been found
// 401203: control flows out of bounds to 401205
// 40126B: control flows out of bounds to 4010FC
// 401134: control flows out of bounds to 4010C4
// 401134: conditional instruction was optimized away because cc.1==0
// 4010F7: variable 'v64' is possibly undefined
// 4010F7: variable 'v65' is possibly undefined
// 401107: variable 'v69' is possibly undefined
// 401102: variable 'v66' is possibly undefined
// 401107: variable 'v70' is possibly undefined
// 401115: variable 'v72' is possibly undefined
// 401113: variable 'v71' is possibly undefined
// 40111C: variable 'v76' is possibly undefined
// 401203: variable 'v83' is possibly undefined
// 401257: variable 'v84' is possibly undefined
// 4010DD: too many input arguments, some ignored

//----- (00401163) --------------------------------------------------------
int __usercall start@<eax>(int a1@<eax>, int a2@<edi>, int a3@<esi>)
{
  int v3; // esi

  v3 = a3 - a2;
  if ( __SETP__(v3, 0) || !__SETP__(v3, 0) )
    JUMPOUT(0x4012E5);
  *(_WORD *)(v3 - 112) = __GS__;
  return sub_401188(a1);
}
// 40122F: inconsistent fpu stack
// 401235: control flows out of bounds to 40123B
// 401213: control flows out of bounds to 4012E5
// 401223: control flows out of bounds to 4011CD
// 40121D: conditional instruction was optimized away because edx.4>=1

//----- (00401188) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_401188@<eax>(int result@<eax>)
{
  if ( !result )
    JUMPOUT(0x40125D);
  return result;
}
// 40118C: positive sp value 4 has been found
// 401195: control flows out of bounds to 40125D

//----- (004011A7) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4011A7()
{
  JUMPOUT(0x4011D7);
}
// 4011D4: positive sp value 3558 has been found
// 4011D4: control flows out of bounds to 4011DA
// 4011B5: control flows out of bounds to 4011D7
// 4011BB: control flows out of bounds to 4011C2

//----- (004012B5) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4012B5()
{
  int v0; // eax

  sub_401020();
  v0 = MEMORY[0x431C62DE]();
  __outbyte(0x86u, v0);
  sub_401188(v0);
  JUMPOUT(0x401297);
}
// 4012B9: positive sp value 4 has been found
// 4012F9: control flows out of bounds to 401297
// 4012FD: conditional instruction was optimized away because edi.4>=1

//----- (00401307) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_401307()
{
  void *v0; // [esp+24h] [ebp-4h]
  void *retaddr; // [esp+28h] [ebp+0h]

  *(&retaddr - 11) = v0;
  JUMPOUT(0x40122A);
}
// 40130B: positive sp value 4 has been found
// 401316: control flows out of bounds to 40122A

//----- (004021F0) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4021F0()
{
  void *v0; // [esp+2Ch] [ebp-4h]
  void *retaddr; // [esp+30h] [ebp+0h]

  *(&retaddr - 13) = v0;
  JUMPOUT(0x4029C3);
}
// 4021F4: positive sp value 4 has been found
// 402201: control flows out of bounds to 4029C3

//----- (0040220D) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_40220D()
{
  int v0; // [esp+20h] [ebp-8h]
  int v1; // [esp+24h] [ebp-4h]

  *(&v1 - 11) = v0;
  JUMPOUT(0x402B31);
}
// 402218: positive sp value 8 has been found
// 402CB5: control flows out of bounds to 402B31
// 402CC6: control flows out of bounds to 402C9A
// 402CBE: conditional instruction was optimized away because ebx.4!=0

//----- (00402224) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402224(int a1@<eax>, __int16 a2@<cx>, __int16 a3@<bx>, int _ESI@<esi>)
{
  __asm { rep pop edx }
  HIBYTE(a3) = 46;
  BYTE1(_EDX) |= 0x2Eu;
  LOBYTE(_EDX) = _EDX + 1;
  sub_402C28(a1, _EDX, a2, a3, _ESI);
  __asm { frstor  byte ptr [esi-2E75A518h] }
  JUMPOUT(0x402243);
}
// 402229: positive sp value 4 has been found
// 402241: control flows out of bounds to 402243

//----- (00402287) --------------------------------------------------------
#error "402747: cannot convert to microcode (funcsize=39)"

//----- (004022AA) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
__int16 __usercall sub_4022AA@<ax>(char a1@<al>, __int32 a2@<edx>, __int16 a3@<cx>, __int16 a4@<si>)
{
  __int16 v4; // ax
  __int16 result; // ax
  __int16 v6; // si
  __int32 v7; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v7, a2);
  v6 = a3 | a4;
  if ( v7 != 1518364444 )
    JUMPOUT(0x402495);
  LOBYTE(v4) = a1 + 1;
  HIBYTE(v4) = v4;
  result = v6 ^ v4;
  HIBYTE(result) |= 0x1Cu;
  if ( __OFADD__(1, 1518364444) )
    JUMPOUT(0x402345);
  HIBYTE(result) = HIBYTE(result) - 1 + 7;
  return result;
}
// 40211C: positive sp value 4 has been found
// 4022DE: control flows out of bounds to 402345
// 4022B8: control flows out of bounds to 402495

//----- (0040230E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40230E(_BYTE *a1@<eax>, char a2@<cl>, _BYTE *a3@<ebx>, int a4@<ebp>, _BYTE *a5@<edi>)
{
  char v5; // cl
  void *v6; // [esp+20h] [ebp-4h]
  void *retaddr; // [esp+24h] [ebp+0h]

  *(&retaddr - 10) = v6;
  sub_4026E6(a1, a2 - 14, (int)a3, a5, a3);
  *(_BYTE *)(a4 - 127310413) = __ROR1__(*(_BYTE *)(a4 - 127310413), v5);
  JUMPOUT(0x40244D);
}
// 402170: positive sp value 4 has been found
// 402447: control flows out of bounds to 40244D
// 402447: variable 'v5' is possibly undefined

//----- (0040235F) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40235F(__int16 a1@<ax>, int a2@<ebx>, int a3@<esi>)
{
  char v3; // dh
  void *v4; // [esp+18h] [ebp-4h]
  void *retaddr; // [esp+1Ch] [ebp+0h]

  *(&retaddr - 8) = v4;
  v3 = __CFADD__(a2, a3 + 1) - (HIBYTE(a1) | a1 ^ 0x88) + 109;
  if ( !__OFADD__(BYTE1(a2), v3) && __OFADD__(BYTE1(a2), v3) )
    JUMPOUT(0x402008);
  JUMPOUT(0x40213E);
}
// 401FE3: positive sp value 4 has been found
// 402002: control flows out of bounds to 402008
// 402861: control flows out of bounds to 40213E
// 40286C: conditional instruction was optimized away because esi.4>=1

//----- (00402377) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __fastcall sub_402377(int a1, int a2)
{
  int v2; // ecx
  int v4; // [esp-4h] [ebp-4h]

  ((int (__fastcall *)(int, int))sub_402287)(a1, a2);
  v4 = v2 + 1;
  sub_402B46();
  MEMORY[0xEB8DE942](v4);
  return sub_4023B2();
}
// 402380: positive sp value 4 has been found
// 402392: variable 'v2' is possibly undefined
// 402287: using guessed type _DWORD sub_402287();
// 4023B2: using guessed type _DWORD sub_4023B2();

//----- (004023B2) --------------------------------------------------------
#error "402E33: cannot convert to microcode (funcsize=38)"

//----- (00402408) --------------------------------------------------------
#error "40233C: call analysis failed (funcsize=54)"

//----- (0040244F) --------------------------------------------------------
#error "4024CF: cannot convert to microcode (funcsize=48)"

//----- (00402590) --------------------------------------------------------
#error "402BD8: cannot convert to microcode (funcsize=115)"

//----- (004025C9) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4025C9()
{
  JUMPOUT(0x402D72);
}
// 4025CD: positive sp value 4 has been found
// 4025DC: control flows out of bounds to 402D72

//----- (004025E7) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4025E7(int a1@<ecx>, int a2@<edx>, int a3@<ebx>, int a4@<edi>)
{
  char v4; // dl
  int v5; // ecx
  int v6; // edx

  --BYTE1(a3);
  ((void (__fastcall *)(int, int))((char *)&loc_4027FD + 3))(a1, a2);
  LOBYTE(v6) = BYTE1(v5) + v4;
  __asm { repne mov esi, 0F24435D8h }
  sub_402600(v6, v5, a3, a4, _ESI);
}
// 4025ED: positive sp value 4 has been found
// 4025F8: variable 'v5' is possibly undefined
// 4025F8: variable 'v4' is possibly undefined
// 4025FB: variable 'v6' is possibly undefined

//----- (00402600) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402600(int a1@<edx>, int a2@<ecx>, int a3@<ebx>, int a4@<edi>, int a5@<esi>)
{
  int v5; // edx
  int v6; // edx
  double v7; // st7

  BYTE1(a1) = 87;
  LOBYTE(a1) = a3 - BYTE1(a2) + 14;
  v5 = a4 ^ a1;
  LOBYTE(a2) = ~(_BYTE)a2;
  LOBYTE(v5) = v5 + 1;
  v6 = a5 | v5;
  BYTE1(v6) -= v6;
  v7 = ((double (__fastcall *)(int, int))sub_40244F)(a2, v6);
  BYTE1(a3) = 33;
  __asm { rcr     byte ptr [edx+24648D94h], cl }
  *(_DWORD *)(a3 - 128) = (int)v7;
  JUMPOUT(0x402808);
}
// 4027F9: positive sp value A4E has been found
// 402805: control flows out of bounds to 402808
// 4027F4: bad sp value at call

//----- (00402687) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_402687@<eax>(
        bool a1@<cf>,
        int a2@<eax>,
        __int16 a3@<dx>,
        int a4@<ecx>,
        int a5@<ebx>,
        int a6@<esi>,
        int a7@<edi>,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  int v70; // esi
  int v71; // edi
  int v73; // ebx
  __int64 v74; // rax
  int v75; // ecx
  int v79; // [esp-99ADh] [ebp-99D1h]
  int v80[9834]; // [esp-99A9h] [ebp-99CDh]

  v80[-10] = v79;
  LOBYTE(a5) = a5 - (a1 + 13);
  v70 = a6 - 2;
  v71 = a7 - 1;
  BYTE1(a5) = HIBYTE(a3) | (BYTE1(a5) - 1);
  if ( !a2 )
  {
    BYTE1(a5) = -BYTE1(a5);
    LOBYTE(a5) = a5 - BYTE1(a4);
    _ESI = a5 | v70;
    a1 = __CFADD__((_BYTE)a5, BYTE1(a5));
    BYTE1(a5) += a5;
    LOBYTE(a5) = a5 + 1;
    BYTE1(a5) -= a1 + 127;
    v73 = a5 - 1;
    BYTE1(v73) = a3 + BYTE1(v73) - 43;
    LOBYTE(v73) = ~(_BYTE)v73;
    v74 = ((__int64 (__thiscall *)(int))loc_4023DD)(a4);
    __asm { outsd }
    ++BYTE5(v74);
    LODWORD(v74) = v74 - (_ESI | 0xDF1BCC3A);
    BYTE1(v74) = ~BYTE1(v74);
    sub_402D1D(
      (_ESI | 0xDF1BCC3A) ^ v73 ^ HIDWORD(v74),
      v75 - 1,
      (_ESI | 0xDF1BCC3A) ^ v73,
      _ESI | 0xDF1BCC3A,
      v74 | _ESI,
      v80[0],
      v80[1],
      v80[2],
      v80[3],
      v80[4],
      v80[5],
      v80[6],
      v80[7],
      v80[8],
      v80[9],
      v80[10],
      v80[11],
      v80[12],
      v80[13],
      v80[14],
      v80[15],
      v80[16],
      v80[17],
      v80[18],
      v80[19],
      v80[20],
      v80[21],
      v80[22],
      v80[23],
      v80[24],
      v80[25],
      v80[26],
      v80[27],
      v80[28],
      v80[29],
      v80[30],
      v80[31],
      v80[32],
      v80[33],
      v80[34],
      v80[35],
      v80[36],
      v80[37],
      v80[38],
      v80[39],
      v80[40],
      v80[41],
      v80[42],
      v80[43],
      v80[44],
      v80[45],
      v80[46],
      v80[47],
      v80[48],
      v80[49],
      v80[50],
      v80[51],
      v80[52],
      v80[53],
      v80[54],
      v80[55],
      v80[56],
      v80[57]);
    __asm { aam     0Dh }
    JUMPOUT(0x402AD0);
  }
  sub_4025E7(a4 - 1, a3, a5, v71);
  return sub_402DCC(
           a8,
           a9,
           a10,
           a11,
           a12,
           a13,
           a14,
           a15,
           a16,
           a17,
           a18,
           a19,
           a20,
           a21,
           a22,
           a23,
           a24,
           a25,
           a26,
           a27,
           a28,
           a29,
           a30,
           a31,
           a32,
           a33,
           a34,
           a35,
           a36,
           a37,
           a38,
           a39,
           a40,
           a41,
           a42,
           a43,
           a44,
           a45,
           a46,
           a47,
           a48,
           a49,
           a50,
           a51,
           a52,
           a53,
           a54,
           a55,
           a56,
           a57,
           a58,
           a59,
           a60,
           a61,
           a62,
           a63,
           a64,
           a65,
           a66,
           a67,
           a68,
           a69,
           a70);
}
// 402ACD: positive sp value 99D1 has been found
// 402ACE: control flows out of bounds to 402AD0
// 402ABB: variable 'v75' is possibly undefined
// 402687: too many input arguments, some ignored

//----- (004026E6) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4026E6(_BYTE *a1@<eax>, char a2@<cl>, int a3@<ebx>, _BYTE *a4@<edi>, _BYTE *a5@<esi>)
{
  *a1 = a2;
  sub_40235F((__int16)a1, a3, (int)a5);
  *a4 = *a5;
  __asm { into }
  JUMPOUT(0x40270A);
}
// 4026EF: positive sp value 4 has been found
// 402705: control flows out of bounds to 40270A

//----- (00402788) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402788(int a1@<eax>, _DWORD *a2@<edi>)
{
  bool v3; // of

  __asm { repne pop ebx }
  v3 = __OFADD__(1, (_BYTE)a1);
  LOBYTE(a1) = a1 + 1;
  if ( !v3 && v3 )
  {
    *a2 = a1;
    __asm { iret }
  }
  JUMPOUT(0x402547);
}
// 40278E: positive sp value 4 has been found
// 4027A7: control flows out of bounds to 4027A8
// 402798: control flows out of bounds to 402547

//----- (0040282B) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_40282B(
        __int32 a1@<esi>,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  __int32 v65; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v65, a1);
  __asm { rep pop esi }
  JUMPOUT(0x402577);
}
// 402831: positive sp value 4 has been found
// 40284F: unbalanced stack, ignored a potential tail call
// 402839: control flows out of bounds to 402577
// 40282B: too many input arguments, some ignored

//----- (00402878) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_402878@<eax>(int a1@<eax>, int a2@<edi>)
{
  bool v2; // cf
  _DWORD *v3; // edi
  void *retaddr[2]; // [esp+0h] [ebp+0h]

  v2 = __CFADD__(a1, a2);
  v3 = (_DWORD *)(a1 + a2);
  BYTE1(a1) -= v2 - 127;
  sub_402788(a1, v3);
  return MK_FP(retaddr[0], retaddr[0])();
}
// 40287C: positive sp value 4 has been found

//----- (004028AA) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4028AA(__int32 a1@<esi>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // ebx
  unsigned int v4; // eax
  unsigned __int16 v5; // dx
  int v6; // edi
  int v7; // eax
  int v8; // ecx
  int v9; // [esp-E869h] [ebp-E869h]
  int v10; // [esp-E865h] [ebp-E865h]
  int v11; // [esp-E861h] [ebp-E861h]
  int v12; // [esp-E85Dh] [ebp-E85Dh]
  int v13; // [esp-E859h] [ebp-E859h]
  int v14; // [esp-E855h] [ebp-E855h]
  int v15; // [esp-E851h] [ebp-E851h]
  int v16; // [esp-E84Dh] [ebp-E84Dh]
  int v17; // [esp-E849h] [ebp-E849h]
  int v18; // [esp-E845h] [ebp-E845h]
  int v19; // [esp-E841h] [ebp-E841h]
  int v20; // [esp-E83Dh] [ebp-E83Dh]
  int v21; // [esp-E839h] [ebp-E839h]
  int v22; // [esp-E835h] [ebp-E835h]
  int v23; // [esp-E831h] [ebp-E831h]
  int v24; // [esp-E82Dh] [ebp-E82Dh]
  int v25; // [esp-E829h] [ebp-E829h]
  int v26; // [esp-E825h] [ebp-E825h]
  int v27; // [esp-E821h] [ebp-E821h]
  int v28; // [esp-E81Dh] [ebp-E81Dh]
  int v29; // [esp-E819h] [ebp-E819h]
  int v30; // [esp-E815h] [ebp-E815h]
  int v31; // [esp-E811h] [ebp-E811h]
  int v32; // [esp-E80Dh] [ebp-E80Dh]
  int v33; // [esp-E809h] [ebp-E809h]
  int v34; // [esp-E805h] [ebp-E805h]
  int v35; // [esp-E801h] [ebp-E801h]
  int v36; // [esp-E7FDh] [ebp-E7FDh]
  int v37; // [esp-E7F9h] [ebp-E7F9h]
  int v38; // [esp-E7F5h] [ebp-E7F5h]
  int v39; // [esp-E7F1h] [ebp-E7F1h]
  int v40; // [esp-E7EDh] [ebp-E7EDh]
  int v41; // [esp-E7E9h] [ebp-E7E9h]
  int v42; // [esp-E7E5h] [ebp-E7E5h]
  int v43; // [esp-E7E1h] [ebp-E7E1h]
  int v44; // [esp-E7DDh] [ebp-E7DDh]
  int v45; // [esp-E7D9h] [ebp-E7D9h]
  int v46; // [esp-E7D5h] [ebp-E7D5h]
  int v47; // [esp-E7D1h] [ebp-E7D1h]
  int v48; // [esp-E7CDh] [ebp-E7CDh]
  int v49; // [esp-E7C9h] [ebp-E7C9h]
  int v50; // [esp-E7C5h] [ebp-E7C5h]
  int v51; // [esp-E7C1h] [ebp-E7C1h]
  int v52; // [esp-E7BDh] [ebp-E7BDh]
  int v53; // [esp-E7B9h] [ebp-E7B9h]
  int v54; // [esp-E7B5h] [ebp-E7B5h]
  int v55; // [esp-E7B1h] [ebp-E7B1h]
  int v56; // [esp-E7ADh] [ebp-E7ADh]
  int v57; // [esp-E7A9h] [ebp-E7A9h]
  int v58; // [esp-E7A5h] [ebp-E7A5h]
  int v59; // [esp-E7A1h] [ebp-E7A1h]
  int v60; // [esp-E79Dh] [ebp-E79Dh]
  int v61; // [esp-E799h] [ebp-E799h]
  int v62; // [esp-E795h] [ebp-E795h]
  int v63; // [esp-E791h] [ebp-E791h]
  int v64; // [esp-E78Dh] [ebp-E78Dh]
  int v65; // [esp-E789h] [ebp-E789h]
  int v66; // [esp-E785h] [ebp-E785h]
  int v67; // [esp-E781h] [ebp-E781h]
  int v68; // [esp-E77Dh] [ebp-E77Dh]
  int v69; // [esp-E779h] [ebp-E779h]
  int v70; // [esp-E775h] [ebp-E775h]
  int v71; // [esp-A30Fh] [ebp-A30Fh]
  int v72; // [esp-A30Bh] [ebp-A30Bh]
  int v73; // [esp-A307h] [ebp-A307h]
  int v74; // [esp-A303h] [ebp-A303h]
  int v75; // [esp-A2FFh] [ebp-A2FFh]
  int v76; // [esp-A2FBh] [ebp-A2FBh]
  int v77; // [esp-A2F7h] [ebp-A2F7h]
  int v78; // [esp-A2F3h] [ebp-A2F3h]
  int v79; // [esp-A2EFh] [ebp-A2EFh]
  int v80; // [esp-A2EBh] [ebp-A2EBh]
  int v81; // [esp-A2E7h] [ebp-A2E7h]
  int v82; // [esp-A2E3h] [ebp-A2E3h]
  int v83; // [esp-A2DFh] [ebp-A2DFh]
  int v84; // [esp-A2DBh] [ebp-A2DBh]
  int v85; // [esp-A2D7h] [ebp-A2D7h]
  int v86; // [esp-A2D3h] [ebp-A2D3h]
  int v87; // [esp-A2CFh] [ebp-A2CFh]
  int v88; // [esp-A2CBh] [ebp-A2CBh]
  int v89; // [esp-A2C7h] [ebp-A2C7h]
  int v90; // [esp-A2C3h] [ebp-A2C3h]
  int v91; // [esp-A2BFh] [ebp-A2BFh]
  int v92; // [esp-A2BBh] [ebp-A2BBh]
  int v93; // [esp-A2B7h] [ebp-A2B7h]
  int v94; // [esp-A2B3h] [ebp-A2B3h]
  int v95; // [esp-A2AFh] [ebp-A2AFh]
  int v96; // [esp-A2ABh] [ebp-A2ABh]
  int v97; // [esp-A2A7h] [ebp-A2A7h]
  int v98; // [esp-A2A3h] [ebp-A2A3h]
  int v99; // [esp-A29Fh] [ebp-A29Fh]
  int v100; // [esp-A29Bh] [ebp-A29Bh]
  int v101; // [esp-A297h] [ebp-A297h]
  int v102; // [esp-A293h] [ebp-A293h]
  int v103; // [esp-A28Fh] [ebp-A28Fh]
  int v104; // [esp-A28Bh] [ebp-A28Bh]
  int v105; // [esp-A287h] [ebp-A287h]
  int v106; // [esp-A283h] [ebp-A283h]
  int v107; // [esp-A27Fh] [ebp-A27Fh]
  int v108; // [esp-A27Bh] [ebp-A27Bh]
  int v109; // [esp-A277h] [ebp-A277h]
  int v110; // [esp-A273h] [ebp-A273h]
  int v111; // [esp-A26Fh] [ebp-A26Fh]
  int v112; // [esp-A26Bh] [ebp-A26Bh]
  int v113; // [esp-A267h] [ebp-A267h]
  int v114; // [esp-A263h] [ebp-A263h]
  int v115; // [esp-A25Fh] [ebp-A25Fh]
  int v116; // [esp-A25Bh] [ebp-A25Bh]
  int v117; // [esp-A257h] [ebp-A257h]
  int v118; // [esp-A253h] [ebp-A253h]
  int v119; // [esp-A24Fh] [ebp-A24Fh]
  int v120; // [esp-A24Bh] [ebp-A24Bh]
  int v121; // [esp-A247h] [ebp-A247h]
  int v122; // [esp-A243h] [ebp-A243h]
  int v123; // [esp-A23Fh] [ebp-A23Fh]
  int v124; // [esp-A23Bh] [ebp-A23Bh]
  int v125; // [esp-A237h] [ebp-A237h]
  int v126; // [esp-A233h] [ebp-A233h]
  int v127; // [esp-A22Fh] [ebp-A22Fh]
  int v128; // [esp-A22Bh] [ebp-A22Bh]
  int v129; // [esp-A227h] [ebp-A227h]
  int v130; // [esp-A223h] [ebp-A223h]
  int v131; // [esp-A21Fh] [ebp-A21Fh]
  int v132; // [esp-A21Bh] [ebp-A21Bh]

  v3 = a2 + 1;
  sub_40282B(
    a1,
    v9,
    v10,
    v11,
    v12,
    v13,
    v14,
    v15,
    v16,
    v17,
    v18,
    v19,
    v20,
    v21,
    v22,
    v23,
    v24,
    v25,
    v26,
    v27,
    v28,
    v29,
    v30,
    v31,
    v32,
    v33,
    v34,
    v35,
    v36,
    v37,
    v38,
    v39,
    v40,
    v41,
    v42,
    v43,
    v44,
    v45,
    v46,
    v47,
    v48,
    v49,
    v50,
    v51,
    v52,
    v53,
    v54,
    v55,
    v56,
    v57,
    v58,
    v59,
    v60,
    v61,
    v62,
    v63,
    v64,
    v65,
    v66,
    v67,
    v68,
    v69,
    v70);
  __outdword(v5, v4);
  v6 = a3 - v3;
  v4 ^= 0xFFFFFEC8;
  LOBYTE(v3) = BYTE1(v4) | HIBYTE(v5) | (__CFADD__(HIBYTE(v5) ^ (v3 - 1), 115) + (HIBYTE(v5) ^ (v3 - 1)) + 115 - 20);
  v7 = sub_402A2C(
         v4,
         v71,
         v72,
         v73,
         v74,
         v75,
         v76,
         v77,
         v78,
         v79,
         v80,
         v81,
         v82,
         v83,
         v84,
         v85,
         v86,
         v87,
         v88,
         v89,
         v90,
         v91,
         v92,
         v93,
         v94,
         v95,
         v96,
         v97,
         v98,
         v99,
         v100,
         v101,
         v102,
         v103,
         v104,
         v105,
         v106,
         v107,
         v108,
         v109,
         v110,
         v111,
         v112,
         v113,
         v114,
         v115,
         v116,
         v117,
         v118,
         v119,
         v120,
         v121,
         v122,
         v123,
         v124,
         v125,
         v126,
         v127,
         v128,
         v129,
         v130,
         v131,
         v132);
  sub_4028E9(v7 >> 31, v8, v3, v6, -1605932845 * a1);
}
// 4028E1: positive sp value E869 has been found
// 4028BA: variable 'v9' is possibly undefined
// 4028BA: variable 'v10' is possibly undefined
// 4028BA: variable 'v11' is possibly undefined
// 4028BA: variable 'v12' is possibly undefined
// 4028BA: variable 'v13' is possibly undefined
// 4028BA: variable 'v14' is possibly undefined
// 4028BA: variable 'v15' is possibly undefined
// 4028BA: variable 'v16' is possibly undefined
// 4028BA: variable 'v17' is possibly undefined
// 4028BA: variable 'v18' is possibly undefined
// 4028BA: variable 'v19' is possibly undefined
// 4028BA: variable 'v20' is possibly undefined
// 4028BA: variable 'v21' is possibly undefined
// 4028BA: variable 'v22' is possibly undefined
// 4028BA: variable 'v23' is possibly undefined
// 4028BA: variable 'v24' is possibly undefined
// 4028BA: variable 'v25' is possibly undefined
// 4028BA: variable 'v26' is possibly undefined
// 4028BA: variable 'v27' is possibly undefined
// 4028BA: variable 'v28' is possibly undefined
// 4028BA: variable 'v29' is possibly undefined
// 4028BA: variable 'v30' is possibly undefined
// 4028BA: variable 'v31' is possibly undefined
// 4028BA: variable 'v32' is possibly undefined
// 4028BA: variable 'v33' is possibly undefined
// 4028BA: variable 'v34' is possibly undefined
// 4028BA: variable 'v35' is possibly undefined
// 4028BA: variable 'v36' is possibly undefined
// 4028BA: variable 'v37' is possibly undefined
// 4028BA: variable 'v38' is possibly undefined
// 4028BA: variable 'v39' is possibly undefined
// 4028BA: variable 'v40' is possibly undefined
// 4028BA: variable 'v41' is possibly undefined
// 4028BA: variable 'v42' is possibly undefined
// 4028BA: variable 'v43' is possibly undefined
// 4028BA: variable 'v44' is possibly undefined
// 4028BA: variable 'v45' is possibly undefined
// 4028BA: variable 'v46' is possibly undefined
// 4028BA: variable 'v47' is possibly undefined
// 4028BA: variable 'v48' is possibly undefined
// 4028BA: variable 'v49' is possibly undefined
// 4028BA: variable 'v50' is possibly undefined
// 4028BA: variable 'v51' is possibly undefined
// 4028BA: variable 'v52' is possibly undefined
// 4028BA: variable 'v53' is possibly undefined
// 4028BA: variable 'v54' is possibly undefined
// 4028BA: variable 'v55' is possibly undefined
// 4028BA: variable 'v56' is possibly undefined
// 4028BA: variable 'v57' is possibly undefined
// 4028BA: variable 'v58' is possibly undefined
// 4028BA: variable 'v59' is possibly undefined
// 4028BA: variable 'v60' is possibly undefined
// 4028BA: variable 'v61' is possibly undefined
// 4028BA: variable 'v62' is possibly undefined
// 4028BA: variable 'v63' is possibly undefined
// 4028BA: variable 'v64' is possibly undefined
// 4028BA: variable 'v65' is possibly undefined
// 4028BA: variable 'v66' is possibly undefined
// 4028BA: variable 'v67' is possibly undefined
// 4028BA: variable 'v68' is possibly undefined
// 4028BA: variable 'v69' is possibly undefined
// 4028BA: variable 'v70' is possibly undefined
// 4028BF: variable 'v5' is possibly undefined
// 4028BF: variable 'v4' is possibly undefined
// 4028DC: variable 'v71' is possibly undefined
// 4028DC: variable 'v72' is possibly undefined
// 4028DC: variable 'v73' is possibly undefined
// 4028DC: variable 'v74' is possibly undefined
// 4028DC: variable 'v75' is possibly undefined
// 4028DC: variable 'v76' is possibly undefined
// 4028DC: variable 'v77' is possibly undefined
// 4028DC: variable 'v78' is possibly undefined
// 4028DC: variable 'v79' is possibly undefined
// 4028DC: variable 'v80' is possibly undefined
// 4028DC: variable 'v81' is possibly undefined
// 4028DC: variable 'v82' is possibly undefined
// 4028DC: variable 'v83' is possibly undefined
// 4028DC: variable 'v84' is possibly undefined
// 4028DC: variable 'v85' is possibly undefined
// 4028DC: variable 'v86' is possibly undefined
// 4028DC: variable 'v87' is possibly undefined
// 4028DC: variable 'v88' is possibly undefined
// 4028DC: variable 'v89' is possibly undefined
// 4028DC: variable 'v90' is possibly undefined
// 4028DC: variable 'v91' is possibly undefined
// 4028DC: variable 'v92' is possibly undefined
// 4028DC: variable 'v93' is possibly undefined
// 4028DC: variable 'v94' is possibly undefined
// 4028DC: variable 'v95' is possibly undefined
// 4028DC: variable 'v96' is possibly undefined
// 4028DC: variable 'v97' is possibly undefined
// 4028DC: variable 'v98' is possibly undefined
// 4028DC: variable 'v99' is possibly undefined
// 4028DC: variable 'v100' is possibly undefined
// 4028DC: variable 'v101' is possibly undefined
// 4028DC: variable 'v102' is possibly undefined
// 4028DC: variable 'v103' is possibly undefined
// 4028DC: variable 'v104' is possibly undefined
// 4028DC: variable 'v105' is possibly undefined
// 4028DC: variable 'v106' is possibly undefined
// 4028DC: variable 'v107' is possibly undefined
// 4028DC: variable 'v108' is possibly undefined
// 4028DC: variable 'v109' is possibly undefined
// 4028DC: variable 'v110' is possibly undefined
// 4028DC: variable 'v111' is possibly undefined
// 4028DC: variable 'v112' is possibly undefined
// 4028DC: variable 'v113' is possibly undefined
// 4028DC: variable 'v114' is possibly undefined
// 4028DC: variable 'v115' is possibly undefined
// 4028DC: variable 'v116' is possibly undefined
// 4028DC: variable 'v117' is possibly undefined
// 4028DC: variable 'v118' is possibly undefined
// 4028DC: variable 'v119' is possibly undefined
// 4028DC: variable 'v120' is possibly undefined
// 4028DC: variable 'v121' is possibly undefined
// 4028DC: variable 'v122' is possibly undefined
// 4028DC: variable 'v123' is possibly undefined
// 4028DC: variable 'v124' is possibly undefined
// 4028DC: variable 'v125' is possibly undefined
// 4028DC: variable 'v126' is possibly undefined
// 4028DC: variable 'v127' is possibly undefined
// 4028DC: variable 'v128' is possibly undefined
// 4028DC: variable 'v129' is possibly undefined
// 4028DC: variable 'v130' is possibly undefined
// 4028DC: variable 'v131' is possibly undefined
// 4028DC: variable 'v132' is possibly undefined
// 4028E8: variable 'v8' is possibly undefined

//----- (004028E9) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4028E9(int a1@<edx>, int a2@<ecx>, char a3@<bl>, int a4@<edi>, int a5@<esi>)
{
  __int16 v5; // bx
  int v6; // edx
  int v8; // edi
  _BYTE *v9; // esi
  int v11; // [esp-10h] [ebp-10h]
  unsigned int v12; // [esp-Ch] [ebp-Ch]

  v6 = a1 - a2;
  BYTE1(v6) -= 17;
  _EAX = v6;
  v8 = a2 | a4;
  v9 = (_BYTE *)(a5 + 1);
  if ( !(((char)(v6 + BYTE1(v6)) < 0) ^ __OFADD__((_BYTE)v6, BYTE1(v6)) | ((_BYTE)v6 + BYTE1(v6) == 0))
    && ((char)(v6 + BYTE1(v6)) < 0) ^ __OFADD__((_BYTE)v6, BYTE1(v6)) | ((_BYTE)v6 + BYTE1(v6) == 0) )
  {
    __asm { aas }
    BYTE1(_EAX) = 73;
    LOBYTE(_EAX) = *v9;
    __outdword(0x2Eu, _EAX);
    JUMPOUT(0x402DC1);
  }
  HIBYTE(v5) = a3;
  LOBYTE(v5) = -a3;
  --HIBYTE(v5);
  sub_402224(v11, a2, v5, v8);
  __writeeflags(v12);
  JUMPOUT(0x402C51);
}
// 4020B9: positive sp value 14 has been found
// 402DBF: control flows out of bounds to 402DC1
// 4020E9: control flows out of bounds to C8CAEC78
// 402D6E: control flows out of bounds to F043DFCB
// 402D5D: control flows out of bounds to 402C51
// 4020DC: conditional instruction was optimized away because edx.4!=0
// 402D65: conditional instruction was optimized away because dl.1>=0
// 40225E: variable 'v11' is possibly undefined
// 402263: variable 'v12' is possibly undefined

//----- (00402A2C) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
int __userpurge sub_402A2C@<eax>(
        __int32 a1@<eax>,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  __int32 v65; // [esp-4h] [ebp-4h] BYREF
  void *retaddr[2]; // [esp+0h] [ebp+0h]

  _InterlockedExchange(&v65, a1);
  ((void (*)(void))((char *)&loc_402767 + 1))();
  return MK_FP(retaddr[0], retaddr[0])();
}
// 402A33: positive sp value 4 has been found
// 402A40: bad sp value at call
// 402A2C: too many input arguments, some ignored

//----- (00402AD2) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402AD2()
{
  JUMPOUT(0x40246C);
}
// 401FBD: positive sp value 4 has been found
// 401FE0: control flows out of bounds to 401FE2
// 401FCE: control flows out of bounds to 40246C
// 401FD6: conditional instruction was optimized away because ebx.4!=0

//----- (00402B0A) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402B0A(char a1@<ah>, int a2@<edx>, __int32 a3@<ecx>, int a4@<ebx>, int a5@<edi>, __int16 _SI@<si>)
{
  unsigned __int16 v6; // ax
  char v7; // sf
  char v9; // ah
  bool v10; // cc
  int v11; // ecx
  __int32 *v12; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange((volatile __int32 *)&v12, a3);
  _ECX = (int)v12;
  v12 = (__int32 *)*v12;
  v9 = a1 - 91 + 1;
  v10 = (char)a2 <= v9;
  LOBYTE(a2) = a2 - v9;
  if ( v10 || !v10 )
  {
    ++BYTE1(a4);
    sub_4028E9(a4 ^ a2, _ECX, a4, a5, _SI);
    if ( !v7 )
      JUMPOUT(0x402899);
    __indword(v6);
    sub_4028AA(_SI, a4, a5);
  }
  else
  {
    __asm { arpl    [ecx-25h], si }
    __readeflags();
    sub_402377(_ECX, a2);
    *(_BYTE *)(v11 - 16) += ((unsigned __int16)(a4 - 1) >> 8) - 65;
    sub_402B46();
  }
}
// 402B10: positive sp value 4 has been found
// 4028A6: control flows out of bounds to 402899
// 402B42: variable 'v11' is possibly undefined
// 4028A6: variable 'v7' is possibly undefined
// 4028A9: variable 'v6' is possibly undefined

//----- (00402B46) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402B46()
{
  void *v0; // [esp+Ch] [ebp-4h]
  void *retaddr; // [esp+10h] [ebp+0h]

  *(&retaddr - 5) = v0;
  ((void (*)(void))loc_402A81)();
  JUMPOUT(0x4021A2);
}
// 40218F: positive sp value 4 has been found
// 40219D: control flows out of bounds to 4021A2

//----- (00402C28) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402C28(int _EAX@<eax>, int a2@<edx>, __int16 a3@<cx>, int _EBX@<ebx>, int a5@<esi>)
{
  bool v5; // cf
  char v6; // tt
  bool v7; // zf
  char v8; // cl
  int v9; // ecx
  int v10; // edx
  int v15; // [esp-A3Ah] [ebp-A4Eh]
  _BYTE v16[2634]; // [esp-A36h] [ebp-A4Ah]

  *(_DWORD *)&v16[-24] = v15;
  v5 = __CFADD__(BYTE1(a2), BYTE1(_EBX));
  BYTE1(_EBX) += BYTE1(a2);
  v6 = v5;
  v5 = __CFADD__(v5, BYTE1(_EBX));
  BYTE1(_EBX) += v6;
  v5 |= __CFADD__(BYTE1(_EBX), -116);
  BYTE1(_EBX) -= 116;
  LOBYTE(_EBX) = _EBX - (v5 + 67);
  BYTE1(a2) = -(char)(HIBYTE(a3) + BYTE1(a2));
  v7 = (_BYTE)_EBX == 1;
  LOBYTE(_EBX) = _EBX - 1;
  if ( BYTE1(a2) != 0 || v7 || BYTE1(a2) == 0 && !v7 )
    JUMPOUT(0x4029A3);
  __asm { xlat }
  LOBYTE(a2) = BYTE1(a2);
  BYTE1(a2) |= a3;
  ((void (__fastcall *)(__int16, int))sub_402590)(a3, _EBX ^ _EAX ^ a2);
  __asm { ffree   st(1) }
  BYTE1(_EBX) = -BYTE1(_EBX);
  LOBYTE(v9) = MEMORY[0x3D4605D] | v8;
  LOBYTE(v10) = -41;
  BYTE1(v9) = _EBX ^ 0xD7;
  _AL = ((int (__usercall *)@<eax>(int@<ecx>, int@<edx>, double@<st0>))((char *)&loc_402A0F + 1))(
          v9,
          v10,
          (double)*(__int16 *)(MEMORY[0x3D4605D] - 33422909));
  __asm { rep xlat }
  _AL = *(_BYTE *)(a5 + 1);
  __asm { daa }
  *(_DWORD *)&v16[2630] = _EBX;
  sub_402C87();
}
// 402C63: positive sp value A4E has been found
// 402C3E: control flows out of bounds to 4029A3
// 402C5E: bad sp value at call
// 402C74: variable 'v8' is possibly undefined
// 402C7A: variable 'v9' is possibly undefined
// 402C7A: variable 'v10' is possibly undefined

//----- (00402C87) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402C87()
{
  JUMPOUT(0x402DFB);
}
// 402C8B: positive sp value 4 has been found
// 402C9C: control flows out of bounds to 402DFB

//----- (00402CC8) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_402CC8@<eax>(
        int a1@<edx>,
        int a2@<ecx>,
        __int16 a3@<bx>,
        __int16 a4@<bp>,
        int a5@<edi>,
        __int32 a6@<esi>)
{
  int *v6; // edi
  _BYTE *v7; // esi
  int v8; // eax
  char v9; // zf
  char v10; // cl
  __int32 v12; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v12, a6);
  v6 = (int *)((a1 ^ a5) - a2);
  HIBYTE(a3) = 32;
  v7 = (_BYTE *)(a2 ^ v12);
  v8 = ((int (*)(void))((char *)&loc_4029E5 + 5))();
  *v7 = ((unsigned __int16)(a3 + 1) >> 8) - 1;
  *v6 = v8;
  v10 = v8 - 1;
  if ( v9 && v8 != 1 )
    JUMPOUT(0x402C74);
  if ( __SETP__(v10 | HIBYTE(a4), 0) || !__SETP__(v10 | HIBYTE(a4), 0) )
    JUMPOUT(0x402D30);
  return MK_FP(*(_WORD *)(v8 - 45 + 4), *(_DWORD *)(v8 - 45))();
}
// 402CCE: positive sp value 4 has been found
// 402CE4: control flows out of bounds to 402C74
// 402CF7: control flows out of bounds to 402D30
// 402CE4: variable 'v9' is possibly undefined

//----- (00402D1D) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_402D1D(
        int a1@<edx>,
        __int32 a2@<ecx>,
        int a3@<ebx>,
        int a4@<edi>,
        int a5@<esi>,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  int v64; // ebx
  int v65; // edx

  BYTE1(a1) = -48;
  v64 = a3 - a4;
  v65 = a5 ^ a1;
  LOBYTE(a2) = -(char)a2 - 2;
  LOBYTE(v64) = 31;
  BYTE1(v65) = 0x80;
  sub_402B0A(59, v65, a2, v64, a4, a4 ^ (a5 + 1));
}
// 402D21: positive sp value 4 has been found
// 402D1D: too many input arguments, some ignored

//----- (00402DCC) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
int __userpurge sub_402DCC@<eax>(
        int a1,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  void *v65; // [esp+24h] [ebp-4h]
  void *retaddr[2]; // [esp+28h] [ebp+0h]

  retaddr[-11] = v65;
  sub_4025C9();
  return MK_FP(retaddr[0], retaddr[0])();
}
// 402068: positive sp value 4 has been found
// 402DF8: control flows out of bounds to DE6B04E7
// 4020B4: bad sp value at call
// 402082: bad sp value at call
// 402DCC: too many input arguments, some ignored

// nfuncs=39 queued=39 decompiled=39 lumina nreq=0 worse=0 better=0
#error "There were 5 decompilation failure(s) on 39 function(s)"
