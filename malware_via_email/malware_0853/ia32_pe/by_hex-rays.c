/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<ebp>, int a6@<edi>, int a7@<esi>);

//-------------------------------------------------------------------------
// Data declarations

int dword_40C000[512] =
{
  -1876295519,
  88416000,
  1380272932,
  -1,
  860636494,
  1279536690,
  1923612748,
  1343316774,
  315791940,
  -1862427949,
  1348543483,
  -653109160,
  -2,
  -286979671,
  1684252910,
  -543551118,
  1449372499,
  -250453466,
  1199427728,
  1498485009,
  -159268710,
  1195937791,
  -1482941958,
  293198736,
  -403041286,
  -2081616561,
  754598380,
  46528797,
  1471594633,
  -1342616480,
  -1305547060,
  -1833979713,
  -1676666411,
  -341102446,
  733093440,
  1091703835,
  -449473483,
  -923291107,
  1169014,
  1946398109,
  314497825,
  -327052073,
  373376556,
  1463063936,
  1602443474,
  -853183671,
  1099252354,
  1557288736,
  881286788,
  -2040737193,
  1933543773,
  -2003448539,
  -766014635,
  -1975301796,
  2012253511,
  1427190820,
  -1258697599,
  1826611463,
  1836659903,
  169143241,
  -287204810,
  366407012,
  -71344587,
  -1056319232,
  118075509,
  -1843048038,
  -2123229207,
  325447836,
  1351602904,
  -938008235,
  -2125445371,
  1477648476,
  1868066,
  -1084415118,
  1567756601,
  -672660476,
  955889105,
  -1215427696,
  -1801975547,
  1374616353,
  -383018265,
  1947619366,
  -1833208237,
  1079134950,
  1086020437,
  1415881902,
  -383052201,
  1449370798,
  -426612576,
  1197054538,
  -1371508648,
  2103163300,
  49189466,
  375152057,
  -1557411756,
  1483300793,
  17819486,
  -415165564,
  1279362208,
  -289148686,
  -1627811420,
  1430100994,
  -2123233848,
  1551983480,
  1920210720,
  1912981527,
  -916226459,
  1746951573,
  -1493411589,
  293297857,
  -1847821827,
  -2100324231,
  -371508238,
  14812960,
  606936565,
  149192635,
  517020383,
  286266772,
  -1176163999,
  925912640,
  194019160,
  2121728740,
  775993602,
  -1878099899,
  90301227,
  -1367660202,
  327049332,
  621201903,
  632797601,
  333124581,
  -236062934,
  -300680287,
  1694114692,
  749506840,
  -265593872,
  337077601,
  1179059017,
  -920348043,
  725599365,
  2065786780,
  1044840469,
  958194248,
  900502051,
  526483426,
  373580883,
  -1888552839,
  519174455,
  1224652644,
  1679522090,
  661382383,
  247601153,
  1805152544,
  2032350202,
  -1696333471,
  1354886705,
  -1071415455,
  -398106212,
  -467547888,
  509353958,
  1650378980,
  357669955,
  150094314,
  1931282617,
  444122655,
  -989867196,
  -1579662551,
  -266597822,
  553116768,
  -117957486,
  957702637,
  1009392772,
  1461555741,
  -400421499,
  -2027667115,
  445323920,
  -151183505,
  17903900,
  1712418092,
  -699485167,
  1178640732,
  2044834871,
  -1662382039,
  2067830433,
  -938227693,
  1702851077,
  775993838,
  2105374096,
  49065536,
  193420095,
  -2034695452,
  183842185,
  -2138863453,
  -757480933,
  968051037,
  373312321,
  1955974502,
  1076708183,
  1230791746,
  1950688627,
  1463063876,
  1749509074,
  -853183995,
  -2125905338,
  1220757852,
  -766811456,
  1249248725,
  2087865760,
  1461738592,
  -852275380,
  1314665621,
  2121365267,
  628229592,
  -930516112,
  1914139797,
  -931827483,
  1947694229,
  1618442377,
  1981243484,
  306870734,
  1092419207,
  427292992,
  -186836741,
  -320739585,
  1084008796,
  1708141294,
  1691560469,
  -447440281,
  -544505929,
  -799473364,
  -1529864455,
  -1877367266,
  776690936,
  -396765158,
  -43717121,
  1503271576,
  2010714669,
  1996972270,
  -303345250,
  -1837105441,
  94901713,
  -1873558601,
  63042256,
  676401253,
  -345707175,
  -487606780,
  -463148545,
  1144701338,
  300650725,
  1360159439,
  -180489478,
  -419889095,
  -1474744229,
  -2036090044,
  -243343938,
  432897170,
  941213955,
  -917237043,
  -1553074233,
  383711721,
  -843265786,
  -113052414,
  -1234777995,
  1285062094,
  239866613,
  1125249300,
  1918303789,
  806406637,
  759639916,
  305746330,
  1855567824,
  519916507,
  211697625,
  -843300667,
  -1827915194,
  -1056813631,
  1306265081,
  1679310583,
  1208815825,
  95245542,
  -1226905777,
  -716303231,
  277287674,
  -608632555,
  35746683,
  -2107246139,
  537262614,
  -857769128,
  -652723705,
  1853974953,
  635138841,
  193963289,
  -448470719,
  27187577,
  -438228140,
  -1253296647,
  1257921965,
  155884589,
  580790543,
  -1092743931,
  382631063,
  -585954803,
  -2048560873,
  -1433547303,
  1352147228,
  462764313,
  -1534653460,
  122853521,
  -464039557,
  844101418,
  -1705090408,
  -762296998,
  1867452905,
  100660796,
  589440292,
  2021239072,
  1242129020,
  -1711027686,
  222184136,
  868185063,
  1505838612,
  2128208193,
  -113656871,
  1094767378,
  164101407,
  -1559219348,
  -844560410,
  1454891582,
  -44789314,
  -1377477574,
  -15533815,
  1143694695,
  -650507523,
  -686491502,
  -157747181,
  1540984281,
  1516408336,
  570068759,
  -1922065600,
  -1711146913,
  -974453422,
  303907482,
  -113022707,
  1826338449,
  420922227,
  1077260816,
  -2053173486,
  -1840746610,
  -1789380142,
  -254185763,
  1187446036,
  -944248200,
  -677272310,
  -2084586734,
  1728514797,
  36075830,
  1996071101,
  -1180796493,
  954227615,
  -632103088,
  -1695705590,
  1855381973,
  -666191172,
  30908058,
  2082558252,
  -2047980697,
  919670397,
  164703009,
  -99471632,
  -1138919149,
  2118207658,
  429185074,
  -1867508175,
  1685866877,
  -770868592,
  1044255609,
  529080792,
  -849569720,
  604396393,
  52706448,
  176684489,
  -1917706678,
  757322033,
  628494679,
  299197575,
  -1874339515,
  356763980,
  -55765039,
  652521435,
  -1812420221,
  1154676730,
  -711787110,
  170593261,
  -314175461,
  105003129,
  -1318753509,
  331947533,
  -1969466794,
  -936734063,
  1765158022,
  1191849774,
  1541667761,
  -116917654,
  -116108545,
  798098950,
  1874553946,
  -1225136150,
  493488400,
  -649267958,
  -334097008,
  390438355,
  151786344,
  -1201219827,
  -2027668925,
  -1289526164,
  324082004,
  303762333,
  608579599,
  151428048,
  -101884402,
  210768851,
  376149209,
  -904604001,
  -808265458,
  413801810,
  45504434,
  -313236182,
  567878214,
  -407484293,
  1646333540,
  569167361,
  1780351705,
  270101522,
  -2042074772,
  98357860,
  1892615697,
  -1706801276,
  884025026,
  689815805,
  -1089359478,
  -1381164790,
  1447681927,
  1696422954,
  740751443,
  1802330645,
  -500798421,
  1563561151,
  -130612713,
  2011823629,
  518977168,
  -434253193,
  1877578433,
  -1244261866,
  -2094351507,
  320931344,
  -935062743,
  -116380849,
  353965510,
  -757963239,
  46970733,
  1696427015,
  491421708,
  862912439,
  210509288,
  705517466,
  -301636394,
  -11034955,
  162945381,
  84738309,
  -1709704655,
  1692609063,
  -1315931265,
  1996571854,
  -251475811,
  936484727,
  -419728742,
  156959874,
  558078672,
  -157541118,
  -1694559507,
  570661579,
  -1031920943,
  -1675012252,
  -1079296669,
  536870333,
  -1072339046,
  -804586760,
  -1133046058,
  425947308,
  308701956,
  -336137838,
  -1865490106,
  314661078,
  720434665,
  -1146944321,
  1402168513,
  -844263671,
  612795654,
  625741345,
  -1225917364,
  304048432,
  -1190569373,
  -85781967,
  -591152048,
  1203506143,
  -93199974,
  1382137117,
  -1495536190,
  1342054289,
  174333267,
  -924439494,
  -16585294,
  -351128074
}; // weak


//----- (004137D0) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<ebp>, int a6@<edi>, int a7@<esi>)
{
  int *v7; // esi
  int *v8; // edi
  unsigned int v9; // ebp
  char v10; // al
  bool v11; // cf
  int v12; // ebx
  int v13; // ebx
  int v14; // ett
  unsigned int v15; // eax
  bool v16; // cf
  int v17; // ebx
  int v18; // ebx
  int v19; // ett
  bool v20; // zf
  int v21; // ebx
  int v22; // ett
  int v23; // ecx
  unsigned int v24; // eax
  unsigned int v25; // eax
  int v26; // eax
  bool v27; // cf
  int v28; // ebx
  int v29; // ebx
  int v30; // ett
  BOOL v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  int v35; // ecx
  int v36; // ecx
  bool v37; // cf
  int v38; // ebx
  int v39; // ebx
  int v40; // ett
  bool v41; // zf
  int v42; // ebx
  int v43; // ett
  unsigned int v44; // ecx
  char v45; // al
  int v46; // eax
  bool v47; // cc
  int *v48; // esi
  char *v49; // edi
  int v50; // eax
  int *v51; // ebx
  int v52; // ebp
  char v53; // al
  char *v54; // ecx
  unsigned __int8 v55; // al
  int v56; // eax
  void (__fastcall *v57)(int, char *, int *, int, int, int *); // ebp
  int *v58; // edi
  int v59[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v60; // [esp+2Ch] [ebp-80h] BYREF
  int v61; // [esp+30h] [ebp-7Ch] BYREF
  char *v62; // [esp+34h] [ebp-78h]
  int *v63; // [esp+38h] [ebp-74h]
  int v64; // [esp+3Ch] [ebp-70h]
  char *v65; // [esp+40h] [ebp-6Ch]
  int v66; // [esp+44h] [ebp-68h]
  int v67; // [esp+48h] [ebp-64h]
  int *v68; // [esp+4Ch] [ebp-60h]
  int v69; // [esp+50h] [ebp-5Ch]
  int v70; // [esp+54h] [ebp-58h]
  int v71; // [esp+58h] [ebp-54h]
  int v72; // [esp+5Ch] [ebp-50h] BYREF

  v71 = a7;
  v70 = a6;
  v69 = a5;
  v68 = &v72;
  v67 = a4;
  v66 = a3;
  v65 = a2;
  v64 = a1;
  v7 = dword_40C000;
  v8 = &dword_40C000[-11264];
  v63 = &dword_40C000[-11264];
  v9 = -1;
  while ( 1 )
  {
    v13 = *v7;
    v11 = (unsigned int)v7++ < 0xFFFFFFFC;
    v14 = v11 + v13;
    v11 = __CFADD__(v11, v13) | __CFADD__(v13, v14);
    v12 = v13 + v14;
    do
    {
      if ( v11 )
      {
        v10 = *(_BYTE *)v7;
        v7 = (int *)((char *)v7 + 1);
        *(_BYTE *)v8 = v10;
        v8 = (int *)((char *)v8 + 1);
      }
      else
      {
        v15 = 1;
        while ( 1 )
        {
          v16 = __CFADD__(v12, v12);
          v17 = 2 * v12;
          if ( !v17 )
          {
            v18 = *v7;
            v11 = (unsigned int)v7++ < 0xFFFFFFFC;
            v19 = v11 + v18;
            v16 = __CFADD__(v11, v18) | __CFADD__(v18, v19);
            v17 = v18 + v19;
          }
          v15 += v16 + v15;
          v11 = __CFADD__(v17, v17);
          v20 = 2 * v17 == 0;
          v12 = 2 * v17;
          if ( v11 )
          {
            if ( !v20 )
              break;
            v21 = *v7;
            v11 = (unsigned int)v7++ < 0xFFFFFFFC;
            v22 = v11 + v21;
            v11 = __CFADD__(v11, v21) | __CFADD__(v21, v22);
            v12 = v21 + v22;
            if ( v11 )
              break;
          }
        }
        v23 = 0;
        v11 = v15 < 3;
        v24 = v15 - 3;
        if ( !v11 )
        {
          v25 = v24 << 8;
          LOBYTE(v25) = *(_BYTE *)v7;
          v7 = (int *)((char *)v7 + 1);
          v26 = ~v25;
          if ( !v26 )
          {
            v48 = v63;
            v49 = (char *)(v63 + 17408);
LABEL_33:
            v50 = *(_DWORD *)v49;
            if ( *(_DWORD *)v49 )
            {
              v51 = (int *)((char *)v48 + *((_DWORD *)v49 + 1));
              v49 += 8;
              v52 = ((int (__fastcall *)(int, char *, int, int, char *, int, int, int *, int, int, int))v48[20106])(
                      v23,
                      a2,
                      (int)v48 + v50 + 80224,
                      v64,
                      v65,
                      v66,
                      v67,
                      v68,
                      v69,
                      v70,
                      v71);
              while ( 1 )
              {
                v53 = *v49++;
                if ( !v53 )
                  goto LABEL_33;
                v54 = v49;
                v62 = v49;
                v55 = v53 - 1;
                do
                {
                  if ( !v54 )
                    break;
                  v20 = *v49++ == (char)v55;
                  --v54;
                }
                while ( !v20 );
                v56 = ((int (__cdecl *)(int, char *))v48[20107])(v52, v62);
                if ( !v56 )
                  break;
                *v51++ = v56;
              }
              v50 = ((int (*)(void))v48[20111])();
            }
            v57 = (void (__fastcall *)(int, char *, int *, int, int, int *))v48[20108];
            v58 = v48 - 1024;
            v60 = v50;
            v57(v23, a2, v48 - 1024, 4096, 4, &v60);
            *((_BYTE *)v58 + 479) &= 0x7Fu;
            *((_BYTE *)v58 + 519) &= 0x7Fu;
            ((void (__cdecl *)(int *, int, int, int *))v57)(v48 - 1024, 4096, v59[0], v59);
            do
              v60 = 0;
            while ( &v60 != &v61 - 32 );
            JUMPOUT(0x40808C);
          }
          v9 = v26;
        }
        v27 = __CFADD__(v12, v12);
        v28 = 2 * v12;
        if ( !v28 )
        {
          v29 = *v7;
          v11 = (unsigned int)v7++ < 0xFFFFFFFC;
          v30 = v11 + v29;
          v27 = __CFADD__(v11, v29) | __CFADD__(v29, v30);
          v28 = v29 + v30;
        }
        v31 = v27;
        v32 = __CFADD__(v28, v28);
        v12 = 2 * v28;
        if ( !v12 )
        {
          v33 = *v7;
          v11 = (unsigned int)v7++ < 0xFFFFFFFC;
          v34 = v11 + v33;
          v32 = __CFADD__(v11, v33) | __CFADD__(v33, v34);
          v12 = v33 + v34;
        }
        v35 = v31 + v32 + v31;
        if ( !v35 )
        {
          v36 = 1;
          while ( 1 )
          {
            v37 = __CFADD__(v12, v12);
            v38 = 2 * v12;
            if ( !v38 )
            {
              v39 = *v7;
              v11 = (unsigned int)v7++ < 0xFFFFFFFC;
              v40 = v11 + v39;
              v37 = __CFADD__(v11, v39) | __CFADD__(v39, v40);
              v38 = v39 + v40;
            }
            v36 += v37 + v36;
            v11 = __CFADD__(v38, v38);
            v41 = 2 * v38 == 0;
            v12 = 2 * v38;
            if ( v11 )
            {
              if ( !v41 )
                break;
              v42 = *v7;
              v11 = (unsigned int)v7++ < 0xFFFFFFFC;
              v43 = v11 + v42;
              v11 = __CFADD__(v11, v42) | __CFADD__(v42, v43);
              v12 = v42 + v43;
              if ( v11 )
                break;
            }
          }
          v35 = v36 + 2;
        }
        v44 = (v9 < 0xFFFFF300) + v35 + 1;
        a2 = (char *)v8 + v9;
        if ( v9 <= 0xFFFFFFFC )
        {
          do
          {
            v46 = *(_DWORD *)a2;
            a2 += 4;
            *v8++ = v46;
            v47 = v44 <= 4;
            v44 -= 4;
          }
          while ( !v47 );
          v8 = (int *)((char *)v8 + v44);
        }
        else
        {
          do
          {
            v45 = *a2++;
            *(_BYTE *)v8 = v45;
            v8 = (int *)((char *)v8 + 1);
            --v44;
          }
          while ( v44 );
        }
      }
      v11 = __CFADD__(v12, v12);
      v12 *= 2;
    }
    while ( v12 );
  }
}
// 413928: positive sp value 50 has been found
// 413928: control flows out of bounds to 40808C
// 4138BF: variable 'v23' is possibly undefined
// 4138BF: variable 'a2' is possibly undefined
// 40C000: using guessed type int dword_40C000[512];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
