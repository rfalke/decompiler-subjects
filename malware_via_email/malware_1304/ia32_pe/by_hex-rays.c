/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// BOOL __stdcall EnableMenuItem(HMENU hMenu, UINT uIDEnableItem, UINT uEnable);
// BOOL __stdcall IsIconic(HWND hWnd);
// void __usercall start(int a1@<edi>);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN unk_40924E; // weak
_UNKNOWN unk_4092F6; // weak
int dword_409376 = 72318912; // weak
_UNKNOWN unk_40943F; // weak
int dword_4094B0 = 1184315786; // weak
int dword_409631 = -798340168; // weak


//----- (00407E42) --------------------------------------------------------
void __usercall start(int a1@<edi>)
{
  int (__thiscall *v1)(_DWORD); // edx
  void (__thiscall *v2)(int); // ebx
  void (*v3)(void); // eax
  int v4; // ecx
  void *v5; // [esp+0h] [ebp-1Ch]
  struct _EXCEPTION_REGISTRATION_RECORD *v6; // [esp+4h] [ebp-18h] BYREF
  HMENU v7; // [esp+8h] [ebp-14h]
  int *v8; // [esp+Ch] [ebp-10h]
  UINT v9; // [esp+10h] [ebp-Ch]
  int savedregs; // [esp+1Ch] [ebp+0h] BYREF

  if ( a1 != 681021743 )
    v9 = 65;
  v8 = &savedregs;
  v7 = (HMENU)&unk_40924E;
  v6 = NtCurrentTeb()->NtTib.ExceptionList;
  __writefsdword(0, (unsigned int)&v6);
  v5 = (char *)&dword_4094B0 + 2;
  v1 = (int (__thiscall *)(_DWORD))*(&savedregs + 1);
  do
    v1 = (int (__thiscall *)(_DWORD))((char *)v1 + 1);
  while ( (unsigned __int16)*(_DWORD *)v1 != 0xD7FF );
  v2 = (void (__thiscall *)(int))dword_409631;
  v3 = (void (*)(void))v1(unk_40943F);
  v3();
  v2(v4 - dword_409376);
  v5 = &unk_4092F6;
  IsIconic((HWND)v6);
  EnableMenuItem(v7, (UINT)v8, v9);
  __asm { jmp     ebx }
}
// 407F45: variable 'v4' is possibly undefined
// 409376: using guessed type int dword_409376;
// 409397: using guessed type int dword_409397;
// 4094B0: using guessed type int dword_4094B0;
// 4095C9: using guessed type int dword_4095C9;
// 409631: using guessed type int dword_409631;

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
