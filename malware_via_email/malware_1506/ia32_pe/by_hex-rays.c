/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int@<eax>, int@<edx>, int@<ecx>);

//-------------------------------------------------------------------------
// Data declarations

int dword_415000[512] =
{
  -1876295519,
  1409369600,
  -1476227808,
  1426194240,
  1952841109,
  1008586536,
  -200,
  -280042497,
  807887819,
  -729099769,
  -1186796061,
  435488347,
  -1602536098,
  -318089286,
  1541743004,
  -73,
  1099932415,
  -1004112088,
  416296787,
  -1918779399,
  649900874,
  -897435938,
  -983787960,
  -1189959763,
  -232,
  -1160933633,
  1851791907,
  -1435255113,
  2102231074,
  -1319261682,
  1833665535,
  -1018776861,
  1357577960,
  -11,
  -957602817,
  1094429296,
  596187278,
  -181196146,
  -1759374465,
  -1502571600,
  19976821,
  -1945018004,
  -55,
  -1080931585,
  1291996561,
  -2082281254,
  -778908467,
  1957649451,
  199467116,
  -476639679,
  2071491288,
  -10,
  145012479,
  1917159131,
  39399553,
  -148372328,
  -1543930214,
  466198416,
  2089050081,
  -1895725076,
  -208,
  -251297537,
  -1150135112,
  -624200611,
  -692311891,
  23554327,
  -1022161762,
  874688258,
  -1379491442,
  -68,
  -748101889,
  -1864626415,
  304724457,
  -395214338,
  1344491785,
  -108409166,
  2051659273,
  -2009507389,
  -436207846,
  2079009791,
  -1837128271,
  -1815613449,
  -1985401257,
  -773933080,
  -1059619856,
  -113837704,
  -1,
  1912510823,
  -209134230,
  1382721388,
  -1177695797,
  -1973159618,
  -887736757,
  1617421105,
  -1773441239,
  -1,
  773202160,
  1613773280,
  2104119125,
  -881098561,
  1958250662,
  -1230788581,
  336980950,
  -948744261,
  -1,
  698391388,
  -1409100376,
  -662388811,
  1195853429,
  -1493253241,
  104773769,
  1384565522,
  -61597736,
  -1,
  -413107433,
  660155446,
  1459300444,
  -2031559931,
  -1064594142,
  19797115,
  -1538542413,
  -1981725393,
  -1,
  1311771156,
  1560237414,
  -2072836340,
  114294594,
  152509096,
  -452165157,
  -1698963986,
  -268508950,
  -1,
  -1426323048,
  576008211,
  1840932254,
  -1324413573,
  1285732972,
  1735882985,
  876059538,
  1178375592,
  -1,
  2115260022,
  -1155199545,
  -504042101,
  -1911835836,
  -114570356,
  -449959535,
  -206223807,
  -1559296982,
  -1,
  592201406,
  -405301934,
  -881178691,
  92922442,
  2036130294,
  784938892,
  1753051153,
  1798428533,
  -1,
  -1344017574,
  692246346,
  -1423946103,
  -132785619,
  2079133704,
  -525040692,
  -1744318089,
  -1230095165,
  -1,
  -633970865,
  -551264236,
  -1806501198,
  43671614,
  -105226618,
  -1626555379,
  1990973201,
  112120883,
  -1,
  -75454640,
  -1674323392,
  785468164,
  1335604678,
  -152770896,
  -708961700,
  -919666789,
  -832890914,
  -1,
  -943509091,
  1344086500,
  -355935790,
  -447148977,
  -981512930,
  647172196,
  52966330,
  -998000526,
  -577,
  -481564913,
  -1664557691,
  -504881054,
  -731791578,
  -1576059995,
  -2032814819,
  -1299725786,
  -1,
  -1078105261,
  1869771308,
  1907300963,
  856431237,
  -891800756,
  877476907,
  427279002,
  -1375825664,
  -1,
  754559815,
  -2141290686,
  1652409375,
  1258713840,
  -1906400366,
  -69759461,
  1916292254,
  -1763022117,
  -303169537,
  1251727591,
  -1290629007,
  -1009807658,
  1550546091,
  -1663197742,
  914360035,
  -1,
  776711058,
  1647607701,
  -1485308602,
  -1274488157,
  874833694,
  -325791954,
  1769079520,
  -523135438,
  -31,
  -1905625916,
  -1535706966,
  -1460979787,
  -1427064470,
  1004515853,
  -805619361,
  -14672517,
  2147483647,
  -1508973089,
  -165253049,
  -1316013028,
  -91362921,
  -207552856,
  1612531040,
  -705484727,
  -59554,
  1245511679,
  -1320840783,
  684481609,
  -729539578,
  1235386983,
  -1288275903,
  -68808519,
  -974301908,
  -65494,
  -221708289,
  878280358,
  -851930201,
  -1263894505,
  2046779888,
  -1192437550,
  1562241217,
  499697791,
  -57743,
  -1863450625,
  1435991822,
  -172815050,
  -904987097,
  658784273,
  2077923225,
  -172623610,
  -751562989,
  469738722,
  1879375871,
  1536568284,
  -304537935,
  -371519132,
  803865129,
  1675499851,
  1576363328,
  -46088,
  -2146647043,
  -878786300,
  -1293652243,
  897647909,
  -2030526343,
  -8424947,
  -1914699777,
  371787864,
  -610021550,
  1445114483,
  -891390740,
  264170440,
  -2085553062,
  -1425954026,
  -457,
  -655206871,
  -866318350,
  54910606,
  146377762,
  -642967583,
  -1750057959,
  -65349,
  -243007489,
  -87758543,
  1315664804,
  2060610493,
  1222153118,
  1159798706,
  804420551,
  131857531,
  1879007358,
  1079967743,
  -1410423864,
  -894168095,
  -1201157209,
  883637209,
  -638708937,
  228413216,
  -24989,
  -1644823185,
  -251476394,
  -299929770,
  1027250853,
  2054098772,
  1352938410,
  2002015780,
  -1,
  1851469851,
  -1897622904,
  1189586683,
  -1657843686,
  750817534,
  -516871646,
  -692566206,
  135228962,
  -590053,
  382084279,
  -550796511,
  -35449916,
  779092536,
  2129197784,
  -19788,
  766050303,
  473519354,
  1201685523,
  -795871042,
  -648220106,
  -1044013674,
  -1911066530,
  1170849471,
  -54245,
  -1485091841,
  1987633729,
  88238486,
  -2133622140,
  -1092536413,
  220189077,
  -1519821659,
  -1,
  -2063902783,
  810577942,
  -180758681,
  -1309861467,
  -524714058,
  -1455138533,
  2058766434,
  -1279599821,
  -1,
  -10527772,
  476424624,
  -403120677,
  -1049835753,
  -220858932,
  1693617338,
  1451718012,
  -559278141,
  -1,
  916017778,
  -1410364760,
  1411715969,
  923812474,
  505081530,
  -1748474198,
  -628146150,
  -1686888639,
  -11526,
  367430862,
  1008062531,
  -1139277111,
  450510667,
  -1542911643,
  -16673669,
  -1084227585,
  -130177599,
  2123157521,
  -338552460,
  1667160697,
  -1675286486,
  2029827234,
  1686916889,
  -913,
  -1034735829,
  1961122296,
  1913820692,
  -908733963,
  -128142639,
  -180402478,
  -44261,
  379715095,
  1268568484,
  193902085,
  -1832515929,
  1864799863,
  1708449851,
  834596906,
  -1,
  -253462745,
  169259898,
  29489737,
  -322311234,
  -257686052,
  1503033816,
  -844453871,
  769405648,
  -1,
  -882682710,
  1196633376,
  -1925367598,
  -75131450,
  1314982015,
  -1625227967,
  -1457270321,
  202979914,
  -1375731713,
  2071925503,
  -365421385,
  -1517396947,
  -723640388,
  -346251478,
  -1333467338,
  -1208020541,
  1165754367,
  478163346,
  263327627,
  658056198,
  1599633616,
  1433489056,
  -1333354613,
  -2046864811,
  -1883701249,
  245996860,
  1694827494,
  -153416108,
  -176446652,
  -690576677,
  129830040,
  -1,
  917850817,
  45203905,
  -978816260,
  -1046267707,
  -275561155,
  1196575445,
  -601836591,
  497073637,
  -4145153,
  1395272510,
  1832482755,
  699956755,
  1527085649,
  1985911342,
  -151354814,
  -522190849,
  1995514531,
  1708665981,
  136419565,
  685633981,
  -1851936552,
  627349629,
  -997,
  1933264572,
  1566851075,
  -369905218,
  -1676496742,
  -1892076685,
  -1955750884,
  -261095425,
  -1647250194,
  -975879865,
  -1681817378,
  -1857821533,
  2088708035,
  -141452805,
  -32385,
  1051882077,
  91677753,
  2143793709,
  -844850786,
  -269878723,
  1041988100,
  -1,
  2089290484,
  1069234544,
  41885223
}; // weak


//----- (00421FA0) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ecx>)
{
  int *v3; // esi
  int *v4; // edi
  unsigned int v5; // ebp
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  unsigned int v11; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  bool v16; // zf
  int v17; // ebx
  int v18; // ett
  unsigned int v19; // eax
  unsigned int v20; // eax
  int v21; // eax
  bool v22; // cf
  int v23; // ebx
  int v24; // ebx
  int v25; // ett
  BOOL v26; // ecx
  bool v27; // cf
  int v28; // ebx
  int v29; // ett
  int v30; // ecx
  int v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ebx
  int v35; // ett
  bool v36; // zf
  int v37; // ebx
  int v38; // ett
  unsigned int v39; // ecx
  char *v40; // edx
  char v41; // al
  int v42; // eax
  bool v43; // cc
  int *v44; // esi
  char *v45; // edi
  int v46; // ecx
  char v47; // al
  unsigned __int8 v48; // al
  int v49; // eax
  int v50; // eax
  char v51; // t1
  unsigned __int8 v52; // bl
  char *v53; // edi
  int v54; // eax
  int *v55; // ebx
  int v56; // ebp
  char v57; // al
  char *v58; // ecx
  unsigned __int8 v59; // al
  int v60; // eax
  void (__cdecl *v61)(int *, int, int, int *); // ebp
  int *v62; // edi
  int v63[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v64; // [esp+2Ch] [ebp-80h] BYREF
  int v65; // [esp+30h] [ebp-7Ch] BYREF
  char *v66; // [esp+34h] [ebp-78h]
  int *v67; // [esp+38h] [ebp-74h]
  int v68; // [esp+3Ch] [ebp-70h]
  int v69; // [esp+40h] [ebp-6Ch]
  int v70; // [esp+44h] [ebp-68h]
  int v71; // [esp+48h] [ebp-64h]
  int *v72; // [esp+4Ch] [ebp-60h]
  int v73; // [esp+50h] [ebp-5Ch]
  int v74; // [esp+54h] [ebp-58h]
  int v75; // [esp+58h] [ebp-54h]
  int v76; // [esp+5Ch] [ebp-50h] BYREF

  v72 = &v76;
  v70 = a3;
  v69 = a2;
  v68 = a1;
  v3 = dword_415000;
  v4 = &dword_415000[-20480];
  v67 = &dword_415000[-20480];
  v5 = -1;
  while ( 1 )
  {
    v9 = *v3;
    v7 = (unsigned int)v3++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v3;
        v3 = (int *)((char *)v3 + 1);
        *(_BYTE *)v4 = v6;
        v4 = (int *)((char *)v4 + 1);
      }
      else
      {
        v11 = 1;
        while ( 1 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v3;
            v7 = (unsigned int)v3++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v11 += v12 + v11;
          v7 = __CFADD__(v13, v13);
          v16 = 2 * v13 == 0;
          v8 = 2 * v13;
          if ( v7 )
          {
            if ( !v16 )
              break;
            v17 = *v3;
            v7 = (unsigned int)v3++ < 0xFFFFFFFC;
            v18 = v7 + v17;
            v7 = __CFADD__(v7, v17) | __CFADD__(v17, v18);
            v8 = v17 + v18;
            if ( v7 )
              break;
          }
        }
        v7 = v11 < 3;
        v19 = v11 - 3;
        if ( !v7 )
        {
          v20 = v19 << 8;
          LOBYTE(v20) = *(_BYTE *)v3;
          v3 = (int *)((char *)v3 + 1);
          v21 = ~v20;
          if ( !v21 )
          {
            v44 = v67;
            v45 = (char *)(v67 + 0x2000);
            v46 = 75;
            while ( 1 )
            {
              v47 = *v45++;
              v48 = v47 + 24;
              while ( v48 <= 1u )
              {
                v49 = *(_DWORD *)v45;
                LOBYTE(v49) = BYTE1(*(_DWORD *)v45);
                BYTE1(v49) = *(_DWORD *)v45;
                v50 = __ROL4__(v49, 16);
                v51 = v50;
                LOBYTE(v50) = BYTE1(v50);
                BYTE1(v50) = v51;
                v52 = v45[4] + 24;
                *(_DWORD *)v45 = (char *)v44 + v50 - (_DWORD)v45;
                v45 += 5;
                v48 = v52;
                if ( !--v46 )
                {
                  v53 = (char *)(v44 + 30720);
LABEL_37:
                  v54 = *(_DWORD *)v53;
                  if ( *(_DWORD *)v53 )
                  {
                    v55 = (int *)((char *)v44 + *((_DWORD *)v53 + 1));
                    v53 += 8;
                    v56 = ((int (__cdecl *)(int, int, int, int, int, int *, int, int, int))v44[35472])(
                            (int)v44 + v54 + 141668,
                            v68,
                            v69,
                            v70,
                            v71,
                            v72,
                            v73,
                            v74,
                            v75);
                    while ( 1 )
                    {
                      v57 = *v53++;
                      if ( !v57 )
                        goto LABEL_37;
                      v58 = v53;
                      v66 = v53;
                      v59 = v57 - 1;
                      do
                      {
                        if ( !v58 )
                          break;
                        v16 = *v53++ == (char)v59;
                        --v58;
                      }
                      while ( !v16 );
                      v60 = ((int (__cdecl *)(int, char *))v44[35473])(v56, v66);
                      if ( !v60 )
                        break;
                      *v55++ = v60;
                    }
                    v54 = ((int (*)(void))v44[35477])();
                  }
                  v61 = (void (__cdecl *)(int *, int, int, int *))v44[35474];
                  v62 = v44 - 1024;
                  v64 = v54;
                  v61(v44 - 1024, 4096, 4, &v64);
                  *((_BYTE *)v62 + 511) &= ~0x80u;
                  *((_BYTE *)v62 + 551) &= ~0x80u;
                  v61(v44 - 1024, 4096, v63[0], v63);
                  do
                    v64 = 0;
                  while ( &v64 != &v65 - 32 );
                  JUMPOUT(0x413D70);
                }
              }
            }
          }
          v5 = v21;
        }
        v22 = __CFADD__(v8, v8);
        v23 = 2 * v8;
        if ( !v23 )
        {
          v24 = *v3;
          v7 = (unsigned int)v3++ < 0xFFFFFFFC;
          v25 = v7 + v24;
          v22 = __CFADD__(v7, v24) | __CFADD__(v24, v25);
          v23 = v24 + v25;
        }
        v26 = v22;
        v27 = __CFADD__(v23, v23);
        v8 = 2 * v23;
        if ( !v8 )
        {
          v28 = *v3;
          v7 = (unsigned int)v3++ < 0xFFFFFFFC;
          v29 = v7 + v28;
          v27 = __CFADD__(v7, v28) | __CFADD__(v28, v29);
          v8 = v28 + v29;
        }
        v30 = v26 + v27 + v26;
        if ( !v30 )
        {
          v31 = 1;
          while ( 1 )
          {
            v32 = __CFADD__(v8, v8);
            v33 = 2 * v8;
            if ( !v33 )
            {
              v34 = *v3;
              v7 = (unsigned int)v3++ < 0xFFFFFFFC;
              v35 = v7 + v34;
              v32 = __CFADD__(v7, v34) | __CFADD__(v34, v35);
              v33 = v34 + v35;
            }
            v31 += v32 + v31;
            v7 = __CFADD__(v33, v33);
            v36 = 2 * v33 == 0;
            v8 = 2 * v33;
            if ( v7 )
            {
              if ( !v36 )
                break;
              v37 = *v3;
              v7 = (unsigned int)v3++ < 0xFFFFFFFC;
              v38 = v7 + v37;
              v7 = __CFADD__(v7, v37) | __CFADD__(v37, v38);
              v8 = v37 + v38;
              if ( v7 )
                break;
            }
          }
          v30 = v31 + 2;
        }
        v39 = (v5 < 0xFFFFF300) + v30 + 1;
        v40 = (char *)v4 + v5;
        if ( v5 <= 0xFFFFFFFC )
        {
          do
          {
            v42 = *(_DWORD *)v40;
            v40 += 4;
            *v4++ = v42;
            v43 = v39 <= 4;
            v39 -= 4;
          }
          while ( !v43 );
          v4 = (int *)((char *)v4 + v39);
        }
        else
        {
          do
          {
            v41 = *v40++;
            *(_BYTE *)v4 = v41;
            v4 = (int *)((char *)v4 + 1);
            --v39;
          }
          while ( v39 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// 422128: positive sp value 50 has been found
// 422128: control flows out of bounds to 413D70
// 415000: using guessed type int dword_415000[512];
// 421FA0: using guessed type int anonymous_0[4];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
