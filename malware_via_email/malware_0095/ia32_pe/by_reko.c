// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00417042: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
Win32CrtStartup_entry:
	goto l00417042
l00417008:
l00417038:
	branch Test(NE,Z) l004170AA
l0041703A:
	branch Test(EQ,Z) l0041705C
l0041703C:
	esp = (struct Eq_3 *) ((char *) &esp->dw0000 + 0x01)
	SZO = cond(esp)
	Z = SZO
	edi = esp->dw0000
	di = (word16) edi
	esp = &esp->t0004
	esi = esp->dw0000
	esp = &esp->t0004
	ebp = esp->dw0000
	esp = &esp->t0004
	esp = &esp->t0004
	ebx = esp->dw0000
	esp = &esp->t0004
	edx = esp->dw0000
	esp = &esp->t0004
	ecx = esp->dw0000
	cl = (byte) ecx
	esp = &esp->t0004
	eax = esp->dw0000
	ax = (word16) eax
	esp = &esp->t0004
	branch Test(EQ,Z) l004170A1
l00417040:
	v32 = *eax & eax
	*eax = v32
	SZO = cond(*eax)
	C.u0 = false
l00417042:
	esp = fp
	eax.u0 = 0x00417000
	esp = fp - 0x04
	dwLoc04 = 0x00406BD1
	v5 = fs->ptr0000
	esp = fp - 0x08
	dwLoc08 = v5
	fs->ptr0000 = fp - 0x08
	esp = fp - 0x0A
	wLoc0A = SCZDOP
l0041705C:
	v7 = fp - 0x0A
	esp = fp - 0x0E
	dwLoc0E = 0x00417000
	esp = fp - 0x12
	dwLoc12 = ecx
	esp = fp - 22
	dwLoc16 = edx
	esp = fp - 0x1A
	dwLoc1A = ebx
	esp = fp - 0x1E
	dwLoc1E = fp - 0x0A
	esp = fp - 0x22
	dwLoc22 = ebp
	esp = fp - 0x26
	dwLoc26 = esi
	esp = fp - 0x2A
	dwLoc2A = edi
	esp = fp - 0x2E
	dwLoc2E = 0x00417000
	esp = fp - 0x32
	dwLoc32.u0 = 0x00400000
	edi.u0 = 0x00400000
	di = (word16) edi
	esi = globals->t417000
	di = di + 0x0780
	edi = DPB(edi, di, 0)
	SCZO = cond(di)
	esi = (word32) esi + 0x08 + 0x00417000
	globals->t417000 = edi
	ebx = *((word32) esi + 0x0010)
	esp = fp - 0x36
	dwLoc36 = 0x00417000
	esp = fp - 0x3A
	dwLoc3A = esi
	esp = fp - 0x3E
	dwLoc3E = 0x02
	esp = fp - 66
	dwLoc42 = 0x0880
	esp = fp - 0x46
	dwLoc46 = edi
	esp = fp - 0x4A
	dwLoc4A = 0x13
	esp = fp - 0x4E
	dwLoc4E = 0x06
	esp = fp - 0x52
	dwLoc52 = esi
	esp = fp - 0x56
	dwLoc56 = 0x04
	esp = fp - 0x5A
	dwLoc5A = 0x0880
	esp = fp - 0x5E
	dwLoc5E = edi
	ebx()
	esi = esi - 0x08
	SCZO = cond(esi)
	ecx = esp->dw0000
	cl = (byte) ecx
	esp = &esp->t0004
l00417093:
	branch ecx == 0x00 l00417095
l00417093_1:
	v16 = *esi
	*edi = v16
	esi = (word32) esi + 0x04
	edi = (word32) edi + 0x04
	di = (word16) edi
	ecx = ecx - 0x01
	cl = (byte) ecx
	goto l00417093
l00417095:
	ecx = esp->dw0000
	cl = (byte) ecx
	esp = &esp->t0004
	di = di + 0x68
	esi = (word32) esi + 0x00C2
	SCZO = cond(esi)
l004170A0:
	branch ecx == 0x00 l004170A2
l004170A0_1:
	v17 = *esi
	*edi = v17
	esi = (word32) esi + 0x04
	edi = (word32) edi + 0x04
	ecx = ecx - 0x01
	cl = (byte) ecx
	goto l004170A0
l004170A1:
	v36 = (word32) *esi
	*edi = v36
	esi = (word32) esi + 0x04
	edi = (word32) edi + 0x04
	di = (word16) edi
l004170A2:
	ebx()
	eax = esp->dw0000
	esp = &esp->t0004
	edx = (word32) eax + 440
l004170AA:
	v34 = (byte) ((word32) *((word32) ebx - 239464694) + cl)
	((word32) ebx - 239464694)->u0 = v34
	SCZO = cond(v34)
	SCZDOP = SCZO
	SZO = SCZO
	Z = SCZO
	C = SCZO
l004170AB:
	ecx = *edx
	cl = (byte) ecx
	C = __btr(ecx, 0x1F, out ecx)
	SCZDOP = C
	SCZO = C
l004170B0:
	branch Test(UGE,C) l004170C9
l004170B3:
	eax = esp->dw0000
	D = true
	esi = eax
	edi = eax
	esi = esi + Mem0[edx + 0x04:word32]
	edi = edi + Mem0[edx + 0x08:word32]
	di = (word16) edi
	SCZO = cond(edi)
l004170C1:
	branch ecx == 0x00 l004170C3
l004170C1_1:
	v20 = *esi
	*edi = v20
	esi = esi - 0x04
	edi = edi - 0x04
	di = (word16) edi
	ecx = ecx - 0x01
	cl = (byte) ecx
	goto l004170C1
l004170C3:
	edx = (word32) edx + 0x0C
	dh = SLICE(edx, byte, 8)
	dl = (byte) edx
	dx = (word16) edx
	SCZO = cond(edx)
	D = false
	goto l004170AB
l004170C9:
	edx = (word32) edx + 0x0010
	dh = SLICE(edx, byte, 8)
	dl = (byte) edx
	dx = (word16) edx
	ebx = *(edx - 0x0C)
	bl = (byte) ebx
	SZO = cond(ebx & ebx)
	Z = SZO
	C.u0 = false
	branch Test(EQ,Z) l004170AB
l004170D3:
	eax = esp->dw0000
	edi = *(edx - 0x08)
	edi = edi + eax
	di = (word16) edi
	SCZO = cond(edi)
	esp = esp - 0x04
	esp->dw0000 = (word32) edx
	esi = ecx + eax
	SCZO = cond(ebx - 0x00010000)
	C = SCZO
	branch Test(UGE,C) l0041710E
	goto l00417100
l004170E1:
	eax = esp->dw0000
	esp = &esp->t0004
	eax = esp->dw0000
	esp = &esp->t0004
	eax = esp->dw0000
	esp = &esp->t0004
	edx = esp->dw0000
	dh = SLICE(edx, byte, 8)
	dl = (byte) edx
	dx = (word16) edx
	esp = &esp->t0004
	branch Test(EQ,Z) l004170AB
l004170E7:
	eax = esp->t0004
	ax = (word16) eax
	esp = (struct Eq_3 *) ((char *) &esp->t0008 + 0x0022)
	edx = (word32) eax + 0x0034
	dh = SLICE(edx, byte, 8)
	dl = (byte) edx
	dx = (word16) edx
	esp = &esp->t0008
	esp = esp - 0x04
	esp->dw0000 = (word32) 0x10
	ebx = eax
	ax = ax + 0x2D
	eax = DPB(eax, ax, 0)
	SCZO = cond(ax)
	esp = esp - 0x04
	esp->dw0000 = (word32) eax
	esp = esp - 0x04
	esp->dw0000 = (word32) edx
	esp = esp - 0x04
	esp->dw0000 = (word32) 0x00
	ebx = *ebx
	(*ebx)()
	esp = esp - 0x04
	esp->dw0000 = (word32) ~0x00
	(*((word32) ebx + 0x0C))()
	ebp = ebp + 0x01
	esp = esp - 0x04
	esp->dw0000 = (word32) edx
	esp = esp - 0x04
	esp->dw0000 = (word32) edx
	edi = edi - 0x01
	esp = esp - 0x04
	esp->dw0000 = (word32) edx
	v30 = *eax & eax
	*eax = v30
	SZO = cond(*eax)
	C.u0 = false
	ebx = (word32) ebx + 0x01
	bl = (byte) ebx
	SZO = cond(ebx)
	SCZDOP = SZO
	SCZO = SZO
	Z = SZO
	__outdw(dx, eax)
	esi = (word32) esi + 0x04
	branch Test(ULT,C) l004170AA
	goto l00417038
l004170F8:
l00417100:
	esp = esp - 0x04
	esp->dw0000 = (word32) ~0x3F9F
	esp = esp - 0x04
	esp->dw0000 = (word32) ~0x039F
	dh = 0x05
	edx = DPB(edx, dh, 8)
	dx = DPB(dx, dh, 8)
	goto l00417130
l0041710E:
	SCZO = cond(ebx - 0x00040000)
	C = SCZO
	branch Test(UGE,C) l00417124
l00417116:
	esp = esp - 0x04
	esp->dw0000 = (word32) ~0x7E7F
	esp = esp - 0x04
	esp->dw0000 = (word32) ~0x067F
	dh = 0x07
	edx = DPB(edx, dh, 8)
	dx = DPB(dx, dh, 8)
	goto l00417130
l00417124:
	esp = esp - 0x04
	esp->dw0000 = (word32) ~0x7CFF
	esp = esp - 0x04
	esp->dw0000 = (word32) ~0x04FF
	dh = 0x08
	edx = DPB(edx, dh, 8)
	dx = DPB(dx, dh, 8)
l00417130:
	esp = esp - 0x04
	esp->dw0000 = (word32) 0x00
	dl = 0x00
	edx = DPB(edx, dl, 0)
	dx = DPB(dx, dl, 0)
	ebx = ebx - 0x01
	bl = (byte) ebx
	v25 = *esi
	*edi = v25
	esi = (word32) esi + 0x01
	edi = (word32) edi + 0x01
	di = (word16) edi
	ecx.u0 = 0x00
	cl = (byte) ecx
	SZO = cond(0x00)
	C.u0 = false
l00417138:
	SCZO = cond(ebx - 0x00)
	SCZDOP = SCZO
	SZO = SCZO
	Z = SCZO
	C = SCZO
	branch Test(LE,SZO) l004170E1
l0041713D:
	C = fn004170EC(dl, esi, out dl, out esi)
	branch Test(ULT,C) l0041715B
l00417144:
	v26 = *esi
	*edi = v26
	esi = (word32) esi + 0x01
	edi = (word32) edi + 0x01
	di = (word16) edi
	v28 = *(edi - 0x01) ^ bl
	*(edi - 0x01) = v28
	SZO = cond(*(edi - 0x01))
	C.u0 = false
	ebx = ebx - 0x01
	bl = (byte) ebx
	SZO = cond(ebx)
	goto l00417138
l0041715B:
	ebp = 0x00
	SZO = cond(0x00)
	C.u0 = false
	ecx = fn0041714B(ecx, dl, esi, out dl, out esi)
	ecx = ecx - 0x03
	cl = (byte) ecx
	SCZO = cond(ecx)
	C = SCZO
	branch Test(UGE,C) l0041716D
l00417167:
	eax = esp->dw0000
	ax = (word16) eax
	ecx.u0 = (byte) ecx.u0 + 0x01
	cl = (byte) ecx
	SZO = cond(ecx)
	goto l00417190
l0041716D:
	eax = ecx
	ax = (word16) eax
	ecx = (word32) dh
	cl = (byte) ecx
l00417172:
	C = fn004170EC(dl, esi, out dl, out esi)
	eax = eax + eax + C
	ax = (word16) eax
	SCZO = cond(eax)
	ecx = ecx - 0x01
	cl = (byte) ecx
	SZO = cond(ecx)
	Z = SZO
	branch Test(NE,Z) l00417172
l0041717C:
	eax = eax ^ ~0x00
	ax = (word16) eax
	SCZO = cond(eax - esp->t0004)
	C = SCZO
	ebp = (word32) ((byte) C.u0 + (ebp + 0x01))
	SCZO = cond(eax - esp->t0008)
	C = SCZO
	ebp = (word32) ((byte) C.u0 + (ebp + 0x00))
	SCZO = cond(ebp)
	esp->dw0000 = (word32) eax
l00417190:
	C = fn004170EC(dl, esi, out dl, out esi)
	ecx = ecx + ecx + C
	SCZO = cond(ecx)
	C = fn004170EC(dl, esi, out dl, out esi)
	ecx = ecx + ecx + C
	cl = (byte) ecx
	SCZO = cond(ecx)
	Z = SCZO
	branch Test(NE,Z) l004171A8
l004171A0:
	ecx = fn0041714B(ecx, dl, esi, out dl, out esi)
	ecx = (word32) ecx + 0x02
	cl = (byte) ecx
	SCZO = cond(ecx)
l004171A8:
	ecx = (word32) ecx + ebp
	cl = (byte) ecx
	esp = esp - 0x04
	esp->dw0000 = (word32) esi
	ebx = ebx - ecx
	bl = (byte) ebx
	SCZO = cond(ebx)
	esi = eax + edi
l004171B0:
	branch ecx == 0x00 l004171B2
l004171B0_1:
	v35 = (byte) *esi
	edi->u0 = v35
	esi = esi + 0x01
	edi = edi + 0x01
	di = (word16) edi
	ecx = ecx - 0x01
	cl = (byte) ecx
	goto l004171B0
l004171B2:
	esi = esp->dw0000
	esp = &esp->t0004
	goto l00417138
Win32CrtStartup_exit:
}

// 004170EC: FlagGroup byte fn004170EC(Register bui8 dl, Register Eq_5 esi, Register out Eq_254 dlOut, Register out (ptr Eq_255) esiOut)
byte fn004170EC(bui8 dl, Eq_5 esi, Eq_254 & dlOut, Eq_255 * & esiOut)
{
	*esiOut = esi;
	byte dl_3;
	*dlOut = dl * 0x02;
	byte C_14 = cond(dl * 0x02);
	if (dl * 0x02 == 0x00)
	{
		bool dl_22 = (byte) (*esi * 0x02) + (esi < ~0x00);
		*dlOut = dl_22;
		word32 esi_19;
		*esiOut = esi - ~0x00;
		C_14 = cond(dl_22);
	}
	return C_14;
}

// 0041714B: Register Eq_5 fn0041714B(Register Eq_5 ecx, Register bui8 dl, Register Eq_5 esi, Register out Eq_270 dlOut, Register out Eq_271 esiOut)
Eq_5 fn0041714B(Eq_5 ecx, bui8 dl, Eq_5 esi, Eq_270 & dlOut, Eq_271 & esiOut)
{
	Eq_5 ecx_13 = (word32) ecx + 0x01;
	do
	{
		bui8 dl_10;
		Eq_5 esi_11;
		ecx_13 = ecx_13 * 0x02 + fn004170EC(dl, esi, out dl_10, out esi_11);
	} while (fn004170EC(dl_10, esi_11, out dl, out esi));
	return ecx_13;
}

