/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// int __usercall start@<eax>(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<edi>, int a5@<esi>);
// int __usercall sub_401D09@<eax>(bool a1@<cf>, char a2@<al>, int a3@<edx>, char a4@<cl>, int a5@<edi>, int a6@<esi>);


//----- (0040102B) --------------------------------------------------------
int __usercall start@<eax>(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<edi>, int a5@<esi>)
{
  int v5; // edx
  int result; // eax
  int v7; // edi
  int v8; // ecx
  __int16 v9; // bx
  int v10; // edi
  int v11; // ecx
  int v12; // esi
  int v13; // ecx
  int v14; // edi
  int v15; // esi
  bool v16; // cf
  int v17; // ecx
  int v18; // edi
  int v19; // esi
  int v20; // edx
  int v21; // ecx
  int v22; // edx
  int v23; // edx
  int v24; // edi
  int v25; // ebx
  int v26; // ecx
  int v27; // eax
  int v28; // ebx
  int v29; // ebx
  int v30; // esi
  int v31; // [esp+0h] [ebp-4h]

  v10 = a1 + a4;
  v11 = a5 | a2 ^ (a3 + 1);
  v12 = v10 + a1 + 1;
  v25 = ((v10 | (a2 + 1)) ^ ((v11 | a1) + 1)) - 1;
  v18 = -1 - (a1 + 1);
  v19 = v25 + v12;
  ++v25;
  v20 = (v18 ^ (v11 + 1)) - 1;
  v21 = v20 | v11;
  v22 = v18 | v20;
  BYTE1(v21) |= v22;
  BYTE1(v25) = -BYTE1(v25);
  v23 = v22 - v25;
  BYTE1(v21) ^= v21;
  v29 = v18 | v25;
  v30 = v29 ^ (a1 + v19);
  BYTE1(v29) = a1 + v21;
  LOBYTE(v21) = v21 - 1;
  LOBYTE(v29) = v29 + 1;
  ++v23;
  ++v29;
  BYTE1(v23) |= BYTE1(v29);
  LOBYTE(v29) = v29 - 20;
  --v23;
  v16 = (unsigned __int8)v29 < 0xC8u;
  LOBYTE(v29) = v29 + 45;
  v28 = (v21 + v30 - a1) ^ v29;
  BYTE1(v23) = BYTE1(v23) - (v16 + 49) - 120;
  __asm { fnclex }
  LOBYTE(v23) = BYTE1(v23) | v23;
  BYTE1(v23) -= 59;
  LOBYTE(v28) = BYTE1(v28) + v28 + 1;
  v24 = v23 | v18;
  v26 = v28 + 2;
  LOBYTE(v23) = v23 - BYTE1(v28) - 1;
  v27 = v23 + a1;
  HIWORD(v31) = HIWORD(v27);
  BYTE1(v26) = v28 + 2;
  LOBYTE(v27) = 73;
  v13 = v27 + v26;
  v14 = v23 | v24;
  __asm { smsw    [esp+4+var_4] }
  BYTE1(v28) = v23 + (((unsigned __int16)(v28 + 2) >> 8) ^ BYTE1(v28)) - 73;
  BYTE1(v23) = v23;
  v15 = v23;
  v5 = v27 ^ v23;
  v9 = v28 - 1;
  LOBYTE(v13) = BYTE1(v31) | ~(_BYTE)v13;
  BYTE1(v13) |= v31;
  LOBYTE(v5) = v5 + 1;
  BYTE1(v5) = HIBYTE(v9) ^ v31;
  result = ~v31;
  v8 = v13 - 1;
  BYTE1(v8) ^= v9;
  v7 = v14 - v5;
  LOBYTE(v8) = ~(_BYTE)v31 ^ v8;
  HIBYTE(v9) = ~HIBYTE(v9);
  if ( (~(_BYTE)v31 & 8) != 0 )
  {
    BYTE1(v8) -= ((unsigned __int8)v9 < 0x4Du) + 47;
    LOBYTE(v9) = 77 - v9;
    HIBYTE(v9) += v31 + 1;
    v17 = v7 | v8;
    v16 = (unsigned __int8)v9 < HIBYTE(v9);
    LOBYTE(v9) = v9 - HIBYTE(v9);
    BYTE1(result) = -BYTE1(result);
    BYTE1(v17) = BYTE1(result) + BYTE1(v17) + 1 - (v16 + 16);
    LOWORD(v5) = __PAIR16__(BYTE1(v5), BYTE1(result)) + 256;
    v16 = __CFADD__(BYTE1(v5), -105);
    BYTE1(v5) -= 105;
    __outbyte(
      0xE4u,
      sub_401D09(v16, result, v5, (BYTE1(v15) ^ ((unsigned __int16)(v7 + v9) >> 8) ^ v17) - 2, v17 ^ (v7 + 1), v15));
    JUMPOUT(0xC1F3F3D3);
  }
  return result;
}
// 401163: control flows out of bounds to C1F3F3D3

//----- (00401D09) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_401D09@<eax>(bool a1@<cf>, char a2@<al>, int a3@<edx>, char a4@<cl>, int a5@<edi>, int a6@<esi>)
{
  int v6; // edi
  int v7; // ecx
  int v8; // edi
  int v9; // eax
  int v10; // eax
  int v11; // ecx
  int v12; // ecx
  int v13; // eax
  unsigned int v14; // eax
  int v15; // eax
  int v17; // edi
  unsigned int v18; // esi
  int v19; // edi
  int v20; // edx
  unsigned int v21; // ecx
  int v22; // edi
  unsigned int v23; // ebx
  int v24; // edx
  int v25; // ecx
  unsigned int v26; // ecx
  int v27; // eax
  int v28; // ecx
  unsigned int v29; // ecx
  int v30; // edi
  int v31; // eax
  int v32; // ecx
  unsigned int v33; // eax
  int v34; // [esp-8h] [ebp-8h]
  int v35; // [esp-8h] [ebp-8h]

  BYTE1(a3) = a4 - (a2 - ((BYTE1(a3) < (unsigned __int8)(a1 - 110)) + 114));
  v30 = a6 ^ a5;
  LOBYTE(a3) = BYTE1(a3);
  v31 = a3;
  LOBYTE(a3) = BYTE1(v34) | BYTE1(a3);
  v12 = a3;
  v13 = (v30 | (v31 + 1)) - 1;
  BYTE1(v12) = v34 - 105;
  v35 = v34 + 1943;
  LOBYTE(a3) = v13 + a3;
  LOBYTE(v13) = -(char)v13;
  BYTE1(v13) = BYTE1(v13) - BYTE1(v35) - ((BYTE1(v13) < BYTE1(v35)) + 12) + 0x80;
  a1 = __CFADD__(v13, v12);
  v21 = v13 + v12;
  LOBYTE(a3) = a3 - (a1 - 23);
  v22 = v21 ^ v30;
  v23 = v35 - 1943;
  v24 = a3 - 1;
  BYTE1(v21) = 47 - (BYTE1(v21) - (v35 + 105));
  LOBYTE(v24) = v24 + 39;
  v18 = 2980;
  v19 = (v35 - 1943) | v22;
  BYTE1(v24) = 14;
  v20 = v21 | v24;
  BYTE1(v21) ^= v21;
  do
  {
    BYTE1(v21) -= v23;
    ++v20;
    a1 = __CFADD__((_BYTE)v21, BYTE1(v20) + 1);
    BYTE1(v20) = v19;
    LOBYTE(v21) = 24;
    v26 = v21 - 1;
    BYTE1(v26) = ~(a1 + BYTE1(v26) - 22);
    v27 = v19 - 1;
    a1 = __CFADD__(BYTE1(v27), 38);
    BYTE1(v27) += 38;
    BYTE1(v26) -= a1 + 3;
    v10 = v19 | v27;
    LOBYTE(v26) = BYTE1(v26) ^ (v26 - v23);
    v11 = v18 ^ v26;
    ++BYTE1(v11);
    BYTE1(v10) += 86;
    LOBYTE(v10) = -(BYTE1(v23) ^ v10);
    v6 = v19 - 1;
    --v10;
    v7 = v6 + v11;
    BYTE1(v10) = BYTE1(v20) ^ (BYTE1(v10) + 98);
    LOBYTE(v10) = v10 - v7;
    v8 = v10 | v6;
    BYTE1(v7) = ~BYTE1(v7);
    LOBYTE(v20) = __ROL1__(*(_BYTE *)v23 + 35, 19);
    v28 = v20 | (v8 + v7);
    LOBYTE(v20) = v20 - 40;
    BYTE1(v28) = 89;
    v29 = v18 + v28;
    LOBYTE(v29) = v29 - 1;
    BYTE1(v20) = v20;
    v17 = v23 | v8;
    *(_BYTE *)v23 = v20;
    BYTE1(v29) = BYTE1(v29) - v29 + 1;
    v25 = v20 + v29 - v23;
    BYTE1(v25) ^= v20;
    ++v23;
    v32 = v17 + v25 + 1;
    v33 = v32 - v18;
    LOBYTE(v32) = -(char)v32;
    --v18;
    BYTE1(v32) = ~BYTE1(v32);
    v14 = v33 - v32;
    LOBYTE(v14) = BYTE1(v18);
    BYTE1(v14) = BYTE1(v14) - ((unsigned __int16)(v32 + 1) >> 8) - 104;
    v9 = v23 | v14;
    v21 = v18 - 849076366;
    BYTE1(v9) = v23 - ((v18 < 0x329BE08E) - 54);
    v15 = v9 + 1;
    v19 = (v18 ^ (v17 - 1)) - 1;
    LOBYTE(v15) = v20;
  }
  while ( v18 );
  BYTE1(v15) = -91;
  LOWORD(v21) = 11272;
  return v21 | v15;
}
// 401EEE: positive sp value 8 has been found
// 401DA1: variable 'v34' is possibly undefined

// nfuncs=2 queued=2 decompiled=2 lumina nreq=0 worse=0 better=0
// ALL OK, 2 function(s) have been successfully decompiled
