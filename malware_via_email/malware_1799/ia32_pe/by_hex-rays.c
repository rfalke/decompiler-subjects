/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall sub_40101F(int@<edx>, int _EDI@<edi>);
_DWORD sub_4010F4(); // weak
// void __usercall sub_401187(unsigned int@<eax>, int@<ecx>, int@<edi>, int@<esi>);
_DWORD sub_4011E5(); // weak
void sub_40123A();
// void __usercall start(int _EAX@<eax>, int@<ecx>, int@<ebx>, int@<esi>);
// int __userpurge sub_4012A2@<eax>(int@<eax>, int@<ecx>, int@<ebx>, int@<esi>, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);
// void __usercall sub_40135E(int@<ebx>, int@<edi>);
// void __usercall sub_401501(char@<ah>, int@<ecx>, int@<ebx>, __int32@<esi>, char@<cf>, int@<edi>);
void sub_4021F2();
// int __usercall sub_402268@<eax>(void *@<ebp>, int _ESI@<esi>);
_DWORD sub_40228A(); // weak
// void __usercall sub_402325(int@<eax>, int@<edx>, int@<ecx>, __int16@<bx>, int@<ebp>, int@<esi>);
void sub_40239B();
// void __usercall sub_40243F(int@<eax>, double@<st0>);
void sub_40245C();
// int __usercall sub_4026D5@<eax>(int@<eax>);
// void __usercall sub_402734(void *@<ebp>, int@<esi>);
// int __usercall sub_4027AE@<eax>(int@<ebx>, int@<ebp>, int@<esi>);
void sub_40281E();
void sub_40283E();
// void __usercall sub_40285F(int@<eax>, int@<edx>, char@<cl>, __int16@<bx>, int@<ebp>, int@<esi>);
void sub_4028C7();
void sub_402906();
void sub_4029F4();
void sub_402A13();
double sub_402A6F(); // weak
// int __usercall sub_402B09@<eax>(int@<ebx>, int@<edi>);
_DWORD sub_402B39(); // weak
void sub_402BC6();
// void __usercall __noreturn sub_402C1A(char@<al>, float *@<edx>, int@<ecx>, int@<ebx>, int@<edi>, double@<st0>);
void sub_402C4D();
_DWORD sub_402CE7(); // weak
// void __usercall sub_402D29(int (*)(void)@<eax>, char@<bl>, int *@<edi>);
// void __usercall sub_402E26(__int32@<edi>);
// void __usercall __noreturn sub_402E79(int@<ebx>, int@<edi>, float *@<esi>, double@<st0>);
// void __userpurge sub_402F4A(int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_40139C; // weak
_UNKNOWN loc_402474; // weak
_UNKNOWN loc_40251D; // weak
_UNKNOWN sub_40253A; // weak
_UNKNOWN loc_402AE9; // weak
_UNKNOWN loc_402EBA; // weak


//----- (0040101F) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40101F(int a1@<edx>, int _EDI@<edi>)
{
  if ( a1 + 1 < 0 == __OFADD__(1, a1) )
  {
    __asm { repne lea edi, [edi] }
    if ( a1 + 1 < 0 != __OFADD__(1, a1) )
      JUMPOUT(0x401170);
  }
  JUMPOUT(0x40111E);
}
// 40104B: positive sp value 8 has been found
// 40104F: control flows out of bounds to 401170
// 40102E: control flows out of bounds to 40111E

//----- (004010F4) --------------------------------------------------------
#error "401110: cannot convert to microcode (funcsize=11)"

//----- (00401187) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_401187(unsigned int a1@<eax>, int a2@<ecx>, int a3@<edi>, int a4@<esi>)
{
  int v4; // edx
  unsigned int v5; // ecx
  bool v6; // cc
  unsigned int v7; // ecx

  v5 = (a3 | a2) + 1;
  v6 = v5 <= a1;
  v7 = v5 - a1;
  if ( !v6 && v6 )
    JUMPOUT(0x4011B0);
  v4 = v7 - a1 + a4;
  if ( !__CFADD__(v4, v4) && __CFADD__(v4, v4) )
    JUMPOUT(0x4010F3);
  JUMPOUT(0x401042);
}
// 401004: positive sp value 4 has been found
// 4011AE: control flows out of bounds to 4011B0
// 4010F1: control flows out of bounds to 4010F3
// 4010E0: control flows out of bounds to 401042

//----- (004011E5) --------------------------------------------------------
#error "40132F: cannot convert to microcode (funcsize=122)"

//----- (0040123A) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_40123A()
{
  void *v0; // [esp+20h] [ebp-4h]
  void *retaddr; // [esp+24h] [ebp+0h]

  *(&retaddr - 10) = v0;
  JUMPOUT(0x401240);
}
// 40123E: positive sp value 4 has been found
// 40123E: control flows out of bounds to 401240

//----- (0040125D) --------------------------------------------------------
void __usercall start(int _EAX@<eax>, int a2@<ecx>, int a3@<ebx>, int a4@<esi>)
{
  int v4; // ebx
  int v5; // ecx
  int v6; // esi
  int v8; // ebx
  int v9; // ecx
  bool v10; // zf
  int v11; // ebx

  v8 = a4 ^ a3;
  v9 = a4 ^ a2;
  v10 = v9 + v8 == 0;
  v11 = v9 + v8;
  if ( !v11 || !v10 )
  {
    v4 = v9 ^ v11;
    v5 = _EAX | v9;
    v6 = v5 + v5 - v4;
    if ( !__SETP__(v6, 0) && __SETP__(v5 + v5 - v4, 0) )
    {
      __asm { aam     2Fh ; '/' }
      if ( !((v6 + 1 < 0) ^ __OFADD__(1, v6) | (v6 == -1)) )
      {
        if ( (v6 + 1 < 0) ^ __OFADD__(1, v6) | (v6 == -1) )
          JUMPOUT(0xA3F77C63);
      }
      JUMPOUT(0x40142E);
    }
    JUMPOUT(0x401317);
  }
  JUMPOUT(0x4012FD);
}
// 401283: control flows out of bounds to 4012FD
// 4010C6: control flows out of bounds to A3F77C63
// 401093: control flows out of bounds to 401317
// 4010B5: control flows out of bounds to 40142E

//----- (004012A2) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
int __userpurge sub_4012A2@<eax>(
        int a1@<eax>,
        int a2@<ecx>,
        int a3@<ebx>,
        int a4@<esi>,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  int v64; // ebx
  unsigned __int64 v65; // rax
  int v66; // ecx
  void *retaddr[2]; // [esp+0h] [ebp+0h]

  v64 = (a1 ^ ((a4 ^ a3) - 1)) - 1 - a2;
  LODWORD(v65) = ((int (*)(void))((char *)&loc_40139C + 4))();
  if ( v66 != 1 )
    JUMPOUT(0x40131B);
  (*(void (__fastcall **)(_DWORD, _DWORD))(v64 - 117))(0, v65 % *(unsigned int *)v65);
  return MK_FP(retaddr[0], retaddr[0])();
}
// 4012A6: positive sp value 4 has been found
// 4012B8: control flows out of bounds to 40131B
// 4012BF: bad sp value at call
// 4012B8: variable 'v66' is possibly undefined
// 4012BA: variable 'v65' is possibly undefined
// 4012A2: too many input arguments, some ignored

//----- (0040135E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40135E(int a1@<ebx>, int a2@<edi>)
{
  int v2; // edi
  int v3; // [esp+1Ch] [ebp-10h]
  int v4; // [esp+20h] [ebp-Ch]

  *(&v4 - 12) = v3;
  v2 = v4 ^ (a2 - a1);
  sub_40123A();
  *(int *)(5 * v2 - 634684227) >>= 14;
  JUMPOUT(0x4012EF);
}
// 40139C: positive sp value 10 has been found
// 40139C: control flows out of bounds to 4013A2
// 4014B9: control flows out of bounds to 4014BB
// 4014A7: control flows out of bounds to 4012EF
// 4014B2: conditional instruction was optimized away because ebx.4!=0

//----- (00401501) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_401501(char a1@<ah>, int a2@<ecx>, int a3@<ebx>, __int32 a4@<esi>, char a5@<cf>, int a6@<edi>)
{
  int v6; // ebx
  char v7; // ch
  char v8; // bh
  int v9; // ebx
  __int32 v10; // [esp-8h] [ebp-8h] BYREF

  _InterlockedExchange(&v10, a4);
  LOBYTE(a2) = a5 + a2 - 99;
  v9 = a3 + 2;
  LOBYTE(v9) = BYTE1(v9);
  BYTE1(a2) -= a1;
  BYTE1(v9) ^= BYTE1(a2);
  v6 = a2 ^ v9;
  v7 = -BYTE1(a2);
  if ( __OFSUB__(v7, 1) || !__OFSUB__(v7, 1) )
  {
    v8 = -(v7 ^ BYTE1(v6));
    if ( !__SETP__(v8, 0) && __SETP__(v8, 0) )
      JUMPOUT(0x4014E9);
    JUMPOUT(0x401224);
  }
  sub_40135E(v6, a6);
}
// 401358: positive sp value 8 has been found
// 4014E4: control flows out of bounds to 4014E9
// 4014D6: control flows out of bounds to 401224

//----- (004021F2) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4021F2()
{
  int v0; // [esp-41F9h] [ebp-41F9h]
  int v1; // [esp-41F5h] [ebp-41F5h]
  int v2; // [esp-41F1h] [ebp-41F1h]
  int v3; // [esp-41EDh] [ebp-41EDh]
  int v4; // [esp-41E9h] [ebp-41E9h]
  int v5; // [esp-41E5h] [ebp-41E5h]
  int v6; // [esp-41E1h] [ebp-41E1h]
  int v7; // [esp-41DDh] [ebp-41DDh]
  int v8; // [esp-41D9h] [ebp-41D9h]
  int v9; // [esp-41D5h] [ebp-41D5h]
  int v10; // [esp-41D1h] [ebp-41D1h]
  int v11; // [esp-41CDh] [ebp-41CDh]
  int v12; // [esp-41C9h] [ebp-41C9h]
  int v13; // [esp-41C5h] [ebp-41C5h]
  int v14; // [esp-41C1h] [ebp-41C1h]
  int v15; // [esp-41BDh] [ebp-41BDh]
  int v16; // [esp-41B9h] [ebp-41B9h]
  int v17; // [esp-41B5h] [ebp-41B5h]
  int v18; // [esp-41B1h] [ebp-41B1h]
  int v19; // [esp-41ADh] [ebp-41ADh]
  int v20; // [esp-41A9h] [ebp-41A9h]
  int v21; // [esp-41A5h] [ebp-41A5h]
  int v22; // [esp-41A1h] [ebp-41A1h]
  int v23; // [esp-419Dh] [ebp-419Dh]
  int v24; // [esp-4199h] [ebp-4199h]
  int v25; // [esp-4195h] [ebp-4195h]
  int v26; // [esp-4191h] [ebp-4191h]
  int v27; // [esp-418Dh] [ebp-418Dh]
  int v28; // [esp-4189h] [ebp-4189h]
  int v29; // [esp-4185h] [ebp-4185h]
  int v30; // [esp-4181h] [ebp-4181h]
  int v31; // [esp-417Dh] [ebp-417Dh]
  int v32; // [esp-4179h] [ebp-4179h]
  int v33; // [esp-4175h] [ebp-4175h]
  int v34; // [esp-4171h] [ebp-4171h]
  int v35; // [esp-416Dh] [ebp-416Dh]
  int v36; // [esp-4169h] [ebp-4169h]
  int v37; // [esp-4165h] [ebp-4165h]
  int v38; // [esp-4161h] [ebp-4161h]
  int v39; // [esp-415Dh] [ebp-415Dh]
  int v40; // [esp-4159h] [ebp-4159h]
  int v41; // [esp-4155h] [ebp-4155h]
  int v42; // [esp-4151h] [ebp-4151h]
  int v43; // [esp-414Dh] [ebp-414Dh]
  int v44; // [esp-4149h] [ebp-4149h]
  int v45; // [esp-4145h] [ebp-4145h]
  int v46; // [esp-4141h] [ebp-4141h]
  int v47; // [esp-413Dh] [ebp-413Dh]
  int v48; // [esp-4139h] [ebp-4139h]
  int v49; // [esp-4135h] [ebp-4135h]
  int v50; // [esp-4131h] [ebp-4131h]
  int v51; // [esp-412Dh] [ebp-412Dh]
  int v52; // [esp-4129h] [ebp-4129h]
  int v53; // [esp-4125h] [ebp-4125h]
  int v54; // [esp-4121h] [ebp-4121h]
  int v55; // [esp-411Dh] [ebp-411Dh]
  int v56; // [esp-4119h] [ebp-4119h]
  int v57; // [esp-4115h] [ebp-4115h]
  int v58; // [esp-4111h] [ebp-4111h]
  int v59; // [esp-410Dh] [ebp-410Dh]
  int v60; // [esp-4109h] [ebp-4109h]
  int v61; // [esp-4105h] [ebp-4105h]
  int v62; // [esp-4101h] [ebp-4101h]

  sub_402F4A(
    v0,
    v1,
    v2,
    v3,
    v4,
    v5,
    v6,
    v7,
    v8,
    v9,
    v10,
    v11,
    v12,
    v13,
    v14,
    v15,
    v16,
    v17,
    v18,
    v19,
    v20,
    v21,
    v22,
    v23,
    v24,
    v25,
    v26,
    v27,
    v28,
    v29,
    v30,
    v31,
    v32,
    v33,
    v34,
    v35,
    v36,
    v37,
    v38,
    v39,
    v40,
    v41,
    v42,
    v43,
    v44,
    v45,
    v46,
    v47,
    v48,
    v49,
    v50,
    v51,
    v52,
    v53,
    v54,
    v55,
    v56,
    v57,
    v58,
    v59,
    v60,
    v61,
    v62);
  JUMPOUT(0x402212);
}
// 40220B: positive sp value 41FD has been found
// 40220B: control flows out of bounds to 402212
// 402206: variable 'v0' is possibly undefined
// 402206: variable 'v1' is possibly undefined
// 402206: variable 'v2' is possibly undefined
// 402206: variable 'v3' is possibly undefined
// 402206: variable 'v4' is possibly undefined
// 402206: variable 'v5' is possibly undefined
// 402206: variable 'v6' is possibly undefined
// 402206: variable 'v7' is possibly undefined
// 402206: variable 'v8' is possibly undefined
// 402206: variable 'v9' is possibly undefined
// 402206: variable 'v10' is possibly undefined
// 402206: variable 'v11' is possibly undefined
// 402206: variable 'v12' is possibly undefined
// 402206: variable 'v13' is possibly undefined
// 402206: variable 'v14' is possibly undefined
// 402206: variable 'v15' is possibly undefined
// 402206: variable 'v16' is possibly undefined
// 402206: variable 'v17' is possibly undefined
// 402206: variable 'v18' is possibly undefined
// 402206: variable 'v19' is possibly undefined
// 402206: variable 'v20' is possibly undefined
// 402206: variable 'v21' is possibly undefined
// 402206: variable 'v22' is possibly undefined
// 402206: variable 'v23' is possibly undefined
// 402206: variable 'v24' is possibly undefined
// 402206: variable 'v25' is possibly undefined
// 402206: variable 'v26' is possibly undefined
// 402206: variable 'v27' is possibly undefined
// 402206: variable 'v28' is possibly undefined
// 402206: variable 'v29' is possibly undefined
// 402206: variable 'v30' is possibly undefined
// 402206: variable 'v31' is possibly undefined
// 402206: variable 'v32' is possibly undefined
// 402206: variable 'v33' is possibly undefined
// 402206: variable 'v34' is possibly undefined
// 402206: variable 'v35' is possibly undefined
// 402206: variable 'v36' is possibly undefined
// 402206: variable 'v37' is possibly undefined
// 402206: variable 'v38' is possibly undefined
// 402206: variable 'v39' is possibly undefined
// 402206: variable 'v40' is possibly undefined
// 402206: variable 'v41' is possibly undefined
// 402206: variable 'v42' is possibly undefined
// 402206: variable 'v43' is possibly undefined
// 402206: variable 'v44' is possibly undefined
// 402206: variable 'v45' is possibly undefined
// 402206: variable 'v46' is possibly undefined
// 402206: variable 'v47' is possibly undefined
// 402206: variable 'v48' is possibly undefined
// 402206: variable 'v49' is possibly undefined
// 402206: variable 'v50' is possibly undefined
// 402206: variable 'v51' is possibly undefined
// 402206: variable 'v52' is possibly undefined
// 402206: variable 'v53' is possibly undefined
// 402206: variable 'v54' is possibly undefined
// 402206: variable 'v55' is possibly undefined
// 402206: variable 'v56' is possibly undefined
// 402206: variable 'v57' is possibly undefined
// 402206: variable 'v58' is possibly undefined
// 402206: variable 'v59' is possibly undefined
// 402206: variable 'v60' is possibly undefined
// 402206: variable 'v61' is possibly undefined
// 402206: variable 'v62' is possibly undefined

//----- (00402268) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_402268@<eax>(void *a1@<ebp>, int _ESI@<esi>)
{
  void *v3; // [esp+10h] [ebp-8h]
  void *v4; // [esp+14h] [ebp-4h]
  void *retaddr; // [esp+18h] [ebp+0h]

  *(&retaddr - 7) = v4;
  sub_402A13();
  v4 = a1;
  v3 = a1;
  __inbyte(0xB6u);
  __asm { outsd }
  return sub_40228A();
}
// 40226C: positive sp value 4 has been found
// 40228A: using guessed type _DWORD sub_40228A();

//----- (0040228A) --------------------------------------------------------
#error "4022A5: cannot convert to microcode (funcsize=12)"

//----- (004022E1) --------------------------------------------------------
#error "4022E1: function frame is wrong (funcsize=0)"

//----- (00402325) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402325(int a1@<eax>, int a2@<edx>, int a3@<ecx>, __int16 a4@<bx>, int a5@<ebp>, int a6@<esi>)
{
  int v6; // edx

  v6 = a3 + a2;
  _BX = v6 + a4;
  --HIBYTE(_BX);
  BYTE1(v6) = (BYTE1(a3) | BYTE1(v6)) - 88;
  sub_40285F(a1, v6, a3, _BX, a5, a6);
  __asm { repne neg bh }
  ((void (__noreturn *)(void))((char *)&loc_402EBA + 1))();
}
// 402EF4: positive sp value C has been found
// 40235D: control flows out of bounds to 402363
// 402F00: bad sp value at call

//----- (0040239B) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_40239B()
{
  JUMPOUT(0x402B24);
}
// 40239F: positive sp value 4 has been found
// 4023AE: control flows out of bounds to 402B24

//----- (004023D1) --------------------------------------------------------
#error "4023D1: function frame is wrong (funcsize=0)"

//----- (0040243F) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40243F(int a1@<eax>, double a2@<st0>)
{
  int v3; // edx

  _AL = sub_4026D5(~a1);
  *(double *)(v3 + 19) = a2;
  __asm { daa }
  sub_40245C();
}
// 402443: positive sp value 4 has been found
// 402454: variable 'v3' is possibly undefined

//----- (0040245C) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
void sub_40245C()
{
  int v0; // ecx
  int v1; // [esp-CCE2h] [ebp-CD06h]
  __int16 v2; // [esp-CCDEh] [ebp-CD02h]

  *((_DWORD *)&v2 - 10) = v1;
  ((void (*)(void))sub_40253A)();
  if ( v0 == 1 )
    JUMPOUT(0x402479);
  JUMPOUT(0x4024A0);
}
// 402433: positive sp value CD06 has been found
// 402474: control flows out of bounds to 402479
// 402699: control flows out of bounds to 4024A0
// 40246C: bad sp value at call
// 402471: variable 'v0' is possibly undefined

//----- (0040253A) --------------------------------------------------------
#error "40253A: function frame is wrong (funcsize=0)"

//----- (004026D5) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_4026D5@<eax>(int a1@<eax>)
{
  int v1; // eax
  int v2; // ecx
  int result; // eax
  int v4; // et0
  int v5; // [esp+14h] [ebp-8h]
  int v6; // [esp+18h] [ebp-4h]

  *(&v6 - 8) = v5;
  if ( a1 )
    JUMPOUT(0x402F0B);
  v1 = ((int (*)(void))loc_40251D)();
  LOBYTE(v1) = v1 ^ 0xEB;
  v4 = v1;
  result = v2;
  if ( __OFSUB__(v4, 1) )
    JUMPOUT(0x4029CC);
  return result;
}
// 4026E7: positive sp value 8 has been found
// 402A9D: control flows out of bounds to 402F0B
// 402972: control flows out of bounds to 4029CC
// 402970: variable 'v2' is possibly undefined

//----- (00402734) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402734(void *a1@<ebp>, int a2@<esi>)
{
  __asm { repne pop eax }
  sub_402268(a1, a2);
  JUMPOUT(0x402752);
}
// 402739: positive sp value 4 has been found
// 40274C: control flows out of bounds to 402752

//----- (004027AE) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_4027AE@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<esi>)
{
  int v3; // ecx
  int v4; // esi
  int v5; // ecx
  int v6; // ecx
  int v7; // ecx
  bool v8; // cf
  int v9; // ecx
  int v10; // edi
  int v11; // ecx
  int v12; // edi
  int v13; // eax
  int v14; // edx
  int v16; // edx
  unsigned int v17; // ecx
  int v18; // edi
  bool v19; // pf
  bool v20; // cc
  int v21; // ebx
  unsigned __int8 v23; // al
  unsigned __int16 v24; // dx
  int v25; // ebx
  double v26; // st7
  unsigned __int16 v27; // dx
  int v28; // ecx
  int v29; // [esp+28h] [ebp-8h]
  int v30; // [esp+2Ch] [ebp-4h]
  void *retaddr[2]; // [esp+30h] [ebp+0h]

  *(&v30 - 13) = v29;
  v12 = v30;
  sub_40281E();
  v14 = (unsigned __int64)(*(int *)(a2 + 514375026) * (__int64)v13) >> 32;
  __asm { lock mov eax, ds:0FE2BD833h }
  v21 = a1 - 1;
  v16 = v14 + 44;
  BYTE1(v17) = v17;
  v18 = v21 ^ v12;
  BYTE1(v21) = v21 | (BYTE1(v21) + 1);
  v20 = __CFADD__((_BYTE)v21, 90) || (_BYTE)v21 == 0xA6;
  v19 = __SETP__(v21 + 90, 0);
  LOBYTE(v21) = v21 + 90;
  if ( v20 || !v20 )
  {
    v25 = v17 | v16;
    LOBYTE(v25) = BYTE1(_EAX) ^ (v17 | v16);
    v26 = ((double (__thiscall *)(unsigned int))sub_402B39)(v16 ^ v17);
    __inbyte(v27);
    BYTE1(v25) &= *(_BYTE *)(v28 + 2 * v25 - 74);
    sub_402E79(v25, v18, (float *)(a3 + 1), v26);
  }
  if ( !v17 )
  {
    if ( !v19 )
    {
      LOBYTE(v17) = 0;
      v7 = a3 ^ v17;
      v8 = __CFADD__(v21, v7);
      v9 = v21 + v7;
      v10 = v18 + 1;
      BYTE1(v9) -= v8 + 117;
      v11 = a3 + v9;
      LOBYTE(v11) = _EAX;
      v3 = v10 | v11;
      v4 = v10 + a3;
      LOBYTE(v3) = v16 | v3;
      v5 = v4 + v3;
      BYTE1(v5) -= BYTE1(v21);
      v6 = v4 ^ (v16 | (v5 - 1));
      BYTE1(v6) = BYTE1(v6) - 56 - v21;
      LOBYTE(v6) = v6 - (__CFADD__(BYTE1(v6), -22) - 76);
      BYTE1(v6) += 113;
      v23 = ((int (__thiscall *)(int))sub_40228A)((v21 + 1) | v6);
      __outbyte(v24, v23);
      JUMPOUT(0x402E5D);
    }
    JUMPOUT(0xB1DA87F);
  }
  return MK_FP(retaddr[0], retaddr[0])(v17, v16);
}
// 4022FD: positive sp value 8 has been found
// 40231E: control flows out of bounds to 402320
// 402E5C: control flows out of bounds to 402E5D
// 40278D: control flows out of bounds to B1DA87F
// 402318: conditional instruction was optimized away because esi.4>=1
// 4027C4: variable 'v13' is possibly undefined
// 4027D7: variable 'v17' is possibly undefined
// 402E5C: variable 'v24' is possibly undefined
// 402E74: variable 'v27' is possibly undefined
// 402E75: variable 'v28' is possibly undefined
// 40228A: using guessed type _DWORD sub_40228A();
// 402B39: using guessed type _DWORD sub_402B39();

//----- (0040281E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_40281E()
{
  JUMPOUT(0x40265A);
}
// 402825: positive sp value 4 has been found
// 402832: control flows out of bounds to 40265A

//----- (0040283E) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_40283E()
{
  JUMPOUT(0x402DA7);
}
// 402842: positive sp value 4 has been found
// 402853: control flows out of bounds to 402DA7

//----- (0040285F) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_40285F(int a1@<eax>, int a2@<edx>, char a3@<cl>, __int16 a4@<bx>, int a5@<ebp>, int a6@<esi>)
{
  unsigned __int8 v6; // al
  unsigned __int16 v7; // dx
  char v10; // cc
  int v17; // [esp+0h] [ebp-8h]
  int v18; // [esp+4h] [ebp-4h]
  unsigned int retaddr; // [esp+8h] [ebp+0h]

  *(&v18 - 3) = v17;
  LOBYTE(a2) = a2 - 125;
  BYTE1(a2) |= a3;
  _BX = a2 + a4;
  BYTE1(a2) = 86;
  _CF = (unsigned __int8)(a2 + _BX) < BYTE1(a1);
  v10 = (a2 + 1 < 0) ^ __OFADD__(1, a2);
  _EDX = a2 + 1;
  LOBYTE(_EDX) = ~(_BYTE)_EDX;
  if ( !v10 && v10 )
  {
    BYTE1(_EDX) -= _CF + *(_BYTE *)(a1 - 1967577392);
    *(_DWORD *)(_EDX + 177452027) = __ROR4__(*(_DWORD *)(_EDX + 177452027), a3);
    __asm { repne sub bh, dh }
    v6 = sub_4027AE(a1, a5, a6 - 1);
    __outbyte(v7, v6);
    __writeeflags(retaddr);
    JUMPOUT(0x40262B);
  }
  sub_40283E();
  JUMPOUT(0x40237F);
}
// 402629: positive sp value 8 has been found
// 40237C: control flows out of bounds to 40237F
// 40262A: control flows out of bounds to 40262B
// 402629: variable 'v7' is possibly undefined

//----- (004028C7) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4028C7()
{
  void *v0; // [esp+28h] [ebp-4h]
  void *retaddr; // [esp+2Ch] [ebp+0h]

  *(&retaddr - 12) = v0;
  JUMPOUT(0x402AC9);
}
// 4028CB: positive sp value 4 has been found
// 402F89: control flows out of bounds to 402F8B
// 4028D5: control flows out of bounds to 402AC9
// 4028E5: control flows out of bounds to 40292F
// 4028DB: conditional instruction was optimized away because ch.1>=1

//----- (00402906) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402906()
{
  sub_402BC6();
  _disable();
  __asm { ffreep  st(3) }
  JUMPOUT(0x402236);
}
// 40290A: positive sp value 4 has been found
// 402932: control flows out of bounds to 402236

//----- (004029F4) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4029F4()
{
  JUMPOUT(0x402D64);
}
// 4025B2: positive sp value 4 has been found
// 4025D6: control flows out of bounds to 4025D8
// 4025C5: control flows out of bounds to 402D64

//----- (00402A13) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402A13()
{
  JUMPOUT(0x40255A);
}
// 402A17: positive sp value 4 has been found
// 402A24: control flows out of bounds to 40255A

//----- (00402A6F) --------------------------------------------------------
#error "402539: positive sp value has been found (funcsize=141)"

//----- (00402B09) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_402B09@<eax>(int a1@<ebx>, int a2@<edi>)
{
  char v2; // cf
  int v4; // [esp+1Ch] [ebp-Ch]
  _BYTE v5[4]; // [esp+20h] [ebp-8h] BYREF
  unsigned int v6; // [esp+24h] [ebp-4h]

  *(_DWORD *)&v5[-44] = v4;
  LOBYTE(a1) = a1 - 1;
  sub_402906();
  MEMORY[0x9F078E06] += &v5[v2];
  __writeeflags(v6);
  *(_BYTE *)(a1 ^ a2) &= ((int (__cdecl *)(_DWORD))loc_402AE9)(0);
  return sub_402B39();
}
// 402B24: positive sp value C has been found
// 402B1C: variable 'v2' is possibly undefined
// 402B39: using guessed type _DWORD sub_402B39();

//----- (00402B39) --------------------------------------------------------
#error "402B52: cannot convert to microcode (funcsize=12)"

//----- (00402BC6) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402BC6()
{
  JUMPOUT(0x4022CC);
}
// 402BCD: positive sp value 4 has been found
// 402BD4: control flows out of bounds to 4022CC

//----- (00402C1A) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn sub_402C1A(
        char a1@<al>,
        float *a2@<edx>,
        int a3@<ecx>,
        int a4@<ebx>,
        int a5@<edi>,
        double a6@<st0>)
{
  bool v6; // cf
  int v7; // edi
  int v8; // ebx

  BYTE1(a4) = a1 | 0xF3;
  LOBYTE(a4) = BYTE1(a3) + ~(_BYTE)a4;
  v7 = a4 + a5;
  LOBYTE(a4) = a1 | 0xF3 | a4;
  v8 = (unsigned int)a2 ^ a4;
  LOBYTE(v8) = v8 - 1;
  BYTE1(v8) = BYTE1(v8) - v8 - ((BYTE1(v8) < (unsigned __int8)v8) - 36);
  LOBYTE(v8) = BYTE1(a3) ^ v8;
  v6 = __CFADD__((_BYTE)v8, -25);
  LOBYTE(v8) = v8 - 25;
  BYTE1(v8) -= v6 - 35;
  sub_402E79(v8, a3 + v7 - 1 - v8, a2, a6);
}
// 4021C7: positive sp value 4 has been found

//----- (00402C4D) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402C4D()
{
  JUMPOUT(0x40288C);
}
// 402C51: positive sp value 4 has been found
// 402C65: control flows out of bounds to 40288C

//----- (00402CE7) --------------------------------------------------------
#error "402C9F: cannot convert to microcode (funcsize=36)"

//----- (00402D29) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402D29(int (*a1)(void)@<eax>, char a2@<bl>, int *a3@<edi>)
{
  unsigned int v3; // edx
  char v4; // cl
  int v5; // ecx
  int v6; // eax
  int v7; // eax
  char v8; // cf
  char v9; // dh
  int v10; // edx
  void *v11; // [esp+10h] [ebp-4h]
  void *retaddr; // [esp+14h] [ebp+0h]

  *(&retaddr - 6) = v11;
  v7 = a1();
  BYTE1(v10) = ~v9;
  v3 = (unsigned int)a3 | v10;
  BYTE1(v3) += 5;
  LOBYTE(v5) = (a2 - 1 - (v8 - 41) - 102) | v4;
  v6 = ((int (__fastcall *)(int, unsigned int))sub_402CE7)(v7 + v5, v3);
  LOBYTE(v6) = -106;
  *a3 = v6;
  sub_40239B();
}
// 402384: positive sp value 4 has been found
// 402D35: variable 'v9' is possibly undefined
// 402384: variable 'v10' is possibly undefined
// 402D32: variable 'v8' is possibly undefined
// 40238E: variable 'v4' is possibly undefined
// 402390: variable 'v5' is possibly undefined
// 402CE7: using guessed type _DWORD sub_402CE7();

//----- (00402E26) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402E26(__int32 a1@<edi>)
{
  __int32 v1; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v1, a1);
  JUMPOUT(0x4027CC);
}
// 402E2C: positive sp value 4 has been found
// 402E37: control flows out of bounds to 4027CC

//----- (00402E79) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn sub_402E79(int a1@<ebx>, int a2@<edi>, float *a3@<esi>, double a4@<st0>)
{
  int v4; // ebx
  _DWORD *v5; // edi
  _DWORD *v6; // edx
  char v7; // cf
  void *retaddr; // [esp+0h] [ebp+0h] BYREF

  v4 = a1 - (_DWORD)a3;
  LOBYTE(v4) = __CFADD__((_BYTE)v4, 125) + v4 + 125 - 87;
  v5 = (_DWORD *)(a2 - v4);
  sub_4028C7();
  *a3 = a4;
  *v6 <<= 29;
  sub_402E26((__int32)v5);
  *v5 += (char *)&retaddr + v7;
  __asm { into }
  JUMPOUT(0x862A23E9);
}
// 402E7D: positive sp value 4 has been found
// 402EBA: control flows out of bounds to 862A23E9
// 402E9E: variable 'v6' is possibly undefined
// 402EB7: variable 'v7' is possibly undefined

//----- (00402F4A) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __userpurge sub_402F4A(
        int a1,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        int a28,
        int a29,
        int a30,
        int a31,
        int a32,
        int a33,
        int a34,
        int a35,
        int a36,
        int a37,
        int a38,
        int a39,
        int a40,
        int a41,
        int a42,
        int a43,
        int a44,
        int a45,
        int a46,
        int a47,
        int a48,
        int a49,
        int a50,
        int a51,
        int a52,
        int a53,
        int a54,
        int a55,
        int a56,
        int a57,
        int a58,
        int a59,
        int a60,
        int a61,
        int a62,
        int a63)
{
  ((void (*)(void))((char *)&loc_402474 + 4))();
  __asm { insd }
  sub_4028C7();
}
// 4028AC: positive sp value 4 has been found
// 402F63: conditional instruction was optimized away because esi.4!=0
// 402F4A: too many input arguments, some ignored

// nfuncs=40 queued=40 decompiled=40 lumina nreq=0 worse=0 better=0
#error "There were 9 decompilation failure(s) on 40 function(s)"
