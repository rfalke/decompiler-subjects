// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

<anonymous> * __imp__Escape = &g_t1392; // 00401000
<anonymous> * __imp__GetTickCount = &g_t133E; // 00401008
<anonymous> * __imp__ExitProcess = &g_t1330; // 0040100C
<anonymous> * __imp__ConnectNamedPipe = &g_t131C; // 00401010
<anonymous> * __imp__GetFocus = &g_t135C; // 00401018
<anonymous> * __imp__CharNextA = &g_t1368; // 0040101C
<anonymous> * __imp__PostQuitMessage = &g_t1374; // 00401020
// 00401030: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	struct Eq_3 * fp;
	Eq_4 dwLoc20;
	word32 dwLoc14;
	ptr32 edi_18;
	ui32 edx_19 = fn00401140(out edi_18);
	(fp->aFFFC4D92 + 121111 - edx_19)->dw0040 = edx_19;
	struct Eq_19 * eax_34 = (edx_19 << 0x09) + 4175131696 & 0x07639C00 - (edx_19 << 0x09);
	Mem43[fp + 4294725022 + dwLoc20:word32] = (eax_34 + 4046907468)[edx_19 * 0x0400] - 0x28;
	ptr32 eax_47 = (char *) &((eax_34 + (&(eax_34->aF136E84C)->dw0000 + (edx_19 << 0x0A))[-1])->aF136E84C + 0x0003B332)->dw0000 + 554 - dwLoc20;
	fn00401250();
	fn00401180(Mem67[fp + ~0x0003B26D + dwLoc20:word32], edi_18);
	struct Eq_63 * esp_93;
	(*((word32) dwLoc20 + 3956370))();
	esp_93->dwFFFFFFFC = 0x00;
	<anonymous> * v19_103 = eax_47 + 242302 - dwLoc20;
	esp_93->dwFFFFFFF8 = (char *) v19_103 + 0x0BCA;
	struct Eq_79 * esp_112;
	v19_103();
	int3();
	esp_112->ptrFFFFFFFC = fp - 4;
	int32 edx_123 = esp_112->dw000C;
	int32 ecx_125 = ((char *) (esp_112->aFFF136CC + 181691) + 2)[edx_123];
	ui32 * ebx_128 = esp_112->aFFF136CC[edx_123];
	esp_112->dwFFFFFFF0 = 482234485;
	DWORD eax_133 = esp_112->dwFFFFFFF0 - (edx_123 << 0x02);
	esp_112->dwFFFFFFF0 = 456161244;
	esp_112->dwFFFFFFF8 = 0x01;
	esp_112->dwFFFFFFF4 = esp_112->dwFFFFFFF0;
	esp_112->dwFFFFFFF4 += edx_123 << 0x02;
	while (true)
	{
		*ebx_128 = *ebx_128 ^ eax_133;
		ecx_125 -= 0x04;
		if (ecx_125 <= 0x00)
			break;
		eax_133 = (word32) eax_133 + esp_112->dwFFFFFFF4 + esp_112->dwFFFFFFF8;
		ebx_128 = (char *) ebx_128 + 242258 - esp_112->dw000C;
		esp_112->dwFFFFFFF8 = -esp_112->dwFFFFFFF8;
	}
	return eax_133;
}

// 00401140: Register word32 fn00401140(Register out ptr32 ediOut)
// Called from:
//      Win32CrtStartup
word32 fn00401140(ptr32 & ediOut)
{
	struct Eq_169 * edi_9;
	<anonymous> * eax_17 = fn00401230(&Eq_268::t0019, out edi_9) + 0x01 + ConnectNamedPipe;
	eax_17();
	ui32 edx_32 = edi_9->dw0BF4;
	ediOut = edi_9 - (edx_32 - 3220983226);
	return edx_32 - 3220983226;
}

// 00401180: void fn00401180(Register int32 ecx, Register ptr32 edi)
// Called from:
//      Win32CrtStartup
void fn00401180(int32 ecx, ptr32 edi)
{
	<anonymous> * eax_7 = fn004011B0(fn00401190(ecx, edi), ecx);
	eax_7();
}

// 00401190: Register word32 fn00401190(Register int32 ecx, Register ptr32 edi)
// Called from:
//      fn00401180
word32 fn00401190(int32 ecx, ptr32 edi)
{
	return *((word32) **((word32) *((word32) *((word32) (edi + 48) + ecx) + 0x0C) + 28) + 8);
}

// 004011B0: Register Eq_196 fn004011B0(Register Eq_196 eax, Register int32 ecx)
// Called from:
//      fn00401180
Eq_196 fn004011B0(Eq_196 eax, int32 ecx)
{
	ptr32 fp;
	word32 dwLoc08;
	struct Eq_223 * esi_22 = (word32) eax + *((word32) ((word32) eax + *(((word32) eax + ((ecx << 0x01) + ~0x0003B211)) - ecx)) + 0x0078);
	int32 esi_25[] = (word32) eax + esi_22->dw0020;
	ptr32 edi_28 = (word32) eax + esi_22->dw001C;
	*(fp + 242246 - ecx) = 1443112625 - ecx;
	int32 dwLoc0C_65 = 0x00;
	while (dwLoc08 != (((word32) eax + esi_25[dwLoc0C_65 / 4]) + 4294725054)[ecx / 4])
		dwLoc0C_65 += 0x04;
	return (word32) eax + *((word32) edi_28 + dwLoc0C_65);
}

// 00401230: Register word32 fn00401230(Stack (memptr (ptr16 Eq_268) Eq_173) dwArg04, Register out ptr32 ediOut)
// Called from:
//      fn00401140
word32 fn00401230(struct Eq_173 Eq_268::* dwArg04, ptr32 & ediOut)
{
	struct Eq_268 * fs;
	ediOut = (fs->*dwArg04).ptrFFFFFFFF;
	return ~0x00;
}

// 00401250: void fn00401250()
// Called from:
//      Win32CrtStartup
void fn00401250()
{
}

word32 g_dw4012F4 = 5010; // 004012F4
word32 g_dw4012FC = 0x133E; // 004012FC
word32 g_dw401300 = 0x1330; // 00401300
word32 g_dw401304 = 0x131C; // 00401304
word32 g_dw40130C = 0x135C; // 0040130C
word32 g_dw401310 = 0x1368; // 00401310
word32 g_dw401314 = 0x1374; // 00401314
