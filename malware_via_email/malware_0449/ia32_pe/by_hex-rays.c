/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

void __fastcall __noreturn sub_4039A1(int);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_403A6D; // weak


//----- (004039A1) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __fastcall __noreturn sub_4039A1(int a1)
{
  int v1; // esi
  int v2; // ebx
  int v4; // ecx
  int v7; // et0
  int savedregs; // [esp+0h] [ebp+0h] BYREF
  void *retaddr; // [esp+4h] [ebp+4h] BYREF

  v1 = (unsigned __int8)a1 - 1;
  v2 = (unsigned __int8)a1;
  __asm { fcom    st }
  v4 = -128 * a1;
  if ( _OF )
    v4 = v1 + 1;
  __asm { fcomp   st(5) }
  _EBX = __ROR4__(-v2, 69);
  __asm { fsubr   st(3), st }
  LOWORD(_EBX) = v1 + _EBX;
  v7 = v4;
  _ECX = v4 - 1179817124;
  __asm { repne lea esi, [ecx] }
  _CF = __CFADD__((_WORD)_EBX, (unsigned __int16)&retaddr);
  _PF = __SETP__(v7 + 1, 0);
  if ( !_PF )
  {
    if ( _PF )
      _CF = __CFADD__((_WORD)_EBX, _EBX + (unsigned __int16)&retaddr);
    __asm { fcom    st(7) }
    _EBX = ~_EBX;
    if ( !_CF )
      _EBX = (int)&retaddr;
  }
  savedregs = -1288614005;
  if ( !_CF )
    _EBX = (int)&savedregs;
  __asm
  {
    rep inc ebx
    fcomp   st(5)
  }
  ((void (__thiscall *)(int))loc_403A6D)(-961529671);
  JUMPOUT(0xD3C21537);
}
// 4039A6: positive sp value 4 has been found
// 4039BE: inconsistent fpu stack
// 403A56: control flows out of bounds to D3C21537
// 4039CF: variable '_OF' is possibly undefined

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
