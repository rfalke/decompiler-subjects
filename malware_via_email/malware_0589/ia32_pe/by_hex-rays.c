/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<ebp>, int a6@<edi>, int a7@<esi>);

//-------------------------------------------------------------------------
// Data declarations

int dword_414000[512] =
{
  -1876295519,
  88416000,
  875627364,
  -207,
  808517861,
  1314014539,
  842222661,
  1280066606,
  446616320,
  278354701,
  1852814041,
  -1,
  501307401,
  -753066132,
  1067112884,
  422845203,
  711766233,
  1088444438,
  296200108,
  269136345,
  -9438454,
  1527918870,
  -1201991285,
  1478505751,
  412144472,
  -166330168,
  -1291108353,
  1589892432,
  -1286066922,
  61780826,
  101672371,
  230882137,
  1682699184,
  1840261920,
  -1511641400,
  -326881625,
  -1663308753,
  -875229104,
  1087784394,
  724299995,
  -720760057,
  -1626309411,
  -1237188520,
  -458163331,
  -576846774,
  252749256,
  -1532073650,
  298391273,
  1256593098,
  197864346,
  -1180389684,
  399313042,
  -1180389682,
  -1072378048,
  1764465226,
  -1541619338,
  -1025076551,
  135185162,
  -995202783,
  -1234229160,
  -1341589409,
  808734461,
  1570930724,
  -1462534390,
  -2139279961,
  -1616580372,
  156269660,
  1090075784,
  -537375168,
  1813566215,
  744399067,
  -1885630118,
  48499481,
  772676793,
  428902800,
  944913,
  342507705,
  1085868188,
  88952084,
  -1579164729,
  -1325623138,
  -787919759,
  -287348515,
  -938249067,
  370781720,
  628312381,
  457120461,
  -766042103,
  760945757,
  -766020579,
  706092637,
  1931583519,
  278252837,
  -766045938,
  305744220,
  -2122902732,
  353640540,
  1557239062,
  538320201,
  163709016,
  145627108,
  -126246738,
  142903265,
  -1332613721,
  1956400087,
  641775874,
  -1876020964,
  1026221067,
  -1190992837,
  -902353856,
  705400878,
  1624505121,
  840033455,
  -600769192,
  2115007725,
  -2033110824,
  -1425556533,
  1058927945,
  1688044658,
  -1739352540,
  542956887,
  1507694631,
  -1402969768,
  1912934711,
  1043750017,
  -938008484,
  -936309705,
  679571861,
  425467653,
  -1369438333,
  -789620112,
  -906542708,
  1501850630,
  -788990456,
  335227538,
  -98316889,
  -67627603,
  -438808275,
  1579952172,
  771967252,
  251142124,
  1842560015,
  1747899691,
  241458226,
  -923901589,
  322531443,
  -503965707,
  2095438625,
  369962323,
  613411632,
  -970477058,
  1471721598,
  760361147,
  -496259674,
  1853244981,
  1204951112,
  -932434368,
  -752649703,
  370643511,
  -1064786127,
  -166392254,
  -401856299,
  103110319,
  1461001361,
  -1908372669,
  1545131500,
  608241898,
  978620559,
  -1939592618,
  -994651225,
  -2076630432,
  -262847715,
  1117869353,
  -1313796226,
  542910701,
  1976058770,
  139778900,
  -388475527,
  527389468,
  1405252164,
  22575189,
  -631757723,
  802291696,
  101168216,
  166204885,
  -363241424,
  956491989,
  160832419,
  919099954,
  -469004242,
  607403052,
  876656905,
  -648248974,
  -808559754,
  96999238,
  -1283210816,
  -921313223,
  137974098,
  1230885463,
  789973250,
  -1781717750,
  185150836,
  1230819885,
  222104691,
  882232618,
  253824599,
  1912980235,
  -1073676251,
  1230799222,
  -1610415573,
  97899095,
  87388676,
  542924892,
  621228806,
  322213325,
  389494846,
  963773912,
  389777722,
  -445344312,
  389889081,
  -1988848184,
  473906737,
  -832545696,
  -435664336,
  167675666,
  -78627152,
  -542791656,
  369095901,
  -1492527648,
  1546426723,
  1731041891,
  749477331,
  -1332146104,
  2142760279,
  1470405003,
  -1311158033,
  1395524117,
  -776721007,
  -396787942,
  1678824447,
  -1489072037,
  -683782615,
  -1730436527,
  -28516004,
  -18878977,
  -1713825142,
  1699383483,
  274798681,
  77737380,
  -743625312,
  -1408404600,
  -487606554,
  -816274727,
  -1290249429,
  1539063227,
  3767856,
  232870137,
  -608638222,
  -380599243,
  64863878,
  -2076684160,
  -947905189,
  106928048,
  -1553074307,
  42253440,
  1018170300,
  -1140469304,
  1726809435,
  336514742,
  755634616,
  -617588352,
  1819432702,
  -748402897,
  -1722060776,
  975090763,
  -1871799881,
  -1945315521,
  1054477376,
  -2008625732,
  -1333263795,
  -1741875124,
  -145892170,
  -1358885616,
  -2130320355,
  -414223523,
  -1281601826,
  1544587099,
  -872275640,
  -1938039879,
  377629872,
  119557299,
  2069420858,
  -1450174241,
  426541417,
  426680044,
  134975347,
  491275432,
  -646322694,
  -1330862037,
  1677919612,
  -834665515,
  257797557,
  86169440,
  219602500,
  2090319501,
  1586780682,
  -2018857871,
  1439553925,
  1343869288,
  -1846700743,
  200022936,
  843979672,
  716003096,
  1341652834,
  332601138,
  -1600399092,
  1833717592,
  1768581996,
  1013937120,
  892416246,
  1392707883,
  -2116877437,
  -650920181,
  1575423294,
  135301190,
  -509382469,
  1538293465,
  520620442,
  -1358328140,
  862753031,
  2009966864,
  1454844898,
  1941198014,
  162376725,
  -649831504,
  -1268422657,
  -611290358,
  1520328113,
  1494405553,
  -638125938,
  1578328717,
  157856655,
  466831515,
  -1922075828,
  -745739425,
  224089099,
  -659551639,
  -1234233661,
  273706203,
  302611634,
  -1680146106,
  -2053146512,
  -1802169970,
  1572442222,
  -956437014,
  177125190,
  1537122796,
  -1142946038,
  909018047,
  -196382928,
  -1287671575,
  426891056,
  -1615217514,
  177427035,
  -707550058,
  -745471046,
  1876704713,
  810065566,
  -2061428648,
  -2109403523,
  915959023,
  -90690712,
  -570344698,
  -179032045,
  433932515,
  -936244104,
  -637968561,
  -498846924,
  -1685106093,
  31102000,
  109319633,
  1766347440,
  461382749,
  424180001,
  -1741599345,
  1681691849,
  1481719075,
  1257015196,
  -1874831346,
  -908569529,
  1586665761,
  181038820,
  -530597889,
  -139201615,
  -1261236837,
  195337435,
  116199182,
  1344998171,
  1035021419,
  222443876,
  1490600881,
  -1847369016,
  1768151897,
  -1103155353,
  1195601029,
  -1337019542,
  -1336061258,
  -1156121674,
  1725630031,
  -5198102,
  1411582297,
  -1587455734,
  -330515259,
  -1874485862,
  1577947344,
  1919327848,
  -238995768,
  -1284887229,
  565202973,
  1511539617,
  1766226191,
  1840894096,
  1301306894,
  -1331380983,
  1600871066,
  227601567,
  -811884599,
  2074760219,
  44125029,
  -1541577373,
  -2071481786,
  -1363776735,
  -1843312851,
  723357741,
  589221448,
  516449414,
  273687899,
  1192008493,
  1289524936,
  -750500079,
  -739218417,
  693380747,
  -1084688189,
  1260255354,
  524898371,
  743708003,
  -1234175974,
  752539330,
  -1423547812,
  -545583937,
  1572265952,
  1050673758,
  1470611417,
  -1353395650,
  -1227105400,
  1872790395,
  -2090640545,
  1512132441,
  1871796777,
  -2126226068,
  1545165903,
  748367696,
  -771575696,
  1700013421,
  1932980037,
  1409515723,
  1166824680,
  -1773920557,
  1677425509,
  -1488179809,
  1075763125,
  1279543301,
  1610291463,
  -748768392,
  766141294,
  1044923527,
  -131174444,
  -1207795273,
  2123945534,
  156978643,
  772461465,
  1756835825,
  -740994046,
  1800065922,
  -1954649192,
  1879038765,
  -715106337,
  1454076970,
  -1990447405,
  -1723616335,
  -180461665,
  -1915274836,
  1344986111,
  1529815556,
  -645416741,
  -1056045409,
  1190502491,
  -1175616649,
  -1825718429,
  -460373990,
  1225591501,
  84812040,
  1634589477,
  522210316,
  1075012443,
  -1078363975,
  -1436813289,
  -1124787789,
  1906889486,
  1643402419,
  -2024949797,
  -1222649774
}; // weak


//----- (004181C0) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<ebp>, int a6@<edi>, int a7@<esi>)
{
  int *v7; // esi
  int *v8; // edi
  unsigned int v9; // ebp
  char v10; // al
  bool v11; // cf
  int v12; // ebx
  int v13; // ebx
  int v14; // ett
  unsigned int v15; // eax
  bool v16; // cf
  int v17; // ebx
  int v18; // ebx
  int v19; // ett
  bool v20; // zf
  int v21; // ebx
  int v22; // ett
  int v23; // ecx
  unsigned int v24; // eax
  unsigned int v25; // eax
  int v26; // eax
  bool v27; // cf
  int v28; // ebx
  int v29; // ebx
  int v30; // ett
  BOOL v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  int v35; // ecx
  int v36; // ecx
  bool v37; // cf
  int v38; // ebx
  int v39; // ebx
  int v40; // ett
  bool v41; // zf
  int v42; // ebx
  int v43; // ett
  unsigned int v44; // ecx
  char v45; // al
  int v46; // eax
  bool v47; // cc
  int *v48; // esi
  char *v49; // edi
  int v50; // eax
  int *v51; // ebx
  int v52; // ebp
  char v53; // al
  char *v54; // ecx
  unsigned __int8 v55; // al
  int v56; // eax
  void (__fastcall *v57)(int, char *, int *, int, int, int *); // ebp
  int *v58; // edi
  int v59[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v60; // [esp+2Ch] [ebp-80h] BYREF
  int v61; // [esp+30h] [ebp-7Ch] BYREF
  char *v62; // [esp+34h] [ebp-78h]
  int *v63; // [esp+38h] [ebp-74h]
  int v64; // [esp+3Ch] [ebp-70h]
  char *v65; // [esp+40h] [ebp-6Ch]
  int v66; // [esp+44h] [ebp-68h]
  int v67; // [esp+48h] [ebp-64h]
  int *v68; // [esp+4Ch] [ebp-60h]
  int v69; // [esp+50h] [ebp-5Ch]
  int v70; // [esp+54h] [ebp-58h]
  int v71; // [esp+58h] [ebp-54h]
  int v72; // [esp+5Ch] [ebp-50h] BYREF

  v71 = a7;
  v70 = a6;
  v69 = a5;
  v68 = &v72;
  v67 = a4;
  v66 = a3;
  v65 = a2;
  v64 = a1;
  v7 = dword_414000;
  v8 = &dword_414000[-19456];
  v63 = &dword_414000[-19456];
  v9 = -1;
  while ( 1 )
  {
    v13 = *v7;
    v11 = (unsigned int)v7++ < 0xFFFFFFFC;
    v14 = v11 + v13;
    v11 = __CFADD__(v11, v13) | __CFADD__(v13, v14);
    v12 = v13 + v14;
    do
    {
      if ( v11 )
      {
        v10 = *(_BYTE *)v7;
        v7 = (int *)((char *)v7 + 1);
        *(_BYTE *)v8 = v10;
        v8 = (int *)((char *)v8 + 1);
      }
      else
      {
        v15 = 1;
        while ( 1 )
        {
          v16 = __CFADD__(v12, v12);
          v17 = 2 * v12;
          if ( !v17 )
          {
            v18 = *v7;
            v11 = (unsigned int)v7++ < 0xFFFFFFFC;
            v19 = v11 + v18;
            v16 = __CFADD__(v11, v18) | __CFADD__(v18, v19);
            v17 = v18 + v19;
          }
          v15 += v16 + v15;
          v11 = __CFADD__(v17, v17);
          v20 = 2 * v17 == 0;
          v12 = 2 * v17;
          if ( v11 )
          {
            if ( !v20 )
              break;
            v21 = *v7;
            v11 = (unsigned int)v7++ < 0xFFFFFFFC;
            v22 = v11 + v21;
            v11 = __CFADD__(v11, v21) | __CFADD__(v21, v22);
            v12 = v21 + v22;
            if ( v11 )
              break;
          }
        }
        v23 = 0;
        v11 = v15 < 3;
        v24 = v15 - 3;
        if ( !v11 )
        {
          v25 = v24 << 8;
          LOBYTE(v25) = *(_BYTE *)v7;
          v7 = (int *)((char *)v7 + 1);
          v26 = ~v25;
          if ( !v26 )
          {
            v48 = v63;
            v49 = (char *)(v63 + 22528);
LABEL_33:
            v50 = *(_DWORD *)v49;
            if ( *(_DWORD *)v49 )
            {
              v51 = (int *)((char *)v48 + *((_DWORD *)v49 + 1));
              v49 += 8;
              v52 = ((int (__fastcall *)(int, char *, int, int, char *, int, int, int *, int, int, int))v48[27120])(
                      v23,
                      a2,
                      (int)v48 + v50 + 108280,
                      v64,
                      v65,
                      v66,
                      v67,
                      v68,
                      v69,
                      v70,
                      v71);
              while ( 1 )
              {
                v53 = *v49++;
                if ( !v53 )
                  goto LABEL_33;
                v54 = v49;
                v62 = v49;
                v55 = v53 - 1;
                do
                {
                  if ( !v54 )
                    break;
                  v20 = *v49++ == (char)v55;
                  --v54;
                }
                while ( !v20 );
                v56 = ((int (__cdecl *)(int, char *))v48[27121])(v52, v62);
                if ( !v56 )
                  break;
                *v51++ = v56;
              }
              v50 = ((int (*)(void))v48[27125])();
            }
            v57 = (void (__fastcall *)(int, char *, int *, int, int, int *))v48[27122];
            v58 = v48 - 1024;
            v60 = v50;
            v57(v23, a2, v48 - 1024, 4096, 4, &v60);
            *((_BYTE *)v58 + 479) &= 0x7Fu;
            *((_BYTE *)v58 + 519) &= 0x7Fu;
            ((void (__cdecl *)(int *, int, int, int *))v57)(v48 - 1024, 4096, v59[0], v59);
            do
              v60 = 0;
            while ( &v60 != &v61 - 32 );
            JUMPOUT(0x40FBA2);
          }
          v9 = v26;
        }
        v27 = __CFADD__(v12, v12);
        v28 = 2 * v12;
        if ( !v28 )
        {
          v29 = *v7;
          v11 = (unsigned int)v7++ < 0xFFFFFFFC;
          v30 = v11 + v29;
          v27 = __CFADD__(v11, v29) | __CFADD__(v29, v30);
          v28 = v29 + v30;
        }
        v31 = v27;
        v32 = __CFADD__(v28, v28);
        v12 = 2 * v28;
        if ( !v12 )
        {
          v33 = *v7;
          v11 = (unsigned int)v7++ < 0xFFFFFFFC;
          v34 = v11 + v33;
          v32 = __CFADD__(v11, v33) | __CFADD__(v33, v34);
          v12 = v33 + v34;
        }
        v35 = v31 + v32 + v31;
        if ( !v35 )
        {
          v36 = 1;
          while ( 1 )
          {
            v37 = __CFADD__(v12, v12);
            v38 = 2 * v12;
            if ( !v38 )
            {
              v39 = *v7;
              v11 = (unsigned int)v7++ < 0xFFFFFFFC;
              v40 = v11 + v39;
              v37 = __CFADD__(v11, v39) | __CFADD__(v39, v40);
              v38 = v39 + v40;
            }
            v36 += v37 + v36;
            v11 = __CFADD__(v38, v38);
            v41 = 2 * v38 == 0;
            v12 = 2 * v38;
            if ( v11 )
            {
              if ( !v41 )
                break;
              v42 = *v7;
              v11 = (unsigned int)v7++ < 0xFFFFFFFC;
              v43 = v11 + v42;
              v11 = __CFADD__(v11, v42) | __CFADD__(v42, v43);
              v12 = v42 + v43;
              if ( v11 )
                break;
            }
          }
          v35 = v36 + 2;
        }
        v44 = (v9 < 0xFFFFF300) + v35 + 1;
        a2 = (char *)v8 + v9;
        if ( v9 <= 0xFFFFFFFC )
        {
          do
          {
            v46 = *(_DWORD *)a2;
            a2 += 4;
            *v8++ = v46;
            v47 = v44 <= 4;
            v44 -= 4;
          }
          while ( !v47 );
          v8 = (int *)((char *)v8 + v44);
        }
        else
        {
          do
          {
            v45 = *a2++;
            *(_BYTE *)v8 = v45;
            v8 = (int *)((char *)v8 + 1);
            --v44;
          }
          while ( v44 );
        }
      }
      v11 = __CFADD__(v12, v12);
      v12 *= 2;
    }
    while ( v12 );
  }
}
// 418318: positive sp value 50 has been found
// 418318: control flows out of bounds to 40FBA2
// 4182AF: variable 'v23' is possibly undefined
// 4182AF: variable 'a2' is possibly undefined
// 414000: using guessed type int dword_414000[512];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
