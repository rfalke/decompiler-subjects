// subject_data.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

WCHAR g_t404010 = 'R'; // 00404010
CHAR g_t40406C = 'z'; // 0040406C
CHAR g_t40408C = 'P'; // 0040408C
WCHAR g_t404130 = 'R'; // 00404130
word32 g_dw404164 = 0x00; // 00404164
Eq_165 g_t404168 = // 00404168
	{
		0
	};
int32 g_dw40416C = 0; // 0040416C
Eq_147 g_t404170 = // 00404170
	{
		0
	};
word32 g_dw404174 = 0x00; // 00404174
Eq_2 g_t404178 = // 00404178
	{
		
		{
		}
	};
ptr32 g_ptr40417C = 0x00; // 0040417C
word32 g_dw404180 = 0x00; // 00404180
int32 g_dw404184 = 0; // 00404184
Eq_2 g_t404188 = // 00404188
	{
		
		{
		}
	};
word32 g_dw40418C = 0x00; // 0040418C
Eq_149 g_t404190 = // 00404190
	{
		0
	};
Eq_71 g_t404194 = // 00404194
	{
		0
	};
Eq_2 g_t404198 = // 00404198
	{
		
		{
		}
	};
struct Eq_900 * g_ptr40419C = null; // 0040419C
<anonymous> * g_ptr4041A0 = null; // 004041A0
Eq_2 g_t4041A4 = // 004041A4
	{
		
		{
		}
	};
// subject_rdata.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

<anonymous> * __imp__GetTextFaceA = &g_t34F8; // 00403000
<anonymous> * __imp__GetBkColor = &g_t34EA; // 00403004
<anonymous> * __imp__CreateFileA = &g_t320E; // 0040300C
<anonymous> * __imp__GetBinaryTypeW = &g_t321C; // 00403010
<anonymous> * __imp__CloseHandle = &g_t322E; // 00403014
<anonymous> * __imp__ReadFile = &g_t323C; // 00403018
<anonymous> * __imp__SetFilePointer = &g_t3248; // 0040301C
<anonymous> * __imp__GetFileSize = &g_t325A; // 00403020
<anonymous> * __imp__GetModuleFileNameA = &g_t3268; // 00403024
<anonymous> * __imp__GetBinaryTypeA = &g_t327E; // 00403028
<anonymous> * __imp__GetModuleHandleA = &g_t3290; // 0040302C
<anonymous> * __imp__AddAtomW = &g_t3202; // 00403030
<anonymous> * __imp__GetProcessHeap = &g_t32B0; // 00403034
<anonymous> * __imp__HeapAlloc = &g_t32C2; // 00403038
<anonymous> * __imp__VirtualAlloc = &g_t32CE; // 0040303C
<anonymous> * __imp__VirtualFree = &g_t32DE; // 00403040
<anonymous> * __imp__UnmapViewOfFile = &g_t32EC; // 00403044
<anonymous> * __imp__MapViewOfFileEx = &g_t32FE; // 00403048
<anonymous> * __imp__CreateFileMappingA = &g_t3310; // 0040304C
<anonymous> * __imp__GetProcAddress = &g_t3326; // 00403050
<anonymous> * __imp__LoadLibraryA = &g_t3338; // 00403054
<anonymous> * __imp__AddAtomA = &g_t31F6; // 00403058
<anonymous> * __imp__HeapFree = &g_t32A4; // 0040305C
<anonymous> * __imp__ExitProcess = &g_t31E8; // 00403060
<anonymous> * __imp__ClientToScreen = &g_t338C; // 00403068
<anonymous> * __imp__CreateAcceleratorTableA = &g_t339E; // 0040306C
<anonymous> * __imp__GetShellWindow = &g_t33B8; // 00403070
<anonymous> * __imp__FlashWindow = &g_t33CA; // 00403074
<anonymous> * __imp__CloseWindow = &g_t33D8; // 00403078
<anonymous> * __imp__SetWinEventHook = &g_t33E6; // 0040307C
<anonymous> * __imp__GetDC = &g_t33F8; // 00403080
<anonymous> * __imp__GetDesktopWindow = &g_t3400; // 00403084
<anonymous> * __imp__ValidateRgn = &g_t3414; // 00403088
<anonymous> * __imp__SetRectEmpty = &g_t3422; // 0040308C
<anonymous> * __imp__CharToOemBuffW = &g_t3432; // 00403090
<anonymous> * __imp__wvsprintfA = &g_t3444; // 00403094
<anonymous> * __imp__IsRectEmpty = &g_t3452; // 00403098
<anonymous> * __imp__SetWindowLongW = &g_t3460; // 0040309C
<anonymous> * __imp__VkKeyScanW = &g_t3472; // 004030A0
<anonymous> * __imp__CreateWindowExA = &g_t3480; // 004030A4
<anonymous> * __imp__RegisterClassA = &g_t3492; // 004030A8
<anonymous> * __imp__LoadCursorA = &g_t34A4; // 004030AC
<anonymous> * __imp__LoadIconA = &g_t34B2; // 004030B0
<anonymous> * __imp__DefWindowProcA = &g_t34BE; // 004030B4
<anonymous> * __imp__WaitMessage = &g_t34D0; // 004030B8
<anonymous> * __imp__ReleaseDC = &g_t336A; // 004030BC
<anonymous> * __imp__CreateMDIWindowW = &g_t3356; // 004030C0
<anonymous> * __imp__SetWindowPlacement = &g_t3376; // 004030C4
word32 g_dw40311C = 0x34F8; // 0040311C
word32 g_dw403120 = 0x34EA; // 00403120
word32 g_dw403128 = 0x320E; // 00403128
word32 g_dw40312C = 12828; // 0040312C
word32 g_dw403130 = 0x322E; // 00403130
word32 g_dw403134 = 0x323C; // 00403134
word32 g_dw403138 = 12872; // 00403138
word32 g_dw40313C = 0x325A; // 0040313C
word32 g_dw403140 = 0x3268; // 00403140
word32 g_dw403144 = 12926; // 00403144
word32 g_dw403148 = 0x3290; // 00403148
word32 g_dw40314C = 0x3202; // 0040314C
word32 g_dw403150 = 0x32B0; // 00403150
word32 g_dw403154 = 0x32C2; // 00403154
word32 g_dw403158 = 13006; // 00403158
word32 g_dw40315C = 13022; // 0040315C
word32 g_dw403160 = 13036; // 00403160
word32 g_dw403164 = 0x32FE; // 00403164
word32 g_dw403168 = 0x3310; // 00403168
word32 g_dw40316C = 0x3326; // 0040316C
word32 g_dw403170 = 0x3338; // 00403170
word32 g_dw403174 = 0x31F6; // 00403174
word32 g_dw403178 = 0x32A4; // 00403178
word32 g_dw40317C = 12776; // 0040317C
word32 g_dw403184 = 0x338C; // 00403184
word32 g_dw403188 = 0x339E; // 00403188
word32 g_dw40318C = 0x33B8; // 0040318C
word32 g_dw403190 = 0x33CA; // 00403190
word32 g_dw403194 = 0x33D8; // 00403194
word32 g_dw403198 = 0x33E6; // 00403198
word32 g_dw40319C = 0x33F8; // 0040319C
word32 g_dw4031A0 = 0x3400; // 004031A0
word32 g_dw4031A4 = 13332; // 004031A4
word32 g_dw4031A8 = 0x3422; // 004031A8
word32 g_dw4031AC = 0x3432; // 004031AC
word32 g_dw4031B0 = 0x3444; // 004031B0
word32 g_dw4031B4 = 13394; // 004031B4
word32 g_dw4031B8 = 0x3460; // 004031B8
word32 g_dw4031BC = 0x3472; // 004031BC
word32 g_dw4031C0 = 0x3480; // 004031C0
word32 g_dw4031C4 = 0x3492; // 004031C4
word32 g_dw4031C8 = 0x34A4; // 004031C8
word32 g_dw4031CC = 0x34B2; // 004031CC
word32 g_dw4031D0 = 0x34BE; // 004031D0
word32 g_dw4031D4 = 0x34D0; // 004031D4
word32 g_dw4031D8 = 0x336A; // 004031D8
word32 g_dw4031DC = 0x3356; // 004031DC
word32 g_dw4031E0 = 0x3376; // 004031E0
// subject_text.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: void fn00401000(Stack Eq_2 dwArg04, Stack Eq_2 dwArg08, Stack Eq_2 dwArg0C)
// Called from:
//      Win32CrtStartup
//      fn00401D90
//      fn00402010
void fn00401000(Eq_2 dwArg04, Eq_2 dwArg08, Eq_2 dwArg0C)
{
	word32 dwLoc18;
	int32 eax_10 = 7727050 - dwLoc18;
	if ((word32) AddAtomA(0x00404000) != 0x00)
	{
		g_dw40416C = eax_10;
		Eq_2 dwLoc0C_54 = 0x00;
		while (dwLoc0C_54 < dwArg0C)
		{
			Mem40[dwArg04 + dwLoc0C_54:byte] = Mem33[dwArg08 + dwLoc0C_54:byte];
			&dwLoc0C_54.u3->unused = (word32) dwLoc0C_54 + 1;
		}
	}
	else
		ExitProcess(0x05347887);
}

// 00401090: void fn00401090(Stack (ptr32 byte) dwArg04, Stack Eq_2 dwArg08, Stack Eq_35 dwArg0C)
// Called from:
//      Win32CrtStartup
void fn00401090(byte * dwArg04, Eq_2 dwArg08, Eq_35 dwArg0C)
{
	Eq_36 tLoc2C;
	Eq_37 tLoc14;
	Eq_13 ax_12 = AddAtomW(&g_t404010);
	g_dw404184 = 1635326126;
	if ((word32) ax_12 != 0x00)
	{
		if (dwArg0C >= 0x01)
		{
			byte dl_31 = *dwArg04;
			Eq_35 dwLoc0C_190 = 0x01;
			int32 dwLoc1C_191 = 0x00;
			do
			{
				byte cl_39 = Mem36[dwArg04 + dwLoc0C_190:byte];
				dwLoc0C_190 = (word32) dwLoc0C_190 + 1;
				if ((word32) cl_39 == (word32) dl_31)
				{
					if ((word32) dwArg04[(word32) dwLoc0C_190 + 1] == 0x00)
					{
						dwArg08.u5[dwLoc1C_191] = dl_31;
						++dwLoc1C_191;
						dwLoc0C_190 = (word32) dwLoc0C_190 + 2;
					}
					else
					{
						int32 eax_92 = fn00401260(&tLoc14, dwArg04 + ((word32) dwLoc0C_190 + 1)) + ((word32) dwLoc0C_190 + 1);
						dwLoc0C_190 = fn00401260(&tLoc2C, dwArg04 + eax_92) + eax_92;
						up32 dwLoc20_210;
						for (dwLoc20_210 = 0x00; dwLoc20_210 < tLoc14; ++dwLoc20_210)
						{
							dwArg08.u5[dwLoc1C_191] = dwArg08.u5[dwLoc1C_191 - tLoc2C];
							++dwLoc1C_191;
						}
					}
				}
				else
				{
					dwArg08.u5[dwLoc1C_191] = cl_39;
					g_t4041A4.u2 = (DWORD) (g_t404194.u0 + g_t404194.u0);
					++dwLoc1C_191;
				}
			} while (dwLoc0C_190 < dwArg0C);
		}
	}
	else
	{
		g_dw404184 = ~0x08D0CDE3;
		ExitProcess(0x07744646);
	}
}

// 00401260: Register word32 fn00401260(Stack (ptr32 ui32) dwArg04, Stack (ptr32 byte) dwArg08)
// Called from:
//      fn00401090
word32 fn00401260(ui32 * dwArg04, byte * dwArg08)
{
	ui32 dwLoc08;
	word32 dwLoc18;
	ui32 dwLoc0C_57 = 0x00;
	word32 dwLoc24_58 = 0x00;
	do
	{
		ui32 ecx_15 = (word32) *dwArg08;
		g_t404190.u0 = (int32) (g_t404170.u0 *s g_t404190.u0 >> g_t404190.u1 << (byte) dwLoc08);
		ui32 ecx_33 = dwLoc0C_57 << 0x07 | ecx_15 & 0x7F;
		++dwArg08;
		dwLoc0C_57 = ecx_33;
		dwLoc08 = g_t404168.u0 << (byte) dwLoc18;
		++dwLoc24_58;
	} while ((ecx_15 & 0x80) != 0x00);
	*dwArg04 = ecx_33;
	return dwLoc24_58;
}

// 004012F0: Register Eq_177 fn004012F0(Stack Eq_11 dwArg04)
// Called from:
//      Win32CrtStartup
Eq_177 fn004012F0(Eq_11 dwArg04)
{
	Eq_177 eax_43;
	Eq_177 eax_35 = CreateFileA(dwArg04, 0x80000000, 0x01, null, 0x03, 0x80, null);
	if (eax_35 == (void *) ~0x00)
		eax_43 = null;
	else
		eax_43 = eax_35;
	return eax_43;
}

// 00401360: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	ptr32 fp;
	word32 ebx;
	word32 esi;
	word32 edi;
	struct Eq_205 * fs;
	Eq_2 tLoc01A4;
	Eq_207 tLoc0194;
	Eq_208 tLoc018C;
	Eq_209 tLoc88;
	Eq_2 tLoc74;
	Eq_211 tLoc70;
	Eq_2 tLoc38;
	int32 dwLoc0C;
	int32 dwLoc24;
	int32 dwLoc18;
	word32 dwArg08;
	Eq_2 dwArg04;
	g_t4041A4.u2 = (DWORD) WaitMessage;
	int32 edx_29 = g_t404170.u0 + g_t404170.u0 >> 0x2A - (byte) dwLoc0C;
	g_t404194.u0 = (int32) (1222167 << (byte) dwLoc0C + g_t404190.u1);
	g_t404194.u0 = (int32) (g_t4041A4.u2 >> (byte) (dwLoc24 *s dwLoc18) + g_t404170.u1);
	g_t404190.u0 = (int32) (g_t404168.u0 *s g_t404194.u0 + dwLoc24 *s 450866);
	g_t404190.u0 = (int32) (dwLoc24 << (byte) edx_29);
	g_t4041A4.u2 = (DWORD) (500640 << (byte) dwLoc18 << (byte) edx_29 *s 0xB8);
	g_t404194.u0 = 0x000D0666;
	tLoc70.style = (UINT) 0x00;
	tLoc70.lpfnWndProc = (WNDPROC) DefWindowProcA;
	tLoc70.cbClsExtra = 0x00;
	tLoc70.cbWndExtra = 0x00;
	int32 edx_69 = dwLoc0C >> (byte) dwLoc18;
	g_t404194.u0 = (int32) (0x00075B07 - edx_69);
	tLoc70.hInstance = (HINSTANCE) GetModuleHandleA(0x00);
	g_t404190.u0 = 1632201;
	tLoc70.hIcon = (HICON) LoadIconA(GetModuleHandleA(0x00), 0x00404054);
	g_t404190.u0 = (int32) (g_t404190.u0 - 0x000C40A2 - g_t404170.u0 + dwLoc0C);
	tLoc70.hCursor = (HCURSOR) LoadCursorA(0x00, 0x7F00);
	tLoc70.hbrBackground = (HBRUSH) null;
	g_t4041A4.u2 = (DWORD) (0x00043C90 >> (byte) dwLoc18);
	tLoc70.lpszMenuName = (LPCSTR) &g_t40406C;
	tLoc70.lpszClassName = (LPCSTR) &g_t40408C;
	int32 dwLoc24_1109 = edx_69;
	if ((word32) RegisterClassA(&tLoc70) == 0x00)
		return 0x00;
	if (dwArg08 != 0x01)
		g_dw40418C = 0x00;
	else
	{
		g_dw40418C = 0x01;
		g_t404178.u2 = (DWORD) dwArg04;
	}
	CreateWindowExA(0x00, 0x004040CC, 0x004040AC, 0x01, 164164, 7419718, 6262, 0x00774934, null, null, GetModuleHandleA(0x00), 0x00);
	int32 eax_193 = g_t404168.u0 + edx_69 << g_t404194 - 0x2A;
	if (GetBinaryTypeA(0x004040DC, &tLoc74) == 0x00)
	{
		Eq_2 dwLoc30_1000;
		g_t404168.u0 = (int32) VkKeyScanW;
		if (g_dw40418C == 0x00)
			dwLoc30_1000 = GetModuleHandleA(0x00);
		else
			dwLoc30_1000 = dwArg04;
		g_t404190.u0 = (int32) SetWindowLongW;
		tLoc88.bottom = (LONG) 0x8844;
		int32 ecx_225 = g_dw40416C + 3437500;
		tLoc88.left = (LONG) 25745;
		g_dw40416C = g_dw404184 - ecx_225 *s g_dw404184;
		tLoc88.right = (LONG) 0x01831891;
		tLoc88.top = (LONG) 0x3637;
		g_dw40416C = g_dw40416C *s 294494 << g_dw404184;
		IsRectEmpty(&tLoc88);
		int32 ecx_251 = g_dw40416C *s 3623657 - 6064453;
		g_t404170.u0 = (int32) wvsprintfA;
		word32 edx_259 = dwLoc30_1000 + Mem256[dwLoc30_1000 + 60:word32];
		g_dw40416C = g_dw40416C;
		Eq_269 eax_291 = CreateWindowExA(0x00, 0x00404124, 0x004040FC, 0x01, 0x9956, 0x01841188, 599365, 416117, null, null, GetModuleHandleA(0x00), 0x00);
		g_dw404184 = 0x00 >> (byte) ecx_251;
		g_t404190.u0 = (int32) CharToOemBuffW;
		struct Eq_549 * edx_325 = edx_259 + 6 + (word32) edx_259[5] / 4 + ((word32) (edx_259->t0006).u1 - 0x01) *s 0x0A;
		Eq_11 eax_341 = (uint32) ((uint64) ((word32) edx_259[0x0F].unused + (edx_325->dw0010 - 1)) /u edx_259[0x0F]) *s edx_259[0x0F] + edx_325->dw0014;
		g_t404168.u0 = (int32) SetRectEmpty;
		fn004027D0(0x0200);
		if (eax_341 == 0x00)
			return 0x00;
		g_t404170.u0 = (int32) ValidateRgn;
		GetModuleFileNameA(dwLoc30_1000, eax_341, 0x0200);
		tLoc018C = (Eq_208) 0x00;
		GetTextFaceA(GetDC(GetDesktopWindow()), 0xFF, &tLoc018C);
		g_t404170.u0 = (int32) (g_t404170.u0 << ~0x51);
		Eq_177 eax_426 = fn004012F0(eax_341);
		if (eax_426 == null)
			return 0x00;
		g_t404190.u0 = (int32) (edx_69 * 0x02 + g_t4041A4.u2 + edx_69);
		g_t404170.u0 = (int32) SetWinEventHook;
		Eq_2 eax_449 = GetFileSize(eax_426, null) - eax_341;
		g_t4041A4.u2 = (DWORD) CloseWindow;
		if (eax_449 == 0x00)
			return 0x00;
		fn004027D0(eax_449.u9.u0 + 4);
		if (CloseWindow == 0x00)
			return 0x00;
		g_t404194.u0 = (int32) (g_t404170.u0 + 969879 + dwLoc18);
		SetFilePointer(eax_426, eax_341, null, 0x00);
		if (ReadFile(eax_426, CloseWindow, eax_449, &tLoc38, null) == 0x00)
			return 0x00;
		g_t404194.u0 = (int32) FlashWindow;
		g_t404170.u0 = (int32) (eax_193 *s edx_69 >> ~0x2F);
		CloseHandle(eax_426);
		g_t404170.u0 = (int32) GetShellWindow;
		if (tLoc38 != eax_449)
			return 0x00;
		g_t4041A4.u2 = (DWORD) CreateAcceleratorTableA;
		tLoc0194.x = (LONG) 17971525;
		tLoc0194.y = (LONG) 313;
		if (ClientToScreen(GetDesktopWindow(), &tLoc0194) != 0x00)
		{
			g_t404170.u0 = (int32) (0x00 >> g_t404194);
			g_t4041A4.u2 = (DWORD) ~0x00;
			Eq_419 eax_565 = GetBinaryTypeW(&g_t404130, &tLoc01A4);
			g_t404170.u0 = (int32) (g_t404170.u0 *s g_t4041A4.u2 >> g_t404190.u1 << g_t404194);
			if (eax_565 == 0x00)
			{
				fn00401000(CloseWindow, eax_449.u3 + (CloseWindow - (void *) 64) / 4, 0x40);
				g_t4041A4.u2 = (DWORD) SetWindowPlacement;
				g_dw40416C = 2087097;
				if ((word32) AddAtomA(0x00404150) != 0x00)
				{
					Eq_35 ecx_613 = CloseWindow.u3->unused;
					g_t4041A4.u2 = (DWORD) ReleaseDC;
					g_dw40416C = 7915954;
					GetBkColor((struct HDC__ *) 0x00292D50) != ~0x00;
					g_dw404184 = 0xF5520950;
					Eq_2 eax_637 = CloseWindow.u9.u0[1];
					Eq_35 dwLoc10_1097 = 0x00;
					eax_656 = eax_637;
					while (true)
					{
						Eq_2 eax_656;
						if (dwLoc10_1097 >= ecx_613)
							break;
						g_t404170.u0 = (int32) CreateMDIWindowW;
						eax_656 = CloseWindow + dwLoc10_1097;
						Mem847[eax_656 + 8:word32] = Mem840[CloseWindow + dwLoc10_1097 + 8:word32] ^ 44666;
						dwLoc24_1109 = 951293 - g_t404168.u0 + dwLoc18;
						dwLoc10_1097 = (word32) dwLoc10_1097 + 8;
					}
					fn004027D0(eax_637);
					g_t404188.u2 = (DWORD) eax_656;
					if (g_t404188.u2 != 0x00)
					{
						struct Eq_886 * ebp_730;
						fn00401090((word32) CloseWindow + 8, g_t404188.u2, ecx_613);
						g_t4041A4.u2 = (DWORD) (dwLoc24_1109 + 76416 >> ~0x42);
						g_ptr40419C = fs->ptr0018;
						g_dw404174 = edi;
						g_dw404164 = esi;
						g_dw404180 = ebx;
						g_ptr40417C = fp - 4;
						g_t404194.u0 = (int32) (g_t404170.u0 >> (word32) g_t4041A4 + 9);
						if (g_dw40418C != 0x00)
							ebp_730 = fn00401D90(0x00401CB4 - g_t404178.u2);
						else
							ebp_730 = fn00401D90(0x00401CB4 - GetModuleHandleA(0x00));
						if (fn00402010(g_t404188.u2) != 0x00)
						{
							g_t404168.u0 = (int32) (332000 >> g_t404194 - (ebp_730->t0020).u0);
							ebp_730->dwFFFFFFE0 = g_t404170.u0 >> 0x19 >> g_t404168.u1 + ebp_730->b0010;
							ebp_730->dwFFFFFFEC = 870330 << g_t404170.u1 >> g_t4041A4;
							Eq_149 eax_806 = ebp_730->dwFFFFFFF8 << 0x25 >> ebp_730->b0008;
							g_t404190.u0 = (int32) eax_806;
							int32 ecx_812 = ebp_730->dwFFFFFFF0;
							int32 edx_814 = g_t404168.u0 + 0x1D90 >> (byte) ecx_812;
							ebp_730->dwFFFFFFF0 = edx_814;
							word32 eax_820;
							g_ptr4041A0();
							return eax_820;
						}
						else
						{
							fn00402790(g_t404188.u2);
							ExitProcess(0x0196);
						}
					}
					else
						ExitProcess(0x0245);
				}
				else
				{
					g_dw404184 = 2271423;
					ExitProcess(1397303);
				}
			}
			else
				ExitProcess(600);
		}
		else
			ExitProcess(0x9273);
	}
	else
		ExitProcess(1590134);
}

// 00401D90: Register ptr32 fn00401D90(Stack ptr32 dwArg04)
// Called from:
//      Win32CrtStartup
ptr32 fn00401D90(ptr32 dwArg04)
{
	ptr32 fp;
	ptr32 ebp;
	word32 dwLoc20;
	int32 dwLoc08;
	word32 dwLoc1C;
	word32 dwLoc2C;
	Eq_2 dwLoc3C_216;
	g_t404168.u0 = (int32) (g_t404194.u0 *s 0x0001CCDC << (byte) dwLoc20 *s ~0x32);
	if (g_dw40418C != 0x00)
		dwLoc3C_216.u2 = g_t404178.u2;
	else
		dwLoc3C_216 = GetModuleHandleA(0x00);
	if (dwLoc3C_216 == 0x00)
		return ebp;
	word32 eax_34 = dwLoc3C_216 + Mem29[dwLoc3C_216 + 60:word32];
	g_t404198.u2 = (DWORD) VirtualAlloc(0x00, eax_34[20], 0x3000, 0x40);
	if (g_t404198.u2 == 0x00)
		return ebp;
	int32 eax_57 = 0x000BCEE8 >> 0x02 - g_t404168.u1;
	fn00401000(g_t404198.u2, dwLoc3C_216, eax_34[20]);
	word32 edx_79 = g_t404198.u2 - dwLoc3C_216;
	if (Mem80[eax_34 + 0xA4:word32] != 0x00)
	{
		word32 dwLoc14_229 = dwLoc3C_216 + Mem80[eax_34 + 0xA0:word32];
		while (dwLoc14_229[1] != 0x00)
		{
			g_t404194.u0 = (int32) (eax_57 >> ~0x22 << 0x26 - g_t404190.u1);
			Eq_1102 ecx_127 = dwLoc14_229[1] - 0x08 >> 0x01;
			g_t4041A4.u2 = (DWORD) (dwLoc08 >> (byte) dwLoc1C >> g_t4041A4 *s8 (byte) dwLoc08);
			g_t404190.u0 = (int32) (dwLoc2C + g_t4041A4.u2 + g_t404194.u0 << ~0x79);
			Eq_1124 dwLoc38_243 = dwLoc14_229 + 2;
			Eq_1102 dwLoc0C_245 = 0x00;
			while (dwLoc0C_245 < ecx_127)
			{
				if ((word32) *((word32) dwLoc38_243 + dwLoc0C_245 * 0x02) >> 0x0C == 0x03)
					(g_t404198.u2 + (dwLoc14_229->unused).u0)[((word32) *((word32) dwLoc38_243 + dwLoc0C_245 * 0x02) & 0x0FFF) / 4] += edx_79;
				dwLoc0C_245 = (word32) dwLoc0C_245.u1 + 1;
			}
			dwLoc14_229 += Mem149[dwLoc14_229 + 4:word32];
		}
	}
	<anonymous> * eax_103 = dwArg04 + g_t404198.u2;
	word32 edx_114;
	eax_103();
	return fp - 4;
}

// 00402010: Register word32 fn00402010(Stack Eq_2 dwArg04)
// Called from:
//      Win32CrtStartup
word32 fn00402010(Eq_2 dwArg04)
{
	ui32 dwLoc30;
	int32 dwLoc08;
	int32 dwLoc20;
	word32 eax_210;
	word32 edx_16 = dwArg04 + Mem13[dwArg04 + 60:word32];
	struct Eq_1186 * dwLoc2C_701 = &edx_16->w0014 + 2 + (word32) edx_16->w0014 / 84;
	Eq_2 eax_33 = VirtualAlloc(0x00, edx_16->t0050.u2, 0x3000, 0x40);
	if (eax_33 != 0x00)
	{
		int32 eax_42 = 413146 - g_t404190.u0 >> (byte) dwLoc30;
		fn00401000(eax_33, dwArg04, (word32) dwArg04.u9.u1[3].dw003C + 252 + (word32) edx_16->w0006 *s 0x28);
		up32 dwLoc10_712;
		for (dwLoc10_712 = 0x00; dwLoc10_712 < (word32) edx_16->w0006; ++dwLoc10_712)
		{
			Mem619[0x004041A4<p32>:word32] = dwLoc08 << Mem70[0x004041A4<p32>:byte] + SLICE(eax_42, byte, 0);
			if (dwLoc2C_701->dw0014 != 0x00 && dwLoc2C_701->dw0010 != 0x00)
				fn00401000(eax_33 + Mem646[dwLoc2C_701 + 0x0C:word32], dwArg04 + Mem641[dwLoc2C_701 + 20:word32], CONVERT(CONVERT(Mem619[dwLoc2C_701 + 16:word32] - 1 + Mem619[edx_16 + 60:word32], word32, uint64) /u Mem619[edx_16 + 60:word32], word32, uint32) *s Mem619[edx_16 + 60:word32]);
			g_t404170.u0 = (int32) (dwLoc20 << g_t404168.u1);
			++dwLoc2C_701;
		}
		word32 eax_79 = eax_33 + Mem76[eax_33 + 60:word32];
		word32 dwLoc54_718 = eax_33 + Mem80[eax_79 + 0x80:word32];
		while (dwLoc54_718.u0[4] != 0x00)
		{
			word32 eax_476 = GetModuleHandleA(eax_33 + Mem87[dwLoc54_718 + 0x0C:word32]);
			Eq_2 dwLoc18_833 = eax_476;
			if (eax_476 == 0x00)
			{
				if (g_dw40418C != 0x00)
				{
					eax_210 = 0x00;
					return eax_210;
				}
				word32 eax_492 = LoadLibraryA(eax_33 + Mem478[dwLoc54_718 + 0x0C:word32]);
				g_t404194.u0 = (int32) (dwLoc08 - g_t404168.u0 *s 0x000CC011);
				dwLoc18_833 = eax_492;
				if (eax_492 == 0x00)
				{
					eax_210 = 0x00;
					return eax_210;
				}
			}
			Eq_1312 dwLoc40_840;
			Eq_1313 dwLoc28_839;
			dwLoc30 = g_t404194.u0 + 0x00091D85;
			if (dwLoc54_718.u1->t0000.u0 != 0x00)
			{
				dwLoc28_839 = eax_33 + Mem506[dwLoc54_718 + 0x00:word32];
				dwLoc40_840 = eax_33 + Mem522[dwLoc54_718 + 16:word32];
			}
			else
			{
				dwLoc28_839 = eax_33 + Mem506[dwLoc54_718 + 16:word32];
				dwLoc40_840 = eax_33 + Mem513[dwLoc54_718 + 0x00:word32];
			}
			word32 dwLoc14_843 = 0x00;
			if (dwLoc54_718.u0[4] != 0x00 && ((dwLoc54_718.u1)->t0000).u0 != 0x00)
				dwLoc14_843 = 0x01;
			while (dwLoc28_839.u1->t0000.u0 != 0x00)
			{
				g_t404194.u0 = (int32) (g_t404168.u0 *s 169860 - g_t404170.u0);
				if ((dwLoc28_839.u1->t0000.u0 & 0x80000000) != 0x00)
					dwLoc28_839.u1->t0000.u0 = (struct Eq_1934 *) GetProcAddress(dwLoc18_833, dwLoc28_839.u1->t0000.u0 & 0x7FFFFFFF);
				else
					Mem570[dwLoc28_839 + 0x00:word32] = GetProcAddress(dwLoc18_833, Mem549[dwLoc28_839 + 0x00:word32] + 2 + eax_33);
				if (dwLoc28_839.u1->t0000.u0 == 0x00)
				{
					eax_210 = 0x00;
					return eax_210;
				}
				if (dwLoc14_843 != 0x00)
					dwLoc40_840.u1->t0000.u0 = dwLoc28_839.u1->t0000.u0;
				dwLoc28_839 += 0x04;
				dwLoc40_840 += 0x04;
			}
			dwLoc54_718 += 0x14;
		}
		if (g_dw40418C != 0x00)
		{
			ptr32 edx_95 = g_t404178.u2 - ((eax_79.u0)->t0034).u2;
			if (eax_79.u0->dw00A4 != 0x00)
			{
				word32 dwLoc1C_723 = eax_33 + Mem96[eax_79 + 0xA0:word32];
				while (dwLoc1C_723.u0[1] != 0x00)
				{
					uint32 edx_419 = dwLoc1C_723.u0[1] - 0x08 >> 0x01;
					word32 dwLoc4C_820 = dwLoc1C_723 + 0x08;
					uint32 dwLoc10_821;
					for (dwLoc10_821 = 0x00; dwLoc10_821 < edx_419; ++dwLoc10_821)
					{
						dwLoc30 = 90301 << g_t404190.u1;
						if ((word32) *((word32) dwLoc4C_820 + dwLoc10_821 * 0x02) >> 0x0C == 0x03)
							Mem464[eax_33 + Mem440[dwLoc1C_723 + 0x00:word32] + (CONVERT(dwLoc4C_820[dwLoc10_821 * 0x02], word16, word32) & 0x0FFF):word32] = Mem440[eax_33 + Mem440[dwLoc1C_723 + 0x00:word32] + (CONVERT(dwLoc4C_820[dwLoc10_821 * 0x02], word16, word32) & 0x0FFF):word32] + edx_95;
					}
					dwLoc1C_723 += Mem427[dwLoc1C_723 + 4:word32];
				}
			}
		}
		Eq_177 eax_128 = CreateFileMappingA((void *) ~0x00, null, 0x04, 0x00, eax_79.u0->t0050.u2, 0x00);
		if (eax_128 != null)
		{
			g_t404168.u0 = (int32) (dwLoc08 *s 0x000238DD *s 667266);
			if (g_dw40418C != 0x00)
				g_t404198.u2 = (DWORD) MapViewOfFileEx(eax_128, 0x22, 0x00, 0x00, 0x00, g_t404178.u2);
			else
				g_t404198.u2 = (DWORD) MapViewOfFileEx(eax_128, 0x22, 0x00, 0x00, 0x00, eax_79.u0->t0034.u2);
			if (g_t404198.u2 == 0x00)
			{
				g_t404190.u0 = (int32) (dwLoc30 - dwLoc20 *s 0x00073224);
				if (g_dw40418C != 0x00)
				{
					if (UnmapViewOfFile(g_t404178.u2) == 0x00 && VirtualFree(g_t404178.u2, 0x00, 0x8000) == 0x00)
					{
						eax_210 = 0x00;
						return eax_210;
					}
				}
				else if (UnmapViewOfFile(eax_79.u0->t0034.u2) == 0x00 && VirtualFree(((eax_79.u0)->t0034).u2, 0x00, 0x8000) == 0x00)
				{
					eax_210 = 0x00;
					return eax_210;
				}
				if (g_dw40418C != 0x00)
					g_t404198.u2 = (DWORD) MapViewOfFileEx(eax_128, 0x22, 0x00, 0x00, 0x00, g_t404178.u2);
				else
					g_t404198.u2 = (DWORD) MapViewOfFileEx(eax_128, 0x22, 0x00, 0x00, 0x00, eax_79.u0->t0034.u2);
				if (g_t404198.u2 == 0x00)
				{
					if (g_dw40418C != 0x00)
						g_t404198.u2 = (DWORD) VirtualAlloc(g_t404178.u2, eax_79.u0->t0050.u2, 0x3000, 0x40);
					else
						g_t404198.u2 = (DWORD) VirtualAlloc(eax_79.u0->t0034.u2, eax_79.u0->t0050.u2, 0x3000, 0x40);
					if (g_t404198.u2 == 0x00)
					{
						eax_210 = 0x00;
						return eax_210;
					}
				}
			}
			g_t404168.u0 = (int32) (66040 << (byte) dwLoc08 *s 151);
			fn00401000(g_t404198.u2, eax_33, eax_79.u0->t0050.u2);
			if (g_dw40418C != 0x00)
				fn00402640(g_t404178.u2, (char *) eax_79.u0->ptr0028 + g_t404198.u2);
			else
				fn00402720(g_t404198.u2);
			g_ptr4041A0 = (<anonymous> *) ((char *) eax_79.u0->ptr0028 + g_t404198.u2);
			eax_79.u0->ptr0028 = g_ptr4041A0;
			eax_210 = 0x01;
			return eax_210;
		}
		else
		{
			eax_210 = 0x00;
			return eax_210;
		}
	}
	else
	{
		eax_210 = 0x00;
		return eax_210;
	}
}

// 00402640: void fn00402640(Stack Eq_2 dwArg04, Stack ptr32 dwArg08)
// Called from:
//      fn00402010
void fn00402640(Eq_2 dwArg04, ptr32 dwArg08)
{
	word32 dwLoc28;
	ui32 dwLoc18;
	struct Eq_1753 * ecx_25 = g_ptr40419C->ptr0030->ptr000C->ptr000C;
	Eq_2 eax_9 = g_t4041A4.u2;
	struct Eq_1753 * dwLoc1C_102 = ecx_25;
	while (dwLoc1C_102 != null)
	{
		g_t404194.u0 = (int32) (0x000DCC0D - dwLoc28 - dwLoc18);
		if (dwLoc1C_102->t0018.u2 == dwArg04)
		{
			dwLoc1C_102->ptr001C = dwArg08;
			return;
		}
		struct Eq_1753 * ecx_64 = dwLoc1C_102->ptr0000;
		dwLoc18 = eax_9 + 771728 >> 0x1E << ~0x34;
		dwLoc1C_102 = ecx_64;
		if (ecx_64 == ecx_25)
			return;
	}
}

// 00402720: void fn00402720(Stack Eq_2 dwArg04)
// Called from:
//      fn00402010
void fn00402720(Eq_2 dwArg04)
{
	int32 dwLoc10;
	word32 dwLoc0C;
	struct Eq_900 * ecx_14 = g_ptr40419C;
	g_t404190.u0 = (int32) (38391 << g_t404170.u1);
	ecx_14->ptr0030->t0008.u2 = (DWORD) dwArg04;
	Mem43[0x00404170<p32>:word32] = dwLoc10 >> Mem33[0x004041A4<p32>:byte] + Mem33[0x00404194<p32>:byte] << SLICE(dwLoc0C, byte, 0);
}

// 00402790: void fn00402790(Stack Eq_2 dwArg04)
// Called from:
//      Win32CrtStartup
void fn00402790(Eq_2 dwArg04)
{
	HeapFree(GetProcessHeap(), 0x00, dwArg04);
}

// 004027D0: void fn004027D0(Stack Eq_2 dwArg04)
// Called from:
//      Win32CrtStartup
void fn004027D0(Eq_2 dwArg04)
{
	HeapAlloc(GetProcessHeap(), 0x00, dwArg04);
}

