/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int@<eax>, int@<edx>, int@<ecx>, unsigned int@<ebp>);

//-------------------------------------------------------------------------
// Data declarations

int dword_94C000[3161]; // weak
int dword_94F164[15]; // weak
int dword_94F1A0; // weak
int dword_94F1A4; // weak
int dword_94F1A8; // weak
int dword_94F1B4; // weak
int dword_D35000[512] =
{
  -1,
  -964606123,
  7230821,
  -360584053,
  4802155,
  -2116056256,
  1499953646,
  -998027724,
  -2116121676,
  -37748737,
  5852871,
  -1039865856,
  79874498,
  29914624,
  -1420333549,
  -90878188,
  872900842,
  2137897813,
  1304592895,
  50345046,
  904624856,
  -1014344091,
  1198951490,
  1861816435,
  2094619575,
  -1228471404,
  -1501998269,
  -2064353793,
  -37582,
  168603135,
  622563832,
  -845776166,
  -652007510,
  -1560386587,
  1978078262,
  -2125834779,
  1845419968,
  1969447679,
  -2125511168,
  175067881,
  862579104,
  -1333133206,
  1381494657,
  -608276481,
  -461111213,
  -1316466096,
  234885277,
  1616647206,
  1180075475,
  -75536340,
  209197311,
  719568473,
  1428740524,
  1792852227,
  1258318674,
  895933067,
  543208310,
  1870439942,
  -83672243,
  -1073741908,
  1682501367,
  -1046963200,
  -208971187,
  -930352637,
  -141831421,
  63408968,
  -536903181,
  1286897413,
  -1597897861,
  -2110632875,
  -1664890429,
  850575001,
  1807710883,
  -1464401921,
  1158499508,
  1007658982,
  -2064923656,
  -104042750,
  -2122430375,
  -1085261631,
  2025167265,
  -255180274,
  1392551086,
  1325417011,
  -546309237,
  -1874607677,
  -704430008,
  1381127440,
  -251442601,
  -5320565,
  1383607501,
  139145848,
  1689547863,
  -2070460786,
  620038387,
  -257944,
  -545792903,
  498196520,
  1627353664,
  1820639561,
  1829506375,
  927396659,
  2127991297,
  -1053450244,
  1137754267,
  1479897910,
  2057204380,
  -1224384564,
  -2031617,
  -339737083,
  1762730255,
  388081911,
  -129018472,
  -562608818,
  -540943375,
  317719515,
  1098068536,
  1968041864,
  -1699946930,
  92484178,
  1380113290,
  1272154932,
  1331825742,
  -2030058239,
  735721343,
  66827058,
  225886839,
  298653578,
  1316885372,
  2128098968,
  1967582840,
  54683766,
  1216900815,
  -1048348147,
  168812720,
  63867854,
  1465509593,
  -147820,
  2018489005,
  1948908294,
  818100808,
  -2116942247,
  1848075002,
  1383683776,
  2145639283,
  1707140350,
  1116498785,
  1748527182,
  -29398200,
  -75497720,
  1714604013,
  -689725210,
  1432104773,
  989685907,
  -1926443907,
  -805374402,
  2084003085,
  1438898716,
  1518358454,
  1945005772,
  1358850114,
  -2045228748,
  -562937256,
  1801191423,
  1123961812,
  -715871110,
  13356561,
  -1659680374,
  -367263273,
  -860012909,
  -1191802347,
  1850234236,
  1472361545,
  99568209,
  -1199647097,
  1324107282,
  2000768884,
  -1545058838,
  1760559103,
  1886344782,
  1357661581,
  1391220109,
  -1891404696,
  -65590774,
  -1945509889,
  232062643,
  1983152202,
  -668312786,
  1242193203,
  -1022172358,
  991754243,
  -896804082,
  1324518312,
  205811174,
  -772777941,
  1226090666,
  474892976,
  -2065840,
  1683351295,
  -1801977848,
  787376219,
  -781445405,
  -1393828642,
  -1495434096,
  399344389,
  2053994084,
  241987720,
  230754186,
  1818720206,
  -392130944,
  1304788468,
  1769500710,
  896362030,
  461784665,
  -773488799,
  249599575,
  -828614639,
  585344709,
  -1672151849,
  -991536,
  444731076,
  1858659061,
  -112967297,
  1447225770,
  440639049,
  544233326,
  -1829253423,
  1127638466,
  -1139476018,
  1204081865,
  -1949177690,
  -902151721,
  939520232,
  1297381690,
  1154807527,
  -84298282,
  -1043790771,
  875929764,
  1867575771,
  -1158123960,
  -255298318,
  -1560281665,
  2018981315,
  1095125611,
  -805091767,
  -719399578,
  -62589858,
  -315197960,
  -1403235305,
  -463102498,
  1391152843,
  1114461491,
  1474324816,
  1178065455,
  -419758406,
  1416544366,
  -153921951,
  941014720,
  1332425548,
  1220679752,
  -1204528898,
  -981309999,
  -805017906,
  -1008388230,
  913636031,
  1758526035,
  1651468117,
  -190685874,
  1837105133,
  2019405171,
  370636718,
  2025182442,
  -1332946078,
  -110893034,
  505097393,
  -2032737802,
  2001394371,
  1398033993,
  -353434790,
  1858506615,
  -613386710,
  316088899,
  1474233639,
  1768475381,
  340859467,
  -2079822146,
  915304532,
  1929379690,
  1062860575,
  1846363114,
  -328068001,
  -1764424854,
  190534600,
  -574880894,
  -880064888,
  1917147264,
  -893094328,
  483961515,
  1212947060,
  -552318228,
  570940212,
  1284306771,
  -905719700,
  -12307668,
  937155583,
  1350049334,
  -1163765407,
  -1872155435,
  -1036696201,
  1500236860,
  -1353022655,
  392483653,
  929118460,
  -1469702424,
  1616213995,
  -1581527402,
  1783788777,
  -75485095,
  944029770,
  -1207505781,
  1693237917,
  -36541849,
  -1493658809,
  -1048299549,
  1952670824,
  1748488292,
  1801011569,
  1039597567,
  149435234,
  -121064988,
  268399464,
  -1073951782,
  1408409742,
  -398609394,
  1878986672,
  462377356,
  -1072955554,
  2120372049,
  -2139860797,
  1181643005,
  899978394,
  224323834,
  -1031415723,
  426727280,
  2119696265,
  1358729772,
  -1672405406,
  -193343526,
  962282149,
  -235135478,
  -1016201342,
  -1139594912,
  877549044,
  1297115715,
  1365463774,
  405303376,
  -1493602214,
  2016757878,
  -2121760843,
  1215125702,
  4311124,
  -1073766596,
  -1618339126,
  1335296793,
  -1487494925,
  -245152479,
  1349819115,
  12627798,
  2011888746,
  1755073382,
  179943439,
  1651263378,
  2031239270,
  218153000,
  1989034126,
  368146804,
  441645224,
  1752053096,
  -1232481280,
  1610612426,
  -438746978,
  -863867416,
  550785826,
  680760344,
  1434546674,
  1640201726,
  -1264274533,
  -258977428,
  -234665405,
  -948936886,
  1195908671,
  -1001960887,
  239159367,
  -2008757196,
  -846284143,
  -1114456833,
  168219184,
  -280246577,
  1917902947,
  794707269,
  1699801444,
  1120444231,
  -2100046896,
  1214125521,
  1055678797,
  1540454195,
  -273658572,
  -132373406,
  2022616163,
  -629145615,
  -1891991485,
  1797725149,
  2086163034,
  1530899616,
  880986778,
  -122116014,
  1391516218,
  1516537922,
  521126479,
  -268231620,
  1362544270,
  -23374673,
  -1205010433,
  -248696926,
  1706135495,
  -1552733518,
  -479124842,
  111366201,
  473446554,
  -947385588,
  177737806,
  -514395649,
  -1941907830,
  1664501863,
  1836247590,
  1756168304,
  -384280637,
  57563223,
  -621123855,
  2147483202,
  -938252413,
  -1270033557,
  531612890,
  58020621,
  -1968947072,
  -1493411188,
  -945765488,
  1995477718,
  1115119927,
  1097338910,
  1444154107,
  1214663269,
  1121238192,
  -1130311602,
  -849611816,
  -1061474864,
  261486060,
  1391487499,
  406141630,
  -1616568818,
  -537354123,
  1174652466,
  -1953885904,
  -595801344,
  1131992860,
  -386928683,
  1817794158,
  1088043075,
  1379227980,
  264356014,
  1187417086,
  1132781512,
  -126990286,
  857870335,
  -1628692745,
  1448516319,
  1135942825,
  -1949800370,
  197217985,
  1139818270,
  -291353489,
  -2107362989,
  1132036989,
  -1949773581,
  -945666342,
  1229550186,
  1545037560,
  1247855064,
  238317122,
  927347648,
  163577717,
  -1771565564,
  912759965,
  -335099084,
  -697232716,
  215834700,
  -1657013202,
  1427290400,
  1448608360,
  -602979787,
  111198753,
  6911694,
  -1201213306,
  1793589771,
  1669343865,
  1509975365,
  -133219799,
  -527253443,
  -127612,
  1973173423,
  358084423,
  850548721
}; // weak


//----- (00D4E300) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, int a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>)
{
  int *v4; // esi
  int *v5; // edi
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  int i; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  unsigned int v16; // eax
  bool v17; // zf
  int v18; // ebx
  int v19; // ett
  unsigned int v20; // eax
  bool v21; // cf
  int v22; // ebx
  int v23; // ett
  bool v24; // cf
  int v25; // ebx
  int v26; // ett
  int v27; // ecx
  int v28; // ecx
  unsigned int v29; // eax
  unsigned int v30; // eax
  int v31; // eax
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  bool v35; // cf
  int v36; // ebx
  int v37; // ett
  bool v38; // cf
  int v39; // ebx
  int v40; // ebx
  int v41; // ett
  bool v42; // zf
  int v43; // ebx
  int v44; // ett
  unsigned int v45; // ecx
  char *v46; // edx
  char v47; // al
  int v48; // eax
  bool v49; // cc
  int *v50; // esi
  int *v51; // edi
  int v52; // ecx
  char v53; // al
  unsigned __int8 v54; // al
  int v55; // eax
  int v56; // eax
  char v57; // t0
  unsigned __int8 v58; // bl
  char *v59; // edi
  int v60; // eax
  int *v61; // ebx
  int v62; // ebp
  char v63; // al
  char *v64; // ecx
  char v65; // al
  int v66; // eax
  void (__cdecl *v67)(int *, int, int, int *); // ebp
  int *v68; // edi
  int v69[4]; // [esp+1Ch] [ebp-90h] BYREF
  int v70; // [esp+2Ch] [ebp-80h] BYREF
  int v71; // [esp+30h] [ebp-7Ch] BYREF
  char *v72; // [esp+34h] [ebp-78h]
  int *v73; // [esp+38h] [ebp-74h]
  int v74; // [esp+3Ch] [ebp-70h]
  int v75; // [esp+40h] [ebp-6Ch]
  int v76; // [esp+44h] [ebp-68h]
  int v77; // [esp+48h] [ebp-64h]
  int *v78; // [esp+4Ch] [ebp-60h]
  int v79; // [esp+50h] [ebp-5Ch]
  int v80; // [esp+54h] [ebp-58h]
  int v81; // [esp+58h] [ebp-54h]
  int v82; // [esp+5Ch] [ebp-50h] BYREF

  v78 = &v82;
  v76 = a3;
  v75 = a2;
  v74 = a1;
  v4 = dword_D35000;
  v5 = &dword_D35000[-2412544];
  v73 = &dword_D35000[-2412544];
  while ( 1 )
  {
    v9 = *v4;
    v7 = (unsigned int)v4++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v4;
        v4 = (int *)((char *)v4 + 1);
        *(_BYTE *)v5 = v6;
        v5 = (int *)((char *)v5 + 1);
      }
      else
      {
        for ( i = 1; ; i = v20 + v21 + v20 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v16 = i + v12 + i;
          v7 = __CFADD__(v13, v13);
          v17 = 2 * v13 == 0;
          v8 = 2 * v13;
          if ( v7 )
          {
            if ( !v17 )
              break;
            v18 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v19 = v7 + v18;
            v7 = __CFADD__(v7, v18) | __CFADD__(v18, v19);
            v8 = v18 + v19;
            if ( v7 )
              break;
          }
          v20 = v16 - 1;
          v21 = __CFADD__(v8, v8);
          v8 *= 2;
          if ( !v8 )
          {
            v22 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v23 = v7 + v22;
            v21 = __CFADD__(v7, v22) | __CFADD__(v22, v23);
            v8 = v22 + v23;
          }
        }
        v28 = 0;
        v7 = v16 < 3;
        v29 = v16 - 3;
        if ( v7 )
        {
          v32 = __CFADD__(v8, v8);
          v8 *= 2;
          if ( !v8 )
          {
            v33 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v34 = v7 + v33;
            v32 = __CFADD__(v7, v33) | __CFADD__(v33, v34);
            v8 = v33 + v34;
          }
        }
        else
        {
          v30 = v29 << 8;
          LOBYTE(v30) = *(_BYTE *)v4;
          v4 = (int *)((char *)v4 + 1);
          v31 = ~v30;
          if ( !v31 )
          {
            v50 = v73;
            v51 = v73;
            v52 = 923;
            while ( 1 )
            {
              v53 = *(_BYTE *)v51;
              v51 = (int *)((char *)v51 + 1);
              v54 = v53 + 24;
              while ( v54 <= 1u && !*(_BYTE *)v51 )
              {
                v55 = *v51;
                LOWORD(v55) = BYTE1(*v51);
                v56 = __ROL4__(v55, 16);
                v57 = v56;
                LOBYTE(v56) = BYTE1(v56);
                BYTE1(v56) = v57;
                v58 = *((_BYTE *)v51 + 4) + 24;
                *v51 = (int)v50 + v56 - (_DWORD)v51;
                v51 = (int *)((char *)v51 + 5);
                v54 = v58;
                if ( !--v52 )
                {
                  v59 = (char *)dword_94C000 + (_DWORD)v50;
LABEL_44:
                  v60 = *(_DWORD *)v59;
                  if ( *(_DWORD *)v59 )
                  {
                    v61 = (int *)((char *)v50 + *((_DWORD *)v59 + 1));
                    v59 += 8;
                    v62 = (*(int (__cdecl **)(char *, int, int, int, int, int *, int, int, int))((char *)&dword_94F1A0
                                                                                               + (_DWORD)v50))(
                            (char *)dword_94F164 + (_DWORD)v50 + v60,
                            v74,
                            v75,
                            v76,
                            v77,
                            v78,
                            v79,
                            v80,
                            v81);
                    while ( 1 )
                    {
                      v63 = *v59++;
                      if ( !v63 )
                        goto LABEL_44;
                      v64 = v59;
                      v72 = v59;
                      v65 = v63 - 1;
                      do
                      {
                        if ( !v64 )
                          break;
                        v17 = *v59++ == v65;
                        --v64;
                      }
                      while ( !v17 );
                      v66 = (*(int (__cdecl **)(int, char *))((char *)&dword_94F1A4 + (_DWORD)v50))(v62, v72);
                      if ( !v66 )
                        break;
                      *v61++ = v66;
                    }
                    v60 = (*(int (**)(void))((char *)&dword_94F1B4 + (_DWORD)v50))();
                  }
                  v67 = *(void (__cdecl **)(int *, int, int, int *))((char *)&dword_94F1A8 + (_DWORD)v50);
                  v68 = v50 - 1024;
                  v70 = v60;
                  v67(v50 - 1024, 4096, 4, &v70);
                  *((_BYTE *)v68 + 527) &= ~0x80u;
                  *((_BYTE *)v68 + 567) &= ~0x80u;
                  v67(v50 - 1024, 4096, v69[0], v69);
                  do
                    v70 = 0;
                  while ( &v70 != &v71 - 32 );
                  JUMPOUT(0x405FCF);
                }
              }
            }
          }
          v32 = v31 & 1;
          a4 = v31 >> 1;
        }
        if ( v32 )
          goto LABEL_15;
        v28 = 1;
        v35 = __CFADD__(v8, v8);
        v8 *= 2;
        if ( !v8 )
        {
          v36 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v37 = v7 + v36;
          v35 = __CFADD__(v7, v36) | __CFADD__(v36, v37);
          v8 = v36 + v37;
        }
        if ( v35 )
        {
LABEL_15:
          v24 = __CFADD__(v8, v8);
          v8 *= 2;
          if ( !v8 )
          {
            v25 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v26 = v7 + v25;
            v24 = __CFADD__(v7, v25) | __CFADD__(v25, v26);
            v8 = v25 + v26;
          }
          v27 = v28 + v24 + v28;
        }
        else
        {
          while ( 1 )
          {
            v38 = __CFADD__(v8, v8);
            v39 = 2 * v8;
            if ( !v39 )
            {
              v40 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v41 = v7 + v40;
              v38 = __CFADD__(v7, v40) | __CFADD__(v40, v41);
              v39 = v40 + v41;
            }
            v28 += v38 + v28;
            v7 = __CFADD__(v39, v39);
            v42 = 2 * v39 == 0;
            v8 = 2 * v39;
            if ( v7 )
            {
              if ( !v42 )
                break;
              v43 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v44 = v7 + v43;
              v7 = __CFADD__(v7, v43) | __CFADD__(v43, v44);
              v8 = v43 + v44;
              if ( v7 )
                break;
            }
          }
          v27 = v28 + 2;
        }
        v45 = (a4 < 0xFFFFFB00) + v27 + 2;
        v46 = (char *)v5 + a4;
        if ( a4 <= 0xFFFFFFFC )
        {
          do
          {
            v48 = *(_DWORD *)v46;
            v46 += 4;
            *v5++ = v48;
            v49 = v45 <= 4;
            v45 -= 4;
          }
          while ( !v49 );
          v5 = (int *)((char *)v5 + v45);
        }
        else
        {
          do
          {
            v47 = *v46++;
            *(_BYTE *)v5 = v47;
            v5 = (int *)((char *)v5 + 1);
            --v45;
          }
          while ( v45 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// D4E4A3: positive sp value 50 has been found
// D4E4A3: control flows out of bounds to 405FCF
// 94C000: using guessed type int dword_94C000[3161];
// 94F164: using guessed type int dword_94F164[15];
// 94F1A0: using guessed type int dword_94F1A0;
// 94F1A4: using guessed type int dword_94F1A4;
// 94F1A8: using guessed type int dword_94F1A8;
// 94F1B4: using guessed type int dword_94F1B4;
// D35000: using guessed type int dword_D35000[512];
// D4E300: using guessed type int anonymous_0[4];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
