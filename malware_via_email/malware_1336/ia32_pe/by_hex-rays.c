/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall start(int@<eax>, char *@<edx>, int@<ecx>, unsigned int@<ebp>);

//-------------------------------------------------------------------------
// Data declarations

int dword_5D7A78; // weak
int dword_9CD000[512] =
{
  -540821,
  5242880,
  419494107,
  -2130527267,
  1090910743,
  -2147483453,
  -9568506,
  -1433973634,
  259464685,
  4199412,
  1217863390,
  -1376353996,
  -517347,
  -1946159105,
  688399428,
  -2116931127,
  33489386,
  1492091750,
  -2129076031,
  -1089649170,
  417907167,
  2145377279,
  12681523,
  788530943,
  -1056878641,
  1904941370,
  1038582060,
  2135315723,
  1190903807,
  -259932111,
  1405168526,
  1946564918,
  -336133884,
  -708485660,
  -32693579,
  -687866401,
  1284233463,
  2109879729,
  -635319159,
  369463140,
  -6905,
  -1050583255,
  -561439496,
  -650777983,
  -13547150,
  -1188694143,
  -537024544,
  -135053313,
  -926849327,
  681898763,
  -164542265,
  -260046849,
  -1487254207,
  -1994126333,
  46842167,
  1075999592,
  -2117890048,
  897451722,
  -159885,
  130550574,
  169542893,
  558080,
  16791213,
  -20119497,
  1372143,
  -232190614,
  -895536128,
  -1174916860,
  -1195380772,
  393724570,
  1195245564,
  825426803,
  -1017716951,
  -838739679,
  270791396,
  -1090526811,
  -115212289,
  -1065272781,
  -1154154995,
  -709180585,
  822102726,
  -1984833799,
  -1187083290,
  -268466213,
  2063139094,
  -914010383,
  -645271435,
  -227519046,
  -905901543,
  -9560065,
  -289328501,
  780275487,
  1525451032,
  300210965,
  -1033503985,
  1718556160,
  561739815,
  7612468,
  -534168568,
  -63238851,
  1091540923,
  2127382985,
  1299907048,
  -1184432088,
  -34067223,
  -1925820969,
  467992599,
  -222228499,
  -789687266,
  1474427655,
  449822998,
  1595312996,
  1074771983,
  -570679337,
  -1561394287,
  -1194456203,
  -1061209461,
  -33572342,
  -1686736650,
  -33465116,
  126605057,
  -907510505,
  -13595780,
  2038157295,
  -252146940,
  1628343069,
  -276708153,
  2002016421,
  2145322344,
  164909296,
  -972717647,
  -846614045,
  -1094308015,
  1885274904,
  -1043005729,
  1080562126,
  1841796289,
  365686719,
  -3526210,
  -67663407,
  -1866203937,
  -1073495935,
  -155059928,
  -1256495097,
  -379065126,
  1479235063,
  1307604990,
  -1910899286,
  -1995194099,
  -1027512609,
  -544479476,
  831434607,
  437225942,
  814245897,
  -917022291,
  -269789922,
  702298161,
  768892864,
  130032945,
  -270484531,
  2114084691,
  -664593233,
  1889358325,
  -1846800447,
  1265389293,
  44742947,
  22737162,
  -654606393,
  404290068,
  -394170346,
  -831021843,
  1646868363,
  1701962749,
  -677019327,
  1748167953,
  2146989869,
  -1678309092,
  409322998,
  171409630,
  -243507917,
  1936746495,
  -354282034,
  -1558853503,
  -1855445006,
  1431194185,
  1964799503,
  -574224362,
  -1324709096,
  873724998,
  -410388356,
  -1685008351,
  1694914411,
  -556727327,
  605355315,
  1799249854,
  -987034834,
  -121479457,
  2121940969,
  769775105,
  -1959671837,
  -263782138,
  1878990271,
  -136151568,
  1254567945,
  -1827780827,
  -1202282497,
  474085583,
  1175777244,
  -299237621,
  -2126266032,
  533184807,
  -581402871,
  -755177030,
  133223348,
  469927559,
  -1048571006,
  -520157961,
  2114961918,
  -961995011,
  -941912162,
  -286962138,
  566826071,
  1887317446,
  1643140122,
  948635329,
  -22148089,
  1321280283,
  1085169337,
  2062095153,
  1985969918,
  2100923200,
  936148874,
  -1996030271,
  1329953158,
  -1912980289,
  -541407401,
  -1994377610,
  1006884385,
  -1566509276,
  -280344,
  236507254,
  -1680920211,
  -521702917,
  -1523974519,
  -1990841358,
  471378162,
  2025942030,
  2009754398,
  1057365823,
  -1407437000,
  277739760,
  -51274917,
  -40339329,
  -202109,
  270555186,
  1469114337,
  -4224687,
  -1950222210,
  -317709196,
  226265936,
  956521047,
  41943224,
  -1074425,
  136136455,
  589333367,
  -2131408926,
  -311099329,
  -520611535,
  122675395,
  1346394136,
  -1727779981,
  -557057193,
  1543039341,
  1492482588,
  -620457328,
  -33567729,
  -121241343,
  -1956238145,
  -406719170,
  -32901118,
  -1121984011,
  1912168401,
  -939273737,
  -821866739,
  -309721250,
  -1000897405,
  -419475960,
  46574932,
  755030024,
  542397441,
  352342147,
  -1465843512,
  -113401184,
  -1442944590,
  9371740,
  1986632489,
  -796888739,
  1495269289,
  1889634822,
  988974080,
  362152038,
  1257639168,
  234881022,
  -1918411050,
  -307731853,
  -398471491,
  1287985099,
  236961487,
  -45606,
  -1633711489,
  1474624822,
  2097008695,
  915391673,
  1836795643,
  -927188793,
  -438,
  -766632494,
  -1698899230,
  1935930210,
  -1469673327,
  1358020486,
  -11489132,
  -1910439937,
  1557764714,
  1842992385,
  -1996102105,
  1317553713,
  -1826677097,
  -911,
  -885985281,
  -1321530695,
  -529996256,
  964397950,
  613055793,
  -1537671126,
  7215993,
  2147363337,
  265433721,
  268497886,
  8663808,
  -79729280,
  2015107519,
  8477184,
  934608954,
  6658808,
  2031423217,
  -1078313486,
  738260316,
  -1560264960,
  -742124242,
  -74643650,
  16505779,
  381277166,
  5309982,
  -1675202649,
  -55623424,
  348113692,
  -939476100,
  -137579403,
  15420023,
  447741980,
  -1704361986,
  743030682,
  -413554222,
  788937095,
  1915567360,
  1552836964,
  -2107083965,
  1962359797,
  304946582,
  1992942861,
  1614516119,
  435764198,
  922645504,
  -900677695,
  -436335866,
  -2017738912,
  -194693828,
  714932368,
  661586150,
  2037185715,
  292049724,
  1831137694,
  -1423711488,
  -1847623814,
  -133951674,
  637612920,
  49679951,
  -109113249,
  1269091207,
  11276726,
  1124091227,
  -1329367366,
  -1040293903,
  857728301,
  4935346,
  178853788,
  -807043584,
  19144943,
  625905164,
  -1479212949,
  -1048578343,
  4739423,
  -185426418,
  13542912,
  -788266785,
  1542518403,
  -285082786,
  -1274368219,
  -585735163,
  -2015887314,
  -872415489,
  185917046,
  -954072466,
  247495168,
  1962995334,
  64787145,
  1577978839,
  1287405868,
  1213702731,
  770668095,
  -1449470977,
  -648530777,
  -748238401,
  -204450107,
  428342704,
  -2007565433,
  480428356,
  2125953718,
  -839973384,
  -385262940,
  1327318743,
  1568286314,
  -1124319573,
  -1833841175,
  641927936,
  1405887660,
  -218513625,
  1577102002,
  -17644765,
  2101042321,
  -11704245,
  -1432369089,
  1536033287,
  -1467085609,
  43764736,
  57416822,
  -96,
  973100183,
  633992325,
  -953042150,
  -951884537,
  -353706071,
  -1823136857,
  1862681602,
  -448,
  2032021924,
  458668953,
  2082792431,
  1342281337,
  -1595460888,
  -10903537,
  363143167,
  -310325271,
  -1386108865,
  120976731,
  -2145660841,
  1060341799,
  1593659669,
  625585934,
  -1601224195,
  -509114648,
  -2108709256,
  -941387139,
  -101422911,
  1346956683,
  940055611,
  1851965933,
  -26052608,
  -542598298,
  -240218783,
  -857467579,
  -36617119,
  1558158237,
  1697465453,
  961806486,
  1071604338,
  -1692517955,
  1012460691,
  1823865704,
  1503946683,
  -882125347,
  -202379008,
  177749021,
  -320508109,
  -1709599791,
  1131292558,
  -1006125468,
  -134819414,
  150391425,
  243754,
  -568783723,
  -719094614,
  344336595,
  -704038608,
  729219005,
  -116363246,
  111980860,
  984533514,
  853495313,
  -55386186,
  -653774462
}; // weak


//----- (009D5630) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall start(int a1@<eax>, char *a2@<edx>, int a3@<ecx>, unsigned int a4@<ebp>)
{
  int *v4; // esi
  int *v5; // edi
  char v6; // al
  bool v7; // cf
  int v8; // ebx
  int v9; // ebx
  int v10; // ett
  int i; // eax
  bool v12; // cf
  int v13; // ebx
  int v14; // ebx
  int v15; // ett
  unsigned int v16; // eax
  bool v17; // zf
  int v18; // ebx
  int v19; // ebx
  int v20; // ett
  unsigned int v21; // eax
  bool v22; // cf
  int v23; // ebx
  int v24; // ett
  unsigned int v25; // eax
  unsigned int v26; // eax
  int v27; // eax
  bool v28; // cf
  int v29; // ebx
  int v30; // ett
  BOOL v31; // ecx
  bool v32; // cf
  int v33; // ebx
  int v34; // ett
  int v35; // ecx
  int v36; // ecx
  bool v37; // cf
  int v38; // ebx
  int v39; // ebx
  int v40; // ett
  bool v41; // zf
  int v42; // ebx
  int v43; // ett
  unsigned int v44; // ecx
  char v45; // al
  int v46; // eax
  bool v47; // cc
  int *v48; // esi
  int *v49; // edi
  int v50; // ecx
  char v51; // al
  int *v52; // eax
  int v53; // eax
  int v54; // eax
  char v55; // t0
  char v56; // bl
  void (__cdecl *v57)(int *, int, int, int *); // ebp
  int *v58; // edi
  int v59[4]; // [esp+10h] [ebp-90h] BYREF
  int *v60; // [esp+20h] [ebp-80h] BYREF
  _DWORD v61[8]; // [esp+24h] [ebp-7Ch] BYREF
  int v62; // [esp+44h] [ebp-5Ch] BYREF

  v61[4] = &v62;
  v61[2] = a3;
  v61[1] = a2;
  v61[0] = a1;
  v4 = dword_9CD000;
  v5 = &dword_9CD000[-1519616];
  v60 = &dword_9CD000[-1519616];
  while ( 1 )
  {
    v9 = *v4;
    v7 = (unsigned int)v4++ < 0xFFFFFFFC;
    v10 = v7 + v9;
    v7 = __CFADD__(v7, v9) | __CFADD__(v9, v10);
    v8 = v9 + v10;
    do
    {
      if ( v7 )
      {
        v6 = *(_BYTE *)v4;
        v4 = (int *)((char *)v4 + 1);
        *(_BYTE *)v5 = v6;
        v5 = (int *)((char *)v5 + 1);
      }
      else
      {
        for ( i = 1; ; i = v21 + v22 + v21 )
        {
          v12 = __CFADD__(v8, v8);
          v13 = 2 * v8;
          if ( !v13 )
          {
            v14 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v15 = v7 + v14;
            v12 = __CFADD__(v7, v14) | __CFADD__(v14, v15);
            v13 = v14 + v15;
          }
          v16 = i + v12 + i;
          v7 = __CFADD__(v13, v13);
          v17 = 2 * v13 == 0;
          v18 = 2 * v13;
          if ( v7 )
          {
            if ( !v17 )
              break;
            v19 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v20 = v7 + v19;
            v7 = __CFADD__(v7, v19) | __CFADD__(v19, v20);
            v18 = v19 + v20;
            if ( v7 )
              break;
          }
          v21 = v16 - 1;
          v22 = __CFADD__(v18, v18);
          v8 = 2 * v18;
          if ( !v8 )
          {
            v23 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v24 = v7 + v23;
            v22 = __CFADD__(v7, v23) | __CFADD__(v23, v24);
            v8 = v23 + v24;
          }
        }
        v7 = v16 < 3;
        v25 = v16 - 3;
        if ( v7 )
        {
          v28 = __CFADD__(v18, v18);
          v18 *= 2;
          if ( !v18 )
          {
            v29 = *v4;
            v7 = (unsigned int)v4++ < 0xFFFFFFFC;
            v30 = v7 + v29;
            v28 = __CFADD__(v7, v29) | __CFADD__(v29, v30);
            v18 = v29 + v30;
          }
        }
        else
        {
          v26 = v25 << 8;
          LOBYTE(v26) = *(_BYTE *)v4;
          v4 = (int *)((char *)v4 + 1);
          v27 = ~v26;
          if ( !v27 )
          {
            v48 = v60;
            v49 = v60;
            v50 = 5;
            while ( 1 )
            {
              v51 = *(_BYTE *)v49;
              v49 = (int *)((char *)v49 + 1);
              LOBYTE(v52) = v51 + 24;
              while ( (unsigned __int8)v52 <= 1u && *(_BYTE *)v49 == 1 )
              {
                v53 = *v49;
                LOWORD(v53) = BYTE1(*v49);
                v54 = __ROL4__(v53, 16);
                v55 = v54;
                LOBYTE(v54) = BYTE1(v54);
                BYTE1(v54) = v55;
                v56 = *((_BYTE *)v49 + 4) + 24;
                v52 = (int *)((char *)v48 + v54 - (_DWORD)v49);
                *v49 = (int)v52;
                v49 = (int *)((char *)v49 + 5);
                LOBYTE(v52) = v56;
                if ( !--v50 )
                {
                  v57 = *(void (__cdecl **)(int *, int, int, int *))((char *)&dword_5D7A78 + (_DWORD)v48);
                  v58 = v48 - 1024;
                  v60 = v52;
                  ((void (__fastcall *)(_DWORD, char *, int *, int, int, int **))v57)(0, a2, v48 - 1024, 4096, 4, &v60);
                  *((_BYTE *)v58 + 799) &= ~0x80u;
                  *((_BYTE *)v58 + 839) &= ~0x80u;
                  v57(v48 - 1024, 4096, v59[0], v59);
                  do
                    v60 = 0;
                  while ( &v60 != &v61[-32] );
                  JUMPOUT(0x401146);
                }
              }
            }
          }
          v28 = v27 & 1;
          a4 = v27 >> 1;
        }
        v31 = v28;
        v32 = __CFADD__(v18, v18);
        v8 = 2 * v18;
        if ( !v8 )
        {
          v33 = *v4;
          v7 = (unsigned int)v4++ < 0xFFFFFFFC;
          v34 = v7 + v33;
          v32 = __CFADD__(v7, v33) | __CFADD__(v33, v34);
          v8 = v33 + v34;
        }
        v35 = v31 + v32 + v31;
        if ( !v35 )
        {
          v36 = 1;
          while ( 1 )
          {
            v37 = __CFADD__(v8, v8);
            v38 = 2 * v8;
            if ( !v38 )
            {
              v39 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v40 = v7 + v39;
              v37 = __CFADD__(v7, v39) | __CFADD__(v39, v40);
              v38 = v39 + v40;
            }
            v36 += v37 + v36;
            v7 = __CFADD__(v38, v38);
            v41 = 2 * v38 == 0;
            v8 = 2 * v38;
            if ( v7 )
            {
              if ( !v41 )
                break;
              v42 = *v4;
              v7 = (unsigned int)v4++ < 0xFFFFFFFC;
              v43 = v7 + v42;
              v7 = __CFADD__(v7, v42) | __CFADD__(v42, v43);
              v8 = v42 + v43;
              if ( v7 )
                break;
            }
          }
          v35 = v36 + 2;
        }
        v44 = (a4 < 0xFFFFFB00) + v35 + 1;
        a2 = (char *)v5 + a4;
        if ( a4 <= 0xFFFFFFFC )
        {
          do
          {
            v46 = *(_DWORD *)a2;
            a2 += 4;
            *v5++ = v46;
            v47 = v44 <= 4;
            v44 -= 4;
          }
          while ( !v47 );
          v5 = (int *)((char *)v5 + v44);
        }
        else
        {
          do
          {
            v45 = *a2++;
            *(_BYTE *)v5 = v45;
            v5 = (int *)((char *)v5 + 1);
            --v44;
          }
          while ( v44 );
        }
      }
      v7 = __CFADD__(v8, v8);
      v8 *= 2;
    }
    while ( v8 );
  }
}
// 9D577F: positive sp value 5C has been found
// 9D577F: control flows out of bounds to 401146
// 5D7A78: using guessed type int dword_5D7A78;
// 9CD000: using guessed type int dword_9CD000[512];
// 9D5630: using guessed type int anonymous_0[4];

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
