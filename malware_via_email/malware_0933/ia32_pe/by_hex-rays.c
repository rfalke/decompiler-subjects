/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall sub_4074D1(int _ECX@<ecx>, int a2@<edi>, int a3@<esi>);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_40740E; // weak
_UNKNOWN loc_40748E; // weak


//----- (004074D1) --------------------------------------------------------
void __usercall sub_4074D1(int _ECX@<ecx>, int a2@<edi>, int a3@<esi>)
{
  int v3; // esi
  _DWORD *i; // eax
  bool v6; // tt
  int v7; // eax
  int v8; // esi
  int v10; // esi
  unsigned int v11; // ebx
  int v13; // ecx
  int v17; // eax
  char *v19; // eax
  int v20; // eax
  int v21; // edi
  unsigned int v22; // ebx
  unsigned int v27; // eax
  bool v28; // cf
  int v31; // eax
  _DWORD *v35; // ecx
  int v36; // [esp-10h] [ebp-10h]

  LOBYTE(_ECX) = _ECX - 1;
  v8 = _ECX + a3;
  LOWORD(v8) = (_WORD)v8 << _ECX;
  __asm { rcr     cl, cl }
  v10 = v8 << _CL;
  HIWORD(v11) = -29462;
  __asm { rcr     cl, 16h }
  v3 = __ROL4__(v10, 7);
  for ( i = (_DWORD *)&loc_40740E; *i != 9460301; i = (_DWORD *)(((unsigned int)i - 1) >> 15 << 15) )
    ;
  v35 = i;
  if ( v3 == 1408711553 )
  {
    if ( __SETP__(1408711553, 1408711553) )
      JUMPOUT(0x407839);
  }
  else
  {
    v19 = (char *)i + i[15];
    v36 = *((_DWORD *)v19 + 20);
    v20 = (*(int (__cdecl **)(_DWORD *))((char *)v35
                                       + *(_DWORD *)((char *)v35 + *(_DWORD *)&v19[(_DWORD)&loc_40748E - 4224014] + 16)))(v35);
    if ( v20 == -867031100 )
      JUMPOUT(0x4075A4);
    _ECX = v20;
    LOBYTE(v11) = v36 - 14;
    v6 = __CFSHL__(v20, 24);
    LOBYTE(v20) = __ROL1__(v20, 24);
    BYTE1(v11) = -75 - (v6 + BYTE1(v20)) - (((unsigned __int8)(v6 + BYTE1(v20)) > 0xB5u) + 127);
    v7 = __ROL4__(v20, _ECX);
    LOWORD(v11) = v11 - v36;
    BYTE1(v7) = ~BYTE1(v7);
    LOBYTE(_ECX) = -64;
    v21 = a2 >> 10;
    LOBYTE(v7) = __ROR1__(v7 + 3, 10);
    v22 = v11 >> 2;
    --_ECX;
    LOBYTE(v22) = v36 + 100 + __CFADD__((_BYTE)v22, -67) + v22 - 67;
    _EAX = __ROL4__(v7, _ECX);
    LOBYTE(_ECX) = (_BYTE)_ECX << _ECX;
    LOBYTE(_EAX) = (char)(BYTE1(_EAX) | ((char)_EAX >> _ECX)) >> 7;
    BYTE1(_ECX) = __ROR1__(BYTE1(_ECX), _ECX);
    _EBX = v22 ^ 0x337C21C6;
    _EAX -= 1231070593;
    v28 = __CFSHL__(_EAX, 29);
    LOWORD(_EAX) = 0;
    LOBYTE(_ECX) = _ECX - (v28 + 100);
    __asm
    {
      rcr     ch, cl
      rcl     ax, cl
    }
    SBYTE1(_EBX) >>= _ECX;
    BYTE1(_EAX) = (unsigned __int8)(BYTE1(_EAX) | 0xC2) >> _ECX;
    LOBYTE(_EBX) = (_BYTE)_EBX << _ECX;
    LOBYTE(_EAX) = BYTE1(v36) + __CFSHR__(BYTE1(_EBX), _ECX) + __ROR1__(_EAX, 10);
    __asm { rcr     bl, cl }
    BYTE1(_EBX) = ((unsigned __int8)(BYTE1(_EBX) >> _ECX) ^ 3) << 7;
    v13 = _ECX >> 17;
    LOWORD(v13) = v13 + 1;
    v28 = __CFADD__(BYTE1(v13), 34);
    BYTE1(v13) += 34;
    _EAX = v28 + _EAX - 57901274;
    _ESI = v3 << v13;
    if ( _ESI != 10568597 )
    {
      _CL = 109;
      LOWORD(_EAX) = -(__int16)_EAX;
      LOBYTE(_EAX) = _EAX - 1;
      __asm { rcr     eax, 10h }
      LOWORD(_EAX) = _EBX + _EAX;
      __asm { rcl     bh, cl }
      v27 = _EAX & 0xB244A586;
      BYTE1(_EBX) = (char)(_BH - 1) >> 7;
      if ( v27 == 34938272 )
        JUMPOUT(0x407634);
      _AH = v27 + __CFSHL__(_EBX, 3) + BYTE1(v27);
      __asm { rcr     ah, 14h }
      JUMPOUT(0x407784);
    }
    _ECX = v13 - 1;
    if ( (_EAX & 0x4000) == 0 && _ECX )
      JUMPOUT(0x407598);
    LOWORD(_EAX) = _EAX - _ECX;
    __asm { rcr     al, cl }
    LOBYTE(_EAX) = _ECX + _EAX - 1;
    v17 = _EAX << 26;
    __asm { rcl     esi, 0Eh }
    LOBYTE(v17) = BYTE1(v36) | -(char)(__CFSHL__(v17, 17) + 59);
    v28 = __CFSHL__(v17, _ECX);
    LOWORD(v17) = (_WORD)v17 << _ECX;
    _EDI = v21 - (v28 + 1175101998);
    v31 = v17 + 1;
    _BL = -__ROL1__(_EBX, 22);
    __asm { rcl     edi, cl }
    --BYTE1(v31);
    LOBYTE(v31) = _ECX + (_BL != 0) - v31;
    if ( v31 != 1144386696 )
      JUMPOUT(0x4076BD);
    __asm
    {
      rcl     bl, 8
      icebp
    }
  }
}
// 4075A2: control flows out of bounds to 4075A4
// 40762E: control flows out of bounds to 407634
// 407833: control flows out of bounds to 407839
// 407480: control flows out of bounds to 4076BD
// 4075C7: control flows out of bounds to 407836
// 40754F: control flows out of bounds to 407598
// 407748: control flows out of bounds to 407784

// nfuncs=1 queued=1 decompiled=1 lumina nreq=0 worse=0 better=0
// ALL OK, 1 function(s) have been successfully decompiled
