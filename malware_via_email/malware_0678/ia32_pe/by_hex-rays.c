/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// void __usercall sub_401065(unsigned int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<edi>, double a6@<st0>);
void sub_4010C0();
_DWORD sub_40114B(); // weak
_DWORD sub_40128E(); // weak
void sub_4012E8();
// void __usercall sub_4022AD(char a1@<al>, int a2@<ecx>, int a3@<ebx>, int a4@<edi>);
// void __usercall __noreturn sub_402365(char a1@<al>, int a2@<ecx>, __int32 a3@<ebx>, int a4@<edi>);
void sub_40239D();
_DWORD nullsub_2(); // weak
// void __usercall sub_402486(char a1@<al>, int a2@<ecx>, _DWORD *a3@<ebx>, int _EDI@<edi>);
// void __usercall sub_4025A3(char a1@<cf>, int a2@<ecx>, int a3@<edi>, char a4@<sil>);
// void __usercall sub_4025DE(bool a1@<cf>, int a2@<eax>, int a3@<edx>, int a4@<ecx>, int a5@<esi>);
// void __usercall sub_402625(__int32 a1@<esi>);
_DWORD sub_402768(); // weak
_DWORD sub_40276C(); // weak
_DWORD sub_40285E(); // weak
void __fastcall sub_40289F(int a1, int a2);
// void __usercall __noreturn sub_4028B8(_DWORD *a1@<edx>, int a2@<ecx>, __int32 a3@<ebx>, int a4@<esi>);
// void __usercall __noreturn sub_4028D9(__int32 a1@<esi>);
// int __usercall sub_4028F8@<eax>(char a1@<ah>, int a2@<edx>, __int16 a3@<cx>, __int16 a4@<bx>, int a5@<esi>);
_DWORD sub_402939(); // weak
// void __usercall __noreturn sub_402982(__int32 a1@<esi>);
// int __usercall sub_402B08@<eax>(int a1@<edi>);
// void __usercall sub_402B27(int a1@<edx>, int a2@<ecx>, unsigned int _EBX@<ebx>, unsigned int a4@<edi>, int a5@<esi>);
// int __usercall sub_402BE8@<eax>(int a1@<eax>, char a2@<dl>, int a3@<ecx>, _DWORD *a4@<edi>);
void sub_402C66();
// void __usercall __noreturn sub_402DA9(__int16 a1@<dx>, int a2@<ecx>, int a3@<edi>, char a4@<sil>);
// void __usercall __noreturn sub_402E28(__int32 a1@<esi>);
// void __usercall sub_402E3F(char a1@<cf>, int a2@<ebx>, int a3@<edi>);
// void __usercall __noreturn sub_402E75(unsigned int a1@<edx>, char a2@<ch>, __int32 a3@<ebx>, int a4@<esi>);
_DWORD sub_402EB1(); // weak
// void __usercall sub_402F4C(__int16 a1@<ax>, int a2@<edx>, int a3@<ecx>, int a4@<edi>, __int32 a5@<esi>);
void __fastcall sub_402F6B(int a1, __int32 a2);
int sub_40301D(); // weak

//-------------------------------------------------------------------------
// Data declarations

char byte_401444[2] = { '\x8F', 'D' }; // weak
_UNKNOWN loc_4021D4; // weak
_UNKNOWN loc_40287D; // weak
_UNKNOWN loc_402959; // weak
_UNKNOWN loc_402C86; // weak
_UNKNOWN loc_402DEA; // weak


//----- (00401065) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_401065(unsigned int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4@<ebx>, int a5@<edi>, double a6@<st0>)
{
  int v6; // edi
  int v7; // edx
  int v8; // ecx
  __int16 v9; // t2
  char v10; // zf
  char v11; // sf
  char v12; // of
  void *v13; // [esp+24h] [ebp-4h] BYREF
  void *retaddr; // [esp+28h] [ebp+0h]

  *(&retaddr - 11) = v13;
  v6 = a5 - a2;
  v7 = a2 + 1;
  v8 = a3 + 1;
  if ( !__SETP__(a1 + a4, 0) && __SETP__(a1 + a4, 0) )
  {
    v9 = (unsigned __int16)a1 % BYTE1(a1);
    LOBYTE(a1) = (unsigned __int16)a1 / BYTE1(a1);
    BYTE1(a1) = v9;
    *(_DWORD *)a1 |= 0x2BD37A44u;
    ((void (__usercall *)(int@<ecx>, unsigned int@<edx>, double@<st0>))sub_40114B)(v8 - 1, a1 ^ (a1 + v8 + v7), a6);
    (*(void (__cdecl **)(struct _TEB *))byte_401444)(NtCurrentTeb());
    if ( v11 ^ v12 | v10 )
      JUMPOUT(0x40140D);
    JUMPOUT(0x401464);
  }
  v13 = *(void **)(a1 + 48);
  if ( !__SETP__(v6, 0) && __SETP__(v6, 0) )
  {
    if ( (int)&v13 >= 0 )
      JUMPOUT(0x401444);
    JUMPOUT(0x401473);
  }
  JUMPOUT(0x40108B);
}
// 401069: positive sp value 4 has been found
// 40140C: control flows out of bounds to 40140D
// 401442: control flows out of bounds to 401444
// 4014B6: control flows out of bounds to 40108B
// 40140A: control flows out of bounds to 401464
// 401442: control flows out of bounds to 401473
// 40140A: variable 'v11' is possibly undefined
// 40140A: variable 'v12' is possibly undefined
// 40140A: variable 'v10' is possibly undefined
// 40114B: using guessed type _DWORD sub_40114B();

//----- (004010C0) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4010C0()
{
  JUMPOUT(0x401339);
}
// 4010C4: positive sp value 4 has been found
// 4010F6: control flows out of bounds to 4011FB
// 4010CD: control flows out of bounds to 401339
// 4010D7: conditional instruction was optimized away because of 'edi.4!=0'

//----- (0040114B) --------------------------------------------------------
#error "4011F5: cannot convert to microcode (funcsize=65)"

//----- (0040128E) --------------------------------------------------------
#error "401140: cannot convert to microcode (funcsize=18)"

//----- (004012E8) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_4012E8()
{
  JUMPOUT(0x4013F4);
}
// 4012F1: positive sp value 4 has been found
// 4014E3: control flows out of bounds to 4013F4

//----- (0040140F) --------------------------------------------------------
#error "40140F: stack frame is too big (funcsize=0)"

//----- (004022AD) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4022AD(char a1@<al>, int a2@<ecx>, int a3@<ebx>, int a4@<edi>)
{
  ++BYTE1(a3);
  sub_402486(a1, a2, (_DWORD *)(a3 + 1), a4);
  JUMPOUT(0x4022C4);
}
// 4022B4: positive sp value 4 has been found
// 4022BF: control flows out of bounds to 4022C4

//----- (00402365) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn sub_402365(char a1@<al>, int a2@<ecx>, __int32 a3@<ebx>, int a4@<edi>)
{
  __int32 v4; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v4, a3);
  BYTE1(a2) += a2;
  sub_4022AD(a1, a2, v4, a4);
  __debugbreak();
}
// 40236D: positive sp value 4 has been found

//----- (0040239D) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_40239D()
{
  void *v0; // [esp+1Ch] [ebp-4h]
  void *retaddr; // [esp+20h] [ebp+0h]

  *(&retaddr - 9) = v0;
  JUMPOUT(0x402FD7);
}
// 4023A1: positive sp value 4 has been found
// 4023B3: control flows out of bounds to 402FD7

//----- (00402486) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402486(char a1@<al>, int a2@<ecx>, _DWORD *a3@<ebx>, int _EDI@<edi>)
{
  char v4; // al
  int v5; // edx
  _BYTE *v6; // ecx

  BYTE1(a3) = -(a1 ^ (BYTE1(a3) + 23));
  LOBYTE(a2) = a1 | a2;
  ((void (__thiscall *)(int, _DWORD))((char *)&loc_402DEA + 3))(a2 - 1, 0);
  __asm { repne shl dword ptr [edi], 0B4h }
  v4 = MEMORY[0x341B1B82]();
  *a3 *= 2;
  *(_DWORD *)(v5 + 802390236) = __ROR4__(*(_DWORD *)(v5 + 802390236), 1);
  *v6 = v4;
  JUMPOUT(0x402EF4);
}
// 40248A: positive sp value 4 has been found
// 402524: control flows out of bounds to 402EF4
// 402E1C: control flows out of bounds to 4022E7
// 4024A9: variable 'v5' is possibly undefined
// 40251A: variable 'v6' is possibly undefined

//----- (004025A3) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4025A3(char a1@<cf>, int a2@<ecx>, int a3@<edi>, char a4@<sil>)
{
  int v4; // edx
  __int16 v5; // ax
  int v6; // ecx
  __int16 v7; // dx
  __int16 v8; // dx
  void **v9; // [esp+8h] [ebp-4h]
  void *retaddr; // [esp+Ch] [ebp+0h] BYREF

  *(&retaddr - 4) = v9;
  HIWORD(v4) = HIWORD(a3);
  BYTE1(v4) = BYTE1(a3) - (a1 - 49);
  LOBYTE(v4) = BYTE1(a2) | (-114 - a4);
  v5 = ((int (__fastcall *)(int, int))loc_402C86)(a2, v4);
  v9 = &retaddr;
  MEMORY[0xF28BDBF6] = v6;
  v8 = v5 + v7;
  if ( !__SETP__(HIBYTE(v8) | 0xE2, 0) && __SETP__(HIBYTE(v8) | 0xE2, 0) )
    JUMPOUT(0x402664);
  JUMPOUT(0x402EDF);
}
// 4025A7: positive sp value 4 has been found
// 40265E: control flows out of bounds to 402664
// 402652: control flows out of bounds to 402EDF
// 4025C5: variable 'v6' is possibly undefined
// 40264A: variable 'v7' is possibly undefined

//----- (004025DE) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_4025DE(bool a1@<cf>, int a2@<eax>, int a3@<edx>, int a4@<ecx>, int a5@<esi>)
{
  __int32 v5; // ebx
  bool v6; // cf
  bool v7; // zf
  int v8; // ecx
  char v9; // tt
  unsigned int v10; // edx

  HIWORD(v5) = HIWORD(a2);
  LOBYTE(v5) = a2 - (a1 + 100);
  BYTE1(v5) = BYTE1(a2) - (((unsigned __int8)a2 < (unsigned __int8)(a1 + 100)) + 50);
  LOBYTE(a4) = 101;
  v6 = __CFADD__(BYTE1(a2), BYTE1(a4));
  BYTE1(a4) += BYTE1(a2) + 1;
  v7 = BYTE1(a4) == 0;
  if ( !__SETP__(BYTE1(a4), 0) && __SETP__(BYTE1(a4), 0) )
  {
    v8 = a4 - 1;
    if ( v7 )
    {
      if ( v8 )
        JUMPOUT(0x402609);
    }
    JUMPOUT(0x40260A);
  }
  LOBYTE(a4) = -102;
  v9 = v6 - 94;
  a1 = (unsigned __int8)v5 < (unsigned __int8)(v6 - 94);
  LOBYTE(v5) = v5 - v9;
  BYTE1(a4) = a1 + BYTE1(a4) - 109;
  v10 = a3 + 32;
  BYTE1(v5) = BYTE1(v10) + (v5 | BYTE1(v5));
  sub_402E75(v10, (unsigned __int16)(a4 - 1) >> 8, v5, a5 + 1);
}
// 4025E2: positive sp value 4 has been found
// 402608: control flows out of bounds to 40260A
// 402608: control flows out of bounds to 402609

//----- (00402625) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402625(__int32 a1@<esi>)
{
  __int32 v1; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v1, a1);
  JUMPOUT(0x4024EE);
}
// 40262B: positive sp value 4 has been found
// 402632: control flows out of bounds to 4024EE

//----- (0040276C) --------------------------------------------------------
#error "402785: cannot convert to microcode (funcsize=10)"

//----- (0040285E) --------------------------------------------------------
#error "40280B: call analysis failed (funcsize=204)"

//----- (0040289F) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __fastcall sub_40289F(int a1, int a2)
{
  int v3; // eax
  char v4; // cf

  v3 = ((int (*)(void))loc_402959)();
  *(_BYTE *)(v3 + a2 + 49) -= v4 + v3;
  JUMPOUT(0x40283A);
}
// 402822: positive sp value 4 has been found
// 402839: control flows out of bounds to 40283A
// 402835: variable 'v4' is possibly undefined

//----- (004028B8) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn sub_4028B8(_DWORD *a1@<edx>, int a2@<ecx>, __int32 a3@<ebx>, int a4@<esi>)
{
  BYTE1(a3) ^= BYTE1(a1);
  LOBYTE(a3) = a3 - (__CFADD__((_BYTE)a2, BYTE1(a1)) + 11);
  sub_402365(*a1, a2 - 1, a3, a4);
}
// 4028BC: positive sp value 4 has been found

//----- (004028D9) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn sub_4028D9(__int32 a1@<esi>)
{
  unsigned __int8 v1; // al
  void *v2; // [esp+14h] [ebp-4h]
  void *retaddr; // [esp+18h] [ebp+0h]

  *(&retaddr - 7) = v2;
  sub_402625(a1);
  v1 = __inbyte(0xB8u);
  __halt();
}
// 4028DD: positive sp value 4 has been found

//----- (004028F8) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_4028F8@<eax>(char a1@<ah>, int a2@<edx>, __int16 a3@<cx>, __int16 a4@<bx>, int a5@<esi>)
{
  __int16 v5; // bx
  bool v6; // zf
  bool v7; // of
  int v8; // edx

  ++BYTE1(a2);
  LOBYTE(a4) = HIBYTE(a3);
  LOBYTE(a2) = a3;
  v8 = a5 | a2;
  LOBYTE(v8) = HIBYTE(a4) | v8;
  v5 = a4 - a5;
  BYTE1(v8) -= v5;
  HIBYTE(v5) |= a1;
  v7 = __OFADD__(HIBYTE(v5), BYTE1(v8));
  v6 = HIBYTE(v5) + BYTE1(v8) == 0;
  BYTE1(v8) += HIBYTE(v5);
  if ( v7 || !v7 )
    JUMPOUT(0x4024A4);
  if ( v6 )
    JUMPOUT(0x4029AE);
  HIBYTE(a3) = 84;
  return ((int (__fastcall *)(__int16, int))sub_402939)(a3, v8);
}
// 402901: positive sp value 4 has been found
// 402923: control flows out of bounds to 4024A4
// 402932: control flows out of bounds to 4029AE
// 402939: using guessed type _DWORD sub_402939();

//----- (00402939) --------------------------------------------------------
#error "40294E: cannot convert to microcode (funcsize=9)"

//----- (00402982) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn sub_402982(__int32 a1@<esi>)
{
  void *v1; // [esp+28h] [ebp-4h]
  void *retaddr; // [esp+2Ch] [ebp+0h]

  *(&retaddr - 12) = v1;
  sub_402E28(a1);
}
// 40237D: positive sp value 4 has been found

//----- (00402B08) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_402B08@<eax>(int a1@<edi>)
{
  int v1; // eax
  int v2; // edi
  unsigned __int8 v3; // al
  void *retaddr[2]; // [esp+0h] [ebp+0h]

  v1 = sub_40301D();
  *(_BYTE *)(v1 + 39) ^= v1;
  v2 = a1 + 2;
  if ( __SETP__(v2, 0) || !__SETP__(v2, 0) )
    JUMPOUT(0x402729);
  v3 = __inbyte(0xB1u);
  return MK_FP(retaddr[0], retaddr[0])();
}
// 402B16: positive sp value 8 has been found
// 402D7B: control flows out of bounds to 402729
// 40301D: using guessed type int sub_40301D();

//----- (00402B27) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402B27(int a1@<edx>, int a2@<ecx>, unsigned int _EBX@<ebx>, unsigned int a4@<edi>, int a5@<esi>)
{
  unsigned __int32 v5; // eax
  int v6; // ecx
  char v7; // al
  unsigned int v8; // kr00_4
  char v9; // al
  unsigned int v10; // edx
  unsigned __int8 v11; // ah
  __int16 v12; // dx
  bool v13; // cf
  int v14; // edi
  unsigned int v15; // edi
  int v16; // edx
  char v17; // tt
  char v18; // tt
  bool v19; // cc

  v13 = a4 < _EBX;
  --BYTE1(a1);
  v14 = a4 - _EBX - 1;
  BYTE1(_EBX) = v13 - 123;
  v15 = v14 - _EBX;
  v16 = a1 + 1;
  v13 = __CFADD__(BYTE1(_EBX), 105);
  BYTE1(_EBX) += 105;
  v17 = v13;
  v13 = __CFADD__(v13, BYTE1(v16));
  BYTE1(v16) += v17;
  v13 |= __CFADD__(BYTE1(v16), 78);
  BYTE1(v16) += 78;
  v18 = v13 - 48;
  v13 = BYTE1(_EBX) < (unsigned __int8)(v13 - 48);
  BYTE1(_EBX) -= v18;
  v19 = v13 || (_BYTE)_EBX == 0xFF;
  LOBYTE(_EBX) = _EBX + 1;
  if ( !v19 && v19 )
  {
    _EAX = 18 * _EBX;
    __asm { xlat }
    BYTE1(_EAX) = BYTE1(_EBX) | ((unsigned __int16)(18 * _EBX) >> 8);
    LOBYTE(_EAX) = _EAX - 1 - ((_EBX < v16 + a5) + 122);
    sub_402BE8(v16 | _EAX, v16, a2 - 1, (_DWORD *)(v15 - 1));
    __asm { iret }
    JUMPOUT(0x402C60);
  }
  sub_402C66();
  BYTE1(_EBX) = -54;
  v8 = __readeflags();
  v9 = v7 - 79;
  v10 += 2;
  LOBYTE(_EBX) = v11;
  v13 = v10 < _EBX;
  v12 = v10 - _EBX;
  v13 = v11 < (unsigned __int8)(v13 - 71);
  if ( !v13 && v13 )
  {
    *(_DWORD *)(v6 - 1928954005) ^= a5;
    sub_40239D();
    v5 = __indword(7u);
    JUMPOUT(0x402A30);
  }
  LOBYTE(v12) = -64;
  HIBYTE(v12) += v9 + 75 + 1;
  sub_402DA9(v12, v6, 548761674, a5);
}
// 402B2B: positive sp value 4 has been found
// 402A2E: control flows out of bounds to 402A30
// 403018: control flows out of bounds to 403019
// 402C5F: control flows out of bounds to 402C60
// 4023ED: variable 'v6' is possibly undefined
// 402AC0: variable 'v7' is possibly undefined
// 402ACE: variable 'v10' is possibly undefined
// 402ACF: variable 'v11' is possibly undefined
// 402443: using guessed type _DWORD nullsub_2();

//----- (00402BE8) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __usercall sub_402BE8@<eax>(int a1@<eax>, char a2@<dl>, int a3@<ecx>, _DWORD *a4@<edi>)
{
  bool v4; // cc
  int result; // eax
  void *v6; // [esp+18h] [ebp-4h]
  void *retaddr[2]; // [esp+1Ch] [ebp+0h]

  retaddr[-8] = v6;
  BYTE1(a1) |= a2;
  LOBYTE(a1) = __CFSHR__(a3, 15) + a1 - 5;
  v4 = (unsigned __int8)~a2 < BYTE1(a1) || a1 == -1;
  result = a1 + 1;
  if ( v4 || !v4 )
    JUMPOUT(0x402D6E);
  *a4 = result;
  return result;
}
// 4027E5: positive sp value 4 has been found
// 402DA2: control flows out of bounds to 402D6E

//----- (00402C66) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void sub_402C66()
{
  void *v0; // [esp+10h] [ebp-4h]
  void *retaddr; // [esp+14h] [ebp+0h]

  *(&retaddr - 6) = v0;
  JUMPOUT(0x402AC3);
}
// 402688: positive sp value 4 has been found
// 4026A3: control flows out of bounds to 4026A8
// 402695: control flows out of bounds to 402AC3

//----- (00402DA9) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn sub_402DA9(__int16 a1@<dx>, int a2@<ecx>, int a3@<edi>, char a4@<sil>)
{
  sub_4025A3((unsigned __int8)(HIBYTE(a1) | a1) < 0xF3u, a2, a3 ^ 0x20B57CD5, a4);
  _EAX += 1619841193;
  __asm { aas }
  __halt();
}
// 402DAD: positive sp value 4 has been found
// 402DC6: variable '_EAX' is possibly undefined

//----- (00402E28) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn sub_402E28(__int32 a1@<esi>)
{
  sub_4028D9(a1);
}
// 402E2C: positive sp value 4 has been found

//----- (00402E3F) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402E3F(char a1@<cf>, int a2@<ebx>, int a3@<edi>)
{
  BYTE1(a2) = a1 + BYTE1(a2) - 74;
  if ( __SETP__(((int (*)(void))loc_40287D)() + a3 - a2, 0) )
    JUMPOUT(0x40305F);
  JUMPOUT(0x4030D1);
}
// 402E43: positive sp value 4 has been found
// 40305E: control flows out of bounds to 40305F
// 40305C: control flows out of bounds to 4030D1

//----- (00402E75) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall __noreturn sub_402E75(unsigned int a1@<edx>, char a2@<ch>, __int32 a3@<ebx>, int a4@<esi>)
{
  bool v4; // cf
  __int16 v5; // cx
  void *v6; // [esp+20h] [ebp-4h]
  void *retaddr; // [esp+24h] [ebp+0h]

  *(&retaddr - 10) = v6;
  v4 = BYTE1(a3) < 0x1Bu;
  BYTE1(a3) -= 27;
  LOBYTE(v5) = a2;
  HIBYTE(v5) = v4 + a2 - 86;
  LOBYTE(a3) = BYTE1(a3) + a3;
  sub_4028B8((_DWORD *)a1, v5, a3, a1 | a4);
}
// 402E79: positive sp value 4 has been found

//----- (00402EB1) --------------------------------------------------------
#error "402359: cannot convert to microcode (funcsize=42)"

//----- (00402F4C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall sub_402F4C(__int16 a1@<ax>, int a2@<edx>, int a3@<ecx>, int a4@<edi>, __int32 a5@<esi>)
{
  __int32 v5; // edx
  int v6; // edx
  __int32 v7; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v7, a5);
  LOBYTE(a2) = 106;
  v6 = a4 | a2;
  LOBYTE(v6) = ~(_BYTE)v6;
  BYTE1(v6) = ((unsigned __int8)-BYTE1(v6) < (unsigned __int8)((BYTE1(v6) != 0) + 91))
            + -BYTE1(v6)
            - ((BYTE1(v6) != 0)
             + 91)
            + 12;
  v5 = v7 ^ v6;
  LOBYTE(v5) = HIBYTE(a1) | (v5 + 1);
  BYTE1(v5) |= a1;
  ((void (__fastcall *)(int, __int32))((char *)&loc_4021D4 + 5))(a3, v5);
  JUMPOUT(0x402D03);
}
// 402CE6: positive sp value 4 has been found
// 402CFE: control flows out of bounds to 402D03

//----- (00402F6B) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __fastcall sub_402F6B(int a1, __int32 a2)
{
  __int32 v3; // [esp-4h] [ebp-4h] BYREF

  _InterlockedExchange(&v3, a2);
  __asm { rep pop edx }
  JUMPOUT(0x402CA0);
}
// 402F72: positive sp value 4 has been found
// 402F81: control flows out of bounds to 402CA0
// 402F87: conditional instruction was optimized away because of 'bl.1>=0'

// nfuncs=36 queued=32 decompiled=32 lumina nreq=0 worse=0 better=0
#error "There were 7 decompilation failure(s) on 32 function(s)"
